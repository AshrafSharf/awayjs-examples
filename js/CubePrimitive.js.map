{"version":3,"sources":["webpack:///./src/CubePrimitive.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAqK;AAC7E;AACqC;AACpE;AACf;AAE1C;AAaC;AAEK,aAAY;AACZ,aAAc;AACd,aAAc;AACd,aACL;AAAC;AAIE;;;AACK,4BAAQ,WAAhB;AAEK,aAAM,QAAG,IAAW;AACpB,aAAM,MAAgB,kBAAY;AAClC,aAAM,MAAO,OAAE,IAAO;AACtB,aAAM,MAAO,OAAE,IAAK;AACpB,aAAM,MAAO,OAAE,IACpB;AAAC;AAIE;;;AACK,4BAAU,aAAlB;AAEK,aAAO,SAAG,IAAuB;AACjC,aAAO,OAAM,QAAY;AACzB,aAAO,OAAU,YAAG,IAAY,+DAAE,GAAG,GAAK;AAC1C,aAAO,OAAQ,UAAO;AACtB,aAAO,OAAa,eAAY;AAChC,aAAO,OAAQ,UAAO;AACtB,aAAO,OAAS,WAAO;AAEvB,aAAa,eAAG,IAAqB,yEAAC,CAAK,KAChD;AAAC;AAIE;;;AACK,4BAAU,aAAlB;AAEK,aAAY,cAAG,IAAY,+DAAE,GAAG,GAAK;AACrC,aAAM,MAAO,OAAW,aAAG,IAAyB,4EAAM;AAC1D,aAAM,MAAO,OAAW,WAAK,OAClC;AAAC;AAIE;;;AACK,4BAAa,gBAArB;AAAA,oBAQC;AANA,YAAc,aAAc,IAAc,iEAA6B;AACvE,YAAa,YAAa,IAAgB;AACjC,kBAAW,aAAsB,0EAAM;AAEvC,kBAAiB,iBAAe,qEAAc,eAAE,UAAqB;AAAK,mBAAI,MAAmB,mBAAO;AAAE;AAC1G,kBAAK,KACf;AAAC;AAKE;;;;AACK,4BAAkB,qBAA1B,UAA+C;AAA/C,oBAOC;AALA,YAAe,cAAkB,MAAQ;AAErC,aAAO,SAAc,kEAAY,YAAY,YAAO;AAEpD,aAAO,OAAO,SAAG,UAAY;AAAK,mBAAI,MAAqB,qBAAO;AACvE;AAAC;AAKE;;;;AACK,4BAAoB,uBAA5B,UAAwC;AAAxC,oBAwBI;AAtBH,YAAS,QAAkB,IAAkB,0EAAW,qEAAqB,qBAAK,KAAU;AACvF,cAAM,MAAQ,UAAG,IAAa,oEAAK,MAAQ;AAC3C,cAAU,YAAY,oEAAK;AAC3B,cAAU,YAAQ;AAClB,cAAY,cAAO,KAAc;AAElC,aAAM,QAAG,IAAuB,2EAAM,OAAc,uEAAS,UAAM,MAAM,MAAQ;AACjF,aAAO,SAAG,IAAwB,4EAAM,OAAc,uEAAS,UAAK,KAAI,IAAI,IAAI,IAAQ;AAExF,aAAQ,UAAgB,KAAO,OAAgB;AAC/C,aAAS,WAAgB,KAAM,MAAgB;AAC/C,aAAS,SAAE,IAAO;AAClB,aAAS,SAAE,IAAM;AAEjB,aAAM,MAAM,MAAS,SAAK,KAAU;AACpC,aAAM,MAAM,MAAS,SAAK,KAAW;AAErC,aAAK,OAAG,IAAyB,4EAAK,KAAO,QAAQ;AACrD,aAAK,KAAS;AAEZ,eAAS,WAAG,UAAc;AAAK,mBAAI,MAAS,SAAO;AAAC;AACtD,aACF;AAAC;AAKD;;;;AACI,4BAAM,SAAb,UAA8B;AAAhB;AAAA,iBAAgB;;AAEzB,aAAM,MAAO,OAAU,UAAO,OAAK,KAAY,aAAK;AACpD,aAAQ,QAAU,aAAM;AACxB,aAAS,SAAU,aAAQ;AAC3B,aAAS,SAAU,aAAQ;AAC3B,aAAM,MACX;AAAC;AAIE;;;AACI,4BAAQ,WAAf,UAAoC;AAApB;AAAA,oBAAoB;;AAE/B,aAAM,MAAE,IAAK;AACb,aAAM,MAAE,IAAK;AAEb,aAAM,MAAM,QAAS,OAAY;AACjC,aAAM,MAAO,SAAS,OAC3B;AAAC;AACF,WAAC;AAAA;AAEK,OAAO,SAAG;AAEf,QACD;AAAC,E","file":"js/CubePrimitive.js","sourcesContent":["import {URLLoaderEvent, Vector3D, URLLoader, URLRequest, URLLoaderDataFormat, RequestAnimationFrame, PerspectiveProjection, ParserUtils} from \"awayjs-full/lib/core\";\nimport {Sampler2D, BlendMode, ElementsType, ImageUtils} from \"awayjs-full/lib/graphics\";\nimport {Sprite, DirectionalLight, PrimitiveCubePrefab, PrimitiveTorusPrefab, StaticLightPicker} from \"awayjs-full/lib/scene\";\nimport {MethodMaterial} from \"awayjs-full/lib/materials\";\nimport {View} from \"awayjs-full/lib/view\";\n\nclass CubePrimitive\n{\n\tprivate _view:View;\n\tprivate _cube:PrimitiveCubePrefab;\n\tprivate _torus:PrimitiveTorusPrefab;\n\tprivate _sprite:Sprite;\n\tprivate _sprite2:Sprite;\n\tprivate _raf:RequestAnimationFrame;\n\tprivate _image:HTMLImageElement;\n\tprivate _cameraAxis:Vector3D;\n\tprivate _light:DirectionalLight;\n\tprivate _lightPicker:StaticLightPicker;\n\n\tconstructor()\n\t{\n\t\tthis.initView();\n\t\tthis.initCamera();\n\t\tthis.initLights();\n\t\tthis.loadResources();\n\t}\n\n\t/**\n\t *\n\t */\n\tprivate initView():void\n\t{\n\t\tthis._view = new View();\n\t\tthis._view.backgroundColor = 0x000000;\n\t\tthis._view.camera.x = 130;\n\t\tthis._view.camera.y = 0;\n\t\tthis._view.camera.z = 0;\n\t}\n\n\t/**\n\t *\n\t */\n\tprivate initLights():void\n\t{\n\t\tthis._light = new DirectionalLight();\n\t\tthis._light.color = 0xffffff;\n\t\tthis._light.direction = new Vector3D(1, 0, 0);\n\t\tthis._light.ambient = 0.4;\n\t\tthis._light.ambientColor = 0x85b2cd;\n\t\tthis._light.diffuse = 2.8;\n\t\tthis._light.specular = 1.8;\n\n\t\tthis._lightPicker = new StaticLightPicker([this._light]);\n\t}\n\n\t/**\n\t *\n\t */\n\tprivate initCamera():void\n\t{\n\t\tthis._cameraAxis = new Vector3D(0, 0, 1);\n\t\tthis._view.camera.projection = new PerspectiveProjection(120);\n\t\tthis._view.camera.projection.near = 0.1;\n\t}\n\n\t/**\n\t *\n\t */\n\tprivate loadResources()\n\t{\n\t\tvar urlRequest:URLRequest = new URLRequest(\"assets/spacy_texture.png\");\n\t\tvar imgLoader:URLLoader = new URLLoader();\n\t\timgLoader.dataFormat = URLLoaderDataFormat.BLOB;\n\n\t\timgLoader.addEventListener(URLLoaderEvent.LOAD_COMPLETE, (event:URLLoaderEvent) => this.urlCompleteHandler(event));\n\t\timgLoader.load(urlRequest);\n\t}\n\n\t/**\n\t *\n\t * @param event\n\t */\n\tprivate urlCompleteHandler(event:URLLoaderEvent)\n\t{\n\t\tvar imageLoader:URLLoader = event.target;\n\n\t\tthis._image = ParserUtils.blobToImage(imageLoader.data);\n\n\t\tthis._image.onload = (event:Event) => this.imageCompleteHandler(event);\n\t}\n\n\t/**\n\t *\n\t * @param e\n\t */\n\tprivate imageCompleteHandler(event:Event)\n\t{\n\t\tvar matTx:MethodMaterial = new MethodMaterial(ImageUtils.imageToBitmapImage2D(this._image));\n\t\tmatTx.style.sampler = new Sampler2D(true, true);\n\t\tmatTx.blendMode = BlendMode.ADD;\n\t\tmatTx.bothSides = true;\n\t\tmatTx.lightPicker = this._lightPicker;\n\n\t\tthis._cube = new PrimitiveCubePrefab(matTx, ElementsType.TRIANGLE, 20.0, 20.0, 20.0);\n\t\tthis._torus = new PrimitiveTorusPrefab(matTx, ElementsType.TRIANGLE, 150, 80, 32, 16, true);\n\n\t\tthis._sprite = <Sprite> this._torus.getNewObject();\n\t\tthis._sprite2 = <Sprite> this._cube.getNewObject();\n\t\tthis._sprite2.x = 130;\n\t\tthis._sprite2.z = 40;\n\n\t\tthis._view.scene.addChild(this._sprite);\n\t\tthis._view.scene.addChild(this._sprite2);\n\n\t\tthis._raf = new RequestAnimationFrame(this.render, this);\n\t\tthis._raf.start();\n\n\t\twindow.onresize = (event:UIEvent) => this.onResize(event);\n\t\tthis.onResize();\n    }\n\n\t/**\n\t *\n\t * @param dt\n\t */\n\tpublic render(dt:number = null):void\n\t{\n\t\tthis._view.camera.transform.rotate(this._cameraAxis, 1);\n\t\tthis._sprite.rotationY += 1;\n\t\tthis._sprite2.rotationX += 0.4;\n\t\tthis._sprite2.rotationY += 0.4;\n\t\tthis._view.render();\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic onResize(event:UIEvent = null)\n\t{\n\t\tthis._view.y = 0;\n\t\tthis._view.x = 0;\n\n\t\tthis._view.width = window.innerWidth;\n\t\tthis._view.height = window.innerHeight;\n\t}\n}\n\nwindow.onload = function()\n{\n\tnew CubePrimitive();\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/CubePrimitive.ts"],"sourceRoot":""}