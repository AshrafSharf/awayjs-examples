{"version":3,"sources":["webpack:///./src/AWDSuzanne.ts"],"names":[],"mappings":"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","file":"js/AWDSuzanne.js","sourcesContent":["import {LoaderEvent, Vector3D, AssetLibrary, IAsset, Loader, URLRequest, RequestAnimationFrame} from \"awayjs-full/lib/core\";\nimport {MouseEvent, Sprite, DirectionalLight, StaticLightPicker} from \"awayjs-full/lib/scene\";\nimport {MethodMaterial} from \"awayjs-full/lib/materials\";\nimport {AWDParser} from \"awayjs-full/lib/parsers\";\nimport {View, JSPickingCollider} from \"awayjs-full/lib/view\";\n\nclass AWDSuzanne\n{\n\tprivate _view:View;\n\tprivate _timer:RequestAnimationFrame;\n\tprivate _suzane:Sprite;\n\tprivate _light:DirectionalLight;\n\tprivate _lightPicker:StaticLightPicker;\n\tprivate _lookAtPosition:Vector3D = new Vector3D();\n\tprivate _cameraIncrement:number = 0;\n\tprivate _mouseOverMaterial:MethodMaterial = new MethodMaterial(0xFF0000);\n\tprivate _mouseOutMaterial:MethodMaterial;\n\n\tconstructor()\n\t{\n\t\tthis.initView();\n\t\tthis.loadAssets();\n\t\tthis.initLights();\n\n\t\twindow.onresize  = (event:UIEvent) => this.onResize(event);\n\n\t\tthis.onResize();\n\t}\n\n\t/**\n\t *\n\t */\n\tprivate initView():void\n\t{\n\t\tthis._view = new View();\n\t\tthis._view.camera.projection.far = 6000;\n\t\tthis._view.forceMouseMove = true;\n\t}\n\n\t/**\n\t *\n\t */\n\tprivate loadAssets():void\n\t{\n\t\tthis._timer = new RequestAnimationFrame(this.render, this);\n\t\tthis._timer.start();\n\n\t\tAssetLibrary.enableParser(AWDParser);\n\n\t\tvar session:Loader = AssetLibrary.getLoader();\n\t\tsession.addEventListener(LoaderEvent.LOAD_COMPLETE, (event:LoaderEvent) => this.onResourceComplete(event));\n\t\tsession.load(new URLRequest('assets/suzanne.awd'));\n\t}\n\n\t/**\n\t *\n\t */\n\tprivate initLights():void\n\t{\n\t\tthis._light = new DirectionalLight();\n\t\tthis._light.color = 0x683019;\n\t\tthis._light.direction = new Vector3D(1, 0, 0);\n\t\tthis._light.ambient = 0.1;\n\t\tthis._light.ambientColor = 0x85b2cd;\n\t\tthis._light.diffuse = 2.8;\n\t\tthis._light.specular = 1.8;\n\t\tthis._view.scene.addChild(this._light);\n\t\tthis._lightPicker = new StaticLightPicker([this._light]);\n\t}\n\n\t/**\n\t *\n\t */\n\tprivate onResize(event:UIEvent = null):void\n\t{\n\t\tthis._view.y = 0;\n\t\tthis._view.x = 0;\n\t\tthis._view.width = window.innerWidth;\n\t\tthis._view.height = window.innerHeight;\n\t}\n\n\t/**\n\t *\n\t * @param dt\n\t */\n\tprivate render(dt:number) //animate based on dt for firefox\n\t{\n\t\tif (this._view.camera) {\n\t\t\tthis._view.camera.lookAt(this._lookAtPosition);\n\t\t\tthis._cameraIncrement += 0.01;\n\t\t\tthis._view.camera.x = Math.cos(this._cameraIncrement)*1400;\n\t\t\tthis._view.camera.z = Math.sin(this._cameraIncrement)*1400;\n\n\t\t\tthis._light.x = Math.cos(this._cameraIncrement)*1400;\n\t\t\tthis._light.y = Math.sin(this._cameraIncrement)*1400;\n\n\t\t}\n\n\t\tthis._view.render();\n\t}\n\n\t/**\n\t *\n\t * @param e\n\t */\n\tpublic onResourceComplete(e:LoaderEvent)\n\t{\n\t\tvar loader:Loader = e.target;\n\t\tvar numAssets:number = loader.baseDependency.assets.length;\n\n\t\tfor (var i:number = 0; i < numAssets; ++i) {\n\t\t\tvar asset:IAsset = loader.baseDependency.assets[ i ];\n\n\t\t\tswitch(asset.assetType) {\n\t\t\t\tcase Sprite.assetType:\n\n\t\t\t\t\tvar sprite:Sprite = <Sprite> asset;\n\n\t\t\t\t\tthis._suzane = sprite;\n\t\t\t\t\t(<MethodMaterial> this._suzane.material).lightPicker = this._lightPicker;\n\t\t\t\t\tthis._suzane.y = -100;\n\t\t\t\t\tthis._mouseOutMaterial = <MethodMaterial> this._suzane.material;\n\n\t\t\t\t\tfor (var c:number = 0; c < 80; c++) {\n\n\t\t\t\t\t\tvar clone:Sprite = <Sprite> sprite.clone();\n\t\t\t\t\t\tvar scale:number = this.getRandom(50, 200);\n\t\t\t\t\t\tclone.x = this.getRandom(-2000, 2000);\n\t\t\t\t\t\tclone.y = this.getRandom(-2000, 2000);\n\t\t\t\t\t\tclone.z = this.getRandom(-2000, 2000);\n\t\t\t\t\t\tclone.transform.scaleTo(scale, scale, scale);\n\t\t\t\t\t\tclone.rotationY = this.getRandom (0, 360);\n\t\t\t\t\t\tclone.addEventListener(MouseEvent.MOUSE_OVER, (event:MouseEvent) => this.onMouseOver(event));\n\t\t\t\t\t\tclone.addEventListener(MouseEvent.MOUSE_OUT, (event:MouseEvent) => this.onMouseOut(event));\n\t\t\t\t\t\tthis._view.scene.addChild(clone);\n\t\t\t\t\t}\n\n\t\t\t\t\tsprite.transform.scaleTo(500, 500, 500);\n\t\t\t\t\tsprite.addEventListener(MouseEvent.MOUSE_OVER, (event:MouseEvent) => this.onMouseOver(event));\n\t\t\t\t\tsprite.addEventListener(MouseEvent.MOUSE_OUT, (event:MouseEvent) => this.onMouseOut(event));\n\t\t\t\t\tthis._view.scene.addChild(sprite);\n\t\t\t\t\tthis._view.setCollider(sprite, new JSPickingCollider());\n\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onMouseOver(event:MouseEvent)\n\t{\n\t\t(<Sprite> event.entity).material = this._mouseOverMaterial;\n\n\t\tconsole.log(\"mouseover\");\n\t}\n\n\tprivate onMouseOut(event:MouseEvent)\n\t{\n\t\t(<Sprite> event.entity).material = this._mouseOutMaterial;\n\n\t\tconsole.log(\"mouseout\");\n\t}\n\n\t/**\n\t *\n\t * @param min\n\t * @param max\n\t * @returns {number}\n\t */\n\tprivate getRandom(min:number, max:number):number\n\t{\n\t\treturn Math.random()*(max - min) + min;\n\t}\n}\n\nwindow.onload = function()\n{\n\tnew AWDSuzanne();\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/AWDSuzanne.ts"],"sourceRoot":""}