/*

 AWD3 file loading example in AwayJS

 Demonstrates:

 How to use the Loader object to load an embedded internal awd model.

 Code by Rob Bateman
 rob@infiniteturtles.co.uk
 http://www.infiniteturtles.co.uk

 This code is distributed under the MIT License

 Copyright (c) The Away Foundation http://www.theawayfoundation.org

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the “Software”), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.

 */
var AssetLibrary = require("awayjs-core/lib/library/AssetLibrary");
var AssetType = require("awayjs-core/lib/library/AssetType");
var AssetEvent = require("awayjs-core/lib/events/AssetEvent");
var URLRequest = require("awayjs-core/lib/net/URLRequest");
var LoaderEvent = require("awayjs-core/lib/events/LoaderEvent");
var OrthographicProjection = require("awayjs-core/lib/projections/OrthographicProjection");
var RequestAnimationFrame = require("awayjs-core/lib/utils/RequestAnimationFrame");
var View = require("awayjs-display/lib/containers/View");
var Mesh = require("awayjs-display/lib/entities/Mesh");
var Geometry = require("awayjs-display/lib/base/Geometry");
var HoverController = require("awayjs-display/lib/controllers/HoverController");
var Loader = require("awayjs-display/lib/containers/Loader");
var DefaultRenderer = require("awayjs-renderergl/lib/DefaultRenderer");
var AWDParser = require("awayjs-parsers/lib/AWDParser");
var CoordinateSystem = require("awayjs-core/lib/projections/CoordinateSystem");
var PerspectiveProjection = require("awayjs-core/lib/projections/PerspectiveProjection");
var Camera = require("awayjs-display/lib/entities/Camera");
var AWD3FontViewer = (function () {
    /**
     * Constructor
     */
    function AWD3FontViewer() {
        this._time = 0;
        this.init();
    }
    /**
     * Global initialise function
     */
    AWD3FontViewer.prototype.init = function () {
        this.initEngine();
        this.initObjects();
        this.initListeners();
    };
    /**
     * Initialise the engine
     */
    AWD3FontViewer.prototype.initEngine = function () {
        //create the view
        this._view = new View(new DefaultRenderer());
        //this._view.renderer.renderableSorter = new RenderableNullSort();
        this._view.backgroundColor = 0xffffff;
        this._stage_width = 550;
        this._stage_height = 400;
        this._isperspective = true;
        this._projection = new PerspectiveProjection();
        this._projection.coordinateSystem = CoordinateSystem.RIGHT_HANDED;
        this._projection.focalLength = 1000;
        this._projection.preserveFocalLength = true;
        this._projection.originX = 0.5;
        this._projection.originY = 0.5;
        this._camera_perspective = new Camera();
        this._camera_perspective.projection = this._projection;
        //this._projection.far = 500000;
        this._hoverControl = new HoverController(this._camera_perspective, null, 180, 0, 1000);
        this._ortho_projection = new OrthographicProjection(500);
        this._ortho_projection.coordinateSystem = CoordinateSystem.RIGHT_HANDED;
        this._ortho_projection.far = 500000;
        this._ortho_projection.near = 0.1;
        this._ortho_projection.originX = 0.5;
        this._ortho_projection.originY = 0.5;
        this._camera_ortho = new Camera();
        this._camera_ortho.projection = this._ortho_projection;
        this._view.camera = this._camera_perspective;
        this._camera_ortho.x = 0;
        this._camera_ortho.y = 0;
        this._camera_ortho.scaleY = -1;
        this._camera_ortho.z = 0;
    };
    /**
     * Initialise the scene objects
     */
    AWD3FontViewer.prototype.initObjects = function () {
        var _this = this;
        AssetLibrary.enableParser(AWDParser);
        //kickoff asset loading
        var loader = new Loader();
        loader.addEventListener(AssetEvent.ASSET_COMPLETE, function (event) { return _this.onAssetComplete(event); });
        loader.addEventListener(LoaderEvent.RESOURCE_COMPLETE, function (event) { return _this.onRessourceComplete(event); });
        loader.load(new URLRequest("assets/AWD3/Fonttable_test.awd"));
    };
    /**
     * Initialise the listeners
     */
    AWD3FontViewer.prototype.initListeners = function () {
        var _this = this;
        window.onresize = function (event) { return _this.onResize(event); };
        document.onkeydown = function (event) { return _this.onKeyDown(event); };
        document.onmousedown = function (event) { return _this.onMouseDown(event); };
        document.onmouseup = function (event) { return _this.onMouseUp(event); };
        document.onmousemove = function (event) { return _this.onMouseMove(event); };
        document.onmousewheel = function (event) { return _this.onMouseWheel(event); };
        this.onResize();
        this._timer = new RequestAnimationFrame(this.onEnterFrame, this);
        this._timer.start();
    };
    /**
     * loader listener for asset complete events
     */
    AWD3FontViewer.prototype.onAssetComplete = function (event) {
        if (event.asset.assetType == AssetType.FONT) {
            console.log("Font finished!!! ");
            var thisfont = event.asset;
            var thisfonttable = thisfont.get_font_table("RegularStyle");
            var font_chars = thisfonttable.get_font_chars();
            var charcnt_sqr = Math.sqrt(font_chars.length);
            var font_em_size = thisfonttable.get_font_em_size() / 100;
            var position_x = -(charcnt_sqr / 2) * font_em_size;
            var position_y = -(charcnt_sqr / 2) * font_em_size;
            var k = 0;
            var pos_x = position_x;
            var pos_y = position_y;
            for (var i = 0; i < font_chars.length; i++) {
                var newmesh = new Mesh(new Geometry());
                if (k >= charcnt_sqr) {
                    k = 0;
                    pos_x = position_x;
                    pos_y += font_em_size;
                }
                k++;
                var thischar = font_chars[i];
                //thischar.applyTransformation(transMatrix);
                newmesh.geometry.addSubGeometry(thischar);
                pos_x += font_em_size;
                newmesh.x = pos_x;
                newmesh.y = pos_y;
                newmesh.scaleX = newmesh.scaleY = newmesh.scaleZ = 0.01;
                //console.log("Font x = ", newmesh.x, "Font y = ", newmesh.y);
                this._view.scene.addChild(newmesh);
            }
        }
        if (event.asset.assetType == AssetType.TIMELINE) {
        }
    };
    /**
     * loader listener for asset complete events
     */
    AWD3FontViewer.prototype.onRessourceComplete = function (event) {
        if (this._rootTimeLine) {
        }
    };
    /**
     * Render loop
     */
    AWD3FontViewer.prototype.onEnterFrame = function (dt) {
        this._time += dt;
        //update camera controler
        // this._cameraController.update();
        if (this._rootTimeLine != undefined) {
            //console.log("RENDER = ");
            this._rootTimeLine.update(dt);
        }
        //console.log("RENDER = ");
        //update view
        this._view.render();
    };
    AWD3FontViewer.prototype.onKeyDown = function (event) {
        console.log("keycode = " + event.keyCode);
        if (event.keyCode == 80) {
            this._isperspective = true;
            this._view.camera = this._camera_perspective;
        }
        if (event.keyCode == 79) {
            this._isperspective = false;
            this._view.camera = this._camera_ortho;
        }
        if (event.keyCode == 81) {
            if (this._isperspective) {
                this._hoverControl.distance += 5;
            }
            else {
                this._ortho_projection.projectionHeight += 5;
            }
        }
        else if (event.keyCode == 87) {
            if (this._isperspective) {
                this._hoverControl.distance -= 5;
            }
            else {
                this._ortho_projection.projectionHeight -= 5;
            }
        }
        if (event.keyCode == 65) {
            if (this._isperspective) {
                this._hoverControl.distance += 50;
            }
            else {
                this._ortho_projection.projectionHeight += 50;
            }
        }
        else if (event.keyCode == 83) {
            if (this._isperspective) {
                this._hoverControl.distance -= 50;
            }
            else {
                this._ortho_projection.projectionHeight -= 50;
            }
        }
    };
    AWD3FontViewer.prototype.onMouseDown = function (event) {
        this._lastPanAngle = this._hoverControl.panAngle;
        this._lastTiltAngle = this._hoverControl.tiltAngle;
        this._lastMouseX = event.clientX;
        this._lastMouseY = event.clientY;
        this._move = true;
    };
    AWD3FontViewer.prototype.onMouseUp = function (event) {
        this._move = false;
    };
    AWD3FontViewer.prototype.onMouseMove = function (event) {
        if (this._move) {
            if (this._isperspective) {
                this._hoverControl.panAngle = 0.3 * (event.clientX - this._lastMouseX) + this._lastPanAngle;
                this._hoverControl.tiltAngle = -0.3 * (event.clientY - this._lastMouseY) + this._lastTiltAngle;
            }
            else {
                if (event.clientX > (this._lastMouseX + 10))
                    this._camera_ortho.x -= 10;
                else if (event.clientX > this._lastMouseX)
                    this._camera_ortho.x--;
                else if (event.clientX < (this._lastMouseX - 10))
                    this._camera_ortho.x += 10;
                else if (event.clientX < this._lastMouseX)
                    this._camera_ortho.x++;
                if (event.clientY > (this._lastMouseY + 10))
                    this._camera_ortho.y -= 10;
                else if (event.clientY > this._lastMouseY)
                    this._camera_ortho.y--;
                else if (event.clientY < (this._lastMouseY - 10))
                    this._camera_ortho.y += 10;
                else if (event.clientY < this._lastMouseY)
                    this._camera_ortho.y++;
                this._lastMouseX = event.clientX;
                this._lastMouseY = event.clientY;
            }
        }
    };
    AWD3FontViewer.prototype.onMouseWheel = function (event) {
        if (this._isperspective) {
            this._hoverControl.distance -= event.wheelDelta * 5;
            if (this._hoverControl.distance < 100) {
                this._hoverControl.distance = 100;
            }
        }
        else {
            this._ortho_projection.projectionHeight -= event.wheelDelta * 5;
            if (this._ortho_projection.projectionHeight < 5) {
                this._ortho_projection.projectionHeight = 5;
            }
        }
    };
    AWD3FontViewer.prototype.onResize = function (event) {
        if (event === void 0) { event = null; }
        this._view.y = 0;
        this._view.x = 0;
        this._view.width = window.innerWidth;
        this._view.height = window.innerHeight;
    };
    return AWD3FontViewer;
})();
window.onload = function () {
    new AWD3FontViewer();
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9BV0QzRm9udFZpZXdlci50cyJdLCJuYW1lcyI6WyJBV0QzRm9udFZpZXdlciIsIkFXRDNGb250Vmlld2VyLmNvbnN0cnVjdG9yIiwiQVdEM0ZvbnRWaWV3ZXIuaW5pdCIsIkFXRDNGb250Vmlld2VyLmluaXRFbmdpbmUiLCJBV0QzRm9udFZpZXdlci5pbml0T2JqZWN0cyIsIkFXRDNGb250Vmlld2VyLmluaXRMaXN0ZW5lcnMiLCJBV0QzRm9udFZpZXdlci5vbkFzc2V0Q29tcGxldGUiLCJBV0QzRm9udFZpZXdlci5vblJlc3NvdXJjZUNvbXBsZXRlIiwiQVdEM0ZvbnRWaWV3ZXIub25FbnRlckZyYW1lIiwiQVdEM0ZvbnRWaWV3ZXIub25LZXlEb3duIiwiQVdEM0ZvbnRWaWV3ZXIub25Nb3VzZURvd24iLCJBV0QzRm9udFZpZXdlci5vbk1vdXNlVXAiLCJBV0QzRm9udFZpZXdlci5vbk1vdXNlTW92ZSIsIkFXRDNGb250Vmlld2VyLm9uTW91c2VXaGVlbCIsIkFXRDNGb250Vmlld2VyLm9uUmVzaXplIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQWtDRztBQUVILElBQU8sWUFBWSxXQUFlLHNDQUFzQyxDQUFDLENBQUM7QUFDMUUsSUFBTyxTQUFTLFdBQWUsbUNBQW1DLENBQUMsQ0FBQztBQUNwRSxJQUFPLFVBQVUsV0FBZSxtQ0FBbUMsQ0FBQyxDQUFDO0FBQ3JFLElBQU8sVUFBVSxXQUFlLGdDQUFnQyxDQUFDLENBQUM7QUFDbEUsSUFBTyxXQUFXLFdBQWUsb0NBQW9DLENBQUMsQ0FBQztBQUd2RSxJQUFPLHNCQUFzQixXQUFZLG9EQUFvRCxDQUFDLENBQUM7QUFFL0YsSUFBTyxxQkFBcUIsV0FBWSw2Q0FBNkMsQ0FBQyxDQUFDO0FBRXZGLElBQU8sSUFBSSxXQUFpQixvQ0FBb0MsQ0FBQyxDQUFDO0FBQ2xFLElBQU8sSUFBSSxXQUFpQixrQ0FBa0MsQ0FBQyxDQUFDO0FBRWhFLElBQU8sUUFB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QkEsRUFBRUEsVUFBQ0EsS0FBa0JBLElBQUtBLE9BQUFBLEtBQUlBLENBQUNBLG1CQUFtQkEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsRUFBL0JBLENBQStCQSxDQUFDQSxDQUFDQTtRQUVoSEEsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsSUFBSUEsVUFBVUEsQ0FBQ0EsZ0NBQWdDQSxDQUFDQSxDQUFDQSxDQUFDQTtJQUMvREEsQ0FBQ0E7SUFFREo7O09BRUdBO0lBQ0tBLHNDQUFhQSxHQUFyQkE7UUFBQUssaUJBY0NBO1FBWkFBLE1BQU1BLENBQUNBLFFBQVFBLEdBQUlBLFVBQUNBLEtBQUtBLElBQUtBLE9BQUFBLEtBQUlBLENBQUNBLFFBQVFBLENBQUNBLEtBQUtBLENBQUNBLEVBQXBCQSxDQUFvQkEsQ0FBQ0E7UUFFbkRBLFFBQVFBLENBQUNBLFNBQVNBLEdBQUdBLFVBQUNBLEtBQUtBLElBQUtBLE9BQUFBLEtBQUlBLENBQUNBLFNBQVNBLENBQUNBLEtBQUtBLENBQUNBLEVBQXJCQSxDQUFxQkEsQ0FBQ0E7UUFDdERBLFFBQVFBLENBQUNBLFdBQVdBLEdBQUdBLFVBQUNBLEtBQUtBLElBQUtBLE9BQUFBLEtBQUlBLENBQUNBLFdBQVdBLENBQUNBLEtBQUtBLENBQUNBLEVBQXZCQSxDQUF1QkEsQ0FBQ0E7UUFDMURBLFFBQVFBLENBQUNBLFNBQVNBLEdBQUdBLFVBQUNBLEtBQUtBLElBQUtBLE9BQUFBLEtBQUlBLENBQUNBLFNBQVNBLENBQUNBLEtBQUtBLENBQUNBLEVBQXJCQSxDQUFxQkEsQ0FBQ0E7UUFDdERBLFFBQVFBLENBQUNBLFdBQVdBLEdBQUdBLFVBQUNBLEtBQUtBLElBQUtBLE9BQUFBLEtBQUlBLENBQUNBLFdBQVdBLENBQUNBLEtBQUtBLENBQUNBLEVBQXZCQSxDQUF1QkEsQ0FBQ0E7UUFDMURBLFFBQVFBLENBQUNBLFlBQVlBLEdBQUdBLFVBQUNBLEtBQUtBLElBQUtBLE9BQUFBLEtBQUlBLENBQUNBLFlBQVlBLENBQUNBLEtBQUtBLENBQUNBLEVBQXhCQSxDQUF3QkEsQ0FBQ0E7UUFF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Q0FBQ0EsQ0FBQ0EsR0FBV0EsQ0FBQ0EsQ0FBQ0E7UUFDekJBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBLEdBQVdBLENBQUNBLENBQUNBO1FBQ3pCQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxLQUFLQSxHQUFPQSxNQUFNQSxDQUFDQSxVQUFVQSxDQUFDQTtRQUN6Q0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsTUFBTUEsR0FBTUEsTUFBTUEsQ0FBQ0EsV0FBV0EsQ0FBQ0E7SUFDM0NBLENBQUNBO0lBRUZkLHFCQUFDQTtBQUFEQSxDQWpUQSxBQWlUQ0EsSUFBQTtBQUVELE1BQU0sQ0FBQyxNQUFNLEdBQUc7SUFDZixJQUFJLGNBQWMsRUFBRSxDQUFDO0FBQ3RCLENBQUMsQ0FBQyIsImZpbGUiOiJBV0QzRm9udFZpZXdlci5qcyIsInNvdXJjZVJvb3QiOiIuLyIsInNvdXJjZXNDb250ZW50IjpbIi8qXHJcblxyXG4gQVdEMyBmaWxlIGxvYWRpbmcgZXhhbXBsZSBpbiBBd2F5SlNcclxuXHJcbiBEZW1vbnN0cmF0ZXM6XHJcblxyXG4gSG93IHRvIHVzZSB0aGUgTG9hZGVyIG9iamVjdCB0byBsb2FkIGFuIGVtYmVkZGVkIGludGVybmFsIGF3ZCBtb2RlbC5cclxuXHJcbiBDb2RlIGJ5IFJvYiBCYXRlbWFuXHJcbiByb2JAaW5maW5pdGV0dXJ0bGVzLmNvLnVrXHJcbiBodHRwOi8vd3d3LmluZmluaXRldHVydGxlcy5jby51a1xyXG5cclxuIFRoaXMgY29kZSBpcyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2VcclxuXHJcbiBDb3B5cmlnaHQgKGMpIFRoZSBBd2F5IEZvdW5kYXRpb24gaHR0cDovL3d3dy50aGVhd2F5Zm91bmRhdGlvbi5vcmdcclxuXHJcbiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XHJcbiBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSDigJxTb2Z0d2FyZeKAnSksIHRvIGRlYWxcclxuIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcclxuIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcclxuIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xyXG4gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcclxuXHJcbiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxyXG4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXHJcblxyXG4gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIOKAnEFTIElT4oCdLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXHJcbiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcclxuIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxyXG4gQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxyXG4gTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcclxuIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cclxuIFRIRSBTT0ZUV0FSRS5cclxuXHJcbiAqL1xyXG5cclxuaW1wb3J0IEFzc2V0TGlicmFyeVx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvbGlicmFyeS9Bc3NldExpYnJhcnlcIik7XHJcbmltcG9ydCBBc3NldFR5cGVcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2xpYnJhcnkvQXNzZXRUeXBlXCIpO1xyXG5pbXBvcnQgQXNzZXRFdmVudFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvZXZlbnRzL0Fzc2V0RXZlbnRcIik7XHJcbmltcG9ydCBVUkxSZXF1ZXN0XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9uZXQvVVJMUmVxdWVzdFwiKTtcclxuaW1wb3J0IExvYWRlckV2ZW50XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9ldmVudHMvTG9hZGVyRXZlbnRcIik7XHJcbmltcG9ydCBWZWN0b3IzRFx0XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9nZW9tL1ZlY3RvcjNEXCIpO1xyXG5pbXBvcnQgT3J0aG9ncmFwaGljT2ZmQ2VudGVyUHJvamVjdGlvblx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvcHJvamVjdGlvbnMvT3J0aG9ncmFwaGljT2ZmQ2VudGVyUHJvamVjdGlvblwiKTtcclxuaW1wb3J0IE9ydGhvZ3JhcGhpY1Byb2plY3Rpb25cdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL3Byb2plY3Rpb25zL09ydGhvZ3JhcGhpY1Byb2plY3Rpb25cIik7XHJcbmltcG9ydCBLZXlib2FyZFx0XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi91aS9LZXlib2FyZFwiKTtcclxuaW1wb3J0IFJlcXVlc3RBbmltYXRpb25GcmFtZVx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvdXRpbHMvUmVxdWVzdEFuaW1hdGlvbkZyYW1lXCIpO1xyXG5cclxuaW1wb3J0IFZpZXdcdFx0XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi9jb250YWluZXJzL1ZpZXdcIik7XHJcbmltcG9ydCBNZXNoXHRcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvZW50aXRpZXMvTWVzaFwiKTtcclxuaW1wb3J0IENvbnRhaW5lclx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvY29udGFpbmVycy9EaXNwbGF5T2JqZWN0Q29udGFpbmVyXCIpO1xyXG5pbXBvcnQgR2VvbWV0cnlcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvYmFzZS9HZW9tZXRyeVwiKTtcclxuaW1wb3J0IEhvdmVyQ29udHJvbGxlclx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL2NvbnRyb2xsZXJzL0hvdmVyQ29udHJvbGxlclwiKTtcclxuaW1wb3J0IExvYWRlclx0XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi9jb250YWluZXJzL0xvYWRlclwiKTtcclxuaW1wb3J0IENvbG9yTWF0ZXJpYWxcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi9tYXRlcmlhbHMvQmFzaWNNYXRlcmlhbFwiKTtcclxuaW1wb3J0IFJlbmRlcmFibGVOdWxsU29ydFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi9zb3J0L1JlbmRlcmFibGVOdWxsU29ydFwiKTtcclxuaW1wb3J0IFByaW1pdGl2ZUN1YmVQcmVmYWJcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvcHJlZmFicy9QcmltaXRpdmVDdWJlUHJlZmFiXCIpO1xyXG5cclxuaW1wb3J0IERlZmF1bHRSZW5kZXJlclx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXJlbmRlcmVyZ2wvbGliL0RlZmF1bHRSZW5kZXJlclwiKTtcclxuXHJcbmltcG9ydCBNZXRob2RNYXRlcmlhbFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLW1ldGhvZG1hdGVyaWFscy9saWIvTWV0aG9kTWF0ZXJpYWxcIik7XHJcbmltcG9ydCBNZXRob2RSZW5kZXJlclBvb2xcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtbWV0aG9kbWF0ZXJpYWxzL2xpYi9wb29sL01ldGhvZFJlbmRlcmVyUG9vbFwiKTtcclxuXHJcbmltcG9ydCBBV0RQYXJzZXJcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXBhcnNlcnMvbGliL0FXRFBhcnNlclwiKTtcclxuaW1wb3J0IFBhcnRpdGlvbjJEXHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1wbGF5ZXIvbGliL2ZsL3BhcnRpdGlvbi9QYXJ0aXRpb24yRFwiKTtcclxuaW1wb3J0IE1vdmllQ2xpcFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcGxheWVyL2xpYi9mbC9kaXNwbGF5L01vdmllQ2xpcFwiKTtcclxuXHJcbmltcG9ydCBDb29yZGluYXRlU3lzdGVtID0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9wcm9qZWN0aW9ucy9Db29yZGluYXRlU3lzdGVtXCIpO1xyXG5pbXBvcnQgUGVyc3BlY3RpdmVQcm9qZWN0aW9uID0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9wcm9qZWN0aW9ucy9QZXJzcGVjdGl2ZVByb2plY3Rpb25cIik7XHJcbmltcG9ydCBDYW1lcmEgPSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL2VudGl0aWVzL0NhbWVyYVwiKTtcclxuXHJcbmltcG9ydCBGb250XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi90ZXh0L0ZvbnRcIik7XHJcbmltcG9ydCBUZXNzZWxhdGVkRm9udFRhYmxlXHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi90ZXh0L1Rlc3NlbGF0ZWRGb250VGFibGVcIik7XHJcbmltcG9ydCBTdWJHZW9tZXRyeUJhc2VcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL2Jhc2UvU3ViR2VvbWV0cnlCYXNlXCIpO1xyXG5pbXBvcnQgTWF0cml4M0RcdFx0XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9nZW9tL01hdHJpeDNEXCIpO1xyXG5cclxuY2xhc3MgQVdEM0ZvbnRWaWV3ZXJcclxue1xyXG5cdC8vZW5naW5lIHZhcmlhYmxlc1xyXG5cdHByaXZhdGUgX3ZpZXc6IFZpZXc7XHJcblxyXG5cdHByaXZhdGUgX3Jvb3RUaW1lTGluZTogTW92aWVDbGlwO1xyXG5cclxuXHRwcml2YXRlIF90aW1lcjogUmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xyXG5cdHByaXZhdGUgX3RpbWU6IG51bWJlciA9IDA7XHJcblxyXG5cdC8vbmF2aWdhdGlvblxyXG5cdHByaXZhdGUgX2xhc3RQYW5BbmdsZTogbnVtYmVyO1xyXG5cdHByaXZhdGUgX2xhc3RUaWx0QW5nbGU6IG51bWJlcjtcclxuXHRwcml2YXRlIF9sYXN0TW91c2VYOiBudW1iZXI7XHJcblx0cHJpdmF0ZSBfbGFzdE1vdXNlWTogbnVtYmVyO1xyXG5cdHByaXZhdGUgX21vdmU6IGJvb2xlYW47XHJcblx0cHJpdmF0ZSBfaXNwZXJzcGVjdGl2ZTogYm9vbGVhbjtcclxuXHRwcml2YXRlIF9wcm9qZWN0aW9uOiBQZXJzcGVjdGl2ZVByb2plY3Rpb247XHJcblx0cHJpdmF0ZSBfb3J0aG9fcHJvamVjdGlvbjogT3J0aG9ncmFwaGljUHJvamVjdGlvbjtcclxuXHRwcml2YXRlIF9ob3ZlckNvbnRyb2w6IEhvdmVyQ29udHJvbGxlcjtcclxuXHRwcml2YXRlIF9jYW1lcmFfcGVyc3BlY3RpdmU6IENhbWVyYTtcclxuXHRwcml2YXRlIF9jYW1lcmFfb3J0aG86IENhbWVyYTtcclxuXHRwcml2YXRlIF9zdGFnZV93aWR0aDogbnVtYmVyO1xyXG5cdHByaXZhdGUgX3N0YWdlX2hlaWdodDogbnVtYmVyO1xyXG5cclxuXHQvKipcclxuXHQgKiBDb25zdHJ1Y3RvclxyXG5cdCAqL1xyXG5cdGNvbnN0cnVjdG9yKClcclxuXHR7XHJcblx0XHR0aGlzLmluaXQoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdsb2JhbCBpbml0aWFsaXNlIGZ1bmN0aW9uXHJcblx0ICovXHJcblx0cHJpdmF0ZSBpbml0KCk6IHZvaWRcclxuXHR7XHJcblx0XHR0aGlzLmluaXRFbmdpbmUoKTtcclxuXHRcdHRoaXMuaW5pdE9iamVjdHMoKTtcclxuXHRcdHRoaXMuaW5pdExpc3RlbmVycygpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSW5pdGlhbGlzZSB0aGUgZW5naW5lXHJcblx0ICovXHJcblx0cHJpdmF0ZSBpbml0RW5naW5lKCk6IHZvaWRcclxuXHR7XHJcblx0XHQvL2NyZWF0ZSB0aGUgdmlld1xyXG5cdFx0dGhpcy5fdmlldyA9IG5ldyBWaWV3KG5ldyBEZWZhdWx0UmVuZGVyZXIoKSk7XHJcblx0XHQvL3RoaXMuX3ZpZXcucmVuZGVyZXIucmVuZGVyYWJsZVNvcnRlciA9IG5ldyBSZW5kZXJhYmxlTnVsbFNvcnQoKTtcclxuXHRcdHRoaXMuX3ZpZXcuYmFja2dyb3VuZENvbG9yID0gMHhmZmZmZmY7XHJcblx0XHR0aGlzLl9zdGFnZV93aWR0aCA9IDU1MDtcclxuXHRcdHRoaXMuX3N0YWdlX2hlaWdodCA9IDQwMDtcclxuXHRcdHRoaXMuX2lzcGVyc3BlY3RpdmU9dHJ1ZTtcclxuXHRcdHRoaXMuX3Byb2plY3Rpb24gPSBuZXcgUGVyc3BlY3RpdmVQcm9qZWN0aW9uKCk7XHJcblx0XHR0aGlzLl9wcm9qZWN0aW9uLmNvb3JkaW5hdGVTeXN0ZW0gPSBDb29yZGluYXRlU3lzdGVtLlJJR0hUX0hBTkRFRDtcclxuXHRcdHRoaXMuX3Byb2plY3Rpb24uZm9jYWxMZW5ndGggPSAxMDAwO1xyXG5cdFx0dGhpcy5fcHJvamVjdGlvbi5wcmVzZXJ2ZUZvY2FsTGVuZ3RoID0gdHJ1ZTtcclxuXHRcdHRoaXMuX3Byb2plY3Rpb24ub3JpZ2luWCA9IDAuNTtcclxuXHRcdHRoaXMuX3Byb2plY3Rpb24ub3JpZ2luWSA9IDAuNTtcclxuXHRcdHRoaXMuX2NhbWVyYV9wZXJzcGVjdGl2ZSA9IG5ldyBDYW1lcmEoKTtcclxuXHRcdHRoaXMuX2NhbWVyYV9wZXJzcGVjdGl2ZS5wcm9qZWN0aW9uID0gdGhpcy5fcHJvamVjdGlvbjtcclxuXHRcdC8vdGhpcy5fcHJvamVjdGlvbi5mYXIgPSA1MDAwMDA7XHJcblx0XHR0aGlzLl9ob3ZlckNvbnRyb2wgPSBuZXcgSG92ZXJDb250cm9sbGVyKHRoaXMuX2NhbWVyYV9wZXJzcGVjdGl2ZSwgbnVsbCwgMTgwLCAwLCAxMDAwKTtcclxuXHRcdHRoaXMuX29ydGhvX3Byb2plY3Rpb24gPSBuZXcgT3J0aG9ncmFwaGljUHJvamVjdGlvbig1MDApO1xyXG5cdFx0dGhpcy5fb3J0aG9fcHJvamVjdGlvbi5jb29yZGluYXRlU3lzdGVtID0gQ29vcmRpbmF0ZVN5c3RlbS5SSUdIVF9IQU5ERUQ7XHJcblx0XHR0aGlzLl9vcnRob19wcm9qZWN0aW9uLmZhciA9IDUwMDAwMDtcclxuXHRcdHRoaXMuX29ydGhvX3Byb2plY3Rpb24ubmVhciA9IDAuMTtcclxuXHRcdHRoaXMuX29ydGhvX3Byb2plY3Rpb24ub3JpZ2luWCA9IDAuNTtcclxuXHRcdHRoaXMuX29ydGhvX3Byb2plY3Rpb24ub3JpZ2luWSA9IDAuNTtcclxuXHRcdHRoaXMuX2NhbWVyYV9vcnRobyA9IG5ldyBDYW1lcmEoKTtcclxuXHRcdHRoaXMuX2NhbWVyYV9vcnRoby5wcm9qZWN0aW9uID0gdGhpcy5fb3J0aG9fcHJvamVjdGlvbjtcclxuXHRcdHRoaXMuX3ZpZXcuY2FtZXJhID0gdGhpcy5fY2FtZXJhX3BlcnNwZWN0aXZlO1xyXG5cdFx0dGhpcy5fY2FtZXJhX29ydGhvLnggPSAwO1xyXG5cdFx0dGhpcy5fY2FtZXJhX29ydGhvLnkgPSAwO1xyXG5cdFx0dGhpcy5fY2FtZXJhX29ydGhvLnNjYWxlWSA9IC0xO1xyXG5cdFx0dGhpcy5fY2FtZXJhX29ydGhvLnogPSAwO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSW5pdGlhbGlzZSB0aGUgc2NlbmUgb2JqZWN0c1xyXG5cdCAqL1xyXG5cdHByaXZhdGUgaW5pdE9iamVjdHMoKTogdm9pZFxyXG5cdHtcclxuXHRcdEFzc2V0TGlicmFyeS5lbmFibGVQYXJzZXIoQVdEUGFyc2VyKTtcclxuXHJcblx0XHQvL2tpY2tvZmYgYXNzZXQgbG9hZGluZ1xyXG5cdFx0dmFyIGxvYWRlcjpMb2FkZXIgPSBuZXcgTG9hZGVyKCk7XHJcblx0XHRsb2FkZXIuYWRkRXZlbnRMaXN0ZW5lcihBc3NldEV2ZW50LkFTU0VUX0NPTVBMRVRFLCAoZXZlbnQ6IEFzc2V0RXZlbnQpID0+IHRoaXMub25Bc3NldENvbXBsZXRlKGV2ZW50KSk7XHJcblx0XHRsb2FkZXIuYWRkRXZlbnRMaXN0ZW5lcihMb2FkZXJFdmVudC5SRVNPVVJDRV9DT01QTEVURSwgKGV2ZW50OiBMb2FkZXJFdmVudCkgPT4gdGhpcy5vblJlc3NvdXJjZUNvbXBsZXRlKGV2ZW50KSk7XHJcblxyXG5cdFx0bG9hZGVyLmxvYWQobmV3IFVSTFJlcXVlc3QoXCJhc3NldHMvQVdEMy9Gb250dGFibGVfdGVzdC5hd2RcIikpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSW5pdGlhbGlzZSB0aGUgbGlzdGVuZXJzXHJcblx0ICovXHJcblx0cHJpdmF0ZSBpbml0TGlzdGVuZXJzKCk6IHZvaWRcclxuXHR7XHJcblx0XHR3aW5kb3cub25yZXNpemUgID0gKGV2ZW50KSA9PiB0aGlzLm9uUmVzaXplKGV2ZW50KTtcclxuXHJcblx0XHRkb2N1bWVudC5vbmtleWRvd24gPSAoZXZlbnQpID0+IHRoaXMub25LZXlEb3duKGV2ZW50KTtcclxuXHRcdGRvY3VtZW50Lm9ubW91c2Vkb3duID0gKGV2ZW50KSA9PiB0aGlzLm9uTW91c2VEb3duKGV2ZW50KTtcclxuXHRcdGRvY3VtZW50Lm9ubW91c2V1cCA9IChldmVudCkgPT4gdGhpcy5vbk1vdXNlVXAoZXZlbnQpO1xyXG5cdFx0ZG9jdW1lbnQub25tb3VzZW1vdmUgPSAoZXZlbnQpID0+IHRoaXMub25Nb3VzZU1vdmUoZXZlbnQpO1xyXG5cdFx0ZG9jdW1lbnQub25tb3VzZXdoZWVsID0gKGV2ZW50KSA9PiB0aGlzLm9uTW91c2VXaGVlbChldmVudCk7XHJcblxyXG5cdFx0dGhpcy5vblJlc2l6ZSgpO1xyXG5cclxuXHRcdHRoaXMuX3RpbWVyID0gbmV3IFJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLm9uRW50ZXJGcmFtZSwgdGhpcyk7XHJcblx0XHR0aGlzLl90aW1lci5zdGFydCgpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogbG9hZGVyIGxpc3RlbmVyIGZvciBhc3NldCBjb21wbGV0ZSBldmVudHNcclxuXHQgKi9cclxuXHRwcml2YXRlIG9uQXNzZXRDb21wbGV0ZShldmVudDogQXNzZXRFdmVudCk6IHZvaWRcclxuXHR7XHJcblx0XHRpZihldmVudC5hc3NldC5hc3NldFR5cGUgPT0gQXNzZXRUeXBlLkZPTlQpIHtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJGb250IGZpbmlzaGVkISEhIFwiKTtcclxuXHRcdFx0dmFyIHRoaXNmb250OkZvbnQ9PEZvbnQ+ZXZlbnQuYXNzZXRcclxuXHRcdFx0dmFyIHRoaXNmb250dGFibGU6VGVzc2VsYXRlZEZvbnRUYWJsZT08VGVzc2VsYXRlZEZvbnRUYWJsZT50aGlzZm9udC5nZXRfZm9udF90YWJsZShcIlJlZ3VsYXJTdHlsZVwiKTtcclxuXHRcdFx0dmFyIGZvbnRfY2hhcnM6QXJyYXk8U3ViR2VvbWV0cnlCYXNlPiA9IHRoaXNmb250dGFibGUuZ2V0X2ZvbnRfY2hhcnMoKTtcclxuXHRcdFx0dmFyIGNoYXJjbnRfc3FyOm51bWJlciA9IE1hdGguc3FydChmb250X2NoYXJzLmxlbmd0aCk7XHJcblx0XHRcdHZhciBmb250X2VtX3NpemU6bnVtYmVyID0gdGhpc2ZvbnR0YWJsZS5nZXRfZm9udF9lbV9zaXplKCkvMTAwO1xyXG5cdFx0XHR2YXIgcG9zaXRpb25feDpudW1iZXIgPSAtKGNoYXJjbnRfc3FyLzIpKmZvbnRfZW1fc2l6ZTtcclxuXHRcdFx0dmFyIHBvc2l0aW9uX3k6bnVtYmVyID0gLShjaGFyY250X3Nxci8yKSpmb250X2VtX3NpemU7XHJcblx0XHRcdHZhciBrOm51bWJlcj0wO1xyXG5cdFx0XHR2YXIgcG9zX3g6bnVtYmVyPXBvc2l0aW9uX3g7XHJcblx0XHRcdHZhciBwb3NfeTpudW1iZXI9cG9zaXRpb25feTtcclxuXHRcdFx0Zm9yKHZhciBpOm51bWJlciA9MDsgaTxmb250X2NoYXJzLmxlbmd0aDtpKyspe1xyXG5cdFx0XHRcdHZhciBuZXdtZXNoOk1lc2g9bmV3IE1lc2gobmV3IEdlb21ldHJ5KCkpO1xyXG5cdFx0XHRcdGlmKGs+PWNoYXJjbnRfc3FyKXtcclxuXHRcdFx0XHRcdGs9MDtcclxuXHRcdFx0XHRcdHBvc194PXBvc2l0aW9uX3g7XHJcblx0XHRcdFx0XHRwb3NfeSs9Zm9udF9lbV9zaXplO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRrKys7XHJcblx0XHRcdFx0dmFyIHRoaXNjaGFyOlN1Ykdlb21ldHJ5QmFzZT1mb250X2NoYXJzW2ldO1xyXG5cdFx0XHRcdC8vdGhpc2NoYXIuYXBwbHlUcmFuc2Zvcm1hdGlvbih0cmFuc01hdHJpeCk7XHJcblx0XHRcdFx0bmV3bWVzaC5nZW9tZXRyeS5hZGRTdWJHZW9tZXRyeSh0aGlzY2hhcik7XHJcblx0XHRcdFx0cG9zX3grPWZvbnRfZW1fc2l6ZTtcclxuXHRcdFx0XHRuZXdtZXNoLng9cG9zX3g7XHJcblx0XHRcdFx0bmV3bWVzaC55PXBvc195O1xyXG5cdFx0XHRcdG5ld21lc2guc2NhbGVYPW5ld21lc2guc2NhbGVZPW5ld21lc2guc2NhbGVaPTAuMDE7XHJcblx0XHRcdFx0Ly9jb25zb2xlLmxvZyhcIkZvbnQgeCA9IFwiLCBuZXdtZXNoLngsIFwiRm9udCB5ID0gXCIsIG5ld21lc2gueSk7XHJcblx0XHRcdFx0dGhpcy5fdmlldy5zY2VuZS5hZGRDaGlsZChuZXdtZXNoKTtcclxuXHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vdGhpcy5fcm9vdFRpbWVMaW5lID0gPE1vdmllQ2xpcD4gZXZlbnQuYXNzZXQ7XHJcblx0XHRcdC8vdGhpcy5fcm9vdFRpbWVMaW5lLnBhcnRpdGlvbiA9IG5ldyBQYXJ0aXRpb24yRCh0aGlzLl9yb290VGltZUxpbmUpO1xyXG5cdFx0fVxyXG5cdFx0aWYoZXZlbnQuYXNzZXQuYXNzZXRUeXBlID09IEFzc2V0VHlwZS5USU1FTElORSkge1xyXG5cdFx0XHQvL3RoaXMuX3Jvb3RUaW1lTGluZSA9IDxNb3ZpZUNsaXA+IGV2ZW50LmFzc2V0O1xyXG5cdFx0XHQvL3RoaXMuX3Jvb3RUaW1lTGluZS5wYXJ0aXRpb24gPSBuZXcgUGFydGl0aW9uMkQodGhpcy5fcm9vdFRpbWVMaW5lKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIGxvYWRlciBsaXN0ZW5lciBmb3IgYXNzZXQgY29tcGxldGUgZXZlbnRzXHJcblx0ICovXHJcblx0cHJpdmF0ZSBvblJlc3NvdXJjZUNvbXBsZXRlKGV2ZW50OiBMb2FkZXJFdmVudCk6IHZvaWQge1xyXG5cdFx0aWYgKHRoaXMuX3Jvb3RUaW1lTGluZSkge1xyXG5cdFx0XHQvL2NvbnNvbGUubG9nKFwiTE9BRElORyBBIFJPT1QgbmFtZSA9IFwiICsgdGhpcy5fcm9vdFRpbWVMaW5lLm5hbWUgKyBcIiBkdXJhdGlvbj1cIiArIHRoaXMuX3Jvb3RUaW1lTGluZS5kdXJhdGlvbik7XHJcblx0XHQvKlx0dGhpcy5fdmlldy5zY2VuZS5hZGRDaGlsZCh0aGlzLl9yb290VGltZUxpbmUpO1xyXG5cdFx0XHR0aGlzLl9yb290VGltZUxpbmUueD0tdGhpcy5fc3RhZ2Vfd2lkdGgvMjtcclxuXHRcdFx0dGhpcy5fcm9vdFRpbWVMaW5lLnk9LXRoaXMuX3N0YWdlX2hlaWdodC8yOyovXHJcblx0XHRcdC8vIGF1dG9wbGF5IGxpa2UgaW4gRmxhc2hcclxuXHRcdFx0Ly90aGlzLl9yb290VGltZUxpbmUucGxheSgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVuZGVyIGxvb3BcclxuXHQgKi9cclxuXHRwcml2YXRlIG9uRW50ZXJGcmFtZShkdDogbnVtYmVyKTogdm9pZCB7XHJcblx0XHR0aGlzLl90aW1lICs9IGR0O1xyXG5cclxuXHRcdC8vdXBkYXRlIGNhbWVyYSBjb250cm9sZXJcclxuXHRcdC8vIHRoaXMuX2NhbWVyYUNvbnRyb2xsZXIudXBkYXRlKCk7XHJcblxyXG5cdFx0aWYgKHRoaXMuX3Jvb3RUaW1lTGluZSAhPSB1bmRlZmluZWQpIHtcclxuXHRcdFx0Ly9jb25zb2xlLmxvZyhcIlJFTkRFUiA9IFwiKTtcclxuXHRcdFx0dGhpcy5fcm9vdFRpbWVMaW5lLnVwZGF0ZShkdCk7XHJcblx0XHR9XHJcblx0XHQvL2NvbnNvbGUubG9nKFwiUkVOREVSID0gXCIpO1xyXG5cdFx0Ly91cGRhdGUgdmlld1xyXG5cdFx0dGhpcy5fdmlldy5yZW5kZXIoKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgb25LZXlEb3duKGV2ZW50KTogdm9pZCB7XHJcblx0XHRjb25zb2xlLmxvZyhcImtleWNvZGUgPSBcIitldmVudC5rZXlDb2RlKTtcclxuXHRcdGlmIChldmVudC5rZXlDb2RlID09IDgwKSB7XHJcblx0XHRcdHRoaXMuX2lzcGVyc3BlY3RpdmUgPSB0cnVlO1xyXG5cdFx0XHR0aGlzLl92aWV3LmNhbWVyYSA9IHRoaXMuX2NhbWVyYV9wZXJzcGVjdGl2ZTtcclxuXHRcdH1cclxuXHRcdGlmIChldmVudC5rZXlDb2RlID09IDc5KSB7XHJcblx0XHRcdHRoaXMuX2lzcGVyc3BlY3RpdmUgPSBmYWxzZTtcclxuXHRcdFx0dGhpcy5fdmlldy5jYW1lcmEgPSB0aGlzLl9jYW1lcmFfb3J0aG87XHJcblx0XHR9XHJcblx0XHRpZiAoZXZlbnQua2V5Q29kZSA9PSA4MSkge1xyXG5cdFx0XHRpZiAodGhpcy5faXNwZXJzcGVjdGl2ZSkge1xyXG5cdFx0XHRcdHRoaXMuX2hvdmVyQ29udHJvbC5kaXN0YW5jZSArPSA1O1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdHRoaXMuX29ydGhvX3Byb2plY3Rpb24ucHJvamVjdGlvbkhlaWdodCArPSA1O1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmIChldmVudC5rZXlDb2RlID09IDg3KSB7XHJcblx0XHRcdGlmICh0aGlzLl9pc3BlcnNwZWN0aXZlKSB7XHJcblx0XHRcdFx0dGhpcy5faG92ZXJDb250cm9sLmRpc3RhbmNlIC09IDU7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5fb3J0aG9fcHJvamVjdGlvbi5wcm9qZWN0aW9uSGVpZ2h0IC09IDU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGlmIChldmVudC5rZXlDb2RlID09IDY1KSB7XHJcblx0XHRcdGlmICh0aGlzLl9pc3BlcnNwZWN0aXZlKSB7XHJcblx0XHRcdFx0dGhpcy5faG92ZXJDb250cm9sLmRpc3RhbmNlICs9IDUwO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdHRoaXMuX29ydGhvX3Byb2plY3Rpb24ucHJvamVjdGlvbkhlaWdodCArPSA1MDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PSA4Mykge1xyXG5cdFx0XHRpZiAodGhpcy5faXNwZXJzcGVjdGl2ZSkge1xyXG5cdFx0XHRcdHRoaXMuX2hvdmVyQ29udHJvbC5kaXN0YW5jZSAtPSA1MDtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHR0aGlzLl9vcnRob19wcm9qZWN0aW9uLnByb2plY3Rpb25IZWlnaHQgLT0gNTA7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgb25Nb3VzZURvd24oZXZlbnQpOiB2b2lkXHJcblx0e1xyXG5cdFx0dGhpcy5fbGFzdFBhbkFuZ2xlID0gdGhpcy5faG92ZXJDb250cm9sLnBhbkFuZ2xlO1xyXG5cdFx0dGhpcy5fbGFzdFRpbHRBbmdsZSA9IHRoaXMuX2hvdmVyQ29udHJvbC50aWx0QW5nbGU7XHJcblx0XHR0aGlzLl9sYXN0TW91c2VYID0gZXZlbnQuY2xpZW50WDtcclxuXHRcdHRoaXMuX2xhc3RNb3VzZVkgPSBldmVudC5jbGllbnRZO1xyXG5cdFx0dGhpcy5fbW92ZSA9IHRydWU7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIG9uTW91c2VVcChldmVudCk6IHZvaWRcclxuXHR7XHJcblx0XHR0aGlzLl9tb3ZlID0gZmFsc2U7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIG9uTW91c2VNb3ZlKGV2ZW50KVxyXG5cdHtcclxuXHRcdGlmICh0aGlzLl9tb3ZlKSB7XHJcblx0XHRcdGlmICh0aGlzLl9pc3BlcnNwZWN0aXZlKSB7XHJcblx0XHRcdFx0dGhpcy5faG92ZXJDb250cm9sLnBhbkFuZ2xlID0gMC4zICogKGV2ZW50LmNsaWVudFggLSB0aGlzLl9sYXN0TW91c2VYKSArIHRoaXMuX2xhc3RQYW5BbmdsZTtcclxuXHRcdFx0XHR0aGlzLl9ob3ZlckNvbnRyb2wudGlsdEFuZ2xlID0gLTAuMyAqIChldmVudC5jbGllbnRZIC0gdGhpcy5fbGFzdE1vdXNlWSkgKyB0aGlzLl9sYXN0VGlsdEFuZ2xlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdGlmIChldmVudC5jbGllbnRYID4gKHRoaXMuX2xhc3RNb3VzZVggKyAxMCkpXHJcblx0XHRcdFx0XHR0aGlzLl9jYW1lcmFfb3J0aG8ueCAtPSAxMDtcclxuXHRcdFx0XHRlbHNlIGlmIChldmVudC5jbGllbnRYID4gdGhpcy5fbGFzdE1vdXNlWClcclxuXHRcdFx0XHRcdHRoaXMuX2NhbWVyYV9vcnRoby54LS07XHJcblx0XHRcdFx0ZWxzZSBpZiAoZXZlbnQuY2xpZW50WCA8ICh0aGlzLl9sYXN0TW91c2VYIC0gMTApKVxyXG5cdFx0XHRcdFx0dGhpcy5fY2FtZXJhX29ydGhvLnggKz0gMTA7XHJcblx0XHRcdFx0ZWxzZSBpZiAoZXZlbnQuY2xpZW50WCA8IHRoaXMuX2xhc3RNb3VzZVgpXHJcblx0XHRcdFx0XHR0aGlzLl9jYW1lcmFfb3J0aG8ueCsrO1xyXG5cdFx0XHRcdGlmIChldmVudC5jbGllbnRZID4gKHRoaXMuX2xhc3RNb3VzZVkgKyAxMCkpXHJcblx0XHRcdFx0XHR0aGlzLl9jYW1lcmFfb3J0aG8ueSAtPSAxMDtcclxuXHRcdFx0XHRlbHNlIGlmIChldmVudC5jbGllbnRZID4gdGhpcy5fbGFzdE1vdXNlWSlcclxuXHRcdFx0XHRcdHRoaXMuX2NhbWVyYV9vcnRoby55LS07XHJcblx0XHRcdFx0ZWxzZSBpZiAoZXZlbnQuY2xpZW50WSA8ICh0aGlzLl9sYXN0TW91c2VZIC0gMTApKVxyXG5cdFx0XHRcdFx0dGhpcy5fY2FtZXJhX29ydGhvLnkgKz0gMTA7XHJcblx0XHRcdFx0ZWxzZSBpZiAoZXZlbnQuY2xpZW50WSA8IHRoaXMuX2xhc3RNb3VzZVkpXHJcblx0XHRcdFx0XHR0aGlzLl9jYW1lcmFfb3J0aG8ueSsrO1xyXG5cdFx0XHRcdHRoaXMuX2xhc3RNb3VzZVggPSBldmVudC5jbGllbnRYO1xyXG5cdFx0XHRcdHRoaXMuX2xhc3RNb3VzZVkgPSBldmVudC5jbGllbnRZO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIG9uTW91c2VXaGVlbChldmVudCk6IHZvaWRcclxuXHR7XHJcblxyXG5cdFx0aWYgKHRoaXMuX2lzcGVyc3BlY3RpdmUpIHtcclxuXHRcdFx0dGhpcy5faG92ZXJDb250cm9sLmRpc3RhbmNlIC09IGV2ZW50LndoZWVsRGVsdGEgKiA1O1xyXG5cdFx0XHRpZiAodGhpcy5faG92ZXJDb250cm9sLmRpc3RhbmNlIDwgMTAwKSB7XHJcblx0XHRcdFx0dGhpcy5faG92ZXJDb250cm9sLmRpc3RhbmNlID0gMTAwO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0dGhpcy5fb3J0aG9fcHJvamVjdGlvbi5wcm9qZWN0aW9uSGVpZ2h0IC09IGV2ZW50LndoZWVsRGVsdGEgKiA1O1xyXG5cdFx0XHRpZiAodGhpcy5fb3J0aG9fcHJvamVjdGlvbi5wcm9qZWN0aW9uSGVpZ2h0IDwgNSkge1xyXG5cdFx0XHRcdHRoaXMuX29ydGhvX3Byb2plY3Rpb24ucHJvamVjdGlvbkhlaWdodCA9IDU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgb25SZXNpemUoZXZlbnQgPSBudWxsKTogdm9pZFxyXG5cdHtcclxuXHRcdHRoaXMuX3ZpZXcueSAgICAgICAgID0gMDtcclxuXHRcdHRoaXMuX3ZpZXcueCAgICAgICAgID0gMDtcclxuXHRcdHRoaXMuX3ZpZXcud2lkdGggICAgID0gd2luZG93LmlubmVyV2lkdGg7XHJcblx0XHR0aGlzLl92aWV3LmhlaWdodCAgICA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuXHR9XHJcblxyXG59XHJcblxyXG53aW5kb3cub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG5cdG5ldyBBV0QzRm9udFZpZXdlcigpO1xyXG59O1xyXG4iXX0=