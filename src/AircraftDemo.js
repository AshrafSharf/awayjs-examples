var Geometry = require("awayjs-core/lib/data/Geometry");
var LoaderEvent = require("awayjs-core/lib/events/LoaderEvent");
var UVTransform = require("awayjs-core/lib/geom/UVTransform");
var Vector3D = require("awayjs-core/lib/geom/Vector3D");
var AssetLibrary = require("awayjs-core/lib/library/AssetLibrary");
var URLRequest = require("awayjs-core/lib/net/URLRequest");
var Debug = require("awayjs-core/lib/utils/Debug");
var RequestAnimationFrame = require("awayjs-core/lib/utils/RequestAnimationFrame");
var DisplayObjectContainer = require("awayjs-display/lib/containers/DisplayObjectContainer");
var View = require("awayjs-display/lib/containers/View");
var DirectionalLight = require("awayjs-display/lib/entities/DirectionalLight");
var Mesh = require("awayjs-display/lib/entities/Mesh");
var Skybox = require("awayjs-display/lib/entities/Skybox");
var MaterialBase = require("awayjs-display/lib/materials/MaterialBase");
var StaticLightPicker = require("awayjs-display/lib/materials/lightpickers/StaticLightPicker");
var PrimitivePlanePrefab = require("awayjs-display/lib/prefabs/PrimitivePlanePrefab");
var DefaultRenderer = require("awayjs-renderergl/lib/DefaultRenderer");
var MethodMaterial = require("awayjs-methodmaterials/lib/MethodMaterial");
var MethodRendererPool = require("awayjs-methodmaterials/lib/pool/MethodRendererPool");
var EffectEnvMapMethod = require("awayjs-methodmaterials/lib/methods/EffectEnvMapMethod");
var NormalSimpleWaterMethod = require("awayjs-methodmaterials/lib/methods/NormalSimpleWaterMethod");
var SpecularFresnelMethod = require("awayjs-methodmaterials/lib/methods/SpecularFresnelMethod");
var OBJParser = require("awayjs-parsers/lib/OBJParser");
var AircraftDemo = (function () {
    //}
    function AircraftDemo() {
        var _this = this;
        //{ state
        this._maxStates = 2;
        this._cameraIncrement = 0;
        this._rollIncrement = 0;
        this._loopIncrement = 0;
        this._state = 0;
        this._appTime = 0;
        this._seaInitialized = false;
        this._f14Initialized = false;
        this._skyboxInitialized = false;
        Debug.LOG_PI_ERRORS = false;
        Debug.THROW_ERRORS = false;
        this.initView();
        this.initLights();
        this.initAnimation();
        this.initParsers();
        this.loadAssets();
        window.onresize = function (event) { return _this.onResize(event); };
    }
    AircraftDemo.prototype.loadAssets = function () {
        this.loadAsset('assets/sea_normals.jpg');
        this.loadAsset('assets/f14/f14d.obj');
        this.loadAsset('assets/skybox/CubeTextureTest.cube');
    };
    AircraftDemo.prototype.loadAsset = function (path) {
        var _this = this;
        var token = AssetLibrary.load(new URLRequest(path));
        token.addEventListener(LoaderEvent.RESOURCE_COMPLETE, function (event) { return _this.onResourceComplete(event); });
    };
    AircraftDemo.prototype.initParsers = function () {
        AssetLibrary.enableParser(OBJParser);
    };
    AircraftDemo.prototype.initAnimation = function () {
        this._timer = new RequestAnimationFrame(this.render, this);
    };
    AircraftDemo.prototype.initView = function () {
        this._view = new View(new DefaultRenderer(MethodRendererPool));
        this._view.camera.z = -500;
        this._view.camera.y = 250;
        this._view.camera.rotationX = 20;
        this._view.camera.projection.near = 0.5;
        this._view.camera.projection.far = 14000;
        this._view.backgroundColor = 0x2c2c32;
        this.onResize();
    };
    AircraftDemo.prototype.initializeScene = function () {
        if (this._skyboxCubeTexture && this._f14Geom && this._seaNormalTexture) {
            this.initF14();
            this.initSea();
            this._timer.start();
        }
    };
    AircraftDemo.prototype.initLights = function () {
        var light = new DirectionalLight();
        light.color = 0x974523;
        light.direction = new Vector3D(-300, -300, -5000);
        light.ambient = 1;
        light.ambientColor = 0x7196ac;
        light.diffuse = 1.2;
        light.specular = 1.1;
        this._view.scene.addChild(light);
        this._lightPicker = new StaticLightPicker([light]);
    };
    AircraftDemo.prototype.initF14 = function () {
        var _this = this;
        this._f14Initialized = true;
        var f14Material = new MethodMaterial(this._seaNormalTexture, true, true, false); // will be the cubemap
        f14Material.lightPicker = this._lightPicker;
        this._view.scene.addChild(this._f14Geom);
        this._f14Geom.transform.scale = new Vector3D(20, 20, 20);
        this._f14Geom.rotationX = 90;
        this._f14Geom.y = 200;
        this._view.camera.lookAt(this._f14Geom.transform.position);
        document.onmousedown = function (event) { return _this.onMouseDown(event); };
    };
    AircraftDemo.prototype.initSea = function () {
        this._seaMaterial = new MethodMaterial(this._seaNormalTexture, true, true, false); // will be the cubemap
        this._waterMethod = new NormalSimpleWaterMethod(this._seaNormalTexture, this._seaNormalTexture);
        var fresnelMethod = new SpecularFresnelMethod();
        fresnelMethod.normalReflectance = .3;
        this._seaMaterial.alphaBlending = true;
        this._seaMaterial.lightPicker = this._lightPicker;
        this._seaMaterial.repeat = true;
        this._seaMaterial.animateUVs = true;
        this._seaMaterial.normalMethod = this._waterMethod;
        this._seaMaterial.addEffectMethod(new EffectEnvMapMethod(this._skyboxCubeTexture));
        this._seaMaterial.specularMethod = fresnelMethod;
        this._seaMaterial.gloss = 100;
        this._seaMaterial.specular = 1;
        this._seaGeom = new PrimitivePlanePrefab(50000, 50000, 1, 1, true, false);
        this._seaMesh = this._seaGeom.getNewObject();
        this._seaGeom.geometry.scaleUV(100, 100);
        this._seaMesh.subMeshes[0].uvTransform = new UVTransform();
        this._seaMesh.material = this._seaMaterial;
        this._view.scene.addChild(new Skybox(this._skyboxCubeTexture));
        this._view.scene.addChild(this._seaMesh);
    };
    AircraftDemo.prototype.onResourceComplete = function (event) {
        var loader = event.target;
        var numAssets = loader.baseDependency.assets.length;
        var i = 0;
        switch (event.url) {
            case "assets/sea_normals.jpg":
                this._seaNormalTexture = loader.baseDependency.assets[0];
                break;
            case 'assets/f14/f14d.obj':
                this._f14Geom = new DisplayObjectContainer();
                for (i = 0; i < numAssets; ++i) {
                    var asset = loader.baseDependency.assets[i];
                    switch (asset.assetType) {
                        case Mesh.assetType:
                            var mesh = asset;
                            this._f14Geom.addChild(mesh);
                            break;
                        case Geometry.assetType:
                            break;
                        case MaterialBase.assetType:
                            break;
                    }
                }
                break;
            case 'assets/skybox/CubeTextureTest.cube':
                this._skyboxCubeTexture = loader.baseDependency.assets[0];
                break;
        }
        this.initializeScene();
    };
    AircraftDemo.prototype.render = function (dt) {
        if (this._f14Geom) {
            this._rollIncrement += 0.02;
            switch (this._state) {
                case 0:
                    this._f14Geom.rotationZ = Math.sin(this._rollIncrement) * 25;
                    break;
                case 1:
                    this._loopIncrement += 0.05;
                    this._f14Geom.z += Math.cos(this._loopIncrement) * 20;
                    this._f14Geom.y += Math.sin(this._loopIncrement) * 20;
                    this._f14Geom.rotationX += -1 * ((Math.PI / 180) * Math.atan2(this._f14Geom.z, this._f14Geom.y)); //* 20;
                    this._f14Geom.rotationZ = Math.sin(this._rollIncrement) * 25;
                    if (this._loopIncrement > (Math.PI * 2)) {
                        this._loopIncrement = 0;
                        this._state = 0;
                    }
                    break;
            }
        }
        if (this._f14Geom) {
            this._view.camera.lookAt(this._f14Geom.transform.position);
        }
        if (this._view.camera) {
            this._cameraIncrement += 0.01;
            this._view.camera.x = Math.cos(this._cameraIncrement) * 400;
            this._view.camera.z = Math.sin(this._cameraIncrement) * 400;
        }
        if (this._f14Geom) {
            this._view.camera.lookAt(this._f14Geom.transform.position);
        }
        if (this._seaMaterial) {
            this._seaMesh.subMeshes[0].uvTransform.offsetV -= 0.04;
        }
        this._appTime += dt;
        this._view.render();
    };
    AircraftDemo.prototype.onResize = function (event) {
        if (event === void 0) { event = null; }
        this._view.y = 0;
        this._view.x = 0;
        this._view.width = window.innerWidth;
        this._view.height = window.innerHeight;
    };
    AircraftDemo.prototype.onMouseDown = function (event) {
        this._state++;
        if (this._state >= this._maxStates)
            this._state = 0;
    };
    return AircraftDemo;
})();
window.onload = function () {
    new AircraftDemo();
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9BaXJjcmFmdERlbW8udHMiXSwibmFtZXMiOlsiQWlyY3JhZnREZW1vIiwiQWlyY3JhZnREZW1vLmNvbnN0cnVjdG9yIiwiQWlyY3JhZnREZW1vLmxvYWRBc3NldHMiLCJBaXJjcmFmdERlbW8ubG9hZEFzc2V0IiwiQWlyY3JhZnREZW1vLmluaXRQYXJzZXJzIiwiQWlyY3JhZnREZW1vLmluaXRBbmltYXRpb24iLCJBaXJjcmFmdERlbW8uaW5pdFZpZXciLCJBaXJjcmFmdERlbW8uaW5pdGlhbGl6ZVNjZW5lIiwiQWlyY3JhZnREZW1vLmluaXRMaWdodHMiLCJBaXJjcmFmdERlbW8uaW5pdEYxNCIsIkFpcmNyYWZ0RGVtby5pbml0U2VhIiwiQWlyY3JhZnREZW1vLm9uUmVzb3VyY2VDb21wbGV0ZSIsIkFpcmNyYWZ0RGVtby5yZW5kZXIiLCJBaXJjcmFmdERlbW8ub25SZXNpemUiLCJBaXJjcmFmdERlbW8ub25Nb3VzZURvd24iXSwibWFwcGluZ3MiOiJBQUFBLElBQU8sUUFBUSxXQUFnQiwrQkFBK0IsQ0FBQyxDQUFDO0FBRWhFLElBQU8sV0FBVyxXQUFlLG9DQUFvQyxDQUFDLENBQUM7QUFDdkUsSUFBTyxXQUFXLFdBQWUsa0NBQWtDLENBQUMsQ0FBQztBQUNyRSxJQUFPLFFBQVEsV0FBZ0IsK0JBQStCLENBQUMsQ0FBQztBQUNoRSxJQUFPLFlBQVksV0FBZSxzQ0FBc0MsQ0FBQyxDQUFDO0FBSzFFLElBQU8sVUFBVSxXQUFlLGdDQUFnQyxDQUFDLENBQUM7QUFHbEUsSUFBTyxLQUFLLFdBQTRCLDZCQUE2QixDQUFDLENBQUM7QUFDdkUsSUFBTyxxQkFBcUIsV0FBWSw2Q0FBNkMsQ0FBQyxDQUFDO0FBRXZGLElBQU8sc0JBQXNCLFdBQVksc0RBQXNELENBQUMsQ0FBQztBQUNqRyxJQUFPLElBQUksV0FBaUIsb0NBQW9DLENBQUMsQ0FBQztBQUVsRSxJQUFPLGdCQUFnQixXQUFjLDhDQUE4QyxDQUFDLENBQUM7QUFDckYsSUFBTyxJQUFJLFdBQWlC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QTtvQkFDM0RBLEtBQUtBLENBQUNBO2dCQUNWQSxLQUFLQSxDQUFDQTtvQkFDRkEsSUFBSUEsQ0FBQ0EsY0FBY0EsSUFBSUEsSUFBSUEsQ0FBQ0E7b0JBQzVCQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQSxDQUFDQSxJQUFJQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxjQUFjQSxDQUFDQSxHQUFDQSxFQUFFQSxDQUFDQTtvQkFDcERBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLENBQUNBLElBQUlBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLEdBQUNBLEVBQUVBLENBQUNBO29CQUNwREEsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsU0FBU0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsR0FBQ0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsRUFBRUEsR0FBQ0EsR0FBR0EsQ0FBQ0EsR0FBQ0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0EsRUFBRUEsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsRUFBQ0EsT0FBT0E7b0JBQ2xHQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQSxTQUFTQSxHQUFHQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxjQUFjQSxDQUFDQSxHQUFDQSxFQUFFQSxDQUFDQTtvQkFFM0RBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLEVBQUVBLEdBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO3dCQUNwQ0EsSUFBSUEsQ0FBQ0EsY0FBY0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7d0JBQ3hCQSxJQUFJQSxDQUFDQSxNQUFNQSxHQUFHQSxDQUFDQSxDQUFDQTtvQkFDcEJBLENBQUNBO29CQUNEQSxLQUFLQSxDQUFDQTtZQUNkQSxDQUFDQTtRQUNMQSxDQUFDQTtRQUVEQSxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNoQkEsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0E7UUFDL0RBLENBQUNBO1FBRURBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLE1BQU1BLENBQUNBLENBQUNBLENBQUNBO1lBQ3BCQSxJQUFJQSxDQUFDQSxnQkFBZ0JBLElBQUlBLElBQUlBLENBQUNBO1lBQzlCQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxNQUFNQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxnQkFBZ0JBLENBQUNBLEdBQUNBLEdBQUdBLENBQUNBO1lBQzFEQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxNQUFNQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxnQkFBZ0JBLENBQUNBLEdBQUNBLEdBQUdBLENBQUNBO1FBQzlEQSxDQUFDQTtRQUVEQSxFQUFFQSxDQUFDQSxDQUFFQSxJQUFJQSxDQUFDQSxRQUFTQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNsQkEsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0E7UUFDL0RBLENBQUNBO1FBRURBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLFlBQVlBLENBQUNBLENBQUNBLENBQUNBO1lBQ3BCQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQSxTQUFTQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxXQUFXQSxDQUFDQSxPQUFPQSxJQUFJQSxJQUFJQSxDQUFDQTtRQVEzREEsQ0FBQ0E7UUFFREEsSUFBSUEsQ0FBQ0EsUUFBUUEsSUFBSUEsRUFBRUEsQ0FBQ0E7UUFDcEJBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBO0lBQ3hCQSxDQUFDQTtJQUVNWiwrQkFBUUEsR0FBZkEsVUFBZ0JBLEtBQW9CQTtRQUFwQmEscUJBQW9CQSxHQUFwQkEsWUFBb0JBO1FBRWhDQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtRQUNqQkEsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7UUFDakJBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLEtBQUtBLEdBQUdBLE1BQU1BLENBQUNBLFVBQVVBLENBQUNBO1FBQ3JDQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxNQUFNQSxHQUFHQSxNQUFNQSxDQUFDQSxXQUFXQSxDQUFDQTtJQUMzQ0EsQ0FBQ0E7SUFFT2Isa0NBQVdBLEdBQW5CQSxVQUFvQkEsS0FBZ0JBO1FBRWhDYyxJQUFJQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQTtRQUVkQSxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxNQUFNQSxJQUFJQSxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQTtZQUMvQkEsSUFBSUEsQ0FBQ0EsTUFBTUEsR0FBR0EsQ0FBQ0EsQ0FBQ0E7SUFDeEJBLENBQUNBO0lBQ0xkLG1CQUFDQTtBQUFEQSxDQTNQQSxBQTJQQ0EsSUFBQTtBQUVELE1BQU0sQ0FBQyxNQUFNLEdBQUc7SUFFWixJQUFJLFlBQVksRUFBRSxDQUFDO0FBQ3ZCLENBQUMsQ0FBQSIsImZpbGUiOiJBaXJjcmFmdERlbW8uanMiLCJzb3VyY2VSb290IjoiLi8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgR2VvbWV0cnlcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvZGF0YS9HZW9tZXRyeVwiKTtcbmltcG9ydCBBc3NldEV2ZW50XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9ldmVudHMvQXNzZXRFdmVudFwiKTtcbmltcG9ydCBMb2FkZXJFdmVudFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvZXZlbnRzL0xvYWRlckV2ZW50XCIpO1xuaW1wb3J0IFVWVHJhbnNmb3JtXHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9nZW9tL1VWVHJhbnNmb3JtXCIpO1xuaW1wb3J0IFZlY3RvcjNEXHRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2dlb20vVmVjdG9yM0RcIik7XG5pbXBvcnQgQXNzZXRMaWJyYXJ5XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9saWJyYXJ5L0Fzc2V0TGlicmFyeVwiKTtcbmltcG9ydCBBc3NldExvYWRlclx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvbGlicmFyeS9Bc3NldExvYWRlclwiKTtcbmltcG9ydCBBc3NldExvYWRlckNvbnRleHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvbGlicmFyeS9Bc3NldExvYWRlckNvbnRleHRcIik7XG5pbXBvcnQgQXNzZXRMb2FkZXJUb2tlblx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2xpYnJhcnkvQXNzZXRMb2FkZXJUb2tlblwiKTtcbmltcG9ydCBJQXNzZXRcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvbGlicmFyeS9JQXNzZXRcIik7XG5pbXBvcnQgVVJMUmVxdWVzdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvbmV0L1VSTFJlcXVlc3RcIik7XG5pbXBvcnQgSW1hZ2VDdWJlVGV4dHVyZVx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL3RleHR1cmVzL0ltYWdlQ3ViZVRleHR1cmVcIik7XG5pbXBvcnQgSW1hZ2VUZXh0dXJlXHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi90ZXh0dXJlcy9JbWFnZVRleHR1cmVcIik7XG5pbXBvcnQgRGVidWcgICAgICAgICAgICAgICAgXHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi91dGlscy9EZWJ1Z1wiKTtcbmltcG9ydCBSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL3V0aWxzL1JlcXVlc3RBbmltYXRpb25GcmFtZVwiKTtcblxuaW1wb3J0IERpc3BsYXlPYmplY3RDb250YWluZXJcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL2NvbnRhaW5lcnMvRGlzcGxheU9iamVjdENvbnRhaW5lclwiKTtcbmltcG9ydCBWaWV3XHRcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvY29udGFpbmVycy9WaWV3XCIpO1xuaW1wb3J0IEhvdmVyQ29udHJvbGxlclx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL2NvbnRyb2xsZXJzL0hvdmVyQ29udHJvbGxlclwiKTtcbmltcG9ydCBEaXJlY3Rpb25hbExpZ2h0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvZW50aXRpZXMvRGlyZWN0aW9uYWxMaWdodFwiKTtcbmltcG9ydCBNZXNoXHRcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvZW50aXRpZXMvTWVzaFwiKTtcbmltcG9ydCBTa3lib3hcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvZW50aXRpZXMvU2t5Ym94XCIpO1xuaW1wb3J0IE1hdGVyaWFsQmFzZVx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvbWF0ZXJpYWxzL01hdGVyaWFsQmFzZVwiKTtcbmltcG9ydCBTdGF0aWNMaWdodFBpY2tlclx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi9tYXRlcmlhbHMvbGlnaHRwaWNrZXJzL1N0YXRpY0xpZ2h0UGlja2VyXCIpO1xuaW1wb3J0IFByaW1pdGl2ZVBsYW5lUHJlZmFiXHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL3ByZWZhYnMvUHJpbWl0aXZlUGxhbmVQcmVmYWJcIik7XG5cbmltcG9ydCBEZWZhdWx0UmVuZGVyZXJcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9EZWZhdWx0UmVuZGVyZXJcIik7XG5cbmltcG9ydCBNZXRob2RNYXRlcmlhbFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLW1ldGhvZG1hdGVyaWFscy9saWIvTWV0aG9kTWF0ZXJpYWxcIik7XG5pbXBvcnQgTWV0aG9kUmVuZGVyZXJQb29sXHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLW1ldGhvZG1hdGVyaWFscy9saWIvcG9vbC9NZXRob2RSZW5kZXJlclBvb2xcIik7XG5pbXBvcnQgRWZmZWN0RW52TWFwTWV0aG9kICAgXHRcdD0gcmVxdWlyZShcImF3YXlqcy1tZXRob2RtYXRlcmlhbHMvbGliL21ldGhvZHMvRWZmZWN0RW52TWFwTWV0aG9kXCIpO1xuaW1wb3J0IE5vcm1hbFNpbXBsZVdhdGVyTWV0aG9kXHRcdD0gcmVxdWlyZShcImF3YXlqcy1tZXRob2RtYXRlcmlhbHMvbGliL21ldGhvZHMvTm9ybWFsU2ltcGxlV2F0ZXJNZXRob2RcIik7XG5pbXBvcnQgU3BlY3VsYXJGcmVzbmVsTWV0aG9kXHRcdD0gcmVxdWlyZShcImF3YXlqcy1tZXRob2RtYXRlcmlhbHMvbGliL21ldGhvZHMvU3BlY3VsYXJGcmVzbmVsTWV0aG9kXCIpO1xuXG5pbXBvcnQgQVdEUGFyc2VyXHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1wYXJzZXJzL2xpYi9BV0RQYXJzZXJcIik7XG5pbXBvcnQgT0JKUGFyc2VyXHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1wYXJzZXJzL2xpYi9PQkpQYXJzZXJcIik7XG5cbmNsYXNzIEFpcmNyYWZ0RGVtb1xue1xuICAgIC8veyBzdGF0ZVxuICAgIHByaXZhdGUgX21heFN0YXRlczpudW1iZXIgPSAyO1xuICAgIHByaXZhdGUgX2NhbWVyYUluY3JlbWVudDpudW1iZXIgPSAwO1xuICAgIHByaXZhdGUgX3JvbGxJbmNyZW1lbnQ6bnVtYmVyID0gMDtcbiAgICBwcml2YXRlIF9sb29wSW5jcmVtZW50Om51bWJlciA9IDA7XG4gICAgcHJpdmF0ZSBfc3RhdGU6bnVtYmVyID0gMDtcbiAgICBwcml2YXRlIF9hcHBUaW1lOm51bWJlciA9IDA7XG4gICAgLy99XG4gICAgXG4gICAgcHJpdmF0ZSBfbGlnaHRQaWNrZXI6U3RhdGljTGlnaHRQaWNrZXI7XG4gICAgcHJpdmF0ZSBfdmlldzpWaWV3O1xuICAgIHByaXZhdGUgX3RpbWVyOlJlcXVlc3RBbmltYXRpb25GcmFtZTtcbiAgICBcbiAgICAvL3sgc2VhXG4gICAgcHJpdmF0ZSBfc2VhR2VvbTpQcmltaXRpdmVQbGFuZVByZWZhYjtcbiAgICBwcml2YXRlIF9zZWFNZXNoOk1lc2g7XG4gICAgcHJpdmF0ZSBfc2VhTm9ybWFsVGV4dHVyZTpJbWFnZVRleHR1cmU7XG4gICAgcHJpdmF0ZSBfc2VhSW5pdGlhbGl6ZWQ6Ym9vbGVhbiA9IGZhbHNlO1xuICAgIHByaXZhdGUgX3NlYU1hdGVyaWFsOk1ldGhvZE1hdGVyaWFsO1xuICAgIC8vfVxuICAgIFxuICAgIC8veyBmMTRcbiAgICBwcml2YXRlIF9mMTRHZW9tOkRpc3BsYXlPYmplY3RDb250YWluZXI7XG4gICAgcHJpdmF0ZSBfZjE0SW5pdGlhbGl6ZWQ6Ym9vbGVhbiA9IGZhbHNlO1xuICAgIC8vfVxuICAgIFxuICAgIC8veyBza3lib3hcbiAgICBwcml2YXRlIF93YXRlck1ldGhvZDpOb3JtYWxTaW1wbGVXYXRlck1ldGhvZDtcbiAgICBwcml2YXRlIF9za3lib3hDdWJlVGV4dHVyZTpJbWFnZUN1YmVUZXh0dXJlO1xuICAgIHByaXZhdGUgX3NreWJveEluaXRpYWxpemVkOmJvb2xlYW4gPSBmYWxzZTtcbiAgICAvL31cbiAgICBcbiAgICBjb25zdHJ1Y3RvcigpXG4gICAge1xuICAgICAgICBEZWJ1Zy5MT0dfUElfRVJST1JTID0gZmFsc2U7XG4gICAgICAgIERlYnVnLlRIUk9XX0VSUk9SUyA9IGZhbHNlO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5pbml0VmlldygpO1xuICAgICAgICB0aGlzLmluaXRMaWdodHMoKTtcbiAgICAgICAgdGhpcy5pbml0QW5pbWF0aW9uKCk7XG4gICAgICAgIHRoaXMuaW5pdFBhcnNlcnMoKTtcbiAgICAgICAgdGhpcy5sb2FkQXNzZXRzKCk7XG4gICAgICAgIFxuICAgICAgICB3aW5kb3cub25yZXNpemUgPSAoZXZlbnQ6VUlFdmVudCkgPT4gdGhpcy5vblJlc2l6ZShldmVudCk7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgbG9hZEFzc2V0cygpOnZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMubG9hZEFzc2V0KCdhc3NldHMvc2VhX25vcm1hbHMuanBnJyk7XG4gICAgICAgIHRoaXMubG9hZEFzc2V0KCdhc3NldHMvZjE0L2YxNGQub2JqJyk7XG4gICAgICAgIHRoaXMubG9hZEFzc2V0KCdhc3NldHMvc2t5Ym94L0N1YmVUZXh0dXJlVGVzdC5jdWJlJyk7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgbG9hZEFzc2V0KHBhdGg6c3RyaW5nKTp2b2lkXG4gICAge1xuICAgICAgICB2YXIgdG9rZW46QXNzZXRMb2FkZXJUb2tlbiA9IEFzc2V0TGlicmFyeS5sb2FkKG5ldyBVUkxSZXF1ZXN0KHBhdGgpKTtcbiAgICAgICAgdG9rZW4uYWRkRXZlbnRMaXN0ZW5lcihMb2FkZXJFdmVudC5SRVNPVVJDRV9DT01QTEVURSwgKGV2ZW50OkxvYWRlckV2ZW50KSA9PiB0aGlzLm9uUmVzb3VyY2VDb21wbGV0ZShldmVudCkpO1xuICAgIH1cbiAgICBcbiAgICBwcml2YXRlIGluaXRQYXJzZXJzKCk6dm9pZFxuICAgIHtcbiAgICAgICAgQXNzZXRMaWJyYXJ5LmVuYWJsZVBhcnNlcihPQkpQYXJzZXIpO1xuICAgIH1cbiAgICBcbiAgICBwcml2YXRlIGluaXRBbmltYXRpb24oKTp2b2lkXG4gICAge1xuICAgICAgICB0aGlzLl90aW1lciA9IG5ldyBSZXF1ZXN0QW5pbWF0aW9uRnJhbWUoIHRoaXMucmVuZGVyLCB0aGlzICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0VmlldygpOnZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuX3ZpZXcgPSBuZXcgVmlldyhuZXcgRGVmYXVsdFJlbmRlcmVyKE1ldGhvZFJlbmRlcmVyUG9vbCkpO1xuICAgICAgICB0aGlzLl92aWV3LmNhbWVyYS56XHQ9IC01MDA7XG4gICAgICAgIHRoaXMuX3ZpZXcuY2FtZXJhLnlcdD0gMjUwO1xuICAgICAgICB0aGlzLl92aWV3LmNhbWVyYS5yb3RhdGlvblhcdD0gMjA7XG4gICAgICAgIHRoaXMuX3ZpZXcuY2FtZXJhLnByb2plY3Rpb24ubmVhciA9IDAuNTtcbiAgICAgICAgdGhpcy5fdmlldy5jYW1lcmEucHJvamVjdGlvbi5mYXIgPSAxNDAwMDtcbiAgICAgICAgdGhpcy5fdmlldy5iYWNrZ3JvdW5kQ29sb3IgPSAweDJjMmMzMjtcblxuICAgICAgICB0aGlzLm9uUmVzaXplKCk7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgaW5pdGlhbGl6ZVNjZW5lKCk6dm9pZFxuICAgIHtcbiAgICAgICAgaWYodGhpcy5fc2t5Ym94Q3ViZVRleHR1cmUgJiYgdGhpcy5fZjE0R2VvbSAmJiB0aGlzLl9zZWFOb3JtYWxUZXh0dXJlKSB7XG4gICAgICAgICAgICB0aGlzLmluaXRGMTQoKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdFNlYSgpO1xuICAgICAgICAgICAgdGhpcy5fdGltZXIuc3RhcnQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBwcml2YXRlIGluaXRMaWdodHMoKTp2b2lkXG4gICAge1xuICAgICAgICB2YXIgbGlnaHQ6RGlyZWN0aW9uYWxMaWdodCA9IG5ldyBEaXJlY3Rpb25hbExpZ2h0KCk7XG4gICAgICAgIGxpZ2h0LmNvbG9yXHQ9IDB4OTc0NTIzO1xuICAgICAgICBsaWdodC5kaXJlY3Rpb25cdD0gbmV3IFZlY3RvcjNEKC0zMDAsIC0zMDAsIC01MDAwKTtcbiAgICAgICAgbGlnaHQuYW1iaWVudCA9IDE7XG4gICAgICAgIGxpZ2h0LmFtYmllbnRDb2xvciA9IDB4NzE5NmFjO1xuICAgICAgICBsaWdodC5kaWZmdXNlID0gMS4yO1xuICAgICAgICBsaWdodC5zcGVjdWxhciA9IDEuMTtcbiAgICAgICAgdGhpcy5fdmlldy5zY2VuZS5hZGRDaGlsZChsaWdodCk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9saWdodFBpY2tlciA9IG5ldyBTdGF0aWNMaWdodFBpY2tlcihbbGlnaHRdKTtcbiAgICB9XG4gICAgXG4gICAgcHJpdmF0ZSBpbml0RjE0KCk6dm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5fZjE0SW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICBcbiAgICAgICAgdmFyIGYxNE1hdGVyaWFsOiBNZXRob2RNYXRlcmlhbCA9IG5ldyBNZXRob2RNYXRlcmlhbCh0aGlzLl9zZWFOb3JtYWxUZXh0dXJlLCB0cnVlLCB0cnVlLCBmYWxzZSk7IC8vIHdpbGwgYmUgdGhlIGN1YmVtYXBcbiAgICAgICAgZjE0TWF0ZXJpYWwubGlnaHRQaWNrZXIgPSB0aGlzLl9saWdodFBpY2tlcjtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX3ZpZXcuc2NlbmUuYWRkQ2hpbGQodGhpcy5fZjE0R2VvbSk7XG4gICAgICAgIHRoaXMuX2YxNEdlb20udHJhbnNmb3JtLnNjYWxlID0gbmV3IFZlY3RvcjNEKDIwLCAyMCwgMjApO1xuICAgICAgICB0aGlzLl9mMTRHZW9tLnJvdGF0aW9uWCA9IDkwO1xuICAgICAgICB0aGlzLl9mMTRHZW9tLnkgPSAyMDA7XG4gICAgICAgIHRoaXMuX3ZpZXcuY2FtZXJhLmxvb2tBdCh0aGlzLl9mMTRHZW9tLnRyYW5zZm9ybS5wb3NpdGlvbik7XG4gICAgICAgIFxuICAgICAgICBkb2N1bWVudC5vbm1vdXNlZG93biA9IChldmVudDpNb3VzZUV2ZW50KSA9PiB0aGlzLm9uTW91c2VEb3duKGV2ZW50KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGluaXRTZWEoKTp2b2lkXG4gICAge1xuICAgICAgICB0aGlzLl9zZWFNYXRlcmlhbCA9IG5ldyBNZXRob2RNYXRlcmlhbCh0aGlzLl9zZWFOb3JtYWxUZXh0dXJlLCB0cnVlLCB0cnVlLCBmYWxzZSk7IC8vIHdpbGwgYmUgdGhlIGN1YmVtYXBcbiAgICAgICAgdGhpcy5fd2F0ZXJNZXRob2QgPSBuZXcgTm9ybWFsU2ltcGxlV2F0ZXJNZXRob2QodGhpcy5fc2VhTm9ybWFsVGV4dHVyZSwgdGhpcy5fc2VhTm9ybWFsVGV4dHVyZSk7XG4gICAgICAgIHZhciBmcmVzbmVsTWV0aG9kOlNwZWN1bGFyRnJlc25lbE1ldGhvZCAgPSBuZXcgU3BlY3VsYXJGcmVzbmVsTWV0aG9kKCk7XG4gICAgICAgIGZyZXNuZWxNZXRob2Qubm9ybWFsUmVmbGVjdGFuY2UgPSAuMztcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX3NlYU1hdGVyaWFsLmFscGhhQmxlbmRpbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLl9zZWFNYXRlcmlhbC5saWdodFBpY2tlciA9IHRoaXMuX2xpZ2h0UGlja2VyO1xuICAgICAgICB0aGlzLl9zZWFNYXRlcmlhbC5yZXBlYXQgPSB0cnVlO1xuICAgICAgICB0aGlzLl9zZWFNYXRlcmlhbC5hbmltYXRlVVZzID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fc2VhTWF0ZXJpYWwubm9ybWFsTWV0aG9kID0gdGhpcy5fd2F0ZXJNZXRob2QgO1xuICAgICAgICB0aGlzLl9zZWFNYXRlcmlhbC5hZGRFZmZlY3RNZXRob2QobmV3IEVmZmVjdEVudk1hcE1ldGhvZCh0aGlzLl9za3lib3hDdWJlVGV4dHVyZSkpO1xuICAgICAgICB0aGlzLl9zZWFNYXRlcmlhbC5zcGVjdWxhck1ldGhvZCA9IGZyZXNuZWxNZXRob2Q7XG4gICAgICAgIHRoaXMuX3NlYU1hdGVyaWFsLmdsb3NzID0gMTAwO1xuICAgICAgICB0aGlzLl9zZWFNYXRlcmlhbC5zcGVjdWxhciA9IDE7XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9zZWFHZW9tID0gbmV3IFByaW1pdGl2ZVBsYW5lUHJlZmFiKCA1MDAwMCwgNTAwMDAsIDEsIDEsIHRydWUsIGZhbHNlICk7XG4gICAgICAgIHRoaXMuX3NlYU1lc2ggPSA8TWVzaD4gdGhpcy5fc2VhR2VvbS5nZXROZXdPYmplY3QoKTtcbiAgICAgICAgdGhpcy5fc2VhR2VvbS5nZW9tZXRyeS5zY2FsZVVWKCAxMDAsIDEwMCApO1xuICAgICAgICB0aGlzLl9zZWFNZXNoLnN1Yk1lc2hlc1swXS51dlRyYW5zZm9ybSA9IG5ldyBVVlRyYW5zZm9ybSgpO1xuICAgICAgICB0aGlzLl9zZWFNZXNoLm1hdGVyaWFsID0gdGhpcy5fc2VhTWF0ZXJpYWw7XG4gICAgICAgIHRoaXMuX3ZpZXcuc2NlbmUuYWRkQ2hpbGQoIG5ldyBTa3lib3godGhpcy5fc2t5Ym94Q3ViZVRleHR1cmUpKTtcbiAgICAgICAgdGhpcy5fdmlldy5zY2VuZS5hZGRDaGlsZCggdGhpcy5fc2VhTWVzaCApO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgb25SZXNvdXJjZUNvbXBsZXRlKGV2ZW50OkxvYWRlckV2ZW50KVxuICAgIHtcbiAgICAgICAgdmFyIGxvYWRlcjpBc3NldExvYWRlciA9IDxBc3NldExvYWRlcj4gZXZlbnQudGFyZ2V0O1xuICAgICAgICB2YXIgbnVtQXNzZXRzOm51bWJlciA9IGxvYWRlci5iYXNlRGVwZW5kZW5jeS5hc3NldHMubGVuZ3RoO1xuICAgICAgICB2YXIgaTpudW1iZXIgPSAwO1xuICAgICAgICBcbiAgICAgICAgc3dpdGNoIChldmVudC51cmwpIHtcbiAgICAgICAgICAgIGNhc2UgXCJhc3NldHMvc2VhX25vcm1hbHMuanBnXCI6XG4gICAgICAgICAgICAgICAgdGhpcy5fc2VhTm9ybWFsVGV4dHVyZSA9IDxJbWFnZVRleHR1cmU+IGxvYWRlci5iYXNlRGVwZW5kZW5jeS5hc3NldHNbMF07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdhc3NldHMvZjE0L2YxNGQub2JqJzpcbiAgICAgICAgICAgICAgICB0aGlzLl9mMTRHZW9tID0gbmV3IERpc3BsYXlPYmplY3RDb250YWluZXIoKTtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbnVtQXNzZXRzOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFzc2V0OklBc3NldCA9IGxvYWRlci5iYXNlRGVwZW5kZW5jeS5hc3NldHNbaV07XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoYXNzZXQuYXNzZXRUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1lc2guYXNzZXRUeXBlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXNoOk1lc2ggPSA8TWVzaD4gYXNzZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZjE0R2VvbS5hZGRDaGlsZChtZXNoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgR2VvbWV0cnkuYXNzZXRUeXBlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBNYXRlcmlhbEJhc2UuYXNzZXRUeXBlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnYXNzZXRzL3NreWJveC9DdWJlVGV4dHVyZVRlc3QuY3ViZSc6XG4gICAgICAgICAgICAgICAgdGhpcy5fc2t5Ym94Q3ViZVRleHR1cmUgPSA8SW1hZ2VDdWJlVGV4dHVyZT4gbG9hZGVyLmJhc2VEZXBlbmRlbmN5LmFzc2V0c1swXTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5pbml0aWFsaXplU2NlbmUoKTtcbiAgICB9XG4gICAgXG4gICAgcHJpdmF0ZSByZW5kZXIoZHQ6bnVtYmVyKSAvL2FuaW1hdGUgYmFzZWQgb24gZHQgZm9yIGZpcmVmb3hcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLl9mMTRHZW9tKSB7XG4gICAgICAgICAgICB0aGlzLl9yb2xsSW5jcmVtZW50ICs9IDAuMDI7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5fc3RhdGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDAgOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9mMTRHZW9tLnJvdGF0aW9uWiA9IE1hdGguc2luKHRoaXMuX3JvbGxJbmNyZW1lbnQpKjI1O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDEgOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9sb29wSW5jcmVtZW50ICs9IDAuMDU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2YxNEdlb20ueiArPSBNYXRoLmNvcyh0aGlzLl9sb29wSW5jcmVtZW50KSoyMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZjE0R2VvbS55ICs9IE1hdGguc2luKHRoaXMuX2xvb3BJbmNyZW1lbnQpKjIwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9mMTRHZW9tLnJvdGF0aW9uWCArPSAtMSooKE1hdGguUEkvMTgwKSpNYXRoLmF0YW4yKHRoaXMuX2YxNEdlb20ueiwgdGhpcy5fZjE0R2VvbS55KSk7Ly8qIDIwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9mMTRHZW9tLnJvdGF0aW9uWiA9IE1hdGguc2luKHRoaXMuX3JvbGxJbmNyZW1lbnQpKjI1O1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2xvb3BJbmNyZW1lbnQgPiAoTWF0aC5QSSoyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbG9vcEluY3JlbWVudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdGF0ZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLl9mMTRHZW9tKSB7XG4gICAgICAgICAgICB0aGlzLl92aWV3LmNhbWVyYS5sb29rQXQodGhpcy5fZjE0R2VvbS50cmFuc2Zvcm0ucG9zaXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5fdmlldy5jYW1lcmEpIHtcbiAgICAgICAgICAgIHRoaXMuX2NhbWVyYUluY3JlbWVudCArPSAwLjAxO1xuICAgICAgICAgICAgdGhpcy5fdmlldy5jYW1lcmEueCA9IE1hdGguY29zKHRoaXMuX2NhbWVyYUluY3JlbWVudCkqNDAwO1xuICAgICAgICAgICAgdGhpcy5fdmlldy5jYW1lcmEueiA9IE1hdGguc2luKHRoaXMuX2NhbWVyYUluY3JlbWVudCkqNDAwO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoIHRoaXMuX2YxNEdlb20gKSB7XG4gICAgICAgICAgICB0aGlzLl92aWV3LmNhbWVyYS5sb29rQXQodGhpcy5fZjE0R2VvbS50cmFuc2Zvcm0ucG9zaXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5fc2VhTWF0ZXJpYWwpIHtcbiAgICAgICAgICAgIHRoaXMuX3NlYU1lc2guc3ViTWVzaGVzWzBdLnV2VHJhbnNmb3JtLm9mZnNldFYgLT0gMC4wNDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICB0aGlzLndhdGVyTWV0aG9kLndhdGVyMU9mZnNldFggKz0gLjAwMTtcbiAgICAgICAgICAgICB0aGlzLndhdGVyTWV0aG9kLndhdGVyMU9mZnNldFkgKz0gLjE7XG4gICAgICAgICAgICAgdGhpcy53YXRlck1ldGhvZC53YXRlcjJPZmZzZXRYICs9IC4wMDA3O1xuICAgICAgICAgICAgIHRoaXMud2F0ZXJNZXRob2Qud2F0ZXIyT2Zmc2V0WSArPSAuNjtcbiAgICAgICAgICAgICAvLyovXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2FwcFRpbWUgKz0gZHQ7XG4gICAgICAgIHRoaXMuX3ZpZXcucmVuZGVyKCk7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBvblJlc2l6ZShldmVudDpVSUV2ZW50ID0gbnVsbClcbiAgICB7XG4gICAgICAgIHRoaXMuX3ZpZXcueSA9IDA7XG4gICAgICAgIHRoaXMuX3ZpZXcueCA9IDA7XG4gICAgICAgIHRoaXMuX3ZpZXcud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgdGhpcy5fdmlldy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgb25Nb3VzZURvd24oZXZlbnQ6TW91c2VFdmVudClcbiAgICB7XG4gICAgICAgIHRoaXMuX3N0YXRlKys7XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5fc3RhdGUgPj0gdGhpcy5fbWF4U3RhdGVzKVxuICAgICAgICAgICAgdGhpcy5fc3RhdGUgPSAwO1xuICAgIH1cbn1cblxud2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uICgpXG57XG4gICAgbmV3IEFpcmNyYWZ0RGVtbygpO1xufSJdfQ==