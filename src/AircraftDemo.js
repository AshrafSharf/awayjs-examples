var DisplayObjectContainer = require("awayjs-core/lib/containers/DisplayObjectContainer");
var View = require("awayjs-core/lib/containers/View");
var DirectionalLight = require("awayjs-core/lib/entities/DirectionalLight");
var Skybox = require("awayjs-core/lib/entities/Skybox");
var LoaderEvent = require("awayjs-core/lib/events/LoaderEvent");
var UVTransform = require("awayjs-core/lib/core/geom/UVTransform");
var Vector3D = require("awayjs-core/lib/core/geom/Vector3D");
var AssetLibrary = require("awayjs-core/lib/core/library/AssetLibrary");
var AssetType = require("awayjs-core/lib/core/library/AssetType");
var SkyboxMaterial = require("awayjs-stagegl/lib/materials/SkyboxMaterial");
var TriangleMethodMaterial = require("awayjs-stagegl/lib/materials/TriangleMethodMaterial");
var StaticLightPicker = require("awayjs-core/lib/materials/lightpickers/StaticLightPicker");
var PrimitivePlanePrefab = require("awayjs-core/lib/prefabs/PrimitivePlanePrefab");
var URLRequest = require("awayjs-core/lib/core/net/URLRequest");
var DefaultRenderer = require("awayjs-stagegl/lib/core/render/DefaultRenderer");
var Debug = require("awayjs-core/lib/utils/Debug");
var RequestAnimationFrame = require("awayjs-core/lib/utils/RequestAnimationFrame");
var EffectEnvMapMethod = require("awayjs-renderergl/lib/materials/methods/EffectEnvMapMethod");
var NormalSimpleWaterMethod = require("awayjs-renderergl/lib/materials/methods/NormalSimpleWaterMethod");
var SpecularFresnelMethod = require("awayjs-renderergl/lib/materials/methods/SpecularFresnelMethod");
var OBJParser = require("awayjs-renderergl/lib/parsers/OBJParser");
var AircraftDemo = (function () {
    //}
    function AircraftDemo() {
        var _this = this;
        //{ state
        this._maxStates = 2;
        this._cameraIncrement = 0;
        this._rollIncrement = 0;
        this._loopIncrement = 0;
        this._state = 0;
        this._appTime = 0;
        this._seaInitialized = false;
        this._f14Initialized = false;
        this._skyboxInitialized = false;
        Debug.LOG_PI_ERRORS = false;
        Debug.THROW_ERRORS = false;
        this.initView();
        this.initLights();
        this.initAnimation();
        this.initParsers();
        this.loadAssets();
        window.onresize = function () { return _this.resize(); };
    }
    AircraftDemo.prototype.loadAssets = function () {
        this.loadAsset('assets/sea_normals.jpg');
        this.loadAsset('assets/f14/f14d.obj');
        this.loadAsset('assets/skybox/CubeTextureTest.cube');
    };
    AircraftDemo.prototype.loadAsset = function (path) {
        var _this = this;
        var token = AssetLibrary.load(new URLRequest(path));
        token.addEventListener(LoaderEvent.RESOURCE_COMPLETE, function (event) { return _this.onResourceComplete(event); });
    };
    AircraftDemo.prototype.initParsers = function () {
        AssetLibrary.enableParser(OBJParser);
    };
    AircraftDemo.prototype.initAnimation = function () {
        this._timer = new RequestAnimationFrame(this.render, this);
    };
    AircraftDemo.prototype.initView = function () {
        this._view = new View(new DefaultRenderer());
        this._view.camera.z = -500;
        this._view.camera.y = 250;
        this._view.camera.rotationX = 20;
        this._view.camera.projection.near = 0.5;
        this._view.camera.projection.far = 14000;
        this._view.backgroundColor = 0x2c2c32;
        this.resize();
    };
    AircraftDemo.prototype.initializeScene = function () {
        if (this._skyboxCubeTexture && this._f14Geom && this._seaNormalTexture) {
            this.initF14();
            this.initSea();
            this._timer.start();
        }
    };
    AircraftDemo.prototype.initLights = function () {
        var light = new DirectionalLight();
        light.color = 0x974523;
        light.direction = new Vector3D(-300, -300, -5000);
        light.ambient = 1;
        light.ambientColor = 0x7196ac;
        light.diffuse = 1.2;
        light.specular = 1.1;
        this._view.scene.addChild(light);
        this._lightPicker = new StaticLightPicker([light]);
    };
    AircraftDemo.prototype.initF14 = function () {
        var _this = this;
        this._f14Initialized = true;
        var f14Material = new TriangleMethodMaterial(this._seaNormalTexture, true, true, false); // will be the cubemap
        f14Material.lightPicker = this._lightPicker;
        this._view.scene.addChild(this._f14Geom);
        this._f14Geom.transform.scale = new Vector3D(20, 20, 20);
        this._f14Geom.rotationX = 90;
        this._f14Geom.y = 200;
        this._view.camera.lookAt(this._f14Geom.transform.position);
        document.onmousedown = function () { return _this.onMouseDown(); };
    };
    AircraftDemo.prototype.initSea = function () {
        this._seaMaterial = new TriangleMethodMaterial(this._seaNormalTexture, true, true, false); // will be the cubemap
        this._waterMethod = new NormalSimpleWaterMethod(this._seaNormalTexture, this._seaNormalTexture);
        var fresnelMethod = new SpecularFresnelMethod();
        fresnelMethod.normalReflectance = .3;
        this._seaMaterial.alphaBlending = true;
        this._seaMaterial.lightPicker = this._lightPicker;
        this._seaMaterial.repeat = true;
        this._seaMaterial.animateUVs = true;
        this._seaMaterial.normalMethod = this._waterMethod;
        this._seaMaterial.addEffectMethod(new EffectEnvMapMethod(this._skyboxCubeTexture));
        this._seaMaterial.specularMethod = fresnelMethod;
        this._seaMaterial.gloss = 100;
        this._seaMaterial.specular = 1;
        this._seaGeom = new PrimitivePlanePrefab(50000, 50000, 1, 1, true, false);
        this._seaMesh = this._seaGeom.getNewObject();
        this._seaGeom.geometry.scaleUV(100, 100);
        this._seaMesh.subMeshes[0].uvTransform = new UVTransform();
        this._seaMesh.material = this._seaMaterial;
        this._view.scene.addChild(new Skybox(new SkyboxMaterial(this._skyboxCubeTexture)));
        this._view.scene.addChild(this._seaMesh);
    };
    AircraftDemo.prototype.onResourceComplete = function (event) {
        var loader = event.target;
        var numAssets = loader.baseDependency.assets.length;
        var i = 0;
        switch (event.url) {
            case "assets/sea_normals.jpg":
                this._seaNormalTexture = loader.baseDependency.assets[0];
                break;
            case 'assets/f14/f14d.obj':
                this._f14Geom = new DisplayObjectContainer();
                for (i = 0; i < numAssets; ++i) {
                    var asset = loader.baseDependency.assets[i];
                    switch (asset.assetType) {
                        case AssetType.MESH:
                            var mesh = asset;
                            this._f14Geom.addChild(mesh);
                            break;
                        case AssetType.GEOMETRY:
                            break;
                        case AssetType.MATERIAL:
                            break;
                    }
                }
                break;
            case 'assets/skybox/CubeTextureTest.cube':
                this._skyboxCubeTexture = loader.baseDependency.assets[0];
                break;
        }
        this.initializeScene();
    };
    AircraftDemo.prototype.render = function (dt) {
        if (this._f14Geom) {
            this._rollIncrement += 0.02;
            switch (this._state) {
                case 0:
                    this._f14Geom.rotationZ = Math.sin(this._rollIncrement) * 25;
                    break;
                case 1:
                    this._loopIncrement += 0.05;
                    this._f14Geom.z += Math.cos(this._loopIncrement) * 20;
                    this._f14Geom.y += Math.sin(this._loopIncrement) * 20;
                    this._f14Geom.rotationX += -1 * ((Math.PI / 180) * Math.atan2(this._f14Geom.z, this._f14Geom.y)); //* 20;
                    this._f14Geom.rotationZ = Math.sin(this._rollIncrement) * 25;
                    if (this._loopIncrement > (Math.PI * 2)) {
                        this._loopIncrement = 0;
                        this._state = 0;
                    }
                    break;
            }
        }
        if (this._f14Geom) {
            this._view.camera.lookAt(this._f14Geom.transform.position);
        }
        if (this._view.camera) {
            this._cameraIncrement += 0.01;
            this._view.camera.x = Math.cos(this._cameraIncrement) * 400;
            this._view.camera.z = Math.sin(this._cameraIncrement) * 400;
        }
        if (this._f14Geom) {
            this._view.camera.lookAt(this._f14Geom.transform.position);
        }
        if (this._seaMaterial) {
            this._seaMesh.subMeshes[0].uvTransform.offsetV -= 0.04;
        }
        this._appTime += dt;
        this._view.render();
    };
    AircraftDemo.prototype.resize = function () {
        this._view.y = 0;
        this._view.x = 0;
        this._view.width = window.innerWidth;
        this._view.height = window.innerHeight;
    };
    AircraftDemo.prototype.onMouseDown = function () {
        this._state++;
        if (this._state >= this._maxStates)
            this._state = 0;
    };
    return AircraftDemo;
})();
window.onload = function () {
    new AircraftDemo();
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9BaXJjcmFmdERlbW8udHMiXSwibmFtZXMiOlsiQWlyY3JhZnREZW1vIiwiQWlyY3JhZnREZW1vLmNvbnN0cnVjdG9yIiwiQWlyY3JhZnREZW1vLmxvYWRBc3NldHMiLCJBaXJjcmFmdERlbW8ubG9hZEFzc2V0IiwiQWlyY3JhZnREZW1vLmluaXRQYXJzZXJzIiwiQWlyY3JhZnREZW1vLmluaXRBbmltYXRpb24iLCJBaXJjcmFmdERlbW8uaW5pdFZpZXciLCJBaXJjcmFmdERlbW8uaW5pdGlhbGl6ZVNjZW5lIiwiQWlyY3JhZnREZW1vLmluaXRMaWdodHMiLCJBaXJjcmFmdERlbW8uaW5pdEYxNCIsIkFpcmNyYWZ0RGVtby5pbml0U2VhIiwiQWlyY3JhZnREZW1vLm9uUmVzb3VyY2VDb21wbGV0ZSIsIkFpcmNyYWZ0RGVtby5yZW5kZXIiLCJBaXJjcmFmdERlbW8ucmVzaXplIiwiQWlyY3JhZnREZW1vLm9uTW91c2VEb3duIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFPLHNCQUFzQixXQUFZLG1EQUFtRCxDQUFDLENBQUM7QUFDOUYsSUFBTyxJQUFJLFdBQWlCLGlDQUFpQyxDQUFDLENBQUM7QUFFL0QsSUFBTyxnQkFBZ0IsV0FBYywyQ0FBMkMsQ0FBQyxDQUFDO0FBRWxGLElBQU8sTUFBTSxXQUFnQixpQ0FBaUMsQ0FBQyxDQUFDO0FBRWhFLElBQU8sV0FBVyxXQUFlLG9DQUFvQyxDQUFDLENBQUM7QUFFdkUsSUFBTyxXQUFXLFdBQWUsdUNBQXVDLENBQUMsQ0FBQztBQUMxRSxJQUFPLFFBQVEsV0FBZ0Isb0NBQW9DLENBQUMsQ0FBQztBQUNyRSxJQUFPLFlBQVksV0FBZSwyQ0FBMkMsQ0FBQyxDQUFDO0FBSS9FLElBQU8sU0FBUyxXQUFlLHdDQUF3QyxDQUFDLENBQUM7QUFFekUsSUFBTyxjQUFjLFdBQW1CLDZDQUE2QyxDQUFDLENBQUM7QUFDdkYsSUFBTyxzQkFBc0IsV0FBWSxxREFBcUQsQ0FBQyxDQUFDO0FBQ2hHLElBQU8saUJBQWlCLFdBQWEs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LENBQUNBLElBQUlBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLEdBQUNBLEVBQUVBLENBQUNBO29CQUNwREEsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsY0FBY0EsQ0FBQ0EsR0FBQ0EsRUFBRUEsQ0FBQ0E7b0JBQ3BEQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQSxTQUFTQSxJQUFJQSxDQUFDQSxDQUFDQSxHQUFDQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxFQUFFQSxHQUFDQSxHQUFHQSxDQUFDQSxHQUFDQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQSxDQUFDQSxFQUFFQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxFQUFDQSxPQUFPQTtvQkFDbEdBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLFNBQVNBLEdBQUdBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLEdBQUNBLEVBQUVBLENBQUNBO29CQUUzREEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsY0FBY0EsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsRUFBRUEsR0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7d0JBQ3BDQSxJQUFJQSxDQUFDQSxjQUFjQSxHQUFHQSxDQUFDQSxDQUFDQTt3QkFDeEJBLElBQUlBLENBQUNBLE1BQU1BLEdBQUdBLENBQUNBLENBQUNBO29CQUNwQkEsQ0FBQ0E7b0JBQ0RBLEtBQUtBLENBQUNBO1lBQ2RBLENBQUNBO1FBQ0xBLENBQUNBO1FBRURBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLENBQUNBLENBQUNBO1lBQ2hCQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxNQUFNQSxDQUFDQSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQSxTQUFTQSxDQUFDQSxRQUFRQSxDQUFDQSxDQUFDQTtRQUMvREEsQ0FBQ0E7UUFFREEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDcEJBLElBQUlBLENBQUNBLGdCQUFnQkEsSUFBSUEsSUFBSUEsQ0FBQ0E7WUFDOUJBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLE1BQU1BLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsR0FBQ0EsR0FBR0EsQ0FBQ0E7WUFDMURBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLE1BQU1BLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsR0FBQ0EsR0FBR0EsQ0FBQ0E7UUFDOURBLENBQUNBO1FBRURBLEVBQUVBLENBQUNBLENBQUVBLElBQUlBLENBQUNBLFFBQVNBLENBQUNBLENBQUNBLENBQUNBO1lBQ2xCQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxNQUFNQSxDQUFDQSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQSxTQUFTQSxDQUFDQSxRQUFRQSxDQUFDQSxDQUFDQTtRQUMvREEsQ0FBQ0E7UUFFREEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsWUFBWUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDcEJBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLFNBQVNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLFdBQVdBLENBQUNBLE9BQU9BLElBQUlBLElBQUlBLENBQUNBO1FBUTNEQSxDQUFDQTtRQUVEQSxJQUFJQSxDQUFDQSxRQUFRQSxJQUFJQSxFQUFFQSxDQUFDQTtRQUNwQkEsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsTUFBTUEsRUFBRUEsQ0FBQ0E7SUFDeEJBLENBQUNBO0lBRU1aLDZCQUFNQSxHQUFiQTtRQUVJYSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtRQUNqQkEsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7UUFDakJBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLEtBQUtBLEdBQUdBLE1BQU1BLENBQUNBLFVBQVVBLENBQUNBO1FBQ3JDQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxNQUFNQSxHQUFHQSxNQUFNQSxDQUFDQSxXQUFXQSxDQUFDQTtJQUMzQ0EsQ0FBQ0E7SUFFT2Isa0NBQVdBLEdBQW5CQTtRQUVJYyxJQUFJQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQTtRQUVkQSxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxNQUFNQSxJQUFJQSxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQTtZQUMvQkEsSUFBSUEsQ0FBQ0EsTUFBTUEsR0FBR0EsQ0FBQ0EsQ0FBQ0E7SUFDeEJBLENBQUNBO0lBQ0xkLG1CQUFDQTtBQUFEQSxDQTFQQSxBQTBQQ0EsSUFBQTtBQUVELE1BQU0sQ0FBQyxNQUFNLEdBQUc7SUFFWixJQUFJLFlBQVksRUFBRSxDQUFDO0FBQ3ZCLENBQUMsQ0FBQSIsImZpbGUiOiJBaXJjcmFmdERlbW8uanMiLCJzb3VyY2VSb290IjoiLi8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgRGlzcGxheU9iamVjdENvbnRhaW5lclx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvY29udGFpbmVycy9EaXNwbGF5T2JqZWN0Q29udGFpbmVyXCIpO1xuaW1wb3J0IFZpZXdcdFx0XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9jb250YWluZXJzL1ZpZXdcIik7XG5pbXBvcnQgSG92ZXJDb250cm9sbGVyXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvY29udHJvbGxlcnMvSG92ZXJDb250cm9sbGVyXCIpO1xuaW1wb3J0IERpcmVjdGlvbmFsTGlnaHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9lbnRpdGllcy9EaXJlY3Rpb25hbExpZ2h0XCIpO1xuaW1wb3J0IE1lc2hcdFx0XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9lbnRpdGllcy9NZXNoXCIpO1xuaW1wb3J0IFNreWJveFx0XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9lbnRpdGllcy9Ta3lib3hcIik7XG5pbXBvcnQgQXNzZXRFdmVudFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvZXZlbnRzL0Fzc2V0RXZlbnRcIik7XG5pbXBvcnQgTG9hZGVyRXZlbnRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2V2ZW50cy9Mb2FkZXJFdmVudFwiKTtcbmltcG9ydCBNb3VzZUV2ZW50XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9ldmVudHMvTW91c2VFdmVudFwiKTtcbmltcG9ydCBVVlRyYW5zZm9ybVx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvY29yZS9nZW9tL1VWVHJhbnNmb3JtXCIpO1xuaW1wb3J0IFZlY3RvcjNEXHRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2NvcmUvZ2VvbS9WZWN0b3IzRFwiKTtcbmltcG9ydCBBc3NldExpYnJhcnlcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2NvcmUvbGlicmFyeS9Bc3NldExpYnJhcnlcIik7XG5pbXBvcnQgQXNzZXRMb2FkZXJcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2NvcmUvbGlicmFyeS9Bc3NldExvYWRlclwiKTtcbmltcG9ydCBBc3NldExvYWRlckNvbnRleHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvY29yZS9saWJyYXJ5L0Fzc2V0TG9hZGVyQ29udGV4dFwiKTtcbmltcG9ydCBBc3NldExvYWRlclRva2VuXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvY29yZS9saWJyYXJ5L0Fzc2V0TG9hZGVyVG9rZW5cIik7XG5pbXBvcnQgQXNzZXRUeXBlXHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9jb3JlL2xpYnJhcnkvQXNzZXRUeXBlXCIpO1xuaW1wb3J0IElBc3NldFx0XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9jb3JlL2xpYnJhcnkvSUFzc2V0XCIpO1xuaW1wb3J0IFNreWJveE1hdGVyaWFsICAgICAgIFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtc3RhZ2VnbC9saWIvbWF0ZXJpYWxzL1NreWJveE1hdGVyaWFsXCIpO1xuaW1wb3J0IFRyaWFuZ2xlTWV0aG9kTWF0ZXJpYWxcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL21hdGVyaWFscy9UcmlhbmdsZU1ldGhvZE1hdGVyaWFsXCIpO1xuaW1wb3J0IFN0YXRpY0xpZ2h0UGlja2VyXHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL21hdGVyaWFscy9saWdodHBpY2tlcnMvU3RhdGljTGlnaHRQaWNrZXJcIik7XG5pbXBvcnQgUHJpbWl0aXZlUGxhbmVQcmVmYWJcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvcHJlZmFicy9QcmltaXRpdmVQbGFuZVByZWZhYlwiKTtcbmltcG9ydCBVUkxSZXF1ZXN0XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9jb3JlL25ldC9VUkxSZXF1ZXN0XCIpO1xuaW1wb3J0IERlZmF1bHRSZW5kZXJlclx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL2NvcmUvcmVuZGVyL0RlZmF1bHRSZW5kZXJlclwiKTtcbmltcG9ydCBJbWFnZUN1YmVUZXh0dXJlXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvdGV4dHVyZXMvSW1hZ2VDdWJlVGV4dHVyZVwiKTtcbmltcG9ydCBJbWFnZVRleHR1cmVcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL3RleHR1cmVzL0ltYWdlVGV4dHVyZVwiKTtcbmltcG9ydCBEZWJ1ZyAgICAgICAgICAgICAgICBcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL3V0aWxzL0RlYnVnXCIpO1xuaW1wb3J0IFJlcXVlc3RBbmltYXRpb25GcmFtZVx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvdXRpbHMvUmVxdWVzdEFuaW1hdGlvbkZyYW1lXCIpO1xuXG5pbXBvcnQgRWZmZWN0RW52TWFwTWV0aG9kICAgXHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9tYXRlcmlhbHMvbWV0aG9kcy9FZmZlY3RFbnZNYXBNZXRob2RcIik7XG5pbXBvcnQgTm9ybWFsU2ltcGxlV2F0ZXJNZXRob2RcdFx0PSByZXF1aXJlKFwiYXdheWpzLXJlbmRlcmVyZ2wvbGliL21hdGVyaWFscy9tZXRob2RzL05vcm1hbFNpbXBsZVdhdGVyTWV0aG9kXCIpO1xuaW1wb3J0IFNwZWN1bGFyRnJlc25lbE1ldGhvZFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvbWF0ZXJpYWxzL21ldGhvZHMvU3BlY3VsYXJGcmVzbmVsTWV0aG9kXCIpO1xuaW1wb3J0IEFXRFBhcnNlclx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvcGFyc2Vycy9BV0RQYXJzZXJcIik7XG5pbXBvcnQgT0JKUGFyc2VyXHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9wYXJzZXJzL09CSlBhcnNlclwiKTtcblxuY2xhc3MgQWlyY3JhZnREZW1vXG57XG4gICAgLy97IHN0YXRlXG4gICAgcHJpdmF0ZSBfbWF4U3RhdGVzOm51bWJlciA9IDI7XG4gICAgcHJpdmF0ZSBfY2FtZXJhSW5jcmVtZW50Om51bWJlciA9IDA7XG4gICAgcHJpdmF0ZSBfcm9sbEluY3JlbWVudDpudW1iZXIgPSAwO1xuICAgIHByaXZhdGUgX2xvb3BJbmNyZW1lbnQ6bnVtYmVyID0gMDtcbiAgICBwcml2YXRlIF9zdGF0ZTpudW1iZXIgPSAwO1xuICAgIHByaXZhdGUgX2FwcFRpbWU6bnVtYmVyID0gMDtcbiAgICAvL31cbiAgICBcbiAgICBwcml2YXRlIF9saWdodFBpY2tlcjpTdGF0aWNMaWdodFBpY2tlcjtcbiAgICBwcml2YXRlIF92aWV3OlZpZXc7XG4gICAgcHJpdmF0ZSBfdGltZXI6UmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xuICAgIFxuICAgIC8veyBzZWFcbiAgICBwcml2YXRlIF9zZWFHZW9tOlByaW1pdGl2ZVBsYW5lUHJlZmFiO1xuICAgIHByaXZhdGUgX3NlYU1lc2g6TWVzaDtcbiAgICBwcml2YXRlIF9zZWFOb3JtYWxUZXh0dXJlOkltYWdlVGV4dHVyZTtcbiAgICBwcml2YXRlIF9zZWFJbml0aWFsaXplZDpib29sZWFuID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBfc2VhTWF0ZXJpYWw6VHJpYW5nbGVNZXRob2RNYXRlcmlhbDtcbiAgICAvL31cbiAgICBcbiAgICAvL3sgZjE0XG4gICAgcHJpdmF0ZSBfZjE0R2VvbTpEaXNwbGF5T2JqZWN0Q29udGFpbmVyO1xuICAgIHByaXZhdGUgX2YxNEluaXRpYWxpemVkOmJvb2xlYW4gPSBmYWxzZTtcbiAgICAvL31cbiAgICBcbiAgICAvL3sgc2t5Ym94XG4gICAgcHJpdmF0ZSBfd2F0ZXJNZXRob2Q6Tm9ybWFsU2ltcGxlV2F0ZXJNZXRob2Q7XG4gICAgcHJpdmF0ZSBfc2t5Ym94Q3ViZVRleHR1cmU6SW1hZ2VDdWJlVGV4dHVyZTtcbiAgICBwcml2YXRlIF9za3lib3hJbml0aWFsaXplZDpib29sZWFuID0gZmFsc2U7XG4gICAgLy99XG4gICAgXG4gICAgY29uc3RydWN0b3IoKVxuICAgIHtcbiAgICAgICAgRGVidWcuTE9HX1BJX0VSUk9SUyA9IGZhbHNlO1xuICAgICAgICBEZWJ1Zy5USFJPV19FUlJPUlMgPSBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuaW5pdFZpZXcoKTtcbiAgICAgICAgdGhpcy5pbml0TGlnaHRzKCk7XG4gICAgICAgIHRoaXMuaW5pdEFuaW1hdGlvbigpO1xuICAgICAgICB0aGlzLmluaXRQYXJzZXJzKCk7XG4gICAgICAgIHRoaXMubG9hZEFzc2V0cygpO1xuICAgICAgICBcbiAgICAgICAgd2luZG93Lm9ucmVzaXplID0gKCkgPT4gdGhpcy5yZXNpemUoKTtcbiAgICB9XG4gICAgXG4gICAgcHJpdmF0ZSBsb2FkQXNzZXRzKCk6dm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5sb2FkQXNzZXQoJ2Fzc2V0cy9zZWFfbm9ybWFscy5qcGcnKTtcbiAgICAgICAgdGhpcy5sb2FkQXNzZXQoJ2Fzc2V0cy9mMTQvZjE0ZC5vYmonKTtcbiAgICAgICAgdGhpcy5sb2FkQXNzZXQoJ2Fzc2V0cy9za3lib3gvQ3ViZVRleHR1cmVUZXN0LmN1YmUnKTtcbiAgICB9XG4gICAgXG4gICAgcHJpdmF0ZSBsb2FkQXNzZXQocGF0aDpzdHJpbmcpOnZvaWRcbiAgICB7XG4gICAgICAgIHZhciB0b2tlbjpBc3NldExvYWRlclRva2VuID0gQXNzZXRMaWJyYXJ5LmxvYWQobmV3IFVSTFJlcXVlc3QocGF0aCkpO1xuICAgICAgICB0b2tlbi5hZGRFdmVudExpc3RlbmVyKExvYWRlckV2ZW50LlJFU09VUkNFX0NPTVBMRVRFLCAoZXZlbnQ6TG9hZGVyRXZlbnQpID0+IHRoaXMub25SZXNvdXJjZUNvbXBsZXRlKGV2ZW50KSk7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgaW5pdFBhcnNlcnMoKTp2b2lkXG4gICAge1xuICAgICAgICBBc3NldExpYnJhcnkuZW5hYmxlUGFyc2VyKE9CSlBhcnNlcik7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgaW5pdEFuaW1hdGlvbigpOnZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuX3RpbWVyID0gbmV3IFJlcXVlc3RBbmltYXRpb25GcmFtZSggdGhpcy5yZW5kZXIsIHRoaXMgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGluaXRWaWV3KCk6dm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5fdmlldyA9IG5ldyBWaWV3KG5ldyBEZWZhdWx0UmVuZGVyZXIoKSk7XG4gICAgICAgIHRoaXMuX3ZpZXcuY2FtZXJhLnpcdD0gLTUwMDtcbiAgICAgICAgdGhpcy5fdmlldy5jYW1lcmEueVx0PSAyNTA7XG4gICAgICAgIHRoaXMuX3ZpZXcuY2FtZXJhLnJvdGF0aW9uWFx0PSAyMDtcbiAgICAgICAgdGhpcy5fdmlldy5jYW1lcmEucHJvamVjdGlvbi5uZWFyID0gMC41O1xuICAgICAgICB0aGlzLl92aWV3LmNhbWVyYS5wcm9qZWN0aW9uLmZhciA9IDE0MDAwO1xuICAgICAgICB0aGlzLl92aWV3LmJhY2tncm91bmRDb2xvciA9IDB4MmMyYzMyO1xuICAgICAgICB0aGlzLnJlc2l6ZSgpO1xuICAgIH1cbiAgICBcbiAgICBwcml2YXRlIGluaXRpYWxpemVTY2VuZSgpOnZvaWRcbiAgICB7XG4gICAgICAgIGlmKHRoaXMuX3NreWJveEN1YmVUZXh0dXJlICYmIHRoaXMuX2YxNEdlb20gJiYgdGhpcy5fc2VhTm9ybWFsVGV4dHVyZSkge1xuICAgICAgICAgICAgdGhpcy5pbml0RjE0KCk7XG4gICAgICAgICAgICB0aGlzLmluaXRTZWEoKTtcbiAgICAgICAgICAgIHRoaXMuX3RpbWVyLnN0YXJ0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcHJpdmF0ZSBpbml0TGlnaHRzKCk6dm9pZFxuICAgIHtcbiAgICAgICAgdmFyIGxpZ2h0OkRpcmVjdGlvbmFsTGlnaHQgPSBuZXcgRGlyZWN0aW9uYWxMaWdodCgpO1xuICAgICAgICBsaWdodC5jb2xvclx0PSAweDk3NDUyMztcbiAgICAgICAgbGlnaHQuZGlyZWN0aW9uXHQ9IG5ldyBWZWN0b3IzRCgtMzAwLCAtMzAwLCAtNTAwMCk7XG4gICAgICAgIGxpZ2h0LmFtYmllbnQgPSAxO1xuICAgICAgICBsaWdodC5hbWJpZW50Q29sb3IgPSAweDcxOTZhYztcbiAgICAgICAgbGlnaHQuZGlmZnVzZSA9IDEuMjtcbiAgICAgICAgbGlnaHQuc3BlY3VsYXIgPSAxLjE7XG4gICAgICAgIHRoaXMuX3ZpZXcuc2NlbmUuYWRkQ2hpbGQobGlnaHQpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5fbGlnaHRQaWNrZXIgPSBuZXcgU3RhdGljTGlnaHRQaWNrZXIoW2xpZ2h0XSk7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgaW5pdEYxNCgpOnZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuX2YxNEluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgXG4gICAgICAgIHZhciBmMTRNYXRlcmlhbDogVHJpYW5nbGVNZXRob2RNYXRlcmlhbCA9IG5ldyBUcmlhbmdsZU1ldGhvZE1hdGVyaWFsKHRoaXMuX3NlYU5vcm1hbFRleHR1cmUsIHRydWUsIHRydWUsIGZhbHNlKTsgLy8gd2lsbCBiZSB0aGUgY3ViZW1hcFxuICAgICAgICBmMTRNYXRlcmlhbC5saWdodFBpY2tlciA9IHRoaXMuX2xpZ2h0UGlja2VyO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5fdmlldy5zY2VuZS5hZGRDaGlsZCh0aGlzLl9mMTRHZW9tKTtcbiAgICAgICAgdGhpcy5fZjE0R2VvbS50cmFuc2Zvcm0uc2NhbGUgPSBuZXcgVmVjdG9yM0QoMjAsIDIwLCAyMCk7XG4gICAgICAgIHRoaXMuX2YxNEdlb20ucm90YXRpb25YID0gOTA7XG4gICAgICAgIHRoaXMuX2YxNEdlb20ueSA9IDIwMDtcbiAgICAgICAgdGhpcy5fdmlldy5jYW1lcmEubG9va0F0KHRoaXMuX2YxNEdlb20udHJhbnNmb3JtLnBvc2l0aW9uKTtcbiAgICAgICAgXG4gICAgICAgIGRvY3VtZW50Lm9ubW91c2Vkb3duID0gKCkgPT4gdGhpcy5vbk1vdXNlRG93bigpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdFNlYSgpOnZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuX3NlYU1hdGVyaWFsID0gbmV3IFRyaWFuZ2xlTWV0aG9kTWF0ZXJpYWwodGhpcy5fc2VhTm9ybWFsVGV4dHVyZSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UpOyAvLyB3aWxsIGJlIHRoZSBjdWJlbWFwXG4gICAgICAgIHRoaXMuX3dhdGVyTWV0aG9kID0gbmV3IE5vcm1hbFNpbXBsZVdhdGVyTWV0aG9kKHRoaXMuX3NlYU5vcm1hbFRleHR1cmUsIHRoaXMuX3NlYU5vcm1hbFRleHR1cmUpO1xuICAgICAgICB2YXIgZnJlc25lbE1ldGhvZDpTcGVjdWxhckZyZXNuZWxNZXRob2QgID0gbmV3IFNwZWN1bGFyRnJlc25lbE1ldGhvZCgpO1xuICAgICAgICBmcmVzbmVsTWV0aG9kLm5vcm1hbFJlZmxlY3RhbmNlICAgICAgICAgICAgICAgICAgICAgICAgID0gLjM7XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9zZWFNYXRlcmlhbC5hbHBoYUJsZW5kaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fc2VhTWF0ZXJpYWwubGlnaHRQaWNrZXIgPSB0aGlzLl9saWdodFBpY2tlcjtcbiAgICAgICAgdGhpcy5fc2VhTWF0ZXJpYWwucmVwZWF0ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fc2VhTWF0ZXJpYWwuYW5pbWF0ZVVWcyA9IHRydWU7XG4gICAgICAgIHRoaXMuX3NlYU1hdGVyaWFsLm5vcm1hbE1ldGhvZCA9IHRoaXMuX3dhdGVyTWV0aG9kIDtcbiAgICAgICAgdGhpcy5fc2VhTWF0ZXJpYWwuYWRkRWZmZWN0TWV0aG9kKG5ldyBFZmZlY3RFbnZNYXBNZXRob2QodGhpcy5fc2t5Ym94Q3ViZVRleHR1cmUpKTtcbiAgICAgICAgdGhpcy5fc2VhTWF0ZXJpYWwuc3BlY3VsYXJNZXRob2QgPSBmcmVzbmVsTWV0aG9kO1xuICAgICAgICB0aGlzLl9zZWFNYXRlcmlhbC5nbG9zcyA9IDEwMDtcbiAgICAgICAgdGhpcy5fc2VhTWF0ZXJpYWwuc3BlY3VsYXIgPSAxO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5fc2VhR2VvbSA9IG5ldyBQcmltaXRpdmVQbGFuZVByZWZhYiggNTAwMDAsIDUwMDAwLCAxLCAxLCB0cnVlLCBmYWxzZSApO1xuICAgICAgICB0aGlzLl9zZWFNZXNoID0gPE1lc2g+IHRoaXMuX3NlYUdlb20uZ2V0TmV3T2JqZWN0KCk7XG4gICAgICAgIHRoaXMuX3NlYUdlb20uZ2VvbWV0cnkuc2NhbGVVViggMTAwLCAxMDAgKTtcbiAgICAgICAgdGhpcy5fc2VhTWVzaC5zdWJNZXNoZXNbMF0udXZUcmFuc2Zvcm0gPSBuZXcgVVZUcmFuc2Zvcm0oKTtcbiAgICAgICAgdGhpcy5fc2VhTWVzaC5tYXRlcmlhbCA9IHRoaXMuX3NlYU1hdGVyaWFsO1xuICAgICAgICB0aGlzLl92aWV3LnNjZW5lLmFkZENoaWxkKCBuZXcgU2t5Ym94KCBuZXcgU2t5Ym94TWF0ZXJpYWwodGhpcy5fc2t5Ym94Q3ViZVRleHR1cmUpICkpO1xuICAgICAgICB0aGlzLl92aWV3LnNjZW5lLmFkZENoaWxkKCB0aGlzLl9zZWFNZXNoICk7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBvblJlc291cmNlQ29tcGxldGUoZXZlbnQ6TG9hZGVyRXZlbnQpXG4gICAge1xuICAgICAgICB2YXIgbG9hZGVyOkFzc2V0TG9hZGVyID0gPEFzc2V0TG9hZGVyPiBldmVudC50YXJnZXQ7XG4gICAgICAgIHZhciBudW1Bc3NldHM6bnVtYmVyID0gbG9hZGVyLmJhc2VEZXBlbmRlbmN5LmFzc2V0cy5sZW5ndGg7XG4gICAgICAgIHZhciBpOm51bWJlciA9IDA7XG4gICAgICAgIFxuICAgICAgICBzd2l0Y2ggKGV2ZW50LnVybCkge1xuICAgICAgICAgICAgY2FzZSBcImFzc2V0cy9zZWFfbm9ybWFscy5qcGdcIjpcbiAgICAgICAgICAgICAgICB0aGlzLl9zZWFOb3JtYWxUZXh0dXJlID0gPEltYWdlVGV4dHVyZT4gbG9hZGVyLmJhc2VEZXBlbmRlbmN5LmFzc2V0c1swXTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2Fzc2V0cy9mMTQvZjE0ZC5vYmonOlxuICAgICAgICAgICAgICAgIHRoaXMuX2YxNEdlb20gPSBuZXcgRGlzcGxheU9iamVjdENvbnRhaW5lcigpO1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBudW1Bc3NldHM7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXNzZXQ6SUFzc2V0ID0gbG9hZGVyLmJhc2VEZXBlbmRlbmN5LmFzc2V0c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChhc3NldC5hc3NldFR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQXNzZXRUeXBlLk1FU0g6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lc2g6TWVzaCA9IDxNZXNoPiBhc3NldDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9mMTRHZW9tLmFkZENoaWxkKG1lc2gpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBBc3NldFR5cGUuR0VPTUVUUlk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEFzc2V0VHlwZS5NQVRFUklBTDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2Fzc2V0cy9za3lib3gvQ3ViZVRleHR1cmVUZXN0LmN1YmUnOlxuICAgICAgICAgICAgICAgIHRoaXMuX3NreWJveEN1YmVUZXh0dXJlID0gPEltYWdlQ3ViZVRleHR1cmU+IGxvYWRlci5iYXNlRGVwZW5kZW5jeS5hc3NldHNbMF07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVNjZW5lKCk7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgcmVuZGVyKGR0Om51bWJlcikgLy9hbmltYXRlIGJhc2VkIG9uIGR0IGZvciBmaXJlZm94XG4gICAge1xuICAgICAgICBpZiAodGhpcy5fZjE0R2VvbSkge1xuICAgICAgICAgICAgdGhpcy5fcm9sbEluY3JlbWVudCArPSAwLjAyO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuX3N0YXRlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwIDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZjE0R2VvbS5yb3RhdGlvblogPSBNYXRoLnNpbih0aGlzLl9yb2xsSW5jcmVtZW50KSoyNTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxIDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbG9vcEluY3JlbWVudCArPSAwLjA1O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9mMTRHZW9tLnogKz0gTWF0aC5jb3ModGhpcy5fbG9vcEluY3JlbWVudCkqMjA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2YxNEdlb20ueSArPSBNYXRoLnNpbih0aGlzLl9sb29wSW5jcmVtZW50KSoyMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZjE0R2VvbS5yb3RhdGlvblggKz0gLTEqKChNYXRoLlBJLzE4MCkqTWF0aC5hdGFuMih0aGlzLl9mMTRHZW9tLnosIHRoaXMuX2YxNEdlb20ueSkpOy8vKiAyMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZjE0R2VvbS5yb3RhdGlvblogPSBNYXRoLnNpbih0aGlzLl9yb2xsSW5jcmVtZW50KSoyNTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9sb29wSW5jcmVtZW50ID4gKE1hdGguUEkqMikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2xvb3BJbmNyZW1lbnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc3RhdGUgPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5fZjE0R2VvbSkge1xuICAgICAgICAgICAgdGhpcy5fdmlldy5jYW1lcmEubG9va0F0KHRoaXMuX2YxNEdlb20udHJhbnNmb3JtLnBvc2l0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuX3ZpZXcuY2FtZXJhKSB7XG4gICAgICAgICAgICB0aGlzLl9jYW1lcmFJbmNyZW1lbnQgKz0gMC4wMTtcbiAgICAgICAgICAgIHRoaXMuX3ZpZXcuY2FtZXJhLnggPSBNYXRoLmNvcyh0aGlzLl9jYW1lcmFJbmNyZW1lbnQpKjQwMDtcbiAgICAgICAgICAgIHRoaXMuX3ZpZXcuY2FtZXJhLnogPSBNYXRoLnNpbih0aGlzLl9jYW1lcmFJbmNyZW1lbnQpKjQwMDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKCB0aGlzLl9mMTRHZW9tICkge1xuICAgICAgICAgICAgdGhpcy5fdmlldy5jYW1lcmEubG9va0F0KHRoaXMuX2YxNEdlb20udHJhbnNmb3JtLnBvc2l0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuX3NlYU1hdGVyaWFsKSB7XG4gICAgICAgICAgICB0aGlzLl9zZWFNZXNoLnN1Yk1lc2hlc1swXS51dlRyYW5zZm9ybS5vZmZzZXRWIC09IDAuMDQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgdGhpcy53YXRlck1ldGhvZC53YXRlcjFPZmZzZXRYICs9IC4wMDE7XG4gICAgICAgICAgICAgdGhpcy53YXRlck1ldGhvZC53YXRlcjFPZmZzZXRZICs9IC4xO1xuICAgICAgICAgICAgIHRoaXMud2F0ZXJNZXRob2Qud2F0ZXIyT2Zmc2V0WCArPSAuMDAwNztcbiAgICAgICAgICAgICB0aGlzLndhdGVyTWV0aG9kLndhdGVyMk9mZnNldFkgKz0gLjY7XG4gICAgICAgICAgICAgLy8qL1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9hcHBUaW1lICs9IGR0O1xuICAgICAgICB0aGlzLl92aWV3LnJlbmRlcigpO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgcmVzaXplKClcbiAgICB7XG4gICAgICAgIHRoaXMuX3ZpZXcueSA9IDA7XG4gICAgICAgIHRoaXMuX3ZpZXcueCA9IDA7XG4gICAgICAgIHRoaXMuX3ZpZXcud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgdGhpcy5fdmlldy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgb25Nb3VzZURvd24oKVxuICAgIHtcbiAgICAgICAgdGhpcy5fc3RhdGUrKztcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLl9zdGF0ZSA+PSB0aGlzLl9tYXhTdGF0ZXMpXG4gICAgICAgICAgICB0aGlzLl9zdGF0ZSA9IDA7XG4gICAgfVxufVxuXG53aW5kb3cub25sb2FkID0gZnVuY3Rpb24gKClcbntcbiAgICBuZXcgQWlyY3JhZnREZW1vKCk7XG59Il19