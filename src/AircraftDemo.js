var LoaderEvent = require("awayjs-core/lib/events/LoaderEvent");
var UVTransform = require("awayjs-core/lib/geom/UVTransform");
var Vector3D = require("awayjs-core/lib/geom/Vector3D");
var AssetLibrary = require("awayjs-core/lib/library/AssetLibrary");
var AssetType = require("awayjs-core/lib/library/AssetType");
var URLRequest = require("awayjs-core/lib/net/URLRequest");
var Debug = require("awayjs-core/lib/utils/Debug");
var RequestAnimationFrame = require("awayjs-core/lib/utils/RequestAnimationFrame");
var DisplayObjectContainer = require("awayjs-display/lib/containers/DisplayObjectContainer");
var View = require("awayjs-display/lib/containers/View");
var DirectionalLight = require("awayjs-display/lib/entities/DirectionalLight");
var Skybox = require("awayjs-display/lib/entities/Skybox");
var StaticLightPicker = require("awayjs-display/lib/materials/lightpickers/StaticLightPicker");
var PrimitivePlanePrefab = require("awayjs-display/lib/prefabs/PrimitivePlanePrefab");
var SkyboxMaterial = require("awayjs-stagegl/lib/materials/SkyboxMaterial");
var TriangleMethodMaterial = require("awayjs-stagegl/lib/materials/TriangleMethodMaterial");
var DefaultRenderer = require("awayjs-stagegl/lib/render/DefaultRenderer");
var EffectEnvMapMethod = require("awayjs-renderergl/lib/materials/methods/EffectEnvMapMethod");
var NormalSimpleWaterMethod = require("awayjs-renderergl/lib/materials/methods/NormalSimpleWaterMethod");
var SpecularFresnelMethod = require("awayjs-renderergl/lib/materials/methods/SpecularFresnelMethod");
var OBJParser = require("awayjs-renderergl/lib/parsers/OBJParser");
var AircraftDemo = (function () {
    //}
    function AircraftDemo() {
        var _this = this;
        //{ state
        this._maxStates = 2;
        this._cameraIncrement = 0;
        this._rollIncrement = 0;
        this._loopIncrement = 0;
        this._state = 0;
        this._appTime = 0;
        this._seaInitialized = false;
        this._f14Initialized = false;
        this._skyboxInitialized = false;
        Debug.LOG_PI_ERRORS = false;
        Debug.THROW_ERRORS = false;
        this.initView();
        this.initLights();
        this.initAnimation();
        this.initParsers();
        this.loadAssets();
        window.onresize = function (event) { return _this.onResize(event); };
    }
    AircraftDemo.prototype.loadAssets = function () {
        this.loadAsset('assets/sea_normals.jpg');
        this.loadAsset('assets/f14/f14d.obj');
        this.loadAsset('assets/skybox/CubeTextureTest.cube');
    };
    AircraftDemo.prototype.loadAsset = function (path) {
        var _this = this;
        var token = AssetLibrary.load(new URLRequest(path));
        token.addEventListener(LoaderEvent.RESOURCE_COMPLETE, function (event) { return _this.onResourceComplete(event); });
    };
    AircraftDemo.prototype.initParsers = function () {
        AssetLibrary.enableParser(OBJParser);
    };
    AircraftDemo.prototype.initAnimation = function () {
        this._timer = new RequestAnimationFrame(this.render, this);
    };
    AircraftDemo.prototype.initView = function () {
        this._view = new View(new DefaultRenderer());
        this._view.camera.z = -500;
        this._view.camera.y = 250;
        this._view.camera.rotationX = 20;
        this._view.camera.projection.near = 0.5;
        this._view.camera.projection.far = 14000;
        this._view.backgroundColor = 0x2c2c32;
        this.onResize();
    };
    AircraftDemo.prototype.initializeScene = function () {
        if (this._skyboxCubeTexture && this._f14Geom && this._seaNormalTexture) {
            this.initF14();
            this.initSea();
            this._timer.start();
        }
    };
    AircraftDemo.prototype.initLights = function () {
        var light = new DirectionalLight();
        light.color = 0x974523;
        light.direction = new Vector3D(-300, -300, -5000);
        light.ambient = 1;
        light.ambientColor = 0x7196ac;
        light.diffuse = 1.2;
        light.specular = 1.1;
        this._view.scene.addChild(light);
        this._lightPicker = new StaticLightPicker([light]);
    };
    AircraftDemo.prototype.initF14 = function () {
        var _this = this;
        this._f14Initialized = true;
        var f14Material = new TriangleMethodMaterial(this._seaNormalTexture, true, true, false); // will be the cubemap
        f14Material.lightPicker = this._lightPicker;
        this._view.scene.addChild(this._f14Geom);
        this._f14Geom.transform.scale = new Vector3D(20, 20, 20);
        this._f14Geom.rotationX = 90;
        this._f14Geom.y = 200;
        this._view.camera.lookAt(this._f14Geom.transform.position);
        document.onmousedown = function (event) { return _this.onMouseDown(event); };
    };
    AircraftDemo.prototype.initSea = function () {
        this._seaMaterial = new TriangleMethodMaterial(this._seaNormalTexture, true, true, false); // will be the cubemap
        this._waterMethod = new NormalSimpleWaterMethod(this._seaNormalTexture, this._seaNormalTexture);
        var fresnelMethod = new SpecularFresnelMethod();
        fresnelMethod.normalReflectance = .3;
        this._seaMaterial.alphaBlending = true;
        this._seaMaterial.lightPicker = this._lightPicker;
        this._seaMaterial.repeat = true;
        this._seaMaterial.animateUVs = true;
        this._seaMaterial.normalMethod = this._waterMethod;
        this._seaMaterial.addEffectMethod(new EffectEnvMapMethod(this._skyboxCubeTexture));
        this._seaMaterial.specularMethod = fresnelMethod;
        this._seaMaterial.gloss = 100;
        this._seaMaterial.specular = 1;
        this._seaGeom = new PrimitivePlanePrefab(50000, 50000, 1, 1, true, false);
        this._seaMesh = this._seaGeom.getNewObject();
        this._seaGeom.geometry.scaleUV(100, 100);
        this._seaMesh.subMeshes[0].uvTransform = new UVTransform();
        this._seaMesh.material = this._seaMaterial;
        this._view.scene.addChild(new Skybox(new SkyboxMaterial(this._skyboxCubeTexture)));
        this._view.scene.addChild(this._seaMesh);
    };
    AircraftDemo.prototype.onResourceComplete = function (event) {
        var loader = event.target;
        var numAssets = loader.baseDependency.assets.length;
        var i = 0;
        switch (event.url) {
            case "assets/sea_normals.jpg":
                this._seaNormalTexture = loader.baseDependency.assets[0];
                break;
            case 'assets/f14/f14d.obj':
                this._f14Geom = new DisplayObjectContainer();
                for (i = 0; i < numAssets; ++i) {
                    var asset = loader.baseDependency.assets[i];
                    switch (asset.assetType) {
                        case AssetType.MESH:
                            var mesh = asset;
                            this._f14Geom.addChild(mesh);
                            break;
                        case AssetType.GEOMETRY:
                            break;
                        case AssetType.MATERIAL:
                            break;
                    }
                }
                break;
            case 'assets/skybox/CubeTextureTest.cube':
                this._skyboxCubeTexture = loader.baseDependency.assets[0];
                break;
        }
        this.initializeScene();
    };
    AircraftDemo.prototype.render = function (dt) {
        if (this._f14Geom) {
            this._rollIncrement += 0.02;
            switch (this._state) {
                case 0:
                    this._f14Geom.rotationZ = Math.sin(this._rollIncrement) * 25;
                    break;
                case 1:
                    this._loopIncrement += 0.05;
                    this._f14Geom.z += Math.cos(this._loopIncrement) * 20;
                    this._f14Geom.y += Math.sin(this._loopIncrement) * 20;
                    this._f14Geom.rotationX += -1 * ((Math.PI / 180) * Math.atan2(this._f14Geom.z, this._f14Geom.y)); //* 20;
                    this._f14Geom.rotationZ = Math.sin(this._rollIncrement) * 25;
                    if (this._loopIncrement > (Math.PI * 2)) {
                        this._loopIncrement = 0;
                        this._state = 0;
                    }
                    break;
            }
        }
        if (this._f14Geom) {
            this._view.camera.lookAt(this._f14Geom.transform.position);
        }
        if (this._view.camera) {
            this._cameraIncrement += 0.01;
            this._view.camera.x = Math.cos(this._cameraIncrement) * 400;
            this._view.camera.z = Math.sin(this._cameraIncrement) * 400;
        }
        if (this._f14Geom) {
            this._view.camera.lookAt(this._f14Geom.transform.position);
        }
        if (this._seaMaterial) {
            this._seaMesh.subMeshes[0].uvTransform.offsetV -= 0.04;
        }
        this._appTime += dt;
        this._view.render();
    };
    AircraftDemo.prototype.onResize = function (event) {
        if (event === void 0) { event = null; }
        this._view.y = 0;
        this._view.x = 0;
        this._view.width = window.innerWidth;
        this._view.height = window.innerHeight;
    };
    AircraftDemo.prototype.onMouseDown = function (event) {
        this._state++;
        if (this._state >= this._maxStates)
            this._state = 0;
    };
    return AircraftDemo;
})();
window.onload = function () {
    new AircraftDemo();
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9BaXJjcmFmdERlbW8udHMiXSwibmFtZXMiOlsiQWlyY3JhZnREZW1vIiwiQWlyY3JhZnREZW1vLmNvbnN0cnVjdG9yIiwiQWlyY3JhZnREZW1vLmxvYWRBc3NldHMiLCJBaXJjcmFmdERlbW8ubG9hZEFzc2V0IiwiQWlyY3JhZnREZW1vLmluaXRQYXJzZXJzIiwiQWlyY3JhZnREZW1vLmluaXRBbmltYXRpb24iLCJBaXJjcmFmdERlbW8uaW5pdFZpZXciLCJBaXJjcmFmdERlbW8uaW5pdGlhbGl6ZVNjZW5lIiwiQWlyY3JhZnREZW1vLmluaXRMaWdodHMiLCJBaXJjcmFmdERlbW8uaW5pdEYxNCIsIkFpcmNyYWZ0RGVtby5pbml0U2VhIiwiQWlyY3JhZnREZW1vLm9uUmVzb3VyY2VDb21wbGV0ZSIsIkFpcmNyYWZ0RGVtby5yZW5kZXIiLCJBaXJjcmFmdERlbW8ub25SZXNpemUiLCJBaXJjcmFmdERlbW8ub25Nb3VzZURvd24iXSwibWFwcGluZ3MiOiJBQUNBLElBQU8sV0FBVyxXQUFlLG9DQUFvQyxDQUFDLENBQUM7QUFDdkUsSUFBTyxXQUFXLFdBQWUsa0NBQWtDLENBQUMsQ0FBQztBQUNyRSxJQUFPLFFBQVEsV0FBZ0IsK0JBQStCLENBQUMsQ0FBQztBQUNoRSxJQUFPLFlBQVksV0FBZSxzQ0FBc0MsQ0FBQyxDQUFDO0FBSTFFLElBQU8sU0FBUyxXQUFlLG1DQUFtQyxDQUFDLENBQUM7QUFFcEUsSUFBTyxVQUFVLFdBQWUsZ0NBQWdDLENBQUMsQ0FBQztBQUdsRSxJQUFPLEtBQUssV0FBNEIsNkJBQTZCLENBQUMsQ0FBQztBQUN2RSxJQUFPLHFCQUFxQixXQUFZLDZDQUE2QyxDQUFDLENBQUM7QUFFdkYsSUFBTyxzQkFBc0IsV0FBWSxzREFBc0QsQ0FBQyxDQUFDO0FBQ2pHLElBQU8sSUFBSSxXQUFpQixvQ0FBb0MsQ0FBQyxDQUFDO0FBRWxFLElBQU8sZ0JBQWdCLFdBQWMsOENBQThDLENBQUMsQ0FBQztBQUVyRixJQUFPLE1BQU0sV0FBZ0Is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QkEsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0E7UUFDL0RBLENBQUNBO1FBRURBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLE1BQU1BLENBQUNBLENBQUNBLENBQUNBO1lBQ3BCQSxJQUFJQSxDQUFDQSxnQkFBZ0JBLElBQUlBLElBQUlBLENBQUNBO1lBQzlCQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxNQUFNQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxnQkFBZ0JBLENBQUNBLEdBQUNBLEdBQUdBLENBQUNBO1lBQzFEQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxNQUFNQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxnQkFBZ0JBLENBQUNBLEdBQUNBLEdBQUdBLENBQUNBO1FBQzlEQSxDQUFDQTtRQUVEQSxFQUFFQSxDQUFDQSxDQUFFQSxJQUFJQSxDQUFDQSxRQUFTQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNsQkEsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0E7UUFDL0RBLENBQUNBO1FBRURBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLFlBQVlBLENBQUNBLENBQUNBLENBQUNBO1lBQ3BCQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQSxTQUFTQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxXQUFXQSxDQUFDQSxPQUFPQSxJQUFJQSxJQUFJQSxDQUFDQTtRQVEzREEsQ0FBQ0E7UUFFREEsSUFBSUEsQ0FBQ0EsUUFBUUEsSUFBSUEsRUFBRUEsQ0FBQ0E7UUFDcEJBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBO0lBQ3hCQSxDQUFDQTtJQUVNWiwrQkFBUUEsR0FBZkEsVUFBZ0JBLEtBQW9CQTtRQUFwQmEscUJBQW9CQSxHQUFwQkEsWUFBb0JBO1FBRWhDQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtRQUNqQkEsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7UUFDakJBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLEtBQUtBLEdBQUdBLE1BQU1BLENBQUNBLFVBQVVBLENBQUNBO1FBQ3JDQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxNQUFNQSxHQUFHQSxNQUFNQSxDQUFDQSxXQUFXQSxDQUFDQTtJQUMzQ0EsQ0FBQ0E7SUFFT2Isa0NBQVdBLEdBQW5CQSxVQUFvQkEsS0FBZ0JBO1FBRWhDYyxJQUFJQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQTtRQUVkQSxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxNQUFNQSxJQUFJQSxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQTtZQUMvQkEsSUFBSUEsQ0FBQ0EsTUFBTUEsR0FBR0EsQ0FBQ0EsQ0FBQ0E7SUFDeEJBLENBQUNBO0lBQ0xkLG1CQUFDQTtBQUFEQSxDQTNQQSxBQTJQQ0EsSUFBQTtBQUVELE1BQU0sQ0FBQyxNQUFNLEdBQUc7SUFFWixJQUFJLFlBQVksRUFBRSxDQUFDO0FBQ3ZCLENBQUMsQ0FBQSIsImZpbGUiOiJBaXJjcmFmdERlbW8uanMiLCJzb3VyY2VSb290IjoiLi8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQXNzZXRFdmVudFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvZXZlbnRzL0Fzc2V0RXZlbnRcIik7XG5pbXBvcnQgTG9hZGVyRXZlbnRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2V2ZW50cy9Mb2FkZXJFdmVudFwiKTtcbmltcG9ydCBVVlRyYW5zZm9ybVx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvZ2VvbS9VVlRyYW5zZm9ybVwiKTtcbmltcG9ydCBWZWN0b3IzRFx0XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9nZW9tL1ZlY3RvcjNEXCIpO1xuaW1wb3J0IEFzc2V0TGlicmFyeVx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvbGlicmFyeS9Bc3NldExpYnJhcnlcIik7XG5pbXBvcnQgQXNzZXRMb2FkZXJcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2xpYnJhcnkvQXNzZXRMb2FkZXJcIik7XG5pbXBvcnQgQXNzZXRMb2FkZXJDb250ZXh0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2xpYnJhcnkvQXNzZXRMb2FkZXJDb250ZXh0XCIpO1xuaW1wb3J0IEFzc2V0TG9hZGVyVG9rZW5cdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9saWJyYXJ5L0Fzc2V0TG9hZGVyVG9rZW5cIik7XG5pbXBvcnQgQXNzZXRUeXBlXHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9saWJyYXJ5L0Fzc2V0VHlwZVwiKTtcbmltcG9ydCBJQXNzZXRcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvbGlicmFyeS9JQXNzZXRcIik7XG5pbXBvcnQgVVJMUmVxdWVzdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvbmV0L1VSTFJlcXVlc3RcIik7XG5pbXBvcnQgSW1hZ2VDdWJlVGV4dHVyZVx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL3RleHR1cmVzL0ltYWdlQ3ViZVRleHR1cmVcIik7XG5pbXBvcnQgSW1hZ2VUZXh0dXJlXHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi90ZXh0dXJlcy9JbWFnZVRleHR1cmVcIik7XG5pbXBvcnQgRGVidWcgICAgICAgICAgICAgICAgXHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi91dGlscy9EZWJ1Z1wiKTtcbmltcG9ydCBSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL3V0aWxzL1JlcXVlc3RBbmltYXRpb25GcmFtZVwiKTtcblxuaW1wb3J0IERpc3BsYXlPYmplY3RDb250YWluZXJcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL2NvbnRhaW5lcnMvRGlzcGxheU9iamVjdENvbnRhaW5lclwiKTtcbmltcG9ydCBWaWV3XHRcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvY29udGFpbmVycy9WaWV3XCIpO1xuaW1wb3J0IEhvdmVyQ29udHJvbGxlclx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL2NvbnRyb2xsZXJzL0hvdmVyQ29udHJvbGxlclwiKTtcbmltcG9ydCBEaXJlY3Rpb25hbExpZ2h0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvZW50aXRpZXMvRGlyZWN0aW9uYWxMaWdodFwiKTtcbmltcG9ydCBNZXNoXHRcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvZW50aXRpZXMvTWVzaFwiKTtcbmltcG9ydCBTa3lib3hcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvZW50aXRpZXMvU2t5Ym94XCIpO1xuaW1wb3J0IFN0YXRpY0xpZ2h0UGlja2VyXHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL21hdGVyaWFscy9saWdodHBpY2tlcnMvU3RhdGljTGlnaHRQaWNrZXJcIik7XG5pbXBvcnQgUHJpbWl0aXZlUGxhbmVQcmVmYWJcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvcHJlZmFicy9QcmltaXRpdmVQbGFuZVByZWZhYlwiKTtcblxuaW1wb3J0IFNreWJveE1hdGVyaWFsICAgICAgIFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtc3RhZ2VnbC9saWIvbWF0ZXJpYWxzL1NreWJveE1hdGVyaWFsXCIpO1xuaW1wb3J0IFRyaWFuZ2xlTWV0aG9kTWF0ZXJpYWxcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL21hdGVyaWFscy9UcmlhbmdsZU1ldGhvZE1hdGVyaWFsXCIpO1xuaW1wb3J0IERlZmF1bHRSZW5kZXJlclx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL3JlbmRlci9EZWZhdWx0UmVuZGVyZXJcIik7XG5cbmltcG9ydCBFZmZlY3RFbnZNYXBNZXRob2QgICBcdFx0PSByZXF1aXJlKFwiYXdheWpzLXJlbmRlcmVyZ2wvbGliL21hdGVyaWFscy9tZXRob2RzL0VmZmVjdEVudk1hcE1ldGhvZFwiKTtcbmltcG9ydCBOb3JtYWxTaW1wbGVXYXRlck1ldGhvZFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvbWF0ZXJpYWxzL21ldGhvZHMvTm9ybWFsU2ltcGxlV2F0ZXJNZXRob2RcIik7XG5pbXBvcnQgU3BlY3VsYXJGcmVzbmVsTWV0aG9kXHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9tYXRlcmlhbHMvbWV0aG9kcy9TcGVjdWxhckZyZXNuZWxNZXRob2RcIik7XG5pbXBvcnQgQVdEUGFyc2VyXHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9wYXJzZXJzL0FXRFBhcnNlclwiKTtcbmltcG9ydCBPQkpQYXJzZXJcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXJlbmRlcmVyZ2wvbGliL3BhcnNlcnMvT0JKUGFyc2VyXCIpO1xuXG5jbGFzcyBBaXJjcmFmdERlbW9cbntcbiAgICAvL3sgc3RhdGVcbiAgICBwcml2YXRlIF9tYXhTdGF0ZXM6bnVtYmVyID0gMjtcbiAgICBwcml2YXRlIF9jYW1lcmFJbmNyZW1lbnQ6bnVtYmVyID0gMDtcbiAgICBwcml2YXRlIF9yb2xsSW5jcmVtZW50Om51bWJlciA9IDA7XG4gICAgcHJpdmF0ZSBfbG9vcEluY3JlbWVudDpudW1iZXIgPSAwO1xuICAgIHByaXZhdGUgX3N0YXRlOm51bWJlciA9IDA7XG4gICAgcHJpdmF0ZSBfYXBwVGltZTpudW1iZXIgPSAwO1xuICAgIC8vfVxuICAgIFxuICAgIHByaXZhdGUgX2xpZ2h0UGlja2VyOlN0YXRpY0xpZ2h0UGlja2VyO1xuICAgIHByaXZhdGUgX3ZpZXc6VmlldztcbiAgICBwcml2YXRlIF90aW1lcjpSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG4gICAgXG4gICAgLy97IHNlYVxuICAgIHByaXZhdGUgX3NlYUdlb206UHJpbWl0aXZlUGxhbmVQcmVmYWI7XG4gICAgcHJpdmF0ZSBfc2VhTWVzaDpNZXNoO1xuICAgIHByaXZhdGUgX3NlYU5vcm1hbFRleHR1cmU6SW1hZ2VUZXh0dXJlO1xuICAgIHByaXZhdGUgX3NlYUluaXRpYWxpemVkOmJvb2xlYW4gPSBmYWxzZTtcbiAgICBwcml2YXRlIF9zZWFNYXRlcmlhbDpUcmlhbmdsZU1ldGhvZE1hdGVyaWFsO1xuICAgIC8vfVxuICAgIFxuICAgIC8veyBmMTRcbiAgICBwcml2YXRlIF9mMTRHZW9tOkRpc3BsYXlPYmplY3RDb250YWluZXI7XG4gICAgcHJpdmF0ZSBfZjE0SW5pdGlhbGl6ZWQ6Ym9vbGVhbiA9IGZhbHNlO1xuICAgIC8vfVxuICAgIFxuICAgIC8veyBza3lib3hcbiAgICBwcml2YXRlIF93YXRlck1ldGhvZDpOb3JtYWxTaW1wbGVXYXRlck1ldGhvZDtcbiAgICBwcml2YXRlIF9za3lib3hDdWJlVGV4dHVyZTpJbWFnZUN1YmVUZXh0dXJlO1xuICAgIHByaXZhdGUgX3NreWJveEluaXRpYWxpemVkOmJvb2xlYW4gPSBmYWxzZTtcbiAgICAvL31cbiAgICBcbiAgICBjb25zdHJ1Y3RvcigpXG4gICAge1xuICAgICAgICBEZWJ1Zy5MT0dfUElfRVJST1JTID0gZmFsc2U7XG4gICAgICAgIERlYnVnLlRIUk9XX0VSUk9SUyA9IGZhbHNlO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5pbml0VmlldygpO1xuICAgICAgICB0aGlzLmluaXRMaWdodHMoKTtcbiAgICAgICAgdGhpcy5pbml0QW5pbWF0aW9uKCk7XG4gICAgICAgIHRoaXMuaW5pdFBhcnNlcnMoKTtcbiAgICAgICAgdGhpcy5sb2FkQXNzZXRzKCk7XG4gICAgICAgIFxuICAgICAgICB3aW5kb3cub25yZXNpemUgPSAoZXZlbnQ6VUlFdmVudCkgPT4gdGhpcy5vblJlc2l6ZShldmVudCk7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgbG9hZEFzc2V0cygpOnZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMubG9hZEFzc2V0KCdhc3NldHMvc2VhX25vcm1hbHMuanBnJyk7XG4gICAgICAgIHRoaXMubG9hZEFzc2V0KCdhc3NldHMvZjE0L2YxNGQub2JqJyk7XG4gICAgICAgIHRoaXMubG9hZEFzc2V0KCdhc3NldHMvc2t5Ym94L0N1YmVUZXh0dXJlVGVzdC5jdWJlJyk7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgbG9hZEFzc2V0KHBhdGg6c3RyaW5nKTp2b2lkXG4gICAge1xuICAgICAgICB2YXIgdG9rZW46QXNzZXRMb2FkZXJUb2tlbiA9IEFzc2V0TGlicmFyeS5sb2FkKG5ldyBVUkxSZXF1ZXN0KHBhdGgpKTtcbiAgICAgICAgdG9rZW4uYWRkRXZlbnRMaXN0ZW5lcihMb2FkZXJFdmVudC5SRVNPVVJDRV9DT01QTEVURSwgKGV2ZW50OkxvYWRlckV2ZW50KSA9PiB0aGlzLm9uUmVzb3VyY2VDb21wbGV0ZShldmVudCkpO1xuICAgIH1cbiAgICBcbiAgICBwcml2YXRlIGluaXRQYXJzZXJzKCk6dm9pZFxuICAgIHtcbiAgICAgICAgQXNzZXRMaWJyYXJ5LmVuYWJsZVBhcnNlcihPQkpQYXJzZXIpO1xuICAgIH1cbiAgICBcbiAgICBwcml2YXRlIGluaXRBbmltYXRpb24oKTp2b2lkXG4gICAge1xuICAgICAgICB0aGlzLl90aW1lciA9IG5ldyBSZXF1ZXN0QW5pbWF0aW9uRnJhbWUoIHRoaXMucmVuZGVyLCB0aGlzICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0VmlldygpOnZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuX3ZpZXcgPSBuZXcgVmlldyhuZXcgRGVmYXVsdFJlbmRlcmVyKCkpO1xuICAgICAgICB0aGlzLl92aWV3LmNhbWVyYS56XHQ9IC01MDA7XG4gICAgICAgIHRoaXMuX3ZpZXcuY2FtZXJhLnlcdD0gMjUwO1xuICAgICAgICB0aGlzLl92aWV3LmNhbWVyYS5yb3RhdGlvblhcdD0gMjA7XG4gICAgICAgIHRoaXMuX3ZpZXcuY2FtZXJhLnByb2plY3Rpb24ubmVhciA9IDAuNTtcbiAgICAgICAgdGhpcy5fdmlldy5jYW1lcmEucHJvamVjdGlvbi5mYXIgPSAxNDAwMDtcbiAgICAgICAgdGhpcy5fdmlldy5iYWNrZ3JvdW5kQ29sb3IgPSAweDJjMmMzMjtcblxuICAgICAgICB0aGlzLm9uUmVzaXplKCk7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgaW5pdGlhbGl6ZVNjZW5lKCk6dm9pZFxuICAgIHtcbiAgICAgICAgaWYodGhpcy5fc2t5Ym94Q3ViZVRleHR1cmUgJiYgdGhpcy5fZjE0R2VvbSAmJiB0aGlzLl9zZWFOb3JtYWxUZXh0dXJlKSB7XG4gICAgICAgICAgICB0aGlzLmluaXRGMTQoKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdFNlYSgpO1xuICAgICAgICAgICAgdGhpcy5fdGltZXIuc3RhcnQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBwcml2YXRlIGluaXRMaWdodHMoKTp2b2lkXG4gICAge1xuICAgICAgICB2YXIgbGlnaHQ6RGlyZWN0aW9uYWxMaWdodCA9IG5ldyBEaXJlY3Rpb25hbExpZ2h0KCk7XG4gICAgICAgIGxpZ2h0LmNvbG9yXHQ9IDB4OTc0NTIzO1xuICAgICAgICBsaWdodC5kaXJlY3Rpb25cdD0gbmV3IFZlY3RvcjNEKC0zMDAsIC0zMDAsIC01MDAwKTtcbiAgICAgICAgbGlnaHQuYW1iaWVudCA9IDE7XG4gICAgICAgIGxpZ2h0LmFtYmllbnRDb2xvciA9IDB4NzE5NmFjO1xuICAgICAgICBsaWdodC5kaWZmdXNlID0gMS4yO1xuICAgICAgICBsaWdodC5zcGVjdWxhciA9IDEuMTtcbiAgICAgICAgdGhpcy5fdmlldy5zY2VuZS5hZGRDaGlsZChsaWdodCk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9saWdodFBpY2tlciA9IG5ldyBTdGF0aWNMaWdodFBpY2tlcihbbGlnaHRdKTtcbiAgICB9XG4gICAgXG4gICAgcHJpdmF0ZSBpbml0RjE0KCk6dm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5fZjE0SW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICBcbiAgICAgICAgdmFyIGYxNE1hdGVyaWFsOiBUcmlhbmdsZU1ldGhvZE1hdGVyaWFsID0gbmV3IFRyaWFuZ2xlTWV0aG9kTWF0ZXJpYWwodGhpcy5fc2VhTm9ybWFsVGV4dHVyZSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UpOyAvLyB3aWxsIGJlIHRoZSBjdWJlbWFwXG4gICAgICAgIGYxNE1hdGVyaWFsLmxpZ2h0UGlja2VyID0gdGhpcy5fbGlnaHRQaWNrZXI7XG4gICAgICAgIFxuICAgICAgICB0aGlzLl92aWV3LnNjZW5lLmFkZENoaWxkKHRoaXMuX2YxNEdlb20pO1xuICAgICAgICB0aGlzLl9mMTRHZW9tLnRyYW5zZm9ybS5zY2FsZSA9IG5ldyBWZWN0b3IzRCgyMCwgMjAsIDIwKTtcbiAgICAgICAgdGhpcy5fZjE0R2VvbS5yb3RhdGlvblggPSA5MDtcbiAgICAgICAgdGhpcy5fZjE0R2VvbS55ID0gMjAwO1xuICAgICAgICB0aGlzLl92aWV3LmNhbWVyYS5sb29rQXQodGhpcy5fZjE0R2VvbS50cmFuc2Zvcm0ucG9zaXRpb24pO1xuICAgICAgICBcbiAgICAgICAgZG9jdW1lbnQub25tb3VzZWRvd24gPSAoZXZlbnQ6TW91c2VFdmVudCkgPT4gdGhpcy5vbk1vdXNlRG93bihldmVudCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0U2VhKCk6dm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5fc2VhTWF0ZXJpYWwgPSBuZXcgVHJpYW5nbGVNZXRob2RNYXRlcmlhbCh0aGlzLl9zZWFOb3JtYWxUZXh0dXJlLCB0cnVlLCB0cnVlLCBmYWxzZSk7IC8vIHdpbGwgYmUgdGhlIGN1YmVtYXBcbiAgICAgICAgdGhpcy5fd2F0ZXJNZXRob2QgPSBuZXcgTm9ybWFsU2ltcGxlV2F0ZXJNZXRob2QodGhpcy5fc2VhTm9ybWFsVGV4dHVyZSwgdGhpcy5fc2VhTm9ybWFsVGV4dHVyZSk7XG4gICAgICAgIHZhciBmcmVzbmVsTWV0aG9kOlNwZWN1bGFyRnJlc25lbE1ldGhvZCAgPSBuZXcgU3BlY3VsYXJGcmVzbmVsTWV0aG9kKCk7XG4gICAgICAgIGZyZXNuZWxNZXRob2Qubm9ybWFsUmVmbGVjdGFuY2UgPSAuMztcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX3NlYU1hdGVyaWFsLmFscGhhQmxlbmRpbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLl9zZWFNYXRlcmlhbC5saWdodFBpY2tlciA9IHRoaXMuX2xpZ2h0UGlja2VyO1xuICAgICAgICB0aGlzLl9zZWFNYXRlcmlhbC5yZXBlYXQgPSB0cnVlO1xuICAgICAgICB0aGlzLl9zZWFNYXRlcmlhbC5hbmltYXRlVVZzID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fc2VhTWF0ZXJpYWwubm9ybWFsTWV0aG9kID0gdGhpcy5fd2F0ZXJNZXRob2QgO1xuICAgICAgICB0aGlzLl9zZWFNYXRlcmlhbC5hZGRFZmZlY3RNZXRob2QobmV3IEVmZmVjdEVudk1hcE1ldGhvZCh0aGlzLl9za3lib3hDdWJlVGV4dHVyZSkpO1xuICAgICAgICB0aGlzLl9zZWFNYXRlcmlhbC5zcGVjdWxhck1ldGhvZCA9IGZyZXNuZWxNZXRob2Q7XG4gICAgICAgIHRoaXMuX3NlYU1hdGVyaWFsLmdsb3NzID0gMTAwO1xuICAgICAgICB0aGlzLl9zZWFNYXRlcmlhbC5zcGVjdWxhciA9IDE7XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9zZWFHZW9tID0gbmV3IFByaW1pdGl2ZVBsYW5lUHJlZmFiKCA1MDAwMCwgNTAwMDAsIDEsIDEsIHRydWUsIGZhbHNlICk7XG4gICAgICAgIHRoaXMuX3NlYU1lc2ggPSA8TWVzaD4gdGhpcy5fc2VhR2VvbS5nZXROZXdPYmplY3QoKTtcbiAgICAgICAgdGhpcy5fc2VhR2VvbS5nZW9tZXRyeS5zY2FsZVVWKCAxMDAsIDEwMCApO1xuICAgICAgICB0aGlzLl9zZWFNZXNoLnN1Yk1lc2hlc1swXS51dlRyYW5zZm9ybSA9IG5ldyBVVlRyYW5zZm9ybSgpO1xuICAgICAgICB0aGlzLl9zZWFNZXNoLm1hdGVyaWFsID0gdGhpcy5fc2VhTWF0ZXJpYWw7XG4gICAgICAgIHRoaXMuX3ZpZXcuc2NlbmUuYWRkQ2hpbGQoIG5ldyBTa3lib3goIG5ldyBTa3lib3hNYXRlcmlhbCh0aGlzLl9za3lib3hDdWJlVGV4dHVyZSkgKSk7XG4gICAgICAgIHRoaXMuX3ZpZXcuc2NlbmUuYWRkQ2hpbGQoIHRoaXMuX3NlYU1lc2ggKTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIG9uUmVzb3VyY2VDb21wbGV0ZShldmVudDpMb2FkZXJFdmVudClcbiAgICB7XG4gICAgICAgIHZhciBsb2FkZXI6QXNzZXRMb2FkZXIgPSA8QXNzZXRMb2FkZXI+IGV2ZW50LnRhcmdldDtcbiAgICAgICAgdmFyIG51bUFzc2V0czpudW1iZXIgPSBsb2FkZXIuYmFzZURlcGVuZGVuY3kuYXNzZXRzLmxlbmd0aDtcbiAgICAgICAgdmFyIGk6bnVtYmVyID0gMDtcbiAgICAgICAgXG4gICAgICAgIHN3aXRjaCAoZXZlbnQudXJsKSB7XG4gICAgICAgICAgICBjYXNlIFwiYXNzZXRzL3NlYV9ub3JtYWxzLmpwZ1wiOlxuICAgICAgICAgICAgICAgIHRoaXMuX3NlYU5vcm1hbFRleHR1cmUgPSA8SW1hZ2VUZXh0dXJlPiBsb2FkZXIuYmFzZURlcGVuZGVuY3kuYXNzZXRzWzBdO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnYXNzZXRzL2YxNC9mMTRkLm9iaic6XG4gICAgICAgICAgICAgICAgdGhpcy5fZjE0R2VvbSA9IG5ldyBEaXNwbGF5T2JqZWN0Q29udGFpbmVyKCk7XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IG51bUFzc2V0czsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhc3NldDpJQXNzZXQgPSBsb2FkZXIuYmFzZURlcGVuZGVuY3kuYXNzZXRzW2ldO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGFzc2V0LmFzc2V0VHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBBc3NldFR5cGUuTUVTSDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVzaDpNZXNoID0gPE1lc2g+IGFzc2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2YxNEdlb20uYWRkQ2hpbGQobWVzaCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEFzc2V0VHlwZS5HRU9NRVRSWTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQXNzZXRUeXBlLk1BVEVSSUFMOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnYXNzZXRzL3NreWJveC9DdWJlVGV4dHVyZVRlc3QuY3ViZSc6XG4gICAgICAgICAgICAgICAgdGhpcy5fc2t5Ym94Q3ViZVRleHR1cmUgPSA8SW1hZ2VDdWJlVGV4dHVyZT4gbG9hZGVyLmJhc2VEZXBlbmRlbmN5LmFzc2V0c1swXTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5pbml0aWFsaXplU2NlbmUoKTtcbiAgICB9XG4gICAgXG4gICAgcHJpdmF0ZSByZW5kZXIoZHQ6bnVtYmVyKSAvL2FuaW1hdGUgYmFzZWQgb24gZHQgZm9yIGZpcmVmb3hcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLl9mMTRHZW9tKSB7XG4gICAgICAgICAgICB0aGlzLl9yb2xsSW5jcmVtZW50ICs9IDAuMDI7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5fc3RhdGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDAgOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9mMTRHZW9tLnJvdGF0aW9uWiA9IE1hdGguc2luKHRoaXMuX3JvbGxJbmNyZW1lbnQpKjI1O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDEgOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9sb29wSW5jcmVtZW50ICs9IDAuMDU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2YxNEdlb20ueiArPSBNYXRoLmNvcyh0aGlzLl9sb29wSW5jcmVtZW50KSoyMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZjE0R2VvbS55ICs9IE1hdGguc2luKHRoaXMuX2xvb3BJbmNyZW1lbnQpKjIwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9mMTRHZW9tLnJvdGF0aW9uWCArPSAtMSooKE1hdGguUEkvMTgwKSpNYXRoLmF0YW4yKHRoaXMuX2YxNEdlb20ueiwgdGhpcy5fZjE0R2VvbS55KSk7Ly8qIDIwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9mMTRHZW9tLnJvdGF0aW9uWiA9IE1hdGguc2luKHRoaXMuX3JvbGxJbmNyZW1lbnQpKjI1O1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2xvb3BJbmNyZW1lbnQgPiAoTWF0aC5QSSoyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbG9vcEluY3JlbWVudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdGF0ZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLl9mMTRHZW9tKSB7XG4gICAgICAgICAgICB0aGlzLl92aWV3LmNhbWVyYS5sb29rQXQodGhpcy5fZjE0R2VvbS50cmFuc2Zvcm0ucG9zaXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5fdmlldy5jYW1lcmEpIHtcbiAgICAgICAgICAgIHRoaXMuX2NhbWVyYUluY3JlbWVudCArPSAwLjAxO1xuICAgICAgICAgICAgdGhpcy5fdmlldy5jYW1lcmEueCA9IE1hdGguY29zKHRoaXMuX2NhbWVyYUluY3JlbWVudCkqNDAwO1xuICAgICAgICAgICAgdGhpcy5fdmlldy5jYW1lcmEueiA9IE1hdGguc2luKHRoaXMuX2NhbWVyYUluY3JlbWVudCkqNDAwO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoIHRoaXMuX2YxNEdlb20gKSB7XG4gICAgICAgICAgICB0aGlzLl92aWV3LmNhbWVyYS5sb29rQXQodGhpcy5fZjE0R2VvbS50cmFuc2Zvcm0ucG9zaXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5fc2VhTWF0ZXJpYWwpIHtcbiAgICAgICAgICAgIHRoaXMuX3NlYU1lc2guc3ViTWVzaGVzWzBdLnV2VHJhbnNmb3JtLm9mZnNldFYgLT0gMC4wNDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICB0aGlzLndhdGVyTWV0aG9kLndhdGVyMU9mZnNldFggKz0gLjAwMTtcbiAgICAgICAgICAgICB0aGlzLndhdGVyTWV0aG9kLndhdGVyMU9mZnNldFkgKz0gLjE7XG4gICAgICAgICAgICAgdGhpcy53YXRlck1ldGhvZC53YXRlcjJPZmZzZXRYICs9IC4wMDA3O1xuICAgICAgICAgICAgIHRoaXMud2F0ZXJNZXRob2Qud2F0ZXIyT2Zmc2V0WSArPSAuNjtcbiAgICAgICAgICAgICAvLyovXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2FwcFRpbWUgKz0gZHQ7XG4gICAgICAgIHRoaXMuX3ZpZXcucmVuZGVyKCk7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBvblJlc2l6ZShldmVudDpVSUV2ZW50ID0gbnVsbClcbiAgICB7XG4gICAgICAgIHRoaXMuX3ZpZXcueSA9IDA7XG4gICAgICAgIHRoaXMuX3ZpZXcueCA9IDA7XG4gICAgICAgIHRoaXMuX3ZpZXcud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgdGhpcy5fdmlldy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgb25Nb3VzZURvd24oZXZlbnQ6TW91c2VFdmVudClcbiAgICB7XG4gICAgICAgIHRoaXMuX3N0YXRlKys7XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5fc3RhdGUgPj0gdGhpcy5fbWF4U3RhdGVzKVxuICAgICAgICAgICAgdGhpcy5fc3RhdGUgPSAwO1xuICAgIH1cbn1cblxud2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uICgpXG57XG4gICAgbmV3IEFpcmNyYWZ0RGVtbygpO1xufSJdfQ==