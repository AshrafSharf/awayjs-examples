/*

Vertex animation example in Away3d using the MD2 format

Demonstrates:

How to use the AssetLibrary class to load an embedded internal md2 model.
How to clone an asset from the AssetLibrary and apply different mateirals.
How to load animations into an animation set and apply to individual meshes.

Code by Rob Bateman
rob@infiniteturtles.co.uk
http://www.infiniteturtles.co.uk

Perelith Knight, by James Green (no email given)

This code is distributed under the MIT License

Copyright (c) The Away Foundation http://www.theawayfoundation.org

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the “Software”), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
var AssetEvent = require("awayjs-core/lib/events/AssetEvent");
var LoaderEvent = require("awayjs-core/lib/events/LoaderEvent");
var Vector3D = require("awayjs-core/lib/geom/Vector3D");
var AssetLibrary = require("awayjs-core/lib/library/AssetLibrary");
var AssetType = require("awayjs-core/lib/library/AssetType");
var URLRequest = require("awayjs-core/lib/net/URLRequest");
var Keyboard = require("awayjs-core/lib/ui/Keyboard");
var RequestAnimationFrame = require("awayjs-core/lib/utils/RequestAnimationFrame");
var View = require("awayjs-display/lib/containers/View");
var HoverController = require("awayjs-display/lib/controllers/HoverController");
var DirectionalLight = require("awayjs-display/lib/entities/DirectionalLight");
var StaticLightPicker = require("awayjs-display/lib/materials/lightpickers/StaticLightPicker");
var PrimitivePlanePrefab = require("awayjs-display/lib/prefabs/PrimitivePlanePrefab");
var VertexAnimator = require("awayjs-renderergl/lib/animators/VertexAnimator");
var TriangleMethodMaterial = require("awayjs-renderergl/lib/materials/TriangleMethodMaterial");
var ShadowFilteredMethod = require("awayjs-renderergl/lib/materials/methods/ShadowFilteredMethod");
var MD2Parser = require("awayjs-renderergl/lib/parsers/MD2Parser");
var DefaultRenderer = require("awayjs-renderergl/lib/render/DefaultRenderer");
var Intermediate_PerelithKnight = (function () {
    /**
     * Constructor
     */
    function Intermediate_PerelithKnight() {
        var _this = this;
        this._meshInitialised = false;
        this._animationSetInitialised = false;
        this._sceneInitialised = false;
        //array of materials for random sampling
        this._pKnightTextures = new Array("assets/pknight1.png", "assets/pknight2.png", "assets/pknight3.png", "assets/pknight4.png");
        this._pKnightMaterials = new Array();
        this._time = 0;
        this._move = false;
        this._lookAtPosition = new Vector3D();
        //setup the view
        this._view = new View(new DefaultRenderer());
        //setup the camera for optimal rendering
        this._view.camera.projection.far = 5000;
        //setup controller to be used on the camera
        this._cameraController = new HoverController(this._view.camera, null, 45, 20, 2000, 5);
        //setup the help text
        /*
        var text:TextField = new TextField();
        text.defaultTextFormat = new TextFormat("Verdana", 11, 0xFFFFFF);
        text.embedFonts = true;
        text.antiAliasType = AntiAliasType.ADVANCED;
        text.gridFitType = GridFitType.PIXEL;
        text.width = 240;
        text.height = 100;
        text.selectable = false;
        text.mouseEnabled = false;
        text.text = "Click and drag - rotate\n" +
            "Cursor keys / WSAD / ZSQD - move\n" +
            "Scroll wheel - zoom";

        text.filters = [new DropShadowFilter(1, 45, 0x0, 1, 0, 0)];

        addChild(text);
        */
        //setup the lights for the scene
        this._light = new DirectionalLight(-0.5, -1, -1);
        this._light.ambient = 0.4;
        this._lightPicker = new StaticLightPicker([this._light]);
        this._view.scene.addChild(this._light);
        //setup listeners on AssetLibrary
        AssetLibrary.addEventListener(AssetEvent.ASSET_COMPLETE, function (event) { return _this.onAssetComplete(event); });
        AssetLibrary.addEventListener(LoaderEvent.RESOURCE_COMPLETE, function (event) { return _this.onResourceComplete(event); });
        //load perilith knight textures
        AssetLibrary.load(new URLRequest("assets/pknight1.png"));
        AssetLibrary.load(new URLRequest("assets/pknight2.png"));
        AssetLibrary.load(new URLRequest("assets/pknight3.png"));
        AssetLibrary.load(new URLRequest("assets/pknight4.png"));
        //load floor texture
        AssetLibrary.load(new URLRequest("assets/floor_diffuse.jpg"));
        //load perelith knight data
        AssetLibrary.load(new URLRequest("assets/pknight.md2"), null, null, new MD2Parser());
        //create a global shadow map method
        this._shadowMapMethod = new ShadowFilteredMethod(this._light);
        this._shadowMapMethod.epsilon = 0.2;
        //setup floor material
        this._floorMaterial = new TriangleMethodMaterial();
        this._floorMaterial.lightPicker = this._lightPicker;
        this._floorMaterial.specular = 0;
        this._floorMaterial.ambient = 1;
        this._floorMaterial.shadowMethod = this._shadowMapMethod;
        this._floorMaterial.repeat = true;
        for (var i = 0; i < this._pKnightTextures.length; i++) {
            var knightMaterial = new TriangleMethodMaterial();
            //knightMaterial.normalMap = Cast.bitmapTexture(BitmapFilterEffects.normalMap(bitmapData));
            //knightMaterial.specularMap = Cast.bitmapTexture(BitmapFilterEffects.outline(bitmapData));
            knightMaterial.lightPicker = this._lightPicker;
            knightMaterial.gloss = 30;
            knightMaterial.specular = 1;
            knightMaterial.ambient = 1;
            knightMaterial.shadowMethod = this._shadowMapMethod;
            this._pKnightMaterials.push(knightMaterial);
        }
        //setup the floor
        this._floor = new PrimitivePlanePrefab(5000, 5000).getNewObject();
        this._floor.material = this._floorMaterial;
        this._floor.geometry.scaleUV(5, 5);
        //setup the scene
        this._view.scene.addChild(this._floor);
        //add stats panel
        //addChild(_stats = new AwayStats(_view));
        //add listeners
        window.onresize = function (event) { return _this.onResize(event); };
        document.onmousedown = function (event) { return _this.onMouseDown(event); };
        document.onmouseup = function (event) { return _this.onMouseUp(event); };
        document.onmousemove = function (event) { return _this.onMouseMove(event); };
        document.onmousewheel = function (event) { return _this.onMouseWheel(event); };
        document.onkeydown = function (event) { return _this.onKeyDown(event); };
        document.onkeyup = function (event) { return _this.onKeyUp(event); };
        this.onResize();
        this._timer = new RequestAnimationFrame(this.onEnterFrame, this);
        this._timer.start();
    }
    /**
     * Navigation and render loop
     */
    Intermediate_PerelithKnight.prototype.onEnterFrame = function (dt) {
        this._time += dt;
        if (this._keyUp)
            this._lookAtPosition.x -= 10;
        if (this._keyDown)
            this._lookAtPosition.x += 10;
        if (this._keyLeft)
            this._lookAtPosition.z -= 10;
        if (this._keyRight)
            this._lookAtPosition.z += 10;
        this._cameraController.lookAtPosition = this._lookAtPosition;
        this._view.render();
    };
    /**
     * Listener for asset complete event on loader
     */
    Intermediate_PerelithKnight.prototype.onAssetComplete = function (event) {
        var asset = event.asset;
        switch (asset.assetType) {
            case AssetType.MESH:
                this._mesh = event.asset;
                //adjust the mesh
                this._mesh.y = 120;
                this._mesh.transform.scale = new Vector3D(5, 5, 5);
                this._meshInitialised = true;
                break;
            case AssetType.ANIMATION_SET:
                this._animationSet = event.asset;
                this._animationSetInitialised = true;
                break;
        }
        if (this._animationSetInitialised && this._meshInitialised && !this._sceneInitialised) {
            this._sceneInitialised = true;
            //create 20 x 20 different clones of the knight
            var numWide = 20;
            var numDeep = 20;
            var k = 0;
            for (var i = 0; i < numWide; i++) {
                for (var j = 0; j < numDeep; j++) {
                    //clone mesh
                    var clone = this._mesh.clone();
                    clone.x = (i - (numWide - 1) / 2) * 5000 / numWide;
                    clone.z = (j - (numDeep - 1) / 2) * 5000 / numDeep;
                    clone.castsShadows = true;
                    clone.material = this._pKnightMaterials[Math.floor(Math.random() * this._pKnightMaterials.length)];
                    this._view.scene.addChild(clone);
                    //create animator
                    var vertexAnimator = new VertexAnimator(this._animationSet);
                    //play specified state
                    vertexAnimator.play(this._animationSet.animationNames[Math.floor(Math.random() * this._animationSet.animationNames.length)], null, Math.random() * 1000);
                    clone.animator = vertexAnimator;
                    k++;
                }
            }
        }
    };
    /**
     * Listener function for resource complete event on asset library
     */
    Intermediate_PerelithKnight.prototype.onResourceComplete = function (event) {
        var assets = event.assets;
        var length = assets.length;
        for (var c = 0; c < length; c++) {
            var asset = assets[c];
            console.log(asset.name, event.url);
            switch (event.url) {
                case "assets/floor_diffuse.jpg":
                    this._floorMaterial.texture = asset;
                    break;
                case "assets/pknight1.png":
                case "assets/pknight2.png":
                case "assets/pknight3.png":
                case "assets/pknight4.png":
                    this._pKnightMaterials[this._pKnightTextures.indexOf(event.url)].texture = asset;
                    break;
                case "assets/pknight.md2":
                    break;
            }
        }
    };
    /**
     * Key down listener for animation
     */
    Intermediate_PerelithKnight.prototype.onKeyDown = function (event) {
        switch (event.keyCode) {
            case Keyboard.UP:
            case Keyboard.W:
            case Keyboard.Z:
                this._keyUp = true;
                break;
            case Keyboard.DOWN:
            case Keyboard.S:
                this._keyDown = true;
                break;
            case Keyboard.LEFT:
            case Keyboard.A:
            case Keyboard.Q:
                this._keyLeft = true;
                break;
            case Keyboard.RIGHT:
            case Keyboard.D:
                this._keyRight = true;
                break;
        }
    };
    /**
     * Key up listener
     */
    Intermediate_PerelithKnight.prototype.onKeyUp = function (event) {
        switch (event.keyCode) {
            case Keyboard.UP:
            case Keyboard.W:
            case Keyboard.Z:
                this._keyUp = false;
                break;
            case Keyboard.DOWN:
            case Keyboard.S:
                this._keyDown = false;
                break;
            case Keyboard.LEFT:
            case Keyboard.A:
            case Keyboard.Q:
                this._keyLeft = false;
                break;
            case Keyboard.RIGHT:
            case Keyboard.D:
                this._keyRight = false;
                break;
        }
    };
    /**
     * Mouse down listener for navigation
     */
    Intermediate_PerelithKnight.prototype.onMouseDown = function (event) {
        this._lastPanAngle = this._cameraController.panAngle;
        this._lastTiltAngle = this._cameraController.tiltAngle;
        this._lastMouseX = event.clientX;
        this._lastMouseY = event.clientY;
        this._move = true;
    };
    /**
     * Mouse up listener for navigation
     */
    Intermediate_PerelithKnight.prototype.onMouseUp = function (event) {
        this._move = false;
    };
    Intermediate_PerelithKnight.prototype.onMouseMove = function (event) {
        if (this._move) {
            this._cameraController.panAngle = 0.3 * (event.clientX - this._lastMouseX) + this._lastPanAngle;
            this._cameraController.tiltAngle = 0.3 * (event.clientY - this._lastMouseY) + this._lastTiltAngle;
        }
    };
    /**
     * Mouse wheel listener for navigation
     */
    Intermediate_PerelithKnight.prototype.onMouseWheel = function (event) {
        this._cameraController.distance -= event.wheelDelta;
        if (this._cameraController.distance < 100)
            this._cameraController.distance = 100;
        else if (this._cameraController.distance > 2000)
            this._cameraController.distance = 2000;
    };
    /**
     * Stage listener for resize events
     */
    Intermediate_PerelithKnight.prototype.onResize = function (event) {
        if (event === void 0) { event = null; }
        this._view.y = 0;
        this._view.x = 0;
        this._view.width = window.innerWidth;
        this._view.height = window.innerHeight;
    };
    return Intermediate_PerelithKnight;
})();
window.onload = function () {
    new Intermediate_PerelithKnight();
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9JbnRlcm1lZGlhdGVfUGVyZWxpdGhLbmlnaHQudHMiXSwibmFtZXMiOlsiSW50ZXJtZWRpYXRlX1BlcmVsaXRoS25pZ2h0IiwiSW50ZXJtZWRpYXRlX1BlcmVsaXRoS25pZ2h0LmNvbnN0cnVjdG9yIiwiSW50ZXJtZWRpYXRlX1BlcmVsaXRoS25pZ2h0Lm9uRW50ZXJGcmFtZSIsIkludGVybWVkaWF0ZV9QZXJlbGl0aEtuaWdodC5vbkFzc2V0Q29tcGxldGUiLCJJbnRlcm1lZGlhdGVfUGVyZWxpdGhLbmlnaHQub25SZXNvdXJjZUNvbXBsZXRlIiwiSW50ZXJtZWRpYXRlX1BlcmVsaXRoS25pZ2h0Lm9uS2V5RG93biIsIkludGVybWVkaWF0ZV9QZXJlbGl0aEtuaWdodC5vbktleVVwIiwiSW50ZXJtZWRpYXRlX1BlcmVsaXRoS25pZ2h0Lm9uTW91c2VEb3duIiwiSW50ZXJtZWRpYXRlX1BlcmVsaXRoS25pZ2h0Lm9uTW91c2VVcCIsIkludGVybWVkaWF0ZV9QZXJlbGl0aEtuaWdodC5vbk1vdXNlTW92ZSIsIkludGVybWVkaWF0ZV9QZXJlbGl0aEtuaWdodC5vbk1vdXNlV2hlZWwiLCJJbnRlcm1lZGlhdGVfUGVyZWxpdGhLbmlnaHQub25SZXNpemUiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztFQXNDRTtBQUVGLElBQU8sVUFBVSxXQUFlLG1DQUFtQyxDQUFDLENBQUM7QUFDckUsSUFBTyxXQUFXLFdBQWUsb0NBQW9DLENBQUMsQ0FBQztBQUN2RSxJQUFPLFFBQVEsV0FBZ0IsK0JBQStCLENBQUMsQ0FBQztBQUNoRSxJQUFPLFlBQVksV0FBZSxzQ0FBc0MsQ0FBQyxDQUFDO0FBQzFFLElBQU8sU0FBUyxXQUFrQixtQ0FBbUMsQ0FBQyxDQUFDO0FBRXZFLElBQU8sVUFBVSxXQUFlLGdDQUFnQyxDQUFDLENBQUM7QUFDbEUsSUFBTyxRQUFRLFdBQWdCLDZCQUE2QixDQUFDLENBQUM7QUFFOUQs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O1FBQ2pCQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxLQUFLQSxHQUFHQSxNQUFNQSxDQUFDQSxVQUFVQSxDQUFDQTtRQUNyQ0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsTUFBTUEsR0FBR0EsTUFBTUEsQ0FBQ0EsV0FBV0EsQ0FBQ0E7SUFDM0NBLENBQUNBO0lBQ0xYLGtDQUFDQTtBQUFEQSxDQW5YQSxBQW1YQ0EsSUFBQTtBQUVELE1BQU0sQ0FBQyxNQUFNLEdBQUc7SUFFWixJQUFJLDJCQUEyQixFQUFFLENBQUM7QUFDdEMsQ0FBQyxDQUFBIiwiZmlsZSI6IkludGVybWVkaWF0ZV9QZXJlbGl0aEtuaWdodC5qcyIsInNvdXJjZVJvb3QiOiIuLyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG5cblZlcnRleCBhbmltYXRpb24gZXhhbXBsZSBpbiBBd2F5M2QgdXNpbmcgdGhlIE1EMiBmb3JtYXRcblxuRGVtb25zdHJhdGVzOlxuXG5Ib3cgdG8gdXNlIHRoZSBBc3NldExpYnJhcnkgY2xhc3MgdG8gbG9hZCBhbiBlbWJlZGRlZCBpbnRlcm5hbCBtZDIgbW9kZWwuXG5Ib3cgdG8gY2xvbmUgYW4gYXNzZXQgZnJvbSB0aGUgQXNzZXRMaWJyYXJ5IGFuZCBhcHBseSBkaWZmZXJlbnQgbWF0ZWlyYWxzLlxuSG93IHRvIGxvYWQgYW5pbWF0aW9ucyBpbnRvIGFuIGFuaW1hdGlvbiBzZXQgYW5kIGFwcGx5IHRvIGluZGl2aWR1YWwgbWVzaGVzLlxuXG5Db2RlIGJ5IFJvYiBCYXRlbWFuXG5yb2JAaW5maW5pdGV0dXJ0bGVzLmNvLnVrXG5odHRwOi8vd3d3LmluZmluaXRldHVydGxlcy5jby51a1xuXG5QZXJlbGl0aCBLbmlnaHQsIGJ5IEphbWVzIEdyZWVuIChubyBlbWFpbCBnaXZlbilcblxuVGhpcyBjb2RlIGlzIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgTGljZW5zZVxuXG5Db3B5cmlnaHQgKGMpIFRoZSBBd2F5IEZvdW5kYXRpb24gaHR0cDovL3d3dy50aGVhd2F5Zm91bmRhdGlvbi5vcmdcblxuUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxub2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUg4oCcU29mdHdhcmXigJ0pLCB0byBkZWFsXG5pbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG50byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG5jb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbmZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cblRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG5hbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIOKAnEFTIElT4oCdLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG5JTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbkZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbk9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cblRIRSBTT0ZUV0FSRS5cblxuKi9cblxuaW1wb3J0IEFzc2V0RXZlbnRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2V2ZW50cy9Bc3NldEV2ZW50XCIpO1xuaW1wb3J0IExvYWRlckV2ZW50XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9ldmVudHMvTG9hZGVyRXZlbnRcIik7XG5pbXBvcnQgVmVjdG9yM0RcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvZ2VvbS9WZWN0b3IzRFwiKTtcbmltcG9ydCBBc3NldExpYnJhcnlcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2xpYnJhcnkvQXNzZXRMaWJyYXJ5XCIpO1xuaW1wb3J0IEFzc2V0VHlwZSAgIFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvbGlicmFyeS9Bc3NldFR5cGVcIik7XG5pbXBvcnQgSUFzc2V0ICAgXHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9saWJyYXJ5L0lBc3NldFwiKTtcbmltcG9ydCBVUkxSZXF1ZXN0XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9uZXQvVVJMUmVxdWVzdFwiKTtcbmltcG9ydCBLZXlib2FyZCBcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL3VpL0tleWJvYXJkXCIpO1xuaW1wb3J0IFRleHR1cmUyREJhc2VcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi90ZXh0dXJlcy9UZXh0dXJlMkRCYXNlXCIpO1xuaW1wb3J0IFJlcXVlc3RBbmltYXRpb25GcmFtZVx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvdXRpbHMvUmVxdWVzdEFuaW1hdGlvbkZyYW1lXCIpO1xuXG5pbXBvcnQgVmlld1x0XHRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL2NvbnRhaW5lcnMvVmlld1wiKTtcbmltcG9ydCBIb3ZlckNvbnRyb2xsZXJcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi9jb250cm9sbGVycy9Ib3ZlckNvbnRyb2xsZXJcIik7XG5pbXBvcnQgQ2FtZXJhXHRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL2VudGl0aWVzL0NhbWVyYVwiKTtcbmltcG9ydCBEaXJlY3Rpb25hbExpZ2h0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvZW50aXRpZXMvRGlyZWN0aW9uYWxMaWdodFwiKTtcbmltcG9ydCBNZXNoXHRcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvZW50aXRpZXMvTWVzaFwiKTtcbmltcG9ydCBTdGF0aWNMaWdodFBpY2tlclx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi9tYXRlcmlhbHMvbGlnaHRwaWNrZXJzL1N0YXRpY0xpZ2h0UGlja2VyXCIpO1xuaW1wb3J0IFByaW1pdGl2ZVBsYW5lUHJlZmFiXHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL3ByZWZhYnMvUHJpbWl0aXZlUGxhbmVQcmVmYWJcIik7XG5cbmltcG9ydCBWZXJ0ZXhBbmltYXRpb25TZXRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvYW5pbWF0b3JzL1ZlcnRleEFuaW1hdGlvblNldFwiKTtcbmltcG9ydCBWZXJ0ZXhBbmltYXRvclx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXJlbmRlcmVyZ2wvbGliL2FuaW1hdG9ycy9WZXJ0ZXhBbmltYXRvclwiKTtcbmltcG9ydCBUcmlhbmdsZU1ldGhvZE1hdGVyaWFsXHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9tYXRlcmlhbHMvVHJpYW5nbGVNZXRob2RNYXRlcmlhbFwiKTtcbmltcG9ydCBTaGFkb3dGaWx0ZXJlZE1ldGhvZFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9tYXRlcmlhbHMvbWV0aG9kcy9TaGFkb3dGaWx0ZXJlZE1ldGhvZFwiKTtcbmltcG9ydCBNRDJQYXJzZXJcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXJlbmRlcmVyZ2wvbGliL3BhcnNlcnMvTUQyUGFyc2VyXCIpO1xuaW1wb3J0IERlZmF1bHRSZW5kZXJlclx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXJlbmRlcmVyZ2wvbGliL3JlbmRlci9EZWZhdWx0UmVuZGVyZXJcIik7XG5cbmNsYXNzIEludGVybWVkaWF0ZV9QZXJlbGl0aEtuaWdodFxue1xuXG4gICAgcHJpdmF0ZSBfbWVzaEluaXRpYWxpc2VkICAgICAgICAgICAgOiBib29sZWFuID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBfYW5pbWF0aW9uU2V0SW5pdGlhbGlzZWQgICAgOiBib29sZWFuID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBfc2NlbmVJbml0aWFsaXNlZCAgICAgICAgICAgOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICAvL2FycmF5IG9mIG1hdGVyaWFscyBmb3IgcmFuZG9tIHNhbXBsaW5nXG4gICAgcHJpdmF0ZSBfcEtuaWdodFRleHR1cmVzOkFycmF5PHN0cmluZz4gPSBuZXcgQXJyYXk8c3RyaW5nPihcImFzc2V0cy9wa25pZ2h0MS5wbmdcIiwgXCJhc3NldHMvcGtuaWdodDIucG5nXCIsIFwiYXNzZXRzL3BrbmlnaHQzLnBuZ1wiLCBcImFzc2V0cy9wa25pZ2h0NC5wbmdcIik7XG4gICAgcHJpdmF0ZSBfcEtuaWdodE1hdGVyaWFsczpBcnJheTxUcmlhbmdsZU1ldGhvZE1hdGVyaWFsPiA9IG5ldyBBcnJheTxUcmlhbmdsZU1ldGhvZE1hdGVyaWFsPigpO1xuXG4gICAgLy9lbmdpbmUgdmFyaWFibGVzXG4gICAgcHJpdmF0ZSBfdmlldzpWaWV3O1xuICAgIHByaXZhdGUgX2NhbWVyYUNvbnRyb2xsZXI6SG92ZXJDb250cm9sbGVyO1xuXG4gICAgLy9zdGF0c1xuICAgIC8vcHJpdmF0ZSBfc3RhdHM6QXdheVN0YXRzO1xuXG4gICAgLy9saWdodCBvYmplY3RzXG4gICAgcHJpdmF0ZSBfbGlnaHQ6RGlyZWN0aW9uYWxMaWdodDtcbiAgICBwcml2YXRlIF9saWdodFBpY2tlcjpTdGF0aWNMaWdodFBpY2tlcjtcblxuICAgIC8vbWF0ZXJpYWwgb2JqZWN0c1xuICAgIHByaXZhdGUgX2Zsb29yTWF0ZXJpYWw6VHJpYW5nbGVNZXRob2RNYXRlcmlhbDtcbiAgICBwcml2YXRlIF9zaGFkb3dNYXBNZXRob2Q6U2hhZG93RmlsdGVyZWRNZXRob2Q7XG5cbiAgICAvL3NjZW5lIG9iamVjdHNcbiAgICBwcml2YXRlIF9mbG9vcjpNZXNoO1xuICAgIHByaXZhdGUgX21lc2g6TWVzaDtcblxuICAgIC8vbmF2aWdhdGlvbiB2YXJpYWJsZXNcbiAgICBwcml2YXRlIF90aW1lcjpSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG4gICAgcHJpdmF0ZSBfdGltZTpudW1iZXIgPSAwO1xuICAgIHByaXZhdGUgX21vdmU6Ym9vbGVhbiA9IGZhbHNlO1xuICAgIHByaXZhdGUgX2xhc3RQYW5BbmdsZTpudW1iZXI7XG4gICAgcHJpdmF0ZSBfbGFzdFRpbHRBbmdsZTpudW1iZXI7XG4gICAgcHJpdmF0ZSBfbGFzdE1vdXNlWDpudW1iZXI7XG4gICAgcHJpdmF0ZSBfbGFzdE1vdXNlWTpudW1iZXI7XG4gICAgcHJpdmF0ZSBfa2V5VXA6Ym9vbGVhbjtcbiAgICBwcml2YXRlIF9rZXlEb3duOmJvb2xlYW47XG4gICAgcHJpdmF0ZSBfa2V5TGVmdDpib29sZWFuO1xuICAgIHByaXZhdGUgX2tleVJpZ2h0OmJvb2xlYW47XG4gICAgcHJpdmF0ZSBfbG9va0F0UG9zaXRpb246VmVjdG9yM0QgPSBuZXcgVmVjdG9yM0QoKTtcbiAgICBwcml2YXRlIF9hbmltYXRpb25TZXQ6VmVydGV4QW5pbWF0aW9uU2V0O1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpXG4gICAge1xuICAgICAgICAvL3NldHVwIHRoZSB2aWV3XG4gICAgICAgIHRoaXMuX3ZpZXcgPSBuZXcgVmlldyhuZXcgRGVmYXVsdFJlbmRlcmVyKCkpO1xuXG4gICAgICAgIC8vc2V0dXAgdGhlIGNhbWVyYSBmb3Igb3B0aW1hbCByZW5kZXJpbmdcbiAgICAgICAgdGhpcy5fdmlldy5jYW1lcmEucHJvamVjdGlvbi5mYXIgPSA1MDAwO1xuXG4gICAgICAgIC8vc2V0dXAgY29udHJvbGxlciB0byBiZSB1c2VkIG9uIHRoZSBjYW1lcmFcbiAgICAgICAgdGhpcy5fY2FtZXJhQ29udHJvbGxlciA9IG5ldyBIb3ZlckNvbnRyb2xsZXIodGhpcy5fdmlldy5jYW1lcmEsIG51bGwsIDQ1LCAyMCwgMjAwMCwgNSk7XG5cbiAgICAgICAgLy9zZXR1cCB0aGUgaGVscCB0ZXh0XG4gICAgICAgIC8qXG4gICAgICAgIHZhciB0ZXh0OlRleHRGaWVsZCA9IG5ldyBUZXh0RmllbGQoKTtcbiAgICAgICAgdGV4dC5kZWZhdWx0VGV4dEZvcm1hdCA9IG5ldyBUZXh0Rm9ybWF0KFwiVmVyZGFuYVwiLCAxMSwgMHhGRkZGRkYpO1xuICAgICAgICB0ZXh0LmVtYmVkRm9udHMgPSB0cnVlO1xuICAgICAgICB0ZXh0LmFudGlBbGlhc1R5cGUgPSBBbnRpQWxpYXNUeXBlLkFEVkFOQ0VEO1xuICAgICAgICB0ZXh0LmdyaWRGaXRUeXBlID0gR3JpZEZpdFR5cGUuUElYRUw7XG4gICAgICAgIHRleHQud2lkdGggPSAyNDA7XG4gICAgICAgIHRleHQuaGVpZ2h0ID0gMTAwO1xuICAgICAgICB0ZXh0LnNlbGVjdGFibGUgPSBmYWxzZTtcbiAgICAgICAgdGV4dC5tb3VzZUVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgdGV4dC50ZXh0ID0gXCJDbGljayBhbmQgZHJhZyAtIHJvdGF0ZVxcblwiICtcbiAgICAgICAgICAgIFwiQ3Vyc29yIGtleXMgLyBXU0FEIC8gWlNRRCAtIG1vdmVcXG5cIiArXG4gICAgICAgICAgICBcIlNjcm9sbCB3aGVlbCAtIHpvb21cIjtcblxuICAgICAgICB0ZXh0LmZpbHRlcnMgPSBbbmV3IERyb3BTaGFkb3dGaWx0ZXIoMSwgNDUsIDB4MCwgMSwgMCwgMCldO1xuXG4gICAgICAgIGFkZENoaWxkKHRleHQpO1xuICAgICAgICAqL1xuXG4gICAgICAgIC8vc2V0dXAgdGhlIGxpZ2h0cyBmb3IgdGhlIHNjZW5lXG4gICAgICAgIHRoaXMuX2xpZ2h0ID0gbmV3IERpcmVjdGlvbmFsTGlnaHQoLTAuNSwgLTEsIC0xKTtcbiAgICAgICAgdGhpcy5fbGlnaHQuYW1iaWVudCA9IDAuNDtcbiAgICAgICAgdGhpcy5fbGlnaHRQaWNrZXIgPSBuZXcgU3RhdGljTGlnaHRQaWNrZXIoW3RoaXMuX2xpZ2h0XSk7XG4gICAgICAgIHRoaXMuX3ZpZXcuc2NlbmUuYWRkQ2hpbGQodGhpcy5fbGlnaHQpO1xuXG4gICAgICAgIC8vc2V0dXAgbGlzdGVuZXJzIG9uIEFzc2V0TGlicmFyeVxuICAgICAgICBBc3NldExpYnJhcnkuYWRkRXZlbnRMaXN0ZW5lcihBc3NldEV2ZW50LkFTU0VUX0NPTVBMRVRFLCAoZXZlbnQ6QXNzZXRFdmVudCkgPT4gdGhpcy5vbkFzc2V0Q29tcGxldGUoZXZlbnQpKTtcbiAgICAgICAgQXNzZXRMaWJyYXJ5LmFkZEV2ZW50TGlzdGVuZXIoTG9hZGVyRXZlbnQuUkVTT1VSQ0VfQ09NUExFVEUsIChldmVudDpMb2FkZXJFdmVudCkgPT4gdGhpcy5vblJlc291cmNlQ29tcGxldGUoZXZlbnQpKTtcblxuICAgICAgICAvL2xvYWQgcGVyaWxpdGgga25pZ2h0IHRleHR1cmVzXG4gICAgICAgIEFzc2V0TGlicmFyeS5sb2FkKG5ldyBVUkxSZXF1ZXN0KFwiYXNzZXRzL3BrbmlnaHQxLnBuZ1wiKSk7XG4gICAgICAgIEFzc2V0TGlicmFyeS5sb2FkKG5ldyBVUkxSZXF1ZXN0KFwiYXNzZXRzL3BrbmlnaHQyLnBuZ1wiKSk7XG4gICAgICAgIEFzc2V0TGlicmFyeS5sb2FkKG5ldyBVUkxSZXF1ZXN0KFwiYXNzZXRzL3BrbmlnaHQzLnBuZ1wiKSk7XG4gICAgICAgIEFzc2V0TGlicmFyeS5sb2FkKG5ldyBVUkxSZXF1ZXN0KFwiYXNzZXRzL3BrbmlnaHQ0LnBuZ1wiKSk7XG5cbiAgICAgICAgLy9sb2FkIGZsb29yIHRleHR1cmVcbiAgICAgICAgQXNzZXRMaWJyYXJ5LmxvYWQobmV3IFVSTFJlcXVlc3QoXCJhc3NldHMvZmxvb3JfZGlmZnVzZS5qcGdcIikpO1xuXG4gICAgICAgIC8vbG9hZCBwZXJlbGl0aCBrbmlnaHQgZGF0YVxuICAgICAgICBBc3NldExpYnJhcnkubG9hZChuZXcgVVJMUmVxdWVzdChcImFzc2V0cy9wa25pZ2h0Lm1kMlwiKSwgbnVsbCwgbnVsbCwgbmV3IE1EMlBhcnNlcigpKTtcblxuICAgICAgICAvL2NyZWF0ZSBhIGdsb2JhbCBzaGFkb3cgbWFwIG1ldGhvZFxuICAgICAgICB0aGlzLl9zaGFkb3dNYXBNZXRob2QgPSBuZXcgU2hhZG93RmlsdGVyZWRNZXRob2QodGhpcy5fbGlnaHQpO1xuICAgICAgICB0aGlzLl9zaGFkb3dNYXBNZXRob2QuZXBzaWxvbiA9IDAuMjtcblxuICAgICAgICAvL3NldHVwIGZsb29yIG1hdGVyaWFsXG4gICAgICAgIHRoaXMuX2Zsb29yTWF0ZXJpYWwgPSBuZXcgVHJpYW5nbGVNZXRob2RNYXRlcmlhbCgpO1xuICAgICAgICB0aGlzLl9mbG9vck1hdGVyaWFsLmxpZ2h0UGlja2VyID0gdGhpcy5fbGlnaHRQaWNrZXI7XG4gICAgICAgIHRoaXMuX2Zsb29yTWF0ZXJpYWwuc3BlY3VsYXIgPSAwO1xuICAgICAgICB0aGlzLl9mbG9vck1hdGVyaWFsLmFtYmllbnQgPSAxO1xuICAgICAgICB0aGlzLl9mbG9vck1hdGVyaWFsLnNoYWRvd01ldGhvZCA9IHRoaXMuX3NoYWRvd01hcE1ldGhvZDtcbiAgICAgICAgdGhpcy5fZmxvb3JNYXRlcmlhbC5yZXBlYXQgPSB0cnVlO1xuXG4gICAgICAgIC8vc2V0dXAga25pZ2h0IG1hdGVyaWFsc1xuICAgICAgICBmb3IgKHZhciBpOm51bWJlciAvKnVpbnQqLyAgPSAwOyBpIDwgdGhpcy5fcEtuaWdodFRleHR1cmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIga25pZ2h0TWF0ZXJpYWw6VHJpYW5nbGVNZXRob2RNYXRlcmlhbCA9IG5ldyBUcmlhbmdsZU1ldGhvZE1hdGVyaWFsKCk7XG4gICAgICAgICAgICAvL2tuaWdodE1hdGVyaWFsLm5vcm1hbE1hcCA9IENhc3QuYml0bWFwVGV4dHVyZShCaXRtYXBGaWx0ZXJFZmZlY3RzLm5vcm1hbE1hcChiaXRtYXBEYXRhKSk7XG4gICAgICAgICAgICAvL2tuaWdodE1hdGVyaWFsLnNwZWN1bGFyTWFwID0gQ2FzdC5iaXRtYXBUZXh0dXJlKEJpdG1hcEZpbHRlckVmZmVjdHMub3V0bGluZShiaXRtYXBEYXRhKSk7XG4gICAgICAgICAgICBrbmlnaHRNYXRlcmlhbC5saWdodFBpY2tlciA9IHRoaXMuX2xpZ2h0UGlja2VyO1xuICAgICAgICAgICAga25pZ2h0TWF0ZXJpYWwuZ2xvc3MgPSAzMDtcbiAgICAgICAgICAgIGtuaWdodE1hdGVyaWFsLnNwZWN1bGFyID0gMTtcbiAgICAgICAgICAgIGtuaWdodE1hdGVyaWFsLmFtYmllbnQgPSAxO1xuICAgICAgICAgICAga25pZ2h0TWF0ZXJpYWwuc2hhZG93TWV0aG9kID0gdGhpcy5fc2hhZG93TWFwTWV0aG9kO1xuICAgICAgICAgICAgdGhpcy5fcEtuaWdodE1hdGVyaWFscy5wdXNoKGtuaWdodE1hdGVyaWFsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vc2V0dXAgdGhlIGZsb29yXG4gICAgICAgIHRoaXMuX2Zsb29yID0gPE1lc2g+IG5ldyBQcmltaXRpdmVQbGFuZVByZWZhYig1MDAwLCA1MDAwKS5nZXROZXdPYmplY3QoKTtcbiAgICAgICAgdGhpcy5fZmxvb3IubWF0ZXJpYWwgPSB0aGlzLl9mbG9vck1hdGVyaWFsO1xuICAgICAgICB0aGlzLl9mbG9vci5nZW9tZXRyeS5zY2FsZVVWKDUsIDUpO1xuXG4gICAgICAgIC8vc2V0dXAgdGhlIHNjZW5lXG4gICAgICAgIHRoaXMuX3ZpZXcuc2NlbmUuYWRkQ2hpbGQodGhpcy5fZmxvb3IpO1xuXG4gICAgICAgIC8vYWRkIHN0YXRzIHBhbmVsXG4gICAgICAgIC8vYWRkQ2hpbGQoX3N0YXRzID0gbmV3IEF3YXlTdGF0cyhfdmlldykpO1xuXG4gICAgICAgIC8vYWRkIGxpc3RlbmVyc1xuICAgICAgICB3aW5kb3cub25yZXNpemUgID0gKGV2ZW50OlVJRXZlbnQpID0+IHRoaXMub25SZXNpemUoZXZlbnQpO1xuXG4gICAgICAgIGRvY3VtZW50Lm9ubW91c2Vkb3duID0gKGV2ZW50Ok1vdXNlRXZlbnQpID0+IHRoaXMub25Nb3VzZURvd24oZXZlbnQpO1xuICAgICAgICBkb2N1bWVudC5vbm1vdXNldXAgPSAoZXZlbnQ6TW91c2VFdmVudCkgPT4gdGhpcy5vbk1vdXNlVXAoZXZlbnQpO1xuICAgICAgICBkb2N1bWVudC5vbm1vdXNlbW92ZSA9IChldmVudDpNb3VzZUV2ZW50KSA9PiB0aGlzLm9uTW91c2VNb3ZlKGV2ZW50KTtcbiAgICAgICAgZG9jdW1lbnQub25tb3VzZXdoZWVsID0gKGV2ZW50Ok1vdXNlV2hlZWxFdmVudCkgPT4gdGhpcy5vbk1vdXNlV2hlZWwoZXZlbnQpO1xuICAgICAgICBkb2N1bWVudC5vbmtleWRvd24gPSAoZXZlbnQ6S2V5Ym9hcmRFdmVudCkgPT4gdGhpcy5vbktleURvd24oZXZlbnQpO1xuICAgICAgICBkb2N1bWVudC5vbmtleXVwID0gKGV2ZW50OktleWJvYXJkRXZlbnQpID0+IHRoaXMub25LZXlVcChldmVudCk7XG4gICAgICAgIHRoaXMub25SZXNpemUoKTtcblxuICAgICAgICB0aGlzLl90aW1lciA9IG5ldyBSZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5vbkVudGVyRnJhbWUsIHRoaXMpO1xuICAgICAgICB0aGlzLl90aW1lci5zdGFydCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE5hdmlnYXRpb24gYW5kIHJlbmRlciBsb29wXG4gICAgICovXG4gICAgcHJpdmF0ZSBvbkVudGVyRnJhbWUoZHQ6bnVtYmVyKTp2b2lkXG4gICAge1xuICAgICAgICB0aGlzLl90aW1lICs9IGR0O1xuXG4gICAgICAgIGlmICh0aGlzLl9rZXlVcClcbiAgICAgICAgICAgIHRoaXMuX2xvb2tBdFBvc2l0aW9uLnggLT0gMTA7XG4gICAgICAgIGlmICh0aGlzLl9rZXlEb3duKVxuICAgICAgICAgICAgdGhpcy5fbG9va0F0UG9zaXRpb24ueCArPSAxMDtcbiAgICAgICAgaWYgKHRoaXMuX2tleUxlZnQpXG4gICAgICAgICAgICB0aGlzLl9sb29rQXRQb3NpdGlvbi56IC09IDEwO1xuICAgICAgICBpZiAodGhpcy5fa2V5UmlnaHQpXG4gICAgICAgICAgICB0aGlzLl9sb29rQXRQb3NpdGlvbi56ICs9IDEwO1xuXG4gICAgICAgIHRoaXMuX2NhbWVyYUNvbnRyb2xsZXIubG9va0F0UG9zaXRpb24gPSB0aGlzLl9sb29rQXRQb3NpdGlvbjtcblxuICAgICAgICB0aGlzLl92aWV3LnJlbmRlcigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExpc3RlbmVyIGZvciBhc3NldCBjb21wbGV0ZSBldmVudCBvbiBsb2FkZXJcbiAgICAgKi9cbiAgICBwcml2YXRlIG9uQXNzZXRDb21wbGV0ZShldmVudDpBc3NldEV2ZW50KTp2b2lkXG4gICAge1xuICAgICAgICB2YXIgYXNzZXQ6SUFzc2V0ID0gZXZlbnQuYXNzZXQ7XG5cbiAgICAgICAgc3dpdGNoIChhc3NldC5hc3NldFR5cGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNhc2UgQXNzZXRUeXBlLk1FU0ggOlxuICAgICAgICAgICAgICAgIHRoaXMuX21lc2ggPSA8TWVzaD4gZXZlbnQuYXNzZXQ7XG5cbiAgICAgICAgICAgICAgICAvL2FkanVzdCB0aGUgbWVzaFxuICAgICAgICAgICAgICAgIHRoaXMuX21lc2gueSA9IDEyMDtcbiAgICAgICAgICAgICAgICB0aGlzLl9tZXNoLnRyYW5zZm9ybS5zY2FsZSA9IG5ldyBWZWN0b3IzRCg1LCA1LCA1KTtcblxuICAgICAgICAgICAgICAgIHRoaXMuX21lc2hJbml0aWFsaXNlZCA9IHRydWU7XG5cblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBBc3NldFR5cGUuQU5JTUFUSU9OX1NFVCA6XG4gICAgICAgICAgICAgICAgdGhpcy5fYW5pbWF0aW9uU2V0ID0gPFZlcnRleEFuaW1hdGlvblNldD4gZXZlbnQuYXNzZXQ7XG4gICAgICAgICAgICAgICAgdGhpcy5fYW5pbWF0aW9uU2V0SW5pdGlhbGlzZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCB0aGlzLl9hbmltYXRpb25TZXRJbml0aWFsaXNlZCAmJiB0aGlzLl9tZXNoSW5pdGlhbGlzZWQgJiYgISB0aGlzLl9zY2VuZUluaXRpYWxpc2VkKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9zY2VuZUluaXRpYWxpc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIC8vY3JlYXRlIDIwIHggMjAgZGlmZmVyZW50IGNsb25lcyBvZiB0aGUga25pZ2h0XG4gICAgICAgICAgICB2YXIgbnVtV2lkZTpudW1iZXIgPSAyMDtcbiAgICAgICAgICAgIHZhciBudW1EZWVwOm51bWJlciA9IDIwO1xuICAgICAgICAgICAgdmFyIGs6bnVtYmVyIC8qdWludCovID0gMDtcbiAgICAgICAgICAgIGZvciAodmFyIGk6bnVtYmVyIC8qdWludCovICA9IDA7IGkgPCBudW1XaWRlOyBpKyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqOm51bWJlciAvKnVpbnQqLyAgPSAwOyBqIDwgbnVtRGVlcDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vY2xvbmUgbWVzaFxuICAgICAgICAgICAgICAgICAgICB2YXIgY2xvbmU6TWVzaCA9IDxNZXNoPiB0aGlzLl9tZXNoLmNsb25lKCk7XG4gICAgICAgICAgICAgICAgICAgIGNsb25lLnggPSAoaS0obnVtV2lkZS0xKS8yKSo1MDAwL251bVdpZGU7XG4gICAgICAgICAgICAgICAgICAgIGNsb25lLnogPSAoai0obnVtRGVlcC0xKS8yKSo1MDAwL251bURlZXA7XG4gICAgICAgICAgICAgICAgICAgIGNsb25lLmNhc3RzU2hhZG93cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGNsb25lLm1hdGVyaWFsID0gdGhpcy5fcEtuaWdodE1hdGVyaWFsc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqdGhpcy5fcEtuaWdodE1hdGVyaWFscy5sZW5ndGgpXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdmlldy5zY2VuZS5hZGRDaGlsZChjbG9uZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9jcmVhdGUgYW5pbWF0b3JcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZlcnRleEFuaW1hdG9yOlZlcnRleEFuaW1hdG9yID0gbmV3IFZlcnRleEFuaW1hdG9yKHRoaXMuX2FuaW1hdGlvblNldCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9wbGF5IHNwZWNpZmllZCBzdGF0ZVxuICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhBbmltYXRvci5wbGF5KHRoaXMuX2FuaW1hdGlvblNldC5hbmltYXRpb25OYW1lc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqdGhpcy5fYW5pbWF0aW9uU2V0LmFuaW1hdGlvbk5hbWVzLmxlbmd0aCldLCBudWxsLCBNYXRoLnJhbmRvbSgpKjEwMDApO1xuICAgICAgICAgICAgICAgICAgICBjbG9uZS5hbmltYXRvciA9IHZlcnRleEFuaW1hdG9yO1xuICAgICAgICAgICAgICAgICAgICBrKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMaXN0ZW5lciBmdW5jdGlvbiBmb3IgcmVzb3VyY2UgY29tcGxldGUgZXZlbnQgb24gYXNzZXQgbGlicmFyeVxuICAgICAqL1xuICAgIHByaXZhdGUgb25SZXNvdXJjZUNvbXBsZXRlKGV2ZW50OkxvYWRlckV2ZW50KVxuICAgIHtcbiAgICAgICAgdmFyIGFzc2V0czpBcnJheTxJQXNzZXQ+ID0gZXZlbnQuYXNzZXRzO1xuICAgICAgICB2YXIgbGVuZ3RoOm51bWJlciA9IGFzc2V0cy5sZW5ndGg7XG5cbiAgICAgICAgZm9yICggdmFyIGMgOiBudW1iZXIgPSAwIDsgYyA8IGxlbmd0aCA7IGMgKysgKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgYXNzZXQ6SUFzc2V0ID0gYXNzZXRzW2NdO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhhc3NldC5uYW1lLCBldmVudC51cmwpO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LnVybClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvL2Zsb29yIHRleHR1cmVcbiAgICAgICAgICAgICAgICBjYXNlIFwiYXNzZXRzL2Zsb29yX2RpZmZ1c2UuanBnXCIgOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9mbG9vck1hdGVyaWFsLnRleHR1cmUgPSA8VGV4dHVyZTJEQmFzZT4gYXNzZXQ7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgLy9rbmlnaHQgdGV4dHVyZXNcbiAgICAgICAgICAgICAgICBjYXNlIFwiYXNzZXRzL3BrbmlnaHQxLnBuZ1wiIDpcbiAgICAgICAgICAgICAgICBjYXNlIFwiYXNzZXRzL3BrbmlnaHQyLnBuZ1wiIDpcbiAgICAgICAgICAgICAgICBjYXNlIFwiYXNzZXRzL3BrbmlnaHQzLnBuZ1wiIDpcbiAgICAgICAgICAgICAgICBjYXNlIFwiYXNzZXRzL3BrbmlnaHQ0LnBuZ1wiIDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcEtuaWdodE1hdGVyaWFsc1t0aGlzLl9wS25pZ2h0VGV4dHVyZXMuaW5kZXhPZihldmVudC51cmwpXS50ZXh0dXJlID0gPFRleHR1cmUyREJhc2U+IGFzc2V0O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIC8va25pZ2h0IGRhdGFcbiAgICAgICAgICAgICAgICBjYXNlIFwiYXNzZXRzL3BrbmlnaHQubWQyXCIgOlxuXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogS2V5IGRvd24gbGlzdGVuZXIgZm9yIGFuaW1hdGlvblxuICAgICAqL1xuICAgIHByaXZhdGUgb25LZXlEb3duKGV2ZW50OktleWJvYXJkRXZlbnQpOnZvaWRcbiAgICB7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQua2V5Q29kZSkge1xuICAgICAgICAgICAgY2FzZSBLZXlib2FyZC5VUDpcbiAgICAgICAgICAgIGNhc2UgS2V5Ym9hcmQuVzpcbiAgICAgICAgICAgIGNhc2UgS2V5Ym9hcmQuWjogLy9mclxuICAgICAgICAgICAgICAgIHRoaXMuX2tleVVwID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgS2V5Ym9hcmQuRE9XTjpcbiAgICAgICAgICAgIGNhc2UgS2V5Ym9hcmQuUzpcbiAgICAgICAgICAgICAgICB0aGlzLl9rZXlEb3duID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgS2V5Ym9hcmQuTEVGVDpcbiAgICAgICAgICAgIGNhc2UgS2V5Ym9hcmQuQTpcbiAgICAgICAgICAgIGNhc2UgS2V5Ym9hcmQuUTogLy9mclxuICAgICAgICAgICAgICAgIHRoaXMuX2tleUxlZnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBLZXlib2FyZC5SSUdIVDpcbiAgICAgICAgICAgIGNhc2UgS2V5Ym9hcmQuRDpcbiAgICAgICAgICAgICAgICB0aGlzLl9rZXlSaWdodCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBLZXkgdXAgbGlzdGVuZXJcbiAgICAgKi9cbiAgICBwcml2YXRlIG9uS2V5VXAoZXZlbnQ6S2V5Ym9hcmRFdmVudCk6dm9pZFxuICAgIHtcbiAgICAgICAgc3dpdGNoIChldmVudC5rZXlDb2RlKSB7XG4gICAgICAgICAgICBjYXNlIEtleWJvYXJkLlVQOlxuICAgICAgICAgICAgY2FzZSBLZXlib2FyZC5XOlxuICAgICAgICAgICAgY2FzZSBLZXlib2FyZC5aOiAvL2ZyXG4gICAgICAgICAgICAgICAgdGhpcy5fa2V5VXAgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgS2V5Ym9hcmQuRE9XTjpcbiAgICAgICAgICAgIGNhc2UgS2V5Ym9hcmQuUzpcbiAgICAgICAgICAgICAgICB0aGlzLl9rZXlEb3duID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEtleWJvYXJkLkxFRlQ6XG4gICAgICAgICAgICBjYXNlIEtleWJvYXJkLkE6XG4gICAgICAgICAgICBjYXNlIEtleWJvYXJkLlE6IC8vZnJcbiAgICAgICAgICAgICAgICB0aGlzLl9rZXlMZWZ0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEtleWJvYXJkLlJJR0hUOlxuICAgICAgICAgICAgY2FzZSBLZXlib2FyZC5EOlxuICAgICAgICAgICAgICAgIHRoaXMuX2tleVJpZ2h0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNb3VzZSBkb3duIGxpc3RlbmVyIGZvciBuYXZpZ2F0aW9uXG4gICAgICovXG4gICAgcHJpdmF0ZSBvbk1vdXNlRG93bihldmVudDpNb3VzZUV2ZW50KTp2b2lkXG4gICAge1xuICAgICAgICB0aGlzLl9sYXN0UGFuQW5nbGUgPSB0aGlzLl9jYW1lcmFDb250cm9sbGVyLnBhbkFuZ2xlO1xuICAgICAgICB0aGlzLl9sYXN0VGlsdEFuZ2xlID0gdGhpcy5fY2FtZXJhQ29udHJvbGxlci50aWx0QW5nbGU7XG4gICAgICAgIHRoaXMuX2xhc3RNb3VzZVggPSBldmVudC5jbGllbnRYO1xuICAgICAgICB0aGlzLl9sYXN0TW91c2VZID0gZXZlbnQuY2xpZW50WTtcbiAgICAgICAgdGhpcy5fbW92ZSA9IHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTW91c2UgdXAgbGlzdGVuZXIgZm9yIG5hdmlnYXRpb25cbiAgICAgKi9cbiAgICBwcml2YXRlIG9uTW91c2VVcChldmVudDpNb3VzZUV2ZW50KTp2b2lkXG4gICAge1xuICAgICAgICB0aGlzLl9tb3ZlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbk1vdXNlTW92ZShldmVudDpNb3VzZUV2ZW50KVxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuX21vdmUpIHtcbiAgICAgICAgICAgIHRoaXMuX2NhbWVyYUNvbnRyb2xsZXIucGFuQW5nbGUgPSAwLjMqKGV2ZW50LmNsaWVudFggLSB0aGlzLl9sYXN0TW91c2VYKSArIHRoaXMuX2xhc3RQYW5BbmdsZTtcbiAgICAgICAgICAgIHRoaXMuX2NhbWVyYUNvbnRyb2xsZXIudGlsdEFuZ2xlID0gMC4zKihldmVudC5jbGllbnRZIC0gdGhpcy5fbGFzdE1vdXNlWSkgKyB0aGlzLl9sYXN0VGlsdEFuZ2xlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTW91c2Ugd2hlZWwgbGlzdGVuZXIgZm9yIG5hdmlnYXRpb25cbiAgICAgKi9cbiAgICBwcml2YXRlIG9uTW91c2VXaGVlbChldmVudDpNb3VzZVdoZWVsRXZlbnQpOnZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuX2NhbWVyYUNvbnRyb2xsZXIuZGlzdGFuY2UgLT0gZXZlbnQud2hlZWxEZWx0YTtcblxuICAgICAgICBpZiAodGhpcy5fY2FtZXJhQ29udHJvbGxlci5kaXN0YW5jZSA8IDEwMClcbiAgICAgICAgICAgIHRoaXMuX2NhbWVyYUNvbnRyb2xsZXIuZGlzdGFuY2UgPSAxMDA7XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuX2NhbWVyYUNvbnRyb2xsZXIuZGlzdGFuY2UgPiAyMDAwKVxuICAgICAgICAgICAgdGhpcy5fY2FtZXJhQ29udHJvbGxlci5kaXN0YW5jZSA9IDIwMDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3RhZ2UgbGlzdGVuZXIgZm9yIHJlc2l6ZSBldmVudHNcbiAgICAgKi9cbiAgICBwcml2YXRlIG9uUmVzaXplKGV2ZW50OlVJRXZlbnQgPSBudWxsKTp2b2lkXG4gICAge1xuICAgICAgICB0aGlzLl92aWV3LnkgPSAwO1xuICAgICAgICB0aGlzLl92aWV3LnggPSAwO1xuICAgICAgICB0aGlzLl92aWV3LndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgIHRoaXMuX3ZpZXcuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgIH1cbn1cblxud2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uICgpXG57XG4gICAgbmV3IEludGVybWVkaWF0ZV9QZXJlbGl0aEtuaWdodCgpO1xufSJdfQ==