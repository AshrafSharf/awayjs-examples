/*

Vertex animation example in Away3d using the MD2 format

Demonstrates:

How to use the AssetLibrary class to load an embedded internal md2 model.
How to clone an asset from the AssetLibrary and apply different mateirals.
How to load animations into an animation set and apply to individual meshes.

Code by Rob Bateman
rob@infiniteturtles.co.uk
http://www.infiniteturtles.co.uk

Perelith Knight, by James Green (no email given)

This code is distributed under the MIT License

Copyright (c) The Away Foundation http://www.theawayfoundation.org

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the “Software”), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
var AssetEvent = require("awayjs-core/lib/events/AssetEvent");
var LoaderEvent = require("awayjs-core/lib/events/LoaderEvent");
var Vector3D = require("awayjs-core/lib/geom/Vector3D");
var AssetLibrary = require("awayjs-core/lib/library/AssetLibrary");
var URLRequest = require("awayjs-core/lib/net/URLRequest");
var Keyboard = require("awayjs-core/lib/ui/Keyboard");
var RequestAnimationFrame = require("awayjs-core/lib/utils/RequestAnimationFrame");
var View = require("awayjs-display/lib/containers/View");
var HoverController = require("awayjs-display/lib/controllers/HoverController");
var DirectionalLight = require("awayjs-display/lib/entities/DirectionalLight");
var Mesh = require("awayjs-display/lib/entities/Mesh");
var StaticLightPicker = require("awayjs-display/lib/materials/lightpickers/StaticLightPicker");
var PrimitivePlanePrefab = require("awayjs-display/lib/prefabs/PrimitivePlanePrefab");
var AnimationSetBase = require("awayjs-renderergl/lib/animators/AnimationSetBase");
var VertexAnimator = require("awayjs-renderergl/lib/animators/VertexAnimator");
var DefaultRenderer = require("awayjs-renderergl/lib/DefaultRenderer");
var MethodMaterial = require("awayjs-methodmaterials/lib/MethodMaterial");
var MethodRendererPool = require("awayjs-methodmaterials/lib/pool/MethodRendererPool");
var ShadowFilteredMethod = require("awayjs-methodmaterials/lib/methods/ShadowFilteredMethod");
var MD2Parser = require("awayjs-parsers/lib/MD2Parser");
var Intermediate_PerelithKnight = (function () {
    /**
     * Constructor
     */
    function Intermediate_PerelithKnight() {
        var _this = this;
        this._meshInitialised = false;
        this._animationSetInitialised = false;
        this._sceneInitialised = false;
        //array of materials for random sampling
        this._pKnightTextures = new Array("assets/pknight1.png", "assets/pknight2.png", "assets/pknight3.png", "assets/pknight4.png");
        this._pKnightMaterials = new Array();
        this._time = 0;
        this._move = false;
        this._lookAtPosition = new Vector3D();
        //setup the view
        this._view = new View(new DefaultRenderer(MethodRendererPool));
        //setup the camera for optimal rendering
        this._view.camera.projection.far = 5000;
        //setup controller to be used on the camera
        this._cameraController = new HoverController(this._view.camera, null, 45, 20, 2000, 5);
        //setup the help text
        /*
        var text:TextField = new TextField();
        text.defaultTextFormat = new TextFormat("Verdana", 11, 0xFFFFFF);
        text.embedFonts = true;
        text.antiAliasType = AntiAliasType.ADVANCED;
        text.gridFitType = GridFitType.PIXEL;
        text.width = 240;
        text.height = 100;
        text.selectable = false;
        text.mouseEnabled = false;
        text.text = "Click and drag - rotate\n" +
            "Cursor keys / WSAD / ZSQD - move\n" +
            "Scroll wheel - zoom";

        text.filters = [new DropShadowFilter(1, 45, 0x0, 1, 0, 0)];

        addChild(text);
        */
        //setup the lights for the scene
        this._light = new DirectionalLight(-0.5, -1, -1);
        this._light.ambient = 0.4;
        this._lightPicker = new StaticLightPicker([this._light]);
        this._view.scene.addChild(this._light);
        //setup listeners on AssetLibrary
        AssetLibrary.addEventListener(AssetEvent.ASSET_COMPLETE, function (event) { return _this.onAssetComplete(event); });
        AssetLibrary.addEventListener(LoaderEvent.RESOURCE_COMPLETE, function (event) { return _this.onResourceComplete(event); });
        //load perilith knight textures
        AssetLibrary.load(new URLRequest("assets/pknight1.png"));
        AssetLibrary.load(new URLRequest("assets/pknight2.png"));
        AssetLibrary.load(new URLRequest("assets/pknight3.png"));
        AssetLibrary.load(new URLRequest("assets/pknight4.png"));
        //load floor texture
        AssetLibrary.load(new URLRequest("assets/floor_diffuse.jpg"));
        //load perelith knight data
        AssetLibrary.load(new URLRequest("assets/pknight.md2"), null, null, new MD2Parser());
        //create a global shadow map method
        this._shadowMapMethod = new ShadowFilteredMethod(this._light);
        this._shadowMapMethod.epsilon = 0.2;
        //setup floor material
        this._floorMaterial = new MethodMaterial();
        this._floorMaterial.lightPicker = this._lightPicker;
        this._floorMaterial.specular = 0;
        this._floorMaterial.ambient = 1;
        this._floorMaterial.shadowMethod = this._shadowMapMethod;
        this._floorMaterial.repeat = true;
        for (var i = 0; i < this._pKnightTextures.length; i++) {
            var knightMaterial = new MethodMaterial();
            //knightMaterial.normalMap = Cast.bitmapTexture(BitmapFilterEffects.normalMap(bitmapData));
            //knightMaterial.specularMap = Cast.bitmapTexture(BitmapFilterEffects.outline(bitmapData));
            knightMaterial.lightPicker = this._lightPicker;
            knightMaterial.gloss = 30;
            knightMaterial.specular = 1;
            knightMaterial.ambient = 1;
            knightMaterial.shadowMethod = this._shadowMapMethod;
            this._pKnightMaterials.push(knightMaterial);
        }
        //setup the floor
        this._floor = new PrimitivePlanePrefab(5000, 5000).getNewObject();
        this._floor.material = this._floorMaterial;
        this._floor.geometry.scaleUV(5, 5);
        //setup the scene
        this._view.scene.addChild(this._floor);
        //add stats panel
        //addChild(_stats = new AwayStats(_view));
        //add listeners
        window.onresize = function (event) { return _this.onResize(event); };
        document.onmousedown = function (event) { return _this.onMouseDown(event); };
        document.onmouseup = function (event) { return _this.onMouseUp(event); };
        document.onmousemove = function (event) { return _this.onMouseMove(event); };
        document.onmousewheel = function (event) { return _this.onMouseWheel(event); };
        document.onkeydown = function (event) { return _this.onKeyDown(event); };
        document.onkeyup = function (event) { return _this.onKeyUp(event); };
        this.onResize();
        this._timer = new RequestAnimationFrame(this.onEnterFrame, this);
        this._timer.start();
    }
    /**
     * Navigation and render loop
     */
    Intermediate_PerelithKnight.prototype.onEnterFrame = function (dt) {
        this._time += dt;
        if (this._keyUp)
            this._lookAtPosition.x -= 10;
        if (this._keyDown)
            this._lookAtPosition.x += 10;
        if (this._keyLeft)
            this._lookAtPosition.z -= 10;
        if (this._keyRight)
            this._lookAtPosition.z += 10;
        this._cameraController.lookAtPosition = this._lookAtPosition;
        this._view.render();
    };
    /**
     * Listener for asset complete event on loader
     */
    Intermediate_PerelithKnight.prototype.onAssetComplete = function (event) {
        var asset = event.asset;
        switch (asset.assetType) {
            case Mesh.assetType:
                this._mesh = event.asset;
                //adjust the mesh
                this._mesh.y = 120;
                this._mesh.transform.scale = new Vector3D(5, 5, 5);
                this._meshInitialised = true;
                break;
            case AnimationSetBase.assetType:
                this._animationSet = event.asset;
                this._animationSetInitialised = true;
                break;
        }
        if (this._animationSetInitialised && this._meshInitialised && !this._sceneInitialised) {
            this._sceneInitialised = true;
            //create 20 x 20 different clones of the knight
            var numWide = 20;
            var numDeep = 20;
            var k = 0;
            for (var i = 0; i < numWide; i++) {
                for (var j = 0; j < numDeep; j++) {
                    //clone mesh
                    var clone = this._mesh.clone();
                    clone.x = (i - (numWide - 1) / 2) * 5000 / numWide;
                    clone.z = (j - (numDeep - 1) / 2) * 5000 / numDeep;
                    clone.castsShadows = true;
                    clone.material = this._pKnightMaterials[Math.floor(Math.random() * this._pKnightMaterials.length)];
                    this._view.scene.addChild(clone);
                    //create animator
                    var vertexAnimator = new VertexAnimator(this._animationSet);
                    //play specified state
                    vertexAnimator.play(this._animationSet.animationNames[Math.floor(Math.random() * this._animationSet.animationNames.length)], null, Math.random() * 1000);
                    clone.animator = vertexAnimator;
                    k++;
                }
            }
        }
    };
    /**
     * Listener function for resource complete event on asset library
     */
    Intermediate_PerelithKnight.prototype.onResourceComplete = function (event) {
        var assets = event.assets;
        var length = assets.length;
        for (var c = 0; c < length; c++) {
            var asset = assets[c];
            console.log(asset.name, event.url);
            switch (event.url) {
                case "assets/floor_diffuse.jpg":
                    this._floorMaterial.texture = asset;
                    break;
                case "assets/pknight1.png":
                case "assets/pknight2.png":
                case "assets/pknight3.png":
                case "assets/pknight4.png":
                    this._pKnightMaterials[this._pKnightTextures.indexOf(event.url)].texture = asset;
                    break;
                case "assets/pknight.md2":
                    break;
            }
        }
    };
    /**
     * Key down listener for animation
     */
    Intermediate_PerelithKnight.prototype.onKeyDown = function (event) {
        switch (event.keyCode) {
            case Keyboard.UP:
            case Keyboard.W:
            case Keyboard.Z:
                this._keyUp = true;
                break;
            case Keyboard.DOWN:
            case Keyboard.S:
                this._keyDown = true;
                break;
            case Keyboard.LEFT:
            case Keyboard.A:
            case Keyboard.Q:
                this._keyLeft = true;
                break;
            case Keyboard.RIGHT:
            case Keyboard.D:
                this._keyRight = true;
                break;
        }
    };
    /**
     * Key up listener
     */
    Intermediate_PerelithKnight.prototype.onKeyUp = function (event) {
        switch (event.keyCode) {
            case Keyboard.UP:
            case Keyboard.W:
            case Keyboard.Z:
                this._keyUp = false;
                break;
            case Keyboard.DOWN:
            case Keyboard.S:
                this._keyDown = false;
                break;
            case Keyboard.LEFT:
            case Keyboard.A:
            case Keyboard.Q:
                this._keyLeft = false;
                break;
            case Keyboard.RIGHT:
            case Keyboard.D:
                this._keyRight = false;
                break;
        }
    };
    /**
     * Mouse down listener for navigation
     */
    Intermediate_PerelithKnight.prototype.onMouseDown = function (event) {
        this._lastPanAngle = this._cameraController.panAngle;
        this._lastTiltAngle = this._cameraController.tiltAngle;
        this._lastMouseX = event.clientX;
        this._lastMouseY = event.clientY;
        this._move = true;
    };
    /**
     * Mouse up listener for navigation
     */
    Intermediate_PerelithKnight.prototype.onMouseUp = function (event) {
        this._move = false;
    };
    Intermediate_PerelithKnight.prototype.onMouseMove = function (event) {
        if (this._move) {
            this._cameraController.panAngle = 0.3 * (event.clientX - this._lastMouseX) + this._lastPanAngle;
            this._cameraController.tiltAngle = 0.3 * (event.clientY - this._lastMouseY) + this._lastTiltAngle;
        }
    };
    /**
     * Mouse wheel listener for navigation
     */
    Intermediate_PerelithKnight.prototype.onMouseWheel = function (event) {
        this._cameraController.distance -= event.wheelDelta;
        if (this._cameraController.distance < 100)
            this._cameraController.distance = 100;
        else if (this._cameraController.distance > 2000)
            this._cameraController.distance = 2000;
    };
    /**
     * Stage listener for resize events
     */
    Intermediate_PerelithKnight.prototype.onResize = function (event) {
        if (event === void 0) { event = null; }
        this._view.y = 0;
        this._view.x = 0;
        this._view.width = window.innerWidth;
        this._view.height = window.innerHeight;
    };
    return Intermediate_PerelithKnight;
})();
window.onload = function () {
    new Intermediate_PerelithKnight();
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9JbnRlcm1lZGlhdGVfUGVyZWxpdGhLbmlnaHQudHMiXSwibmFtZXMiOlsiSW50ZXJtZWRpYXRlX1BlcmVsaXRoS25pZ2h0IiwiSW50ZXJtZWRpYXRlX1BlcmVsaXRoS25pZ2h0LmNvbnN0cnVjdG9yIiwiSW50ZXJtZWRpYXRlX1BlcmVsaXRoS25pZ2h0Lm9uRW50ZXJGcmFtZSIsIkludGVybWVkaWF0ZV9QZXJlbGl0aEtuaWdodC5vbkFzc2V0Q29tcGxldGUiLCJJbnRlcm1lZGlhdGVfUGVyZWxpdGhLbmlnaHQub25SZXNvdXJjZUNvbXBsZXRlIiwiSW50ZXJtZWRpYXRlX1BlcmVsaXRoS25pZ2h0Lm9uS2V5RG93biIsIkludGVybWVkaWF0ZV9QZXJlbGl0aEtuaWdodC5vbktleVVwIiwiSW50ZXJtZWRpYXRlX1BlcmVsaXRoS25pZ2h0Lm9uTW91c2VEb3duIiwiSW50ZXJtZWRpYXRlX1BlcmVsaXRoS25pZ2h0Lm9uTW91c2VVcCIsIkludGVybWVkaWF0ZV9QZXJlbGl0aEtuaWdodC5vbk1vdXNlTW92ZSIsIkludGVybWVkaWF0ZV9QZXJlbGl0aEtuaWdodC5vbk1vdXNlV2hlZWwiLCJJbnRlcm1lZGlhdGVfUGVyZWxpdGhLbmlnaHQub25SZXNpemUiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztFQXNDRTtBQUVGLElBQU8sVUFBVSxXQUFlLG1DQUFtQyxDQUFDLENBQUM7QUFDckUsSUFBTyxXQUFXLFdBQWUsb0NBQW9DLENBQUMsQ0FBQztBQUN2RSxJQUFPLFFBQVEsV0FBZ0IsK0JBQStCLENBQUMsQ0FBQztBQUNoRSxJQUFPLFlBQVksV0FBZSxzQ0FBc0MsQ0FBQyxDQUFDO0FBRTFFLElBQU8sVUFBVSxXQUFlLGdDQUFnQyxDQUFDLENBQUM7QUFDbEUsSUFBTyxRQUFRLFdBQWdCLDZCQUE2QixDQUFDLENBQUM7QUFFOUQsSUFBTyxxQkFBcUIsV0FBWSw2Q0FBNkMsQ0FBQyxDQUFDO0FBRXZG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S0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7UUFDakJBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBO1FBQ2pCQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxLQUFLQSxHQUFHQSxNQUFNQSxDQUFDQSxVQUFVQSxDQUFDQTtRQUNyQ0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsTUFBTUEsR0FBR0EsTUFBTUEsQ0FBQ0EsV0FBV0EsQ0FBQ0E7SUFDM0NBLENBQUNBO0lBQ0xYLGtDQUFDQTtBQUFEQSxDQW5YQSxBQW1YQ0EsSUFBQTtBQUVELE1BQU0sQ0FBQyxNQUFNLEdBQUc7SUFFWixJQUFJLDJCQUEyQixFQUFFLENBQUM7QUFDdEMsQ0FBQyxDQUFBIiwiZmlsZSI6IkludGVybWVkaWF0ZV9QZXJlbGl0aEtuaWdodC5qcyIsInNvdXJjZVJvb3QiOiIuLyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG5cblZlcnRleCBhbmltYXRpb24gZXhhbXBsZSBpbiBBd2F5M2QgdXNpbmcgdGhlIE1EMiBmb3JtYXRcblxuRGVtb25zdHJhdGVzOlxuXG5Ib3cgdG8gdXNlIHRoZSBBc3NldExpYnJhcnkgY2xhc3MgdG8gbG9hZCBhbiBlbWJlZGRlZCBpbnRlcm5hbCBtZDIgbW9kZWwuXG5Ib3cgdG8gY2xvbmUgYW4gYXNzZXQgZnJvbSB0aGUgQXNzZXRMaWJyYXJ5IGFuZCBhcHBseSBkaWZmZXJlbnQgbWF0ZWlyYWxzLlxuSG93IHRvIGxvYWQgYW5pbWF0aW9ucyBpbnRvIGFuIGFuaW1hdGlvbiBzZXQgYW5kIGFwcGx5IHRvIGluZGl2aWR1YWwgbWVzaGVzLlxuXG5Db2RlIGJ5IFJvYiBCYXRlbWFuXG5yb2JAaW5maW5pdGV0dXJ0bGVzLmNvLnVrXG5odHRwOi8vd3d3LmluZmluaXRldHVydGxlcy5jby51a1xuXG5QZXJlbGl0aCBLbmlnaHQsIGJ5IEphbWVzIEdyZWVuIChubyBlbWFpbCBnaXZlbilcblxuVGhpcyBjb2RlIGlzIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgTGljZW5zZVxuXG5Db3B5cmlnaHQgKGMpIFRoZSBBd2F5IEZvdW5kYXRpb24gaHR0cDovL3d3dy50aGVhd2F5Zm91bmRhdGlvbi5vcmdcblxuUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxub2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUg4oCcU29mdHdhcmXigJ0pLCB0byBkZWFsXG5pbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG50byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG5jb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbmZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cblRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG5hbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIOKAnEFTIElT4oCdLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG5JTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbkZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbk9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cblRIRSBTT0ZUV0FSRS5cblxuKi9cblxuaW1wb3J0IEFzc2V0RXZlbnRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2V2ZW50cy9Bc3NldEV2ZW50XCIpO1xuaW1wb3J0IExvYWRlckV2ZW50XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9ldmVudHMvTG9hZGVyRXZlbnRcIik7XG5pbXBvcnQgVmVjdG9yM0RcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvZ2VvbS9WZWN0b3IzRFwiKTtcbmltcG9ydCBBc3NldExpYnJhcnlcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2xpYnJhcnkvQXNzZXRMaWJyYXJ5XCIpO1xuaW1wb3J0IElBc3NldCAgIFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvbGlicmFyeS9JQXNzZXRcIik7XG5pbXBvcnQgVVJMUmVxdWVzdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvbmV0L1VSTFJlcXVlc3RcIik7XG5pbXBvcnQgS2V5Ym9hcmQgXHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi91aS9LZXlib2FyZFwiKTtcbmltcG9ydCBUZXh0dXJlMkRCYXNlXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvdGV4dHVyZXMvVGV4dHVyZTJEQmFzZVwiKTtcbmltcG9ydCBSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL3V0aWxzL1JlcXVlc3RBbmltYXRpb25GcmFtZVwiKTtcblxuaW1wb3J0IFZpZXdcdFx0XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi9jb250YWluZXJzL1ZpZXdcIik7XG5pbXBvcnQgSG92ZXJDb250cm9sbGVyXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvY29udHJvbGxlcnMvSG92ZXJDb250cm9sbGVyXCIpO1xuaW1wb3J0IENhbWVyYVx0XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi9lbnRpdGllcy9DYW1lcmFcIik7XG5pbXBvcnQgRGlyZWN0aW9uYWxMaWdodFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL2VudGl0aWVzL0RpcmVjdGlvbmFsTGlnaHRcIik7XG5pbXBvcnQgTWVzaFx0XHRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL2VudGl0aWVzL01lc2hcIik7XG5pbXBvcnQgU3RhdGljTGlnaHRQaWNrZXJcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvbWF0ZXJpYWxzL2xpZ2h0cGlja2Vycy9TdGF0aWNMaWdodFBpY2tlclwiKTtcbmltcG9ydCBQcmltaXRpdmVQbGFuZVByZWZhYlx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi9wcmVmYWJzL1ByaW1pdGl2ZVBsYW5lUHJlZmFiXCIpO1xuXG5pbXBvcnQgQW5pbWF0aW9uU2V0QmFzZVx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXJlbmRlcmVyZ2wvbGliL2FuaW1hdG9ycy9BbmltYXRpb25TZXRCYXNlXCIpO1xuaW1wb3J0IFZlcnRleEFuaW1hdGlvblNldFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9hbmltYXRvcnMvVmVydGV4QW5pbWF0aW9uU2V0XCIpO1xuaW1wb3J0IFZlcnRleEFuaW1hdG9yXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvYW5pbWF0b3JzL1ZlcnRleEFuaW1hdG9yXCIpO1xuXG5pbXBvcnQgRGVmYXVsdFJlbmRlcmVyXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvRGVmYXVsdFJlbmRlcmVyXCIpO1xuXG5pbXBvcnQgTWV0aG9kTWF0ZXJpYWxcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1tZXRob2RtYXRlcmlhbHMvbGliL01ldGhvZE1hdGVyaWFsXCIpO1xuaW1wb3J0IE1ldGhvZFJlbmRlcmVyUG9vbFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1tZXRob2RtYXRlcmlhbHMvbGliL3Bvb2wvTWV0aG9kUmVuZGVyZXJQb29sXCIpO1xuaW1wb3J0IFNoYWRvd0ZpbHRlcmVkTWV0aG9kXHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLW1ldGhvZG1hdGVyaWFscy9saWIvbWV0aG9kcy9TaGFkb3dGaWx0ZXJlZE1ldGhvZFwiKTtcblxuaW1wb3J0IE1EMlBhcnNlclx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcGFyc2Vycy9saWIvTUQyUGFyc2VyXCIpO1xuXG5jbGFzcyBJbnRlcm1lZGlhdGVfUGVyZWxpdGhLbmlnaHRcbntcblxuICAgIHByaXZhdGUgX21lc2hJbml0aWFsaXNlZDpib29sZWFuID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBfYW5pbWF0aW9uU2V0SW5pdGlhbGlzZWQ6Ym9vbGVhbiA9IGZhbHNlO1xuICAgIHByaXZhdGUgX3NjZW5lSW5pdGlhbGlzZWQ6Ym9vbGVhbiA9IGZhbHNlO1xuXG4gICAgLy9hcnJheSBvZiBtYXRlcmlhbHMgZm9yIHJhbmRvbSBzYW1wbGluZ1xuICAgIHByaXZhdGUgX3BLbmlnaHRUZXh0dXJlczpBcnJheTxzdHJpbmc+ID0gbmV3IEFycmF5PHN0cmluZz4oXCJhc3NldHMvcGtuaWdodDEucG5nXCIsIFwiYXNzZXRzL3BrbmlnaHQyLnBuZ1wiLCBcImFzc2V0cy9wa25pZ2h0My5wbmdcIiwgXCJhc3NldHMvcGtuaWdodDQucG5nXCIpO1xuICAgIHByaXZhdGUgX3BLbmlnaHRNYXRlcmlhbHM6QXJyYXk8TWV0aG9kTWF0ZXJpYWw+ID0gbmV3IEFycmF5PE1ldGhvZE1hdGVyaWFsPigpO1xuXG4gICAgLy9lbmdpbmUgdmFyaWFibGVzXG4gICAgcHJpdmF0ZSBfdmlldzpWaWV3O1xuICAgIHByaXZhdGUgX2NhbWVyYUNvbnRyb2xsZXI6SG92ZXJDb250cm9sbGVyO1xuXG4gICAgLy9zdGF0c1xuICAgIC8vcHJpdmF0ZSBfc3RhdHM6QXdheVN0YXRzO1xuXG4gICAgLy9saWdodCBvYmplY3RzXG4gICAgcHJpdmF0ZSBfbGlnaHQ6RGlyZWN0aW9uYWxMaWdodDtcbiAgICBwcml2YXRlIF9saWdodFBpY2tlcjpTdGF0aWNMaWdodFBpY2tlcjtcblxuICAgIC8vbWF0ZXJpYWwgb2JqZWN0c1xuICAgIHByaXZhdGUgX2Zsb29yTWF0ZXJpYWw6TWV0aG9kTWF0ZXJpYWw7XG4gICAgcHJpdmF0ZSBfc2hhZG93TWFwTWV0aG9kOlNoYWRvd0ZpbHRlcmVkTWV0aG9kO1xuXG4gICAgLy9zY2VuZSBvYmplY3RzXG4gICAgcHJpdmF0ZSBfZmxvb3I6TWVzaDtcbiAgICBwcml2YXRlIF9tZXNoOk1lc2g7XG5cbiAgICAvL25hdmlnYXRpb24gdmFyaWFibGVzXG4gICAgcHJpdmF0ZSBfdGltZXI6UmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xuICAgIHByaXZhdGUgX3RpbWU6bnVtYmVyID0gMDtcbiAgICBwcml2YXRlIF9tb3ZlOmJvb2xlYW4gPSBmYWxzZTtcbiAgICBwcml2YXRlIF9sYXN0UGFuQW5nbGU6bnVtYmVyO1xuICAgIHByaXZhdGUgX2xhc3RUaWx0QW5nbGU6bnVtYmVyO1xuICAgIHByaXZhdGUgX2xhc3RNb3VzZVg6bnVtYmVyO1xuICAgIHByaXZhdGUgX2xhc3RNb3VzZVk6bnVtYmVyO1xuICAgIHByaXZhdGUgX2tleVVwOmJvb2xlYW47XG4gICAgcHJpdmF0ZSBfa2V5RG93bjpib29sZWFuO1xuICAgIHByaXZhdGUgX2tleUxlZnQ6Ym9vbGVhbjtcbiAgICBwcml2YXRlIF9rZXlSaWdodDpib29sZWFuO1xuICAgIHByaXZhdGUgX2xvb2tBdFBvc2l0aW9uOlZlY3RvcjNEID0gbmV3IFZlY3RvcjNEKCk7XG4gICAgcHJpdmF0ZSBfYW5pbWF0aW9uU2V0OlZlcnRleEFuaW1hdGlvblNldDtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKVxuICAgIHtcbiAgICAgICAgLy9zZXR1cCB0aGUgdmlld1xuICAgICAgICB0aGlzLl92aWV3ID0gbmV3IFZpZXcobmV3IERlZmF1bHRSZW5kZXJlcihNZXRob2RSZW5kZXJlclBvb2wpKTtcblxuICAgICAgICAvL3NldHVwIHRoZSBjYW1lcmEgZm9yIG9wdGltYWwgcmVuZGVyaW5nXG4gICAgICAgIHRoaXMuX3ZpZXcuY2FtZXJhLnByb2plY3Rpb24uZmFyID0gNTAwMDtcblxuICAgICAgICAvL3NldHVwIGNvbnRyb2xsZXIgdG8gYmUgdXNlZCBvbiB0aGUgY2FtZXJhXG4gICAgICAgIHRoaXMuX2NhbWVyYUNvbnRyb2xsZXIgPSBuZXcgSG92ZXJDb250cm9sbGVyKHRoaXMuX3ZpZXcuY2FtZXJhLCBudWxsLCA0NSwgMjAsIDIwMDAsIDUpO1xuXG4gICAgICAgIC8vc2V0dXAgdGhlIGhlbHAgdGV4dFxuICAgICAgICAvKlxuICAgICAgICB2YXIgdGV4dDpUZXh0RmllbGQgPSBuZXcgVGV4dEZpZWxkKCk7XG4gICAgICAgIHRleHQuZGVmYXVsdFRleHRGb3JtYXQgPSBuZXcgVGV4dEZvcm1hdChcIlZlcmRhbmFcIiwgMTEsIDB4RkZGRkZGKTtcbiAgICAgICAgdGV4dC5lbWJlZEZvbnRzID0gdHJ1ZTtcbiAgICAgICAgdGV4dC5hbnRpQWxpYXNUeXBlID0gQW50aUFsaWFzVHlwZS5BRFZBTkNFRDtcbiAgICAgICAgdGV4dC5ncmlkRml0VHlwZSA9IEdyaWRGaXRUeXBlLlBJWEVMO1xuICAgICAgICB0ZXh0LndpZHRoID0gMjQwO1xuICAgICAgICB0ZXh0LmhlaWdodCA9IDEwMDtcbiAgICAgICAgdGV4dC5zZWxlY3RhYmxlID0gZmFsc2U7XG4gICAgICAgIHRleHQubW91c2VFbmFibGVkID0gZmFsc2U7XG4gICAgICAgIHRleHQudGV4dCA9IFwiQ2xpY2sgYW5kIGRyYWcgLSByb3RhdGVcXG5cIiArXG4gICAgICAgICAgICBcIkN1cnNvciBrZXlzIC8gV1NBRCAvIFpTUUQgLSBtb3ZlXFxuXCIgK1xuICAgICAgICAgICAgXCJTY3JvbGwgd2hlZWwgLSB6b29tXCI7XG5cbiAgICAgICAgdGV4dC5maWx0ZXJzID0gW25ldyBEcm9wU2hhZG93RmlsdGVyKDEsIDQ1LCAweDAsIDEsIDAsIDApXTtcblxuICAgICAgICBhZGRDaGlsZCh0ZXh0KTtcbiAgICAgICAgKi9cblxuICAgICAgICAvL3NldHVwIHRoZSBsaWdodHMgZm9yIHRoZSBzY2VuZVxuICAgICAgICB0aGlzLl9saWdodCA9IG5ldyBEaXJlY3Rpb25hbExpZ2h0KC0wLjUsIC0xLCAtMSk7XG4gICAgICAgIHRoaXMuX2xpZ2h0LmFtYmllbnQgPSAwLjQ7XG4gICAgICAgIHRoaXMuX2xpZ2h0UGlja2VyID0gbmV3IFN0YXRpY0xpZ2h0UGlja2VyKFt0aGlzLl9saWdodF0pO1xuICAgICAgICB0aGlzLl92aWV3LnNjZW5lLmFkZENoaWxkKHRoaXMuX2xpZ2h0KTtcblxuICAgICAgICAvL3NldHVwIGxpc3RlbmVycyBvbiBBc3NldExpYnJhcnlcbiAgICAgICAgQXNzZXRMaWJyYXJ5LmFkZEV2ZW50TGlzdGVuZXIoQXNzZXRFdmVudC5BU1NFVF9DT01QTEVURSwgKGV2ZW50OkFzc2V0RXZlbnQpID0+IHRoaXMub25Bc3NldENvbXBsZXRlKGV2ZW50KSk7XG4gICAgICAgIEFzc2V0TGlicmFyeS5hZGRFdmVudExpc3RlbmVyKExvYWRlckV2ZW50LlJFU09VUkNFX0NPTVBMRVRFLCAoZXZlbnQ6TG9hZGVyRXZlbnQpID0+IHRoaXMub25SZXNvdXJjZUNvbXBsZXRlKGV2ZW50KSk7XG5cbiAgICAgICAgLy9sb2FkIHBlcmlsaXRoIGtuaWdodCB0ZXh0dXJlc1xuICAgICAgICBBc3NldExpYnJhcnkubG9hZChuZXcgVVJMUmVxdWVzdChcImFzc2V0cy9wa25pZ2h0MS5wbmdcIikpO1xuICAgICAgICBBc3NldExpYnJhcnkubG9hZChuZXcgVVJMUmVxdWVzdChcImFzc2V0cy9wa25pZ2h0Mi5wbmdcIikpO1xuICAgICAgICBBc3NldExpYnJhcnkubG9hZChuZXcgVVJMUmVxdWVzdChcImFzc2V0cy9wa25pZ2h0My5wbmdcIikpO1xuICAgICAgICBBc3NldExpYnJhcnkubG9hZChuZXcgVVJMUmVxdWVzdChcImFzc2V0cy9wa25pZ2h0NC5wbmdcIikpO1xuXG4gICAgICAgIC8vbG9hZCBmbG9vciB0ZXh0dXJlXG4gICAgICAgIEFzc2V0TGlicmFyeS5sb2FkKG5ldyBVUkxSZXF1ZXN0KFwiYXNzZXRzL2Zsb29yX2RpZmZ1c2UuanBnXCIpKTtcblxuICAgICAgICAvL2xvYWQgcGVyZWxpdGgga25pZ2h0IGRhdGFcbiAgICAgICAgQXNzZXRMaWJyYXJ5LmxvYWQobmV3IFVSTFJlcXVlc3QoXCJhc3NldHMvcGtuaWdodC5tZDJcIiksIG51bGwsIG51bGwsIG5ldyBNRDJQYXJzZXIoKSk7XG5cbiAgICAgICAgLy9jcmVhdGUgYSBnbG9iYWwgc2hhZG93IG1hcCBtZXRob2RcbiAgICAgICAgdGhpcy5fc2hhZG93TWFwTWV0aG9kID0gbmV3IFNoYWRvd0ZpbHRlcmVkTWV0aG9kKHRoaXMuX2xpZ2h0KTtcbiAgICAgICAgdGhpcy5fc2hhZG93TWFwTWV0aG9kLmVwc2lsb24gPSAwLjI7XG5cbiAgICAgICAgLy9zZXR1cCBmbG9vciBtYXRlcmlhbFxuICAgICAgICB0aGlzLl9mbG9vck1hdGVyaWFsID0gbmV3IE1ldGhvZE1hdGVyaWFsKCk7XG4gICAgICAgIHRoaXMuX2Zsb29yTWF0ZXJpYWwubGlnaHRQaWNrZXIgPSB0aGlzLl9saWdodFBpY2tlcjtcbiAgICAgICAgdGhpcy5fZmxvb3JNYXRlcmlhbC5zcGVjdWxhciA9IDA7XG4gICAgICAgIHRoaXMuX2Zsb29yTWF0ZXJpYWwuYW1iaWVudCA9IDE7XG4gICAgICAgIHRoaXMuX2Zsb29yTWF0ZXJpYWwuc2hhZG93TWV0aG9kID0gdGhpcy5fc2hhZG93TWFwTWV0aG9kO1xuICAgICAgICB0aGlzLl9mbG9vck1hdGVyaWFsLnJlcGVhdCA9IHRydWU7XG5cbiAgICAgICAgLy9zZXR1cCBrbmlnaHQgbWF0ZXJpYWxzXG4gICAgICAgIGZvciAodmFyIGk6bnVtYmVyIC8qdWludCovICA9IDA7IGkgPCB0aGlzLl9wS25pZ2h0VGV4dHVyZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBrbmlnaHRNYXRlcmlhbDpNZXRob2RNYXRlcmlhbCA9IG5ldyBNZXRob2RNYXRlcmlhbCgpO1xuICAgICAgICAgICAgLy9rbmlnaHRNYXRlcmlhbC5ub3JtYWxNYXAgPSBDYXN0LmJpdG1hcFRleHR1cmUoQml0bWFwRmlsdGVyRWZmZWN0cy5ub3JtYWxNYXAoYml0bWFwRGF0YSkpO1xuICAgICAgICAgICAgLy9rbmlnaHRNYXRlcmlhbC5zcGVjdWxhck1hcCA9IENhc3QuYml0bWFwVGV4dHVyZShCaXRtYXBGaWx0ZXJFZmZlY3RzLm91dGxpbmUoYml0bWFwRGF0YSkpO1xuICAgICAgICAgICAga25pZ2h0TWF0ZXJpYWwubGlnaHRQaWNrZXIgPSB0aGlzLl9saWdodFBpY2tlcjtcbiAgICAgICAgICAgIGtuaWdodE1hdGVyaWFsLmdsb3NzID0gMzA7XG4gICAgICAgICAgICBrbmlnaHRNYXRlcmlhbC5zcGVjdWxhciA9IDE7XG4gICAgICAgICAgICBrbmlnaHRNYXRlcmlhbC5hbWJpZW50ID0gMTtcbiAgICAgICAgICAgIGtuaWdodE1hdGVyaWFsLnNoYWRvd01ldGhvZCA9IHRoaXMuX3NoYWRvd01hcE1ldGhvZDtcbiAgICAgICAgICAgIHRoaXMuX3BLbmlnaHRNYXRlcmlhbHMucHVzaChrbmlnaHRNYXRlcmlhbCk7XG4gICAgICAgIH1cblxuICAgICAgICAvL3NldHVwIHRoZSBmbG9vclxuICAgICAgICB0aGlzLl9mbG9vciA9IDxNZXNoPiBuZXcgUHJpbWl0aXZlUGxhbmVQcmVmYWIoNTAwMCwgNTAwMCkuZ2V0TmV3T2JqZWN0KCk7XG4gICAgICAgIHRoaXMuX2Zsb29yLm1hdGVyaWFsID0gdGhpcy5fZmxvb3JNYXRlcmlhbDtcbiAgICAgICAgdGhpcy5fZmxvb3IuZ2VvbWV0cnkuc2NhbGVVVig1LCA1KTtcblxuICAgICAgICAvL3NldHVwIHRoZSBzY2VuZVxuICAgICAgICB0aGlzLl92aWV3LnNjZW5lLmFkZENoaWxkKHRoaXMuX2Zsb29yKTtcblxuICAgICAgICAvL2FkZCBzdGF0cyBwYW5lbFxuICAgICAgICAvL2FkZENoaWxkKF9zdGF0cyA9IG5ldyBBd2F5U3RhdHMoX3ZpZXcpKTtcblxuICAgICAgICAvL2FkZCBsaXN0ZW5lcnNcbiAgICAgICAgd2luZG93Lm9ucmVzaXplICA9IChldmVudDpVSUV2ZW50KSA9PiB0aGlzLm9uUmVzaXplKGV2ZW50KTtcblxuICAgICAgICBkb2N1bWVudC5vbm1vdXNlZG93biA9IChldmVudDpNb3VzZUV2ZW50KSA9PiB0aGlzLm9uTW91c2VEb3duKGV2ZW50KTtcbiAgICAgICAgZG9jdW1lbnQub25tb3VzZXVwID0gKGV2ZW50Ok1vdXNlRXZlbnQpID0+IHRoaXMub25Nb3VzZVVwKGV2ZW50KTtcbiAgICAgICAgZG9jdW1lbnQub25tb3VzZW1vdmUgPSAoZXZlbnQ6TW91c2VFdmVudCkgPT4gdGhpcy5vbk1vdXNlTW92ZShldmVudCk7XG4gICAgICAgIGRvY3VtZW50Lm9ubW91c2V3aGVlbCA9IChldmVudDpNb3VzZVdoZWVsRXZlbnQpID0+IHRoaXMub25Nb3VzZVdoZWVsKGV2ZW50KTtcbiAgICAgICAgZG9jdW1lbnQub25rZXlkb3duID0gKGV2ZW50OktleWJvYXJkRXZlbnQpID0+IHRoaXMub25LZXlEb3duKGV2ZW50KTtcbiAgICAgICAgZG9jdW1lbnQub25rZXl1cCA9IChldmVudDpLZXlib2FyZEV2ZW50KSA9PiB0aGlzLm9uS2V5VXAoZXZlbnQpO1xuICAgICAgICB0aGlzLm9uUmVzaXplKCk7XG5cbiAgICAgICAgdGhpcy5fdGltZXIgPSBuZXcgUmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMub25FbnRlckZyYW1lLCB0aGlzKTtcbiAgICAgICAgdGhpcy5fdGltZXIuc3RhcnQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBOYXZpZ2F0aW9uIGFuZCByZW5kZXIgbG9vcFxuICAgICAqL1xuICAgIHByaXZhdGUgb25FbnRlckZyYW1lKGR0Om51bWJlcik6dm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5fdGltZSArPSBkdDtcblxuICAgICAgICBpZiAodGhpcy5fa2V5VXApXG4gICAgICAgICAgICB0aGlzLl9sb29rQXRQb3NpdGlvbi54IC09IDEwO1xuICAgICAgICBpZiAodGhpcy5fa2V5RG93bilcbiAgICAgICAgICAgIHRoaXMuX2xvb2tBdFBvc2l0aW9uLnggKz0gMTA7XG4gICAgICAgIGlmICh0aGlzLl9rZXlMZWZ0KVxuICAgICAgICAgICAgdGhpcy5fbG9va0F0UG9zaXRpb24ueiAtPSAxMDtcbiAgICAgICAgaWYgKHRoaXMuX2tleVJpZ2h0KVxuICAgICAgICAgICAgdGhpcy5fbG9va0F0UG9zaXRpb24ueiArPSAxMDtcblxuICAgICAgICB0aGlzLl9jYW1lcmFDb250cm9sbGVyLmxvb2tBdFBvc2l0aW9uID0gdGhpcy5fbG9va0F0UG9zaXRpb247XG5cbiAgICAgICAgdGhpcy5fdmlldy5yZW5kZXIoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMaXN0ZW5lciBmb3IgYXNzZXQgY29tcGxldGUgZXZlbnQgb24gbG9hZGVyXG4gICAgICovXG4gICAgcHJpdmF0ZSBvbkFzc2V0Q29tcGxldGUoZXZlbnQ6QXNzZXRFdmVudCk6dm9pZFxuICAgIHtcbiAgICAgICAgdmFyIGFzc2V0OklBc3NldCA9IGV2ZW50LmFzc2V0O1xuXG4gICAgICAgIHN3aXRjaCAoYXNzZXQuYXNzZXRUeXBlKVxuICAgICAgICB7XG4gICAgICAgICAgICBjYXNlIE1lc2guYXNzZXRUeXBlIDpcbiAgICAgICAgICAgICAgICB0aGlzLl9tZXNoID0gPE1lc2g+IGV2ZW50LmFzc2V0O1xuXG4gICAgICAgICAgICAgICAgLy9hZGp1c3QgdGhlIG1lc2hcbiAgICAgICAgICAgICAgICB0aGlzLl9tZXNoLnkgPSAxMjA7XG4gICAgICAgICAgICAgICAgdGhpcy5fbWVzaC50cmFuc2Zvcm0uc2NhbGUgPSBuZXcgVmVjdG9yM0QoNSwgNSwgNSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9tZXNoSW5pdGlhbGlzZWQgPSB0cnVlO1xuXG5cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQW5pbWF0aW9uU2V0QmFzZS5hc3NldFR5cGUgOlxuICAgICAgICAgICAgICAgIHRoaXMuX2FuaW1hdGlvblNldCA9IDxWZXJ0ZXhBbmltYXRpb25TZXQ+IGV2ZW50LmFzc2V0O1xuICAgICAgICAgICAgICAgIHRoaXMuX2FuaW1hdGlvblNldEluaXRpYWxpc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICggdGhpcy5fYW5pbWF0aW9uU2V0SW5pdGlhbGlzZWQgJiYgdGhpcy5fbWVzaEluaXRpYWxpc2VkICYmICEgdGhpcy5fc2NlbmVJbml0aWFsaXNlZClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fc2NlbmVJbml0aWFsaXNlZCA9IHRydWU7XG4gICAgICAgICAgICAvL2NyZWF0ZSAyMCB4IDIwIGRpZmZlcmVudCBjbG9uZXMgb2YgdGhlIGtuaWdodFxuICAgICAgICAgICAgdmFyIG51bVdpZGU6bnVtYmVyID0gMjA7XG4gICAgICAgICAgICB2YXIgbnVtRGVlcDpudW1iZXIgPSAyMDtcbiAgICAgICAgICAgIHZhciBrOm51bWJlciAvKnVpbnQqLyA9IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBpOm51bWJlciAvKnVpbnQqLyAgPSAwOyBpIDwgbnVtV2lkZTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgajpudW1iZXIgLyp1aW50Ki8gID0gMDsgaiA8IG51bURlZXA7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAvL2Nsb25lIG1lc2hcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNsb25lOk1lc2ggPSA8TWVzaD4gdGhpcy5fbWVzaC5jbG9uZSgpO1xuICAgICAgICAgICAgICAgICAgICBjbG9uZS54ID0gKGktKG51bVdpZGUtMSkvMikqNTAwMC9udW1XaWRlO1xuICAgICAgICAgICAgICAgICAgICBjbG9uZS56ID0gKGotKG51bURlZXAtMSkvMikqNTAwMC9udW1EZWVwO1xuICAgICAgICAgICAgICAgICAgICBjbG9uZS5jYXN0c1NoYWRvd3MgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBjbG9uZS5tYXRlcmlhbCA9IHRoaXMuX3BLbmlnaHRNYXRlcmlhbHNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKnRoaXMuX3BLbmlnaHRNYXRlcmlhbHMubGVuZ3RoKV07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3ZpZXcuc2NlbmUuYWRkQ2hpbGQoY2xvbmUpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vY3JlYXRlIGFuaW1hdG9yXG4gICAgICAgICAgICAgICAgICAgIHZhciB2ZXJ0ZXhBbmltYXRvcjpWZXJ0ZXhBbmltYXRvciA9IG5ldyBWZXJ0ZXhBbmltYXRvcih0aGlzLl9hbmltYXRpb25TZXQpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vcGxheSBzcGVjaWZpZWQgc3RhdGVcbiAgICAgICAgICAgICAgICAgICAgdmVydGV4QW5pbWF0b3IucGxheSh0aGlzLl9hbmltYXRpb25TZXQuYW5pbWF0aW9uTmFtZXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKnRoaXMuX2FuaW1hdGlvblNldC5hbmltYXRpb25OYW1lcy5sZW5ndGgpXSwgbnVsbCwgTWF0aC5yYW5kb20oKSoxMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgY2xvbmUuYW5pbWF0b3IgPSB2ZXJ0ZXhBbmltYXRvcjtcbiAgICAgICAgICAgICAgICAgICAgaysrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTGlzdGVuZXIgZnVuY3Rpb24gZm9yIHJlc291cmNlIGNvbXBsZXRlIGV2ZW50IG9uIGFzc2V0IGxpYnJhcnlcbiAgICAgKi9cbiAgICBwcml2YXRlIG9uUmVzb3VyY2VDb21wbGV0ZShldmVudDpMb2FkZXJFdmVudClcbiAgICB7XG4gICAgICAgIHZhciBhc3NldHM6QXJyYXk8SUFzc2V0PiA9IGV2ZW50LmFzc2V0cztcbiAgICAgICAgdmFyIGxlbmd0aDpudW1iZXIgPSBhc3NldHMubGVuZ3RoO1xuXG4gICAgICAgIGZvciAoIHZhciBjIDogbnVtYmVyID0gMCA7IGMgPCBsZW5ndGggOyBjICsrIClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGFzc2V0OklBc3NldCA9IGFzc2V0c1tjXTtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coYXNzZXQubmFtZSwgZXZlbnQudXJsKTtcblxuICAgICAgICAgICAgc3dpdGNoIChldmVudC51cmwpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy9mbG9vciB0ZXh0dXJlXG4gICAgICAgICAgICAgICAgY2FzZSBcImFzc2V0cy9mbG9vcl9kaWZmdXNlLmpwZ1wiIDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZmxvb3JNYXRlcmlhbC50ZXh0dXJlID0gPFRleHR1cmUyREJhc2U+IGFzc2V0O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIC8va25pZ2h0IHRleHR1cmVzXG4gICAgICAgICAgICAgICAgY2FzZSBcImFzc2V0cy9wa25pZ2h0MS5wbmdcIiA6XG4gICAgICAgICAgICAgICAgY2FzZSBcImFzc2V0cy9wa25pZ2h0Mi5wbmdcIiA6XG4gICAgICAgICAgICAgICAgY2FzZSBcImFzc2V0cy9wa25pZ2h0My5wbmdcIiA6XG4gICAgICAgICAgICAgICAgY2FzZSBcImFzc2V0cy9wa25pZ2h0NC5wbmdcIiA6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3BLbmlnaHRNYXRlcmlhbHNbdGhpcy5fcEtuaWdodFRleHR1cmVzLmluZGV4T2YoZXZlbnQudXJsKV0udGV4dHVyZSA9IDxUZXh0dXJlMkRCYXNlPiBhc3NldDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAvL2tuaWdodCBkYXRhXG4gICAgICAgICAgICAgICAgY2FzZSBcImFzc2V0cy9wa25pZ2h0Lm1kMlwiIDpcblxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEtleSBkb3duIGxpc3RlbmVyIGZvciBhbmltYXRpb25cbiAgICAgKi9cbiAgICBwcml2YXRlIG9uS2V5RG93bihldmVudDpLZXlib2FyZEV2ZW50KTp2b2lkXG4gICAge1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LmtleUNvZGUpIHtcbiAgICAgICAgICAgIGNhc2UgS2V5Ym9hcmQuVVA6XG4gICAgICAgICAgICBjYXNlIEtleWJvYXJkLlc6XG4gICAgICAgICAgICBjYXNlIEtleWJvYXJkLlo6IC8vZnJcbiAgICAgICAgICAgICAgICB0aGlzLl9rZXlVcCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEtleWJvYXJkLkRPV046XG4gICAgICAgICAgICBjYXNlIEtleWJvYXJkLlM6XG4gICAgICAgICAgICAgICAgdGhpcy5fa2V5RG93biA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEtleWJvYXJkLkxFRlQ6XG4gICAgICAgICAgICBjYXNlIEtleWJvYXJkLkE6XG4gICAgICAgICAgICBjYXNlIEtleWJvYXJkLlE6IC8vZnJcbiAgICAgICAgICAgICAgICB0aGlzLl9rZXlMZWZ0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgS2V5Ym9hcmQuUklHSFQ6XG4gICAgICAgICAgICBjYXNlIEtleWJvYXJkLkQ6XG4gICAgICAgICAgICAgICAgdGhpcy5fa2V5UmlnaHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogS2V5IHVwIGxpc3RlbmVyXG4gICAgICovXG4gICAgcHJpdmF0ZSBvbktleVVwKGV2ZW50OktleWJvYXJkRXZlbnQpOnZvaWRcbiAgICB7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQua2V5Q29kZSkge1xuICAgICAgICAgICAgY2FzZSBLZXlib2FyZC5VUDpcbiAgICAgICAgICAgIGNhc2UgS2V5Ym9hcmQuVzpcbiAgICAgICAgICAgIGNhc2UgS2V5Ym9hcmQuWjogLy9mclxuICAgICAgICAgICAgICAgIHRoaXMuX2tleVVwID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEtleWJvYXJkLkRPV046XG4gICAgICAgICAgICBjYXNlIEtleWJvYXJkLlM6XG4gICAgICAgICAgICAgICAgdGhpcy5fa2V5RG93biA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBLZXlib2FyZC5MRUZUOlxuICAgICAgICAgICAgY2FzZSBLZXlib2FyZC5BOlxuICAgICAgICAgICAgY2FzZSBLZXlib2FyZC5ROiAvL2ZyXG4gICAgICAgICAgICAgICAgdGhpcy5fa2V5TGVmdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBLZXlib2FyZC5SSUdIVDpcbiAgICAgICAgICAgIGNhc2UgS2V5Ym9hcmQuRDpcbiAgICAgICAgICAgICAgICB0aGlzLl9rZXlSaWdodCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTW91c2UgZG93biBsaXN0ZW5lciBmb3IgbmF2aWdhdGlvblxuICAgICAqL1xuICAgIHByaXZhdGUgb25Nb3VzZURvd24oZXZlbnQ6TW91c2VFdmVudCk6dm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5fbGFzdFBhbkFuZ2xlID0gdGhpcy5fY2FtZXJhQ29udHJvbGxlci5wYW5BbmdsZTtcbiAgICAgICAgdGhpcy5fbGFzdFRpbHRBbmdsZSA9IHRoaXMuX2NhbWVyYUNvbnRyb2xsZXIudGlsdEFuZ2xlO1xuICAgICAgICB0aGlzLl9sYXN0TW91c2VYID0gZXZlbnQuY2xpZW50WDtcbiAgICAgICAgdGhpcy5fbGFzdE1vdXNlWSA9IGV2ZW50LmNsaWVudFk7XG4gICAgICAgIHRoaXMuX21vdmUgPSB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vdXNlIHVwIGxpc3RlbmVyIGZvciBuYXZpZ2F0aW9uXG4gICAgICovXG4gICAgcHJpdmF0ZSBvbk1vdXNlVXAoZXZlbnQ6TW91c2VFdmVudCk6dm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5fbW92ZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25Nb3VzZU1vdmUoZXZlbnQ6TW91c2VFdmVudClcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLl9tb3ZlKSB7XG4gICAgICAgICAgICB0aGlzLl9jYW1lcmFDb250cm9sbGVyLnBhbkFuZ2xlID0gMC4zKihldmVudC5jbGllbnRYIC0gdGhpcy5fbGFzdE1vdXNlWCkgKyB0aGlzLl9sYXN0UGFuQW5nbGU7XG4gICAgICAgICAgICB0aGlzLl9jYW1lcmFDb250cm9sbGVyLnRpbHRBbmdsZSA9IDAuMyooZXZlbnQuY2xpZW50WSAtIHRoaXMuX2xhc3RNb3VzZVkpICsgdGhpcy5fbGFzdFRpbHRBbmdsZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vdXNlIHdoZWVsIGxpc3RlbmVyIGZvciBuYXZpZ2F0aW9uXG4gICAgICovXG4gICAgcHJpdmF0ZSBvbk1vdXNlV2hlZWwoZXZlbnQ6TW91c2VXaGVlbEV2ZW50KTp2b2lkXG4gICAge1xuICAgICAgICB0aGlzLl9jYW1lcmFDb250cm9sbGVyLmRpc3RhbmNlIC09IGV2ZW50LndoZWVsRGVsdGE7XG5cbiAgICAgICAgaWYgKHRoaXMuX2NhbWVyYUNvbnRyb2xsZXIuZGlzdGFuY2UgPCAxMDApXG4gICAgICAgICAgICB0aGlzLl9jYW1lcmFDb250cm9sbGVyLmRpc3RhbmNlID0gMTAwO1xuICAgICAgICBlbHNlIGlmICh0aGlzLl9jYW1lcmFDb250cm9sbGVyLmRpc3RhbmNlID4gMjAwMClcbiAgICAgICAgICAgIHRoaXMuX2NhbWVyYUNvbnRyb2xsZXIuZGlzdGFuY2UgPSAyMDAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN0YWdlIGxpc3RlbmVyIGZvciByZXNpemUgZXZlbnRzXG4gICAgICovXG4gICAgcHJpdmF0ZSBvblJlc2l6ZShldmVudDpVSUV2ZW50ID0gbnVsbCk6dm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5fdmlldy55ID0gMDtcbiAgICAgICAgdGhpcy5fdmlldy54ID0gMDtcbiAgICAgICAgdGhpcy5fdmlldy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICB0aGlzLl92aWV3LmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICB9XG59XG5cbndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKVxue1xuICAgIG5ldyBJbnRlcm1lZGlhdGVfUGVyZWxpdGhLbmlnaHQoKTtcbn0iXX0=