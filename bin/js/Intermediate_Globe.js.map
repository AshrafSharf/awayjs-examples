{
  "version": 3,
  "sources": [
    "node_modules/browserify/node_modules/browser-pack/_prelude.js",
    "src/Intermediate_Globe.ts"
  ],
  "names": [],
  "mappings": "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",
  "file": "Intermediate_Globe.js",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "/*\n\nGlobe example in Away3d\n\nDemonstrates:\n\nHow to create a textured sphere.\nHow to use containers to rotate an object.\nHow to use the PhongBitmapMaterial.\n\nCode by Rob Bateman\nrob@infiniteturtles.co.uk\nhttp://www.infiniteturtles.co.uk\n\nThis code is distributed under the MIT License\n\nCopyright (c) The Away Foundation http://www.theawayfoundation.org\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the “Software”), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n*/\nimport BitmapData\t\t\t\t\t= require(\"awayjs-core/lib/base/BitmapData\");\nimport BitmapDataChannel\t\t\t= require(\"awayjs-core/lib/base/BitmapDataChannel\");\nimport BlendMode\t\t\t\t\t= require(\"awayjs-core/lib/base/BlendMode\");\nimport LoaderEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/LoaderEvent\");\nimport ColorTransform\t\t\t\t= require(\"awayjs-core/lib/geom/ColorTransform\");\nimport Vector3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\nimport Point\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Point\");\nimport AssetLibrary\t\t\t\t\t= require(\"awayjs-core/lib/library/AssetLibrary\");\nimport AssetLoaderContext\t\t\t= require(\"awayjs-core/lib/library/AssetLoaderContext\");\nimport URLRequest\t\t\t\t\t= require(\"awayjs-core/lib/net/URLRequest\");\nimport ImageCubeTexture\t\t\t\t= require(\"awayjs-core/lib/textures/ImageCubeTexture\");\nimport ImageTexture\t\t\t\t\t= require(\"awayjs-core/lib/textures/ImageTexture\");\nimport BitmapTexture\t\t\t\t= require(\"awayjs-core/lib/textures/BitmapTexture\");\nimport RequestAnimationFrame\t\t= require(\"awayjs-core/lib/utils/RequestAnimationFrame\");\n\nimport DisplayObjectContainer\t\t= require(\"awayjs-display/lib/containers/DisplayObjectContainer\");\nimport Scene\t\t\t\t\t\t= require(\"awayjs-display/lib/containers/Scene\");\nimport Loader\t\t\t\t\t\t= require(\"awayjs-display/lib/containers/Loader\");\nimport View\t\t\t\t\t\t\t= require(\"awayjs-display/lib/containers/View\");\nimport HoverController\t\t\t\t= require(\"awayjs-display/lib/controllers/HoverController\");\nimport OrientationMode\t\t\t\t= require(\"awayjs-display/lib/base/OrientationMode\");\nimport AlignmentMode\t\t\t\t= require(\"awayjs-display/lib/base/AlignmentMode\");\nimport Camera\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\nimport Billboard\t\t\t\t\t= require(\"awayjs-display/lib/entities/Billboard\");\nimport Mesh\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Mesh\");\nimport PointLight\t\t\t\t\t= require(\"awayjs-display/lib/entities/PointLight\");\nimport Skybox\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Skybox\");\nimport StaticLightPicker\t\t\t= require(\"awayjs-display/lib/materials/lightpickers/StaticLightPicker\");\nimport PrimitiveSpherePrefab\t\t= require(\"awayjs-display/lib/prefabs/PrimitiveSpherePrefab\");\nimport Cast\t\t\t\t\t\t\t= require(\"awayjs-display/lib/utils/Cast\");\n\nimport DefaultRenderer\t\t\t\t= require(\"awayjs-renderergl/lib/DefaultRenderer\");\nimport ShaderObjectBase\t\t\t\t= require(\"awayjs-renderergl/lib/compilation/ShaderObjectBase\");\nimport ShaderRegisterElement\t\t= require(\"awayjs-renderergl/lib/compilation/ShaderRegisterElement\");\nimport ShaderRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/compilation/ShaderRegisterCache\");\nimport ShaderRegisterData\t\t\t= require(\"awayjs-renderergl/lib/compilation/ShaderRegisterData\");\n\nimport MethodMaterial\t\t\t\t= require(\"awayjs-methodmaterials/lib/MethodMaterial\");\nimport MethodRendererPool\t\t\t= require(\"awayjs-methodmaterials/lib/pool/MethodRendererPool\");\nimport MethodVO\t\t\t\t\t\t= require(\"awayjs-methodmaterials/lib/data/MethodVO\");\nimport DiffuseCompositeMethod\t\t= require(\"awayjs-methodmaterials/lib/methods/DiffuseCompositeMethod\");\nimport SpecularCompositeMethod\t\t= require(\"awayjs-methodmaterials/lib/methods/SpecularCompositeMethod\");\nimport DiffuseBasicMethod\t\t\t= require(\"awayjs-methodmaterials/lib/methods/DiffuseBasicMethod\");\nimport SpecularBasicMethod\t\t\t= require(\"awayjs-methodmaterials/lib/methods/SpecularBasicMethod\");\nimport SpecularFresnelMethod\t\t= require(\"awayjs-methodmaterials/lib/methods/SpecularFresnelMethod\");\nimport SpecularPhongMethod\t\t\t= require(\"awayjs-methodmaterials/lib/methods/SpecularPhongMethod\");\n\nclass Intermediate_Globe\n{\n\t//engine variables\n\tprivate scene:Scene;\n\tprivate camera:Camera;\n\tprivate view:View;\n\tprivate cameraController:HoverController;\n\n\t//material objects\n\tprivate sunMaterial:MethodMaterial;\n\tprivate groundMaterial:MethodMaterial;\n\tprivate cloudMaterial:MethodMaterial;\n\tprivate atmosphereMaterial:MethodMaterial;\n\tprivate atmosphereDiffuseMethod:DiffuseBasicMethod;\n\tprivate atmosphereSpecularMethod:SpecularBasicMethod;\n\tprivate cubeTexture:ImageCubeTexture;\n\n\t//scene objects\n\tprivate sun:Billboard;\n\tprivate earth:Mesh;\n\tprivate clouds:Mesh;\n\tprivate atmosphere:Mesh;\n\tprivate tiltContainer:DisplayObjectContainer;\n\tprivate orbitContainer:DisplayObjectContainer;\n\tprivate skyBox:Skybox;\n\n\t//light objects\n\tprivate light:PointLight;\n\tprivate lightPicker:StaticLightPicker;\n\tprivate flares:FlareObject[] = new Array<FlareObject>(12);\n\n\t//navigation variables\n\tprivate _timer:RequestAnimationFrame;\n\tprivate _time:number = 0;\n\tprivate move:boolean = false;\n\tprivate lastPanAngle:number;\n\tprivate lastTiltAngle:number;\n\tprivate lastMouseX:number;\n\tprivate lastMouseY:number;\n\tprivate mouseLockX:number = 0;\n\tprivate mouseLockY:number = 0;\n\tprivate mouseLocked:boolean;\n\tprivate flareVisible:boolean;\n\n\t/**\n\t * Constructor\n\t */\n\tconstructor()\n\t{\n\t\tthis.init();\n\t}\n\n\t/**\n\t * Global initialise function\n\t */\n\tprivate init():void\n\t{\n\t\tthis.initEngine();\n\t\tthis.initLights();\n\t\t//initLensFlare();\n\t\tthis.initMaterials();\n\t\tthis.initObjects();\n\t\tthis.initListeners();\n\t}\n\n\t/**\n\t * Initialise the engine\n\t */\n\tprivate initEngine():void\n\t{\n\t\tthis.scene = new Scene();\n\n\t\t//setup camera for optimal skybox rendering\n\t\tthis.camera = new Camera();\n\t\tthis.camera.projection.far = 100000;\n\n\t\tthis.view = new View(new DefaultRenderer(MethodRendererPool));\n\t\tthis.view.scene = this.scene;\n\t\tthis.view.camera = this.camera;\n\n\t\t//setup controller to be used on the camera\n\t\tthis.cameraController = new HoverController(this.camera, null, 0, 0, 600, -90, 90);\n\t\tthis.cameraController.autoUpdate = false;\n\t\tthis.cameraController.yFactor = 1;\n\t}\n\n\t/**\n\t * Initialise the lights\n\t */\n\tprivate initLights():void\n\t{\n\t\tthis.light = new PointLight();\n\t\tthis.light.x = 10000;\n\t\tthis.light.ambient = 1;\n\t\tthis.light.diffuse = 2;\n\n\t\tthis.lightPicker = new StaticLightPicker([this.light]);\n\t}\n/*\n\tprivate initLensFlare():void\n\t{\n\t\tflares.push(new FlareObject(new Flare10(),  3.2, -0.01, 147.9));\n\t\tflares.push(new FlareObject(new Flare11(),  6,    0,     30.6));\n\t\tflares.push(new FlareObject(new Flare7(),   2,    0,     25.5));\n\t\tflares.push(new FlareObject(new Flare7(),   4,    0,     17.85));\n\t\tflares.push(new FlareObject(new Flare12(),  0.4,  0.32,  22.95));\n\t\tflares.push(new FlareObject(new Flare6(),   1,    0.68,  20.4));\n\t\tflares.push(new FlareObject(new Flare2(),   1.25, 1.1,   48.45));\n\t\tflares.push(new FlareObject(new Flare3(),   1.75, 1.37,   7.65));\n\t\tflares.push(new FlareObject(new Flare4(),   2.75, 1.85,  12.75));\n\t\tflares.push(new FlareObject(new Flare8(),   0.5,  2.21,  33.15));\n\t\tflares.push(new FlareObject(new Flare6(),   4,    2.5,   10.4));\n\t\tflares.push(new FlareObject(new Flare7(),   10,   2.66,  50));\n\t}\n*/\n\t/**\n\t * Initialise the materials\n\t */\n\tprivate initMaterials():void\n\t{\n\t\t//this.cubeTexture = new BitmapCubeTexture(Cast.bitmapData(PosX), Cast.bitmapData(NegX), Cast.bitmapData(PosY), Cast.bitmapData(NegY), Cast.bitmapData(PosZ), Cast.bitmapData(NegZ));\n\n\t\t//adjust specular map\n\t\t//var specBitmap:BitmapData = Cast.bitmapData(EarthSpecular);\n\t\t//specBitmap.colorTransform(specBitmap.rect, new ColorTransform(1, 1, 1, 1, 64, 64, 64));\n\n\t\tvar specular:SpecularFresnelMethod = new SpecularFresnelMethod(true, new SpecularPhongMethod());\n\t\tspecular.fresnelPower = 1;\n\t\tspecular.normalReflectance = 0.1;\n\n\t\tthis.sunMaterial = new MethodMaterial();\n\t\tthis.sunMaterial.blendMode = BlendMode.ADD;\n\n\t\tthis.groundMaterial = new MethodMaterial();\n\t\tthis.groundMaterial.specularMethod = specular;\n\t\tthis.groundMaterial.lightPicker = this.lightPicker;\n\t\tthis.groundMaterial.gloss = 5;\n\t\tthis.groundMaterial.specular = 1;\n\t\tthis.groundMaterial.ambient = 1;\n\t\tthis.groundMaterial.diffuseMethod.multiply = false;\n\n\t\tthis.cloudMaterial = new MethodMaterial();\n\t\tthis.cloudMaterial.alphaBlending = true;\n\t\tthis.cloudMaterial.lightPicker = this.lightPicker;\n\t\tthis.cloudMaterial.ambientColor = 0x1b2048;\n\t\tthis.cloudMaterial.specular = 0;\n\t\tthis.cloudMaterial.ambient = 1;\n\n\t\tthis.atmosphereDiffuseMethod = new DiffuseCompositeMethod(this.modulateDiffuseMethod);\n\t\tthis.atmosphereSpecularMethod = new SpecularCompositeMethod(this.modulateSpecularMethod, new SpecularPhongMethod());\n\n\t\tthis.atmosphereMaterial = new MethodMaterial();\n\t\tthis.atmosphereMaterial.diffuseMethod = this.atmosphereDiffuseMethod;\n\t\tthis.atmosphereMaterial.specularMethod = this.atmosphereSpecularMethod;\n\t\tthis.atmosphereMaterial.blendMode = BlendMode.ADD;\n\t\tthis.atmosphereMaterial.lightPicker = this.lightPicker;\n\t\tthis.atmosphereMaterial.specular = 0.5;\n\t\tthis.atmosphereMaterial.gloss = 5;\n\t\tthis.atmosphereMaterial.ambientColor = 0;\n\t\tthis.atmosphereMaterial.diffuseColor = 0x1671cc;\n\t\tthis.atmosphereMaterial.ambient = 1;\n\t}\n\n\tprivate modulateDiffuseMethod(shaderObject:ShaderObjectBase, methodVO:MethodVO, targetReg:ShaderRegisterElement, regCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\n\t{\n\t\tvar viewDirFragmentReg:ShaderRegisterElement = sharedRegisters.viewDirFragment;\n\t\tvar normalFragmentReg:ShaderRegisterElement = sharedRegisters.normalFragment;\n\n\t\tvar code:string = \"dp3 \" + targetReg + \".w, \" + viewDirFragmentReg + \".xyz, \" + normalFragmentReg + \".xyz\\n\" +\n\t\t\t\"mul \" + targetReg + \".w, \" + targetReg + \".w, \" + targetReg + \".w\\n\";\n\n\t\treturn code;\n\t}\n\n\tprivate modulateSpecularMethod(shaderObject:ShaderObjectBase, methodVO:MethodVO, targetReg:ShaderRegisterElement, regCache:ShaderRegisterCache, sharedRegisters:ShaderRegisterData):string\n\t{\n\t\tvar viewDirFragmentReg:ShaderRegisterElement = sharedRegisters.viewDirFragment;\n\t\tvar normalFragmentReg:ShaderRegisterElement = sharedRegisters.normalFragment;\n\t\tvar temp:ShaderRegisterElement = regCache.getFreeFragmentSingleTemp();\n\t\tregCache.addFragmentTempUsages(temp, 1);\n\n\t\tvar code:string = \"dp3 \" + temp + \", \" + viewDirFragmentReg + \".xyz, \" + normalFragmentReg + \".xyz\\n\" +\n\t\t\t\"neg \" + temp + \", \" + temp + \"\\n\" +\n\t\t\t\"mul \" + targetReg + \".w, \" + targetReg + \".w, \" + temp + \"\\n\";\n\n\t\tregCache.removeFragmentTempUsage(temp);\n\n\t\treturn code;\n\t}\n\n\t/**\n\t * Initialise the scene objects\n\t */\n\tprivate initObjects():void\n\t{\n\t\tthis.orbitContainer = new DisplayObjectContainer();\n\t\tthis.orbitContainer.addChild(this.light);\n\t\tthis.scene.addChild(this.orbitContainer);\n\n\t\tthis.sun = new Billboard(this.sunMaterial);\n\t\tthis.sun.width = 3000;\n\t\tthis.sun.height = 3000;\n\t\tthis.sun.pivot = new Vector3D(1500,1500,0);\n\t\tthis.sun.orientationMode = OrientationMode.CAMERA_PLANE;\n\t\tthis.sun.alignmentMode = AlignmentMode.PIVOT_POINT;\n\t\tthis.sun.x = 10000;\n\t\tthis.orbitContainer.addChild(this.sun);\n\n\t\tthis.earth = <Mesh> new PrimitiveSpherePrefab(200, 200, 100).getNewObject();\n\t\tthis.earth.material = this.groundMaterial;\n\n\t\tthis.clouds = <Mesh> new PrimitiveSpherePrefab(202, 200, 100).getNewObject();\n\t\tthis.clouds.material = this.cloudMaterial;\n\n\t\tthis.atmosphere = <Mesh> new PrimitiveSpherePrefab(210, 200, 100).getNewObject();\n\t\tthis.atmosphere.material = this.atmosphereMaterial;\n\t\tthis.atmosphere.scaleX = -1;\n\n\t\tthis.tiltContainer = new DisplayObjectContainer();\n\t\tthis.tiltContainer.rotationX = -23;\n\t\tthis.tiltContainer.addChild(this.earth);\n\t\tthis.tiltContainer.addChild(this.clouds);\n\t\tthis.tiltContainer.addChild(this.atmosphere);\n\n\t\tthis.scene.addChild(this.tiltContainer);\n\n\t\tthis.cameraController.lookAtObject = this.tiltContainer;\n\t}\n\n\t/**\n\t * Initialise the listeners\n\t */\n\tprivate initListeners():void\n\t{\n\t\twindow.onresize  = (event:UIEvent) => this.onResize(event);\n\n\t\tdocument.onmousedown = (event:MouseEvent) => this.onMouseDown(event);\n\t\tdocument.onmouseup = (event:MouseEvent) => this.onMouseUp(event);\n\t\tdocument.onmousemove = (event:MouseEvent) => this.onMouseMove(event);\n\t\tdocument.onmousewheel= (event:MouseWheelEvent) => this.onMouseWheel(event);\n\n\n\t\tthis.onResize();\n\n\t\tthis._timer = new RequestAnimationFrame(this.onEnterFrame, this);\n\t\tthis._timer.start();\n\n\t\tAssetLibrary.addEventListener(LoaderEvent.RESOURCE_COMPLETE, (event:LoaderEvent) => this.onResourceComplete(event));\n\n\t\t//setup the url map for textures in the cubemap file\n\t\tvar assetLoaderContext:AssetLoaderContext = new AssetLoaderContext();\n\t\tassetLoaderContext.dependencyBaseUrl = \"assets/skybox/\";\n\n\t\t//environment texture\n\t\tAssetLibrary.load(new URLRequest(\"assets/skybox/space_texture.cube\"), assetLoaderContext);\n\n\t\t//globe textures\n\t\tAssetLibrary.load(new URLRequest(\"assets/globe/cloud_combined_2048.jpg\"));\n\t\tAssetLibrary.load(new URLRequest(\"assets/globe/earth_specular_2048.jpg\"));\n\t\tAssetLibrary.load(new URLRequest(\"assets/globe/EarthNormal.png\"));\n\t\tAssetLibrary.load(new URLRequest(\"assets/globe/land_lights_16384.jpg\"));\n\t\tAssetLibrary.load(new URLRequest(\"assets/globe/land_ocean_ice_2048_match.jpg\"));\n\n\t\t//flare textures\n\t\tAssetLibrary.load(new URLRequest(\"assets/lensflare/flare2.jpg\"));\n\t\tAssetLibrary.load(new URLRequest(\"assets/lensflare/flare3.jpg\"));\n\t\tAssetLibrary.load(new URLRequest(\"assets/lensflare/flare4.jpg\"));\n\t\tAssetLibrary.load(new URLRequest(\"assets/lensflare/flare6.jpg\"));\n\t\tAssetLibrary.load(new URLRequest(\"assets/lensflare/flare7.jpg\"));\n\t\tAssetLibrary.load(new URLRequest(\"assets/lensflare/flare8.jpg\"));\n\t\tAssetLibrary.load(new URLRequest(\"assets/lensflare/flare10.jpg\"));\n\t\tAssetLibrary.load(new URLRequest(\"assets/lensflare/flare11.jpg\"));\n\t\tAssetLibrary.load(new URLRequest(\"assets/lensflare/flare12.jpg\"));\n\t}\n\n\t/**\n\t * Navigation and render loop\n\t */\n\tprivate onEnterFrame(dt:number):void\n\t{\n\t\tthis._time += dt;\n\n\t\tthis.earth.rotationY += 0.2;\n\t\tthis.clouds.rotationY += 0.21;\n\t\tthis.orbitContainer.rotationY += 0.02;\n\n\t\tthis.cameraController.update();\n\n\t\tthis.updateFlares();\n\n\t\tthis.view.render();\n\t}\n\n\tprivate updateFlares():void\n\t{\n\t\tvar flareVisibleOld:boolean = this.flareVisible;\n\n\t\tvar sunScreenPosition:Vector3D = this.view.project(this.sun.scenePosition);\n\t\tvar xOffset:number = sunScreenPosition.x - window.innerWidth/2;\n\t\tvar yOffset:number = sunScreenPosition.y - window.innerHeight/2;\n\n\t\tvar earthScreenPosition:Vector3D = this.view.project(this.earth.scenePosition);\n\t\tvar earthRadius:number = 190 * window.innerHeight/earthScreenPosition.z;\n\t\tvar flareObject:FlareObject;\n\n\t\tthis.flareVisible = (sunScreenPosition.x > 0 && sunScreenPosition.x < window.innerWidth && sunScreenPosition.y > 0 && sunScreenPosition.y  < window.innerHeight && sunScreenPosition.z > 0 && Math.sqrt(xOffset*xOffset + yOffset*yOffset) > earthRadius);\n\n\t\t//update flare visibility\n\t\tif (this.flareVisible != flareVisibleOld) {\n\t\t\tfor (var i:number = 0; i < this.flares.length; i++) {\n\t\t\t\tflareObject = this.flares[i];\n\t\t\t\tif (flareObject)\n\t\t\t\t\tflareObject.billboard.visible = this.flareVisible;\n\t\t\t}\n\t\t}\n\n\t\t//update flare position\n\t\tif (this.flareVisible) {\n\t\t\tvar flareDirection:Point = new Point(xOffset, yOffset);\n\t\t\tfor (var i:number = 0; i < this.flares.length; i++) {\n\t\t\t\tflareObject = this.flares[i];\n\t\t\t\tif (flareObject)\n\t\t\t\t\tflareObject.billboard.transform.position = this.view.unproject(sunScreenPosition.x - flareDirection.x*flareObject.position, sunScreenPosition.y - flareDirection.y*flareObject.position, 100 - i);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Listener function for resource complete event on asset library\n\t */\n\tprivate onResourceComplete(event:LoaderEvent)\n\t{\n\t\tswitch(event.url) {\n\t\t\t//environment texture\n\t\t\tcase 'assets/skybox/space_texture.cube':\n\t\t\t\tthis.cubeTexture = <ImageCubeTexture> event.assets[ 0 ];\n\n\t\t\t\tthis.skyBox = new Skybox(this.cubeTexture);\n\t\t\t\tthis.scene.addChild(this.skyBox);\n\t\t\t\tbreak;\n\n\t\t\t//globe textures\n\t\t\tcase \"assets/globe/cloud_combined_2048.jpg\" :\n\t\t\t\tvar cloudBitmapData:BitmapData = new BitmapData(2048, 1024, true, 0xFFFFFFFF);\n\t\t\t\tcloudBitmapData.copyChannel(Cast.bitmapData(event.assets[ 0 ]), cloudBitmapData.rect, new Point(), BitmapDataChannel.RED, BitmapDataChannel.ALPHA);\n\n\t\t\t\tthis.cloudMaterial.texture = new BitmapTexture(cloudBitmapData);\n\t\t\t\tbreak;\n\t\t\tcase \"assets/globe/earth_specular_2048.jpg\" :\n\t\t\t\tvar specBitmapData:BitmapData = Cast.bitmapData(event.assets[ 0 ]);\n\t\t\t\tspecBitmapData.colorTransform(specBitmapData.rect, new ColorTransform(1, 1, 1, 1, 64, 64, 64));\n\t\t\t\tthis.groundMaterial.specularMap = new BitmapTexture(specBitmapData);\n\t\t\t\tbreak;\n\t\t\tcase \"assets/globe/EarthNormal.png\" :\n\t\t\t\tthis.groundMaterial.normalMap = <ImageTexture> event.assets[ 0 ];\n\t\t\t\tbreak;\n\t\t\tcase \"assets/globe/land_lights_16384.jpg\" :\n\t\t\t\tthis.groundMaterial.texture = <ImageTexture> event.assets[ 0 ];\n\t\t\t\tbreak;\n\t\t\tcase \"assets/globe/land_ocean_ice_2048_match.jpg\" :\n\t\t\t\tthis.groundMaterial.diffuseTexture = <ImageTexture> event.assets[ 0 ];\n\t\t\t\tbreak;\n\n\t\t\t//flare textures\n\t\t\tcase \"assets/lensflare/flare2.jpg\" :\n\t\t\t\tthis.flares[6] = new FlareObject(Cast.bitmapData(event.assets[ 0 ]), 1.25, 1.1, 48.45, this.scene);\n\t\t\t\tbreak;\n\t\t\tcase \"assets/lensflare/flare3.jpg\" :\n\t\t\t\tthis.flares[7] = new FlareObject(Cast.bitmapData(event.assets[ 0 ]), 1.75, 1.37, 7.65, this.scene);\n\t\t\t\tbreak;\n\t\t\tcase \"assets/lensflare/flare4.jpg\" :\n\t\t\t\tthis.flares[8] = new FlareObject(Cast.bitmapData(event.assets[ 0 ]), 2.75, 1.85, 12.75, this.scene);\n\t\t\t\tbreak;\n\t\t\tcase \"assets/lensflare/flare6.jpg\" :\n\t\t\t\tthis.flares[5] = new FlareObject(Cast.bitmapData(event.assets[ 0 ]), 1, 0.68, 20.4, this.scene);\n\t\t\t\tthis.flares[10] = new FlareObject(Cast.bitmapData(event.assets[ 0 ]), 4, 2.5, 10.4, this.scene);\n\t\t\t\tbreak;\n\t\t\tcase \"assets/lensflare/flare7.jpg\" :\n\t\t\t\tthis.flares[2] = new FlareObject(Cast.bitmapData(event.assets[ 0 ]), 2, 0, 25.5, this.scene);\n\t\t\t\tthis.flares[3] = new FlareObject(Cast.bitmapData(event.assets[ 0 ]), 4, 0, 17.85, this.scene);\n\t\t\t\tthis.flares[11] = new FlareObject(Cast.bitmapData(event.assets[ 0 ]), 10, 2.66, 50, this.scene);\n\t\t\t\tbreak;\n\t\t\tcase \"assets/lensflare/flare8.jpg\" :\n\t\t\t\tthis.flares[9] = new FlareObject(Cast.bitmapData(event.assets[ 0 ]), 0.5, 2.21, 33.15, this.scene);\n\t\t\t\tbreak;\n\t\t\tcase \"assets/lensflare/flare10.jpg\" :\n\t\t\t\tthis.sunMaterial.texture = <ImageTexture> event.assets[ 0 ];\n\t\t\t\tthis.flares[0] = new FlareObject(Cast.bitmapData(event.assets[ 0 ]), 3.2, -0.01, 100, this.scene);\n\t\t\t\tbreak;\n\t\t\tcase \"assets/lensflare/flare11.jpg\" :\n\t\t\t\tthis.flares[1] = new FlareObject(Cast.bitmapData(event.assets[ 0 ]), 6, 0, 30.6, this.scene);\n\t\t\t\tbreak;\n\t\t\tcase \"assets/lensflare/flare12.jpg\" :\n\t\t\t\tthis.flares[4] = new FlareObject(Cast.bitmapData(event.assets[ 0 ]), 0.4, 0.32, 22.95, this.scene);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t * Mouse down listener for navigation\n\t */\n\tprivate onMouseDown(event:MouseEvent):void\n\t{\n\t\tthis.lastPanAngle = this.cameraController.panAngle;\n\t\tthis.lastTiltAngle = this.cameraController.tiltAngle;\n\t\tthis.lastMouseX = event.clientX;\n\t\tthis.lastMouseY = event.clientY;\n\t\tthis.move = true;\n\t}\n\n\t/**\n\t * Mouse up listener for navigation\n\t */\n\tprivate onMouseUp(event:MouseEvent):void\n\t{\n\t\tthis.move = false;\n\t}\n\n\t/**\n\t * Mouse move listener for mouseLock\n\t */\n\tprivate onMouseMove(event:MouseEvent):void\n\t{\n//            if (stage.displayState == StageDisplayState.FULL_SCREEN) {\n//\n//                if (mouseLocked && (lastMouseX != 0 || lastMouseY != 0)) {\n//                    e.movementX += lastMouseX;\n//                    e.movementY += lastMouseY;\n//                    lastMouseX = 0;\n//                    lastMouseY = 0;\n//                }\n//\n//                mouseLockX += e.movementX;\n//                mouseLockY += e.movementY;\n//\n//                if (!stage.mouseLock) {\n//                    stage.mouseLock = true;\n//                    lastMouseX = stage.mouseX - stage.stageWidth/2;\n//                    lastMouseY = stage.mouseY - stage.stageHeight/2;\n//                } else if (!mouseLocked) {\n//                    mouseLocked = true;\n//                }\n//\n//                //ensure bounds for tiltAngle are not eceeded\n//                if (mouseLockY > cameraController.maxTiltAngle/0.3)\n//                    mouseLockY = cameraController.maxTiltAngle/0.3;\n//                else if (mouseLockY < cameraController.minTiltAngle/0.3)\n//                    mouseLockY = cameraController.minTiltAngle/0.3;\n//            }\n\n//            if (stage.mouseLock) {\n//                cameraController.panAngle = 0.3*mouseLockX;\n//                cameraController.tiltAngle = 0.3*mouseLockY;\n//            } else if (move) {\n//                cameraController.panAngle = 0.3*(stage.mouseX - lastMouseX) + lastPanAngle;\n//                cameraController.tiltAngle = 0.3*(stage.mouseY - lastMouseY) + lastTiltAngle;\n//            }\n\n\t\tif (this.move) {\n\t\t\tthis.cameraController.panAngle = 0.3*(event.clientX - this.lastMouseX) + this.lastPanAngle;\n\t\t\tthis.cameraController.tiltAngle = 0.3*(event.clientY - this.lastMouseY) + this.lastTiltAngle;\n\t\t}\n\t}\n\n\t/**\n\t * Mouse wheel listener for navigation\n\t */\n\tprivate onMouseWheel(event:MouseWheelEvent)\n\t{\n\t\tthis.cameraController.distance -= event.wheelDelta;\n\n\t\tif (this.cameraController.distance < 400)\n\t\t\tthis.cameraController.distance = 400;\n\t\telse if (this.cameraController.distance > 10000)\n\t\t\tthis.cameraController.distance = 10000;\n\t}\n\n\t/**\n\t * Key down listener for fullscreen\n\t */\n//        private onKeyDown(event:KeyboardEvent):void\n//        {\n//            switch (event.keyCode)\n//            {\n//                case Keyboard.SPACE:\n//                    if (stage.displayState == StageDisplayState.FULL_SCREEN) {\n//                        stage.displayState = StageDisplayState.NORMAL;\n//                    } else {\n//                        stage.displayState = StageDisplayState.FULL_SCREEN;\n//\n//                        mouseLocked = false;\n//                        mouseLockX = cameraController.panAngle/0.3;\n//                        mouseLockY = cameraController.tiltAngle/0.3;\n//                    }\n//                    break;\n//            }\n//        }\n//\n\n\t/**\n\t * window listener for resize events\n\t */\n\tprivate onResize(event:UIEvent = null):void\n\t{\n\t\tthis.view.y         = 0;\n\t\tthis.view.x         = 0;\n\t\tthis.view.width     = window.innerWidth;\n\t\tthis.view.height    = window.innerHeight;\n\t}\n}\n\nclass FlareObject\n{\n\tprivate flareSize:number = 14.4;\n\n\tpublic billboard:Billboard;\n\n\tpublic size:number;\n\n\tpublic position:number;\n\n\tpublic opacity:number;\n\n\t/**\n\t * Constructor\n\t */\n\tconstructor(bitmapData:BitmapData, size:number, position:number, opacity:number, scene:Scene)\n\t{\n\t\tvar bd:BitmapData = new BitmapData(bitmapData.width, bitmapData.height, true, 0xFFFFFFFF);\n\t\tbd.copyChannel(bitmapData, bitmapData.rect, new Point(), BitmapDataChannel.RED, BitmapDataChannel.ALPHA);\n\n\t\tvar billboardMaterial:MethodMaterial = new MethodMaterial(new BitmapTexture(bd));\n\t\tbillboardMaterial.alpha = opacity/100;\n\t\tbillboardMaterial.alphaBlending = true;\n\t\t//billboardMaterial.blendMode = BlendMode.LAYER;\n\n\t\tthis.billboard = new Billboard(billboardMaterial);\n\t\tthis.billboard.width = size*this.flareSize;\n\t\tthis.billboard.height = size*this.flareSize;\n\t\tthis.billboard.pivot = new Vector3D(size*this.flareSize/2, size*this.flareSize/2, 0);\n\t\tthis.billboard.orientationMode = OrientationMode.CAMERA_PLANE;\n\t\tthis.billboard.alignmentMode = AlignmentMode.PIVOT_POINT;\n\t\tthis.billboard.visible = false;\n\t\tthis.size = size;\n\t\tthis.position = position;\n\t\tthis.opacity = opacity;\n\n\t\tscene.addChild(this.billboard)\n\t}\n}\n\nwindow.onload = function ()\n{\n\tnew Intermediate_Globe();\n}"
  ],
  "sourceRoot": ""
}