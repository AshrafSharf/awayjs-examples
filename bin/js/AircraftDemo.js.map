{"version":3,"sources":["webpack:///./src/AircraftDemo.ts"],"names":[],"mappings":"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","file":"AircraftDemo.js","sourcesContent":["import BitmapImage2D\t\t\t\tfrom \"awayjs-core/lib/image/BitmapImage2D\";\r\nimport BitmapImageCube\t\t\t\tfrom \"awayjs-core/lib/image/BitmapImageCube\";\r\nimport Sampler2D\t\t\t\t\tfrom \"awayjs-core/lib/image/Sampler2D\";\r\nimport LoaderEvent\t\t\t\t\tfrom \"awayjs-core/lib/events/LoaderEvent\";\r\nimport Matrix\t\t\t\t       \tfrom \"awayjs-core/lib/geom/Matrix\";\r\nimport Vector3D\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\nimport AssetLibrary\t\t\t\t\tfrom \"awayjs-core/lib/library/AssetLibrary\";\r\nimport Loader\t\t\t        \tfrom \"awayjs-core/lib/library/Loader\";\r\nimport IAsset\t\t\t\t\t\tfrom \"awayjs-core/lib/library/IAsset\";\r\nimport URLRequest\t\t\t\t\tfrom \"awayjs-core/lib/net/URLRequest\";\r\nimport Debug                \t\tfrom \"awayjs-core/lib/utils/Debug\";\r\nimport RequestAnimationFrame\t\tfrom \"awayjs-core/lib/utils/RequestAnimationFrame\";\r\n\r\nimport DisplayObjectContainer\t\tfrom \"awayjs-display/lib/display/DisplayObjectContainer\";\r\nimport View\t\t\t\t\t\t\tfrom \"awayjs-display/lib/View\";\r\nimport DirectionalLight\t\t\t\tfrom \"awayjs-display/lib/display/DirectionalLight\";\r\nimport Sprite\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Sprite\";\r\nimport Skybox\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Skybox\";\r\nimport StaticLightPicker\t\t\tfrom \"awayjs-display/lib/materials/lightpickers/StaticLightPicker\";\r\nimport PrimitivePlanePrefab\t\t\tfrom \"awayjs-display/lib/prefabs/PrimitivePlanePrefab\";\r\nimport SingleCubeTexture\t\t\tfrom \"awayjs-display/lib/textures/SingleCubeTexture\";\r\nimport Single2DTexture\t\t\t\tfrom \"awayjs-display/lib/textures/Single2DTexture\";\r\nimport ElementsType                 from \"awayjs-display/lib/graphics/ElementsType\";\r\nimport Style                        from \"awayjs-display/lib/base/Style\";\r\n\r\nimport DefaultRenderer\t\t\t\tfrom \"awayjs-renderergl/lib/DefaultRenderer\";\r\n\r\nimport MethodMaterial\t\t\t\tfrom \"awayjs-methodmaterials/lib/MethodMaterial\";\r\nimport EffectEnvMapMethod   \t\tfrom \"awayjs-methodmaterials/lib/methods/EffectEnvMapMethod\";\r\nimport NormalSimpleWaterMethod\t\tfrom \"awayjs-methodmaterials/lib/methods/NormalSimpleWaterMethod\";\r\nimport SpecularFresnelMethod\t\tfrom \"awayjs-methodmaterials/lib/methods/SpecularFresnelMethod\";\r\n\r\nimport OBJParser\t\t\t\t\tfrom \"awayjs-parsers/lib/OBJParser\";\r\n\r\nclass AircraftDemo\r\n{\r\n    //{ state\r\n    private _maxStates:number = 2;\r\n    private _cameraIncrement:number = 0;\r\n    private _rollIncrement:number = 0;\r\n    private _loopIncrement:number = 0;\r\n    private _state:number = 0;\r\n    private _appTime:number = 0;\r\n    //}\r\n    \r\n    private _lightPicker:StaticLightPicker;\r\n    private _view:View;\r\n    private _timer:RequestAnimationFrame;\r\n    \r\n    //{ sea\r\n    private _seaGeom:PrimitivePlanePrefab;\r\n    private _seaSprite:Sprite;\r\n    private _seaNormalImage:BitmapImage2D;\r\n    private _seaInitialized:boolean = false;\r\n    private _seaMaterial:MethodMaterial;\r\n    //}\r\n    \r\n    //{ f14\r\n    private _f14Geom:DisplayObjectContainer;\r\n    private _f14Initialized:boolean = false;\r\n    //}\r\n    \r\n    //{ skybox\r\n    private _waterMethod:NormalSimpleWaterMethod;\r\n    private _skyboxImageCube:BitmapImageCube;\r\n    private _skyboxInitialized:boolean = false;\r\n    //}\r\n    \r\n    constructor()\r\n    {\r\n        Debug.LOG_PI_ERRORS = false;\r\n        Debug.THROW_ERRORS = false;\r\n        \r\n        this.initView();\r\n        this.initLights();\r\n        this.initAnimation();\r\n        this.initParsers();\r\n        this.loadAssets();\r\n        \r\n        window.onresize = (event:UIEvent) => this.onResize(event);\r\n    }\r\n    \r\n    private loadAssets()\r\n    {\r\n        this.loadAsset('assets/sea_normals.jpg');\r\n        this.loadAsset('assets/f14/f14d.obj');\r\n        this.loadAsset('assets/skybox/CubeTextureTest.cube');\r\n    }\r\n    \r\n    private loadAsset(path:string)\r\n    {\r\n        var session:Loader = AssetLibrary.getLoader();\r\n        session.addEventListener(LoaderEvent.LOAD_COMPLETE, (event:LoaderEvent) => this.onResourceComplete(event));\r\n        session.load(new URLRequest(path));\r\n    }\r\n    \r\n    private initParsers()\r\n    {\r\n        AssetLibrary.enableParser(OBJParser);\r\n    }\r\n    \r\n    private initAnimation()\r\n    {\r\n        this._timer = new RequestAnimationFrame( this.render, this );\r\n    }\r\n\r\n    private initView()\r\n    {\r\n        this._view = new View(new DefaultRenderer());\r\n        this._view.camera.z\t= -500;\r\n        this._view.camera.y\t= 250;\r\n        this._view.camera.rotationX\t= 20;\r\n        this._view.camera.projection.near = 0.5;\r\n        this._view.camera.projection.far = 14000;\r\n        this._view.backgroundColor = 0x2c2c32;\r\n\r\n        this.onResize();\r\n    }\r\n    \r\n    private initializeScene()\r\n    {\r\n        if(this._skyboxImageCube && this._f14Geom && this._seaNormalImage) {\r\n            this.initF14();\r\n            this.initSea();\r\n            this._timer.start();\r\n        }\r\n    }\r\n    \r\n    private initLights()\r\n    {\r\n        var light:DirectionalLight = new DirectionalLight();\r\n        light.color\t= 0x974523;\r\n        light.direction\t= new Vector3D(-300, -300, -5000);\r\n        light.ambient = 1;\r\n        light.ambientColor = 0x7196ac;\r\n        light.diffuse = 1.2;\r\n        light.specular = 1.1;\r\n        this._view.scene.addChild(light);\r\n        \r\n        this._lightPicker = new StaticLightPicker([light]);\r\n    }\r\n    \r\n    private initF14()\r\n    {\r\n        this._f14Initialized = true;\r\n        \r\n        var f14Material: MethodMaterial = new MethodMaterial(this._seaNormalImage); // will be the cubemap\r\n        f14Material.style.sampler = new Sampler2D(true, true, false);\r\n        f14Material.lightPicker = this._lightPicker;\r\n        \r\n        this._view.scene.addChild(this._f14Geom);\r\n        this._f14Geom.transform.scaleTo(20, 20, 20);\r\n        this._f14Geom.rotationX = 90;\r\n        this._f14Geom.y = 200;\r\n        this._view.camera.lookAt(this._f14Geom.transform.position);\r\n        \r\n        document.onmousedown = (event:MouseEvent) => this.onMouseDown(event);\r\n    }\r\n\r\n    private initSea()\r\n    {\r\n        this._seaMaterial = new MethodMaterial(this._seaNormalImage); // will be the cubemap\r\n        this._seaMaterial.style.sampler = new Sampler2D(true, true, false)\r\n        this._waterMethod = new NormalSimpleWaterMethod(new Single2DTexture(this._seaNormalImage), new Single2DTexture(this._seaNormalImage));\r\n        var fresnelMethod:SpecularFresnelMethod  = new SpecularFresnelMethod();\r\n        fresnelMethod.normalReflectance = .3;\r\n        fresnelMethod.gloss = 10;\r\n        fresnelMethod.strength = 1;\r\n        \r\n        this._seaMaterial.alphaBlending = true;\r\n        this._seaMaterial.lightPicker = this._lightPicker;\r\n        this._seaMaterial.style.sampler = new Sampler2D(true);\r\n        this._seaMaterial.animateUVs = true;\r\n        this._seaMaterial.normalMethod = this._waterMethod ;\r\n        this._seaMaterial.addEffectMethod(new EffectEnvMapMethod(new SingleCubeTexture(this._skyboxImageCube)));\r\n        this._seaMaterial.specularMethod = fresnelMethod;\r\n        \r\n        this._seaGeom = new PrimitivePlanePrefab(this._seaMaterial, ElementsType.TRIANGLE, 50000, 50000, 1, 1, true, false );\r\n        this._seaSprite = <Sprite> this._seaGeom.getNewObject();\r\n        this._seaSprite.graphics.scaleUV( 100, 100 );\r\n        this._seaSprite.style = new Style();\r\n        this._seaSprite.style.uvMatrix = new Matrix();\r\n        this._view.scene.addChild( new Skybox(this._skyboxImageCube));\r\n        this._view.scene.addChild( this._seaSprite );\r\n    }\r\n    \r\n    public onResourceComplete(event:LoaderEvent)\r\n    {\r\n        var loader:Loader = event.target;\r\n        var numAssets:number = loader.baseDependency.assets.length;\r\n        var i:number = 0;\r\n        \r\n        switch (event.url) {\r\n            case \"assets/sea_normals.jpg\":\r\n                this._seaNormalImage = <BitmapImage2D> loader.baseDependency.assets[0];\r\n                break;\r\n            case 'assets/f14/f14d.obj':\r\n                this._f14Geom = new DisplayObjectContainer();\r\n                for (i = 0; i < numAssets; ++i) {\r\n                    var asset:IAsset = loader.baseDependency.assets[i];\r\n                    switch (asset.assetType) {\r\n                        case Sprite.assetType:\r\n                            var sprite:Sprite = <Sprite> asset;\r\n                            this._f14Geom.addChild(sprite);\r\n                            break;\r\n                    }\r\n                }\r\n                break;\r\n            case 'assets/skybox/CubeTextureTest.cube':\r\n                this._skyboxImageCube = <BitmapImageCube> loader.baseDependency.assets[0];\r\n                break;\r\n        }\r\n        \r\n        this.initializeScene();\r\n    }\r\n    \r\n    private render(dt:number) //animate based on dt for firefox\r\n    {\r\n        if (this._f14Geom) {\r\n            this._rollIncrement += 0.02;\r\n            \r\n            switch (this._state) {\r\n                case 0 :\r\n                    this._f14Geom.rotationZ = Math.sin(this._rollIncrement)*25;\r\n                    break;\r\n                case 1 :\r\n                    this._loopIncrement += 0.05;\r\n                    this._f14Geom.z += Math.cos(this._loopIncrement)*20;\r\n                    this._f14Geom.y += Math.sin(this._loopIncrement)*20;\r\n                    this._f14Geom.rotationX += -1*((Math.PI/180)*Math.atan2(this._f14Geom.z, this._f14Geom.y));//* 20;\r\n                    this._f14Geom.rotationZ = Math.sin(this._rollIncrement)*25;\r\n                    \r\n                    if (this._loopIncrement > (Math.PI*2)) {\r\n                        this._loopIncrement = 0;\r\n                        this._state = 0;\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n        \r\n        if (this._f14Geom) {\r\n            this._view.camera.lookAt(this._f14Geom.transform.position);\r\n        }\r\n        \r\n        if (this._view.camera) {\r\n            this._cameraIncrement += 0.01;\r\n            this._view.camera.x = Math.cos(this._cameraIncrement)*400;\r\n            this._view.camera.z = Math.sin(this._cameraIncrement)*400;\r\n        }\r\n        \r\n        if ( this._f14Geom ) {\r\n            this._view.camera.lookAt(this._f14Geom.transform.position);\r\n        }\r\n        \r\n        if (this._seaMaterial) {\r\n            this._seaSprite.style.uvMatrix.ty -= 0.04;\r\n            \r\n            /*\r\n             this.waterMethod.water1OffsetX += .001;\r\n             this.waterMethod.water1OffsetY += .1;\r\n             this.waterMethod.water2OffsetX += .0007;\r\n             this.waterMethod.water2OffsetY += .6;\r\n             //*/\r\n        }\r\n        \r\n        this._appTime += dt;\r\n        this._view.render();\r\n    }\r\n    \r\n    public onResize(event:UIEvent = null)\r\n    {\r\n        this._view.y = 0;\r\n        this._view.x = 0;\r\n        this._view.width = window.innerWidth;\r\n        this._view.height = window.innerHeight;\r\n    }\r\n    \r\n    private onMouseDown(event:MouseEvent)\r\n    {\r\n        this._state++;\r\n        \r\n        if (this._state >= this._maxStates)\r\n            this._state = 0;\r\n    }\r\n}\r\n\r\nwindow.onload = function ()\r\n{\r\n    new AircraftDemo();\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/AircraftDemo.ts\n **/"],"sourceRoot":""}