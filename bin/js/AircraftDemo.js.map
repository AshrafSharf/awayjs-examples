{
  "version": 3,
  "sources": [
    "node_modules/browserify/node_modules/browser-pack/_prelude.js",
    "src/AircraftDemo.ts"
  ],
  "names": [],
  "mappings": "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",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "import BitmapImage2D\t\t\t\t= require(\"awayjs-core/lib/image/BitmapImage2D\");\nimport BitmapImageCube\t\t\t\t= require(\"awayjs-core/lib/image/BitmapImageCube\");\nimport Sampler2D\t\t\t\t\t= require(\"awayjs-core/lib/image/Sampler2D\");\nimport AssetEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\nimport LoaderEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/LoaderEvent\");\nimport Matrix\t\t\t\t       \t= require(\"awayjs-core/lib/geom/Matrix\");\nimport Vector3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\nimport AssetLibrary\t\t\t\t\t= require(\"awayjs-core/lib/library/AssetLibrary\");\nimport Loader\t\t\t        \t= require(\"awayjs-core/lib/library/Loader\");\nimport LoaderContext\t\t\t    = require(\"awayjs-core/lib/library/LoaderContext\");\nimport IAsset\t\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\nimport URLRequest\t\t\t\t\t= require(\"awayjs-core/lib/net/URLRequest\");\nimport Debug                \t\t= require(\"awayjs-core/lib/utils/Debug\");\nimport RequestAnimationFrame\t\t= require(\"awayjs-core/lib/utils/RequestAnimationFrame\");\n\nimport DisplayObjectContainer\t\t= require(\"awayjs-display/lib/containers/DisplayObjectContainer\");\nimport View\t\t\t\t\t\t\t= require(\"awayjs-display/lib/containers/View\");\nimport HoverController\t\t\t\t= require(\"awayjs-display/lib/controllers/HoverController\");\nimport DirectionalLight\t\t\t\t= require(\"awayjs-display/lib/entities/DirectionalLight\");\nimport Mesh\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Mesh\");\nimport Skybox\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Skybox\");\nimport MaterialBase\t\t\t\t\t= require(\"awayjs-display/lib/materials/MaterialBase\");\nimport StaticLightPicker\t\t\t= require(\"awayjs-display/lib/materials/lightpickers/StaticLightPicker\");\nimport PrimitivePlanePrefab\t\t\t= require(\"awayjs-display/lib/prefabs/PrimitivePlanePrefab\");\nimport SingleCubeTexture\t\t\t= require(\"awayjs-display/lib/textures/SingleCubeTexture\");\nimport Single2DTexture\t\t\t\t= require(\"awayjs-display/lib/textures/Single2DTexture\");\n\nimport DefaultRenderer\t\t\t\t= require(\"awayjs-renderergl/lib/DefaultRenderer\");\n\nimport MethodMaterial\t\t\t\t= require(\"awayjs-methodmaterials/lib/MethodMaterial\");\nimport EffectEnvMapMethod   \t\t= require(\"awayjs-methodmaterials/lib/methods/EffectEnvMapMethod\");\nimport NormalSimpleWaterMethod\t\t= require(\"awayjs-methodmaterials/lib/methods/NormalSimpleWaterMethod\");\nimport SpecularFresnelMethod\t\t= require(\"awayjs-methodmaterials/lib/methods/SpecularFresnelMethod\");\n\nimport AWDParser\t\t\t\t\t= require(\"awayjs-parsers/lib/AWDParser\");\nimport OBJParser\t\t\t\t\t= require(\"awayjs-parsers/lib/OBJParser\");\nimport ElementsType = require(\"awayjs-display/lib/graphics/ElementsType\");\n\nclass AircraftDemo\n{\n    //{ state\n    private _maxStates:number = 2;\n    private _cameraIncrement:number = 0;\n    private _rollIncrement:number = 0;\n    private _loopIncrement:number = 0;\n    private _state:number = 0;\n    private _appTime:number = 0;\n    //}\n    \n    private _lightPicker:StaticLightPicker;\n    private _view:View;\n    private _timer:RequestAnimationFrame;\n    \n    //{ sea\n    private _seaGeom:PrimitivePlanePrefab;\n    private _seaMesh:Mesh;\n    private _seaNormalImage:BitmapImage2D;\n    private _seaInitialized:boolean = false;\n    private _seaMaterial:MethodMaterial;\n    //}\n    \n    //{ f14\n    private _f14Geom:DisplayObjectContainer;\n    private _f14Initialized:boolean = false;\n    //}\n    \n    //{ skybox\n    private _waterMethod:NormalSimpleWaterMethod;\n    private _skyboxImageCube:BitmapImageCube;\n    private _skyboxInitialized:boolean = false;\n    //}\n    \n    constructor()\n    {\n        Debug.LOG_PI_ERRORS = false;\n        Debug.THROW_ERRORS = false;\n        \n        this.initView();\n        this.initLights();\n        this.initAnimation();\n        this.initParsers();\n        this.loadAssets();\n        \n        window.onresize = (event:UIEvent) => this.onResize(event);\n    }\n    \n    private loadAssets()\n    {\n        this.loadAsset('assets/sea_normals.jpg');\n        this.loadAsset('assets/f14/f14d.obj');\n        this.loadAsset('assets/skybox/CubeTextureTest.cube');\n    }\n    \n    private loadAsset(path:string)\n    {\n        var session:Loader = AssetLibrary.getLoader();\n        session.addEventListener(LoaderEvent.LOAD_COMPLETE, (event:LoaderEvent) => this.onResourceComplete(event));\n        session.load(new URLRequest(path));\n    }\n    \n    private initParsers()\n    {\n        AssetLibrary.enableParser(OBJParser);\n    }\n    \n    private initAnimation()\n    {\n        this._timer = new RequestAnimationFrame( this.render, this );\n    }\n\n    private initView()\n    {\n        this._view = new View(new DefaultRenderer());\n        this._view.camera.z\t= -500;\n        this._view.camera.y\t= 250;\n        this._view.camera.rotationX\t= 20;\n        this._view.camera.projection.near = 0.5;\n        this._view.camera.projection.far = 14000;\n        this._view.backgroundColor = 0x2c2c32;\n\n        this.onResize();\n    }\n    \n    private initializeScene()\n    {\n        if(this._skyboxImageCube && this._f14Geom && this._seaNormalImage) {\n            this.initF14();\n            this.initSea();\n            this._timer.start();\n        }\n    }\n    \n    private initLights()\n    {\n        var light:DirectionalLight = new DirectionalLight();\n        light.color\t= 0x974523;\n        light.direction\t= new Vector3D(-300, -300, -5000);\n        light.ambient = 1;\n        light.ambientColor = 0x7196ac;\n        light.diffuse = 1.2;\n        light.specular = 1.1;\n        this._view.scene.addChild(light);\n        \n        this._lightPicker = new StaticLightPicker([light]);\n    }\n    \n    private initF14()\n    {\n        this._f14Initialized = true;\n        \n        var f14Material: MethodMaterial = new MethodMaterial(this._seaNormalImage); // will be the cubemap\n        f14Material.style.sampler = new Sampler2D(true, true, false);\n        f14Material.lightPicker = this._lightPicker;\n        \n        this._view.scene.addChild(this._f14Geom);\n        this._f14Geom.transform.scaleTo(20, 20, 20);\n        this._f14Geom.rotationX = 90;\n        this._f14Geom.y = 200;\n        this._view.camera.lookAt(this._f14Geom.transform.position);\n        \n        document.onmousedown = (event:MouseEvent) => this.onMouseDown(event);\n    }\n\n    private initSea()\n    {\n        this._seaMaterial = new MethodMaterial(this._seaNormalImage); // will be the cubemap\n        this._seaMaterial.style.sampler = new Sampler2D(true, true, false)\n        this._waterMethod = new NormalSimpleWaterMethod(new Single2DTexture(this._seaNormalImage), new Single2DTexture(this._seaNormalImage));\n        var fresnelMethod:SpecularFresnelMethod  = new SpecularFresnelMethod();\n        fresnelMethod.normalReflectance = .3;\n        fresnelMethod.gloss = 10;\n        fresnelMethod.strength = 1;\n        \n        this._seaMaterial.alphaBlending = true;\n        this._seaMaterial.lightPicker = this._lightPicker;\n        this._seaMaterial.style.sampler = new Sampler2D(true);\n        this._seaMaterial.animateUVs = true;\n        this._seaMaterial.normalMethod = this._waterMethod ;\n        this._seaMaterial.addEffectMethod(new EffectEnvMapMethod(new SingleCubeTexture(this._skyboxImageCube)));\n        this._seaMaterial.specularMethod = fresnelMethod;\n        \n        this._seaGeom = new PrimitivePlanePrefab(this._seaMaterial, ElementsType.TRIANGLE, 50000, 50000, 1, 1, true, false );\n        this._seaMesh = <Mesh> this._seaGeom.getNewObject();\n        this._seaMesh.graphics.scaleUV( 100, 100 );\n        this._seaMesh.uvTransform = new Matrix();\n        this._view.scene.addChild( new Skybox(this._skyboxImageCube));\n        this._view.scene.addChild( this._seaMesh );\n    }\n    \n    public onResourceComplete(event:LoaderEvent)\n    {\n        var loader:Loader = event.target;\n        var numAssets:number = loader.baseDependency.assets.length;\n        var i:number = 0;\n        \n        switch (event.url) {\n            case \"assets/sea_normals.jpg\":\n                this._seaNormalImage = <BitmapImage2D> loader.baseDependency.assets[0];\n                break;\n            case 'assets/f14/f14d.obj':\n                this._f14Geom = new DisplayObjectContainer();\n                for (i = 0; i < numAssets; ++i) {\n                    var asset:IAsset = loader.baseDependency.assets[i];\n                    switch (asset.assetType) {\n                        case Mesh.assetType:\n                            var mesh:Mesh = <Mesh> asset;\n                            this._f14Geom.addChild(mesh);\n                            break;\n                    }\n                }\n                break;\n            case 'assets/skybox/CubeTextureTest.cube':\n                this._skyboxImageCube = <BitmapImageCube> loader.baseDependency.assets[0];\n                break;\n        }\n        \n        this.initializeScene();\n    }\n    \n    private render(dt:number) //animate based on dt for firefox\n    {\n        if (this._f14Geom) {\n            this._rollIncrement += 0.02;\n            \n            switch (this._state) {\n                case 0 :\n                    this._f14Geom.rotationZ = Math.sin(this._rollIncrement)*25;\n                    break;\n                case 1 :\n                    this._loopIncrement += 0.05;\n                    this._f14Geom.z += Math.cos(this._loopIncrement)*20;\n                    this._f14Geom.y += Math.sin(this._loopIncrement)*20;\n                    this._f14Geom.rotationX += -1*((Math.PI/180)*Math.atan2(this._f14Geom.z, this._f14Geom.y));//* 20;\n                    this._f14Geom.rotationZ = Math.sin(this._rollIncrement)*25;\n                    \n                    if (this._loopIncrement > (Math.PI*2)) {\n                        this._loopIncrement = 0;\n                        this._state = 0;\n                    }\n                    break;\n            }\n        }\n        \n        if (this._f14Geom) {\n            this._view.camera.lookAt(this._f14Geom.transform.position);\n        }\n        \n        if (this._view.camera) {\n            this._cameraIncrement += 0.01;\n            this._view.camera.x = Math.cos(this._cameraIncrement)*400;\n            this._view.camera.z = Math.sin(this._cameraIncrement)*400;\n        }\n        \n        if ( this._f14Geom ) {\n            this._view.camera.lookAt(this._f14Geom.transform.position);\n        }\n        \n        if (this._seaMaterial) {\n            this._seaMesh.uvTransform.ty -= 0.04;\n            \n            /*\n             this.waterMethod.water1OffsetX += .001;\n             this.waterMethod.water1OffsetY += .1;\n             this.waterMethod.water2OffsetX += .0007;\n             this.waterMethod.water2OffsetY += .6;\n             //*/\n        }\n        \n        this._appTime += dt;\n        this._view.render();\n    }\n    \n    public onResize(event:UIEvent = null)\n    {\n        this._view.y = 0;\n        this._view.x = 0;\n        this._view.width = window.innerWidth;\n        this._view.height = window.innerHeight;\n    }\n    \n    private onMouseDown(event:MouseEvent)\n    {\n        this._state++;\n        \n        if (this._state >= this._maxStates)\n            this._state = 0;\n    }\n}\n\nwindow.onload = function ()\n{\n    new AircraftDemo();\n}"
  ]
}