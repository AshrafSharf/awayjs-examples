{
  "version": 3,
  "sources": [
    "node_modules/browserify/node_modules/browser-pack/_prelude.js",
    "src/AircraftDemo.ts",
    "AircraftDemo.js"
  ],
  "names": [
    "e",
    "t",
    "n",
    "r",
    "s",
    "o",
    "u",
    "a",
    "require",
    "i",
    "f",
    "Error",
    "code",
    "l",
    "exports",
    "call",
    "length",
    "./src/AircraftDemo.ts",
    "module",
    "LoaderEvent",
    "UVTransform",
    "Vector3D",
    "AssetLibrary",
    "URLRequest",
    "Debug",
    "RequestAnimationFrame",
    "DisplayObjectContainer",
    "View",
    "DirectionalLight",
    "Mesh",
    "Skybox",
    "StaticLightPicker",
    "PrimitivePlanePrefab",
    "SingleCubeTexture",
    "Single2DTexture",
    "DefaultRenderer",
    "MethodMaterial",
    "EffectEnvMapMethod",
    "NormalSimpleWaterMethod",
    "SpecularFresnelMethod",
    "OBJParser",
    "AircraftDemo",
    "_this",
    "this",
    "_maxStates",
    "_cameraIncrement",
    "_rollIncrement",
    "_loopIncrement",
    "_state",
    "_appTime",
    "_seaInitialized",
    "_f14Initialized",
    "_skyboxInitialized",
    "LOG_PI_ERRORS",
    "THROW_ERRORS",
    "initView",
    "initLights",
    "initAnimation",
    "initParsers",
    "loadAssets",
    "window",
    "onresize",
    "event",
    "onResize",
    "prototype",
    "loadAsset",
    "path",
    "session",
    "getLoaderSession",
    "addEventListener",
    "RESOURCE_COMPLETE",
    "onResourceComplete",
    "load",
    "enableParser",
    "_timer",
    "render",
    "_view",
    "camera",
    "z",
    "y",
    "rotationX",
    "projection",
    "near",
    "far",
    "backgroundColor",
    "initializeScene",
    "_skyboxCubeTexture",
    "_f14Geom",
    "_seaNormalTexture",
    "initF14",
    "initSea",
    "start",
    "light",
    "color",
    "direction",
    "ambient",
    "ambientColor",
    "diffuse",
    "specular",
    "scene",
    "addChild",
    "_lightPicker",
    "f14Material",
    "lightPicker",
    "transform",
    "scale",
    "lookAt",
    "position",
    "document",
    "onmousedown",
    "onMouseDown",
    "_seaMaterial",
    "_waterMethod",
    "sampler2D",
    "fresnelMethod",
    "normalReflectance",
    "alphaBlending",
    "repeat",
    "animateUVs",
    "normalMethod",
    "addEffectMethod",
    "specularMethod",
    "gloss",
    "_seaGeom",
    "_seaMesh",
    "getNewObject",
    "geometry",
    "scaleUV",
    "subMeshes",
    "uvTransform",
    "material",
    "loader",
    "target",
    "numAssets",
    "baseDependency",
    "assets",
    "url",
    "asset",
    "assetType",
    "mesh",
    "dt",
    "rotationZ",
    "Math",
    "sin",
    "cos",
    "PI",
    "atan2",
    "x",
    "offsetV",
    "width",
    "innerWidth",
    "height",
    "innerHeight",
    "onload",
    "awayjs-core/lib/events/LoaderEvent",
    "undefined",
    "awayjs-core/lib/geom/UVTransform",
    "awayjs-core/lib/geom/Vector3D",
    "awayjs-core/lib/library/AssetLibrary",
    "awayjs-core/lib/net/URLRequest",
    "awayjs-core/lib/utils/Debug",
    "awayjs-core/lib/utils/RequestAnimationFrame",
    "awayjs-display/lib/containers/DisplayObjectContainer",
    "awayjs-display/lib/containers/View",
    "awayjs-display/lib/entities/DirectionalLight",
    "awayjs-display/lib/entities/Mesh",
    "awayjs-display/lib/entities/Skybox",
    "awayjs-display/lib/materials/lightpickers/StaticLightPicker",
    "awayjs-display/lib/prefabs/PrimitivePlanePrefab",
    "awayjs-display/lib/textures/Single2DTexture",
    "awayjs-display/lib/textures/SingleCubeTexture",
    "awayjs-methodmaterials/lib/MethodMaterial",
    "awayjs-methodmaterials/lib/methods/EffectEnvMapMethod",
    "awayjs-methodmaterials/lib/methods/NormalSimpleWaterMethod",
    "awayjs-methodmaterials/lib/methods/SpecularFresnelMethod",
    "awayjs-parsers/lib/OBJParser",
    "awayjs-renderergl/lib/DefaultRenderer"
  ],
  "mappings": "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",
  "file": "AircraftDemo.js",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "import BitmapImage2D\t\t\t\t= require(\"awayjs-core/lib/data/BitmapImage2D\");\nimport BitmapImageCube\t\t\t\t= require(\"awayjs-core/lib/data/BitmapImageCube\");\nimport AssetEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\nimport LoaderEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/LoaderEvent\");\nimport UVTransform\t\t\t\t\t= require(\"awayjs-core/lib/geom/UVTransform\");\nimport Vector3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\nimport AssetLibrary\t\t\t\t\t= require(\"awayjs-core/lib/library/AssetLibrary\");\nimport LoaderSession\t\t\t\t= require(\"awayjs-core/lib/library/LoaderSession\");\nimport LoaderContext\t\t\t    = require(\"awayjs-core/lib/library/LoaderContext\");\nimport IAsset\t\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\nimport URLRequest\t\t\t\t\t= require(\"awayjs-core/lib/net/URLRequest\");\nimport Debug                \t\t= require(\"awayjs-core/lib/utils/Debug\");\nimport RequestAnimationFrame\t\t= require(\"awayjs-core/lib/utils/RequestAnimationFrame\");\n\nimport DisplayObjectContainer\t\t= require(\"awayjs-display/lib/containers/DisplayObjectContainer\");\nimport View\t\t\t\t\t\t\t= require(\"awayjs-display/lib/containers/View\");\nimport HoverController\t\t\t\t= require(\"awayjs-display/lib/controllers/HoverController\");\nimport DirectionalLight\t\t\t\t= require(\"awayjs-display/lib/entities/DirectionalLight\");\nimport Mesh\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Mesh\");\nimport Skybox\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Skybox\");\nimport MaterialBase\t\t\t\t\t= require(\"awayjs-display/lib/materials/MaterialBase\");\nimport StaticLightPicker\t\t\t= require(\"awayjs-display/lib/materials/lightpickers/StaticLightPicker\");\nimport PrimitivePlanePrefab\t\t\t= require(\"awayjs-display/lib/prefabs/PrimitivePlanePrefab\");\nimport SingleCubeTexture\t\t\t= require(\"awayjs-display/lib/textures/SingleCubeTexture\");\nimport Single2DTexture\t\t\t\t= require(\"awayjs-display/lib/textures/Single2DTexture\");\n\nimport DefaultRenderer\t\t\t\t= require(\"awayjs-renderergl/lib/DefaultRenderer\");\n\nimport MethodMaterial\t\t\t\t= require(\"awayjs-methodmaterials/lib/MethodMaterial\");\nimport EffectEnvMapMethod   \t\t= require(\"awayjs-methodmaterials/lib/methods/EffectEnvMapMethod\");\nimport NormalSimpleWaterMethod\t\t= require(\"awayjs-methodmaterials/lib/methods/NormalSimpleWaterMethod\");\nimport SpecularFresnelMethod\t\t= require(\"awayjs-methodmaterials/lib/methods/SpecularFresnelMethod\");\n\nimport AWDParser\t\t\t\t\t= require(\"awayjs-parsers/lib/AWDParser\");\nimport OBJParser\t\t\t\t\t= require(\"awayjs-parsers/lib/OBJParser\");\n\nclass AircraftDemo\n{\n    //{ state\n    private _maxStates:number = 2;\n    private _cameraIncrement:number = 0;\n    private _rollIncrement:number = 0;\n    private _loopIncrement:number = 0;\n    private _state:number = 0;\n    private _appTime:number = 0;\n    //}\n    \n    private _lightPicker:StaticLightPicker;\n    private _view:View;\n    private _timer:RequestAnimationFrame;\n    \n    //{ sea\n    private _seaGeom:PrimitivePlanePrefab;\n    private _seaMesh:Mesh;\n    private _seaNormalTexture:Single2DTexture;\n    private _seaInitialized:boolean = false;\n    private _seaMaterial:MethodMaterial;\n    //}\n    \n    //{ f14\n    private _f14Geom:DisplayObjectContainer;\n    private _f14Initialized:boolean = false;\n    //}\n    \n    //{ skybox\n    private _waterMethod:NormalSimpleWaterMethod;\n    private _skyboxCubeTexture:SingleCubeTexture;\n    private _skyboxInitialized:boolean = false;\n    //}\n    \n    constructor()\n    {\n        Debug.LOG_PI_ERRORS = false;\n        Debug.THROW_ERRORS = false;\n        \n        this.initView();\n        this.initLights();\n        this.initAnimation();\n        this.initParsers();\n        this.loadAssets();\n        \n        window.onresize = (event:UIEvent) => this.onResize(event);\n    }\n    \n    private loadAssets()\n    {\n        this.loadAsset('assets/sea_normals.jpg');\n        this.loadAsset('assets/f14/f14d.obj');\n        this.loadAsset('assets/skybox/CubeTextureTest.cube');\n    }\n    \n    private loadAsset(path:string)\n    {\n        var session:LoaderSession = AssetLibrary.getLoaderSession();\n        session.addEventListener(LoaderEvent.RESOURCE_COMPLETE, (event:LoaderEvent) => this.onResourceComplete(event));\n        session.load(new URLRequest(path));\n    }\n    \n    private initParsers()\n    {\n        AssetLibrary.enableParser(OBJParser);\n    }\n    \n    private initAnimation()\n    {\n        this._timer = new RequestAnimationFrame( this.render, this );\n    }\n\n    private initView()\n    {\n        this._view = new View(new DefaultRenderer());\n        this._view.camera.z\t= -500;\n        this._view.camera.y\t= 250;\n        this._view.camera.rotationX\t= 20;\n        this._view.camera.projection.near = 0.5;\n        this._view.camera.projection.far = 14000;\n        this._view.backgroundColor = 0x2c2c32;\n\n        this.onResize();\n    }\n    \n    private initializeScene()\n    {\n        if(this._skyboxCubeTexture && this._f14Geom && this._seaNormalTexture) {\n            this.initF14();\n            this.initSea();\n            this._timer.start();\n        }\n    }\n    \n    private initLights()\n    {\n        var light:DirectionalLight = new DirectionalLight();\n        light.color\t= 0x974523;\n        light.direction\t= new Vector3D(-300, -300, -5000);\n        light.ambient = 1;\n        light.ambientColor = 0x7196ac;\n        light.diffuse = 1.2;\n        light.specular = 1.1;\n        this._view.scene.addChild(light);\n        \n        this._lightPicker = new StaticLightPicker([light]);\n    }\n    \n    private initF14()\n    {\n        this._f14Initialized = true;\n        \n        var f14Material: MethodMaterial = new MethodMaterial(this._seaNormalTexture, true, true, false); // will be the cubemap\n        f14Material.lightPicker = this._lightPicker;\n        \n        this._view.scene.addChild(this._f14Geom);\n        this._f14Geom.transform.scale = new Vector3D(20, 20, 20);\n        this._f14Geom.rotationX = 90;\n        this._f14Geom.y = 200;\n        this._view.camera.lookAt(this._f14Geom.transform.position);\n        \n        document.onmousedown = (event:MouseEvent) => this.onMouseDown(event);\n    }\n\n    private initSea()\n    {\n        this._seaMaterial = new MethodMaterial(this._seaNormalTexture, true, true, false); // will be the cubemap\n        this._waterMethod = new NormalSimpleWaterMethod(this._seaNormalTexture, new Single2DTexture(this._seaNormalTexture.sampler2D));\n        var fresnelMethod:SpecularFresnelMethod  = new SpecularFresnelMethod();\n        fresnelMethod.normalReflectance = .3;\n        \n        this._seaMaterial.alphaBlending = true;\n        this._seaMaterial.lightPicker = this._lightPicker;\n        this._seaMaterial.repeat = true;\n        this._seaMaterial.animateUVs = true;\n        this._seaMaterial.normalMethod = this._waterMethod ;\n        this._seaMaterial.addEffectMethod(new EffectEnvMapMethod(this._skyboxCubeTexture));\n        this._seaMaterial.specularMethod = fresnelMethod;\n        this._seaMaterial.gloss = 100;\n        this._seaMaterial.specular = 1;\n        \n        this._seaGeom = new PrimitivePlanePrefab( 50000, 50000, 1, 1, true, false );\n        this._seaMesh = <Mesh> this._seaGeom.getNewObject();\n        this._seaGeom.geometry.scaleUV( 100, 100 );\n        this._seaMesh.subMeshes[0].uvTransform = new UVTransform();\n        this._seaMesh.material = this._seaMaterial;\n        this._view.scene.addChild( new Skybox(this._skyboxCubeTexture));\n        this._view.scene.addChild( this._seaMesh );\n    }\n    \n    public onResourceComplete(event:LoaderEvent)\n    {\n        var loader:LoaderSession = <LoaderSession> event.target;\n        var numAssets:number = loader.baseDependency.assets.length;\n        var i:number = 0;\n        \n        switch (event.url) {\n            case \"assets/sea_normals.jpg\":\n                this._seaNormalTexture = new Single2DTexture(<BitmapImage2D> loader.baseDependency.assets[0]);\n                break;\n            case 'assets/f14/f14d.obj':\n                this._f14Geom = new DisplayObjectContainer();\n                for (i = 0; i < numAssets; ++i) {\n                    var asset:IAsset = loader.baseDependency.assets[i];\n                    switch (asset.assetType) {\n                        case Mesh.assetType:\n                            var mesh:Mesh = <Mesh> asset;\n                            this._f14Geom.addChild(mesh);\n                            break;\n                    }\n                }\n                break;\n            case 'assets/skybox/CubeTextureTest.cube':\n                this._skyboxCubeTexture = new SingleCubeTexture(<BitmapImageCube> loader.baseDependency.assets[0]);\n                break;\n        }\n        \n        this.initializeScene();\n    }\n    \n    private render(dt:number) //animate based on dt for firefox\n    {\n        if (this._f14Geom) {\n            this._rollIncrement += 0.02;\n            \n            switch (this._state) {\n                case 0 :\n                    this._f14Geom.rotationZ = Math.sin(this._rollIncrement)*25;\n                    break;\n                case 1 :\n                    this._loopIncrement += 0.05;\n                    this._f14Geom.z += Math.cos(this._loopIncrement)*20;\n                    this._f14Geom.y += Math.sin(this._loopIncrement)*20;\n                    this._f14Geom.rotationX += -1*((Math.PI/180)*Math.atan2(this._f14Geom.z, this._f14Geom.y));//* 20;\n                    this._f14Geom.rotationZ = Math.sin(this._rollIncrement)*25;\n                    \n                    if (this._loopIncrement > (Math.PI*2)) {\n                        this._loopIncrement = 0;\n                        this._state = 0;\n                    }\n                    break;\n            }\n        }\n        \n        if (this._f14Geom) {\n            this._view.camera.lookAt(this._f14Geom.transform.position);\n        }\n        \n        if (this._view.camera) {\n            this._cameraIncrement += 0.01;\n            this._view.camera.x = Math.cos(this._cameraIncrement)*400;\n            this._view.camera.z = Math.sin(this._cameraIncrement)*400;\n        }\n        \n        if ( this._f14Geom ) {\n            this._view.camera.lookAt(this._f14Geom.transform.position);\n        }\n        \n        if (this._seaMaterial) {\n            this._seaMesh.subMeshes[0].uvTransform.offsetV -= 0.04;\n            \n            /*\n             this.waterMethod.water1OffsetX += .001;\n             this.waterMethod.water1OffsetY += .1;\n             this.waterMethod.water2OffsetX += .0007;\n             this.waterMethod.water2OffsetY += .6;\n             //*/\n        }\n        \n        this._appTime += dt;\n        this._view.render();\n    }\n    \n    public onResize(event:UIEvent = null)\n    {\n        this._view.y = 0;\n        this._view.x = 0;\n        this._view.width = window.innerWidth;\n        this._view.height = window.innerHeight;\n    }\n    \n    private onMouseDown(event:MouseEvent)\n    {\n        this._state++;\n        \n        if (this._state >= this._maxStates)\n            this._state = 0;\n    }\n}\n\nwindow.onload = function ()\n{\n    new AircraftDemo();\n}",
    null
  ],
  "sourceRoot": ""
}