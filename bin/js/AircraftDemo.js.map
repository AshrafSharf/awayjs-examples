{
  "version": 3,
  "sources": [
    "node_modules/browserify/node_modules/browser-pack/_prelude.js",
    "src/AircraftDemo.ts"
  ],
  "names": [],
  "mappings": "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",
  "file": "AircraftDemo.js",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "import AssetEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\nimport LoaderEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/LoaderEvent\");\nimport UVTransform\t\t\t\t\t= require(\"awayjs-core/lib/geom/UVTransform\");\nimport Vector3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\nimport AssetLibrary\t\t\t\t\t= require(\"awayjs-core/lib/library/AssetLibrary\");\nimport AssetLoader\t\t\t\t\t= require(\"awayjs-core/lib/library/AssetLoader\");\nimport AssetLoaderContext\t\t\t= require(\"awayjs-core/lib/library/AssetLoaderContext\");\nimport AssetLoaderToken\t\t\t\t= require(\"awayjs-core/lib/library/AssetLoaderToken\");\nimport AssetType\t\t\t\t\t= require(\"awayjs-core/lib/library/AssetType\");\nimport IAsset\t\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\nimport URLRequest\t\t\t\t\t= require(\"awayjs-core/lib/net/URLRequest\");\nimport ImageCubeTexture\t\t\t\t= require(\"awayjs-core/lib/textures/ImageCubeTexture\");\nimport ImageTexture\t\t\t\t\t= require(\"awayjs-core/lib/textures/ImageTexture\");\nimport Debug                \t\t= require(\"awayjs-core/lib/utils/Debug\");\nimport RequestAnimationFrame\t\t= require(\"awayjs-core/lib/utils/RequestAnimationFrame\");\n\nimport DisplayObjectContainer\t\t= require(\"awayjs-display/lib/containers/DisplayObjectContainer\");\nimport View\t\t\t\t\t\t\t= require(\"awayjs-display/lib/containers/View\");\nimport HoverController\t\t\t\t= require(\"awayjs-display/lib/controllers/HoverController\");\nimport DirectionalLight\t\t\t\t= require(\"awayjs-display/lib/entities/DirectionalLight\");\nimport Mesh\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Mesh\");\nimport Skybox\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Skybox\");\nimport StaticLightPicker\t\t\t= require(\"awayjs-display/lib/materials/lightpickers/StaticLightPicker\");\nimport PrimitivePlanePrefab\t\t\t= require(\"awayjs-display/lib/prefabs/PrimitivePlanePrefab\");\n\nimport DefaultRenderer\t\t\t\t= require(\"awayjs-renderergl/lib/DefaultRenderer\");\n\nimport MethodMaterial\t\t\t\t= require(\"awayjs-methodmaterials/lib/MethodMaterial\");\nimport MethodRendererPool\t\t\t= require(\"awayjs-methodmaterials/lib/pool/MethodRendererPool\");\nimport EffectEnvMapMethod   \t\t= require(\"awayjs-methodmaterials/lib/methods/EffectEnvMapMethod\");\nimport NormalSimpleWaterMethod\t\t= require(\"awayjs-methodmaterials/lib/methods/NormalSimpleWaterMethod\");\nimport SpecularFresnelMethod\t\t= require(\"awayjs-methodmaterials/lib/methods/SpecularFresnelMethod\");\n\nimport AWDParser\t\t\t\t\t= require(\"awayjs-parsers/lib/AWDParser\");\nimport OBJParser\t\t\t\t\t= require(\"awayjs-parsers/lib/OBJParser\");\n\nclass AircraftDemo\n{\n    //{ state\n    private _maxStates:number = 2;\n    private _cameraIncrement:number = 0;\n    private _rollIncrement:number = 0;\n    private _loopIncrement:number = 0;\n    private _state:number = 0;\n    private _appTime:number = 0;\n    //}\n    \n    private _lightPicker:StaticLightPicker;\n    private _view:View;\n    private _timer:RequestAnimationFrame;\n    \n    //{ sea\n    private _seaGeom:PrimitivePlanePrefab;\n    private _seaMesh:Mesh;\n    private _seaNormalTexture:ImageTexture;\n    private _seaInitialized:boolean = false;\n    private _seaMaterial:MethodMaterial;\n    //}\n    \n    //{ f14\n    private _f14Geom:DisplayObjectContainer;\n    private _f14Initialized:boolean = false;\n    //}\n    \n    //{ skybox\n    private _waterMethod:NormalSimpleWaterMethod;\n    private _skyboxCubeTexture:ImageCubeTexture;\n    private _skyboxInitialized:boolean = false;\n    //}\n    \n    constructor()\n    {\n        Debug.LOG_PI_ERRORS = false;\n        Debug.THROW_ERRORS = false;\n        \n        this.initView();\n        this.initLights();\n        this.initAnimation();\n        this.initParsers();\n        this.loadAssets();\n        \n        window.onresize = (event:UIEvent) => this.onResize(event);\n    }\n    \n    private loadAssets():void\n    {\n        this.loadAsset('assets/sea_normals.jpg');\n        this.loadAsset('assets/f14/f14d.obj');\n        this.loadAsset('assets/skybox/CubeTextureTest.cube');\n    }\n    \n    private loadAsset(path:string):void\n    {\n        var token:AssetLoaderToken = AssetLibrary.load(new URLRequest(path));\n        token.addEventListener(LoaderEvent.RESOURCE_COMPLETE, (event:LoaderEvent) => this.onResourceComplete(event));\n    }\n    \n    private initParsers():void\n    {\n        AssetLibrary.enableParser(OBJParser);\n    }\n    \n    private initAnimation():void\n    {\n        this._timer = new RequestAnimationFrame( this.render, this );\n    }\n\n    private initView():void\n    {\n        this._view = new View(new DefaultRenderer(MethodRendererPool));\n        this._view.camera.z\t= -500;\n        this._view.camera.y\t= 250;\n        this._view.camera.rotationX\t= 20;\n        this._view.camera.projection.near = 0.5;\n        this._view.camera.projection.far = 14000;\n        this._view.backgroundColor = 0x2c2c32;\n\n        this.onResize();\n    }\n    \n    private initializeScene():void\n    {\n        if(this._skyboxCubeTexture && this._f14Geom && this._seaNormalTexture) {\n            this.initF14();\n            this.initSea();\n            this._timer.start();\n        }\n    }\n    \n    private initLights():void\n    {\n        var light:DirectionalLight = new DirectionalLight();\n        light.color\t= 0x974523;\n        light.direction\t= new Vector3D(-300, -300, -5000);\n        light.ambient = 1;\n        light.ambientColor = 0x7196ac;\n        light.diffuse = 1.2;\n        light.specular = 1.1;\n        this._view.scene.addChild(light);\n        \n        this._lightPicker = new StaticLightPicker([light]);\n    }\n    \n    private initF14():void\n    {\n        this._f14Initialized = true;\n        \n        var f14Material: MethodMaterial = new MethodMaterial(this._seaNormalTexture, true, true, false); // will be the cubemap\n        f14Material.lightPicker = this._lightPicker;\n        \n        this._view.scene.addChild(this._f14Geom);\n        this._f14Geom.transform.scale = new Vector3D(20, 20, 20);\n        this._f14Geom.rotationX = 90;\n        this._f14Geom.y = 200;\n        this._view.camera.lookAt(this._f14Geom.transform.position);\n        \n        document.onmousedown = (event:MouseEvent) => this.onMouseDown(event);\n    }\n\n    private initSea():void\n    {\n        this._seaMaterial = new MethodMaterial(this._seaNormalTexture, true, true, false); // will be the cubemap\n        this._waterMethod = new NormalSimpleWaterMethod(this._seaNormalTexture, this._seaNormalTexture);\n        var fresnelMethod:SpecularFresnelMethod  = new SpecularFresnelMethod();\n        fresnelMethod.normalReflectance = .3;\n        \n        this._seaMaterial.alphaBlending = true;\n        this._seaMaterial.lightPicker = this._lightPicker;\n        this._seaMaterial.repeat = true;\n        this._seaMaterial.animateUVs = true;\n        this._seaMaterial.normalMethod = this._waterMethod ;\n        this._seaMaterial.addEffectMethod(new EffectEnvMapMethod(this._skyboxCubeTexture));\n        this._seaMaterial.specularMethod = fresnelMethod;\n        this._seaMaterial.gloss = 100;\n        this._seaMaterial.specular = 1;\n        \n        this._seaGeom = new PrimitivePlanePrefab( 50000, 50000, 1, 1, true, false );\n        this._seaMesh = <Mesh> this._seaGeom.getNewObject();\n        this._seaGeom.geometry.scaleUV( 100, 100 );\n        this._seaMesh.subMeshes[0].uvTransform = new UVTransform();\n        this._seaMesh.material = this._seaMaterial;\n        this._view.scene.addChild( new Skybox(this._skyboxCubeTexture));\n        this._view.scene.addChild( this._seaMesh );\n    }\n    \n    public onResourceComplete(event:LoaderEvent)\n    {\n        var loader:AssetLoader = <AssetLoader> event.target;\n        var numAssets:number = loader.baseDependency.assets.length;\n        var i:number = 0;\n        \n        switch (event.url) {\n            case \"assets/sea_normals.jpg\":\n                this._seaNormalTexture = <ImageTexture> loader.baseDependency.assets[0];\n                break;\n            case 'assets/f14/f14d.obj':\n                this._f14Geom = new DisplayObjectContainer();\n                for (i = 0; i < numAssets; ++i) {\n                    var asset:IAsset = loader.baseDependency.assets[i];\n                    switch (asset.assetType) {\n                        case AssetType.MESH:\n                            var mesh:Mesh = <Mesh> asset;\n                            this._f14Geom.addChild(mesh);\n                            break;\n                        case AssetType.GEOMETRY:\n                            break;\n                        case AssetType.MATERIAL:\n                            break;\n                    }\n                }\n                break;\n            case 'assets/skybox/CubeTextureTest.cube':\n                this._skyboxCubeTexture = <ImageCubeTexture> loader.baseDependency.assets[0];\n                break;\n        }\n        \n        this.initializeScene();\n    }\n    \n    private render(dt:number) //animate based on dt for firefox\n    {\n        if (this._f14Geom) {\n            this._rollIncrement += 0.02;\n            \n            switch (this._state) {\n                case 0 :\n                    this._f14Geom.rotationZ = Math.sin(this._rollIncrement)*25;\n                    break;\n                case 1 :\n                    this._loopIncrement += 0.05;\n                    this._f14Geom.z += Math.cos(this._loopIncrement)*20;\n                    this._f14Geom.y += Math.sin(this._loopIncrement)*20;\n                    this._f14Geom.rotationX += -1*((Math.PI/180)*Math.atan2(this._f14Geom.z, this._f14Geom.y));//* 20;\n                    this._f14Geom.rotationZ = Math.sin(this._rollIncrement)*25;\n                    \n                    if (this._loopIncrement > (Math.PI*2)) {\n                        this._loopIncrement = 0;\n                        this._state = 0;\n                    }\n                    break;\n            }\n        }\n        \n        if (this._f14Geom) {\n            this._view.camera.lookAt(this._f14Geom.transform.position);\n        }\n        \n        if (this._view.camera) {\n            this._cameraIncrement += 0.01;\n            this._view.camera.x = Math.cos(this._cameraIncrement)*400;\n            this._view.camera.z = Math.sin(this._cameraIncrement)*400;\n        }\n        \n        if ( this._f14Geom ) {\n            this._view.camera.lookAt(this._f14Geom.transform.position);\n        }\n        \n        if (this._seaMaterial) {\n            this._seaMesh.subMeshes[0].uvTransform.offsetV -= 0.04;\n            \n            /*\n             this.waterMethod.water1OffsetX += .001;\n             this.waterMethod.water1OffsetY += .1;\n             this.waterMethod.water2OffsetX += .0007;\n             this.waterMethod.water2OffsetY += .6;\n             //*/\n        }\n        \n        this._appTime += dt;\n        this._view.render();\n    }\n    \n    public onResize(event:UIEvent = null)\n    {\n        this._view.y = 0;\n        this._view.x = 0;\n        this._view.width = window.innerWidth;\n        this._view.height = window.innerHeight;\n    }\n    \n    private onMouseDown(event:MouseEvent)\n    {\n        this._state++;\n        \n        if (this._state >= this._maxStates)\n            this._state = 0;\n    }\n}\n\nwindow.onload = function ()\n{\n    new AircraftDemo();\n}"
  ],
  "sourceRoot": ""
}