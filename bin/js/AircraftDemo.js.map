{
  "version": 3,
  "sources": [
    "node_modules/browserify/node_modules/browser-pack/_prelude.js",
    "src/AircraftDemo.ts",
    "AircraftDemo.js"
  ],
  "names": [
    "e",
    "t",
    "n",
    "r",
    "s",
    "o",
    "u",
    "a",
    "require",
    "i",
    "f",
    "Error",
    "code",
    "l",
    "exports",
    "call",
    "length",
    "./src/AircraftDemo.ts",
    "module",
    "Geometry",
    "LoaderEvent",
    "UVTransform",
    "Vector3D",
    "AssetLibrary",
    "URLRequest",
    "Debug",
    "RequestAnimationFrame",
    "DisplayObjectContainer",
    "View",
    "DirectionalLight",
    "Mesh",
    "Skybox",
    "StaticLightPicker",
    "PrimitivePlanePrefab",
    "SingleCubeTexture",
    "Single2DTexture",
    "DefaultRenderer",
    "MethodMaterial",
    "EffectEnvMapMethod",
    "NormalSimpleWaterMethod",
    "SpecularFresnelMethod",
    "OBJParser",
    "AircraftDemo",
    "_this",
    "this",
    "_maxStates",
    "_cameraIncrement",
    "_rollIncrement",
    "_loopIncrement",
    "_state",
    "_appTime",
    "_seaInitialized",
    "_f14Initialized",
    "_skyboxInitialized",
    "LOG_PI_ERRORS",
    "THROW_ERRORS",
    "initView",
    "initLights",
    "initAnimation",
    "initParsers",
    "loadAssets",
    "window",
    "onresize",
    "event",
    "onResize",
    "prototype",
    "loadAsset",
    "path",
    "token",
    "load",
    "addEventListener",
    "RESOURCE_COMPLETE",
    "onResourceComplete",
    "enableParser",
    "_timer",
    "render",
    "_view",
    "camera",
    "z",
    "y",
    "rotationX",
    "projection",
    "near",
    "far",
    "backgroundColor",
    "initializeScene",
    "_skyboxCubeTexture",
    "_f14Geom",
    "_seaNormalTexture",
    "initF14",
    "initSea",
    "start",
    "light",
    "color",
    "direction",
    "ambient",
    "ambientColor",
    "diffuse",
    "specular",
    "scene",
    "addChild",
    "_lightPicker",
    "f14Material",
    "lightPicker",
    "transform",
    "scale",
    "lookAt",
    "position",
    "document",
    "onmousedown",
    "onMouseDown",
    "_seaMaterial",
    "_waterMethod",
    "sampler2D",
    "fresnelMethod",
    "normalReflectance",
    "alphaBlending",
    "repeat",
    "animateUVs",
    "normalMethod",
    "addEffectMethod",
    "specularMethod",
    "gloss",
    "_seaGeom",
    "_seaMesh",
    "getNewObject",
    "geometry",
    "scaleUV",
    "subMeshes",
    "uvTransform",
    "material",
    "loader",
    "target",
    "numAssets",
    "baseDependency",
    "assets",
    "url",
    "asset",
    "assetType",
    "mesh",
    "dt",
    "rotationZ",
    "Math",
    "sin",
    "cos",
    "PI",
    "atan2",
    "x",
    "offsetV",
    "width",
    "innerWidth",
    "height",
    "innerHeight",
    "onload",
    "awayjs-core/lib/data/Geometry",
    "undefined",
    "awayjs-core/lib/events/LoaderEvent",
    "awayjs-core/lib/geom/UVTransform",
    "awayjs-core/lib/geom/Vector3D",
    "awayjs-core/lib/library/AssetLibrary",
    "awayjs-core/lib/net/URLRequest",
    "awayjs-core/lib/utils/Debug",
    "awayjs-core/lib/utils/RequestAnimationFrame",
    "awayjs-display/lib/containers/DisplayObjectContainer",
    "awayjs-display/lib/containers/View",
    "awayjs-display/lib/entities/DirectionalLight",
    "awayjs-display/lib/entities/Mesh",
    "awayjs-display/lib/entities/Skybox",
    "awayjs-display/lib/materials/lightpickers/StaticLightPicker",
    "awayjs-display/lib/prefabs/PrimitivePlanePrefab",
    "awayjs-display/lib/textures/Single2DTexture",
    "awayjs-display/lib/textures/SingleCubeTexture",
    "awayjs-methodmaterials/lib/MethodMaterial",
    "awayjs-methodmaterials/lib/methods/EffectEnvMapMethod",
    "awayjs-methodmaterials/lib/methods/NormalSimpleWaterMethod",
    "awayjs-methodmaterials/lib/methods/SpecularFresnelMethod",
    "awayjs-parsers/lib/OBJParser",
    "awayjs-renderergl/lib/DefaultRenderer"
  ],
  "mappings": "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",
  "file": "AircraftDemo.js",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "import BitmapImage2D\t\t\t\t= require(\"awayjs-core/lib/data/BitmapImage2D\");\nimport BitmapImageCube\t\t\t\t= require(\"awayjs-core/lib/data/BitmapImageCube\");\nimport Geometry\t\t\t\t\t\t= require(\"awayjs-core/lib/data/Geometry\");\nimport AssetEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/AssetEvent\");\nimport LoaderEvent\t\t\t\t\t= require(\"awayjs-core/lib/events/LoaderEvent\");\nimport UVTransform\t\t\t\t\t= require(\"awayjs-core/lib/geom/UVTransform\");\nimport Vector3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\nimport AssetLibrary\t\t\t\t\t= require(\"awayjs-core/lib/library/AssetLibrary\");\nimport AssetLoader\t\t\t\t\t= require(\"awayjs-core/lib/library/AssetLoader\");\nimport AssetLoaderContext\t\t\t= require(\"awayjs-core/lib/library/AssetLoaderContext\");\nimport AssetLoaderToken\t\t\t\t= require(\"awayjs-core/lib/library/AssetLoaderToken\");\nimport IAsset\t\t\t\t\t\t= require(\"awayjs-core/lib/library/IAsset\");\nimport URLRequest\t\t\t\t\t= require(\"awayjs-core/lib/net/URLRequest\");\nimport Debug                \t\t= require(\"awayjs-core/lib/utils/Debug\");\nimport RequestAnimationFrame\t\t= require(\"awayjs-core/lib/utils/RequestAnimationFrame\");\n\nimport DisplayObjectContainer\t\t= require(\"awayjs-display/lib/containers/DisplayObjectContainer\");\nimport View\t\t\t\t\t\t\t= require(\"awayjs-display/lib/containers/View\");\nimport HoverController\t\t\t\t= require(\"awayjs-display/lib/controllers/HoverController\");\nimport DirectionalLight\t\t\t\t= require(\"awayjs-display/lib/entities/DirectionalLight\");\nimport Mesh\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Mesh\");\nimport Skybox\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Skybox\");\nimport MaterialBase\t\t\t\t\t= require(\"awayjs-display/lib/materials/MaterialBase\");\nimport StaticLightPicker\t\t\t= require(\"awayjs-display/lib/materials/lightpickers/StaticLightPicker\");\nimport PrimitivePlanePrefab\t\t\t= require(\"awayjs-display/lib/prefabs/PrimitivePlanePrefab\");\nimport SingleCubeTexture\t\t\t= require(\"awayjs-display/lib/textures/SingleCubeTexture\");\nimport Single2DTexture\t\t\t\t= require(\"awayjs-display/lib/textures/Single2DTexture\");\n\nimport DefaultRenderer\t\t\t\t= require(\"awayjs-renderergl/lib/DefaultRenderer\");\n\nimport MethodMaterial\t\t\t\t= require(\"awayjs-methodmaterials/lib/MethodMaterial\");\nimport EffectEnvMapMethod   \t\t= require(\"awayjs-methodmaterials/lib/methods/EffectEnvMapMethod\");\nimport NormalSimpleWaterMethod\t\t= require(\"awayjs-methodmaterials/lib/methods/NormalSimpleWaterMethod\");\nimport SpecularFresnelMethod\t\t= require(\"awayjs-methodmaterials/lib/methods/SpecularFresnelMethod\");\n\nimport AWDParser\t\t\t\t\t= require(\"awayjs-parsers/lib/AWDParser\");\nimport OBJParser\t\t\t\t\t= require(\"awayjs-parsers/lib/OBJParser\");\n\nclass AircraftDemo\n{\n    //{ state\n    private _maxStates:number = 2;\n    private _cameraIncrement:number = 0;\n    private _rollIncrement:number = 0;\n    private _loopIncrement:number = 0;\n    private _state:number = 0;\n    private _appTime:number = 0;\n    //}\n    \n    private _lightPicker:StaticLightPicker;\n    private _view:View;\n    private _timer:RequestAnimationFrame;\n    \n    //{ sea\n    private _seaGeom:PrimitivePlanePrefab;\n    private _seaMesh:Mesh;\n    private _seaNormalTexture:Single2DTexture;\n    private _seaInitialized:boolean = false;\n    private _seaMaterial:MethodMaterial;\n    //}\n    \n    //{ f14\n    private _f14Geom:DisplayObjectContainer;\n    private _f14Initialized:boolean = false;\n    //}\n    \n    //{ skybox\n    private _waterMethod:NormalSimpleWaterMethod;\n    private _skyboxCubeTexture:SingleCubeTexture;\n    private _skyboxInitialized:boolean = false;\n    //}\n    \n    constructor()\n    {\n        Debug.LOG_PI_ERRORS = false;\n        Debug.THROW_ERRORS = false;\n        \n        this.initView();\n        this.initLights();\n        this.initAnimation();\n        this.initParsers();\n        this.loadAssets();\n        \n        window.onresize = (event:UIEvent) => this.onResize(event);\n    }\n    \n    private loadAssets()\n    {\n        this.loadAsset('assets/sea_normals.jpg');\n        this.loadAsset('assets/f14/f14d.obj');\n        this.loadAsset('assets/skybox/CubeTextureTest.cube');\n    }\n    \n    private loadAsset(path:string)\n    {\n        var token:AssetLoaderToken = AssetLibrary.load(new URLRequest(path));\n        token.addEventListener(LoaderEvent.RESOURCE_COMPLETE, (event:LoaderEvent) => this.onResourceComplete(event));\n    }\n    \n    private initParsers()\n    {\n        AssetLibrary.enableParser(OBJParser);\n    }\n    \n    private initAnimation()\n    {\n        this._timer = new RequestAnimationFrame( this.render, this );\n    }\n\n    private initView()\n    {\n        this._view = new View(new DefaultRenderer());\n        this._view.camera.z\t= -500;\n        this._view.camera.y\t= 250;\n        this._view.camera.rotationX\t= 20;\n        this._view.camera.projection.near = 0.5;\n        this._view.camera.projection.far = 14000;\n        this._view.backgroundColor = 0x2c2c32;\n\n        this.onResize();\n    }\n    \n    private initializeScene()\n    {\n        if(this._skyboxCubeTexture && this._f14Geom && this._seaNormalTexture) {\n            this.initF14();\n            this.initSea();\n            this._timer.start();\n        }\n    }\n    \n    private initLights()\n    {\n        var light:DirectionalLight = new DirectionalLight();\n        light.color\t= 0x974523;\n        light.direction\t= new Vector3D(-300, -300, -5000);\n        light.ambient = 1;\n        light.ambientColor = 0x7196ac;\n        light.diffuse = 1.2;\n        light.specular = 1.1;\n        this._view.scene.addChild(light);\n        \n        this._lightPicker = new StaticLightPicker([light]);\n    }\n    \n    private initF14()\n    {\n        this._f14Initialized = true;\n        \n        var f14Material: MethodMaterial = new MethodMaterial(this._seaNormalTexture, true, true, false); // will be the cubemap\n        f14Material.lightPicker = this._lightPicker;\n        \n        this._view.scene.addChild(this._f14Geom);\n        this._f14Geom.transform.scale = new Vector3D(20, 20, 20);\n        this._f14Geom.rotationX = 90;\n        this._f14Geom.y = 200;\n        this._view.camera.lookAt(this._f14Geom.transform.position);\n        \n        document.onmousedown = (event:MouseEvent) => this.onMouseDown(event);\n    }\n\n    private initSea()\n    {\n        this._seaMaterial = new MethodMaterial(this._seaNormalTexture, true, true, false); // will be the cubemap\n        this._waterMethod = new NormalSimpleWaterMethod(this._seaNormalTexture, new Single2DTexture(this._seaNormalTexture.sampler2D));\n        var fresnelMethod:SpecularFresnelMethod  = new SpecularFresnelMethod();\n        fresnelMethod.normalReflectance = .3;\n        \n        this._seaMaterial.alphaBlending = true;\n        this._seaMaterial.lightPicker = this._lightPicker;\n        this._seaMaterial.repeat = true;\n        this._seaMaterial.animateUVs = true;\n        this._seaMaterial.normalMethod = this._waterMethod ;\n        this._seaMaterial.addEffectMethod(new EffectEnvMapMethod(this._skyboxCubeTexture));\n        this._seaMaterial.specularMethod = fresnelMethod;\n        this._seaMaterial.gloss = 100;\n        this._seaMaterial.specular = 1;\n        \n        this._seaGeom = new PrimitivePlanePrefab( 50000, 50000, 1, 1, true, false );\n        this._seaMesh = <Mesh> this._seaGeom.getNewObject();\n        this._seaGeom.geometry.scaleUV( 100, 100 );\n        this._seaMesh.subMeshes[0].uvTransform = new UVTransform();\n        this._seaMesh.material = this._seaMaterial;\n        this._view.scene.addChild( new Skybox(this._skyboxCubeTexture));\n        this._view.scene.addChild( this._seaMesh );\n    }\n    \n    public onResourceComplete(event:LoaderEvent)\n    {\n        var loader:AssetLoader = <AssetLoader> event.target;\n        var numAssets:number = loader.baseDependency.assets.length;\n        var i:number = 0;\n        \n        switch (event.url) {\n            case \"assets/sea_normals.jpg\":\n                this._seaNormalTexture = new Single2DTexture(<BitmapImage2D> loader.baseDependency.assets[0]);\n                break;\n            case 'assets/f14/f14d.obj':\n                this._f14Geom = new DisplayObjectContainer();\n                for (i = 0; i < numAssets; ++i) {\n                    var asset:IAsset = loader.baseDependency.assets[i];\n                    switch (asset.assetType) {\n                        case Mesh.assetType:\n                            var mesh:Mesh = <Mesh> asset;\n                            this._f14Geom.addChild(mesh);\n                            break;\n                        case Geometry.assetType:\n                            break;\n                    }\n                }\n                break;\n            case 'assets/skybox/CubeTextureTest.cube':\n                this._skyboxCubeTexture = new SingleCubeTexture(<BitmapImageCube> loader.baseDependency.assets[0]);\n                break;\n        }\n        \n        this.initializeScene();\n    }\n    \n    private render(dt:number) //animate based on dt for firefox\n    {\n        if (this._f14Geom) {\n            this._rollIncrement += 0.02;\n            \n            switch (this._state) {\n                case 0 :\n                    this._f14Geom.rotationZ = Math.sin(this._rollIncrement)*25;\n                    break;\n                case 1 :\n                    this._loopIncrement += 0.05;\n                    this._f14Geom.z += Math.cos(this._loopIncrement)*20;\n                    this._f14Geom.y += Math.sin(this._loopIncrement)*20;\n                    this._f14Geom.rotationX += -1*((Math.PI/180)*Math.atan2(this._f14Geom.z, this._f14Geom.y));//* 20;\n                    this._f14Geom.rotationZ = Math.sin(this._rollIncrement)*25;\n                    \n                    if (this._loopIncrement > (Math.PI*2)) {\n                        this._loopIncrement = 0;\n                        this._state = 0;\n                    }\n                    break;\n            }\n        }\n        \n        if (this._f14Geom) {\n            this._view.camera.lookAt(this._f14Geom.transform.position);\n        }\n        \n        if (this._view.camera) {\n            this._cameraIncrement += 0.01;\n            this._view.camera.x = Math.cos(this._cameraIncrement)*400;\n            this._view.camera.z = Math.sin(this._cameraIncrement)*400;\n        }\n        \n        if ( this._f14Geom ) {\n            this._view.camera.lookAt(this._f14Geom.transform.position);\n        }\n        \n        if (this._seaMaterial) {\n            this._seaMesh.subMeshes[0].uvTransform.offsetV -= 0.04;\n            \n            /*\n             this.waterMethod.water1OffsetX += .001;\n             this.waterMethod.water1OffsetY += .1;\n             this.waterMethod.water2OffsetX += .0007;\n             this.waterMethod.water2OffsetY += .6;\n             //*/\n        }\n        \n        this._appTime += dt;\n        this._view.render();\n    }\n    \n    public onResize(event:UIEvent = null)\n    {\n        this._view.y = 0;\n        this._view.x = 0;\n        this._view.width = window.innerWidth;\n        this._view.height = window.innerHeight;\n    }\n    \n    private onMouseDown(event:MouseEvent)\n    {\n        this._state++;\n        \n        if (this._state >= this._maxStates)\n            this._state = 0;\n    }\n}\n\nwindow.onload = function ()\n{\n    new AircraftDemo();\n}",
    null
  ],
  "sourceRoot": ""
}