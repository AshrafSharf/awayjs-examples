{"version":3,"sources":["webpack:///./src/Intermediate_PerelithKnight.ts"],"names":[],"mappings":"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","file":"Intermediate_PerelithKnight.js","sourcesContent":["/*\n\nVertex animation example in Away3d using the MD2 format\n\nDemonstrates:\n\nHow to use the AssetLibrary class to load an embedded internal md2 model.\nHow to clone an asset from the AssetLibrary and apply different mateirals.\nHow to load animations into an animation set and apply to individual sprites.\n\nCode by Rob Bateman\nrob@infiniteturtles.co.uk\nhttp://www.infiniteturtles.co.uk\n\nPerelith Knight, by James Green (no email given)\n\nThis code is distributed under the MIT License\n\nCopyright (c) The Away Foundation http://www.theawayfoundation.org\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the “Software”), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n*/\n\nimport BitmapImage2D\t\t\t\tfrom \"awayjs-core/lib/image/BitmapImage2D\";\nimport Sampler2D\t\t\t\t\tfrom \"awayjs-core/lib/image/Sampler2D\";\nimport AssetEvent\t\t\t\t\tfrom \"awayjs-core/lib/events/AssetEvent\";\nimport LoaderEvent\t\t\t\t\tfrom \"awayjs-core/lib/events/LoaderEvent\";\nimport Vector3D\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\nimport AssetLibrary\t\t\t\t\tfrom \"awayjs-core/lib/library/AssetLibrary\";\nimport IAsset   \t\t\t\t\tfrom \"awayjs-core/lib/library/IAsset\";\nimport URLRequest\t\t\t\t\tfrom \"awayjs-core/lib/net/URLRequest\";\nimport Keyboard \t\t\t\t\tfrom \"awayjs-core/lib/ui/Keyboard\";\nimport RequestAnimationFrame\t\tfrom \"awayjs-core/lib/utils/RequestAnimationFrame\";\n\nimport View\t\t\t\t\t\t\tfrom \"awayjs-display/lib/View\";\nimport HoverController\t\t\t\tfrom \"awayjs-display/lib/controllers/HoverController\";\nimport DirectionalLight\t\t\t\tfrom \"awayjs-display/lib/display/DirectionalLight\";\nimport Sprite\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Sprite\";\nimport ElementsType                 from \"awayjs-display/lib/graphics/ElementsType\";\nimport StaticLightPicker\t\t\tfrom \"awayjs-display/lib/materials/lightpickers/StaticLightPicker\";\nimport PrimitivePlanePrefab\t\t\tfrom \"awayjs-display/lib/prefabs/PrimitivePlanePrefab\";\nimport Single2DTexture\t\t\t\tfrom \"awayjs-display/lib/textures/Single2DTexture\";\n\nimport AnimationSetBase\t\t\t\tfrom \"awayjs-renderergl/lib/animators/AnimationSetBase\";\nimport VertexAnimationSet\t\t\tfrom \"awayjs-renderergl/lib/animators/VertexAnimationSet\";\nimport VertexAnimator\t\t\t\tfrom \"awayjs-renderergl/lib/animators/VertexAnimator\";\n\nimport DefaultRenderer\t\t\t\tfrom \"awayjs-renderergl/lib/DefaultRenderer\";\n\nimport MethodMaterial\t\t\t\tfrom \"awayjs-methodmaterials/lib/MethodMaterial\";\nimport ShadowFilteredMethod\t\t\tfrom \"awayjs-methodmaterials/lib/methods/ShadowFilteredMethod\";\n\nimport MD2Parser\t\t\t\t\tfrom \"awayjs-parsers/lib/MD2Parser\";\n\nclass Intermediate_PerelithKnight\n{\n\n    private _spriteInitialised:boolean = false;\n    private _animationSetInitialised:boolean = false;\n    private _sceneInitialised:boolean = false;\n\n    //array of materials for random sampling\n    private _pKnightTextures:Array<string> = new Array<string>(\"assets/pknight1.png\", \"assets/pknight2.png\", \"assets/pknight3.png\", \"assets/pknight4.png\");\n    private _pKnightMaterials:Array<MethodMaterial> = new Array<MethodMaterial>();\n\n    //engine variables\n    private _view:View;\n    private _cameraController:HoverController;\n\n    //stats\n    //private _stats:AwayStats;\n\n    //light objects\n    private _light:DirectionalLight;\n    private _lightPicker:StaticLightPicker;\n\n    //material objects\n    private _floorMaterial:MethodMaterial;\n    private _shadowMapMethod:ShadowFilteredMethod;\n\n    //scene objects\n    private _floor:Sprite;\n    private _sprite:Sprite;\n\n    //navigation variables\n    private _timer:RequestAnimationFrame;\n    private _time:number = 0;\n    private _move:boolean = false;\n    private _lastPanAngle:number;\n    private _lastTiltAngle:number;\n    private _lastMouseX:number;\n    private _lastMouseY:number;\n    private _keyUp:boolean;\n    private _keyDown:boolean;\n    private _keyLeft:boolean;\n    private _keyRight:boolean;\n    private _lookAtPosition:Vector3D = new Vector3D();\n    private _animationSet:VertexAnimationSet;\n\n    /**\n     * Constructor\n     */\n    constructor()\n    {\n        //setup the view\n        this._view = new View(new DefaultRenderer());\n\n        //setup the camera for optimal rendering\n        this._view.camera.projection.far = 5000;\n\n        //setup controller to be used on the camera\n        this._cameraController = new HoverController(this._view.camera, null, 45, 20, 2000, 5);\n\n        //setup the help text\n        /*\n        var text:TextField = new TextField();\n        text.defaultTextFormat = new TextFormat(\"Verdana\", 11, 0xFFFFFF);\n        text.embedFonts = true;\n        text.antiAliasType = AntiAliasType.ADVANCED;\n        text.gridFitType = GridFitType.PIXEL;\n        text.width = 240;\n        text.height = 100;\n        text.selectable = false;\n        text.mouseEnabled = false;\n        text.text = \"Click and drag - rotate\\n\" +\n            \"Cursor keys / WSAD / ZSQD - move\\n\" +\n            \"Scroll wheel - zoom\";\n\n        text.filters = [new DropShadowFilter(1, 45, 0x0, 1, 0, 0)];\n\n        addChild(text);\n        */\n\n        //setup the lights for the scene\n        this._light = new DirectionalLight(-0.5, -1, -1);\n        this._light.ambient = 0.4;\n        this._lightPicker = new StaticLightPicker([this._light]);\n        this._view.scene.addChild(this._light);\n\n        //setup listeners on AssetLibrary\n        AssetLibrary.addEventListener(AssetEvent.ASSET_COMPLETE, (event:AssetEvent) => this.onAssetComplete(event));\n        AssetLibrary.addEventListener(LoaderEvent.LOAD_COMPLETE, (event:LoaderEvent) => this.onResourceComplete(event));\n\n        //load perilith knight textures\n        AssetLibrary.load(new URLRequest(\"assets/pknight1.png\"));\n        AssetLibrary.load(new URLRequest(\"assets/pknight2.png\"));\n        AssetLibrary.load(new URLRequest(\"assets/pknight3.png\"));\n        AssetLibrary.load(new URLRequest(\"assets/pknight4.png\"));\n\n        //load floor texture\n        AssetLibrary.load(new URLRequest(\"assets/floor_diffuse.jpg\"));\n\n        //load perelith knight data\n        AssetLibrary.load(new URLRequest(\"assets/pknight.md2\"), null, null, new MD2Parser());\n\n        //create a global shadow map method\n        this._shadowMapMethod = new ShadowFilteredMethod(this._light);\n        this._shadowMapMethod.epsilon = 0.2;\n\n        //setup floor material\n        this._floorMaterial = new MethodMaterial();\n        this._floorMaterial.lightPicker = this._lightPicker;\n        this._floorMaterial.specularMethod.strength = 0;\n        this._floorMaterial.ambientMethod.strength = 1;\n        this._floorMaterial.shadowMethod = this._shadowMapMethod;\n        this._floorMaterial.style.sampler = new Sampler2D(true);\n\n        //setup knight materials\n        for (var i:number /*uint*/  = 0; i < this._pKnightTextures.length; i++) {\n            var knightMaterial:MethodMaterial = new MethodMaterial();\n            //knightMaterial.normalMap = Cast.bitmapTexture(BitmapFilterEffects.normalMap(bitmapData));\n            //knightMaterial.specularMap = Cast.bitmapTexture(BitmapFilterEffects.outline(bitmapData));\n            knightMaterial.lightPicker = this._lightPicker;\n            knightMaterial.specularMethod.gloss = 30;\n            knightMaterial.specularMethod.strength = 1;\n            knightMaterial.ambientMethod.strength = 1;\n            knightMaterial.shadowMethod = this._shadowMapMethod;\n            this._pKnightMaterials.push(knightMaterial);\n        }\n\n        //setup the floor\n        this._floor = <Sprite> new PrimitivePlanePrefab(this._floorMaterial, ElementsType.TRIANGLE, 5000, 5000).getNewObject();\n        this._floor.graphics.scaleUV(5, 5);\n\n        //setup the scene\n        this._view.scene.addChild(this._floor);\n\n        //add stats panel\n        //addChild(_stats = new AwayStats(_view));\n\n        //add listeners\n        window.onresize  = (event:UIEvent) => this.onResize(event);\n\n        document.onmousedown = (event:MouseEvent) => this.onMouseDown(event);\n        document.onmouseup = (event:MouseEvent) => this.onMouseUp(event);\n        document.onmousemove = (event:MouseEvent) => this.onMouseMove(event);\n        document.onmousewheel = (event:WheelEvent) => this.onMouseWheel(event);\n        document.onkeydown = (event:KeyboardEvent) => this.onKeyDown(event);\n        document.onkeyup = (event:KeyboardEvent) => this.onKeyUp(event);\n        this.onResize();\n\n        this._timer = new RequestAnimationFrame(this.onEnterFrame, this);\n        this._timer.start();\n    }\n\n    /**\n     * Navigation and render loop\n     */\n    private onEnterFrame(dt:number):void\n    {\n        this._time += dt;\n\n        if (this._keyUp)\n            this._lookAtPosition.x -= 10;\n        if (this._keyDown)\n            this._lookAtPosition.x += 10;\n        if (this._keyLeft)\n            this._lookAtPosition.z -= 10;\n        if (this._keyRight)\n            this._lookAtPosition.z += 10;\n\n        this._cameraController.lookAtPosition = this._lookAtPosition;\n\n        this._view.render();\n    }\n\n    /**\n     * Listener for asset complete event on loader\n     */\n    private onAssetComplete(event:AssetEvent):void\n    {\n        var asset:IAsset = event.asset;\n\n        switch (asset.assetType)\n        {\n            case Sprite.assetType :\n                this._sprite = <Sprite> event.asset;\n\n                //adjust the sprite\n                this._sprite.y = 120;\n                this._sprite.transform.scaleTo(5, 5, 5);\n\n                this._spriteInitialised = true;\n\n\n                break;\n            case AnimationSetBase.assetType :\n                this._animationSet = <VertexAnimationSet> event.asset;\n                this._animationSetInitialised = true;\n                break;\n        }\n\n        if ( this._animationSetInitialised && this._spriteInitialised && ! this._sceneInitialised)\n        {\n            this._sceneInitialised = true;\n            //create 20 x 20 different clones of the knight\n            var numWide:number = 20;\n            var numDeep:number = 20;\n            var k:number /*uint*/ = 0;\n            for (var i:number /*uint*/  = 0; i < numWide; i++) {\n                for (var j:number /*uint*/  = 0; j < numDeep; j++) {\n                    //clone sprite\n                    var clone:Sprite = <Sprite> this._sprite.clone();\n                    clone.x = (i-(numWide-1)/2)*5000/numWide;\n                    clone.z = (j-(numDeep-1)/2)*5000/numDeep;\n                    clone.castsShadows = true;\n                    clone.material = this._pKnightMaterials[Math.floor(Math.random()*this._pKnightMaterials.length)];\n                    this._view.scene.addChild(clone);\n\n                    //create animator\n                    var vertexAnimator:VertexAnimator = new VertexAnimator(this._animationSet);\n\n                    //play specified state\n                    vertexAnimator.play(this._animationSet.animationNames[Math.floor(Math.random()*this._animationSet.animationNames.length)], null, Math.random()*1000);\n                    clone.animator = vertexAnimator;\n                    k++;\n                }\n            }\n        }\n\n    }\n\n    /**\n     * Listener function for resource complete event on asset library\n     */\n    private onResourceComplete(event:LoaderEvent)\n    {\n        var assets:Array<IAsset> = event.assets;\n        var length:number = assets.length;\n\n        for ( var c : number = 0 ; c < length ; c ++ )\n        {\n            var asset:IAsset = assets[c];\n\n            console.log(asset.name, event.url);\n\n            switch (event.url)\n            {\n                //floor texture\n                case \"assets/floor_diffuse.jpg\" :\n                    this._floorMaterial.ambientMethod.texture = new Single2DTexture(<BitmapImage2D> asset);\n                    break;\n\n                //knight textures\n                case \"assets/pknight1.png\" :\n                case \"assets/pknight2.png\" :\n                case \"assets/pknight3.png\" :\n                case \"assets/pknight4.png\" :\n                    this._pKnightMaterials[this._pKnightTextures.indexOf(event.url)].ambientMethod.texture = new Single2DTexture(<BitmapImage2D> asset);\n                    break;\n\n                //knight data\n                case \"assets/pknight.md2\" :\n\n                    break;\n            }\n        }\n    }\n\n    /**\n     * Key down listener for animation\n     */\n    private onKeyDown(event:KeyboardEvent):void\n    {\n        switch (event.keyCode) {\n            case Keyboard.UP:\n            case Keyboard.W:\n            case Keyboard.Z: //fr\n                this._keyUp = true;\n                break;\n            case Keyboard.DOWN:\n            case Keyboard.S:\n                this._keyDown = true;\n                break;\n            case Keyboard.LEFT:\n            case Keyboard.A:\n            case Keyboard.Q: //fr\n                this._keyLeft = true;\n                break;\n            case Keyboard.RIGHT:\n            case Keyboard.D:\n                this._keyRight = true;\n                break;\n        }\n    }\n\n    /**\n     * Key up listener\n     */\n    private onKeyUp(event:KeyboardEvent):void\n    {\n        switch (event.keyCode) {\n            case Keyboard.UP:\n            case Keyboard.W:\n            case Keyboard.Z: //fr\n                this._keyUp = false;\n                break;\n            case Keyboard.DOWN:\n            case Keyboard.S:\n                this._keyDown = false;\n                break;\n            case Keyboard.LEFT:\n            case Keyboard.A:\n            case Keyboard.Q: //fr\n                this._keyLeft = false;\n                break;\n            case Keyboard.RIGHT:\n            case Keyboard.D:\n                this._keyRight = false;\n                break;\n        }\n    }\n\n    /**\n     * Mouse down listener for navigation\n     */\n    private onMouseDown(event:MouseEvent):void\n    {\n        this._lastPanAngle = this._cameraController.panAngle;\n        this._lastTiltAngle = this._cameraController.tiltAngle;\n        this._lastMouseX = event.clientX;\n        this._lastMouseY = event.clientY;\n        this._move = true;\n    }\n\n    /**\n     * Mouse up listener for navigation\n     */\n    private onMouseUp(event:MouseEvent):void\n    {\n        this._move = false;\n    }\n\n    private onMouseMove(event:MouseEvent)\n    {\n        if (this._move) {\n            this._cameraController.panAngle = 0.3*(event.clientX - this._lastMouseX) + this._lastPanAngle;\n            this._cameraController.tiltAngle = 0.3*(event.clientY - this._lastMouseY) + this._lastTiltAngle;\n        }\n    }\n\n    /**\n     * Mouse wheel listener for navigation\n     */\n    private onMouseWheel(event:WheelEvent):void\n    {\n        this._cameraController.distance -= event.wheelDelta;\n\n        if (this._cameraController.distance < 100)\n            this._cameraController.distance = 100;\n        else if (this._cameraController.distance > 2000)\n            this._cameraController.distance = 2000;\n    }\n\n    /**\n     * Stage listener for resize events\n     */\n    private onResize(event:UIEvent = null):void\n    {\n        this._view.y = 0;\n        this._view.x = 0;\n        this._view.width = window.innerWidth;\n        this._view.height = window.innerHeight;\n    }\n}\n\nwindow.onload = function ()\n{\n    new Intermediate_PerelithKnight();\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/Intermediate_PerelithKnight.ts\n **/"],"sourceRoot":""}