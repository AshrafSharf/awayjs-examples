{"version":3,"sources":["webpack:///./src/Intermediate_PerelithKnight.ts"],"names":[],"mappings":"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","file":"js/Intermediate_PerelithKnight.js","sourcesContent":["/*\n\nVertex animation example in Away3d using the MD2 format\n\nDemonstrates:\n\nHow to use the AssetLibrary class to load an embedded internal md2 model.\nHow to clone an asset from the AssetLibrary and apply different mateirals.\nHow to load animations into an animation set and apply to individual sprites.\n\nCode by Rob Bateman\nrob@infiniteturtles.co.uk\nhttp://www.infiniteturtles.co.uk\n\nPerelith Knight, by James Green (no email given)\n\nThis code is distributed under the MIT License\n\nCopyright (c) The Away Foundation http://www.theawayfoundation.org\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the “Software”), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n*/\n\nimport {BitmapImage2D}\t\t\t\tfrom \"awayjs-core/lib/image/BitmapImage2D\";\nimport {Sampler2D}\t\t\t\t\tfrom \"awayjs-core/lib/image/Sampler2D\";\nimport {AssetEvent}\t\t\t\t\tfrom \"awayjs-core/lib/events/AssetEvent\";\nimport {LoaderEvent}\t\t\t\t\tfrom \"awayjs-core/lib/events/LoaderEvent\";\nimport {Vector3D}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\nimport {AssetLibrary}\t\t\t\t\tfrom \"awayjs-core/lib/library/AssetLibrary\";\nimport {IAsset}\t\t\t\t\t\tfrom \"awayjs-core/lib/library/IAsset\";\nimport {URLRequest}\t\t\t\t\tfrom \"awayjs-core/lib/net/URLRequest\";\nimport {Keyboard}\t\t\t\t\t\tfrom \"awayjs-core/lib/ui/Keyboard\";\nimport {RequestAnimationFrame}\t\tfrom \"awayjs-core/lib/utils/RequestAnimationFrame\";\n\nimport {View}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/View\";\nimport {HoverController}\t\t\t\tfrom \"awayjs-display/lib/controllers/HoverController\";\nimport {DirectionalLight}\t\t\t\tfrom \"awayjs-display/lib/display/DirectionalLight\";\nimport {Sprite}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Sprite\";\nimport {ElementsType}\t\t\t\t\tfrom \"awayjs-display/lib/graphics/ElementsType\";\nimport {StaticLightPicker}\t\t\tfrom \"awayjs-display/lib/materials/lightpickers/StaticLightPicker\";\nimport {PrimitivePlanePrefab}\t\t\tfrom \"awayjs-display/lib/prefabs/PrimitivePlanePrefab\";\nimport {Single2DTexture}\t\t\t\tfrom \"awayjs-display/lib/textures/Single2DTexture\";\n\nimport {AnimationSetBase}\t\t\t\tfrom \"awayjs-renderergl/lib/animators/AnimationSetBase\";\nimport {VertexAnimationSet}\t\t\tfrom \"awayjs-renderergl/lib/animators/VertexAnimationSet\";\nimport {VertexAnimator}\t\t\t\tfrom \"awayjs-renderergl/lib/animators/VertexAnimator\";\n\nimport {DefaultRenderer}\t\t\t\tfrom \"awayjs-renderergl/lib/DefaultRenderer\";\n\nimport {MethodMaterial}\t\t\t\tfrom \"awayjs-methodmaterials/lib/MethodMaterial\";\nimport {ShadowFilteredMethod}\t\t\tfrom \"awayjs-methodmaterials/lib/methods/ShadowFilteredMethod\";\n\nimport {MD2Parser}\t\t\t\t\tfrom \"awayjs-parsers/lib/MD2Parser\";\n\nclass Intermediate_PerelithKnight\n{\n\n\tprivate _spriteInitialised:boolean = false;\n\tprivate _animationSetInitialised:boolean = false;\n\tprivate _sceneInitialised:boolean = false;\n\n\t//array of materials for random sampling\n\tprivate _pKnightTextures:Array<string> = new Array<string>(\"assets/pknight1.png\", \"assets/pknight2.png\", \"assets/pknight3.png\", \"assets/pknight4.png\");\n\tprivate _pKnightMaterials:Array<MethodMaterial> = new Array<MethodMaterial>();\n\n\t//engine variables\n\tprivate _view:View;\n\tprivate _cameraController:HoverController;\n\n\t//stats\n\t//private _stats:AwayStats;\n\n\t//light objects\n\tprivate _light:DirectionalLight;\n\tprivate _lightPicker:StaticLightPicker;\n\n\t//material objects\n\tprivate _floorMaterial:MethodMaterial;\n\tprivate _shadowMapMethod:ShadowFilteredMethod;\n\n\t//scene objects\n\tprivate _floor:Sprite;\n\tprivate _sprite:Sprite;\n\n\t//navigation variables\n\tprivate _timer:RequestAnimationFrame;\n\tprivate _time:number = 0;\n\tprivate _move:boolean = false;\n\tprivate _lastPanAngle:number;\n\tprivate _lastTiltAngle:number;\n\tprivate _lastMouseX:number;\n\tprivate _lastMouseY:number;\n\tprivate _keyUp:boolean;\n\tprivate _keyDown:boolean;\n\tprivate _keyLeft:boolean;\n\tprivate _keyRight:boolean;\n\tprivate _lookAtPosition:Vector3D = new Vector3D();\n\tprivate _animationSet:VertexAnimationSet;\n\n\t/**\n\t * Constructor\n\t */\n\tconstructor()\n\t{\n\t\t//setup the view\n\t\tthis._view = new View(new DefaultRenderer());\n\n\t\t//setup the camera for optimal rendering\n\t\tthis._view.camera.projection.far = 5000;\n\n\t\t//setup controller to be used on the camera\n\t\tthis._cameraController = new HoverController(this._view.camera, null, 45, 20, 2000, 5);\n\n\t\t//setup the help text\n\t\t/*\n\t\tvar text:TextField = new TextField();\n\t\ttext.defaultTextFormat = new TextFormat(\"Verdana\", 11, 0xFFFFFF);\n\t\ttext.embedFonts = true;\n\t\ttext.antiAliasType = AntiAliasType.ADVANCED;\n\t\ttext.gridFitType = GridFitType.PIXEL;\n\t\ttext.width = 240;\n\t\ttext.height = 100;\n\t\ttext.selectable = false;\n\t\ttext.mouseEnabled = false;\n\t\ttext.text = \"Click and drag - rotate\\n\" +\n\t\t\t\"Cursor keys / WSAD / ZSQD - move\\n\" +\n\t\t\t\"Scroll wheel - zoom\";\n\n\t\ttext.filters = [new DropShadowFilter(1, 45, 0x0, 1, 0, 0)];\n\n\t\taddChild(text);\n\t\t*/\n\n\t\t//setup the lights for the scene\n\t\tthis._light = new DirectionalLight(-0.5, -1, -1);\n\t\tthis._light.ambient = 0.4;\n\t\tthis._lightPicker = new StaticLightPicker([this._light]);\n\t\tthis._view.scene.addChild(this._light);\n\n\t\t//setup listeners on AssetLibrary\n\t\tAssetLibrary.addEventListener(AssetEvent.ASSET_COMPLETE, (event:AssetEvent) => this.onAssetComplete(event));\n\t\tAssetLibrary.addEventListener(LoaderEvent.LOAD_COMPLETE, (event:LoaderEvent) => this.onResourceComplete(event));\n\n\t\t//load perilith knight textures\n\t\tAssetLibrary.load(new URLRequest(\"assets/pknight1.png\"));\n\t\tAssetLibrary.load(new URLRequest(\"assets/pknight2.png\"));\n\t\tAssetLibrary.load(new URLRequest(\"assets/pknight3.png\"));\n\t\tAssetLibrary.load(new URLRequest(\"assets/pknight4.png\"));\n\n\t\t//load floor texture\n\t\tAssetLibrary.load(new URLRequest(\"assets/floor_diffuse.jpg\"));\n\n\t\t//load perelith knight data\n\t\tAssetLibrary.load(new URLRequest(\"assets/pknight.md2\"), null, null, new MD2Parser());\n\n\t\t//create a global shadow map method\n\t\tthis._shadowMapMethod = new ShadowFilteredMethod(this._light);\n\t\tthis._shadowMapMethod.epsilon = 0.2;\n\n\t\t//setup floor material\n\t\tthis._floorMaterial = new MethodMaterial();\n\t\tthis._floorMaterial.lightPicker = this._lightPicker;\n\t\tthis._floorMaterial.specularMethod.strength = 0;\n\t\tthis._floorMaterial.ambientMethod.strength = 1;\n\t\tthis._floorMaterial.shadowMethod = this._shadowMapMethod;\n\t\tthis._floorMaterial.style.sampler = new Sampler2D(true);\n\n\t\t//setup knight materials\n\t\tfor (var i:number /*uint*/  = 0; i < this._pKnightTextures.length; i++) {\n\t\t\tvar knightMaterial:MethodMaterial = new MethodMaterial();\n\t\t\t//knightMaterial.normalMap = Cast.bitmapTexture(BitmapFilterEffects.normalMap(bitmapData));\n\t\t\t//knightMaterial.specularMap = Cast.bitmapTexture(BitmapFilterEffects.outline(bitmapData));\n\t\t\tknightMaterial.lightPicker = this._lightPicker;\n\t\t\tknightMaterial.specularMethod.gloss = 30;\n\t\t\tknightMaterial.specularMethod.strength = 1;\n\t\t\tknightMaterial.ambientMethod.strength = 1;\n\t\t\tknightMaterial.shadowMethod = this._shadowMapMethod;\n\t\t\tthis._pKnightMaterials.push(knightMaterial);\n\t\t}\n\n\t\t//setup the floor\n\t\tthis._floor = <Sprite> new PrimitivePlanePrefab(this._floorMaterial, ElementsType.TRIANGLE, 5000, 5000).getNewObject();\n\t\tthis._floor.graphics.scaleUV(5, 5);\n\n\t\t//setup the scene\n\t\tthis._view.scene.addChild(this._floor);\n\n\t\t//add stats panel\n\t\t//addChild(_stats = new AwayStats(_view));\n\n\t\t//add listeners\n\t\twindow.onresize  = (event:UIEvent) => this.onResize(event);\n\n\t\tdocument.onmousedown = (event:MouseEvent) => this.onMouseDown(event);\n\t\tdocument.onmouseup = (event:MouseEvent) => this.onMouseUp(event);\n\t\tdocument.onmousemove = (event:MouseEvent) => this.onMouseMove(event);\n\t\tdocument.onmousewheel = (event:WheelEvent) => this.onMouseWheel(event);\n\t\tdocument.onkeydown = (event:KeyboardEvent) => this.onKeyDown(event);\n\t\tdocument.onkeyup = (event:KeyboardEvent) => this.onKeyUp(event);\n\t\tthis.onResize();\n\n\t\tthis._timer = new RequestAnimationFrame(this.onEnterFrame, this);\n\t\tthis._timer.start();\n\t}\n\n\t/**\n\t * Navigation and render loop\n\t */\n\tprivate onEnterFrame(dt:number):void\n\t{\n\t\tthis._time += dt;\n\n\t\tif (this._keyUp)\n\t\t\tthis._lookAtPosition.x -= 10;\n\t\tif (this._keyDown)\n\t\t\tthis._lookAtPosition.x += 10;\n\t\tif (this._keyLeft)\n\t\t\tthis._lookAtPosition.z -= 10;\n\t\tif (this._keyRight)\n\t\t\tthis._lookAtPosition.z += 10;\n\n\t\tthis._cameraController.lookAtPosition = this._lookAtPosition;\n\n\t\tthis._view.render();\n\t}\n\n\t/**\n\t * Listener for asset complete event on loader\n\t */\n\tprivate onAssetComplete(event:AssetEvent):void\n\t{\n\t\tvar asset:IAsset = event.asset;\n\n\t\tswitch (asset.assetType)\n\t\t{\n\t\t\tcase Sprite.assetType :\n\t\t\t\tthis._sprite = <Sprite> event.asset;\n\n\t\t\t\t//adjust the sprite\n\t\t\t\tthis._sprite.y = 120;\n\t\t\t\tthis._sprite.transform.scaleTo(5, 5, 5);\n\n\t\t\t\tthis._spriteInitialised = true;\n\n\n\t\t\t\tbreak;\n\t\t\tcase AnimationSetBase.assetType :\n\t\t\t\tthis._animationSet = <VertexAnimationSet> event.asset;\n\t\t\t\tthis._animationSetInitialised = true;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif ( this._animationSetInitialised && this._spriteInitialised && ! this._sceneInitialised)\n\t\t{\n\t\t\tthis._sceneInitialised = true;\n\t\t\t//create 20 x 20 different clones of the knight\n\t\t\tvar numWide:number = 20;\n\t\t\tvar numDeep:number = 20;\n\t\t\tvar k:number /*uint*/ = 0;\n\t\t\tfor (var i:number /*uint*/  = 0; i < numWide; i++) {\n\t\t\t\tfor (var j:number /*uint*/  = 0; j < numDeep; j++) {\n\t\t\t\t\t//clone sprite\n\t\t\t\t\tvar clone:Sprite = <Sprite> this._sprite.clone();\n\t\t\t\t\tclone.x = (i-(numWide-1)/2)*5000/numWide;\n\t\t\t\t\tclone.z = (j-(numDeep-1)/2)*5000/numDeep;\n\t\t\t\t\tclone.castsShadows = true;\n\t\t\t\t\tclone.material = this._pKnightMaterials[Math.floor(Math.random()*this._pKnightMaterials.length)];\n\t\t\t\t\tthis._view.scene.addChild(clone);\n\n\t\t\t\t\t//create animator\n\t\t\t\t\tvar vertexAnimator:VertexAnimator = new VertexAnimator(this._animationSet);\n\n\t\t\t\t\t//play specified state\n\t\t\t\t\tvertexAnimator.play(this._animationSet.animationNames[Math.floor(Math.random()*this._animationSet.animationNames.length)], null, Math.random()*1000);\n\t\t\t\t\tclone.animator = vertexAnimator;\n\t\t\t\t\tk++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Listener function for resource complete event on asset library\n\t */\n\tprivate onResourceComplete(event:LoaderEvent)\n\t{\n\t\tvar assets:Array<IAsset> = event.assets;\n\t\tvar length:number = assets.length;\n\n\t\tfor ( var c : number = 0 ; c < length ; c ++ )\n\t\t{\n\t\t\tvar asset:IAsset = assets[c];\n\n\t\t\tconsole.log(asset.name, event.url);\n\n\t\t\tswitch (event.url)\n\t\t\t{\n\t\t\t\t//floor texture\n\t\t\t\tcase \"assets/floor_diffuse.jpg\" :\n\t\t\t\t\tthis._floorMaterial.ambientMethod.texture = new Single2DTexture(<BitmapImage2D> asset);\n\t\t\t\t\tbreak;\n\n\t\t\t\t//knight textures\n\t\t\t\tcase \"assets/pknight1.png\" :\n\t\t\t\tcase \"assets/pknight2.png\" :\n\t\t\t\tcase \"assets/pknight3.png\" :\n\t\t\t\tcase \"assets/pknight4.png\" :\n\t\t\t\t\tthis._pKnightMaterials[this._pKnightTextures.indexOf(event.url)].ambientMethod.texture = new Single2DTexture(<BitmapImage2D> asset);\n\t\t\t\t\tbreak;\n\n\t\t\t\t//knight data\n\t\t\t\tcase \"assets/pknight.md2\" :\n\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Key down listener for animation\n\t */\n\tprivate onKeyDown(event:KeyboardEvent):void\n\t{\n\t\tswitch (event.keyCode) {\n\t\t\tcase Keyboard.UP:\n\t\t\tcase Keyboard.W:\n\t\t\tcase Keyboard.Z: //fr\n\t\t\t\tthis._keyUp = true;\n\t\t\t\tbreak;\n\t\t\tcase Keyboard.DOWN:\n\t\t\tcase Keyboard.S:\n\t\t\t\tthis._keyDown = true;\n\t\t\t\tbreak;\n\t\t\tcase Keyboard.LEFT:\n\t\t\tcase Keyboard.A:\n\t\t\tcase Keyboard.Q: //fr\n\t\t\t\tthis._keyLeft = true;\n\t\t\t\tbreak;\n\t\t\tcase Keyboard.RIGHT:\n\t\t\tcase Keyboard.D:\n\t\t\t\tthis._keyRight = true;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t * Key up listener\n\t */\n\tprivate onKeyUp(event:KeyboardEvent):void\n\t{\n\t\tswitch (event.keyCode) {\n\t\t\tcase Keyboard.UP:\n\t\t\tcase Keyboard.W:\n\t\t\tcase Keyboard.Z: //fr\n\t\t\t\tthis._keyUp = false;\n\t\t\t\tbreak;\n\t\t\tcase Keyboard.DOWN:\n\t\t\tcase Keyboard.S:\n\t\t\t\tthis._keyDown = false;\n\t\t\t\tbreak;\n\t\t\tcase Keyboard.LEFT:\n\t\t\tcase Keyboard.A:\n\t\t\tcase Keyboard.Q: //fr\n\t\t\t\tthis._keyLeft = false;\n\t\t\t\tbreak;\n\t\t\tcase Keyboard.RIGHT:\n\t\t\tcase Keyboard.D:\n\t\t\t\tthis._keyRight = false;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t * Mouse down listener for navigation\n\t */\n\tprivate onMouseDown(event:MouseEvent):void\n\t{\n\t\tthis._lastPanAngle = this._cameraController.panAngle;\n\t\tthis._lastTiltAngle = this._cameraController.tiltAngle;\n\t\tthis._lastMouseX = event.clientX;\n\t\tthis._lastMouseY = event.clientY;\n\t\tthis._move = true;\n\t}\n\n\t/**\n\t * Mouse up listener for navigation\n\t */\n\tprivate onMouseUp(event:MouseEvent):void\n\t{\n\t\tthis._move = false;\n\t}\n\n\tprivate onMouseMove(event:MouseEvent)\n\t{\n\t\tif (this._move) {\n\t\t\tthis._cameraController.panAngle = 0.3*(event.clientX - this._lastMouseX) + this._lastPanAngle;\n\t\t\tthis._cameraController.tiltAngle = 0.3*(event.clientY - this._lastMouseY) + this._lastTiltAngle;\n\t\t}\n\t}\n\n\t/**\n\t * Mouse wheel listener for navigation\n\t */\n\tprivate onMouseWheel(event:WheelEvent):void\n\t{\n\t\tthis._cameraController.distance -= event.wheelDelta;\n\n\t\tif (this._cameraController.distance < 100)\n\t\t\tthis._cameraController.distance = 100;\n\t\telse if (this._cameraController.distance > 2000)\n\t\t\tthis._cameraController.distance = 2000;\n\t}\n\n\t/**\n\t * Stage listener for resize events\n\t */\n\tprivate onResize(event:UIEvent = null):void\n\t{\n\t\tthis._view.y = 0;\n\t\tthis._view.x = 0;\n\t\tthis._view.width = window.innerWidth;\n\t\tthis._view.height = window.innerHeight;\n\t}\n}\n\nwindow.onload = function ()\n{\n\tnew Intermediate_PerelithKnight();\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/Intermediate_PerelithKnight.ts\n **/"],"sourceRoot":""}