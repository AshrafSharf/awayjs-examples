{"version":3,"sources":["webpack:///./src/ObjLoaderMasterChief.ts"],"names":[],"mappings":"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","file":"ObjLoaderMasterChief.js","sourcesContent":["import BitmapImage2D\t\t\t\tfrom \"awayjs-core/lib/image/BitmapImage2D\";\nimport Sampler2D\t\t\t\t\tfrom \"awayjs-core/lib/image/Sampler2D\";\nimport LoaderEvent\t\t\t\t\tfrom \"awayjs-core/lib/events/LoaderEvent\";\nimport Vector3D\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\nimport AssetLibrary\t\t\t\t\tfrom \"awayjs-core/lib/library/AssetLibrary\";\nimport Loader\t\t\t\t\t\tfrom \"awayjs-core/lib/library/Loader\";\nimport IAsset   \t\t\t\t\tfrom \"awayjs-core/lib/library/IAsset\";\nimport URLRequest\t\t\t\t\tfrom \"awayjs-core/lib/net/URLRequest\";\nimport Debug\t\t\t\t\t\tfrom \"awayjs-core/lib/utils/Debug\";\nimport RequestAnimationFrame\t\tfrom \"awayjs-core/lib/utils/RequestAnimationFrame\";\n\nimport DisplayObjectContainer\t\tfrom \"awayjs-display/lib/display/DisplayObjectContainer\";\nimport View\t\t\t\t\t\t\tfrom \"awayjs-display/lib/View\";\nimport DirectionalLight\t\t\t\tfrom \"awayjs-display/lib/display/DirectionalLight\";\nimport Sprite\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Sprite\";\nimport StaticLightPicker\t\t\tfrom \"awayjs-display/lib/materials/lightpickers/StaticLightPicker\";\n\nimport DefaultRenderer\t\t\t\tfrom \"awayjs-renderergl/lib/DefaultRenderer\";\n\nimport MethodMaterial\t\t\t\tfrom \"awayjs-methodmaterials/lib/MethodMaterial\";\n\nimport OBJParser\t\t\t\t\tfrom \"awayjs-parsers/lib/OBJParser\";\n\nclass ObjLoaderMasterChief\n{\n\tprivate view:View;\n\tprivate raf:RequestAnimationFrame;\n\tprivate sprites:Array<Sprite> = new Array<Sprite>();\n\tprivate mat:MethodMaterial;\n\n\tprivate terrainMaterial:MethodMaterial;\n\n\tprivate light:DirectionalLight;\n\n\tprivate spartan:DisplayObjectContainer = new DisplayObjectContainer();\n\tprivate terrain:Sprite;\n\n\tconstructor()\n\t{\n\t\tDebug.LOG_PI_ERRORS = false;\n\t\tDebug.THROW_ERRORS = false;\n\n\t\tthis.view = new View(new DefaultRenderer());\n\t\tthis.view.camera.z = -50;\n\t\tthis.view.camera.y = 20;\n\t\tthis.view.camera.projection.near = 0.1;\n\t\tthis.view.backgroundColor = 0xCEC8C6;\n\n\t\tthis.raf = new RequestAnimationFrame(this.render, this);\n\n\t\tthis.light = new DirectionalLight();\n\t\tthis.light.color = 0xc1582d;\n\t\tthis.light.direction = new Vector3D(1, 0, 0);\n\t\tthis.light.ambient = 0.4;\n\t\tthis.light.ambientColor = 0x85b2cd;\n\t\tthis.light.diffuse = 2.8;\n\t\tthis.light.specular = 1.8;\n\t\tthis.view.scene.addChild(this.light);\n\n\t\tthis.spartan.transform.scaleTo(.25, .25, .25);\n\t\tthis.spartan.y = 0;\n\t\tthis.view.scene.addChild(this.spartan);\n\n\t\tAssetLibrary.enableParser(OBJParser);\n\n\t\tvar session:Loader;\n\t\t\n\t\tsession = AssetLibrary.getLoader();\n\t\tsession.addEventListener(LoaderEvent.LOAD_COMPLETE, (event:LoaderEvent) => this.onResourceComplete(event));\n\t\tsession.load(new URLRequest('assets/Halo_3_SPARTAN4.obj'));\n\n\t\tsession = AssetLibrary.getLoader();\n\t\tsession.addEventListener(LoaderEvent.LOAD_COMPLETE, (event:LoaderEvent) => this.onResourceComplete(event));\n\t\tsession.load(new URLRequest('assets/terrain.obj'));\n\n\t\tsession = AssetLibrary.getLoader();\n\t\tsession.addEventListener(LoaderEvent.LOAD_COMPLETE, (event:LoaderEvent) => this.onResourceComplete(event));\n\t\tsession.load(new URLRequest('assets/masterchief_base.png'));\n\n\t\tsession = AssetLibrary.getLoader();\n\t\tsession.addEventListener(LoaderEvent.LOAD_COMPLETE, (event:LoaderEvent) => this.onResourceComplete(event));\n\t\tsession.load(new URLRequest('assets/stone_tx.jpg'));\n\n\t\twindow.onresize = (event:UIEvent) => this.onResize();\n\n\t\tthis.raf.start();\n\t}\n\n\tprivate render()\n\t{\n\t\tif ( this.terrain)\n\t\t\tthis.terrain.rotationY += 0.4;\n\n\t\tthis.spartan.rotationY += 0.4;\n\t\tthis.view.render();\n\t}\n\n\tprivate spartanFlag    :boolean = false;\n\n\tpublic onResourceComplete (event:LoaderEvent)\n\t{\n\t\tvar loader:Loader = <Loader> event.target;\n\t\tvar l:number = loader.baseDependency.assets.length;\n\n\t\tconsole.log( '------------------------------------------------------------------------------');\n\t\tconsole.log( 'away.events.LoaderEvent.LOAD_COMPLETE' , event , l , loader );\n\t\tconsole.log( '------------------------------------------------------------------------------');\n\n\t\tvar loader:Loader = <Loader> event.target;\n\t\tvar l:number = loader.baseDependency.assets.length;\n\n\t\tfor (var c:number = 0; c < l; c++) {\n\n\t\t\tvar d:IAsset = loader.baseDependency.assets[c];\n\n\t\t\tconsole.log( d.name , event.url);\n\n\t\t\tswitch (d.assetType) {\n\t\t\t\tcase  Sprite.assetType:\n\t\t\t\t\tif (event.url =='assets/Halo_3_SPARTAN4.obj') {\n\t\t\t\t\t\tvar sprite:Sprite = <Sprite> d;\n\n\t\t\t\t\t\tthis.spartan.addChild(sprite);\n\t\t\t\t\t\tthis.spartanFlag = true;\n\t\t\t\t\t\tthis.sprites.push(sprite);\n\t\t\t\t\t} else if (event.url =='assets/terrain.obj') {\n\t\t\t\t\t\tthis.terrain = <Sprite> d;\n\t\t\t\t\t\tthis.terrain.y = 98;\n\t\t\t\t\t\tthis.terrain.graphics.scaleUV(20, 20);\n\t\t\t\t\t\tthis.view.scene.addChild(this.terrain);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\tcase BitmapImage2D.assetType :\n\t\t\t\t\tif (event.url == 'assets/masterchief_base.png' ) {\n\t\t\t\t\t\tthis.mat = new MethodMaterial(<BitmapImage2D> d);\n\t\t\t\t\t\tthis.mat.style.sampler = new Sampler2D(true, true, false);\n\t\t\t\t\t\tthis.mat.lightPicker = new StaticLightPicker([this.light]);\n\t\t\t\t\t} else if (event.url == 'assets/stone_tx.jpg') {\n\t\t\t\t\t\tthis.terrainMaterial = new MethodMaterial(<BitmapImage2D> d);\n\t\t\t\t\t\tthis.terrainMaterial.style.sampler = new Sampler2D(true, true, false);\n\t\t\t\t\t\tthis.terrainMaterial.lightPicker = new StaticLightPicker([this.light]);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (this.terrain && this.terrainMaterial)\n\t\t\tthis.terrain.material = this.terrainMaterial;\n\n\t\tif (this.mat && this.spartanFlag)\n\t\t\tfor (var c:number = 0; c < this.sprites.length; c++)\n\t\t\t\tthis.sprites[c].material = this.mat;\n\n\t\tthis.onResize();\n\t}\n\n\tpublic onResize(event:UIEvent = null)\n\t{\n\t\tthis.view.y = 0;\n\t\tthis.view.x = 0;\n\n\t\tthis.view.width = window.innerWidth;\n\t\tthis.view.height = window.innerHeight;\n\t}\n}\n\nwindow.onload = function ()\n{\n\tnew ObjLoaderMasterChief(); // Start the demo\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/ObjLoaderMasterChief.ts\n **/"],"sourceRoot":""}