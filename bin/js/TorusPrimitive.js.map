{"version":3,"sources":["webpack:///./src/TorusPrimitive.ts"],"names":[],"mappings":"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","file":"TorusPrimitive.js","sourcesContent":["import Sampler2D\t\t\t\t\tfrom \"awayjs-core/lib/image/Sampler2D\";\r\nimport URLLoaderEvent\t\t\t\tfrom \"awayjs-core/lib/events/URLLoaderEvent\";\r\nimport URLLoader\t\t\t\t\tfrom \"awayjs-core/lib/net/URLLoader\";\r\nimport URLLoaderDataFormat\t\t\tfrom \"awayjs-core/lib/net/URLLoaderDataFormat\";\r\nimport URLRequest\t\t\t\t\tfrom \"awayjs-core/lib/net/URLRequest\";\r\nimport ParserUtils\t\t\t\t\tfrom \"awayjs-core/lib/parsers/ParserUtils\";\r\nimport RequestAnimationFrame\t\tfrom \"awayjs-core/lib/utils/RequestAnimationFrame\";\r\n\r\nimport View\t\t\t\t\t\t\tfrom \"awayjs-display/lib/View\";\r\nimport DirectionalLight\t\t\t\tfrom \"awayjs-display/lib/display/DirectionalLight\";\r\nimport Sprite\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Sprite\";\r\nimport ElementsType\t\t\t\t\tfrom \"awayjs-display/lib/graphics/ElementsType\";\r\nimport PrimitiveTorusPrefab\t\t\tfrom \"awayjs-display/lib/prefabs/PrimitiveTorusPrefab\";\r\nimport StaticLightPicker\t\t\tfrom \"awayjs-display/lib/materials/lightpickers/StaticLightPicker\";\r\n\r\nimport DefaultRenderer\t\t\t\tfrom \"awayjs-renderergl/lib/DefaultRenderer\";\r\n\r\nimport MethodMaterial\t\t\t\tfrom \"awayjs-methodmaterials/lib/MethodMaterial\";\r\n\r\nclass TorusPrimitive\r\n{\r\n\tprivate _view:View;\r\n\tprivate _torus:PrimitiveTorusPrefab;\r\n\tprivate _sprite:Sprite;\r\n\tprivate _raf:RequestAnimationFrame;\r\n\tprivate _image:HTMLImageElement;\r\n\tprivate _material:MethodMaterial;\r\n\tprivate _light:DirectionalLight;\r\n\tprivate _lightPicker:StaticLightPicker;\r\n\r\n\tconstructor ()\r\n\t{\r\n\t\tthis.initView();\r\n\r\n\t\tthis._raf = new RequestAnimationFrame(this.render, this);\r\n\t\tthis._raf.start();\r\n\r\n\t\tthis.loadResources();\r\n\t\twindow.onresize = (event:UIEvent) => this.onResize(event);\r\n\r\n\t\tthis.onResize();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tprivate initView()\r\n\t{\r\n\t\tthis._view = new View(new DefaultRenderer());// Create the Away3D View\r\n\t\tthis._view.backgroundColor = 0x000000;// Change the background color to black\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tprivate loadResources()\r\n\t{\r\n\t\tvar imgLoader:URLLoader = new URLLoader();\r\n\t\timgLoader.dataFormat = URLLoaderDataFormat.BLOB;\r\n\t\timgLoader.addEventListener(URLLoaderEvent.LOAD_COMPLETE, (event:URLLoaderEvent) => this.urlCompleteHandler(event));\r\n\t\timgLoader.load(new URLRequest(\"assets/dots.png\"));\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param event\r\n\t */\r\n\tprivate urlCompleteHandler (event:URLLoaderEvent)\r\n\t{\r\n\t\tthis._image = ParserUtils.blobToImage((<URLLoader> event.target).data);\r\n\t\tthis._image.onload = (event:Event) => this.imageCompleteHandler(event);\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tprivate initLights()\r\n\t{\r\n\t\tthis._light = new DirectionalLight();\r\n\t\tthis._light.diffuse = .7;\r\n\t\tthis._light.specular = 1;\r\n\t\tthis._view.scene.addChild(this._light);\r\n\r\n\t\tthis._lightPicker = new StaticLightPicker([this._light]);\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tprivate initMaterial(image:HTMLImageElement)\r\n\t{\r\n\t\tthis._material = new MethodMaterial(ParserUtils.imageToBitmapImage2D(image));\r\n\t\tthis._material.style.sampler = new Sampler2D(true, true, false);\r\n\t\tthis._material.lightPicker = this._lightPicker;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tprivate initTorus()\r\n\t{\r\n\t\tthis._torus = new PrimitiveTorusPrefab(this._material, ElementsType.TRIANGLE, 220, 80, 32, 16, false);\r\n\r\n\t\tthis._sprite = <Sprite> this._torus.getNewObject();\r\n\r\n\t\tthis._view.scene.addChild(this._sprite);\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tprivate imageCompleteHandler(event:Event)\r\n\t{\r\n\t\tthis.initLights ();\r\n\t\tthis.initMaterial(<HTMLImageElement> event.target);\r\n\t\tthis.initTorus ();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic render(dt:number = null)\r\n\t{\r\n\t\tif (this._sprite)\r\n\t\t\tthis._sprite.rotationY += 1;\r\n\r\n\t\tthis._view.render();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic onResize(event:UIEvent = null)\r\n\t{\r\n\t\tthis._view.y = 0;\r\n\t\tthis._view.x = 0;\r\n\t\tthis._view.width = window.innerWidth;\r\n\t\tthis._view.height = window.innerHeight;\r\n\t}\r\n}\r\n\r\nwindow.onload = function()\r\n{\r\n\tnew TorusPrimitive();\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/TorusPrimitive.ts\n **/"],"sourceRoot":""}