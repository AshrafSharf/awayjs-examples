{"version":3,"sources":["webpack:///./src/TorusPrimitive.ts"],"names":[],"mappings":"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","file":"TorusPrimitive.js","sourcesContent":["import Sampler2D\t\t\t\t\tfrom \"awayjs-core/lib/image/Sampler2D\";\nimport URLLoaderEvent\t\t\t\tfrom \"awayjs-core/lib/events/URLLoaderEvent\";\nimport URLLoader\t\t\t\t\tfrom \"awayjs-core/lib/net/URLLoader\";\nimport URLLoaderDataFormat\t\t\tfrom \"awayjs-core/lib/net/URLLoaderDataFormat\";\nimport URLRequest\t\t\t\t\tfrom \"awayjs-core/lib/net/URLRequest\";\nimport ParserUtils\t\t\t\t\tfrom \"awayjs-core/lib/parsers/ParserUtils\";\nimport RequestAnimationFrame\t\tfrom \"awayjs-core/lib/utils/RequestAnimationFrame\";\n\nimport View\t\t\t\t\t\t\tfrom \"awayjs-display/lib/View\";\nimport DirectionalLight\t\t\t\tfrom \"awayjs-display/lib/display/DirectionalLight\";\nimport Sprite\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Sprite\";\nimport ElementsType\t\t\t\t\tfrom \"awayjs-display/lib/graphics/ElementsType\";\nimport PrimitiveTorusPrefab\t\t\tfrom \"awayjs-display/lib/prefabs/PrimitiveTorusPrefab\";\nimport StaticLightPicker\t\t\tfrom \"awayjs-display/lib/materials/lightpickers/StaticLightPicker\";\n\nimport DefaultRenderer\t\t\t\tfrom \"awayjs-renderergl/lib/DefaultRenderer\";\n\nimport MethodMaterial\t\t\t\tfrom \"awayjs-methodmaterials/lib/MethodMaterial\";\n\nclass TorusPrimitive\n{\n\tprivate _view:View;\n\tprivate _torus:PrimitiveTorusPrefab;\n\tprivate _sprite:Sprite;\n\tprivate _raf:RequestAnimationFrame;\n\tprivate _image:HTMLImageElement;\n\tprivate _material:MethodMaterial;\n\tprivate _light:DirectionalLight;\n\tprivate _lightPicker:StaticLightPicker;\n\n\tconstructor ()\n\t{\n\t\tthis.initView();\n\n\t\tthis._raf = new RequestAnimationFrame(this.render, this);\n\t\tthis._raf.start();\n\n\t\tthis.loadResources();\n\t\twindow.onresize = (event:UIEvent) => this.onResize(event);\n\n\t\tthis.onResize();\n\t}\n\n\t/**\n\t *\n\t */\n\tprivate initView()\n\t{\n\t\tthis._view = new View(new DefaultRenderer());// Create the Away3D View\n\t\tthis._view.backgroundColor = 0x000000;// Change the background color to black\n\t}\n\n\t/**\n\t *\n\t */\n\tprivate loadResources()\n\t{\n\t\tvar imgLoader:URLLoader = new URLLoader();\n\t\timgLoader.dataFormat = URLLoaderDataFormat.BLOB;\n\t\timgLoader.addEventListener(URLLoaderEvent.LOAD_COMPLETE, (event:URLLoaderEvent) => this.urlCompleteHandler(event));\n\t\timgLoader.load(new URLRequest(\"assets/dots.png\"));\n\t}\n\n\t/**\n\t *\n\t * @param event\n\t */\n\tprivate urlCompleteHandler (event:URLLoaderEvent)\n\t{\n\t\tthis._image = ParserUtils.blobToImage((<URLLoader> event.target).data);\n\t\tthis._image.onload = (event:Event) => this.imageCompleteHandler(event);\n\t}\n\n\t/**\n\t *\n\t */\n\tprivate initLights()\n\t{\n\t\tthis._light = new DirectionalLight();\n\t\tthis._light.diffuse = .7;\n\t\tthis._light.specular = 1;\n\t\tthis._view.scene.addChild(this._light);\n\n\t\tthis._lightPicker = new StaticLightPicker([this._light]);\n\t}\n\n\t/**\n\t *\n\t */\n\tprivate initMaterial(image:HTMLImageElement)\n\t{\n\t\tthis._material = new MethodMaterial(ParserUtils.imageToBitmapImage2D(image));\n\t\tthis._material.style.sampler = new Sampler2D(true, true, false);\n\t\tthis._material.lightPicker = this._lightPicker;\n\t}\n\n\t/**\n\t *\n\t */\n\tprivate initTorus()\n\t{\n\t\tthis._torus = new PrimitiveTorusPrefab(this._material, ElementsType.TRIANGLE, 220, 80, 32, 16, false);\n\n\t\tthis._sprite = <Sprite> this._torus.getNewObject();\n\n\t\tthis._view.scene.addChild(this._sprite);\n\t}\n\n\t/**\n\t *\n\t */\n\tprivate imageCompleteHandler(event:Event)\n\t{\n\t\tthis.initLights ();\n\t\tthis.initMaterial(<HTMLImageElement> event.target);\n\t\tthis.initTorus ();\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic render(dt:number = null)\n\t{\n\t\tif (this._sprite)\n\t\t\tthis._sprite.rotationY += 1;\n\n\t\tthis._view.render();\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic onResize(event:UIEvent = null)\n\t{\n\t\tthis._view.y = 0;\n\t\tthis._view.x = 0;\n\t\tthis._view.width = window.innerWidth;\n\t\tthis._view.height = window.innerHeight;\n\t}\n}\n\nwindow.onload = function()\n{\n\tnew TorusPrimitive();\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/TorusPrimitive.ts\n **/"],"sourceRoot":""}