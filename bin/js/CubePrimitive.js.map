{"version":3,"sources":["webpack:///./src/CubePrimitive.ts"],"names":[],"mappings":"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","file":"js/CubePrimitive.js","sourcesContent":["import {Sampler2D}\t\t\t\t\tfrom \"awayjs-core/lib/image/Sampler2D\";\nimport {BlendMode}\t\t\t\t\tfrom \"awayjs-core/lib/image/BlendMode\";\nimport {URLLoaderEvent}\t\t\t\tfrom \"awayjs-core/lib/events/URLLoaderEvent\";\nimport {Vector3D}\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\nimport {URLLoader}\t\t\t\t\tfrom \"awayjs-core/lib/net/URLLoader\";\nimport {URLLoaderDataFormat}\t\t\tfrom \"awayjs-core/lib/net/URLLoaderDataFormat\";\nimport {URLRequest}\t\t\t\t\tfrom \"awayjs-core/lib/net/URLRequest\";\nimport {ParserUtils}\t\t\t\t\tfrom \"awayjs-core/lib/parsers/ParserUtils\";\nimport {PerspectiveProjection}\t\tfrom \"awayjs-core/lib/projections/PerspectiveProjection\";\nimport {RequestAnimationFrame}\t\tfrom \"awayjs-core/lib/utils/RequestAnimationFrame\";\n\nimport {View}\t\t\t\t\t\t\tfrom \"awayjs-display/lib/View\";\nimport {DirectionalLight}\t\t\t\tfrom \"awayjs-display/lib/display/DirectionalLight\";\nimport {Sprite}\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Sprite\";\nimport {ElementsType}\t\t\t\t\tfrom \"awayjs-display/lib/graphics/ElementsType\";\nimport {StaticLightPicker}\t\t\tfrom \"awayjs-display/lib/materials/lightpickers/StaticLightPicker\";\nimport {PrimitiveCubePrefab}\t\t\tfrom \"awayjs-display/lib/prefabs/PrimitiveCubePrefab\";\nimport {PrimitiveTorusPrefab}\t\t\tfrom \"awayjs-display/lib/prefabs/PrimitiveTorusPrefab\";\n\nimport {DefaultRenderer}\t\t\t\tfrom \"awayjs-renderergl/lib/DefaultRenderer\";\n\nimport {MethodMaterial}\t\t\t\tfrom \"awayjs-methodmaterials/lib/MethodMaterial\";\n\nclass CubePrimitive\n{\n\tprivate _view:View;\n\tprivate _cube:PrimitiveCubePrefab;\n\tprivate _torus:PrimitiveTorusPrefab;\n\tprivate _sprite:Sprite;\n\tprivate _sprite2:Sprite;\n\tprivate _raf:RequestAnimationFrame;\n\tprivate _image:HTMLImageElement;\n\tprivate _cameraAxis:Vector3D;\n\tprivate _light:DirectionalLight;\n\tprivate _lightPicker:StaticLightPicker;\n\n\tconstructor()\n\t{\n\t\tthis.initView();\n\t\tthis.initCamera();\n\t\tthis.initLights();\n\t\tthis.loadResources();\n\t}\n\n\t/**\n\t *\n\t */\n\tprivate initView():void\n\t{\n\t\tthis._view = new View(new DefaultRenderer());\n\t\tthis._view.backgroundColor = 0x000000;\n\t\tthis._view.camera.x = 130;\n\t\tthis._view.camera.y = 0;\n\t\tthis._view.camera.z = 0;\n\t}\n\n\t/**\n\t *\n\t */\n\tprivate initLights():void\n\t{\n\t\tthis._light = new DirectionalLight();\n\t\tthis._light.color = 0xffffff;\n\t\tthis._light.direction = new Vector3D(1, 0, 0);\n\t\tthis._light.ambient = 0.4;\n\t\tthis._light.ambientColor = 0x85b2cd;\n\t\tthis._light.diffuse = 2.8;\n\t\tthis._light.specular = 1.8;\n\n\t\tthis._lightPicker = new StaticLightPicker([this._light]);\n\t}\n\n\t/**\n\t *\n\t */\n\tprivate initCamera():void\n\t{\n\t\tthis._cameraAxis = new Vector3D(0, 0, 1);\n\t\tthis._view.camera.projection = new PerspectiveProjection(120);\n\t\tthis._view.camera.projection.near = 0.1;\n\t}\n\n\t/**\n\t *\n\t */\n\tprivate loadResources()\n\t{\n\t\tvar urlRequest:URLRequest = new URLRequest(\"assets/spacy_texture.png\");\n\t\tvar imgLoader:URLLoader = new URLLoader();\n\t\timgLoader.dataFormat = URLLoaderDataFormat.BLOB;\n\n\t\timgLoader.addEventListener(URLLoaderEvent.LOAD_COMPLETE, (event:URLLoaderEvent) => this.urlCompleteHandler(event));\n\t\timgLoader.load(urlRequest);\n\t}\n\n\t/**\n\t *\n\t * @param event\n\t */\n\tprivate urlCompleteHandler(event:URLLoaderEvent)\n\t{\n\t\tvar imageLoader:URLLoader = event.target;\n\n\t\tthis._image = ParserUtils.blobToImage(imageLoader.data);\n\n\t\tthis._image.onload = (event:Event) => this.imageCompleteHandler(event);\n\t}\n\n\t/**\n\t *\n\t * @param e\n\t */\n\tprivate imageCompleteHandler(event:Event)\n\t{\n\t\tvar matTx:MethodMaterial = new MethodMaterial(ParserUtils.imageToBitmapImage2D(this._image));\n\t\tmatTx.style.sampler = new Sampler2D(true, true);\n\t\tmatTx.blendMode = BlendMode.ADD;\n\t\tmatTx.bothSides = true;\n\t\tmatTx.lightPicker = this._lightPicker;\n\n\t\tthis._cube = new PrimitiveCubePrefab(matTx, ElementsType.TRIANGLE, 20.0, 20.0, 20.0);\n\t\tthis._torus = new PrimitiveTorusPrefab(matTx, ElementsType.TRIANGLE, 150, 80, 32, 16, true);\n\n\t\tthis._sprite = <Sprite> this._torus.getNewObject();\n\t\tthis._sprite2 = <Sprite> this._cube.getNewObject();\n\t\tthis._sprite2.x = 130;\n\t\tthis._sprite2.z = 40;\n\n\t\tthis._view.scene.addChild(this._sprite);\n\t\tthis._view.scene.addChild(this._sprite2);\n\n\t\tthis._raf = new RequestAnimationFrame(this.render, this);\n\t\tthis._raf.start();\n\n\t\twindow.onresize = (event:UIEvent) => this.onResize(event);\n\t\tthis.onResize();\n    }\n\n\t/**\n\t *\n\t * @param dt\n\t */\n\tpublic render(dt:number = null):void\n\t{\n\t\tthis._view.camera.transform.rotate(this._cameraAxis, 1);\n\t\tthis._sprite.rotationY += 1;\n\t\tthis._sprite2.rotationX += 0.4;\n\t\tthis._sprite2.rotationY += 0.4;\n\t\tthis._view.render();\n\t}\n\n\t/**\n\t *\n\t */\n\tpublic onResize(event:UIEvent = null)\n\t{\n\t\tthis._view.y = 0;\n\t\tthis._view.x = 0;\n\n\t\tthis._view.width = window.innerWidth;\n\t\tthis._view.height = window.innerHeight;\n\t}\n}\n\nwindow.onload = function()\n{\n\tnew CubePrimitive();\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/CubePrimitive.ts\n **/"],"sourceRoot":""}