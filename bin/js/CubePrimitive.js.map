{"version":3,"sources":["webpack:///./src/CubePrimitive.ts"],"names":[],"mappings":"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","file":"CubePrimitive.js","sourcesContent":["import Sampler2D\t\t\t\t\tfrom \"awayjs-core/lib/image/Sampler2D\";\r\nimport BlendMode\t\t\t\t\tfrom \"awayjs-core/lib/image/BlendMode\";\r\nimport URLLoaderEvent\t\t\t\tfrom \"awayjs-core/lib/events/URLLoaderEvent\";\r\nimport Vector3D\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\nimport URLLoader\t\t\t\t\tfrom \"awayjs-core/lib/net/URLLoader\";\r\nimport URLLoaderDataFormat\t\t\tfrom \"awayjs-core/lib/net/URLLoaderDataFormat\";\r\nimport URLRequest\t\t\t\t\tfrom \"awayjs-core/lib/net/URLRequest\";\r\nimport ParserUtils\t\t\t\t\tfrom \"awayjs-core/lib/parsers/ParserUtils\";\r\nimport PerspectiveProjection\t\tfrom \"awayjs-core/lib/projections/PerspectiveProjection\";\r\nimport RequestAnimationFrame\t\tfrom \"awayjs-core/lib/utils/RequestAnimationFrame\";\r\n\r\nimport View\t\t\t\t\t\t\tfrom \"awayjs-display/lib/View\";\r\nimport DirectionalLight\t\t\t\tfrom \"awayjs-display/lib/display/DirectionalLight\";\r\nimport Sprite\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Sprite\";\r\nimport ElementsType\t\t\t\t\tfrom \"awayjs-display/lib/graphics/ElementsType\";\r\nimport StaticLightPicker\t\t\tfrom \"awayjs-display/lib/materials/lightpickers/StaticLightPicker\";\r\nimport PrimitiveCubePrefab\t\t\tfrom \"awayjs-display/lib/prefabs/PrimitiveCubePrefab\";\r\nimport PrimitiveTorusPrefab\t\t\tfrom \"awayjs-display/lib/prefabs/PrimitiveTorusPrefab\";\r\n\r\nimport DefaultRenderer\t\t\t\tfrom \"awayjs-renderergl/lib/DefaultRenderer\";\r\n\r\nimport MethodMaterial\t\t\t\tfrom \"awayjs-methodmaterials/lib/MethodMaterial\";\r\n\r\nclass CubePrimitive\r\n{\r\n\tprivate _view:View;\r\n\tprivate _cube:PrimitiveCubePrefab;\r\n\tprivate _torus:PrimitiveTorusPrefab;\r\n\tprivate _sprite:Sprite;\r\n\tprivate _sprite2:Sprite;\r\n\tprivate _raf:RequestAnimationFrame;\r\n\tprivate _image:HTMLImageElement;\r\n\tprivate _cameraAxis:Vector3D;\r\n\tprivate _light:DirectionalLight;\r\n\tprivate _lightPicker:StaticLightPicker;\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tthis.initView();\r\n\t\tthis.initCamera();\r\n\t\tthis.initLights();\r\n\t\tthis.loadResources();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tprivate initView():void\r\n\t{\r\n\t\tthis._view = new View(new DefaultRenderer());\r\n\t\tthis._view.backgroundColor = 0x000000;\r\n\t\tthis._view.camera.x = 130;\r\n\t\tthis._view.camera.y = 0;\r\n\t\tthis._view.camera.z = 0;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tprivate initLights():void\r\n\t{\r\n\t\tthis._light = new DirectionalLight();\r\n\t\tthis._light.color = 0xffffff;\r\n\t\tthis._light.direction = new Vector3D(1, 0, 0);\r\n\t\tthis._light.ambient = 0.4;\r\n\t\tthis._light.ambientColor = 0x85b2cd;\r\n\t\tthis._light.diffuse = 2.8;\r\n\t\tthis._light.specular = 1.8;\r\n\r\n\t\tthis._lightPicker = new StaticLightPicker([this._light]);\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tprivate initCamera():void\r\n\t{\r\n\t\tthis._cameraAxis = new Vector3D(0, 0, 1);\r\n\t\tthis._view.camera.projection = new PerspectiveProjection(120);\r\n\t\tthis._view.camera.projection.near = 0.1;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tprivate loadResources()\r\n\t{\r\n\t\tvar urlRequest:URLRequest = new URLRequest(\"assets/spacy_texture.png\");\r\n\t\tvar imgLoader:URLLoader = new URLLoader();\r\n\t\timgLoader.dataFormat = URLLoaderDataFormat.BLOB;\r\n\r\n\t\timgLoader.addEventListener(URLLoaderEvent.LOAD_COMPLETE, (event:URLLoaderEvent) => this.urlCompleteHandler(event));\r\n\t\timgLoader.load(urlRequest);\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param event\r\n\t */\r\n\tprivate urlCompleteHandler(event:URLLoaderEvent)\r\n\t{\r\n\t\tvar imageLoader:URLLoader = event.target;\r\n\r\n\t\tthis._image = ParserUtils.blobToImage(imageLoader.data);\r\n\r\n\t\tthis._image.onload = (event:Event) => this.imageCompleteHandler(event);\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param e\r\n\t */\r\n\tprivate imageCompleteHandler(event:Event)\r\n\t{\r\n\t\tvar matTx:MethodMaterial = new MethodMaterial(ParserUtils.imageToBitmapImage2D(this._image));\r\n\t\tmatTx.style.sampler = new Sampler2D(true, true);\r\n\t\tmatTx.blendMode = BlendMode.ADD;\r\n\t\tmatTx.bothSides = true;\r\n\t\tmatTx.lightPicker = this._lightPicker;\r\n\r\n\t\tthis._cube = new PrimitiveCubePrefab(matTx, ElementsType.TRIANGLE, 20.0, 20.0, 20.0);\r\n\t\tthis._torus = new PrimitiveTorusPrefab(matTx, ElementsType.TRIANGLE, 150, 80, 32, 16, true);\r\n\r\n\t\tthis._sprite = <Sprite> this._torus.getNewObject();\r\n\t\tthis._sprite2 = <Sprite> this._cube.getNewObject();\r\n\t\tthis._sprite2.x = 130;\r\n\t\tthis._sprite2.z = 40;\r\n\r\n\t\tthis._view.scene.addChild(this._sprite);\r\n\t\tthis._view.scene.addChild(this._sprite2);\r\n\r\n\t\tthis._raf = new RequestAnimationFrame(this.render, this);\r\n\t\tthis._raf.start();\r\n\r\n\t\twindow.onresize = (event:UIEvent) => this.onResize(event);\r\n\t\tthis.onResize();\r\n    }\r\n\r\n\t/**\r\n\t *\r\n\t * @param dt\r\n\t */\r\n\tpublic render(dt:number = null):void\r\n\t{\r\n\t\tthis._view.camera.transform.rotate(this._cameraAxis, 1);\r\n\t\tthis._sprite.rotationY += 1;\r\n\t\tthis._sprite2.rotationX += 0.4;\r\n\t\tthis._sprite2.rotationY += 0.4;\r\n\t\tthis._view.render();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tpublic onResize(event:UIEvent = null)\r\n\t{\r\n\t\tthis._view.y = 0;\r\n\t\tthis._view.x = 0;\r\n\r\n\t\tthis._view.width = window.innerWidth;\r\n\t\tthis._view.height = window.innerHeight;\r\n\t}\r\n}\r\n\r\nwindow.onload = function()\r\n{\r\n\tnew CubePrimitive();\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/CubePrimitive.ts\n **/"],"sourceRoot":""}