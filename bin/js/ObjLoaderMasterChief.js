(function e(i,a,t){function s(n,o){if(!a[n]){if(!i[n]){var l=typeof require=="function"&&require;if(!o&&l)return l(n,!0);if(r)return r(n,!0);var d=new Error("Cannot find module '"+n+"'");throw d.code="MODULE_NOT_FOUND",d}var h=a[n]={exports:{}};i[n][0].call(h.exports,function(e){var a=i[n][1][e];return s(a?a:e)},h,h.exports,e,i,a,t)}return a[n].exports}var r=typeof require=="function"&&require;for(var n=0;n<t.length;n++)s(t[n]);return s})({"./src/ObjLoaderMasterChief.ts":[function(e,i,a){var t=e("awayjs-core/lib/data/BitmapImage2D");var s=e("awayjs-core/lib/events/LoaderEvent");var r=e("awayjs-core/lib/geom/Vector3D");var n=e("awayjs-core/lib/library/AssetLibrary");var o=e("awayjs-core/lib/net/URLRequest");var l=e("awayjs-display/lib/textures/Single2DTexture");var d=e("awayjs-core/lib/utils/Debug");var h=e("awayjs-core/lib/utils/RequestAnimationFrame");var u=e("awayjs-display/lib/containers/DisplayObjectContainer");var c=e("awayjs-display/lib/containers/View");var w=e("awayjs-display/lib/entities/DirectionalLight");var y=e("awayjs-display/lib/entities/Mesh");var f=e("awayjs-display/lib/materials/lightpickers/StaticLightPicker");var p=e("awayjs-renderergl/lib/DefaultRenderer");var b=e("awayjs-methodmaterials/lib/MethodMaterial");var v=e("awayjs-parsers/lib/OBJParser");var g=function(){function e(){var e=this;this.meshes=new Array;this.spartan=new u;this.spartanFlag=false;d.LOG_PI_ERRORS=false;d.THROW_ERRORS=false;this.view=new c(new p);this.view.camera.z=-50;this.view.camera.y=20;this.view.camera.projection.near=.1;this.view.backgroundColor=13551814;this.raf=new h(this.render,this);this.light=new w;this.light.color=12671021;this.light.direction=new r(1,0,0);this.light.ambient=.4;this.light.ambientColor=8762061;this.light.diffuse=2.8;this.light.specular=1.8;this.view.scene.addChild(this.light);this.spartan.transform.scale=new r(.25,.25,.25);this.spartan.y=0;this.view.scene.addChild(this.spartan);n.enableParser(v);var i;i=n.getLoaderSession();i.addEventListener(s.RESOURCE_COMPLETE,function(i){return e.onResourceComplete(i)});i.load(new o("assets/Halo_3_SPARTAN4.obj"));i=n.getLoaderSession();i.addEventListener(s.RESOURCE_COMPLETE,function(i){return e.onResourceComplete(i)});i.load(new o("assets/terrain.obj"));i=n.getLoaderSession();i.addEventListener(s.RESOURCE_COMPLETE,function(i){return e.onResourceComplete(i)});i.load(new o("assets/masterchief_base.png"));i=n.getLoaderSession();i.addEventListener(s.RESOURCE_COMPLETE,function(i){return e.onResourceComplete(i)});i.load(new o("assets/stone_tx.jpg"));window.onresize=function(i){return e.onResize()};this.raf.start()}e.prototype.render=function(){if(this.terrain)this.terrain.rotationY+=.4;this.spartan.rotationY+=.4;this.view.render()};e.prototype.onResourceComplete=function(e){var i=e.target;var a=i.baseDependency.assets.length;console.log("------------------------------------------------------------------------------");console.log("away.events.LoaderEvent.RESOURCE_COMPLETE",e,a,i);console.log("------------------------------------------------------------------------------");var i=e.target;var a=i.baseDependency.assets.length;for(var s=0;s<a;s++){var r=i.baseDependency.assets[s];console.log(r.name,e.url);switch(r.assetType){case y.assetType:if(e.url=="assets/Halo_3_SPARTAN4.obj"){var n=r;this.spartan.addChild(n);this.spartanFlag=true;this.meshes.push(n)}else if(e.url=="assets/terrain.obj"){this.terrain=r;this.terrain.y=98;this.terrain.geometry.scaleUV(20,20);this.view.scene.addChild(this.terrain)}break;case t.assetType:if(e.url=="assets/masterchief_base.png"){this.mat=new b(new l(r),true,true,false);this.mat.lightPicker=new f([this.light])}else if(e.url=="assets/stone_tx.jpg"){this.terrainMaterial=new b(new l(r),true,true,false);this.terrainMaterial.lightPicker=new f([this.light])}break}}if(this.terrain&&this.terrainMaterial)this.terrain.material=this.terrainMaterial;if(this.mat&&this.spartanFlag)for(var s=0;s<this.meshes.length;s++)this.meshes[s].material=this.mat;this.onResize()};e.prototype.onResize=function(e){if(e===void 0){e=null}this.view.y=0;this.view.x=0;this.view.width=window.innerWidth;this.view.height=window.innerHeight};return e}();window.onload=function(){new g}},{"awayjs-core/lib/data/BitmapImage2D":undefined,"awayjs-core/lib/events/LoaderEvent":undefined,"awayjs-core/lib/geom/Vector3D":undefined,"awayjs-core/lib/library/AssetLibrary":undefined,"awayjs-core/lib/net/URLRequest":undefined,"awayjs-core/lib/utils/Debug":undefined,"awayjs-core/lib/utils/RequestAnimationFrame":undefined,"awayjs-display/lib/containers/DisplayObjectContainer":undefined,"awayjs-display/lib/containers/View":undefined,"awayjs-display/lib/entities/DirectionalLight":undefined,"awayjs-display/lib/entities/Mesh":undefined,"awayjs-display/lib/materials/lightpickers/StaticLightPicker":undefined,"awayjs-display/lib/textures/Single2DTexture":undefined,"awayjs-methodmaterials/lib/MethodMaterial":undefined,"awayjs-parsers/lib/OBJParser":undefined,"awayjs-renderergl/lib/DefaultRenderer":undefined}]},{},["./src/ObjLoaderMasterChief.ts"]);

//# sourceMappingURL=ObjLoaderMasterChief.js.map