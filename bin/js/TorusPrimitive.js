(function e(t,i,r){function s(n,o){if(!i[n]){if(!t[n]){var h=typeof require=="function"&&require;if(!o&&h)return h(n,!0);if(a)return a(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[n]={exports:{}};t[n][0].call(u.exports,function(e){var i=t[n][1][e];return s(i?i:e)},u,u.exports,e,t,i,r)}return i[n].exports}var a=typeof require=="function"&&require;for(var n=0;n<r.length;n++)s(r[n]);return s})({1:[function(e,t,i){var r=e("awayjs-core/lib/events/Event");var s=e("awayjs-core/lib/net/URLLoader");var a=e("awayjs-core/lib/net/URLLoaderDataFormat");var n=e("awayjs-core/lib/net/URLRequest");var o=e("awayjs-core/lib/parsers/ParserUtils");var h=e("awayjs-core/lib/textures/ImageTexture");var l=e("awayjs-core/lib/utils/RequestAnimationFrame");var u=e("awayjs-display/lib/containers/View");var p=e("awayjs-display/lib/entities/DirectionalLight");var c=e("awayjs-display/lib/prefabs/PrimitiveTorusPrefab");var d=e("awayjs-display/lib/materials/lightpickers/StaticLightPicker");var f=e("awayjs-renderergl/lib/DefaultRenderer");var _=e("awayjs-methodmaterials/lib/MethodMaterial");var y=e("awayjs-methodmaterials/lib/pool/MethodRendererPool");var g=function(){function e(){var e=this;this.initView();this._raf=new l(this.render,this);this._raf.start();this.loadResources();window.onresize=function(t){return e.onResize(t)};this.onResize()}e.prototype.initView=function(){this._view=new u(new f(y));this._view.backgroundColor=0};e.prototype.loadResources=function(){var e=this;var t=new s;t.dataFormat=a.BLOB;t.addEventListener(r.COMPLETE,function(t){return e.urlCompleteHandler(t)});t.load(new n("assets/dots.png"))};e.prototype.urlCompleteHandler=function(e){var t=this;this._image=o.blobToImage(e.target.data);this._image.onload=function(e){return t.imageCompleteHandler(e)}};e.prototype.initLights=function(){this._light=new p;this._light.diffuse=.7;this._light.specular=1;this._view.scene.addChild(this._light);this._lightPicker=new d([this._light])};e.prototype.initMaterial=function(e){this._texture=new h(e);this._material=new _(this._texture,true,true,false);this._material.lightPicker=this._lightPicker};e.prototype.initTorus=function(){this._torus=new c(220,80,32,16,false);this._mesh=this._torus.getNewObject();this._mesh.material=this._material;this._view.scene.addChild(this._mesh)};e.prototype.imageCompleteHandler=function(e){this.initLights();this.initMaterial(e.target);this.initTorus()};e.prototype.render=function(e){if(e===void 0){e=null}if(this._mesh)this._mesh.rotationY+=1;this._view.render()};e.prototype.onResize=function(e){if(e===void 0){e=null}this._view.y=0;this._view.x=0;this._view.width=window.innerWidth;this._view.height=window.innerHeight};return e}();window.onload=function(){new g}},{"awayjs-core/lib/events/Event":7,"awayjs-core/lib/net/URLLoader":17,"awayjs-core/lib/net/URLLoaderDataFormat":18,"awayjs-core/lib/net/URLRequest":19,"awayjs-core/lib/parsers/ParserUtils":22,"awayjs-core/lib/textures/ImageTexture":23,"awayjs-core/lib/utils/RequestAnimationFrame":30,"awayjs-display/lib/containers/View":52,"awayjs-display/lib/entities/DirectionalLight":54,"awayjs-display/lib/materials/lightpickers/StaticLightPicker":68,"awayjs-display/lib/prefabs/PrimitiveTorusPrefab":90,"awayjs-methodmaterials/lib/MethodMaterial":129,"awayjs-methodmaterials/lib/pool/MethodRendererPool":144,"awayjs-renderergl/lib/DefaultRenderer":303}],2:[function(e,t,i){var r=e("awayjs-core/lib/geom/Rectangle");var s=e("awayjs-core/lib/utils/ColorUtils");var a=function(){function e(e,t,i,s){if(i===void 0){i=true}if(s===void 0){s=null}this._locked=false;this._transparent=i;this._imageCanvas=document.createElement("canvas");this._imageCanvas.width=e;this._imageCanvas.height=t;this._context=this._imageCanvas.getContext("2d");this._rect=new r(0,0,e,t);if(s!=null)this.fillRect(this._rect,s)}Object.defineProperty(e.prototype,"height",{get:function(){return this._rect.height},set:function(e){if(this._rect.height==e)return;this._rect.height=e;if(this._locked)this._context.putImageData(this._imageData,0,0);this._imageCanvas.height=e;if(this._locked)this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"rect",{get:function(){return this._rect},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"transparent",{get:function(){return this._transparent},set:function(e){this._transparent=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"width",{get:function(){return this._rect.width},set:function(e){if(this._rect.width==e)return;this._rect.width=e;if(this._locked)this._context.putImageData(this._imageData,0,0);this._imageCanvas.width=e;if(this._locked)this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height)},enumerable:true,configurable:true});e.prototype.clone=function(){var t=new e(this.width,this.height,this.transparent);t.draw(this);return t};e.prototype.colorTransform=function(e,t){if(!this._locked)this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height);var i=this._imageData.data;var r,s,a;for(r=0;r<e.width;++r){for(s=0;s<e.height;++s){a=(r+e.x+(s+e.y)*this.width)*4;i[a]=i[a]*t.redMultiplier+t.redOffset;i[a+1]=i[a+1]*t.greenMultiplier+t.greenOffset;i[a+2]=i[a+2]*t.blueMultiplier+t.blueOffset;i[a+3]=i[a+3]*t.alphaMultiplier+t.alphaOffset}}if(!this._locked){this._context.putImageData(this._imageData,0,0);this._imageData=null}};e.prototype.copyChannel=function(e,t,i,r,s){var a=e.imageData;if(!this._locked)this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height);var n=e.imageData.data;var o=this._imageData.data;var h=Math.round(Math.log(r)/Math.log(2));var l=Math.round(Math.log(s)/Math.log(2));var u,p,c,d;for(u=0;u<t.width;++u){for(p=0;p<t.height;++p){c=(u+t.x+(p+t.y)*e.width)*4;d=(u+i.x+(p+i.y)*this.width)*4;o[d+l]=n[c+h]}}if(!this._locked){this._context.putImageData(this._imageData,0,0);this._imageData=null}};e.prototype.copyPixels=function(e,t,i){if(this._locked){if(this._imageData)this._context.putImageData(this._imageData,0,0);this._copyPixels(e,t,i);if(this._imageData)this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height)}else{this._copyPixels(e,t,i)}};e.prototype.dispose=function(){this._context=null;this._imageCanvas=null;this._imageData=null;this._rect=null;this._transparent=null;this._locked=null};e.prototype.draw=function(e,t,i,r,s,a){if(this._locked){this._context.putImageData(this._imageData,0,0);this._draw(e,t,i,r,s,a);this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height)}else{this._draw(e,t,i,r,s,a)}};e.prototype.fillRect=function(e,t){if(this._locked){if(this._imageData)this._context.putImageData(this._imageData,0,0);this._fillRect(e,t);if(this._imageData)this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height)}else{this._fillRect(e,t)}};e.prototype.getPixel=function(e,t){var i;var r;var s;var a;if(!this._locked){var n=this._context.getImageData(e,t,1,1);i=n.data[0];r=n.data[1];s=n.data[2];a=n.data[3]}else{var o=(e+t*this._imageCanvas.width)*4;i=this._imageData.data[o+0];r=this._imageData.data[o+1];s=this._imageData.data[o+2];a=this._imageData.data[o+3]}if(!a)return 0;return i<<16|r<<8|s};e.prototype.getPixel32=function(e,t){var i;var r;var s;var a;if(!this._locked){var n=this._context.getImageData(e,t,1,1);i=n.data[0];r=n.data[1];s=n.data[2];a=n.data[3]}else{var o=(e+t*this._imageCanvas.width)*4;i=this._imageData.data[o+0];r=this._imageData.data[o+1];s=this._imageData.data[o+2];a=this._imageData.data[o+3]}return a<<24|i<<16|r<<8|s};e.prototype.lock=function(){if(this._locked)return;this._locked=true;this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height)};e.prototype.setArray=function(e,t){if(!this._locked)this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height);var i,r,a,n;for(i=0;i<e.width;++i){for(r=0;r<e.height;++r){n=s.float32ColorToARGB(t[i+r*e.width]);a=(i+e.x+(r+e.y)*this._imageCanvas.width)*4;this._imageData.data[a+0]=n[1];this._imageData.data[a+1]=n[2];this._imageData.data[a+2]=n[3];this._imageData.data[a+3]=n[0]}}if(!this._locked){this._context.putImageData(this._imageData,0,0);this._imageData=null}};e.prototype.setPixel=function(e,t,i){var r=s.float32ColorToARGB(i);if(!this._locked)this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height);var a=(e+t*this._imageCanvas.width)*4;this._imageData.data[a+0]=r[1];this._imageData.data[a+1]=r[2];this._imageData.data[a+2]=r[3];this._imageData.data[a+3]=255;if(!this._locked){this._context.putImageData(this._imageData,0,0);this._imageData=null}};e.prototype.setPixel32=function(e,t,i){var r=s.float32ColorToARGB(i);if(!this._locked)this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height);var a=(e+t*this._imageCanvas.width)*4;this._imageData.data[a+0]=r[1];this._imageData.data[a+1]=r[2];this._imageData.data[a+2]=r[3];this._imageData.data[a+3]=r[0];if(!this._locked){this._context.putImageData(this._imageData,0,0);this._imageData=null}};e.prototype.setPixels=function(e,t){if(!this._locked)this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height);t.position=0;var i,r,s;for(i=0;i<e.width;++i){for(r=0;r<e.height;++r){s=(i+e.x+(r+e.y)*this._imageCanvas.width)*4;this._imageData.data[s+0]=t.readUnsignedInt();this._imageData.data[s+1]=t.readUnsignedInt();this._imageData.data[s+2]=t.readUnsignedInt();this._imageData.data[s+3]=t.readUnsignedInt()}}if(!this._locked){this._context.putImageData(this._imageData,0,0);this._imageData=null}};e.prototype.unlock=function(){if(!this._locked)return;this._locked=false;this._context.putImageData(this._imageData,0,0);this._imageData=null};e.prototype._copyPixels=function(t,i,r){if(t instanceof e){this._context.drawImage(t.canvas,i.x,i.y,i.width,i.height,r.x,r.y,r.width,r.height)}else if(t instanceof HTMLImageElement){this._context.drawImage(t,i.x,i.y,i.width,i.height,r.x,r.y,r.width,r.height)}};e.prototype._draw=function(t,i,r,s,a,n){if(t instanceof e){this._context.save();if(i!=null)this._context.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty);if(a!=null)this._context.drawImage(t.canvas,a.x,a.y,a.width,a.height);else this._context.drawImage(t.canvas,0,0);this._context.restore()}else if(t instanceof HTMLElement){this._context.save();if(i!=null)this._context.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty);if(a!=null)this._context.drawImage(t,a.x,a.y,a.width,a.height);else this._context.drawImage(t,0,0);this._context.restore()}};e.prototype._fillRect=function(e,t){if(t==0&&this._transparent){this._context.clearRect(e.x,e.y,e.width,e.height)}else{var i=s.float32ColorToARGB(t);if(this._transparent)this._context.fillStyle="rgba("+i[1]+","+i[2]+","+i[3]+","+i[0]/255+")";else this._context.fillStyle="rgba("+i[1]+","+i[2]+","+i[3]+",1)";this._context.fillRect(e.x,e.y,e.width,e.height)}};Object.defineProperty(e.prototype,"imageData",{get:function(){if(!this._locked)return this._context.getImageData(0,0,this._rect.width,this._rect.height);return this._imageData},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"canvas",{get:function(){return this._imageCanvas},enumerable:true,configurable:true});return e}();t.exports=a},{"awayjs-core/lib/geom/Rectangle":14,"awayjs-core/lib/utils/ColorUtils":29}],3:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/errors/Error");var a=function(e){r(t,e);function t(t,i){if(t===void 0){t=null}if(i===void 0){i=0}e.call(this,t||"An abstract method was called! Either an instance of an abstract class was created, or an abstract method was not overridden by the subclass.",i)}return t}(s);t.exports=a},{"awayjs-core/lib/errors/Error":5}],4:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/errors/Error");var a=function(e){r(t,e);function t(t,i){if(t===void 0){t=null}if(i===void 0){i=0}e.call(this,t||"ArgumentError",i)}return t}(s);t.exports=a},{"awayjs-core/lib/errors/Error":5}],5:[function(e,t,i){var r=function(){function e(e,t,i){if(e===void 0){e=""}if(t===void 0){t=0}if(i===void 0){i=""}this._errorID=0;this._messsage="";this._name="";this._messsage=e;this._name=name;this._errorID=t}Object.defineProperty(e.prototype,"message",{get:function(){return this._messsage},set:function(e){this._messsage=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"errorID",{get:function(){return this._errorID},enumerable:true,configurable:true});return e}();t.exports=r},{}],6:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/events/Event");var a=function(e){r(t,e);function t(t,i,r){if(i===void 0){i=null}if(r===void 0){r=null}e.call(this,t);this._asset=i;this._prevName=r||(this._asset?this._asset.name:null)}Object.defineProperty(t.prototype,"asset",{get:function(){return this._asset},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"assetPrevName",{get:function(){return this._prevName},enumerable:true,configurable:true});t.prototype.clone=function(){return new t(this.type,this.asset,this.assetPrevName)};t.ASSET_COMPLETE="assetComplete";t.ASSET_RENAME="assetRename";t.ASSET_CONFLICT_RESOLVED="assetConflictResolved";t.TEXTURE_SIZE_ERROR="textureSizeError";return t}(s);t.exports=a},{"awayjs-core/lib/events/Event":7}],7:[function(e,t,i){var r=function(){function e(e){this.type=undefined;this.target=undefined;this.type=e}e.prototype.clone=function(){return new e(this.type)};e.COMPLETE="complete";e.OPEN="open";e.ENTER_FRAME="enterFrame";e.EXIT_FRAME="exitFrame";e.RESIZE="resize";e.ERROR="error";e.CHANGE="change";return e}();t.exports=r},{}],8:[function(e,t,i){var r=function(){function e(e){if(e===void 0){e=null}this.listeners=new Array;this.target=e||this}e.prototype.addEventListener=function(e,t){if(this.listeners[e]===undefined)this.listeners[e]=new Array;if(this.getEventListenerIndex(e,t)===-1)this.listeners[e].push(t)};e.prototype.removeEventListener=function(e,t){var i=this.getEventListenerIndex(e,t);if(i!==-1)this.listeners[e].splice(i,1)};e.prototype.dispatchEvent=function(e){var t=this.listeners[e.type];if(t!==undefined){var i=t.length;e.target=this.target;for(var r=0;r<i;r++)t[r](e)}};e.prototype.getEventListenerIndex=function(e,t){if(this.listeners[e]!==undefined){var i=this.listeners[e];var r=i.length;for(var s=0;s<r;s++)if(t==i[s])return s}return-1};e.prototype.hasEventListener=function(e,t){if(t!=null){return this.getEventListenerIndex(e,t)!==-1}else{if(this.listeners[e]!==undefined)return this.listeners[e].length>0;return false}return false};return e}();t.exports=r},{}],9:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/events/Event");var a=function(e){r(t,e);function t(t,i){if(i===void 0){i=null}e.call(this,t);this.status=i}t.HTTP_STATUS="httpStatus";return t}(s);t.exports=a},{"awayjs-core/lib/events/Event":7}],10:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/events/Event");var a=function(e){r(t,e);function t(t){e.call(this,t)}t.IO_ERROR="ioError";return t}(s);t.exports=a},{"awayjs-core/lib/events/Event":7}],11:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/events/Event");var a=function(e){r(t,e);function t(t){e.call(this,t)}t.PROGRESS="progress";return t}(s);t.exports=a},{"awayjs-core/lib/events/Event":7}],12:[function(e,t,i){var r=e("awayjs-core/lib/geom/Point");var s=e("awayjs-core/lib/errors/ArgumentError");var a=function(){function e(e,t,i,r,s,a){if(e===void 0){e=1}if(t===void 0){t=0}if(i===void 0){i=0}if(r===void 0){r=1}if(s===void 0){s=0}if(a===void 0){a=0}this.a=e;this.b=t;this.c=i;this.d=r;this.tx=s;this.ty=a}e.prototype.clone=function(){return new e(this.a,this.b,this.c,this.d,this.tx,this.ty)};e.prototype.concat=function(e){var t=this.a*e.a+this.b*e.c;this.b=this.a*e.b+this.b*e.d;this.a=t;var i=this.c*e.a+this.d*e.c;this.d=this.c*e.b+this.d*e.d;this.c=i;var r=this.tx*e.a+this.ty*e.c+e.tx;this.ty=this.tx*e.b+this.ty*e.d+e.ty;this.tx=r};e.prototype.copyColumnFrom=function(e,t){if(e>2){throw"Column "+e+" out of bounds (2)"}else if(e==0){this.a=t.x;this.c=t.y}else if(e==1){this.b=t.x;this.d=t.y}else{this.tx=t.x;this.ty=t.y}};e.prototype.copyColumnTo=function(e,t){if(e>2){throw new s("ArgumentError, Column "+e+" out of bounds [0, ..., 2]")}else if(e==0){t.x=this.a;t.y=this.c;t.z=0}else if(e==1){t.x=this.b;t.y=this.d;t.z=0}else{t.x=this.tx;t.y=this.ty;t.z=1}};e.prototype.copyFrom=function(e){this.a=e.a;this.b=e.b;this.c=e.c;this.d=e.d;this.tx=e.tx;this.ty=e.ty};e.prototype.copyRowFrom=function(e,t){if(e>2){throw new s("ArgumentError, Row "+e+" out of bounds [0, ..., 2]")}else if(e==0){this.a=t.x;this.c=t.y}else if(e==1){this.b=t.x;this.d=t.y}else{this.tx=t.x;this.ty=t.y}};e.prototype.copyRowTo=function(e,t){if(e>2){throw new s("ArgumentError, Row "+e+" out of bounds [0, ..., 2]")}else if(e==0){t.x=this.a;t.y=this.b;t.z=this.tx}else if(e==1){t.x=this.c;t.y=this.d;t.z=this.ty}else{t.setTo(0,0,1)}};e.prototype.createBox=function(e,t,i,r,s){if(i===void 0){i=0}if(r===void 0){r=0}if(s===void 0){s=0}this.a=e;this.d=t;this.b=i;this.tx=r;this.ty=s};e.prototype.createGradientBox=function(e,t,i,r,s){if(i===void 0){i=0}if(r===void 0){r=0}if(s===void 0){s=0}this.a=e/1638.4;this.d=t/1638.4;if(i!=0){var a=Math.cos(i);var n=Math.sin(i);this.b=n*this.d;this.c=-n*this.a;this.a*=a;this.d*=a}else{this.b=this.c=0}this.tx=r+e/2;this.ty=s+t/2};e.prototype.deltaTransformPoint=function(e){return new r(e.x*this.a+e.y*this.c,e.x*this.b+e.y*this.d)};e.prototype.identity=function(){this.a=1;this.b=0;this.c=0;this.d=1;this.tx=0;this.ty=0};e.prototype.invert=function(){var e=this.a*this.d-this.b*this.c;if(e==0){this.a=this.b=this.c=this.d=0;this.tx=-this.tx;this.ty=-this.ty}else{e=1/e;var t=this.d*e;this.d=this.a*e;this.a=t;this.b*=-e;this.c*=-e;var i=-this.a*this.tx-this.c*this.ty;this.ty=-this.b*this.tx-this.d*this.ty;this.tx=i}};e.prototype.multiply=function(t){var i=new e;i.a=this.a*t.a+this.b*t.c;i.b=this.a*t.b+this.b*t.d;i.c=this.c*t.a+this.d*t.c;i.d=this.c*t.b+this.d*t.d;i.tx=this.tx*t.a+this.ty*t.c+t.tx;i.ty=this.tx*t.b+this.ty*t.d+t.ty;return i};e.prototype.rotate=function(e){var t=Math.cos(e);var i=Math.sin(e);var r=this.a*t-this.b*i;this.b=this.a*i+this.b*t;this.a=r;var s=this.c*t-this.d*i;this.d=this.c*i+this.d*t;this.c=s;var a=this.tx*t-this.ty*i;this.ty=this.tx*i+this.ty*t;this.tx=a};e.prototype.scale=function(e,t){this.a*=e;this.b*=t;this.c*=e;this.d*=t;this.tx*=e;this.ty*=t};e.prototype.setTo=function(e,t,i,r,s,a){this.a=e;this.b=t;this.c=i;this.d=r;this.tx=s;this.ty=a};e.prototype.toString=function(){return"[Matrix] (a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"};e.prototype.transformPoint=function(e){return new r(e.x*this.a+e.y*this.c+this.tx,e.x*this.b+e.y*this.d+this.ty)};e.prototype.translate=function(e,t){this.tx+=e;this.ty+=t};return e}();t.exports=a},{"awayjs-core/lib/errors/ArgumentError":4,"awayjs-core/lib/geom/Point":13}],13:[function(e,t,i){var r=function(){function e(e,t){if(e===void 0){e=0}if(t===void 0){t=0}this.x=e;this.y=t}Object.defineProperty(e.prototype,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:true,configurable:true});e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)};e.prototype.clone=function(){return new e(this.x,this.y)};e.prototype.copyFrom=function(e){};e.prototype.equals=function(e){return this.x==e.x&&this.y==e.y};e.prototype.normalize=function(e){if(e===void 0){e=1}if(this.length!=0){var t=e/this.length;this.x*=t;this.y*=t;return}throw"Cannot divide by zero length."};e.prototype.offset=function(e,t){this.x+=e;this.y+=t};e.prototype.setTo=function(e,t){};e.prototype.subtract=function(t){return new e(this.x-t.x,this.y-t.y)};e.prototype.toString=function(){return"[Point] (x="+this.x+", y="+this.y+")"};e.distance=function(e,t){var i=t.x-e.x;var r=t.y-e.y;return Math.sqrt(i*i+r*r)};e.interpolate=function(t,i,r){return new e(i.x+(t.x-i.x)*r,i.y+(t.y-i.y)*r)};e.polar=function(t,i){return new e(t*Math.cos(i),t*Math.sin(i))};return e}();t.exports=r},{}],14:[function(e,t,i){var r=e("awayjs-core/lib/geom/Point");var s=function(){function e(e,t,i,r){if(e===void 0){e=0}if(t===void 0){t=0}if(i===void 0){i=0}if(r===void 0){r=0}this.x=e;this.y=t;this.width=i;this.height=r}Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"bottomRight",{get:function(){if(this._bottomRight==null)this._bottomRight=new r;this._bottomRight.x=this.x+this.width;this._bottomRight.y=this.y+this.height;return this._bottomRight},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"size",{get:function(){if(this._size==null)this._size=new r;this._size.x=this.width;this._size.y=this.height;return this._size},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"topLeft",{get:function(){if(this._topLeft==null)this._topLeft=new r;this._topLeft.x=this.x;this._topLeft.y=this.y;return this._topLeft},enumerable:true,configurable:true});e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)};e.prototype.contains=function(e,t){return this.x<=e&&this.x+this.width>=e&&this.y<=t&&this.y+this.height>=t};e.prototype.containsPoint=function(e){return this.x<=e.x&&this.x+this.width>=e.x&&this.y<=e.y&&this.y+this.height>=e.y};e.prototype.containsRect=function(e){return this.x<=e.x&&this.x+this.width>=e.x+e.width&&this.y<=e.y&&this.y+this.height>=e.y+e.height};e.prototype.copyFrom=function(e){};e.prototype.equals=function(e){return this.x==e.x&&this.y==e.y&&this.width==e.width&&this.height==e.height};e.prototype.inflate=function(e,t){this.x-=e/2;this.y-=t/2;this.width+=e/2;this.height+=t/2};e.prototype.inflatePoint=function(e){this.x-=e.x/2;this.y-=e.y/2;this.width+=e.x/2;this.height+=e.y/2};e.prototype.intersection=function(t){if(this.intersects(t)){var i=new e;if(this.x>t.x){i.x=this.x;i.width=t.x-this.x+t.width;if(i.width>this.width)i.width=this.width}else{i.x=t.x;i.width=this.x-t.x+this.width;if(i.width>t.width)i.width=t.width}if(this.y>t.y){i.y=this.y;i.height=t.y-this.y+t.height;if(i.height>this.height)i.height=this.height}else{i.y=t.y;i.height=this.y-t.y+this.height;if(i.height>t.height)i.height=t.height}return i}return new e};e.prototype.intersects=function(e){return this.x+this.width>e.x&&this.x<e.x+e.width&&this.y+this.height>e.y&&this.y<e.y+e.height};e.prototype.isEmpty=function(){return this.x==0&&this.y==0&&this.width==0&&this.height==0};e.prototype.offset=function(e,t){this.x+=e;this.y+=t};e.prototype.offsetPoint=function(e){this.x+=e.x;this.y+=e.y};e.prototype.setEmpty=function(){this.x=0;this.y=0;this.width=0;this.height=0};e.prototype.setTo=function(e,t,i,r){this.x=e;this.y=t;this.width=i;this.height=r};e.prototype.toString=function(){return"[Rectangle] (x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"};e.prototype.union=function(t){var i=new e;if(this.x<t.x){i.x=this.x;i.width=t.x-this.x+t.width;if(i.width<this.width)i.width=this.width}else{i.x=t.x;i.width=this.x-t.x+this.width;if(i.width<t.width)i.width=t.width}if(this.y<t.y){i.y=this.y;i.height=t.y-this.y+t.height;if(i.height<this.height)i.height=this.height}else{i.y=t.y;i.height=this.y-t.y+this.height;if(i.height<t.height)i.height=t.height}return i};return e}();t.exports=s},{"awayjs-core/lib/geom/Point":13}],15:[function(e,t,i){var r=function(){function e(){}e.ANIMATION_NODE="animationNode";e.ANIMATION_SET="animationSet";e.ANIMATION_STATE="animationState";e.ANIMATOR="animator";e.BILLBOARD="billboard";e.CAMERA="camera";e.CONTAINER="container";e.EFFECTS_METHOD="effectsMethod";e.GEOMETRY="geometry";e.LINE_SEGMENT="lineSegment";e.LIGHT="light";e.LIGHT_PICKER="lightPicker";e.MATERIAL="material";e.MESH="mesh";e.TRIANGLE_SUB_MESH="triangleSubMesh";e.LINE_SUB_MESH="lineSubMesh";e.PRIMITIVE_PREFAB="primitivePrefab";e.SHADOW_MAP_METHOD="shadowMapMethod";e.SKELETON="skeleton";e.SKELETON_POSE="skeletonPose";e.SKYBOX="skybox";e.STATE_TRANSITION="stateTransition";e.TEXTURE="texture";e.TEXTURE_PROJECTOR="textureProjector";e.TIMELINE="timeline";return e}();t.exports=r},{}],16:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/errors/AbstractMethodError");var a=e("awayjs-core/lib/events/AssetEvent");var n=e("awayjs-core/lib/events/EventDispatcher");var o=function(e){r(t,e);function t(i){if(i===void 0){i=null}e.call(this);this._id=t.ID_COUNT++;if(i==null)i="null";this._name=i;this._originalName=i;this.updateFullPath()}Object.defineProperty(t.prototype,"assetType",{get:function(){throw new s},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"originalName",{get:function(){return this._originalName},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(e){var t;t=this._name;this._name=e;if(this._name==null)this._name="null";this.updateFullPath();this.dispatchEvent(new a(a.ASSET_RENAME,this,t))},enumerable:true,configurable:true});t.prototype.dispose=function(){throw new s};Object.defineProperty(t.prototype,"assetNamespace",{get:function(){return this._namespace},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"assetFullPath",{get:function(){return this._full_path},enumerable:true,configurable:true});t.prototype.assetPathEquals=function(e,t){return this._name==e&&(!t||this._namespace==t)};t.prototype.resetAssetPath=function(e,i,r){if(i===void 0){i=null}if(r===void 0){r=true}this._name=e?e:"null";this._namespace=i?i:t.DEFAULT_NAMESPACE;if(r)this._originalName=this._name;this.updateFullPath()};t.prototype.updateFullPath=function(){this._full_path=[this._namespace,this._name]};t.ID_COUNT=0;t.DEFAULT_NAMESPACE="default";return t}(n);t.exports=o},{"awayjs-core/lib/errors/AbstractMethodError":3,"awayjs-core/lib/events/AssetEvent":6,"awayjs-core/lib/events/EventDispatcher":8}],17:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/net/URLLoaderDataFormat");var a=e("awayjs-core/lib/net/URLRequestMethod");var n=e("awayjs-core/lib/net/URLVariables");var o=e("awayjs-core/lib/events/Event");var h=e("awayjs-core/lib/events/EventDispatcher");var l=e("awayjs-core/lib/events/HTTPStatusEvent");var u=e("awayjs-core/lib/events/IOErrorEvent");var p=e("awayjs-core/lib/events/ProgressEvent");var c=function(e){r(t,e);function t(){e.call(this);this._bytesLoaded=0;this._bytesTotal=0;this._dataFormat=s.TEXT;this._loadError=false}Object.defineProperty(t.prototype,"url",{get:function(){return this._request?this._request.url:""},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"dataFormat",{get:function(){return this._dataFormat},set:function(e){this._dataFormat=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bytesLoaded",{get:function(){return this._bytesLoaded},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bytesTotal",{get:function(){return this._bytesTotal},enumerable:true,configurable:true});t.prototype.load=function(e){this._request=e;this.initXHR();if(e.method===a.POST)this.postRequest(e);else this.getRequest(e)};t.prototype.close=function(){this._XHR.abort();this.disposeXHR()};t.prototype.dispose=function(){if(this._XHR)this._XHR.abort();this.disposeXHR();this._data=null;this._dataFormat=null;this._bytesLoaded=null;this._bytesTotal=null};t.prototype.setResponseType=function(e,t){switch(t){case s.ARRAY_BUFFER:case s.BLOB:case s.TEXT:e.responseType=t;break;case s.VARIABLES:e.responseType=s.TEXT;break;case s.BINARY:e.responseType="";break;default:}};t.prototype.getRequest=function(e){try{this._XHR.open(e.method,e.url,e.async);this.setResponseType(this._XHR,this._dataFormat);this._XHR.send()}catch(t){this.handleXmlHttpRequestException(t)}};t.prototype.postRequest=function(e){this._loadError=false;this._XHR.open(e.method,e.url,e.async);if(e.data!=null){if(e.data instanceof n){var t=e.data;try{this._XHR.responseType="text";this._XHR.send(t.formData)}catch(i){this.handleXmlHttpRequestException(i)}}else{this.setResponseType(this._XHR,this._dataFormat);if(e.data)this._XHR.send(e.data);else this._XHR.send()}}else{this._XHR.send()}};t.prototype.handleXmlHttpRequestException=function(e){switch(e.code){case 101:break}};t.prototype.initXHR=function(){var e=this;if(!this._XHR){this._XHR=new XMLHttpRequest;this._XHR.onloadstart=function(t){return e.onLoadStart(t)};this._XHR.onprogress=function(t){return e.onProgress(t)};this._XHR.onabort=function(t){return e.onAbort(t)};this._XHR.onerror=function(t){return e.onLoadError(t)};this._XHR.onload=function(t){return e.onLoadComplete(t)};this._XHR.ontimeout=function(t){return e.onTimeOut(t)};this._XHR.onloadend=function(t){return e.onLoadEnd(t)};this._XHR.onreadystatechange=function(t){return e.onReadyStateChange(t)}}};t.prototype.disposeXHR=function(){if(this._XHR!==null){this._XHR.onloadstart=null;this._XHR.onprogress=null;this._XHR.onabort=null;this._XHR.onerror=null;this._XHR.onload=null;this._XHR.ontimeout=null;this._XHR.onloadend=null;this._XHR=null}};t.prototype.decodeURLVariables=function(e){var t=new Object;e=e.split("+").join(" ");var i,r=/[?&]?([^=]+)=([^&]*)/g;while(i=r.exec(e))t[decodeURIComponent(i[1])]=decodeURIComponent(i[2]);return t};t.prototype.onReadyStateChange=function(e){if(this._XHR.readyState==4){if(this._XHR.status==404){this._loadError=true;if(!this._loadErrorEvent)this._loadErrorEvent=new u(u.IO_ERROR);this.dispatchEvent(this._loadErrorEvent)}this.dispatchEvent(new l(l.HTTP_STATUS,this._XHR.status))}};t.prototype.onLoadEnd=function(e){if(this._loadError===true)return};t.prototype.onTimeOut=function(e){};t.prototype.onAbort=function(e){};t.prototype.onProgress=function(e){if(!this._progressEvent)this._progressEvent=new p(p.PROGRESS);this._progressEvent.bytesTotal=e.total;this._progressEvent.bytesLoaded=e.loaded;this.dispatchEvent(this._progressEvent)};t.prototype.onLoadStart=function(e){if(!this._loadStartEvent)this._loadStartEvent=new o(o.OPEN);this.dispatchEvent(this._loadStartEvent)};t.prototype.onLoadComplete=function(e){if(this._loadError===true)return;switch(this._dataFormat){case s.TEXT:this._data=this._XHR.responseText;break;case s.VARIABLES:this._data=this.decodeURLVariables(this._XHR.responseText);
break;case s.BLOB:case s.ARRAY_BUFFER:case s.BINARY:this._data=this._XHR.response;break;default:this._data=this._XHR.responseText;break}if(!this._loadCompleteEvent)this._loadCompleteEvent=new o(o.COMPLETE);this.dispatchEvent(this._loadCompleteEvent)};t.prototype.onLoadError=function(e){this._loadError=true;if(!this._loadErrorEvent)this._loadErrorEvent=new u(u.IO_ERROR);this.dispatchEvent(this._loadErrorEvent)};return t}(h);t.exports=c},{"awayjs-core/lib/events/Event":7,"awayjs-core/lib/events/EventDispatcher":8,"awayjs-core/lib/events/HTTPStatusEvent":9,"awayjs-core/lib/events/IOErrorEvent":10,"awayjs-core/lib/events/ProgressEvent":11,"awayjs-core/lib/net/URLLoaderDataFormat":18,"awayjs-core/lib/net/URLRequestMethod":20,"awayjs-core/lib/net/URLVariables":21}],18:[function(e,t,i){var r=function(){function e(){}e.TEXT="text";e.VARIABLES="variables";e.BLOB="blob";e.ARRAY_BUFFER="arraybuffer";e.BINARY="binary";return e}();t.exports=r},{}],19:[function(e,t,i){var r=e("awayjs-core/lib/net/URLRequestMethod");var s=function(){function e(e){if(e===void 0){e=null}this.method=r.GET;this.async=true;this._url=e}Object.defineProperty(e.prototype,"url",{get:function(){return this._url},set:function(e){this._url=e},enumerable:true,configurable:true});e.prototype.dispose=function(){this.data=null;this._url=null};return e}();t.exports=s},{"awayjs-core/lib/net/URLRequestMethod":20}],20:[function(e,t,i){var r=function(){function e(){}e.POST="POST";e.GET="GET";return e}();t.exports=r},{}],21:[function(e,t,i){var r=function(){function e(e){if(e===void 0){e=null}this._variables=new Object;if(e!==null)this.decode(e)}e.prototype.decode=function(e){e=e.split("+").join(" ");var t,i=/[?&]?([^=]+)=([^&]*)/g;while(t=i.exec(e))this._variables[decodeURIComponent(t[1])]=decodeURIComponent(t[2])};e.prototype.toString=function(){return""};Object.defineProperty(e.prototype,"variables",{get:function(){return this._variables},set:function(e){this._variables=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"formData",{get:function(){var e=new FormData;for(var t in this._variables)e.append(t,this._variables[t]);return e},enumerable:true,configurable:true});return e}();t.exports=r},{}],22:[function(e,t,i){var r=e("awayjs-core/lib/utils/ByteArray");var s=function(){function e(){}e.arrayBufferToImage=function(e){var t="";var i=new Uint8Array(e);var r=i.byteLength;for(var s=0;s<r;s++)t+=String.fromCharCode(i[s]);var a=window.btoa(t);var n="data:image/png;base64,"+a;var o=new Image;o.src=n;return o};e.byteArrayToImage=function(e){var t="";var i=new Uint8Array(e.arraybytes);var r=i.byteLength;for(var s=0;s<r;s++)t+=String.fromCharCode(i[s]);var a=window.btoa(t);var n="data:image/png;base64,"+a;var o=new Image;o.src=n;return o};e.blobToImage=function(e){var t=window["URL"]||window["webkitURL"];var i=t.createObjectURL(e);var r=new Image;r.src=i;return r};e.toByteArray=function(e){var t=new r;t.setArrayBuffer(e);return t};e.toString=function(e,t){if(t===void 0){t=0}if(typeof e==="string"){var i=e;if(i["substr"]!=null)return i.substr(0,i.length)}if(e instanceof r){var s=e;s.position=0;return s.readUTFBytes(Math.min(s.getBytesAvailable(),t))}return null};return e}();t.exports=s},{"awayjs-core/lib/utils/ByteArray":27}],23:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/errors/Error");var a=e("awayjs-core/lib/textures/Texture2DBase");var n=e("awayjs-core/lib/utils/TextureUtils");var o=function(e){r(t,e);function t(t){e.call(this);this.htmlImageElement=t}Object.defineProperty(t.prototype,"htmlImageElement",{get:function(){return this._htmlImageElement},set:function(e){if(this._htmlImageElement==e)return;if(!n.isHTMLImageElementValid(e))throw new s("Invalid bitmapData: Width and height must be power of 2 and cannot exceed 2048");this._htmlImageElement=e;this.invalidateContent();this._pSetSize(e.width,e.height)},enumerable:true,configurable:true});t.prototype._iGetTextureData=function(){return this._htmlImageElement};return t}(a);t.exports=o},{"awayjs-core/lib/errors/Error":5,"awayjs-core/lib/textures/Texture2DBase":25,"awayjs-core/lib/utils/TextureUtils":31}],24:[function(e,t,i){var r=e("awayjs-core/lib/base/BitmapData");var s=e("awayjs-core/lib/geom/Matrix");var a=e("awayjs-core/lib/geom/Rectangle");var n=function(){function e(){}e.generateMipMaps=function(t,i,r){if(r===void 0){r=false}var s=t.width;var a=t.height;var n=0;var o;e._rect.width=s;e._rect.height=a;while(s>=1||a>=1){o=i[n]=e._getMipmapHolder(i[n],e._rect.width,e._rect.height);if(r)o.fillRect(e._rect,0);e._matrix.a=e._rect.width/t.width;e._matrix.d=e._rect.height/t.height;o.draw(t,e._matrix);s>>=1;a>>=1;e._rect.width=s>1?s:1;e._rect.height=a>1?a:1;n++}};e._getMipmapHolder=function(t,i,s){if(t){if(t.width==i&&t.height==s)return t;e.freeMipMapHolder(t)}if(!e._mipMaps[i]){e._mipMaps[i]=[];e._mipMapUses[i]=[]}if(!e._mipMaps[i][s]){t=e._mipMaps[i][s]=new r(i,s,true);e._mipMapUses[i][s]=1}else{e._mipMapUses[i][s]=e._mipMapUses[i][s]+1;t=e._mipMaps[i][s]}return t};e.freeMipMapHolder=function(t){var i=t.width;var r=t.height;if(--e._mipMapUses[i][r]==0){e._mipMaps[i][r].dispose();e._mipMaps[i][r]=null}};e._mipMaps=[];e._mipMapUses=[];e._matrix=new s;e._rect=new a;return e}();t.exports=n},{"awayjs-core/lib/base/BitmapData":2,"awayjs-core/lib/geom/Matrix":12,"awayjs-core/lib/geom/Rectangle":14}],25:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/errors/AbstractMethodError");var a=e("awayjs-core/lib/textures/MipmapGenerator");var n=e("awayjs-core/lib/textures/TextureProxyBase");var o=function(e){r(t,e);function t(){e.call(this)}Object.defineProperty(t.prototype,"width",{get:function(){return this._pWidth},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"height",{get:function(){return this._pHeight},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"size",{get:function(){return this._pWidth},enumerable:true,configurable:true});t.prototype.dispose=function(){e.prototype.dispose.call(this);if(this._mipmapData){var t=this._mipmapData.length;for(var i=0;i<t;i++)a.freeMipMapHolder(this._mipmapData[i])}};t.prototype.invalidateContent=function(){e.prototype.invalidateContent.call(this);this._mipmapDataDirty=true};t.prototype._pSetSize=function(e,t){if(this._pWidth!=e||this._pHeight!=t)this.invalidateSize();this._mipmapDataDirty=true;this._pWidth=e;this._pHeight=t};t.prototype._iGetMipmapData=function(){if(this._mipmapDataDirty){this._mipmapDataDirty=false;if(!this._mipmapData)this._mipmapData=new Array;a.generateMipMaps(this._iGetTextureData(),this._mipmapData,true)}return this._mipmapData};t.prototype._iGetTextureData=function(){throw new s};return t}(n);t.exports=o},{"awayjs-core/lib/errors/AbstractMethodError":3,"awayjs-core/lib/textures/MipmapGenerator":24,"awayjs-core/lib/textures/TextureProxyBase":26}],26:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/library/AssetType");var a=e("awayjs-core/lib/library/NamedAssetBase");var n=function(e){r(t,e);function t(t){if(t===void 0){t=false}e.call(this);this._pFormat="bgra";this._textureData=new Array}Object.defineProperty(t.prototype,"size",{get:function(){return this._pSize},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"format",{get:function(){return this._pFormat},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"assetType",{get:function(){return s.TEXTURE},enumerable:true,configurable:true});t.prototype.invalidateContent=function(){var e=this._textureData.length;for(var t=0;t<e;t++)this._textureData[t].invalidate()};t.prototype.invalidateSize=function(){while(this._textureData.length)this._textureData[0].dispose()};t.prototype.dispose=function(){while(this._textureData.length)this._textureData[0].dispose()};t.prototype._iAddTextureData=function(e){this._textureData.push(e);return e};t.prototype._iRemoveTextureData=function(e){this._textureData.splice(this._textureData.indexOf(e),1);return e};return t}(a);t.exports=n},{"awayjs-core/lib/library/AssetType":15,"awayjs-core/lib/library/NamedAssetBase":16}],27:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/utils/ByteArrayBase");var a=function(e){r(t,e);function t(){e.call(this);this.maxlength=0;this._mode="Typed array";this.maxlength=4;this.arraybytes=new ArrayBuffer(this.maxlength);this.unalignedarraybytestemp=new ArrayBuffer(16)}t.prototype.ensureWriteableSpace=function(e){this.ensureSpace(e+this.position)};t.prototype.setArrayBuffer=function(e){this.ensureSpace(e.byteLength);this.length=e.byteLength;var t=new Int8Array(e);var i=new Int8Array(this.arraybytes,0,this.length);i.set(t);this.position=0};t.prototype.getBytesAvailable=function(){return this.length-this.position};t.prototype.ensureSpace=function(e){if(e>this.maxlength){var t=e+255&~255;var i=new ArrayBuffer(t);var r=new Uint8Array(this.arraybytes,0,this.length);var s=new Uint8Array(i,0,this.length);s.set(r);this.arraybytes=i;this.maxlength=t}};t.prototype.writeByte=function(e){this.ensureWriteableSpace(1);var t=new Int8Array(this.arraybytes);t[this.position++]=~~e;if(this.position>this.length){this.length=this.position}};t.prototype.readByte=function(){if(this.position>=this.length){throw"ByteArray out of bounds read. Positon="+this.position+", Length="+this.length}var e=new Int8Array(this.arraybytes);return e[this.position++]};t.prototype.readBytes=function(e,t,i){if(t===void 0){t=0}if(i===void 0){i=0}if(i==null){i=e.length}e.ensureWriteableSpace(t+i);var r=new Int8Array(e.arraybytes);var s=new Int8Array(this.arraybytes);r.set(s.subarray(this.position,this.position+i),t);this.position+=i;if(i+t>e.length){e.length+=i+t-e.length}};t.prototype.writeUnsignedByte=function(e){this.ensureWriteableSpace(1);var t=new Uint8Array(this.arraybytes);t[this.position++]=~~e&255;if(this.position>this.length){this.length=this.position}};t.prototype.readUnsignedByte=function(){if(this.position>=this.length){throw"ByteArray out of bounds read. Positon="+this.position+", Length="+this.length}var e=new Uint8Array(this.arraybytes);return e[this.position++]};t.prototype.writeUnsignedShort=function(e){this.ensureWriteableSpace(2);if((this.position&1)==0){var t=new Uint16Array(this.arraybytes);t[this.position>>1]=~~e&65535}else{var t=new Uint16Array(this.unalignedarraybytestemp,0,1);t[0]=~~e&65535;var i=new Uint8Array(this.arraybytes,this.position,2);var r=new Uint8Array(this.unalignedarraybytestemp,0,2);i.set(r)}this.position+=2;if(this.position>this.length){this.length=this.position}};t.prototype.readUTFBytes=function(e){var t="";var i=this.position+e;var r=new DataView(this.arraybytes);while(this.position<i){var s=r.getUint8(this.position++);if(s<128){if(s==0)break;t+=String.fromCharCode(s)}else if(s<224){t+=String.fromCharCode((s&63)<<6|r.getUint8(this.position++)&127)}else if(s<240){var a=r.getUint8(this.position++);t+=String.fromCharCode((s&31)<<12|(a&127)<<6|r.getUint8(this.position++)&127)}else{var a=r.getUint8(this.position++);var n=r.getUint8(this.position++);t+=String.fromCharCode((s&15)<<18|(a&127)<<12|n<<6&127|r.getUint8(this.position++)&127)}}return t};t.prototype.readInt=function(){var e=new DataView(this.arraybytes);var t=e.getInt32(this.position,true);this.position+=4;return t};t.prototype.readShort=function(){var e=new DataView(this.arraybytes);var t=e.getInt16(this.position,true);this.position+=2;return t};t.prototype.readDouble=function(){var e=new DataView(this.arraybytes);var t=e.getFloat64(this.position,true);this.position+=8;return t};t.prototype.readUnsignedShort=function(){if(this.position>this.length+2){throw"ByteArray out of bounds read. Position="+this.position+", Length="+this.length}if((this.position&1)==0){var e=new Uint16Array(this.arraybytes);var t=this.position>>1;this.position+=2;return e[t]}else{var e=new Uint16Array(this.unalignedarraybytestemp,0,1);var i=new Uint8Array(this.arraybytes,this.position,2);var r=new Uint8Array(this.unalignedarraybytestemp,0,2);r.set(i);this.position+=2;return e[0]}};t.prototype.writeUnsignedInt=function(e){this.ensureWriteableSpace(4);if((this.position&3)==0){var t=new Uint32Array(this.arraybytes);t[this.position>>2]=~~e&4294967295}else{var t=new Uint32Array(this.unalignedarraybytestemp,0,1);t[0]=~~e&4294967295;var i=new Uint8Array(this.arraybytes,this.position,4);var r=new Uint8Array(this.unalignedarraybytestemp,0,4);i.set(r)}this.position+=4;if(this.position>this.length){this.length=this.position}};t.prototype.readUnsignedInt=function(){if(this.position>this.length+4){throw"ByteArray out of bounds read. Position="+this.position+", Length="+this.length}if((this.position&3)==0){var e=new Uint32Array(this.arraybytes);var t=this.position>>2;this.position+=4;return e[t]}else{var e=new Uint32Array(this.unalignedarraybytestemp,0,1);var i=new Uint8Array(this.arraybytes,this.position,4);var r=new Uint8Array(this.unalignedarraybytestemp,0,4);r.set(i);this.position+=4;return e[0]}};t.prototype.writeFloat=function(e){this.ensureWriteableSpace(4);if((this.position&3)==0){var t=new Float32Array(this.arraybytes);t[this.position>>2]=e}else{var t=new Float32Array(this.unalignedarraybytestemp,0,1);t[0]=e;var i=new Uint8Array(this.arraybytes,this.position,4);var r=new Uint8Array(this.unalignedarraybytestemp,0,4);i.set(r)}this.position+=4;if(this.position>this.length){this.length=this.position}};t.prototype.readFloat=function(){if(this.position>this.length+4){throw"ByteArray out of bounds read. Positon="+this.position+", Length="+this.length}if((this.position&3)==0){var e=new Float32Array(this.arraybytes);var t=this.position>>2;this.position+=4;return e[t]}else{var e=new Float32Array(this.unalignedarraybytestemp,0,1);var i=new Uint8Array(this.arraybytes,this.position,4);var r=new Uint8Array(this.unalignedarraybytestemp,0,4);r.set(i);this.position+=4;return e[0]}};return t}(s);t.exports=a},{"awayjs-core/lib/utils/ByteArrayBase":28}],28:[function(e,t,i){var r=e("awayjs-core/lib/errors/AbstractMethodError");var s=function(){function e(){this.position=0;this.length=0;this._mode=""}e.prototype.writeByte=function(e){throw"Virtual method"};e.prototype.readByte=function(){throw"Virtual method"};e.prototype.writeUnsignedByte=function(e){throw"Virtual method"};e.prototype.readUnsignedByte=function(){throw"Virtual method"};e.prototype.writeUnsignedShort=function(e){throw"Virtual method"};e.prototype.readUnsignedShort=function(){throw"Virtual method"};e.prototype.writeUnsignedInt=function(e){throw"Virtual method"};e.prototype.readUnsignedInt=function(){throw"Virtual method"};e.prototype.writeFloat=function(e){throw"Virtual method"};e.prototype.toFloatBits=function(e){throw"Virtual method"};e.prototype.readFloat=function(e){throw"Virtual method"};e.prototype.fromFloatBits=function(e){throw"Virtual method"};e.prototype.getBytesAvailable=function(){throw new r("ByteArrayBase, getBytesAvailable() not implemented ")};e.prototype.toString=function(){return"[ByteArray] ( "+this._mode+" ) position="+this.position+" length="+this.length};e.prototype.compareEqual=function(e,t){if(t==undefined||t>this.length-this.position)t=this.length-this.position;if(t>e.length-e.position)t=e.length-e.position;var i=t;var r=true;while(r&&t>=4){t-=4;if(this.readUnsignedInt()!=e.readUnsignedInt())r=false}while(r&&t>=1){t--;if(this.readUnsignedByte()!=e.readUnsignedByte())r=false}var s;this.position-=s-t;e.position-=s-t;return r};e.prototype.writeBase64String=function(e){for(var t=0;t<e.length;t++){var i=e.charAt(t)}};e.prototype.dumpToConsole=function(){var e=this.position;this.position=0;var t=8;function i(e,t){var i=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];var r="";for(var s=0;s<t;s++){r=i[e>>(s<<2)&15]+r}return r}for(var r=0;r<this.length;r+=t){var s=i(r,4)+":";for(var a=0;a<t&&r+a<this.length;a++){s+=" "+i(this.readUnsignedByte(),2)}console.log(s)}this.position=e};e.prototype.readBase64String=function(t){if(t==undefined||t>this.length-this.position)t=this.length-this.position;if(!(t>0))return"";return e.internalGetBase64String(t,this.readUnsignedByte,this)};e.internalGetBase64String=function(t,i,r){var s="";var a,n,o,h,l,u,p;var c=e.Base64Key;while(t>=3){a=i.apply(r);n=i.apply(r);o=i.apply(r);h=a>>2;l=(a&3)<<4|n>>4;u=(n&15)<<2|o>>6;p=o&63;s+=c.charAt(h)+c.charAt(l)+c.charAt(u)+c.charAt(p);t-=3}if(t==2){a=i.apply(r);n=i.apply(r);h=a>>2;l=(a&3)<<4|n>>4;u=(n&15)<<2;s+=c.charAt(h)+c.charAt(l)+c.charAt(u)+"="}else if(t==1){a=i.apply(r);h=a>>2;l=(a&3)<<4;s+=c.charAt(h)+c.charAt(l)+"=="}return s};e.Base64Key="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";return e}();t.exports=s},{"awayjs-core/lib/errors/AbstractMethodError":3}],29:[function(e,t,i){var r=function(){function e(){}e.float32ColorToARGB=function(e){var t=(e&4278190080)>>>24;var i=(e&16711680)>>>16;var r=(e&65280)>>>8;var s=e&255;var a=[t,i,r,s];return a};e.componentToHex=function(e){var t=e.toString(16);return t.length==1?"0"+t:t};e.RGBToHexString=function(t){return"#"+e.componentToHex(t[1])+e.componentToHex(t[2])+e.componentToHex(t[3])};e.ARGBToHexString=function(t){return"#"+e.componentToHex(t[0])+e.componentToHex(t[1])+e.componentToHex(t[2])+e.componentToHex(t[3])};return e}();t.exports=r},{}],30:[function(e,t,i){var r=e("awayjs-core/lib/utils/getTimer");var s=function(){function e(e,t){var i=this;this._active=false;this._argsArray=new Array;this._getTimer=r;this.setCallback(e,t);this._rafUpdateFunction=function(){if(i._active)i._tick()};this._argsArray.push(this._dt)}e.prototype.setCallback=function(e,t){this._callback=e;this._callbackContext=t};e.prototype.start=function(){this._prevTime=this._getTimer();this._active=true;if(window.requestAnimationFrame){window.requestAnimationFrame(this._rafUpdateFunction)}else{if(window["mozRequestAnimationFrame"])window.requestAnimationFrame=window["mozRequestAnimationFrame"];else if(window["webkitRequestAnimationFrame"])window.requestAnimationFrame=window["webkitRequestAnimationFrame"];else if(window["oRequestAnimationFrame"])window.requestAnimationFrame=window["oRequestAnimationFrame"]}};e.prototype.stop=function(){this._active=false};Object.defineProperty(e.prototype,"active",{get:function(){return this._active},enumerable:true,configurable:true});e.prototype._tick=function(){this._currentTime=this._getTimer();this._dt=this._currentTime-this._prevTime;this._argsArray[0]=this._dt;this._callback.apply(this._callbackContext,this._argsArray);window.requestAnimationFrame(this._rafUpdateFunction);this._prevTime=this._currentTime};return e}();t.exports=s},{"awayjs-core/lib/utils/getTimer":32}],31:[function(e,t,i){var r=function(){function e(){}e.isBitmapDataValid=function(t){if(t==null){return true}return e.isDimensionValid(t.width)&&e.isDimensionValid(t.height)};e.isHTMLImageElementValid=function(t){if(t==null)return true;return e.isDimensionValid(t.width)&&e.isDimensionValid(t.height)};e.isDimensionValid=function(t){return t>=1&&t<=e.MAX_SIZE&&e.isPowerOfTwo(t)};e.isPowerOfTwo=function(e){return e?(e&-e)==e:false};e.getBestPowerOf2=function(t){var i=1;while(i<t)i<<=1;if(i>e.MAX_SIZE)i=e.MAX_SIZE;return i};e.MAX_SIZE=2048;return e}();t.exports=r},{}],32:[function(e,t,i){function r(){return Date.now()}t.exports=r},{}],33:[function(e,t,i){var r=function(){function e(){}e.REGISTRATION_POINT="registrationPoint";e.PIVOT_POINT="pivot";return e}();t.exports=r},{}],34:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/geom/Box");var a=e("awayjs-core/lib/geom/Sphere");var n=e("awayjs-core/lib/geom/MathConsts");var o=e("awayjs-core/lib/geom/Matrix3D");var h=e("awayjs-core/lib/geom/Matrix3DUtils");var l=e("awayjs-core/lib/geom/Point");var u=e("awayjs-core/lib/geom/Vector3D");var p=e("awayjs-core/lib/library/NamedAssetBase");var c=e("awayjs-core/lib/errors/AbstractMethodError");var d=e("awayjs-display/lib/base/AlignmentMode");var f=e("awayjs-display/lib/base/OrientationMode");var _=e("awayjs-display/lib/base/Transform");var y=e("awayjs-display/lib/pick/PickingCollisionVO");var g=e("awayjs-display/lib/events/DisplayObjectEvent");var m=e("awayjs-display/lib/events/SceneEvent");var b=function(e){r(t,e);function t(){e.call(this);this._boxBoundsInvalid=true;this._sphereBoundsInvalid=true;this._pSceneTransform=new o;this._pSceneTransformDirty=true;this._matrix3D=new o;this._matrix3DDirty=true;this._inverseSceneTransform=new o;this._inverseSceneTransformDirty=true;this._scenePosition=new u;this._scenePositionDirty=true;this._explicitVisibility=true;this._pImplicitVisibility=true;this._explicitMouseEnabled=true;this._pImplicitMouseEnabled=true;this._positionDirty=true;this._rotationDirty=true;this._scaleDirty=true;this._rotationX=0;this._rotationY=0;this._rotationZ=0;this._eulers=new u;this._flipY=new o;this._zOffset=0;this._pScaleX=1;this._pScaleY=1;this._pScaleZ=1;this._x=0;this._y=0;this._z=0;this._pivot=new u;this._orientationMatrix=new o;this._pivotZero=true;this._pivotDirty=true;this._pos=new u;this._rot=new u;this._sca=new u;this._pIgnoreTransform=false;this._pRenderables=new Array;this._entityNodes=new Array;this.alignmentMode=d.REGISTRATION_POINT;this.castsShadows=true;this.orientationMode=f.DEFAULT;this._transformComponents=new Array(3);this._transformComponents[0]=this._pos;this._transformComponents[1]=this._rot;this._transformComponents[2]=this._sca;this._transform=new _(this);this._matrix3D.identity();this._flipY.appendScale(1,-1,1)}Object.defineProperty(t.prototype,"boundsType",{get:function(){return this._boundsType},set:function(e){if(this._boundsType==e)return;this._boundsType=e;this._pInvalidateBounds();var t=this._entityNodes.length;for(var i=0;i<t;i++)this._entityNodes[i].updateBounds()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"depth",{get:function(){if(this._boxBoundsInvalid)this._pUpdateBoxBounds();return this._pBoxBounds.depth*this._pScaleZ},set:function(e){var t=e/this.getBox().depth;if(this._pScaleZ==t)return;this._pScaleZ=t;this.invalidateScale()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"eulers",{get:function(){this._eulers.x=this._rotationX*n.RADIANS_TO_DEGREES;this._eulers.y=this._rotationY*n.RADIANS_TO_DEGREES;this._eulers.z=this._rotationZ*n.RADIANS_TO_DEGREES;return this._eulers},set:function(e){this._rotationX=e.x*n.DEGREES_TO_RADIANS;this._rotationY=e.y*n.DEGREES_TO_RADIANS;this._rotationZ=e.z*n.DEGREES_TO_RADIANS;this.invalidateRotation()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"height",{get:function(){if(this._boxBoundsInvalid)this._pUpdateBoxBounds();return this._pBoxBounds.height*this._pScaleY},set:function(e){var t=e/this.getBox().height;if(this._pScaleY==t)return;this._pScaleY=t;this.invalidateScale()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"index",{get:function(){if(this._pParent)return this._pParent.getChildIndex(this);return 0},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"inverseSceneTransform",{get:function(){if(this._inverseSceneTransformDirty){this._inverseSceneTransform.copyFrom(this.sceneTransform);this._inverseSceneTransform.invert();this._inverseSceneTransformDirty=false}return this._inverseSceneTransform},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"ignoreTransform",{get:function(){return this._pIgnoreTransform},set:function(e){if(this._pIgnoreTransform==e)return;this._pIgnoreTransform=e;if(e){this._pSceneTransform.identity();this._scenePosition.setTo(0,0,0)}this.pInvalidateSceneTransform()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"isEntity",{get:function(){return this._pIsEntity},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"loaderInfo",{get:function(){return this._loaderInfo},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mouseEnabled",{get:function(){return this._explicitMouseEnabled},set:function(e){if(this._explicitMouseEnabled==e)return;this._explicitMouseEnabled=e;this._pUpdateImplicitMouseEnabled(this._pParent?this._pParent.mouseChildren:true)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mouseX",{get:function(){return this._mouseX},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mouseY",{get:function(){return this._mouseY},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"parent",{get:function(){return this._pParent},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"partition",{get:function(){return this._explicitPartition},set:function(e){if(this._explicitPartition==e)return;this._explicitPartition=e;this._pUpdateImplicitPartition(this._pParent?this._pParent._iAssignedPartition:null,this._pScene)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"pickingCollider",{get:function(){return this._pPickingCollider},set:function(e){this._pPickingCollider=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"pivot",{get:function(){return this._pivot},set:function(e){this._pivot=e.clone();this.invalidatePivot()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rotationX",{get:function(){return this._rotationX*n.RADIANS_TO_DEGREES},set:function(e){if(this.rotationX==e)return;this._rotationX=e*n.DEGREES_TO_RADIANS;this.invalidateRotation()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rotationY",{get:function(){return this._rotationY*n.RADIANS_TO_DEGREES},set:function(e){if(this.rotationY==e)return;this._rotationY=e*n.DEGREES_TO_RADIANS;this.invalidateRotation()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rotationZ",{get:function(){return this._rotationZ*n.RADIANS_TO_DEGREES},set:function(e){if(this.rotationZ==e)return;this._rotationZ=e*n.DEGREES_TO_RADIANS;this.invalidateRotation()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"scaleX",{get:function(){return this._pScaleX},set:function(e){if(this._pScaleX==e)return;this._pScaleX=e;this.invalidateScale()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"scaleY",{get:function(){return this._pScaleY},set:function(e){if(this._pScaleY==e)return;this._pScaleY=e;this.invalidateScale()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"scaleZ",{get:function(){return this._pScaleZ},set:function(e){if(this._pScaleZ==e)return;this._pScaleZ=e;this.invalidateScale()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"scene",{get:function(){return this._pScene},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"scenePosition",{get:function(){if(this._scenePositionDirty){if(!this._pivotZero&&this.alignmentMode==d.PIVOT_POINT){var e=new u(this._pivot.x/this._pScaleX,this._pivot.y/this._pScaleY,this._pivot.z/this._pScaleZ);this._scenePosition=this.sceneTransform.transformVector(e)}else{this.sceneTransform.copyColumnTo(3,this._scenePosition)}this._scenePositionDirty=false}return this._scenePosition},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sceneTransform",{get:function(){if(this._pSceneTransformDirty)this.pUpdateSceneTransform();return this._pSceneTransform},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"shaderPickingDetails",{get:function(){return this._shaderPickingDetails},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"debugVisible",{get:function(){return this._debugVisible},set:function(e){if(e==this._debugVisible)return;this._debugVisible=e;var t=this._entityNodes.length;for(var i=0;i<t;i++)this._entityNodes[i].debugVisible=this._debugVisible},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"transform",{get:function(){return this._transform},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"visible",{get:function(){return this._explicitVisibility},set:function(e){if(this._explicitVisibility==e)return;this._explicitVisibility=e;this._pUpdateImplicitVisibility(this._pParent?this._pParent._iIsVisible():true)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"width",{get:function(){if(this._boxBoundsInvalid)this._pUpdateBoxBounds();return this._pBoxBounds.width*this._pScaleX},set:function(e){var t=e/this.getBox().width;if(this._pScaleX==t)return;this._pScaleX=t;this.invalidateScale()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){if(this._x==e)return;this._x=e;this.invalidatePosition()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){if(this._y==e)return;this._y=e;this.invalidatePosition()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"z",{get:function(){return this._z},set:function(e){if(this._z==e)return;this._z=e;this.invalidatePosition()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"zOffset",{get:function(){return this._zOffset},set:function(e){this._zOffset=e},enumerable:true,configurable:true});t.prototype.addEventListener=function(t,i){e.prototype.addEventListener.call(this,t,i);switch(t){case g.POSITION_CHANGED:this._listenToPositionChanged=true;break;case g.ROTATION_CHANGED:this._listenToRotationChanged=true;break;case g.SCALE_CHANGED:this._listenToScaleChanged=true;break;case g.SCENE_CHANGED:this._listenToSceneChanged=true;break;case g.SCENETRANSFORM_CHANGED:this._listenToSceneTransformChanged=true;break}};t.prototype.clone=function(){var e=new t;e.pivot=this.pivot;e._iMatrix3D=this._iMatrix3D;e.name=name;return e};t.prototype.dispose=function(){if(this.parent)this.parent.removeChild(this);while(this._pRenderables.length)this._pRenderables[0].dispose()};t.prototype.disposeAsset=function(){this.dispose()};t.prototype.getBounds=function(e){return this._bounds};t.prototype.getRect=function(e){if(e===void 0){e=null}return this._bounds};t.prototype.getBox=function(e){if(e===void 0){e=null}if(this._iSourcePrefab)this._iSourcePrefab._iValidate();if(this._boxBoundsInvalid)this._pUpdateBoxBounds();return this._pBoxBounds};t.prototype.getSphere=function(e){if(e===void 0){e=null}if(this._iSourcePrefab)this._iSourcePrefab._iValidate();if(this._sphereBoundsInvalid)this._pUpdateSphereBounds();return this._pSphereBounds};t.prototype.globalToLocal=function(e){return e};t.prototype.globalToLocal3D=function(e){return this.inverseSceneTransform.transformVector(e)};t.prototype.hitTestObject=function(e){return false};t.prototype.hitTestPoint=function(e,t,i){if(i===void 0){i=false}return false};t.prototype.lookAt=function(e,t){if(t===void 0){t=null}var i;var r;var s;var a;if(t==null)t=u.Y_AXIS;else t.normalize();r=e.subtract(this._iMatrix3D.position);r.normalize();s=t.crossProduct(r);s.normalize();if(s.length<.05){s.x=t.y;s.y=t.x;s.z=0;s.normalize()}i=r.crossProduct(s);a=h.RAW_DATA_CONTAINER;a[0]=s.x;a[1]=s.y;a[2]=s.z;a[3]=0;a[4]=i.x;a[5]=i.y;a[6]=i.z;a[7]=0;a[8]=r.x;a[9]=r.y;a[10]=r.z;a[11]=0;var n=new o;n.copyRawDataFrom(a);var l=n.decompose()[1];this._rotationX=l.x;this._rotationY=l.y;this._rotationZ=l.z;this.invalidateRotation()};t.prototype.localToGlobal=function(e){return new l};t.prototype.localToGlobal3D=function(e){return this.sceneTransform.transformVector(e)};t.prototype.moveTo=function(e,t,i){if(this._x==e&&this._y==t&&this._z==i)return;
this._x=e;this._y=t;this._z=i;this.invalidatePosition()};t.prototype.movePivot=function(e,t,i){if(this._pivot==null)this._pivot=new u;this._pivot.x+=e;this._pivot.y+=t;this._pivot.z+=i;this.invalidatePivot()};t.prototype.pitch=function(e){this.rotate(u.X_AXIS,e)};t.prototype.getRenderSceneTransform=function(e){if(this.orientationMode==f.CAMERA_PLANE){var t=e.sceneTransform.decompose();var i=t[2];t[0]=this.scenePosition;i.x=this._pScaleX;i.y=this._pScaleY;i.z=this._pScaleZ;this._orientationMatrix.recompose(t);if(!this._pivotZero&&this.alignmentMode==d.PIVOT_POINT)this._orientationMatrix.prependTranslation(-this._pivot.x/this._pScaleX,-this._pivot.y/this._pScaleY,-this._pivot.z/this._pScaleZ);return this._orientationMatrix}return this.sceneTransform};t.prototype.roll=function(e){this.rotate(u.Z_AXIS,e)};t.prototype.rotate=function(e,t){var i=new o;i.prependRotation(t,e);var r=i.decompose()[1];this._rotationX+=r.x;this._rotationY+=r.y;this._rotationZ+=r.z;this.invalidateRotation()};t.prototype.rotateTo=function(e,t,i){this._rotationX=e*n.DEGREES_TO_RADIANS;this._rotationY=t*n.DEGREES_TO_RADIANS;this._rotationZ=i*n.DEGREES_TO_RADIANS;this.invalidateRotation()};t.prototype.removeEventListener=function(t,i){e.prototype.removeEventListener.call(this,t,i);if(this.hasEventListener(t,i))return;switch(t){case g.POSITION_CHANGED:this._listenToPositionChanged=false;break;case g.ROTATION_CHANGED:this._listenToRotationChanged=false;break;case g.SCALE_CHANGED:this._listenToScaleChanged=false;break}};t.prototype.translate=function(e,t){var i=e.x,r=e.y,s=e.z;var a=t/Math.sqrt(i*i+r*r+s*s);this._x+=i*a;this._y+=r*a;this._z+=s*a;this.invalidatePosition()};t.prototype.translateLocal=function(e,t){var i=e.x,r=e.y,s=e.z;var a=t/Math.sqrt(i*i+r*r+s*s);this._iMatrix3D.prependTranslation(i*a,r*a,s*a);this._matrix3D.copyColumnTo(3,this._pos);this._x=this._pos.x;this._y=this._pos.y;this._z=this._pos.z;this.invalidatePosition()};t.prototype.yaw=function(e){this.rotate(u.Y_AXIS,e)};Object.defineProperty(t.prototype,"_iAssignedPartition",{get:function(){return this._pImplicitPartition},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"_iMatrix3D",{get:function(){if(this._matrix3DDirty)this._pUpdateMatrix3D();return this._matrix3D},set:function(e){var t=e.decompose();var i;i=t[0];if(this._x!=i.x||this._y!=i.y||this._z!=i.z){this._x=i.x;this._y=i.y;this._z=i.z;this.invalidatePosition()}i=t[1];if(this._rotationX!=i.x||this._rotationY!=i.y||this._rotationZ!=i.z){this._rotationX=i.x;this._rotationY=i.y;this._rotationZ=i.z;this.invalidateRotation()}i=t[2];if(this._pScaleX!=i.x||this._pScaleY!=i.y||this._pScaleZ!=i.z){this._pScaleX=i.x;this._pScaleY=i.y;this._pScaleZ=i.z;this.invalidateScale()}},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"_iPickingCollisionVO",{get:function(){if(!this._pPickingCollisionVO)this._pPickingCollisionVO=new y(this);return this._pPickingCollisionVO},enumerable:true,configurable:true});t.prototype.iSetParent=function(e){this._pParent=e;if(e){this._pUpdateImplicitMouseEnabled(e.mouseChildren);this._pUpdateImplicitVisibility(e._iIsVisible());this._pUpdateImplicitPartition(e._iAssignedPartition,e._pScene)}else{this._pUpdateImplicitMouseEnabled(true);this._pUpdateImplicitVisibility(true);this._pUpdateImplicitPartition(null,null)}};t.prototype.pInvalidateSceneTransform=function(){this._pSceneTransformDirty=!this._pIgnoreTransform;this._inverseSceneTransformDirty=!this._pIgnoreTransform;this._scenePositionDirty=!this._pIgnoreTransform;if(this.isEntity)this.invalidatePartition();if(this._listenToSceneTransformChanged)this.notifySceneTransformChange()};t.prototype._pUpdateImplicitMouseEnabled=function(e){this._pImplicitMouseEnabled=this._explicitMouseEnabled&&e;if(this._pImplicitMouseEnabled&&this._pParent&&!this._pPickingCollider)this._pPickingCollider=this._pParent._pPickingCollider};t.prototype._pUpdateImplicitPartition=function(e,t){var i=this._pScene!=t;if(i&&this._pScene)this._pScene.dispatchEvent(new m(m.REMOVED_FROM_SCENE,this));if(this._pScene&&this._pImplicitPartition){this._pScene._iUnregisterPartition(this._pImplicitPartition);if(this._pIsEntity)this._pUnregisterEntity(this._pImplicitPartition)}this._pImplicitPartition=this._explicitPartition||e;if(i)this._pScene=t;if(this._pScene&&this._pImplicitPartition){this._pScene._iRegisterPartition(this._pImplicitPartition);if(this._pIsEntity)this._pRegisterEntity(this._pImplicitPartition)}if(i&&this._pScene)this._pScene.dispatchEvent(new m(m.ADDED_TO_SCENE,this));if(i){if(!this._pSceneTransformDirty&&!this._pIgnoreTransform)this.pInvalidateSceneTransform();if(this._listenToSceneChanged)this.notifySceneChange()}};t.prototype._pUpdateImplicitVisibility=function(e){this._pImplicitVisibility=this._explicitVisibility&&e};t.prototype._pUpdateMatrix3D=function(){this._pos.x=this._x;this._pos.y=this._y;this._pos.z=this._z;this._rot.x=this._rotationX;this._rot.y=this._rotationY;this._rot.z=this._rotationZ;this._sca.x=this._pScaleX;this._sca.y=this._pScaleY;this._sca.z=this._pScaleZ;this._matrix3D.recompose(this._transformComponents);if(!this._pivotZero){this._matrix3D.prependTranslation(-this._pivot.x/this._pScaleX,-this._pivot.y/this._pScaleY,-this._pivot.z/this._pScaleZ);if(this.alignmentMode!=d.PIVOT_POINT)this._matrix3D.appendTranslation(this._pivot.x,this._pivot.y,this._pivot.z)}this._matrix3DDirty=false;this._positionDirty=false;this._rotationDirty=false;this._scaleDirty=false;this._pivotDirty=false};t.prototype.pUpdateSceneTransform=function(){if(this._pParent&&!this._pParent._iIsRoot){this._pSceneTransform.copyFrom(this._pParent.sceneTransform);this._pSceneTransform.prepend(this._iMatrix3D)}else{this._pSceneTransform.copyFrom(this._iMatrix3D)}this._pSceneTransformDirty=false};t.prototype._iAddRenderable=function(e){this._pRenderables.push(e);return e};t.prototype._iRemoveRenderable=function(e){var t=this._pRenderables.indexOf(e);this._pRenderables.splice(t,1);return e};t.prototype._iTestCollision=function(e,t){return false};t.prototype._iInternalUpdate=function(){if(this._iController)this._iController.update()};t.prototype._iIsVisible=function(){return this._pImplicitVisibility};t.prototype._iIsMouseEnabled=function(){return this._pImplicitMouseEnabled};t.prototype._iSetScene=function(e){if(this._pScene==e)return;this._pUpdateImplicitPartition(this._pParent?this._pParent._iAssignedPartition:null,e)};t.prototype.notifyPositionChanged=function(){if(!this._positionChanged)this._positionChanged=new g(g.POSITION_CHANGED,this);this.dispatchEvent(this._positionChanged)};t.prototype.notifyRotationChanged=function(){if(!this._rotationChanged)this._rotationChanged=new g(g.ROTATION_CHANGED,this);this.dispatchEvent(this._rotationChanged)};t.prototype.notifyScaleChanged=function(){if(!this._scaleChanged)this._scaleChanged=new g(g.SCALE_CHANGED,this);this.dispatchEvent(this._scaleChanged)};t.prototype.notifySceneChange=function(){if(!this._scenechanged)this._scenechanged=new g(g.SCENE_CHANGED,this);this.dispatchEvent(this._scenechanged)};t.prototype.notifySceneTransformChange=function(){if(!this._sceneTransformChanged)this._sceneTransformChanged=new g(g.SCENETRANSFORM_CHANGED,this);this.dispatchEvent(this._sceneTransformChanged)};t.prototype.invalidateMatrix3D=function(){if(this._matrix3DDirty)return;this._matrix3DDirty=true;if(!this._pSceneTransformDirty&&!this._pIgnoreTransform)this.pInvalidateSceneTransform()};t.prototype.invalidatePartition=function(){var e=this._entityNodes.length;for(var t=0;t<e;t++)this._entityNodes[t].invalidatePartition()};t.prototype.invalidatePivot=function(){this._pivotZero=this._pivot.x==0&&this._pivot.y==0&&this._pivot.z==0;if(this._pivotDirty)return;this._pivotDirty=true;this.invalidateMatrix3D()};t.prototype.invalidatePosition=function(){if(this._positionDirty)return;this._positionDirty=true;this.invalidateMatrix3D();if(this._listenToPositionChanged)this.notifyPositionChanged()};t.prototype.invalidateRotation=function(){if(this._rotationDirty)return;this._rotationDirty=true;this.invalidateMatrix3D();if(this._listenToRotationChanged)this.notifyRotationChanged()};t.prototype.invalidateScale=function(){if(this._scaleDirty)return;this._scaleDirty=true;this.invalidateMatrix3D();if(this._listenToScaleChanged)this.notifyScaleChanged()};t.prototype._iAddEntityNode=function(e){this._entityNodes.push(e);return e};t.prototype._iRemoveEntityNode=function(e){var t=this._entityNodes.indexOf(e);this._entityNodes.splice(t,1);return e};t.prototype._pRegisterEntity=function(e){throw new c};t.prototype._pUnregisterEntity=function(e){throw new c};t.prototype._pInvalidateBounds=function(){this._boxBoundsInvalid=true;this._sphereBoundsInvalid=true;if(this.isEntity)this.invalidatePartition()};t.prototype._pUpdateBoxBounds=function(){this._boxBoundsInvalid=false;if(this._pBoxBounds==null)this._pBoxBounds=new s};t.prototype._pUpdateSphereBounds=function(){this._sphereBoundsInvalid=false;if(this._pSphereBounds==null)this._pSphereBounds=new a};return t}(p);t.exports=b},{"awayjs-core/lib/errors/AbstractMethodError":95,"awayjs-core/lib/geom/Box":104,"awayjs-core/lib/geom/MathConsts":105,"awayjs-core/lib/geom/Matrix3D":107,"awayjs-core/lib/geom/Matrix3DUtils":108,"awayjs-core/lib/geom/Point":112,"awayjs-core/lib/geom/Sphere":114,"awayjs-core/lib/geom/Vector3D":115,"awayjs-core/lib/library/NamedAssetBase":117,"awayjs-display/lib/base/AlignmentMode":33,"awayjs-display/lib/base/OrientationMode":39,"awayjs-display/lib/base/Transform":42,"awayjs-display/lib/events/DisplayObjectEvent":59,"awayjs-display/lib/events/SceneEvent":64,"awayjs-display/lib/pick/PickingCollisionVO":81}],35:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/library/AssetType");var a=e("awayjs-core/lib/library/NamedAssetBase");var n=e("awayjs-display/lib/events/GeometryEvent");var o=function(e){r(t,e);function t(){e.call(this);this._subGeometries=new Array}Object.defineProperty(t.prototype,"assetType",{get:function(){return s.GEOMETRY},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"subGeometries",{get:function(){return this._subGeometries},enumerable:true,configurable:true});t.prototype.getSubGeometries=function(){return this._subGeometries};t.prototype.applyTransformation=function(e){var t=this._subGeometries.length;for(var i=0;i<t;++i)this._subGeometries[i].applyTransformation(e)};t.prototype.addSubGeometry=function(e){this._subGeometries.push(e);e.parentGeometry=this;if(this.hasEventListener(n.SUB_GEOMETRY_ADDED))this.dispatchEvent(new n(n.SUB_GEOMETRY_ADDED,e));this.iInvalidateBounds(e)};t.prototype.removeSubGeometry=function(e){this._subGeometries.splice(this._subGeometries.indexOf(e),1);e.parentGeometry=null;if(this.hasEventListener(n.SUB_GEOMETRY_REMOVED))this.dispatchEvent(new n(n.SUB_GEOMETRY_REMOVED,e));this.iInvalidateBounds(e)};t.prototype.clone=function(){var e=new t;var i=this._subGeometries.length;for(var r=0;r<i;++r)e.addSubGeometry(this._subGeometries[r].clone());return e};t.prototype.scale=function(e){var t=this._subGeometries.length;for(var i=0;i<t;++i)this._subGeometries[i].scale(e)};t.prototype.dispose=function(){var e=this._subGeometries.length;for(var t=0;t<e;++t){var i=this._subGeometries[0];this.removeSubGeometry(i);i.dispose()}};t.prototype.scaleUV=function(e,t){if(e===void 0){e=1}if(t===void 0){t=1}var i=this._subGeometries.length;for(var r=0;r<i;++r)this._subGeometries[r].scaleUV(e,t)};t.prototype.iInvalidateBounds=function(e){if(this.hasEventListener(n.BOUNDS_INVALID))this.dispatchEvent(new n(n.BOUNDS_INVALID,e))};return t}(a);t.exports=o},{"awayjs-core/lib/library/AssetType":116,"awayjs-core/lib/library/NamedAssetBase":117,"awayjs-display/lib/events/GeometryEvent":60}],36:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/library/AssetType");var a=e("awayjs-core/lib/errors/AbstractMethodError");var n=e("awayjs-display/lib/containers/DisplayObjectContainer");var o=e("awayjs-display/lib/events/LightEvent");var h=function(e){r(t,e);function t(){e.call(this);this._color=16777215;this._colorR=1;this._colorG=1;this._colorB=1;this._ambientColor=16777215;this._ambient=0;this._iAmbientR=0;this._iAmbientG=0;this._iAmbientB=0;this._specular=1;this._iSpecularR=1;this._iSpecularG=1;this._iSpecularB=1;this._diffuse=1;this._iDiffuseR=1;this._iDiffuseG=1;this._iDiffuseB=1;this._castsShadows=false}Object.defineProperty(t.prototype,"castsShadows",{get:function(){return this._castsShadows},set:function(e){if(this._castsShadows==e)return;this._castsShadows=e;if(e){if(this._shadowMapper==null)this._shadowMapper=this.pCreateShadowMapper();this._shadowMapper.light=this}else{this._shadowMapper.dispose();this._shadowMapper=null}this.dispatchEvent(new o(o.CASTS_SHADOW_CHANGE))},enumerable:true,configurable:true});t.prototype.pCreateShadowMapper=function(){throw new a};Object.defineProperty(t.prototype,"specular",{get:function(){return this._specular},set:function(e){if(e<0)e=0;this._specular=e;this.updateSpecular()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"diffuse",{get:function(){return this._diffuse},set:function(e){if(e<0)e=0;this._diffuse=e;this.updateDiffuse()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(e){this._color=e;this._colorR=(this._color>>16&255)/255;this._colorG=(this._color>>8&255)/255;this._colorB=(this._color&255)/255;this.updateDiffuse();this.updateSpecular()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"ambient",{get:function(){return this._ambient},set:function(e){if(e<0)e=0;else if(e>1)e=1;this._ambient=e;this.updateAmbient()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"ambientColor",{get:function(){return this._ambientColor},set:function(e){this._ambientColor=e;this.updateAmbient()},enumerable:true,configurable:true});t.prototype.updateAmbient=function(){this._iAmbientR=(this._ambientColor>>16&255)/255*this._ambient;this._iAmbientG=(this._ambientColor>>8&255)/255*this._ambient;this._iAmbientB=(this._ambientColor&255)/255*this._ambient};t.prototype.iGetObjectProjectionMatrix=function(e,t,i){if(i===void 0){i=null}throw new a};Object.defineProperty(t.prototype,"assetType",{get:function(){return s.LIGHT},enumerable:true,configurable:true});t.prototype.updateSpecular=function(){this._iSpecularR=this._colorR*this._specular;this._iSpecularG=this._colorG*this._specular;this._iSpecularB=this._colorB*this._specular};t.prototype.updateDiffuse=function(){this._iDiffuseR=this._colorR*this._diffuse;this._iDiffuseG=this._colorG*this._diffuse;this._iDiffuseB=this._colorB*this._diffuse};Object.defineProperty(t.prototype,"shadowMapper",{get:function(){return this._shadowMapper},set:function(e){this._shadowMapper=e;this._shadowMapper.light=this},enumerable:true,configurable:true});return t}(n);t.exports=h},{"awayjs-core/lib/errors/AbstractMethodError":95,"awayjs-core/lib/library/AssetType":116,"awayjs-display/lib/containers/DisplayObjectContainer":50,"awayjs-display/lib/events/LightEvent":61}],37:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-display/lib/base/LineSubMesh");var a=e("awayjs-display/lib/base/SubGeometryBase");var n=e("awayjs-display/lib/base/TriangleSubGeometry");var o=e("awayjs-display/lib/events/SubGeometryEvent");var h=function(e){r(t,e);function t(){e.call(this,true);this._positionsDirty=true;this._boundingPositionDirty=true;this._thicknessDirty=true;this._colorsDirty=true;this._pSubMeshClass=s}t.prototype._pUpdateStrideOffset=function(){this._pOffset[t.VERTEX_DATA]=0;var e=0;this._pOffset[t.START_POSITION_DATA]=e;e+=3;this._pOffset[t.END_POSITION_DATA]=e;e+=3;this._pOffset[t.THICKNESS_DATA]=e;e+=1;this._pOffset[t.COLOR_DATA]=e;e+=4;this._pStride[t.VERTEX_DATA]=e;this._pStride[t.START_POSITION_DATA]=e;this._pStride[t.END_POSITION_DATA]=e;this._pStride[t.THICKNESS_DATA]=e;this._pStride[t.COLOR_DATA]=e;var i=this._pNumVertices*e;if(this._pVertices==null)this._pVertices=new Array(i);else if(this._pVertices.length!=i)this._pVertices.length=i;this._pStrideOffsetDirty=false};Object.defineProperty(t.prototype,"vertices",{get:function(){if(this._positionsDirty)this.updatePositions(this._startPositions,this._endPositions);if(this._thicknessDirty)this.updateThickness(this._thickness);if(this._colorsDirty)this.updateColors(this._startColors,this._endColors);return this._pVertices},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"startPositions",{get:function(){if(this._positionsDirty)this.updatePositions(this._startPositions,this._endPositions);return this._startPositions},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"endPositions",{get:function(){if(this._positionsDirty)this.updatePositions(this._startPositions,this._endPositions);return this._endPositions},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"thickness",{get:function(){if(this._thicknessDirty)this.updateThickness(this._thickness);return this._thickness},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"startColors",{get:function(){if(this._colorsDirty)this.updateColors(this._startColors,this._endColors);return this._startColors},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"endColors",{get:function(){if(this._colorsDirty)this.updateColors(this._startColors,this._endColors);return this._endColors},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numSegments",{get:function(){return this._numSegments},enumerable:true,configurable:true});t.prototype.getBoundingPositions=function(){if(this._boundingPositionDirty)this._boundingPositions=this.startPositions.concat(this.endPositions);return this._boundingPositions};t.prototype.updatePositions=function(e,i){var r;var s;var a;var n;var o;var h;var l;this._startPositions=e;if(this._startPositions==null)this._startPositions=new Array;this._endPositions=i;if(this._endPositions==null)this._endPositions=new Array;this._boundingPositionDirty=true;this._numSegments=this._startPositions.length/3;this._pNumVertices=this._numSegments*4;var u=this._pNumVertices*this.getStride(t.VERTEX_DATA);if(this._pVertices==null)this._pVertices=new Array(u);else if(this._pVertices.length!=u)this._pVertices.length=u;r=0;s=0;n=this.getOffset(t.START_POSITION_DATA);o=this.getStride(t.START_POSITION_DATA);h=this._pVertices;l=new Array;while(r<e.length){a=n/o&1?i:e;h[n]=a[r];h[n+1]=a[r+1];h[n+2]=a[r+2];a=n/o&1?e:i;h[n+3]=a[r];h[n+4]=a[r+1];h[n+5]=a[r+2];if(++s==4){var p=n/o-3;l.push(p,p+1,p+2,p+3,p+2,p+1);s=0;r+=3}n+=o}this.updateIndices(l);this.pInvalidateBounds();this.notifyPositionsUpdate();this._positionsDirty=false};t.prototype.updateThickness=function(e){var i;var r;var s;var a;var n;var o;this._thickness=e;if(e!=null){i=0;r=0;a=this.getOffset(t.THICKNESS_DATA);n=this.getStride(t.THICKNESS_DATA);o=this._pVertices;s=a;while(i<e.length){o[s]=Math.floor(.5*(s-a)/n+.5)&1?-e[i]:e[i];if(++r==4){r=0;i++}s+=n}}this.notifyThicknessUpdate();this._thicknessDirty=false};t.prototype.updateColors=function(e,i){var r;var s;var a;var n;var o;var h;var l;this._startColors=e;this._endColors=i;if(this._startColors==null){this._startColors=new Array(this._numSegments*4);r=0;while(r<this._startColors.length)this._startColors[r++]=1}if(this._endColors==null){this._endColors=new Array(this._numSegments*4);r=0;while(r<this._endColors.length)this._endColors[r++]=1}r=0;s=0;o=this.getOffset(t.COLOR_DATA);h=this.getStride(t.COLOR_DATA);l=this._pVertices;n=o;while(r<this._startColors.length){a=(n-o)/h&1?this._endColors:this._startColors;l[n]=a[r];l[n+1]=a[r+1];l[n+2]=a[r+2];l[n+3]=a[r+3];if(++s==4){s=0;r+=4}n+=h}this.notifyColorsUpdate();this._colorsDirty=false};t.prototype.dispose=function(){e.prototype.dispose.call(this);this._startPositions=null;this._endPositions=null;this._thickness=null;this._startColors=null;this._endColors=null};t.prototype.pInvalidateBounds=function(){if(this.parentGeometry)this.parentGeometry.iInvalidateBounds(this)};t.prototype.clone=function(){var e=new t;e.updateIndices(this._pIndices.concat());e.updatePositions(this._startPositions.concat(),this._endPositions.concat());e.updateThickness(this._thickness.concat());e.updatePositions(this._startPositions.concat(),this._endPositions.concat());return e};t.prototype._pNotifyVerticesUpdate=function(){this._pStrideOffsetDirty=true;this.notifyPositionsUpdate();this.notifyThicknessUpdate();this.notifyColorsUpdate()};t.prototype.notifyPositionsUpdate=function(){if(this._positionsDirty)return;this._positionsDirty=true;if(!this._positionsUpdated)this._positionsUpdated=new o(o.VERTICES_UPDATED,n.POSITION_DATA);this.dispatchEvent(this._positionsUpdated)};t.prototype.notifyThicknessUpdate=function(){if(this._thicknessDirty)return;this._thicknessDirty=true;if(!this._thicknessUpdated)this._thicknessUpdated=new o(o.VERTICES_UPDATED,t.THICKNESS_DATA);this.dispatchEvent(this._thicknessUpdated)};t.prototype.notifyColorsUpdate=function(){if(this._colorsDirty)return;this._colorsDirty=true;if(!this._colorUpdated)this._colorUpdated=new o(o.VERTICES_UPDATED,t.COLOR_DATA);this.dispatchEvent(this._colorUpdated)};t.VERTEX_DATA="vertices";t.START_POSITION_DATA="startPositions";t.END_POSITION_DATA="endPositions";t.THICKNESS_DATA="thickness";t.COLOR_DATA="colors";t.POSITION_FORMAT="float3";t.COLOR_FORMAT="float4";t.THICKNESS_FORMAT="float1";return t}(a);t.exports=h},{"awayjs-display/lib/base/LineSubMesh":38,"awayjs-display/lib/base/SubGeometryBase":40,"awayjs-display/lib/base/TriangleSubGeometry":43,"awayjs-display/lib/events/SubGeometryEvent":65}],38:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/library/AssetType");var a=e("awayjs-display/lib/base/SubMeshBase");var n=function(e){r(t,e);function t(t,i,r){if(r===void 0){r=null}e.call(this);this._pParentMesh=i;this._subGeometry=t;this.material=r}Object.defineProperty(t.prototype,"assetType",{get:function(){return s.LINE_SUB_MESH},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"subGeometry",{get:function(){return this._subGeometry},enumerable:true,configurable:true});t.prototype.dispose=function(){this.material=null;e.prototype.dispose.call(this)};t.prototype._iCollectRenderable=function(e){e.applyLineSubMesh(this)};return t}(a);t.exports=n},{"awayjs-core/lib/library/AssetType":116,"awayjs-display/lib/base/SubMeshBase":41}],39:[function(e,t,i){var r=function(){function e(){}e.DEFAULT="default";e.CAMERA_PLANE="cameraPlane";e.CAMERA_POSITION="cameraPosition";return e}();t.exports=r},{}],40:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/library/NamedAssetBase");var a=e("awayjs-core/lib/errors/AbstractMethodError");var n=e("awayjs-display/lib/events/SubGeometryEvent");var o=function(e){r(t,e);function t(t){e.call(this);this._pStrideOffsetDirty=true;this._pConcatenateArrays=true;this._pStride=new Object;this._pOffset=new Object;this._pConcatenateArrays=t}t.prototype._pUpdateStrideOffset=function(){throw new a};Object.defineProperty(t.prototype,"subMeshClass",{get:function(){return this._pSubMeshClass},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"concatenateArrays",{get:function(){return this._pConcatenateArrays},set:function(e){if(this._pConcatenateArrays==e)return;this._pConcatenateArrays=e;this._pStrideOffsetDirty=true;if(e)this._pNotifyVerticesUpdate()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"indices",{get:function(){return this._pIndices},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"vertices",{get:function(){this.updateVertices();return this._pVertices},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numTriangles",{get:function(){return this._numTriangles},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numVertices",{get:function(){return this._pNumVertices},enumerable:true,configurable:true});t.prototype.getStride=function(e){if(this._pStrideOffsetDirty)this._pUpdateStrideOffset();return this._pStride[e]};t.prototype.getOffset=function(e){if(this._pStrideOffsetDirty)this._pUpdateStrideOffset();return this._pOffset[e]};t.prototype.updateVertices=function(){throw new a};t.prototype.dispose=function(){this._pIndices=null;this._pVertices=null};t.prototype.updateIndices=function(e){this._pIndices=e;this._numIndices=e.length;this._numTriangles=this._numIndices/3;this.notifyIndicesUpdate()};t.prototype.pInvalidateBounds=function(){if(this.parentGeometry)this.parentGeometry.iInvalidateBounds(this)};t.prototype.clone=function(){throw new a};t.prototype.applyTransformation=function(e){};t.prototype.scale=function(e){};t.prototype.scaleUV=function(e,t){if(e===void 0){e=1}if(t===void 0){t=1}};t.prototype.getBoundingPositions=function(){throw new a};t.prototype.notifyIndicesUpdate=function(){if(!this._indicesUpdated)this._indicesUpdated=new n(n.INDICES_UPDATED);this.dispatchEvent(this._indicesUpdated)};t.prototype._pNotifyVerticesUpdate=function(){throw new a};t.VERTEX_DATA="vertices";return t}(s);t.exports=o},{"awayjs-core/lib/errors/AbstractMethodError":95,"awayjs-core/lib/library/NamedAssetBase":117,"awayjs-display/lib/events/SubGeometryEvent":65}],41:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/errors/AbstractMethodError");var a=e("awayjs-core/lib/library/NamedAssetBase");var n=function(e){r(t,e);function t(){e.call(this);this._iIndex=0;this._renderables=new Array}Object.defineProperty(t.prototype,"animator",{get:function(){return this._pParentMesh.animator},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"material",{get:function(){return this._material||this._pParentMesh.material},set:function(e){if(this.material)this.material.iRemoveOwner(this);this._material=e;if(this.material)this.material.iAddOwner(this)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sceneTransform",{get:function(){return this._pParentMesh.sceneTransform},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"parentMesh",{get:function(){return this._pParentMesh},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"uvTransform",{get:function(){return this._uvTransform||this._pParentMesh.uvTransform},set:function(e){this._uvTransform=e},enumerable:true,configurable:true});t.prototype.dispose=function(){this.material=null;var e=this._renderables.length;for(var t=0;t<e;t++)this._renderables[t].dispose();this._renderables=new Array};t.prototype.getRenderSceneTransform=function(e){return this._pParentMesh.getRenderSceneTransform(e)};t.prototype._iAddRenderable=function(e){this._renderables.push(e);return e};t.prototype._iRemoveRenderable=function(e){var t=this._renderables.indexOf(e);this._renderables.splice(t,1);return e};t.prototype._iInvalidateRenderableGeometry=function(){var e=this._renderables.length;for(var t=0;t<e;t++)this._renderables[t].invalidateGeometry()};t.prototype._iCollectRenderable=function(e){throw new s};t.prototype._iGetExplicitMaterial=function(){return this._material};return t}(a);t.exports=n},{"awayjs-core/lib/errors/AbstractMethodError":95,"awayjs-core/lib/library/NamedAssetBase":117}],42:[function(e,t,i){var r=e("awayjs-core/lib/geom/Matrix3D");var s=e("awayjs-core/lib/geom/Matrix3DUtils");var a=e("awayjs-core/lib/geom/Vector3D");var n=function(){function e(e){this._position=new a;this._displayObject=e}Object.defineProperty(e.prototype,"backVector",{get:function(){var e=s.getForward(this._displayObject._iMatrix3D);e.negate();return e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"concatenatedColorTransform",{get:function(){return this._concatenatedColorTransform},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"concatenatedMatrix",{get:function(){return this._concatenatedMatrix},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"downVector",{get:function(){var e=s.getUp(this._displayObject._iMatrix3D);e.negate();return e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"forwardVector",{get:function(){return s.getForward(this._displayObject._iMatrix3D)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"leftVector",{get:function(){var e=s.getRight(this._displayObject._iMatrix3D);e.negate();return e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"matrix3D",{get:function(){return this._displayObject._iMatrix3D},set:function(e){this._displayObject._iMatrix3D=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"pixelBounds",{get:function(){return this._pixelBounds},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"position",{get:function(){return this._displayObject._iMatrix3D.position},set:function(e){this._displayObject.x=e.x;this._displayObject.y=e.y;this._displayObject.z=e.z},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"rightVector",{get:function(){return s.getRight(this._displayObject._iMatrix3D)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"rotation",{get:function(){return new a(this._displayObject.rotationX,this._displayObject.rotationY,this._displayObject.rotationZ)},set:function(e){this._displayObject.rotationX=e.x;this._displayObject.rotationY=e.y;this._displayObject.rotationZ=e.z},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"scale",{get:function(){return new a(this._displayObject.scaleX,this._displayObject.scaleY,this._displayObject.scaleZ)},set:function(e){this._displayObject.scaleX=e.x;this._displayObject.scaleY=e.y;this._displayObject.scaleZ=e.z},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"upVector",{get:function(){return s.getUp(this._displayObject._iMatrix3D)},enumerable:true,configurable:true});e.prototype.getRelativeMatrix3D=function(e){return new r};e.prototype.moveForward=function(e){this._displayObject.translateLocal(a.Z_AXIS,e)};e.prototype.moveBackward=function(e){this._displayObject.translateLocal(a.Z_AXIS,-e)};e.prototype.moveLeft=function(e){this._displayObject.translateLocal(a.X_AXIS,-e)};e.prototype.moveRight=function(e){this._displayObject.translateLocal(a.X_AXIS,e)};e.prototype.moveUp=function(e){this._displayObject.translateLocal(a.Y_AXIS,e)};e.prototype.moveDown=function(e){this._displayObject.translateLocal(a.Y_AXIS,-e)};return e}();t.exports=n},{"awayjs-core/lib/geom/Matrix3D":107,"awayjs-core/lib/geom/Matrix3DUtils":108,"awayjs-core/lib/geom/Vector3D":115}],43:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/geom/Vector3D");var a=e("awayjs-display/lib/base/SubGeometryBase");var n=e("awayjs-display/lib/base/TriangleSubMesh");var o=e("awayjs-display/lib/events/SubGeometryEvent");var h=function(e){r(t,e);function t(t){e.call(this,t);this._positionsDirty=true;this._faceNormalsDirty=true;this._faceTangentsDirty=true;this._vertexNormalsDirty=true;this._vertexTangentsDirty=true;this._uvsDirty=true;this._secondaryUVsDirty=true;this._jointIndicesDirty=true;this._jointWeightsDirty=true;this._concatenateArrays=true;
this._autoDeriveNormals=true;this._autoDeriveTangents=true;this._autoDeriveUVs=false;this._useFaceWeights=false;this._scaleU=1;this._scaleV=1;this._pSubMeshClass=n}Object.defineProperty(t.prototype,"scaleU",{get:function(){return this._scaleU},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"scaleV",{get:function(){return this._scaleV},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"useCondensedIndices",{get:function(){return this._useCondensedIndices},set:function(e){if(this._useCondensedIndices==e)return;this._useCondensedIndices=e;this.notifyJointIndicesUpdate()},enumerable:true,configurable:true});t.prototype._pUpdateStrideOffset=function(){if(this._concatenateArrays){this._pOffset[t.VERTEX_DATA]=0;this._pOffset[t.POSITION_DATA]=0;var e=3;if(this._vertexNormals!=null){this._pOffset[t.NORMAL_DATA]=e;e+=3}if(this._vertexTangents!=null){this._pOffset[t.TANGENT_DATA]=e;e+=3}if(this._uvs!=null){this._pOffset[t.UV_DATA]=e;e+=2}if(this._secondaryUVs!=null){this._pOffset[t.SECONDARY_UV_DATA]=e;e+=2}if(this._jointIndices!=null){this._pOffset[t.JOINT_INDEX_DATA]=e;e+=this._jointsPerVertex}if(this._jointWeights!=null){this._pOffset[t.JOINT_WEIGHT_DATA]=e;e+=this._jointsPerVertex}this._pStride[t.VERTEX_DATA]=e;this._pStride[t.POSITION_DATA]=e;this._pStride[t.NORMAL_DATA]=e;this._pStride[t.TANGENT_DATA]=e;this._pStride[t.UV_DATA]=e;this._pStride[t.SECONDARY_UV_DATA]=e;this._pStride[t.JOINT_INDEX_DATA]=e;this._pStride[t.JOINT_WEIGHT_DATA]=e;var i=this._pNumVertices*e;if(this._pVertices==null)this._pVertices=new Array(i);else if(this._pVertices.length!=i)this._pVertices.length=i}else{this._pOffset[t.POSITION_DATA]=0;this._pOffset[t.NORMAL_DATA]=0;this._pOffset[t.TANGENT_DATA]=0;this._pOffset[t.UV_DATA]=0;this._pOffset[t.SECONDARY_UV_DATA]=0;this._pOffset[t.JOINT_INDEX_DATA]=0;this._pOffset[t.JOINT_WEIGHT_DATA]=0;this._pStride[t.POSITION_DATA]=3;this._pStride[t.NORMAL_DATA]=3;this._pStride[t.TANGENT_DATA]=3;this._pStride[t.UV_DATA]=2;this._pStride[t.SECONDARY_UV_DATA]=2;this._pStride[t.JOINT_INDEX_DATA]=this._jointsPerVertex;this._pStride[t.JOINT_WEIGHT_DATA]=this._jointsPerVertex}this._pStrideOffsetDirty=false};Object.defineProperty(t.prototype,"jointsPerVertex",{get:function(){return this._jointsPerVertex},set:function(e){if(this._jointsPerVertex==e)return;this._jointsPerVertex=e;this._pStrideOffsetDirty=true;if(this._pConcatenateArrays)this._pNotifyVerticesUpdate()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"autoDeriveUVs",{get:function(){return this._autoDeriveUVs},set:function(e){if(this._autoDeriveUVs==e)return;this._autoDeriveUVs=e;if(e)this.notifyUVsUpdate()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"autoDeriveNormals",{get:function(){return this._autoDeriveNormals},set:function(e){if(this._autoDeriveNormals==e)return;this._autoDeriveNormals=e;if(e)this.notifyNormalsUpdate()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"autoDeriveTangents",{get:function(){return this._autoDeriveTangents},set:function(e){if(this._autoDeriveTangents==e)return;this._autoDeriveTangents=e;if(e)this.notifyTangentsUpdate()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"vertices",{get:function(){if(this._positionsDirty)this.updatePositions(this._positions);if(this._vertexNormalsDirty)this.updateVertexNormals(this._vertexNormals);if(this._vertexTangentsDirty)this.updateVertexTangents(this._vertexTangents);if(this._uvsDirty)this.updateUVs(this._uvs);if(this._secondaryUVsDirty)this.updateSecondaryUVs(this._secondaryUVs);if(this._jointIndicesDirty)this.updateJointIndices(this._jointIndices);if(this._jointWeightsDirty)this.updateJointWeights(this._jointWeights);return this._pVertices},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"positions",{get:function(){if(this._positionsDirty)this.updatePositions(this._positions);return this._positions},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"vertexNormals",{get:function(){if(this._vertexNormalsDirty)this.updateVertexNormals(this._vertexNormals);return this._vertexNormals},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"vertexTangents",{get:function(){if(this._vertexTangentsDirty)this.updateVertexTangents(this._vertexTangents);return this._vertexTangents},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"faceNormals",{get:function(){if(this._faceNormalsDirty)this.updateFaceNormals();return this._faceNormals},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"faceTangents",{get:function(){if(this._faceTangentsDirty)this.updateFaceTangents();return this._faceTangents},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"uvs",{get:function(){if(this._uvsDirty)this.updateUVs(this._uvs);return this._uvs},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"secondaryUVs",{get:function(){if(this._secondaryUVsDirty)this.updateSecondaryUVs(this._secondaryUVs);return this._secondaryUVs},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"jointIndices",{get:function(){if(this._jointIndicesDirty)this.updateJointIndices(this._jointIndices);if(this._useCondensedIndices)return this._condensedJointIndices;return this._jointIndices},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"jointWeights",{get:function(){if(this._jointWeightsDirty)this.updateJointWeights(this._jointWeights);return this._jointWeights},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"useFaceWeights",{get:function(){return this._useFaceWeights},set:function(e){if(this._useFaceWeights==e)return;this._useFaceWeights=e;if(this._autoDeriveNormals)this.notifyNormalsUpdate();if(this._autoDeriveTangents)this.notifyTangentsUpdate();this._faceNormalsDirty=true},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numCondensedJoints",{get:function(){if(this._jointIndicesDirty)this.updateJointIndices(this._jointIndices);return this._numCondensedJoints},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"condensedIndexLookUp",{get:function(){if(this._jointIndicesDirty)this.updateJointIndices(this._jointIndices);return this._condensedIndexLookUp},enumerable:true,configurable:true});t.prototype.getBoundingPositions=function(){if(this._positionsDirty)this.updatePositions(this._positions);return this._positions};t.prototype.updatePositions=function(e){var i;var r;var s;var a;this._positions=e;if(this._positions==null)this._positions=new Array;this._pNumVertices=this._positions.length/3;if(this._concatenateArrays){var n=this._pNumVertices*this.getStride(t.VERTEX_DATA);if(this._pVertices==null)this._pVertices=new Array(n);else if(this._pVertices.length!=n)this._pVertices.length=n;i=0;r=this.getOffset(t.POSITION_DATA);s=this.getStride(t.POSITION_DATA);a=this._pVertices;while(i<e.length){a[r]=e[i++];a[r+1]=e[i++];a[r+2]=e[i++];r+=s}}if(this._autoDeriveNormals)this.notifyNormalsUpdate();if(this._autoDeriveTangents)this.notifyTangentsUpdate();if(this._autoDeriveUVs)this.notifyUVsUpdate();this.pInvalidateBounds();this.notifyPositionsUpdate();this._positionsDirty=false};t.prototype.updateVertexNormals=function(e){var i;var r;var s;var a;var n;if(!this._autoDeriveNormals){if((this._vertexNormals==null||e==null)&&(this._vertexNormals!=null||e!=null)){if(this._concatenateArrays)this._pNotifyVerticesUpdate();else this._pStrideOffsetDirty=true}this._vertexNormals=e;if(e!=null&&this._concatenateArrays){i=0;r=this.getOffset(t.NORMAL_DATA);a=this.getStride(t.NORMAL_DATA);n=this._pVertices;while(i<e.length){n[r]=e[i++];n[r+1]=e[i++];n[r+2]=e[i++];r+=a}}}else{if(this._vertexNormals==null){this._vertexNormals=new Array(this._positions.length);if(this._concatenateArrays)this._pNotifyVerticesUpdate();else this._pStrideOffsetDirty=true}if(this._faceNormalsDirty)this.updateFaceNormals();s=this.getOffset(t.NORMAL_DATA);a=this.getStride(t.NORMAL_DATA);n=this._concatenateArrays?this._pVertices:this._vertexNormals;var o=0;var h=1;var l=2;r=s;var u=n.length;while(r<u){n[r]=0;n[r+1]=0;n[r+2]=0;r+=a}var p=0;var c=this._pIndices.length;var d;i=0;while(i<c){d=this._useFaceWeights?this._faceWeights[p++]:1;r=s+this._pIndices[i++]*a;n[r]+=this._faceNormals[o]*d;n[r+1]+=this._faceNormals[h]*d;n[r+2]+=this._faceNormals[l]*d;r=s+this._pIndices[i++]*a;n[r]+=this._faceNormals[o]*d;n[r+1]+=this._faceNormals[h]*d;n[r+2]+=this._faceNormals[l]*d;r=s+this._pIndices[i++]*a;n[r]+=this._faceNormals[o]*d;n[r+1]+=this._faceNormals[h]*d;n[r+2]+=this._faceNormals[l]*d;o+=3;h+=3;l+=3}i=0;r=s;while(r<u){var f=n[r];var _=n[r+1];var y=n[r+2];var g=1/Math.sqrt(f*f+_*_+y*y);if(this._concatenateArrays){this._vertexNormals[i++]=n[r]=f*g;this._vertexNormals[i++]=n[r+1]=_*g;this._vertexNormals[i++]=n[r+2]=y*g}else{n[r]=f*g;n[r+1]=_*g;n[r+2]=y*g}r+=a}}this.notifyNormalsUpdate();this._vertexNormalsDirty=false};t.prototype.updateVertexTangents=function(e){var i;var r;var s;var a;var n;if(!this._autoDeriveTangents){if((this._vertexTangents==null||e==null)&&(this._vertexTangents!=null||e!=null)){if(this._concatenateArrays)this._pNotifyVerticesUpdate();else this._pStrideOffsetDirty=true}this._vertexTangents=e;if(e!=null&&this._concatenateArrays){i=0;r=this.getOffset(t.TANGENT_DATA);a=this.getStride(t.TANGENT_DATA);n=this._pVertices;while(i<e.length){n[r]=e[i++];n[r+1]=e[i++];n[r+2]=e[i++];r+=a}}}else{if(this._vertexTangents==null){this._vertexTangents=new Array(this._positions.length);if(this._concatenateArrays)this._pNotifyVerticesUpdate();else this._pStrideOffsetDirty=true}if(this._faceTangentsDirty)this.updateFaceTangents();s=this.getOffset(t.TANGENT_DATA);a=this.getStride(t.TANGENT_DATA);n=this._concatenateArrays?this._pVertices:this._vertexTangents;r=s;var o=n.length;while(r<o){n[r]=0;n[r+1]=0;n[r+2]=0;r+=a}var h=0;var l;var u=0;var p=1;var c=2;i=0;var d=this._pIndices.length;while(i<d){l=this._useFaceWeights?this._faceWeights[h++]:1;r=s+this._pIndices[i++]*a;n[r++]+=this._faceTangents[u]*l;n[r++]+=this._faceTangents[p]*l;n[r]+=this._faceTangents[c]*l;r=s+this._pIndices[i++]*a;n[r++]+=this._faceTangents[u]*l;n[r++]+=this._faceTangents[p]*l;n[r]+=this._faceTangents[c]*l;r=s+this._pIndices[i++]*a;n[r++]+=this._faceTangents[u]*l;n[r++]+=this._faceTangents[p]*l;n[r]+=this._faceTangents[c]*l;u+=3;p+=3;c+=3}i=0;r=s;while(r<o){var f=n[r];var _=n[r+1];var y=n[r+2];var g=1/Math.sqrt(f*f+_*_+y*y);if(this._concatenateArrays){this._vertexTangents[i++]=n[r]=f*g;this._vertexTangents[i++]=n[r+1]=_*g;this._vertexTangents[i++]=n[r+2]=y*g}else{n[r]=f*g;n[r+1]=_*g;n[r+2]=y*g}r+=a}}this.notifyTangentsUpdate();this._vertexTangentsDirty=false};t.prototype.updateUVs=function(e){var i;var r;var s;var a;var n;if(!this._autoDeriveUVs){if((this._uvs==null||e==null)&&(this._uvs!=null||e!=null)){if(this._concatenateArrays)this._pNotifyVerticesUpdate();else this._pStrideOffsetDirty=true}this._uvs=e;if(e!=null&&this._concatenateArrays){i=0;r=this.getOffset(t.UV_DATA);a=this.getStride(t.UV_DATA);n=this._pVertices;while(i<e.length){n[r]=e[i++];n[r+1]=e[i++];r+=a}}}else{if(this._uvs==null){this._uvs=new Array(this._positions.length*2/3);if(this._concatenateArrays)this._pNotifyVerticesUpdate();else this._pStrideOffsetDirty=true}s=this.getOffset(t.UV_DATA);a=this.getStride(t.UV_DATA);n=this._concatenateArrays?this._pVertices:this._uvs;i=0;r=s;var o=0;var h=n.length;while(r<h){if(this._concatenateArrays){this._uvs[i++]=n[r]=o*.5;this._uvs[i++]=n[r+1]=1-(o&1)}else{n[r]=o*.5;n[r+1]=1-(o&1)}if(++o==3)o=0;r+=a}}if(this._autoDeriveTangents)this.notifyTangentsUpdate();this.notifyUVsUpdate();this._uvsDirty=false};t.prototype.updateSecondaryUVs=function(e){var i;var r;var s;var a;var n;if(this._concatenateArrays&&(this._secondaryUVs==null||e==null)&&(this._secondaryUVs!=null||e!=null))this._pNotifyVerticesUpdate();this._secondaryUVs=e;if(e!=null&&this._concatenateArrays){s=this.getOffset(t.SECONDARY_UV_DATA);a=this.getStride(t.SECONDARY_UV_DATA);i=0;r=s;n=this._pVertices;while(i<e.length){n[r]=e[i++];n[r+1]=e[i++];r+=a}}this.notifySecondaryUVsUpdate();this._secondaryUVsDirty=false};t.prototype.updateJointIndices=function(e){var i;var r;var s;var a;var n;var o;if(this._concatenateArrays&&(this._jointIndices==null||e==null)&&(this._jointIndices!=null||e!=null))this._pNotifyVerticesUpdate();this._jointIndices=e;if(e!=null){a=this.getOffset(t.JOINT_INDEX_DATA);n=this.getStride(t.JOINT_INDEX_DATA);if(this._useCondensedIndices){i=0;r=0;s=a;o=this._concatenateArrays?this._pVertices:this._condensedJointIndices;var h;var l=0;var u=new Object;if(!this._concatenateArrays)this._condensedJointIndices=new Array(e.length);this._condensedIndexLookUp=new Array;while(i<e.length){for(r=0;r<this._jointsPerVertex;r++){h=e[i++];if(u[h]==undefined){u[h]=l*3;this._condensedIndexLookUp[l++]=h}o[s+r]=u[h]}s+=n}this._numCondensedJoints=l}else if(this._concatenateArrays){i=0;s=a;o=this._pVertices;while(i<e.length){r=0;while(r<this._jointsPerVertex)o[s+r++]=e[i++];s+=n}}}this.notifyJointIndicesUpdate();this._jointIndicesDirty=false};t.prototype.updateJointWeights=function(e){var i;var r;var s;var a;var n;var o;if(this._concatenateArrays&&(this._jointWeights==null||e==null)&&(this._jointWeights!=null||e!=null))this._pNotifyVerticesUpdate();this._jointWeights=e;if(e!=null&&this._concatenateArrays){a=this.getOffset(t.JOINT_WEIGHT_DATA);n=this.getStride(t.JOINT_WEIGHT_DATA);i=0;s=a;o=this._pVertices;while(i<e.length){r=0;while(r<this._jointsPerVertex)o[s+r++]=e[i++];s+=n}}this.notifyJointWeightsUpdate();this._jointWeightsDirty=false};t.prototype.dispose=function(){e.prototype.dispose.call(this);this._positions=null;this._vertexNormals=null;this._vertexTangents=null;this._uvs=null;this._secondaryUVs=null;this._jointIndices=null;this._jointWeights=null;this._faceNormals=null;this._faceWeights=null;this._faceTangents=null};t.prototype.updateIndices=function(t){e.prototype.updateIndices.call(this,t);this._faceNormalsDirty=true;if(this._autoDeriveNormals)this._vertexNormalsDirty=true;if(this._autoDeriveTangents)this._vertexTangentsDirty=true;if(this._autoDeriveUVs)this._uvsDirty=true};t.prototype.clone=function(){var e=new t(this._concatenateArrays);e.updateIndices(this._pIndices.concat());e.updatePositions(this._positions.concat());if(this._vertexNormals&&!this._autoDeriveNormals)e.updateVertexNormals(this._vertexNormals.concat());else e.updateVertexNormals(null);if(this._uvs&&!this._autoDeriveUVs)e.updateUVs(this._uvs.concat());else e.updateUVs(null);if(this._vertexTangents&&!this._autoDeriveTangents)e.updateVertexTangents(this._vertexTangents.concat());else e.updateVertexTangents(null);if(this._secondaryUVs)e.updateSecondaryUVs(this._secondaryUVs.concat());if(this._jointIndices){e.jointsPerVertex=this._jointsPerVertex;e.updateJointIndices(this._jointIndices.concat())}if(this._jointWeights)e.updateJointWeights(this._jointWeights.concat());return e};t.prototype.scaleUV=function(e,t){if(e===void 0){e=1}if(t===void 0){t=1}var i;var r;var s;var a;a=this._uvs;var n=e/this._scaleU;var o=t/this._scaleV;this._scaleU=e;this._scaleV=t;var h=a.length;r=0;s=2;i=r;while(i<h){a[i]*=n;a[i+1]*=o;i+=s}this.notifyUVsUpdate()};t.prototype.scale=function(e){var t;var i;var r;var s;var a;a=this._positions;var n=a.length;r=0;s=3;t=0;i=r;while(t<n){a[i]*=e;a[i+1]*=e;a[i+2]*=e;t+=3;i+=s}this.notifyPositionsUpdate()};t.prototype.applyTransformation=function(e){var i;var r;var a;if(this._concatenateArrays){i=this._pVertices;r=this._pVertices;a=this._pVertices}else{i=this._positions;r=this._vertexNormals;a=this._vertexTangents}var n=this._positions.length/3;var o;var h;var l;var u=new s;var p=this._vertexNormals!=null;var c=this._vertexTangents!=null;var d;if(p||c){d=e.clone();d.invert();d.transpose()}var f=this.getOffset(t.POSITION_DATA);var _=this.getOffset(t.NORMAL_DATA);var y=this.getOffset(t.TANGENT_DATA);var g=this.getStride(t.POSITION_DATA);var m=this.getStride(t.NORMAL_DATA);var b=this.getStride(t.TANGENT_DATA);for(o=0;o<n;++o){h=f+1;l=f+2;u.x=i[f];u.y=i[h];u.z=i[l];u=e.transformVector(u);i[f]=u.x;i[h]=u.y;i[l]=u.z;f+=g;if(p){h=_+1;l=_+2;u.x=r[_];u.y=r[h];u.z=r[l];u=d.deltaTransformVector(u);u.normalize();r[_]=u.x;r[h]=u.y;r[l]=u.z;_+=m}if(c){h=y+1;l=y+2;u.x=a[y];u.y=a[h];u.z=a[l];u=d.deltaTransformVector(u);u.normalize();a[y]=u.x;a[h]=u.y;a[l]=u.z;y+=b}}this.notifyPositionsUpdate();this.notifyNormalsUpdate();this.notifyTangentsUpdate()};t.prototype.updateFaceTangents=function(){var e=0;var t;var i;var r;var s;var a;var n;var o;var h;var l,u,p;var c,d,f;var _,y,g;var m,b,v;var w=this._positions;var x=this._uvs;var j=this._pIndices.length;if(this._faceTangents==null)this._faceTangents=new Array(j);while(e<j){t=this._pIndices[e];i=this._pIndices[e+1];r=this._pIndices[e+2];a=x[t*2+1];n=x[i*2+1]-a;o=x[r*2+1]-a;s=t*3;l=w[s];u=w[s+1];p=w[s+2];s=i*3;c=w[s]-l;d=w[s+1]-u;f=w[s+2]-p;s=r*3;_=w[s]-l;y=w[s+1]-u;g=w[s+2]-p;m=o*c-n*_;b=o*d-n*y;v=o*f-n*g;h=1/Math.sqrt(m*m+b*b+v*v);this._faceTangents[e++]=h*m;this._faceTangents[e++]=h*b;this._faceTangents[e++]=h*v}this._faceTangentsDirty=false};t.prototype.updateFaceNormals=function(){var e=0;var t=0;var i=0;var r;var s;var a;var n,o,h;var l,u,p;var c,d,f;var _,y,g;var m,b,v;var w,x,j;var P;var D=this._positions;var T=this._pIndices.length;if(this._faceNormals==null)this._faceNormals=new Array(T);if(this._useFaceWeights&&this._faceWeights==null)this._faceWeights=new Array(T/3);while(e<T){r=this._pIndices[e++]*3;n=D[r];l=D[r+1];c=D[r+2];r=this._pIndices[e++]*3;o=D[r];u=D[r+1];d=D[r+2];r=this._pIndices[e++]*3;h=D[r];p=D[r+1];f=D[r+2];_=h-n;y=p-l;g=f-c;m=o-n;b=u-l;v=d-c;w=g*b-y*v;x=_*v-g*m;j=y*m-_*b;P=Math.sqrt(w*w+x*x+j*j);if(this._useFaceWeights){var C=P*1e4;if(C<1)C=1;this._faceWeights[i++]=C}P=1/P;this._faceNormals[t++]=w*P;this._faceNormals[t++]=x*P;this._faceNormals[t++]=j*P}this._faceNormalsDirty=false};t.prototype._pNotifyVerticesUpdate=function(){this._pStrideOffsetDirty=true;this.notifyPositionsUpdate();this.notifyNormalsUpdate();this.notifyTangentsUpdate();this.notifyUVsUpdate();this.notifySecondaryUVsUpdate();this.notifyJointIndicesUpdate();this.notifyJointWeightsUpdate()};t.prototype.notifyPositionsUpdate=function(){if(this._positionsDirty)return;this._positionsDirty=true;if(!this._positionsUpdated)this._positionsUpdated=new o(o.VERTICES_UPDATED,t.POSITION_DATA);this.dispatchEvent(this._positionsUpdated)};t.prototype.notifyNormalsUpdate=function(){if(this._vertexNormalsDirty)return;this._vertexNormalsDirty=true;if(!this._normalsUpdated)this._normalsUpdated=new o(o.VERTICES_UPDATED,t.NORMAL_DATA);this.dispatchEvent(this._normalsUpdated)};t.prototype.notifyTangentsUpdate=function(){if(this._vertexTangentsDirty)return;this._vertexTangentsDirty=true;if(!this._tangentsUpdated)this._tangentsUpdated=new o(o.VERTICES_UPDATED,t.TANGENT_DATA);this.dispatchEvent(this._tangentsUpdated)};t.prototype.notifyUVsUpdate=function(){if(this._uvsDirty)return;this._uvsDirty=true;if(!this._uvsUpdated)this._uvsUpdated=new o(o.VERTICES_UPDATED,t.UV_DATA);this.dispatchEvent(this._uvsUpdated)};t.prototype.notifySecondaryUVsUpdate=function(){if(this._secondaryUVsDirty)return;this._secondaryUVsDirty=true;if(!this._secondaryUVsUpdated)this._secondaryUVsUpdated=new o(o.VERTICES_UPDATED,t.SECONDARY_UV_DATA);this.dispatchEvent(this._secondaryUVsUpdated)};t.prototype.notifyJointIndicesUpdate=function(){if(this._jointIndicesDirty)return;this._jointIndicesDirty=true;if(!this._jointIndicesUpdated)this._jointIndicesUpdated=new o(o.VERTICES_UPDATED,t.JOINT_INDEX_DATA);this.dispatchEvent(this._jointIndicesUpdated)};t.prototype.notifyJointWeightsUpdate=function(){if(this._jointWeightsDirty)return;this._jointWeightsDirty=true;if(!this._jointWeightsUpdated)this._jointWeightsUpdated=new o(o.VERTICES_UPDATED,t.JOINT_WEIGHT_DATA);this.dispatchEvent(this._jointWeightsUpdated)};t.POSITION_DATA="positions";t.NORMAL_DATA="vertexNormals";t.TANGENT_DATA="vertexTangents";t.UV_DATA="uvs";t.SECONDARY_UV_DATA="secondaryUVs";t.JOINT_INDEX_DATA="jointIndices";t.JOINT_WEIGHT_DATA="jointWeights";t.POSITION_FORMAT="float3";t.NORMAL_FORMAT="float3";t.TANGENT_FORMAT="float3";t.UV_FORMAT="float2";t.SECONDARY_UV_FORMAT="float2";return t}(a);t.exports=h},{"awayjs-core/lib/geom/Vector3D":115,"awayjs-display/lib/base/SubGeometryBase":40,"awayjs-display/lib/base/TriangleSubMesh":44,"awayjs-display/lib/events/SubGeometryEvent":65}],44:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/library/AssetType");var a=e("awayjs-display/lib/base/SubMeshBase");var n=function(e){r(t,e);function t(t,i,r){if(r===void 0){r=null}e.call(this);this._pParentMesh=i;this._subGeometry=t;this.material=r}Object.defineProperty(t.prototype,"assetType",{get:function(){return s.TRIANGLE_SUB_MESH},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"subGeometry",{get:function(){return this._subGeometry},enumerable:true,configurable:true});t.prototype.dispose=function(){e.prototype.dispose.call(this)};t.prototype._iCollectRenderable=function(e){e.applyTriangleSubMesh(this)};return t}(a);t.exports=n},{"awayjs-core/lib/library/AssetType":116,"awayjs-display/lib/base/SubMeshBase":41}],45:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/geom/Matrix3DUtils");var a=e("awayjs-core/lib/geom/PlaneClassification");var n=e("awayjs-display/lib/bounds/BoundingVolumeBase");var o=e("awayjs-display/lib/prefabs/PrimitiveCubePrefab");var h=function(e){r(t,e);function t(t){e.call(this,t);this._x=0;this._y=0;this._z=0;this._width=0;this._height=0;this._depth=0;this._centerX=0;this._centerY=0;this._centerZ=0;this._halfExtentsX=0;this._halfExtentsY=0;this._halfExtentsZ=0}t.prototype.nullify=function(){this._x=this._y=this._z=0;this._width=this._height=this._depth=0;this._centerX=this._centerY=this._centerZ=0;this._halfExtentsX=this._halfExtentsY=this._halfExtentsZ=0};t.prototype.isInFrustum=function(e,t){if(this._pInvalidated)this._pUpdate();for(var i=0;i<t;++i){var r=e[i];var s=r.a;var a=r.b;var n=r.c;var o=s<0?-this._halfExtentsX:this._halfExtentsX;var h=a<0?-this._halfExtentsY:this._halfExtentsY;var l=n<0?-this._halfExtentsZ:this._halfExtentsZ;var u=s*(this._centerX+o)+a*(this._centerY+h)+n*(this._centerZ+l)-r.d;if(u<0)return false}return true};t.prototype.rayIntersection=function(e,t,i){if(this._pInvalidated)this._pUpdate();return this._box.rayIntersection(e,t,i)};t.prototype.classifyToPlane=function(e){var t=e.a;var i=e.b;var r=e.c;var s=t*this._centerX+i*this._centerY+r*this._centerZ-e.d;if(t<0)t=-t;if(i<0)i=-i;if(r<0)r=-r;var n=t*this._halfExtentsX+i*this._halfExtentsY+r*this._halfExtentsZ;return s>n?a.FRONT:s<-n?a.BACK:a.INTERSECT};t.prototype._pUpdate=function(){e.prototype._pUpdate.call(this);this._box=this._pEntity.getBox();var t=this._pEntity.sceneTransform;var i=this._box.width/2;var r=this._box.height/2;var a=this._box.depth/2;var n=this._box.x+i;var o=this._box.y+r;var h=this._box.z+a;var l=s.RAW_DATA_CONTAINER;t.copyRawDataTo(l);var u=l[0],p=l[4],c=l[8],d=l[12];var f=l[1],_=l[5],y=l[9],g=l[13];var m=l[2],b=l[6],v=l[10],w=l[14];this._centerX=n*u+o*p+h*c+d;this._centerY=n*f+o*_+h*y+g;this._centerZ=n*m+o*b+h*v+w;this._halfExtentsX=Math.abs(i*u+r*p+a*c);this._halfExtentsY=Math.abs(i*f+r*_+a*y);this._halfExtentsZ=Math.abs(i*m+r*b+a*v);if(this._prefab){this._prefab.width=this._box.width;this._prefab.height=this._box.height;this._prefab.depth=this._box.depth;this._pBoundsPrimitive.transform.matrix3D=t}this._width=this._halfExtentsX*2;this._height=this._halfExtentsY*2;this._depth=this._halfExtentsZ*2;this._x=this._centerX-this._halfExtentsX;this._y=this._centerY-this._halfExtentsY;this._z=this._centerZ-this._halfExtentsZ};t.prototype._pCreateBoundsPrimitive=function(){this._prefab=new o;this._prefab.geometryType="lineSubGeometry";return this._prefab.getNewObject()};return t}(n);t.exports=h},{"awayjs-core/lib/geom/Matrix3DUtils":108,"awayjs-core/lib/geom/PlaneClassification":111,"awayjs-display/lib/bounds/BoundingVolumeBase":47,"awayjs-display/lib/prefabs/PrimitiveCubePrefab":87}],46:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/geom/PlaneClassification");var a=e("awayjs-display/lib/bounds/BoundingVolumeBase");var n=e("awayjs-display/lib/prefabs/PrimitiveSpherePrefab");var o=function(e){r(t,e);function t(t){e.call(this,t);this._radius=0;this._centerX=0;this._centerY=0;this._centerZ=0}t.prototype.nullify=function(){this._centerX=this._centerY=this._centerZ=0;this._radius=0};t.prototype.isInFrustum=function(e,t){if(this._pInvalidated)this._pUpdate();for(var i=0;i<t;++i){var r=e[i];var s=r.a<0?-this._radius:this._radius;var a=r.b<0?-this._radius:this._radius;var n=r.c<0?-this._radius:this._radius;var o=r.a*(this._centerX+s)+r.b*(this._centerY+a)+r.c*(this._centerZ+n)-r.d;if(o<0){return false}}return true};t.prototype.rayIntersection=function(e,t,i){if(this._pInvalidated)this._pUpdate();return this._sphere.rayIntersection(e,t,i)};t.prototype.classifyToPlane=function(e){var t=e.a;var i=e.b;var r=e.c;var a=t*this._centerX+i*this._centerY+r*this._centerZ-e.d;if(t<0)t=-t;if(i<0)i=-i;if(r<0)r=-r;var n=(t+i+r)*this._radius;return a>n?s.FRONT:a<-n?s.BACK:s.INTERSECT};t.prototype._pUpdate=function(){e.prototype._pUpdate.call(this);this._sphere=this._pEntity.getSphere();var t=this._pEntity.sceneTransform;var i=this._sphere.x;var r=this._sphere.y;var s=this._sphere.z;var a=this._sphere.radius;var n=new Array(16);t.copyRawDataTo(n);var o=n[0],h=n[4],l=n[8],u=n[12];var p=n[1],c=n[5],d=n[9],f=n[13];var _=n[2],y=n[6],g=n[10],m=n[14];this._centerX=i*o+r*h+s*l+u;this._centerY=i*p+r*c+s*d+f;this._centerZ=i*_+r*y+s*g+m;var b=o+h+l;var v=p+c+d;var w=_+y+g;this._radius=a*Math.sqrt((b*b+v*v+w*w)/3);if(this._prefab){this._prefab.radius=a;this._pBoundsPrimitive.x=i;this._pBoundsPrimitive.y=r;this._pBoundsPrimitive.z=s;this._pBoundsPrimitive.transform.matrix3D=t}};t.prototype._pCreateBoundsPrimitive=function(){this._prefab=new n;this._prefab.geometryType="lineSubGeometry";return this._prefab.getNewObject()};return t}(a);t.exports=o},{"awayjs-core/lib/geom/PlaneClassification":111,"awayjs-display/lib/bounds/BoundingVolumeBase":47,"awayjs-display/lib/prefabs/PrimitiveSpherePrefab":89}],47:[function(e,t,i){var r=e("awayjs-core/lib/errors/AbstractMethodError");var s=function(){function e(e){this._pInvalidated=true;this._pEntity=e}Object.defineProperty(e.prototype,"boundsPrimitive",{get:function(){if(this._pBoundsPrimitive==null){this._pBoundsPrimitive=this._pCreateBoundsPrimitive();this._pUpdate()}return this._pBoundsPrimitive},enumerable:true,configurable:true});e.prototype.nullify=function(){throw new r};e.prototype.isInFrustum=function(e,t){throw new r};e.prototype.clone=function(){throw new r};e.prototype.rayIntersection=function(e,t,i){return-1};e.prototype.classifyToPlane=function(e){throw new r};e.prototype._pUpdate=function(){this._pInvalidated=false};e.prototype.invalidate=function(){this._pInvalidated=true};e.prototype._pCreateBoundsPrimitive=function(){throw new r};return e}();t.exports=s},{"awayjs-core/lib/errors/AbstractMethodError":95}],48:[function(e,t,i){var r=function(){function e(){}e.SPHERE="sphere";e.AXIS_ALIGNED_BOX="axisAlignedBox";e.NULL="null";return e}();t.exports=r},{}],49:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/geom/PlaneClassification");var a=e("awayjs-display/lib/bounds/BoundingVolumeBase");var n=function(e){r(t,e);function t(t){if(t===void 0){t=true}e.call(this,null);this._alwaysIn=t}t.prototype.clone=function(){return new t(this._alwaysIn)};t.prototype.isInFrustum=function(e,t){return this._alwaysIn};t.prototype.classifyToPlane=function(e){return s.INTERSECT};return t}(a);t.exports=n},{"awayjs-core/lib/geom/PlaneClassification":111,"awayjs-display/lib/bounds/BoundingVolumeBase":47}],50:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/library/AssetType");var a=e("awayjs-core/lib/errors/ArgumentError");var n=e("awayjs-core/lib/errors/Error");var o=e("awayjs-core/lib/errors/RangeError");var h=e("awayjs-display/lib/base/DisplayObject");var l=function(e){r(t,e);function t(){e.call(this);this._mouseChildren=true;this._children=new Array}Object.defineProperty(t.prototype,"assetType",{get:function(){return s.CONTAINER},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mouseChildren",{get:function(){return this._mouseChildren},set:function(e){if(this._mouseChildren==e)return;this._mouseChildren=e;this._pUpdateImplicitMouseEnabled(this._pParent?this._pParent.mouseChildren:true)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numChildren",{get:function(){return this._children.length},enumerable:true,configurable:true});t.prototype.addChild=function(e){if(e==null)throw new n("Parameter child cannot be null.");if(e._pParent)e._pParent.removeChildInternal(e);e.iSetParent(this);this._children.push(e);return e};t.prototype.addChildAt=function(e,t){return e};t.prototype.addChildren=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t-0]=arguments[t]}var i=e.length;for(var r=0;r<i;r++)this.addChild(e[r])};t.prototype.clone=function(){var e=new t;e.pivot=this.pivot;e._iMatrix3D=this._iMatrix3D;e.partition=this.partition;e.name=name;var i=this._children.length;for(var r=0;r<i;++r)e.addChild(this._children[r].clone());return e};t.prototype.contains=function(e){return this._children.indexOf(e)>=0};t.prototype.disposeWithChildren=function(){this.dispose();while(this.numChildren>0)this.getChildAt(0).dispose()};t.prototype.getChildAt=function(e){var t=this._children[e];if(t==null)throw new o("Index does not exist in the child list of the caller");return t};t.prototype.getChildByName=function(e){var t=this._children.length;for(var i=0;i<t;++i)if(this._children[i].name==e)return this._children[i];return null};t.prototype.getChildIndex=function(e){var t=this._children.indexOf(e);if(t==-1)throw new a("Child parameter is not a child of the caller");return t};t.prototype.getObjectsUnderPoint=function(e){return new Array};t.prototype.removeChild=function(e){if(e==null)throw new n("Parameter child cannot be null");this.removeChildInternal(e);e.iSetParent(null);return e};t.prototype.removeChildAt=function(e){return this.removeChild(this._children[e])};t.prototype.removeChildren=function(e,t){if(e===void 0){e=0}if(t===void 0){t=2147483647}if(e<0)throw new o("beginIndex is out of range of the child list");if(t>this._children.length)throw new o("endIndex is out of range of the child list");for(var i=e;i<t;i++)this.removeChild(this._children[i])};t.prototype.setChildIndex=function(e,t){};t.prototype.swapChildren=function(e,t){};t.prototype.swapChildrenAt=function(e,t){};t.prototype.pInvalidateSceneTransform=function(){e.prototype.pInvalidateSceneTransform.call(this);var t=this._children.length;for(var i=0;i<t;++i)this._children[i].pInvalidateSceneTransform()};t.prototype._pUpdateImplicitMouseEnabled=function(t){e.prototype._pUpdateImplicitMouseEnabled.call(this,t);var i=this._children.length;for(var r=0;r<i;++r)this._children[r]._pUpdateImplicitMouseEnabled(this._mouseChildren)};t.prototype._pUpdateImplicitVisibility=function(t){e.prototype._pUpdateImplicitVisibility.call(this,t);var i=this._children.length;for(var r=0;r<i;++r)this._children[r]._pUpdateImplicitVisibility(this._pImplicitVisibility)};t.prototype._pUpdateImplicitPartition=function(t,i){e.prototype._pUpdateImplicitPartition.call(this,t,i);
var r=this._children.length;for(var s=0;s<r;++s)this._children[s]._pUpdateImplicitPartition(this._pImplicitPartition,i)};t.prototype.removeChildInternal=function(e){this._children.splice(this.getChildIndex(e),1);return e};return t}(h);t.exports=l},{"awayjs-core/lib/errors/ArgumentError":96,"awayjs-core/lib/errors/Error":97,"awayjs-core/lib/errors/RangeError":99,"awayjs-core/lib/library/AssetType":116,"awayjs-display/lib/base/DisplayObject":34}],51:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/events/EventDispatcher");var a=e("awayjs-display/lib/containers/DisplayObjectContainer");var n=e("awayjs-display/lib/events/SceneEvent");var o=e("awayjs-display/lib/partition/NodeBase");var h=e("awayjs-display/lib/partition/Partition");var l=function(e){r(t,e);function t(){e.call(this);this._expandedPartitions=new Array;this._partitions=new Array;this._iCollectionMark=0;this._partition=new h(new o);this._iSceneGraphRoot=new a;this._iSceneGraphRoot._iSetScene(this);this._iSceneGraphRoot._iIsRoot=true;this._iSceneGraphRoot.partition=this._partition}t.prototype.traversePartitions=function(e){var t=0;var i=this._partitions.length;e.scene=this;this._iCollectionMark++;while(t<i)this._partitions[t++].traverse(e)};Object.defineProperty(t.prototype,"partition",{get:function(){return this._iSceneGraphRoot.partition},set:function(e){this._iSceneGraphRoot.partition=e;this.dispatchEvent(new n(n.PARTITION_CHANGED,this._iSceneGraphRoot))},enumerable:true,configurable:true});t.prototype.contains=function(e){return this._iSceneGraphRoot.contains(e)};t.prototype.addChild=function(e){return this._iSceneGraphRoot.addChild(e)};t.prototype.removeChild=function(e){this._iSceneGraphRoot.removeChild(e)};t.prototype.removeChildAt=function(e){this._iSceneGraphRoot.removeChildAt(e)};t.prototype.getChildAt=function(e){return this._iSceneGraphRoot.getChildAt(e)};Object.defineProperty(t.prototype,"numChildren",{get:function(){return this._iSceneGraphRoot.numChildren},enumerable:true,configurable:true});t.prototype._iRegisterPartition=function(e){this._expandedPartitions.push(e);if(this._partitions.indexOf(e)==-1)this._partitions.push(e)};t.prototype._iUnregisterPartition=function(e){this._expandedPartitions.splice(this._expandedPartitions.indexOf(e),1);if(this._expandedPartitions.indexOf(e)==-1)this._partitions.splice(this._partitions.indexOf(e),1)};return t}(s);t.exports=l},{"awayjs-core/lib/events/EventDispatcher":102,"awayjs-display/lib/containers/DisplayObjectContainer":50,"awayjs-display/lib/events/SceneEvent":64,"awayjs-display/lib/partition/NodeBase":76,"awayjs-display/lib/partition/Partition":78}],52:[function(e,t,i){var r=e("awayjs-core/lib/utils/getTimer");var s=e("awayjs-display/lib/containers/Scene");var a=e("awayjs-display/lib/pick/RaycastPicker");var n=e("awayjs-display/lib/entities/Camera");var o=e("awayjs-display/lib/events/CameraEvent");var h=e("awayjs-display/lib/events/SceneEvent");var l=e("awayjs-display/lib/events/RendererEvent");var u=e("awayjs-display/lib/managers/MouseManager");var p=function(){function e(e,t,i){var r=this;if(t===void 0){t=null}if(i===void 0){i=null}this._width=0;this._height=0;this._time=0;this._deltaTime=0;this._backgroundColor=0;this._backgroundAlpha=1;this._viewportDirty=true;this._scissorDirty=true;this._mousePicker=new a;this._onScenePartitionChangedDelegate=function(e){return r.onScenePartitionChanged(e)};this._onProjectionChangedDelegate=function(e){return r.onProjectionChanged(e)};this._onViewportUpdatedDelegate=function(e){return r.onViewportUpdated(e)};this._onScissorUpdatedDelegate=function(e){return r.onScissorUpdated(e)};this.scene=t||new s;this.camera=i||new n;this.renderer=e;document.body.style.margin="0px";this._htmlElement=document.createElement("div");this._htmlElement.style.position="absolute";document.body.appendChild(this._htmlElement);this._mouseManager=u.getInstance();this._mouseManager.registerView(this)}e.prototype.onScenePartitionChanged=function(e){if(this._pCamera)this._pScene.partition._iRegisterCamera(this._pCamera)};Object.defineProperty(e.prototype,"mouseX",{get:function(){return this._pMouseX},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"mouseY",{get:function(){return this._pMouseY},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"htmlElement",{get:function(){return this._htmlElement},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"renderer",{get:function(){return this._pRenderer},set:function(e){if(this._pRenderer==e)return;if(this._pRenderer){this._pRenderer.dispose();this._pRenderer.removeEventListener(l.VIEWPORT_UPDATED,this._onViewportUpdatedDelegate);this._pRenderer.removeEventListener(l.SCISSOR_UPDATED,this._onScissorUpdatedDelegate)}this._pRenderer=e;this._pRenderer.addEventListener(l.VIEWPORT_UPDATED,this._onViewportUpdatedDelegate);this._pRenderer.addEventListener(l.SCISSOR_UPDATED,this._onScissorUpdatedDelegate);this._pEntityCollector=this._pRenderer._iCreateEntityCollector();if(this._pCamera)this._pEntityCollector.camera=this._pCamera;this._pRenderer._iBackgroundR=(this._backgroundColor>>16&255)/255;this._pRenderer._iBackgroundG=(this._backgroundColor>>8&255)/255;this._pRenderer._iBackgroundB=(this._backgroundColor&255)/255;this._pRenderer._iBackgroundAlpha=this._backgroundAlpha;this._pRenderer.width=this._width;this._pRenderer.height=this._height;this._pRenderer.shareContext=this._shareContext},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"shareContext",{get:function(){return this._shareContext},set:function(e){if(this._shareContext==e)return;this._shareContext=e;if(this._pRenderer)this._pRenderer.shareContext=this._shareContext},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){if(this._backgroundColor==e)return;this._backgroundColor=e;this._pRenderer._iBackgroundR=(e>>16&255)/255;this._pRenderer._iBackgroundG=(e>>8&255)/255;this._pRenderer._iBackgroundB=(e&255)/255},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundAlpha},set:function(e){if(e>1)e=1;else if(e<0)e=0;if(this._backgroundAlpha==e)return;this._pRenderer._iBackgroundAlpha=this._backgroundAlpha=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"camera",{get:function(){return this._pCamera},set:function(e){if(this._pCamera==e)return;if(this._pCamera)this._pCamera.removeEventListener(o.PROJECTION_CHANGED,this._onProjectionChangedDelegate);this._pCamera=e;if(this._pEntityCollector)this._pEntityCollector.camera=this._pCamera;if(this._pScene)this._pScene.partition._iRegisterCamera(this._pCamera);this._pCamera.addEventListener(o.PROJECTION_CHANGED,this._onProjectionChangedDelegate);this._scissorDirty=true;this._viewportDirty=true},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"scene",{get:function(){return this._pScene},set:function(e){if(this._pScene==e)return;if(this._pScene)this._pScene.removeEventListener(h.PARTITION_CHANGED,this._onScenePartitionChangedDelegate);this._pScene=e;this._pScene.addEventListener(h.PARTITION_CHANGED,this._onScenePartitionChangedDelegate);if(this._pCamera)this._pScene.partition._iRegisterCamera(this._pCamera)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"deltaTime",{get:function(){return this._deltaTime},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(e){if(this._width==e)return;this._width=e;this._aspectRatio=this._width/this._height;this._pCamera.projection._iAspectRatio=this._aspectRatio;this._pRenderer.width=e;this._htmlElement.style.width=e+"px"},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(e){if(this._height==e)return;this._height=e;this._aspectRatio=this._width/this._height;this._pCamera.projection._iAspectRatio=this._aspectRatio;this._pRenderer.height=e;this._htmlElement.style.height=e+"px"},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"mousePicker",{get:function(){return this._mousePicker},set:function(e){if(this._mousePicker==e)return;if(e==null)this._mousePicker=new a;else this._mousePicker=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"x",{get:function(){return this._pRenderer.x},set:function(e){if(this._pRenderer.x==e)return;this._pRenderer.x==e;this._htmlElement.style.left=e+"px"},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"y",{get:function(){return this._pRenderer.y},set:function(e){if(this._pRenderer.y==e)return;this._pRenderer.y==e;this._htmlElement.style.top=e+"px"},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"visible",{get:function(){return this._htmlElement.style.visibility=="visible"},set:function(e){this._htmlElement.style.visibility=e?"visible":"hidden"},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"renderedFacesCount",{get:function(){return 0},enumerable:true,configurable:true});e.prototype.render=function(){this.pUpdateTime();this._pCamera.projection._iAspectRatio=this._aspectRatio;if(this._scissorDirty){this._scissorDirty=false;this._pCamera.projection._iUpdateScissorRect(this._pRenderer.scissorRect.x,this._pRenderer.scissorRect.y,this._pRenderer.scissorRect.width,this._pRenderer.scissorRect.height)}if(this._viewportDirty){this._viewportDirty=false;this._pCamera.projection._iUpdateViewport(this._pRenderer.viewPort.x,this._pRenderer.viewPort.y,this._pRenderer.viewPort.width,this._pRenderer.viewPort.height)}if(!this._shareContext){if(this.forceMouseMove&&this._htmlElement==this._mouseManager._iActiveDiv&&!this._mouseManager._iUpdateDirty)this._mouseManager._iCollidingObject=this.mousePicker.getViewCollision(this._pMouseX,this._pMouseY,this);this._mouseManager.fireMouseEvents(this.forceMouseMove)}this._pEntityCollector.clear();this._pScene.traversePartitions(this._pEntityCollector);this._pRenderer.render(this._pEntityCollector)};e.prototype.pUpdateTime=function(){var e=r();if(this._time==0)this._time=e;this._deltaTime=e-this._time;this._time=e};e.prototype.dispose=function(){this._pRenderer.dispose();this._mouseManager.unregisterView(this);this._mouseManager=null;this._pRenderer=null;this._pEntityCollector=null};Object.defineProperty(e.prototype,"iEntityCollector",{get:function(){return this._pEntityCollector},enumerable:true,configurable:true});e.prototype.onProjectionChanged=function(e){this._scissorDirty=true;this._viewportDirty=true};e.prototype.onViewportUpdated=function(e){this._viewportDirty=true};e.prototype.onScissorUpdated=function(e){this._scissorDirty=true};e.prototype.project=function(e){var t=this._pCamera.project(e);t.x=t.x*this._pRenderer.viewPort.width/2+this._width*this._pCamera.projection.originX;t.y=t.y*this._pRenderer.viewPort.height/2+this._height*this._pCamera.projection.originY;return t};e.prototype.unproject=function(e,t,i){return this._pCamera.unproject(2*(e-this._width*this._pCamera.projection.originX)/this._pRenderer.viewPort.width,2*(t-this._height*this._pCamera.projection.originY)/this._pRenderer.viewPort.height,i)};e.prototype.getRay=function(e,t,i){return this._pCamera.getRay((e*2-this._width)/this._width,(t*2-this._height)/this._height,i)};e.prototype.updateCollider=function(){if(!this._shareContext){if(this._htmlElement==this._mouseManager._iActiveDiv)this._mouseManager._iCollidingObject=this.mousePicker.getViewCollision(this._pMouseX,this._pMouseY,this)}else{var e=this.mousePicker.getViewCollision(this._pMouseX,this._pMouseY,this);if(this.layeredView||this._mouseManager._iCollidingObject==null||e.rayEntryDistance<this._mouseManager._iCollidingObject.rayEntryDistance)this._mouseManager._iCollidingObject=e}};return e}();t.exports=p},{"awayjs-core/lib/utils/getTimer":128,"awayjs-display/lib/containers/Scene":51,"awayjs-display/lib/entities/Camera":53,"awayjs-display/lib/events/CameraEvent":58,"awayjs-display/lib/events/RendererEvent":63,"awayjs-display/lib/events/SceneEvent":64,"awayjs-display/lib/managers/MouseManager":66,"awayjs-display/lib/pick/RaycastPicker":82}],53:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/geom/Matrix3D");var a=e("awayjs-core/lib/geom/Plane3D");var n=e("awayjs-core/lib/library/AssetType");var o=e("awayjs-core/lib/events/ProjectionEvent");var h=e("awayjs-core/lib/projections/PerspectiveProjection");var l=e("awayjs-display/lib/bounds/BoundsType");var u=e("awayjs-display/lib/containers/DisplayObjectContainer");var p=e("awayjs-display/lib/events/CameraEvent");var c=function(e){r(t,e);function t(t){var i=this;if(t===void 0){t=null}e.call(this);this._viewProjection=new s;this._viewProjectionDirty=true;this._frustumPlanesDirty=true;this._pIsEntity=true;this._onProjectionMatrixChangedDelegate=function(e){return i.onProjectionMatrixChanged(e)};this._projection=t||new h;this._projection.addEventListener(o.MATRIX_CHANGED,this._onProjectionMatrixChangedDelegate);this._frustumPlanes=[];for(var r=0;r<6;++r)this._frustumPlanes[r]=new a;this.z=-1e3;this._boundsType=l.NULL}Object.defineProperty(t.prototype,"assetType",{get:function(){return n.CAMERA},enumerable:true,configurable:true});t.prototype.onProjectionMatrixChanged=function(e){this._viewProjectionDirty=true;this._frustumPlanesDirty=true;this.dispatchEvent(e)};Object.defineProperty(t.prototype,"frustumPlanes",{get:function(){if(this._frustumPlanesDirty)this.updateFrustum();return this._frustumPlanes},enumerable:true,configurable:true});t.prototype.updateFrustum=function(){var e,t,i;var r,s,a,n;var o,h,l,u;var p,c,d,f;var _,y,g,m;var b;var v=new Array(16);var w;this.viewProjection.copyRawDataTo(v);r=v[0];s=v[4];a=v[8];n=v[12];o=v[1];h=v[5];l=v[9];u=v[13];p=v[2];c=v[6];d=v[10];f=v[14];_=v[3];y=v[7];g=v[11];m=v[15];b=this._frustumPlanes[0];e=_+r;t=y+s;i=g+a;w=1/Math.sqrt(e*e+t*t+i*i);b.a=e*w;b.b=t*w;b.c=i*w;b.d=-(m+n)*w;b=this._frustumPlanes[1];e=_-r;t=y-s;i=g-a;w=1/Math.sqrt(e*e+t*t+i*i);b.a=e*w;b.b=t*w;b.c=i*w;b.d=(n-m)*w;b=this._frustumPlanes[2];e=_+o;t=y+h;i=g+l;w=1/Math.sqrt(e*e+t*t+i*i);b.a=e*w;b.b=t*w;b.c=i*w;b.d=-(m+u)*w;b=this._frustumPlanes[3];e=_-o;t=y-h;i=g-l;w=1/Math.sqrt(e*e+t*t+i*i);b.a=e*w;b.b=t*w;b.c=i*w;b.d=(u-m)*w;b=this._frustumPlanes[4];e=p;t=c;i=d;w=1/Math.sqrt(e*e+t*t+i*i);b.a=e*w;b.b=t*w;b.c=i*w;b.d=-f*w;b=this._frustumPlanes[5];e=_-p;t=y-c;i=g-d;w=1/Math.sqrt(e*e+t*t+i*i);b.a=e*w;b.b=t*w;b.c=i*w;b.d=(f-m)*w;this._frustumPlanesDirty=false};t.prototype.pInvalidateSceneTransform=function(){e.prototype.pInvalidateSceneTransform.call(this);this._viewProjectionDirty=true;this._frustumPlanesDirty=true};Object.defineProperty(t.prototype,"projection",{get:function(){return this._projection},set:function(e){if(this._projection==e)return;if(!e)throw new Error("Projection cannot be null!");this._projection.removeEventListener(o.MATRIX_CHANGED,this._onProjectionMatrixChangedDelegate);this._projection=e;this._projection.addEventListener(o.MATRIX_CHANGED,this._onProjectionMatrixChangedDelegate);this.dispatchEvent(new p(p.PROJECTION_CHANGED,this))},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"viewProjection",{get:function(){if(this._viewProjectionDirty){this._viewProjection.copyFrom(this.inverseSceneTransform);this._viewProjection.append(this._projection.matrix);this._viewProjectionDirty=false}return this._viewProjection},enumerable:true,configurable:true});t.prototype.getRay=function(e,t,i){return this.sceneTransform.deltaTransformVector(this._projection.unproject(e,t,i))};t.prototype.project=function(e){return this._projection.project(this.inverseSceneTransform.transformVector(e))};t.prototype.unproject=function(e,t,i){return this.sceneTransform.transformVector(this._projection.unproject(e,t,i))};t.prototype._iCollectRenderables=function(e){if(this._iSourcePrefab)this._iSourcePrefab._iValidate();this._iCollectRenderable(e)};t.prototype._iCollectRenderable=function(e){};t.prototype._pRegisterEntity=function(e){e._iRegisterCamera(this)};t.prototype._pUnregisterEntity=function(e){e._iUnregisterCamera(this)};return t}(u);t.exports=c},{"awayjs-core/lib/events/ProjectionEvent":103,"awayjs-core/lib/geom/Matrix3D":107,"awayjs-core/lib/geom/Plane3D":110,"awayjs-core/lib/library/AssetType":116,"awayjs-core/lib/projections/PerspectiveProjection":120,"awayjs-display/lib/bounds/BoundsType":48,"awayjs-display/lib/containers/DisplayObjectContainer":50,"awayjs-display/lib/events/CameraEvent":58}],54:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/geom/Matrix3D");var a=e("awayjs-core/lib/geom/Vector3D");var n=e("awayjs-display/lib/base/LightBase");var o=e("awayjs-display/lib/bounds/BoundsType");var h=e("awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper");var l=function(e){r(t,e);function t(t,i,r){if(t===void 0){t=0}if(i===void 0){i=-1}if(r===void 0){r=1}e.call(this);this._pAabbPoints=new Array(24);this._pIsEntity=true;this.direction=new a(t,i,r);this._sceneDirection=new a;this._boundsType=o.NULL}Object.defineProperty(t.prototype,"sceneDirection",{get:function(){if(this._pSceneTransformDirty)this.pUpdateSceneTransform();return this._sceneDirection},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},set:function(e){this._direction=e;if(!this._tmpLookAt)this._tmpLookAt=new a;this._tmpLookAt.x=this.x+this._direction.x;this._tmpLookAt.y=this.y+this._direction.y;this._tmpLookAt.z=this.z+this._direction.z;this.lookAt(this._tmpLookAt)},enumerable:true,configurable:true});t.prototype.pUpdateSceneTransform=function(){e.prototype.pUpdateSceneTransform.call(this);this.sceneTransform.copyColumnTo(2,this._sceneDirection);this._sceneDirection.normalize()};t.prototype.pCreateShadowMapper=function(){return new h};t.prototype.iGetObjectProjectionMatrix=function(e,t,i){if(i===void 0){i=null}var r=new Array;var a=new s;a.copyFrom(e.getRenderSceneTransform(t));a.append(this.inverseSceneTransform);if(!this._projAABBPoints)this._projAABBPoints=[];a.transformVectors(this._pAabbPoints,this._projAABBPoints);var n=Infinity,o=-Infinity;var h=Infinity,l=-Infinity;var u=Infinity,p=-Infinity;var c;for(var d=0;d<24;){c=this._projAABBPoints[d++];if(c<n)n=c;if(c>o)o=c;c=this._projAABBPoints[d++];if(c<h)h=c;if(c>l)l=c;c=this._projAABBPoints[d++];if(c<u)u=c;if(c>p)p=c}var f=1/(o-n);var _=1/(l-h);var y=1/(p-u);r[0]=2*f;r[5]=2*_;r[10]=y;r[12]=-(o+n)*f;r[13]=-(l+h)*_;r[14]=-u*y;r[1]=r[2]=r[3]=r[4]=r[6]=r[7]=r[8]=r[9]=r[11]=0;r[15]=1;if(!i)i=new s;i.copyRawDataFrom(r);i.prepend(a);return i};t.prototype._iCollectRenderables=function(e){};t.prototype._pRegisterEntity=function(e){e._iRegisterDirectionalLight(this)};t.prototype._pUnregisterEntity=function(e){e._iUnregisterDirectionalLight(this)};t.prototype._pUpdateBoxBounds=function(){e.prototype._pUpdateBoxBounds.call(this);var t=this._pBoxBounds.x;var i=this._pBoxBounds.y-this._pBoxBounds.height;var r=this._pBoxBounds.z;var s=this._pBoxBounds.x+this._pBoxBounds.width;var a=this._pBoxBounds.y;var n=this._pBoxBounds.z+this._pBoxBounds.depth;this._pAabbPoints[0]=t;this._pAabbPoints[1]=i;this._pAabbPoints[2]=r;this._pAabbPoints[3]=s;this._pAabbPoints[4]=i;this._pAabbPoints[5]=r;this._pAabbPoints[6]=t;this._pAabbPoints[7]=a;this._pAabbPoints[8]=r;this._pAabbPoints[9]=s;this._pAabbPoints[10]=a;this._pAabbPoints[11]=r;this._pAabbPoints[12]=t;this._pAabbPoints[13]=i;this._pAabbPoints[14]=n;this._pAabbPoints[15]=s;this._pAabbPoints[16]=i;this._pAabbPoints[17]=n;this._pAabbPoints[18]=t;this._pAabbPoints[19]=a;this._pAabbPoints[20]=n;this._pAabbPoints[21]=s;this._pAabbPoints[22]=a;this._pAabbPoints[23]=n};return t}(n);t.exports=l},{"awayjs-core/lib/geom/Matrix3D":107,"awayjs-core/lib/geom/Vector3D":115,"awayjs-display/lib/base/LightBase":36,"awayjs-display/lib/bounds/BoundsType":48,"awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper":70}],55:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/errors/Error");var a=e("awayjs-display/lib/base/LightBase");var n=e("awayjs-display/lib/bounds/BoundsType");var o=function(e){r(t,e);function t(t,i){if(i===void 0){i=null}e.call(this);this._pIsEntity=true;this._diffuseMap=t;this._specularMap=i;this._boundsType=n.NULL}Object.defineProperty(t.prototype,"diffuseMap",{get:function(){return this._diffuseMap},set:function(e){this._diffuseMap=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"specularMap",{get:function(){return this._specularMap},set:function(e){this._specularMap=e},enumerable:true,configurable:true});t.prototype.iGetObjectProjectionMatrix=function(e,t,i){if(i===void 0){i=null}throw new s("Object projection matrices are not supported for LightProbe objects!")};t.prototype._iCollectRenderables=function(e){};t.prototype._pRegisterEntity=function(e){e._iRegisterLightProbe(this)};t.prototype._pUnregisterEntity=function(e){e._iUnregisterLightProbe(this)};return t}(a);t.exports=o},{"awayjs-core/lib/errors/Error":97,"awayjs-display/lib/base/LightBase":36,"awayjs-display/lib/bounds/BoundsType":48}],56:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/library/AssetType");var a=e("awayjs-display/lib/base/Geometry");var n=e("awayjs-display/lib/bounds/BoundsType");var o=e("awayjs-display/lib/containers/DisplayObjectContainer");var h=e("awayjs-display/lib/events/GeometryEvent");var l=function(e){r(t,e);function t(t,i){var r=this;if(i===void 0){i=null}e.call(this);this._castsShadows=true;this._shareAnimationGeometry=true;this._pIsEntity=true;this._subMeshes=new Array;this._onGeometryBoundsInvalidDelegate=function(e){return r.onGeometryBoundsInvalid(e)};this._onSubGeometryAddedDelegate=function(e){return r.onSubGeometryAdded(e)};this._onSubGeometryRemovedDelegate=function(e){return r.onSubGeometryRemoved(e)};this.geometry=t||new a;this.material=i;this._boundsType=n.AXIS_ALIGNED_BOX}Object.defineProperty(t.prototype,"animator",{get:function(){return this._animator},set:function(e){if(this._animator)this._animator.removeOwner(this);this._animator=e;var t=this._subMeshes.length;var i;for(var r=0;r<t;++r){i=this._subMeshes[r];if(i.material){i.material.iRemoveOwner(i);i.material.iAddOwner(i)}i._iInvalidateRenderableGeometry()}if(this._animator)this._animator.addOwner(this)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"assetType",{get:function(){return s.MESH},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"castsShadows",{get:function(){return this._castsShadows},set:function(e){this._castsShadows=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"geometry",{get:function(){if(this._iSourcePrefab)this._iSourcePrefab._iValidate();return this._geometry},set:function(e){var t;if(this._geometry){this._geometry.removeEventListener(h.BOUNDS_INVALID,this._onGeometryBoundsInvalidDelegate);this._geometry.removeEventListener(h.SUB_GEOMETRY_ADDED,this._onSubGeometryAddedDelegate);this._geometry.removeEventListener(h.SUB_GEOMETRY_REMOVED,this._onSubGeometryRemovedDelegate);for(t=0;t<this._subMeshes.length;++t)this._subMeshes[t].dispose();this._subMeshes.length=0}this._geometry=e;if(this._geometry){this._geometry.addEventListener(h.BOUNDS_INVALID,this._onGeometryBoundsInvalidDelegate);this._geometry.addEventListener(h.SUB_GEOMETRY_ADDED,this._onSubGeometryAddedDelegate);this._geometry.addEventListener(h.SUB_GEOMETRY_REMOVED,this._onSubGeometryRemovedDelegate);var i=this._geometry.subGeometries;for(t=0;t<i.length;++t)this.addSubMesh(i[t])}},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"material",{get:function(){return this._material},set:function(e){if(e==this._material)return;var t;var i=this._subMeshes.length;var r;for(t=0;t<i;t++)if(this._material&&(r=this._subMeshes[t]).material==this._material)this._material.iRemoveOwner(r);this._material=e;for(t=0;t<i;t++)if(this._material&&(r=this._subMeshes[t]).material==this._material)this._material.iAddOwner(r)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"shareAnimationGeometry",{get:function(){return this._shareAnimationGeometry},set:function(e){this._shareAnimationGeometry=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"subMeshes",{get:function(){if(this._iSourcePrefab)this._iSourcePrefab._iValidate();return this._subMeshes},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"uvTransform",{get:function(){return this._uvTransform},set:function(e){this._uvTransform=e},enumerable:true,configurable:true});t.prototype.bakeTransformations=function(){this.geometry.applyTransformation(this._iMatrix3D);this._iMatrix3D.identity()};t.prototype.dispose=function(){e.prototype.dispose.call(this);this.material=null;this.geometry=null};t.prototype.disposeWithAnimatorAndChildren=function(){this.disposeWithChildren();if(this._animator)this._animator.dispose()};t.prototype.clone=function(){var e=new t(this._geometry,this._material);e._iMatrix3D=this._iMatrix3D;e.pivot=this.pivot;e.partition=this.partition;e.boundsType=this.boundsType;e.name=this.name;e.castsShadows=this.castsShadows;e.shareAnimationGeometry=this.shareAnimationGeometry;e.mouseEnabled=this.mouseEnabled;e.mouseChildren=this.mouseChildren;e.extra=this.extra;var i=this._subMeshes.length;for(var r=0;r<i;++r)e._subMeshes[r].material=this._subMeshes[r]._iGetExplicitMaterial();i=this.numChildren;var s;for(r=0;r<i;++r){s=this.getChildAt(r).clone();e.addChild(s)}if(this._animator)e.animator=this._animator.clone();return e};t.prototype.getSubMeshFromSubGeometry=function(e){return this._subMeshes[this._geometry.subGeometries.indexOf(e)]};t.prototype._pUpdateBoxBounds=function(){e.prototype._pUpdateBoxBounds.call(this);var t,i,r,s;var a=this._geometry.subGeometries;var n;var o;var h=a.length;var l,u,p;var c,d,f;if(h>0){t=0;n=a[0];o=n.getBoundingPositions();l=c=o[t];u=d=o[t+1];p=f=o[t+2];for(i=0;i<h;i++){n=a[i];o=n.getBoundingPositions();s=o.length;for(t=0;t<s;t+=3){r=o[t];if(r<l)l=r;else if(r>c)c=r;r=o[t+1];if(r<u)u=r;else if(r>d)d=r;r=o[t+2];if(r<p)p=r;else if(r>f)f=r}}this._pBoxBounds.width=c-(this._pBoxBounds.x=l);this._pBoxBounds.height=d-(this._pBoxBounds.y=u);this._pBoxBounds.depth=f-(this._pBoxBounds.z=p)}else{this._pBoxBounds.setEmpty()}};t.prototype._pUpdateSphereBounds=function(){e.prototype._pUpdateSphereBounds.call(this);var t=this.getBox();var i=t.x+t.width/2;var r=t.y+t.height/2;var s=t.z+t.depth/2;var a,n,o,h;var l=this._geometry.subGeometries;var u;var p;var c=l.length;var d=0;var f;var _;var y;var g;if(c>0){a=0;u=l[0];p=u.getBoundingPositions();for(n=0;n<c;n++){u=l[n];p=u.getBoundingPositions();h=p.length;for(a=0;a<h;a+=3){_=p[a]-i;y=p[a+1]-r;g=p[a+2]-s;f=_*_+y*y+g*g;if(d<f)d=f}}}this._pSphereBounds.x=i;this._pSphereBounds.y=r;this._pSphereBounds.z=s;this._pSphereBounds.radius=Math.sqrt(d)};t.prototype.onGeometryBoundsInvalid=function(e){this._pInvalidateBounds()};t.prototype.onSubGeometryAdded=function(e){this.addSubMesh(e.subGeometry)};t.prototype.onSubGeometryRemoved=function(e){var t;var i=e.subGeometry;var r=this._subMeshes.length;var s;for(s=0;s<r;++s){t=this._subMeshes[s];if(t.subGeometry==i){t.dispose();this._subMeshes.splice(s,1);break}}--r;for(;s<r;++s)this._subMeshes[s]._iIndex=s};t.prototype.addSubMesh=function(e){var t=e.subMeshClass;var i=new t(e,this,null);var r=this._subMeshes.length;i._iIndex=r;this._subMeshes[r]=i;this._pInvalidateBounds()};t.prototype._iTestCollision=function(e,t){return this._pPickingCollider.testMeshCollision(this,this._pPickingCollisionVO,e,t)};t.prototype._iCollectRenderables=function(e){if(this._iSourcePrefab)this._iSourcePrefab._iValidate();var t=this._subMeshes.length;for(var i=0;i<t;i++)this._subMeshes[i]._iCollectRenderable(e)};t.prototype._iInvalidateRenderableGeometries=function(){var e=this._subMeshes.length;for(var t=0;t<e;++t)this._subMeshes[t]._iInvalidateRenderableGeometry()};t.prototype._pRegisterEntity=function(e){e._iRegisterEntity(this)};t.prototype._pUnregisterEntity=function(e){e._iUnregisterEntity(this)};return t}(o);t.exports=l},{"awayjs-core/lib/library/AssetType":116,"awayjs-display/lib/base/Geometry":35,"awayjs-display/lib/bounds/BoundsType":48,"awayjs-display/lib/containers/DisplayObjectContainer":50,"awayjs-display/lib/events/GeometryEvent":60}],57:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/geom/Matrix3D");var a=e("awayjs-core/lib/geom/Vector3D");var n=e("awayjs-display/lib/base/LightBase");var o=e("awayjs-display/lib/bounds/BoundsType");var h=e("awayjs-display/lib/materials/shadowmappers/CubeMapShadowMapper");var l=function(e){r(t,e);function t(){e.call(this);this._pRadius=9e4;this._pFallOff=1e5;this._pIsEntity=true;this._pFallOffFactor=1/(this._pFallOff*this._pFallOff-this._pRadius*this._pRadius);this._boundsType=o.SPHERE}t.prototype.pCreateShadowMapper=function(){return new h};Object.defineProperty(t.prototype,"radius",{get:function(){return this._pRadius},set:function(e){this._pRadius=e;if(this._pRadius<0){this._pRadius=0}else if(this._pRadius>this._pFallOff){this._pFallOff=this._pRadius;this._pInvalidateBounds()}this._pFallOffFactor=1/(this._pFallOff*this._pFallOff-this._pRadius*this._pRadius)},enumerable:true,configurable:true});t.prototype.iFallOffFactor=function(){return this._pFallOffFactor};Object.defineProperty(t.prototype,"fallOff",{get:function(){return this._pFallOff},set:function(e){this._pFallOff=e;if(this._pFallOff<0)this._pFallOff=0;if(this._pFallOff<this._pRadius)this._pRadius=this._pFallOff;this._pFallOffFactor=1/(this._pFallOff*this._pFallOff-this._pRadius*this._pRadius);this._pInvalidateBounds()},enumerable:true,configurable:true});t.prototype._pUpdateSphereBounds=function(){e.prototype._pUpdateSphereBounds.call(this);this._pSphereBounds.radius=this._pFallOff};t.prototype.iGetObjectProjectionMatrix=function(e,t,i){if(i===void 0){i=null}var r=new Array(16);var n=new s;n.copyFrom(e.getRenderSceneTransform(t));n.append(this._pParent.inverseSceneTransform);this.lookAt(n.position);n.copyFrom(e.getRenderSceneTransform(t));n.append(this.inverseSceneTransform);var o=e.getBox();var h=n.deltaTransformVector(new a(o.left,o.bottom,o.front));var l=n.deltaTransformVector(new a(o.right,o.top,o.back));var u=h.x*h.x+h.y*h.y+h.z*h.z;var p=l.x*l.x+l.y*l.y+l.z*l.z;var c=Math.sqrt(u>p?u:p);var d;var f;var _=n.rawData[14];d=_-c;f=_+c;r[5]=r[0]=d/c;r[10]=f/(f-d);r[11]=1;r[1]=r[2]=r[3]=r[4]=r[6]=r[7]=r[8]=r[9]=r[12]=r[13]=r[15]=0;r[14]=-d*r[10];if(!i)i=new s;i.copyRawDataFrom(r);i.prepend(n);return i};t.prototype._iCollectRenderables=function(e){};t.prototype._pRegisterEntity=function(e){e._iRegisterPointLight(this)};t.prototype._pUnregisterEntity=function(e){e._iUnregisterPointLight(this)};return t}(n);t.exports=l},{"awayjs-core/lib/geom/Matrix3D":107,"awayjs-core/lib/geom/Vector3D":115,"awayjs-display/lib/base/LightBase":36,"awayjs-display/lib/bounds/BoundsType":48,"awayjs-display/lib/materials/shadowmappers/CubeMapShadowMapper":69}],58:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/events/Event");
var a=function(e){r(t,e);function t(t,i){e.call(this,t);this._camera=i}Object.defineProperty(t.prototype,"camera",{get:function(){return this._camera},enumerable:true,configurable:true});t.PROJECTION_CHANGED="projectionChanged";return t}(s);t.exports=a},{"awayjs-core/lib/events/Event":101}],59:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/events/Event");var a=function(e){r(t,e);function t(t,i){e.call(this,t);this.object=i}t.VISIBLITY_UPDATED="visiblityUpdated";t.SCENETRANSFORM_CHANGED="scenetransformChanged";t.SCENE_CHANGED="sceneChanged";t.POSITION_CHANGED="positionChanged";t.ROTATION_CHANGED="rotationChanged";t.SCALE_CHANGED="scaleChanged";return t}(s);t.exports=a},{"awayjs-core/lib/events/Event":101}],60:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/events/Event");var a=function(e){r(t,e);function t(t,i){if(i===void 0){i=null}e.call(this,t);this._subGeometry=i}Object.defineProperty(t.prototype,"subGeometry",{get:function(){return this._subGeometry},enumerable:true,configurable:true});t.prototype.clone=function(){return new t(this.type,this._subGeometry)};t.SUB_GEOMETRY_ADDED="SubGeometryAdded";t.SUB_GEOMETRY_REMOVED="SubGeometryRemoved";t.BOUNDS_INVALID="BoundsInvalid";return t}(s);t.exports=a},{"awayjs-core/lib/events/Event":101}],61:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/events/Event");var a=function(e){r(t,e);function t(t){e.call(this,t)}t.prototype.clone=function(){return new t(this.type)};t.CASTS_SHADOW_CHANGE="castsShadowChange";return t}(s);t.exports=a},{"awayjs-core/lib/events/Event":101}],62:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/events/Event");var a=function(e){r(t,e);function t(t){e.call(this,t);this._iAllowedToPropagate=true}Object.defineProperty(t.prototype,"bubbles",{get:function(){var e=this._iAllowedToPropagate;this._iAllowedToPropagate=true;return e},enumerable:true,configurable:true});t.prototype.stopPropagation=function(){this._iAllowedToPropagate=false;if(this._iParentEvent)this._iParentEvent.stopPropagation()};t.prototype.stopImmediatePropagation=function(){this._iAllowedToPropagate=false;if(this._iParentEvent)this._iParentEvent.stopImmediatePropagation()};t.prototype.clone=function(){var e=new t(this.type);e.screenX=this.screenX;e.screenY=this.screenY;e.view=this.view;e.object=this.object;e.renderableOwner=this.renderableOwner;e.material=this.material;e.uv=this.uv;e.localPosition=this.localPosition;e.localNormal=this.localNormal;e.index=this.index;e.subGeometryIndex=this.subGeometryIndex;e.delta=this.delta;e.ctrlKey=this.ctrlKey;e.shiftKey=this.shiftKey;e._iParentEvent=this;e._iAllowedToPropagate=this._iAllowedToPropagate;return e};Object.defineProperty(t.prototype,"scenePosition",{get:function(){return this.object.sceneTransform.transformVector(this.localPosition)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sceneNormal",{get:function(){var e=this.object.sceneTransform.deltaTransformVector(this.localNormal);e.normalize();return e},enumerable:true,configurable:true});t.MOUSE_OVER="mouseOver3d";t.MOUSE_OUT="mouseOut3d";t.MOUSE_UP="mouseUp3d";t.MOUSE_DOWN="mouseDown3d";t.MOUSE_MOVE="mouseMove3d";t.CLICK="click3d";t.DOUBLE_CLICK="doubleClick3d";t.MOUSE_WHEEL="mouseWheel3d";return t}(s);t.exports=a},{"awayjs-core/lib/events/Event":101}],63:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/events/Event");var a=function(e){r(t,e);function t(t){e.call(this,t)}t.VIEWPORT_UPDATED="viewportUpdated";t.SCISSOR_UPDATED="scissorUpdated";return t}(s);t.exports=a},{"awayjs-core/lib/events/Event":101}],64:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/events/Event");var a=function(e){r(t,e);function t(t,i){e.call(this,t);this.displayObject=i}t.ADDED_TO_SCENE="addedToScene";t.REMOVED_FROM_SCENE="removedFromScene";t.PARTITION_CHANGED="partitionChanged";return t}(s);t.exports=a},{"awayjs-core/lib/events/Event":101}],65:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/events/Event");var a=function(e){r(t,e);function t(t,i){if(i===void 0){i=""}e.call(this,t);this._dataType=i}Object.defineProperty(t.prototype,"dataType",{get:function(){return this._dataType},enumerable:true,configurable:true});t.prototype.clone=function(){return new t(this.type,this._dataType)};t.INDICES_UPDATED="indicesUpdated";t.VERTICES_UPDATED="verticesUpdated";return t}(s);t.exports=a},{"awayjs-core/lib/events/Event":101}],66:[function(e,t,i){var r=e("awayjs-core/lib/geom/Vector3D");var s=e("awayjs-display/lib/events/MouseEvent");var a=function(){function e(){var e=this;this._viewLookup=new Array;this._nullVector=new r;this._queuedEvents=new Array;this._mouseUp=new s(s.MOUSE_UP);this._mouseClick=new s(s.CLICK);this._mouseOut=new s(s.MOUSE_OUT);this._mouseDown=new s(s.MOUSE_DOWN);this._mouseMove=new s(s.MOUSE_MOVE);this._mouseOver=new s(s.MOUSE_OVER);this._mouseWheel=new s(s.MOUSE_WHEEL);this._mouseDoubleClick=new s(s.DOUBLE_CLICK);this.onClickDelegate=function(t){return e.onClick(t)};this.onDoubleClickDelegate=function(t){return e.onDoubleClick(t)};this.onMouseDownDelegate=function(t){return e.onMouseDown(t)};this.onMouseMoveDelegate=function(t){return e.onMouseMove(t)};this.onMouseUpDelegate=function(t){return e.onMouseUp(t)};this.onMouseWheelDelegate=function(t){return e.onMouseWheel(t)};this.onMouseOverDelegate=function(t){return e.onMouseOver(t)};this.onMouseOutDelegate=function(t){return e.onMouseOut(t)}}e.getInstance=function(){if(this._instance)return this._instance;return this._instance=new e};e.prototype.fireMouseEvents=function(e){if(this._iCollidingObject!=this._previousCollidingObject){if(this._previousCollidingObject)this.queueDispatch(this._mouseOut,this._mouseMoveEvent,this._previousCollidingObject);if(this._iCollidingObject)this.queueDispatch(this._mouseOver,this._mouseMoveEvent)}if(e&&this._iCollidingObject)this.queueDispatch(this._mouseMove,this._mouseMoveEvent);var t;var i;var r=this._queuedEvents.length;for(var s=0;s<r;++s){t=this._queuedEvents[s];i=t.object;while(i&&!i._iIsMouseEnabled())i=i.parent;if(i)i.dispatchEvent(t)}this._queuedEvents.length=0;this._previousCollidingObject=this._iCollidingObject;this._iUpdateDirty=false};e.prototype.registerView=function(e){e.htmlElement.addEventListener("click",this.onClickDelegate);e.htmlElement.addEventListener("dblclick",this.onDoubleClickDelegate);e.htmlElement.addEventListener("mousedown",this.onMouseDownDelegate);e.htmlElement.addEventListener("mousemove",this.onMouseMoveDelegate);e.htmlElement.addEventListener("mouseup",this.onMouseUpDelegate);e.htmlElement.addEventListener("mousewheel",this.onMouseWheelDelegate);e.htmlElement.addEventListener("mouseover",this.onMouseOverDelegate);e.htmlElement.addEventListener("mouseout",this.onMouseOutDelegate);this._viewLookup.push(e)};e.prototype.unregisterView=function(e){e.htmlElement.removeEventListener("click",this.onClickDelegate);e.htmlElement.removeEventListener("dblclick",this.onDoubleClickDelegate);e.htmlElement.removeEventListener("mousedown",this.onMouseDownDelegate);e.htmlElement.removeEventListener("mousemove",this.onMouseMoveDelegate);e.htmlElement.removeEventListener("mouseup",this.onMouseUpDelegate);e.htmlElement.removeEventListener("mousewheel",this.onMouseWheelDelegate);e.htmlElement.removeEventListener("mouseover",this.onMouseOverDelegate);e.htmlElement.removeEventListener("mouseout",this.onMouseOutDelegate);this._viewLookup.slice(this._viewLookup.indexOf(e),1)};e.prototype.queueDispatch=function(e,t,i){if(i===void 0){i=null}if(t){e.ctrlKey=t.ctrlKey;e.altKey=t.altKey;e.shiftKey=t.shiftKey;e.screenX=t.clientX;e.screenY=t.clientY}if(i==null)i=this._iCollidingObject;if(i){e.object=i.displayObject;e.renderableOwner=i.renderableOwner;e.uv=i.uv;e.localPosition=i.localPosition?i.localPosition.clone():null;e.localNormal=i.localNormal?i.localNormal.clone():null;e.index=i.index}else{e.uv=null;e.object=null;e.localPosition=this._nullVector;e.localNormal=this._nullVector;e.index=0;e.subGeometryIndex=0}this._queuedEvents.push(e)};e.prototype.onMouseMove=function(e){this.updateColliders(e);if(this._iCollidingObject)this.queueDispatch(this._mouseMove,this._mouseMoveEvent=e)};e.prototype.onMouseOut=function(e){this._iActiveDiv=null;this.updateColliders(e);if(this._iCollidingObject)this.queueDispatch(this._mouseOut,e)};e.prototype.onMouseOver=function(e){this._iActiveDiv=e.target;this.updateColliders(e);if(this._iCollidingObject)this.queueDispatch(this._mouseOver,e)};e.prototype.onClick=function(e){this.updateColliders(e);if(this._iCollidingObject)this.queueDispatch(this._mouseClick,e)};e.prototype.onDoubleClick=function(e){this.updateColliders(e);if(this._iCollidingObject)this.queueDispatch(this._mouseDoubleClick,e)};e.prototype.onMouseDown=function(e){this._iActiveDiv=e.target;this.updateColliders(e);if(this._iCollidingObject)this.queueDispatch(this._mouseDown,e)};e.prototype.onMouseUp=function(e){this.updateColliders(e);if(this._iCollidingObject)this.queueDispatch(this._mouseUp,e)};e.prototype.onMouseWheel=function(e){this.updateColliders(e);if(this._iCollidingObject)this.queueDispatch(this._mouseWheel,e)};e.prototype.updateColliders=function(e){if(this._iUpdateDirty)return;var t;var i;var r=e.clientX;var s=e.clientY;var a=this._viewLookup.length;for(var n=0;n<a;n++){t=this._viewLookup[n];i=t.htmlElement.getBoundingClientRect();if(r<i.left||r>i.right||s<i.top||s>i.bottom){t._pMouseX=null;t._pMouseY=null}else{t._pMouseX=r+i.left;t._pMouseY=s+i.top;t.updateCollider();if(t.layeredView&&this._iCollidingObject)break}}this._iUpdateDirty=true};return e}();t.exports=a},{"awayjs-core/lib/geom/Vector3D":115,"awayjs-display/lib/events/MouseEvent":62}],67:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/library/AssetType");var a=e("awayjs-core/lib/library/NamedAssetBase");var n=function(e){r(t,e);function t(){e.call(this);this._pNumPointLights=0;this._pNumDirectionalLights=0;this._pNumCastingPointLights=0;this._pNumCastingDirectionalLights=0;this._pNumLightProbes=0}t.prototype.dispose=function(){};Object.defineProperty(t.prototype,"assetType",{get:function(){return s.LIGHT_PICKER},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numDirectionalLights",{get:function(){return this._pNumDirectionalLights},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numPointLights",{get:function(){return this._pNumPointLights},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numCastingDirectionalLights",{get:function(){return this._pNumCastingDirectionalLights},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numCastingPointLights",{get:function(){return this._pNumCastingPointLights},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numLightProbes",{get:function(){return this._pNumLightProbes},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"pointLights",{get:function(){return this._pPointLights},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"directionalLights",{get:function(){return this._pDirectionalLights},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"castingPointLights",{get:function(){return this._pCastingPointLights},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"castingDirectionalLights",{get:function(){return this._pCastingDirectionalLights},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lightProbes",{get:function(){return this._pLightProbes},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lightProbeWeights",{get:function(){return this._pLightProbeWeights},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"allPickedLights",{get:function(){return this._pAllPickedLights},enumerable:true,configurable:true});t.prototype.collectLights=function(e){this.updateProbeWeights(e)};t.prototype.updateProbeWeights=function(e){var t=e.sourceEntity.scenePosition;var i;var r=t.x,s=t.y,a=t.z;var n,o,h;var l,u=0;var p;for(p=0;p<this._pNumLightProbes;++p){i=this._pLightProbes[p].scenePosition;n=r-i.x;o=s-i.y;h=a-i.z;l=n*n+o*o+h*h;l=l>1e-5?1/l:5e7;this._pLightProbeWeights[p]=l;u+=l}u=1/u;for(p=0;p<this._pNumLightProbes;++p)this._pLightProbeWeights[p]*=u};return t}(a);t.exports=n},{"awayjs-core/lib/library/AssetType":116,"awayjs-core/lib/library/NamedAssetBase":117}],68:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/events/Event");var a=e("awayjs-display/lib/entities/DirectionalLight");var n=e("awayjs-display/lib/entities/LightProbe");var o=e("awayjs-display/lib/entities/PointLight");var h=e("awayjs-display/lib/events/LightEvent");var l=e("awayjs-display/lib/materials/lightpickers/LightPickerBase");var u=function(e){r(t,e);function t(t){var i=this;e.call(this);this._onCastShadowChangeDelegate=function(e){return i.onCastShadowChange(e)};this.lights=t}Object.defineProperty(t.prototype,"lights",{get:function(){return this._lights},set:function(e){var t=0;var i=0;var r=0;var l=0;var u=0;var p;if(this._lights)this.clearListeners();this._lights=e;this._pAllPickedLights=e;this._pPointLights=new Array;this._pCastingPointLights=new Array;this._pDirectionalLights=new Array;this._pCastingDirectionalLights=new Array;this._pLightProbes=new Array;var c=e.length;for(var d=0;d<c;++d){p=e[d];p.addEventListener(h.CASTS_SHADOW_CHANGE,this._onCastShadowChangeDelegate);if(p instanceof o){if(p.castsShadows)this._pCastingPointLights[r++]=p;else this._pPointLights[t++]=p}else if(p instanceof a){if(p.castsShadows)this._pCastingDirectionalLights[l++]=p;else this._pDirectionalLights[i++]=p}else if(p instanceof n){this._pLightProbes[u++]=p}}if(this._pNumDirectionalLights==i&&this._pNumPointLights==t&&this._pNumLightProbes==u&&this._pNumCastingPointLights==r&&this._pNumCastingDirectionalLights==l)return;this._pNumDirectionalLights=i;this._pNumCastingDirectionalLights=l;this._pNumPointLights=t;this._pNumCastingPointLights=r;this._pNumLightProbes=u;this._pLightProbeWeights=new Array(Math.ceil(u/4)*4);this.dispatchEvent(new s(s.CHANGE))},enumerable:true,configurable:true});t.prototype.clearListeners=function(){var e=this._lights.length;for(var t=0;t<e;++t)this._lights[t].removeEventListener(h.CASTS_SHADOW_CHANGE,this._onCastShadowChangeDelegate)};t.prototype.onCastShadowChange=function(e){var t=e.target;if(t instanceof o)this.updatePointCasting(t);else if(t instanceof a)this.updateDirectionalCasting(t);this.dispatchEvent(new s(s.CHANGE))};t.prototype.updateDirectionalCasting=function(e){var t=e;if(e.castsShadows){--this._pNumDirectionalLights;++this._pNumCastingDirectionalLights;this._pDirectionalLights.splice(this._pDirectionalLights.indexOf(t),1);this._pCastingDirectionalLights.push(e)}else{++this._pNumDirectionalLights;--this._pNumCastingDirectionalLights;this._pCastingDirectionalLights.splice(this._pCastingDirectionalLights.indexOf(t),1);this._pDirectionalLights.push(e)}};t.prototype.updatePointCasting=function(e){var t=e;if(e.castsShadows){--this._pNumPointLights;++this._pNumCastingPointLights;this._pPointLights.splice(this._pPointLights.indexOf(t),1);this._pCastingPointLights.push(e)}else{++this._pNumPointLights;--this._pNumCastingPointLights;this._pCastingPointLights.splice(this._pCastingPointLights.indexOf(t),1);this._pPointLights.push(e)}};return t}(l);t.exports=u},{"awayjs-core/lib/events/Event":101,"awayjs-display/lib/entities/DirectionalLight":54,"awayjs-display/lib/entities/LightProbe":55,"awayjs-display/lib/entities/PointLight":57,"awayjs-display/lib/events/LightEvent":61,"awayjs-display/lib/materials/lightpickers/LightPickerBase":67}],69:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/errors/PartialImplementationError");var a=e("awayjs-display/lib/entities/Camera");var n=e("awayjs-display/lib/materials/shadowmappers/ShadowMapperBase");var o=function(e){r(t,e);function t(){e.call(this);this._pDepthMapSize=512;this._needsRender=new Array;this.initCameras()}t.prototype.initCameras=function(){this._depthCameras=new Array;this._projections=new Array;this.addCamera(0,90,0);this.addCamera(0,-90,0);this.addCamera(-90,0,0);this.addCamera(90,0,0);this.addCamera(0,0,0);this.addCamera(0,180,0)};t.prototype.addCamera=function(e,t,i){var r=new a;r.rotationX=e;r.rotationY=t;r.rotationZ=i;r.projection.near=.01;var s=r.projection;s.fieldOfView=90;this._projections.push(s);r.projection._iAspectRatio=1;this._depthCameras.push(r)};t.prototype.pCreateDepthTexture=function(){throw new s};t.prototype.pUpdateDepthProjection=function(e){var t=this._pLight;var i=t._pFallOff;var r=this._pLight.scenePosition;for(var s=0;s<6;++s){this._projections[s].far=i;this._depthCameras[s].transform.position=r;this._needsRender[s]=true}};t.prototype.pDrawDepthMap=function(e,t,i){for(var r=0;r<6;++r){if(this._needsRender[r]){this._pCasterCollector.camera=this._depthCameras[r];this._pCasterCollector.clear();t.traversePartitions(this._pCasterCollector);i._iRender(this._pCasterCollector,e,null,r)}}};return t}(n);t.exports=o},{"awayjs-core/lib/errors/PartialImplementationError":98,"awayjs-display/lib/entities/Camera":53,"awayjs-display/lib/materials/shadowmappers/ShadowMapperBase":71}],70:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/geom/Matrix3D");var a=e("awayjs-core/lib/projections/FreeMatrixProjection");var n=e("awayjs-display/lib/entities/Camera");var o=e("awayjs-display/lib/materials/shadowmappers/ShadowMapperBase");var h=function(e){r(t,e);function t(){e.call(this);this._pLightOffset=1e4;this._pSnap=64;this._pCullPlanes=[];this._pOverallDepthProjection=new a;this._pOverallDepthCamera=new n(this._pOverallDepthProjection);this._pLocalFrustum=[];this._pMatrix=new s}Object.defineProperty(t.prototype,"snap",{get:function(){return this._pSnap},set:function(e){this._pSnap=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lightOffset",{get:function(){return this._pLightOffset},set:function(e){this._pLightOffset=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"iDepthProjection",{get:function(){return this._pOverallDepthCamera.viewProjection},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"depth",{get:function(){return this._pMaxZ-this._pMinZ},enumerable:true,configurable:true});t.prototype.pDrawDepthMap=function(e,t,i){this._pCasterCollector.camera=this._pOverallDepthCamera;this._pCasterCollector.cullPlanes=this._pCullPlanes;this._pCasterCollector.clear();t.traversePartitions(this._pCasterCollector);i._iRender(this._pCasterCollector,e)};t.prototype.pUpdateCullPlanes=function(e){var t=this._pOverallDepthCamera.frustumPlanes;var i=e.frustumPlanes;this._pCullPlanes.length=4;this._pCullPlanes[0]=t[0];this._pCullPlanes[1]=t[1];this._pCullPlanes[2]=t[2];this._pCullPlanes[3]=t[3];var r=this._pLight;var s=r.sceneDirection;var a=s.x;var n=s.y;var o=s.z;var h=4;for(var l=0;l<6;++l){var u=i[l];if(u.a*a+u.b*n+u.c*o<0)this._pCullPlanes[h++]=u}};t.prototype.pUpdateDepthProjection=function(e){this.pUpdateProjectionFromFrustumCorners(e,e.projection.frustumCorners,this._pMatrix);this._pOverallDepthProjection.matrix=this._pMatrix;this.pUpdateCullPlanes(e)};t.prototype.pUpdateProjectionFromFrustumCorners=function(e,t,i){var r=new Array;var s;var a,n,o;var h,l;var u,p;var c;var d=this._pLight;s=d.sceneDirection;this._pOverallDepthCamera.transform.matrix3D=this._pLight.sceneTransform;a=Math.floor((e.x-s.x*this._pLightOffset)/this._pSnap)*this._pSnap;n=Math.floor((e.y-s.y*this._pLightOffset)/this._pSnap)*this._pSnap;o=Math.floor((e.z-s.z*this._pLightOffset)/this._pSnap)*this._pSnap;this._pOverallDepthCamera.x=a;this._pOverallDepthCamera.y=n;this._pOverallDepthCamera.z=o;this._pMatrix.copyFrom(this._pOverallDepthCamera.inverseSceneTransform);this._pMatrix.prepend(e.sceneTransform);this._pMatrix.transformVectors(t,this._pLocalFrustum);h=u=this._pLocalFrustum[0];l=p=this._pLocalFrustum[1];this._pMaxZ=this._pLocalFrustum[2];c=3;while(c<24){a=this._pLocalFrustum[c];n=this._pLocalFrustum[c+1];o=this._pLocalFrustum[c+2];if(a<h)h=a;if(a>u)u=a;if(n<l)l=n;if(n>p)p=n;if(o>this._pMaxZ)this._pMaxZ=o;c+=3}this._pMinZ=1;var f=u-h;var _=p-l;var y=1/(this._pMaxZ-this._pMinZ);if(h<0)h-=this._pSnap;if(l<0)l-=this._pSnap;h=Math.floor(h/this._pSnap)*this._pSnap;l=Math.floor(l/this._pSnap)*this._pSnap;var g=2*this._pSnap;f=Math.floor(f/g+2)*g;_=Math.floor(_/g+2)*g;u=h+f;p=l+_;f=1/f;_=1/_;r[0]=2*f;r[5]=2*_;r[10]=y;r[12]=-(u+h)*f;r[13]=-(p+l)*_;r[14]=-this._pMinZ*y;r[15]=1;r[1]=r[2]=r[3]=r[4]=r[6]=r[7]=r[8]=r[9]=r[11]=0;i.copyRawDataFrom(r)};return t}(o);t.exports=h},{"awayjs-core/lib/geom/Matrix3D":107,"awayjs-core/lib/projections/FreeMatrixProjection":119,"awayjs-display/lib/entities/Camera":53,"awayjs-display/lib/materials/shadowmappers/ShadowMapperBase":71}],71:[function(e,t,i){var r=e("awayjs-core/lib/errors/AbstractMethodError");var s=e("awayjs-display/lib/traverse/ShadowCasterCollector");var a=e("awayjs-core/lib/textures/RenderTexture");var n=function(){function e(){this._pDepthMapSize=2048;this._autoUpdateShadows=true;this._pCasterCollector=this.pCreateCasterCollector()}e.prototype.pCreateCasterCollector=function(){return new s};Object.defineProperty(e.prototype,"autoUpdateShadows",{get:function(){return this._autoUpdateShadows},set:function(e){this._autoUpdateShadows=e},enumerable:true,configurable:true});e.prototype.updateShadows=function(){this._iShadowsInvalid=true};e.prototype.iSetDepthMap=function(e){if(this._depthMap==e)return;if(this._depthMap&&!this._explicitDepthMap)this._depthMap.dispose();this._depthMap=e;if(this._depthMap){this._explicitDepthMap=true;this._pDepthMapSize=this._depthMap.size}else{this._explicitDepthMap=false}};Object.defineProperty(e.prototype,"light",{get:function(){return this._pLight},set:function(e){this._pLight=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"depthMap",{get:function(){if(!this._depthMap)this._depthMap=this.pCreateDepthTexture();return this._depthMap},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"depthMapSize",{get:function(){return this._pDepthMapSize},set:function(e){if(e==this._pDepthMapSize)return;this._pSetDepthMapSize(e)},enumerable:true,configurable:true});e.prototype.dispose=function(){this._pCasterCollector=null;if(this._depthMap&&!this._explicitDepthMap)this._depthMap.dispose();this._depthMap=null};e.prototype.pCreateDepthTexture=function(){return new a(this._pDepthMapSize,this._pDepthMapSize)};e.prototype.iRenderDepthMap=function(e,t){this._iShadowsInvalid=false;this.pUpdateDepthProjection(e.camera);if(!this._depthMap)this._depthMap=this.pCreateDepthTexture();this.pDrawDepthMap(this._depthMap,e.scene,t)};e.prototype.pUpdateDepthProjection=function(e){throw new r};e.prototype.pDrawDepthMap=function(e,t,i){throw new r};e.prototype._pSetDepthMapSize=function(e){this._pDepthMapSize=e;if(this._explicitDepthMap){throw Error("Cannot set depth map size for the current renderer.")}else if(this._depthMap){this._depthMap.dispose();this._depthMap=null}};return e}();t.exports=n},{"awayjs-core/lib/errors/AbstractMethodError":95,"awayjs-core/lib/textures/RenderTexture":123,"awayjs-display/lib/traverse/ShadowCasterCollector":93}],72:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-display/lib/partition/EntityNode");var a=function(e){r(t,e);function t(t,i,r){e.call(this,t,i,r)}t.prototype.acceptTraverser=function(e){};t.id="cameraNode";return t}(s);t.exports=a},{"awayjs-display/lib/partition/EntityNode":74}],73:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-display/lib/partition/EntityNode");var a=function(e){r(t,e);function t(t,i,r){e.call(this,t,i,r);this._directionalLight=i}t.prototype.acceptTraverser=function(e){if(e.enterNode(this))e.applyDirectionalLight(this._directionalLight)};t.prototype.isCastingShadow=function(){return false};t.id="directionalLightNode";return t}(s);t.exports=a},{"awayjs-display/lib/partition/EntityNode":74}],74:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/geom/Vector3D");var a=e("awayjs-display/lib/bounds/AxisAlignedBoundingBox");var n=e("awayjs-display/lib/bounds/BoundingSphere");var o=e("awayjs-display/lib/bounds/BoundsType");var h=e("awayjs-display/lib/bounds/NullBounds");var l=e("awayjs-display/lib/partition/NodeBase");var u=function(e){r(t,e);function t(t,i,r){e.call(this);this._pool=t;this._entity=i;this._partition=r;this._iNumEntities=1;this.updateBounds();this.debugVisible=this._entity.debugVisible}Object.defineProperty(t.prototype,"entity",{get:function(){return this._entity},enumerable:true,configurable:true});t.prototype.removeFromParent=function(){if(this._iParent)this._iParent.iRemoveNode(this);this._iParent=null};t.prototype.isCastingShadow=function(){return this.entity.castsShadows};t.prototype.isInFrustum=function(e,t){if(!this._entity._iIsVisible())return false;return this._bounds.isInFrustum(e,t)};t.prototype.acceptTraverser=function(e){if(e.enterNode(this)){e.applyEntity(this._entity);if(this._pImplicitDebugVisible&&e.isEntityCollector)e.applyEntity(this._pDebugEntity)}};t.prototype.isIntersectingRay=function(e,t){if(!this._entity._iIsVisible())return false;var i=this._entity._iPickingCollisionVO;i.localRayPosition=this._entity.inverseSceneTransform.transformVector(e);i.localRayDirection=this._entity.inverseSceneTransform.deltaTransformVector(t);if(!i.localNormal)i.localNormal=new s;var r=this._bounds.rayIntersection(i.localRayPosition,i.localRayDirection,i.localNormal);if(r<0)return false;i.rayEntryDistance=r;i.rayPosition=e;i.rayDirection=t;i.rayOriginIsInsideBounds=r==0;return true};t.prototype._pCreateDebugEntity=function(){return this._bounds.boundsPrimitive};t.prototype.invalidatePartition=function(){this._bounds.invalidate();this._partition.iMarkForUpdate(this)};t.prototype.updateBounds=function(){if(this._entity.boundsType==o.AXIS_ALIGNED_BOX)this._bounds=new a(this._entity);else if(this._entity.boundsType==o.SPHERE)this._bounds=new n(this._entity);else if(this._entity.boundsType==o.NULL)this._bounds=new h;this.updateDebugEntity()};t.id="entityNode";return t}(l);t.exports=u},{"awayjs-core/lib/geom/Vector3D":115,"awayjs-display/lib/bounds/AxisAlignedBoundingBox":45,"awayjs-display/lib/bounds/BoundingSphere":46,"awayjs-display/lib/bounds/BoundsType":48,"awayjs-display/lib/bounds/NullBounds":49,"awayjs-display/lib/partition/NodeBase":76}],75:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-display/lib/partition/EntityNode");var a=function(e){r(t,e);function t(t,i,r){e.call(this,t,i,r);this._lightProbe=i}t.prototype.acceptTraverser=function(e){if(e.enterNode(this))e.applyLightProbe(this._lightProbe)};t.prototype.isCastingShadow=function(){return false};t.id="lightProbeNode";return t}(s);t.exports=a},{"awayjs-display/lib/partition/EntityNode":74}],76:[function(e,t,i){var r=e("awayjs-core/lib/errors/AbstractMethodError");var s=function(){function e(){this._pNumChildNodes=0;this._iNumEntities=0;this._pChildNodes=new Array}Object.defineProperty(e.prototype,"debugVisible",{get:function(){return this._explicitDebugVisible},set:function(e){if(this._explicitDebugVisible==e)return;this._explicitDebugVisible=e;this._iUpdateImplicitDebugVisible(this._iParent?this._iParent.debugChildrenVisible:false)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"debugChildrenVisible",{get:function(){return this._debugChildrenVisible},set:function(e){if(this._debugChildrenVisible==e)return;this._debugChildrenVisible=e;for(var t=0;t<this._pNumChildNodes;++t)this._pChildNodes[t]._iUpdateImplicitDebugVisible(this._debugChildrenVisible)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"parent",{get:function(){return this._iParent},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"_pNumEntities",{get:function(){return this._iNumEntities},enumerable:true,configurable:true});e.prototype.isInFrustum=function(e,t){return true};e.prototype.isIntersectingRay=function(e,t){return true};e.prototype.isCastingShadow=function(){return true};e.prototype.findPartitionForEntity=function(e){return this};e.prototype.acceptTraverser=function(e){if(this._pNumEntities==0&&!this._pImplicitDebugVisible)return;if(e.enterNode(this)){var t=0;while(t<this._pNumChildNodes)this._pChildNodes[t++].acceptTraverser(e);if(this._pImplicitDebugVisible&&e.isEntityCollector)e.applyEntity(this._pDebugEntity)}};e.prototype.applyDebugEntity=function(e){if(this._pDebugEntity==null)this._pDebugEntity=this._pCreateDebugEntity();e.applyEntity(this._pDebugEntity)};e.prototype.iAddNode=function(e){e._iParent=this;this._iNumEntities+=e._pNumEntities;this._pChildNodes[this._pNumChildNodes++]=e;e._iUpdateImplicitDebugVisible(this.debugChildrenVisible);var t=e._pNumEntities;e=this;do{e._iNumEntities+=t}while((e=e._iParent)!=null)};e.prototype.iRemoveNode=function(e){var t=this._pChildNodes.indexOf(e);this._pChildNodes[t]=this._pChildNodes[--this._pNumChildNodes];this._pChildNodes.pop();e._iUpdateImplicitDebugVisible(false);var i=e._pNumEntities;e=this;do{e._pNumEntities-=i}while((e=e._iParent)!=null)};e.prototype._iUpdateImplicitDebugVisible=function(e){if(this._pImplicitDebugVisible==this._explicitDebugVisible||e)return;this._pImplicitDebugVisible=this._explicitDebugVisible||e;for(var t=0;t<this._pNumChildNodes;++t)this._pChildNodes[t]._iUpdateImplicitDebugVisible(this._debugChildrenVisible);if(this._pImplicitDebugVisible){this._pDebugEntity=this._pCreateDebugEntity()}else{this._pDebugEntity=null}};e.prototype.updateDebugEntity=function(){if(this._pImplicitDebugVisible){this._pDebugEntity=this._pCreateDebugEntity()}};e.prototype._pCreateDebugEntity=function(){throw new r};return e}();t.exports=s},{"awayjs-core/lib/errors/AbstractMethodError":95}],77:[function(e,t,i){var r=function(){function e(){}return e}();t.exports=r},{}],78:[function(e,t,i){var r=e("awayjs-display/lib/partition/CameraNode");var s=e("awayjs-display/lib/partition/DirectionalLightNode");var a=e("awayjs-display/lib/partition/EntityNode");
var n=e("awayjs-display/lib/partition/LightProbeNode");var o=e("awayjs-display/lib/partition/PointLightNode");var h=e("awayjs-display/lib/partition/SkyboxNode");var l=e("awayjs-display/lib/partition/NullNode");var u=e("awayjs-display/lib/pool/EntityNodePool");var p=function(){function e(e){this._updatesMade=false;this._rootNode=e||new l;this._cameraNodePool=new u(r,this);this._directionalLightNodePool=new u(s,this);this._entityNodePool=new u(a,this);this._lightProbeNodePool=new u(n,this);this._pointLightNodePool=new u(o,this);this._skyboxNodePool=new u(h,this)}Object.defineProperty(e.prototype,"rootNode",{get:function(){return this._rootNode},enumerable:true,configurable:true});e.prototype.traverse=function(e){if(this._updatesMade)this.updateEntities();this._rootNode.acceptTraverser(e)};e.prototype.iMarkForUpdate=function(e){var t=this._updateQueue;while(t){if(e==t)return;t=t._iUpdateQueueNext}e._iUpdateQueueNext=this._updateQueue;this._updateQueue=e;this._updatesMade=true};e.prototype.iRemoveEntity=function(e){var t;e.removeFromParent();if(e==this._updateQueue){this._updateQueue=e._iUpdateQueueNext}else{t=this._updateQueue;while(t&&t._iUpdateQueueNext!=e)t=t._iUpdateQueueNext;if(t)t._iUpdateQueueNext=e._iUpdateQueueNext}e._iUpdateQueueNext=null;if(!this._updateQueue)this._updatesMade=false};e.prototype.updateEntities=function(){var e=this._updateQueue;var t;var i;this._updateQueue=null;this._updatesMade=false;do{t=this._rootNode.findPartitionForEntity(e.entity);if(e.parent!=t){if(e)e.removeFromParent();t.iAddNode(e)}i=e._iUpdateQueueNext;e._iUpdateQueueNext=null;e.entity._iInternalUpdate()}while((e=i)!=null)};e.prototype._iRegisterCamera=function(e){this.iMarkForUpdate(this._cameraNodePool.getItem(e))};e.prototype._iRegisterDirectionalLight=function(e){this.iMarkForUpdate(this._directionalLightNodePool.getItem(e))};e.prototype._iRegisterEntity=function(e){this.iMarkForUpdate(this._entityNodePool.getItem(e))};e.prototype._iRegisterLightProbe=function(e){this.iMarkForUpdate(this._lightProbeNodePool.getItem(e))};e.prototype._iRegisterPointLight=function(e){this.iMarkForUpdate(this._pointLightNodePool.getItem(e))};e.prototype._iRegisterSkybox=function(e){this.iMarkForUpdate(this._skyboxNodePool.getItem(e))};e.prototype._iUnregisterCamera=function(e){this.iRemoveEntity(this._cameraNodePool.getItem(e))};e.prototype._iUnregisterDirectionalLight=function(e){this.iRemoveEntity(this._directionalLightNodePool.getItem(e))};e.prototype._iUnregisterEntity=function(e){this.iRemoveEntity(this._entityNodePool.getItem(e))};e.prototype._iUnregisterLightProbe=function(e){this.iRemoveEntity(this._lightProbeNodePool.getItem(e))};e.prototype._iUnregisterPointLight=function(e){this.iRemoveEntity(this._pointLightNodePool.getItem(e))};e.prototype._iUnregisterSkybox=function(e){this.iRemoveEntity(this._skyboxNodePool.getItem(e))};return e}();t.exports=p},{"awayjs-display/lib/partition/CameraNode":72,"awayjs-display/lib/partition/DirectionalLightNode":73,"awayjs-display/lib/partition/EntityNode":74,"awayjs-display/lib/partition/LightProbeNode":75,"awayjs-display/lib/partition/NullNode":77,"awayjs-display/lib/partition/PointLightNode":79,"awayjs-display/lib/partition/SkyboxNode":80,"awayjs-display/lib/pool/EntityNodePool":85}],79:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-display/lib/partition/EntityNode");var a=function(e){r(t,e);function t(t,i,r){e.call(this,t,i,r);this._pointLight=i}t.prototype.acceptTraverser=function(e){if(e.enterNode(this))e.applyPointLight(this._pointLight)};t.prototype.isCastingShadow=function(){return false};t.id="pointLightNode";return t}(s);t.exports=a},{"awayjs-display/lib/partition/EntityNode":74}],80:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-display/lib/partition/EntityNode");var a=function(e){r(t,e);function t(t,i,r){e.call(this,t,i,r);this._skyBox=i}t.prototype.acceptTraverser=function(e){if(e.enterNode(this))e.applySkybox(this._skyBox)};t.prototype.isInFrustum=function(e,t){if(!this._skyBox._iIsVisible)return false;return true};t.id="skyboxNode";return t}(s);t.exports=a},{"awayjs-display/lib/partition/EntityNode":74}],81:[function(e,t,i){var r=function(){function e(e){this.displayObject=e}return e}();t.exports=r},{}],82:[function(e,t,i){var r=e("awayjs-core/lib/geom/Vector3D");var s=e("awayjs-display/lib/traverse/RaycastCollector");var a=function(){function e(e){if(e===void 0){e=false}this._ignoredEntities=[];this._onlyMouseEnabled=true;this._numEntities=0;this._raycastCollector=new s;this._findClosestCollision=e;this._entities=new Array}Object.defineProperty(e.prototype,"onlyMouseEnabled",{get:function(){return this._onlyMouseEnabled},set:function(e){this._onlyMouseEnabled=e},enumerable:true,configurable:true});e.prototype.getViewCollision=function(e,t,i){var r=i.unproject(e,t,0);var s=i.unproject(e,t,1).subtract(r);return this.getSceneCollision(r,s,i.scene)};e.prototype.getSceneCollision=function(e,t,i){this._raycastCollector.clear();this._raycastCollector.rayPosition=e;this._raycastCollector.rayDirection=t;i.traversePartitions(this._raycastCollector);this._numEntities=0;var r=this._raycastCollector.entityHead;var s;while(r){if(!this.isIgnored(s=r.entity))this._entities[this._numEntities++]=s;r=r.next}if(!this._numEntities)return null;return this.getPickingCollisionVO(this._raycastCollector)};e.prototype.setIgnoreList=function(e){this._ignoredEntities=e};e.prototype.isIgnored=function(e){if(this._onlyMouseEnabled&&!e._iIsMouseEnabled())return true;var t=this._ignoredEntities.length;for(var i=0;i<t;i++)if(this._ignoredEntities[i]==e)return true;return false};e.prototype.sortOnNearT=function(e,t){return e._iPickingCollisionVO.rayEntryDistance>t._iPickingCollisionVO.rayEntryDistance?1:-1};e.prototype.getPickingCollisionVO=function(e){this._entities.length=this._numEntities;this._entities=this._entities.sort(this.sortOnNearT);var t=Number.MAX_VALUE;var i;var r;var s;var a;for(a=0;a<this._numEntities;++a){s=this._entities[a];r=s._iPickingCollisionVO;if(s.pickingCollider){if((i==null||r.rayEntryDistance<i.rayEntryDistance)&&s._iTestCollision(t,this._findClosestCollision)){t=r.rayEntryDistance;i=r;if(!this._findClosestCollision){this.updateLocalPosition(r);return r}}}else if(i==null||r.rayEntryDistance<i.rayEntryDistance){if(!r.rayOriginIsInsideBounds){this.updateLocalPosition(r);return r}}}return i};e.prototype.updateLocalPosition=function(e){var t=e.localPosition==null?e.localPosition=new r:e.localPosition;var i=e.localRayDirection;var s=e.localRayPosition;var a=e.rayEntryDistance;t.x=s.x+a*i.x;t.y=s.y+a*i.y;t.z=s.z+a*i.z};e.prototype.dispose=function(){};return e}();t.exports=a},{"awayjs-core/lib/geom/Vector3D":115,"awayjs-display/lib/traverse/RaycastCollector":92}],83:[function(e,t,i){var r=function(){function e(){}return e}();t.exports=r},{}],84:[function(e,t,i){var r=e("awayjs-display/lib/pool/EntityListItem");var s=function(){function e(){this._index=0;this._poolSize=0;this._pool=new Array}e.prototype.getItem=function(){var e;if(this._index==this._poolSize){e=new r;this._pool[this._index++]=e;++this._poolSize}else{e=this._pool[this._index++]}return e};e.prototype.freeAll=function(){this._index=0};e.prototype.dispose=function(){this._pool.length=0};return e}();t.exports=s},{"awayjs-display/lib/pool/EntityListItem":83}],85:[function(e,t,i){var r=function(){function e(e,t){this._entityNodePool=new Object;this._entityNodeClass=e;this._partition=t}e.prototype.getItem=function(e){return this._entityNodePool[e.id]||(this._entityNodePool[e.id]=e._iAddEntityNode(new this._entityNodeClass(this,e,this._partition)))};e.prototype.disposeItem=function(e){e._iRemoveEntityNode(this._entityNodePool[e.id]);this._entityNodePool[e.id]=null};return e}();t.exports=r},{}],86:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/library/NamedAssetBase");var a=e("awayjs-core/lib/errors/AbstractMethodError");var n=function(e){r(t,e);function t(){e.call(this);this._pObjects=new Array}t.prototype.getNewObject=function(){var e=this._pCreateObject();this._pObjects.push(e);return e};t.prototype._pCreateObject=function(){throw new a};t.prototype._iValidate=function(){};return t}(s);t.exports=n},{"awayjs-core/lib/errors/AbstractMethodError":95,"awayjs-core/lib/library/NamedAssetBase":117}],87:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-display/lib/prefabs/PrimitivePrefabBase");var a=function(e){r(t,e);function t(t,i,r,s,a,n,o){if(t===void 0){t=100}if(i===void 0){i=100}if(r===void 0){r=100}if(s===void 0){s=1}if(a===void 0){a=1}if(n===void 0){n=1}if(o===void 0){o=true}e.call(this);this._width=t;this._height=i;this._depth=r;this._segmentsW=s;this._segmentsH=a;this._segmentsD=n;this._tile6=o}Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"depth",{get:function(){return this._depth},set:function(e){this._depth=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"tile6",{get:function(){return this._tile6},set:function(e){this._tile6=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"segmentsW",{get:function(){return this._segmentsW},set:function(e){this._segmentsW=e;this._pInvalidateGeometry();this._pInvalidateUVs()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"segmentsH",{get:function(){return this._segmentsH},set:function(e){this._segmentsH=e;this._pInvalidateGeometry();this._pInvalidateUVs()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"segmentsD",{get:function(){return this._segmentsD},set:function(e){this._segmentsD=e;this._pInvalidateGeometry();this._pInvalidateUVs()},enumerable:true,configurable:true});t.prototype._pBuildGeometry=function(e,t){var i;var r;var s;var a;var n,o,h,l;var u,p,c=0;var d,f;var _,y,g;var m,b,v;var w;var x;var j;_=this._width/2;y=this._height/2;g=this._depth/2;if(t=="triangleSubGeometry"){var P=e;j=((this._segmentsW+1)*(this._segmentsH+1)+(this._segmentsW+1)*(this._segmentsD+1)+(this._segmentsH+1)*(this._segmentsD+1))*2;x=(this._segmentsW*this._segmentsH+this._segmentsW*this._segmentsD+this._segmentsH*this._segmentsD)*12;if(j==P.numVertices&&P.indices!=null){i=P.indices;r=P.positions;s=P.vertexNormals;a=P.vertexTangents}else{i=new Array(x);r=new Array(j*3);s=new Array(j*3);a=new Array(j*3);this._pInvalidateUVs()}d=0;f=0;m=this._width/this._segmentsW;b=this._height/this._segmentsH;v=this._depth/this._segmentsD;for(u=0;u<=this._segmentsW;u++){w=-_+u*m;for(p=0;p<=this._segmentsH;p++){r[d]=w;r[d+1]=-y+p*b;r[d+2]=-g;s[d]=0;s[d+1]=0;s[d+2]=-1;a[d]=1;a[d+1]=0;a[d+2]=0;d+=3;r[d]=w;r[d+1]=-y+p*b;r[d+2]=g;s[d]=0;s[d+1]=0;s[d+2]=1;a[d]=-1;a[d+1]=0;a[d+2]=0;d+=3;if(u&&p){n=2*((u-1)*(this._segmentsH+1)+(p-1));o=2*(u*(this._segmentsH+1)+(p-1));h=n+2;l=o+2;i[f++]=n;i[f++]=h;i[f++]=l;i[f++]=n;i[f++]=l;i[f++]=o;i[f++]=o+1;i[f++]=l+1;i[f++]=h+1;i[f++]=o+1;i[f++]=h+1;i[f++]=n+1}}}c+=2*(this._segmentsW+1)*(this._segmentsH+1);for(u=0;u<=this._segmentsW;u++){w=-_+u*m;for(p=0;p<=this._segmentsD;p++){r[d]=w;r[d+1]=y;r[d+2]=-g+p*v;s[d]=0;s[d+1]=1;s[d+2]=0;a[d]=1;a[d+1]=0;a[d+2]=0;d+=3;r[d]=w;r[d+1]=-y;r[d+2]=-g+p*v;s[d]=0;s[d+1]=-1;s[d+2]=0;a[d]=1;a[d+1]=0;a[d+2]=0;d+=3;if(u&&p){n=c+2*((u-1)*(this._segmentsD+1)+(p-1));o=c+2*(u*(this._segmentsD+1)+(p-1));h=n+2;l=o+2;i[f++]=n;i[f++]=h;i[f++]=l;i[f++]=n;i[f++]=l;i[f++]=o;i[f++]=o+1;i[f++]=l+1;i[f++]=h+1;i[f++]=o+1;i[f++]=h+1;i[f++]=n+1}}}c+=2*(this._segmentsW+1)*(this._segmentsD+1);for(u=0;u<=this._segmentsD;u++){w=g-u*v;for(p=0;p<=this._segmentsH;p++){r[d]=-_;r[d+1]=-y+p*b;r[d+2]=w;s[d]=-1;s[d+1]=0;s[d+2]=0;a[d]=0;a[d+1]=0;a[d+2]=-1;d+=3;r[d]=_;r[d+1]=-y+p*b;r[d+2]=w;s[d]=1;s[d+1]=0;s[d+2]=0;a[d]=0;a[d+1]=0;a[d+2]=1;d+=3;if(u&&p){n=c+2*((u-1)*(this._segmentsH+1)+(p-1));o=c+2*(u*(this._segmentsH+1)+(p-1));h=n+2;l=o+2;i[f++]=n;i[f++]=h;i[f++]=l;i[f++]=n;i[f++]=l;i[f++]=o;i[f++]=o+1;i[f++]=l+1;i[f++]=h+1;i[f++]=o+1;i[f++]=h+1;i[f++]=n+1}}}P.updateIndices(i);P.updatePositions(r);P.updateVertexNormals(s);P.updateVertexTangents(a)}else if(t=="lineSubGeometry"){var D=e;var T=this._segmentsH*4+this._segmentsW*4+this._segmentsD*4;var C;var S;var O;if(D.indices!=null&&T==D.numSegments){C=D.startPositions;S=D.endPositions;O=D.thickness}else{C=new Array(T*3);S=new Array(T*3);O=new Array(T)}d=0;f=0;for(u=0;u<this._segmentsH;++u){C[d]=-_;C[d+1]=u*this._height/this._segmentsH-y;C[d+2]=-g;S[d]=_;S[d+1]=u*this._height/this._segmentsH-y;S[d+2]=-g;O[f++]=1;d+=3;C[d]=-_;C[d+1]=y-u*this._height/this._segmentsH;C[d+2]=g;S[d]=_;S[d+1]=y-u*this._height/this._segmentsH;S[d+2]=g;O[f++]=1;d+=3}for(u=0;u<this._segmentsW;++u){C[d]=u*this._width/this._segmentsW-_;C[d+1]=-y;C[d+2]=-g;S[d]=u*this._width/this._segmentsW-_;S[d+1]=y;S[d+2]=-g;O[f++]=1;d+=3;C[d]=_-u*this._width/this._segmentsW;C[d+1]=-y;C[d+2]=g;S[d]=_-u*this._width/this._segmentsW;S[d+1]=y;S[d+2]=g;O[f++]=1;d+=3}for(u=0;u<this._segmentsH;++u){C[d]=-_;C[d+1]=u*this._height/this._segmentsH-y;C[d+2]=-g;S[d]=-_;S[d+1]=u*this._height/this._segmentsH-y;S[d+2]=g;O[f++]=1;d+=3;C[d]=_;C[d+1]=y-u*this._height/this._segmentsH;C[d+2]=-g;S[d]=_;S[d+1]=y-u*this._height/this._segmentsH;S[d+2]=g;O[f++]=1;d+=3}for(u=0;u<this._segmentsD;++u){C[d]=_;C[d+1]=-y;C[d+2]=u*this._depth/this._segmentsD-g;S[d]=_;S[d+1]=y;S[d+2]=u*this._depth/this._segmentsD-g;O[f++]=1;d+=3;C[d]=-_;C[d+1]=-y;C[d+2]=g-u*this._depth/this._segmentsD;S[d]=-_;S[d+1]=y;S[d+2]=g-u*this._depth/this._segmentsD;O[f++]=1;d+=3}for(u=0;u<this._segmentsD;++u){C[d]=-_;C[d+1]=-y;C[d+2]=g-u*this._depth/this._segmentsD;S[d]=_;S[d+1]=-y;S[d+2]=g-u*this._depth/this._segmentsD;O[f++]=1;d+=3;C[d]=-_;C[d+1]=y;C[d+2]=u*this._depth/this._segmentsD-g;S[d]=_;S[d+1]=y;S[d+2]=u*this._depth/this._segmentsD-g;O[f++]=1;d+=3}for(u=0;u<this._segmentsW;++u){C[d]=_-u*this._width/this._segmentsW;C[d+1]=-y;C[d+2]=-g;S[d]=_-u*this._width/this._segmentsW;S[d+1]=-y;S[d+2]=g;O[f++]=1;d+=3;C[d]=u*this._width/this._segmentsW-_;C[d+1]=y;C[d+2]=-g;S[d]=u*this._width/this._segmentsW-_;S[d+1]=y;S[d+2]=g;O[f++]=1;d+=3}D.updatePositions(C,S);D.updateThickness(O)}};t.prototype._pBuildUVs=function(e,t){var i,r,s;var a;var n,o;var h,l;var u,p;var c,d;var f,_;var y;if(t=="triangleSubGeometry"){y=((this._segmentsW+1)*(this._segmentsH+1)+(this._segmentsW+1)*(this._segmentsD+1)+(this._segmentsH+1)*(this._segmentsD+1))*2;var g=e;if(y==g.numVertices&&g.uvs!=null){a=g.uvs}else{a=new Array(y*2)}if(this._tile6){n=h=1/3;o=l=1/2}else{n=o=1;h=l=0}s=0;u=1*h;p=1*l;c=2*h;d=0*l;f=n/this._segmentsW;_=o/this._segmentsH;for(i=0;i<=this._segmentsW;i++){for(r=0;r<=this._segmentsH;r++){a[s++]=(u+i*f)*g.scaleU;a[s++]=(p+(o-r*_))*g.scaleV;a[s++]=(c+(n-i*f))*g.scaleU;a[s++]=(d+(o-r*_))*g.scaleV}}u=1*h;p=0*l;c=0*h;d=0*l;f=n/this._segmentsW;_=o/this._segmentsD;for(i=0;i<=this._segmentsW;i++){for(r=0;r<=this._segmentsD;r++){a[s++]=(u+i*f)*g.scaleU;a[s++]=(p+(o-r*_))*g.scaleV;a[s++]=(c+i*f)*g.scaleU;a[s++]=(d+r*_)*g.scaleV}}u=0*h;p=1*l;c=2*h;d=1*l;f=n/this._segmentsD;_=o/this._segmentsH;for(i=0;i<=this._segmentsD;i++){for(r=0;r<=this._segmentsH;r++){a[s++]=(u+i*f)*g.scaleU;a[s++]=(p+(o-r*_))*g.scaleV;a[s++]=(c+(n-i*f))*g.scaleU;a[s++]=(d+(o-r*_))*g.scaleV}}g.updateUVs(a)}else if(t=="lineSubGeometry"){}};return t}(s);t.exports=a},{"awayjs-display/lib/prefabs/PrimitivePrefabBase":88}],88:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/library/AssetType");var a=e("awayjs-core/lib/errors/AbstractMethodError");var n=e("awayjs-display/lib/base/Geometry");var o=e("awayjs-display/lib/base/TriangleSubGeometry");var h=e("awayjs-display/lib/base/LineSubGeometry");var l=e("awayjs-display/lib/entities/Mesh");var u=e("awayjs-display/lib/prefabs/PrefabBase");var p=function(e){r(t,e);function t(t,i){if(t===void 0){t=null}if(i===void 0){i="triangleSubGeometry"}e.call(this);this._geomDirty=true;this._uvDirty=true;this._geometryTypeDirty=true;this._geometry=new n;this._material=t;this._geometryType=i}Object.defineProperty(t.prototype,"assetType",{get:function(){return s.PRIMITIVE_PREFAB},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"geometryType",{get:function(){return this._geometryType},set:function(e){if(this._geometryType==e)return;this._geometryType=e;this.invalidateGeometryType()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"geometry",{get:function(){this._iValidate();return this._geometry},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"material",{get:function(){return this._material},set:function(e){if(e==this._material)return;this._material=e;var t=this._pObjects.length;for(var i=0;i<t;i++)this._pObjects[i].material=this._material},enumerable:true,configurable:true});t.prototype._pBuildGeometry=function(e,t){throw new a};t.prototype._pBuildUVs=function(e,t){throw new a};t.prototype.invalidateGeometryType=function(){this._geometryTypeDirty=true;this._geomDirty=true;this._uvDirty=true};t.prototype._pInvalidateGeometry=function(){this._geomDirty=true};t.prototype._pInvalidateUVs=function(){this._uvDirty=true};t.prototype.updateGeometryType=function(){if(this._subGeometry)this._geometry.removeSubGeometry(this._subGeometry);if(this._geometryType=="triangleSubGeometry"){var e=new o(true);e.autoDeriveNormals=false;e.autoDeriveTangents=false;e.autoDeriveUVs=false;this._geometry.addSubGeometry(e);this._subGeometry=e}else if(this._geometryType=="lineSubGeometry"){this._geometry.addSubGeometry(this._subGeometry=new h)}this._geometryTypeDirty=false};t.prototype.updateGeometry=function(){this._pBuildGeometry(this._subGeometry,this._geometryType);this._geomDirty=false};t.prototype.updateUVs=function(){this._pBuildUVs(this._subGeometry,this._geometryType);this._uvDirty=false};t.prototype._iValidate=function(){if(this._geometryTypeDirty)this.updateGeometryType();if(this._geomDirty)this.updateGeometry();if(this._uvDirty)this.updateUVs()};t.prototype._pCreateObject=function(){var e=new l(this._geometry,this._material);e._iSourcePrefab=this;return e};return t}(u);t.exports=p},{"awayjs-core/lib/errors/AbstractMethodError":95,"awayjs-core/lib/library/AssetType":116,"awayjs-display/lib/base/Geometry":35,"awayjs-display/lib/base/LineSubGeometry":37,"awayjs-display/lib/base/TriangleSubGeometry":43,"awayjs-display/lib/entities/Mesh":56,"awayjs-display/lib/prefabs/PrefabBase":86}],89:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-display/lib/prefabs/PrimitivePrefabBase");var a=function(e){r(t,e);function t(t,i,r,s){if(t===void 0){t=50}if(i===void 0){i=16}if(r===void 0){r=12}if(s===void 0){s=true}e.call(this);this._radius=t;this._segmentsW=i;this._segmentsH=r;this._yUp=s}Object.defineProperty(t.prototype,"radius",{get:function(){return this._radius},set:function(e){this._radius=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"segmentsW",{get:function(){return this._segmentsW},set:function(e){this._segmentsW=e;this._pInvalidateGeometry();this._pInvalidateUVs()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"segmentsH",{get:function(){return this._segmentsH},set:function(e){this._segmentsH=e;this._pInvalidateGeometry();this._pInvalidateUVs()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"yUp",{get:function(){return this._yUp},set:function(e){this._yUp=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});t.prototype._pBuildGeometry=function(e,t){var i;var r;var s;var a;var n;var o;var h,l;var u;var p;var c;if(t=="triangleSubGeometry"){var d=e;c=(this._segmentsH+1)*(this._segmentsW+1);if(c==d.numVertices&&d.indices!=null){i=d.indices;r=d.positions;s=d.vertexNormals;a=d.vertexTangents}else{i=new Array((this._segmentsH-1)*this._segmentsW*6);r=new Array(c*3);s=new Array(c*3);a=new Array(c*3);this._pInvalidateUVs()}h=0;l=0;var f;var _;var y;for(o=0;o<=this._segmentsH;++o){f=h;var g=Math.PI*o/this._segmentsH;var m=-this._radius*Math.cos(g);var b=this._radius*Math.sin(g);for(n=0;n<=this._segmentsW;++n){var v=2*Math.PI*n/this._segmentsW;var w=b*Math.cos(v);var x=b*Math.sin(v);var j=1/Math.sqrt(w*w+x*x+m*m);var P=Math.sqrt(x*x+w*w);if(this._yUp){_=0;y=P>.007?w/P:0;u=-m;p=x}else{_=P>.007?w/P:0;y=0;u=x;p=m}if(n==this._segmentsW){r[h]=r[f];r[h+1]=r[f+1];r[h+2]=r[f+2];s[h]=s[f]+w*j*.5;s[h+1]=s[f+1]+u*j*.5;s[h+2]=s[f+2]+p*j*.5;a[h]=P>.007?-x/P:1;a[h+1]=_;a[h+2]=y}else{r[h]=w;r[h+1]=u;r[h+2]=p;s[h]=w*j;s[h+1]=u*j;s[h+2]=p*j;a[h]=P>.007?-x/P:1;a[h+1]=_;a[h+2]=y}if(n>0&&o>0){var D=(this._segmentsW+1)*o+n;var T=(this._segmentsW+1)*o+n-1;var C=(this._segmentsW+1)*(o-1)+n-1;var S=(this._segmentsW+1)*(o-1)+n;if(o==this._segmentsH){r[h]=r[f];r[h+1]=r[f+1];r[h+2]=r[f+2];i[l++]=D;i[l++]=C;i[l++]=S}else if(o==1){i[l++]=D;i[l++]=T;i[l++]=C}else{i[l++]=D;i[l++]=T;i[l++]=C;i[l++]=D;i[l++]=C;i[l++]=S}}h+=3}}d.updateIndices(i);d.updatePositions(r);d.updateVertexNormals(s);d.updateVertexTangents(a)}else if(t=="lineSubGeometry"){var O=e;var A=(this._segmentsH-1)*this._segmentsW*2;var R;var E;var M;if(O.indices!=null&&A==O.numSegments){R=O.startPositions;E=O.endPositions;M=O.thickness}else{R=new Array(A*3);E=new Array(A*3);M=new Array(A)}h=0;l=0;for(o=0;o<=this._segmentsH;++o){var g=Math.PI*o/this._segmentsH;var m=-this._radius*Math.cos(g);var b=this._radius*Math.sin(g);for(n=0;n<=this._segmentsW;++n){var v=2*Math.PI*n/this._segmentsW;var w=b*Math.cos(v);var x=b*Math.sin(v);if(this._yUp){u=-m;p=x}else{u=x;p=m}if(n>0&&o>0){if(o<this._segmentsH){E[h]=w;E[h+1]=u;E[h+2]=p;M[l++]=1;h+=3}R[h]=E[h-this._segmentsW*6];R[h+1]=E[h+1-this._segmentsW*6];R[h+2]=E[h+2-this._segmentsW*6];E[h]=w;E[h+1]=u;E[h+2]=p;M[l++]=1;h+=3}if(n<this._segmentsW&&o>0&&o<this._segmentsH){R[h]=w;R[h+1]=u;R[h+2]=p}}}O.updatePositions(R,E);O.updateThickness(M)}};t.prototype._pBuildUVs=function(e,t){var i,r;var s=(this._segmentsH+1)*(this._segmentsW+1);var a;if(t=="triangleSubGeometry"){s=(this._segmentsH+1)*(this._segmentsW+1);var n=e;if(s==n.numVertices&&n.uvs!=null){a=n.uvs}else{a=new Array(s*2)}var o=0;for(r=0;r<=this._segmentsH;++r){for(i=0;i<=this._segmentsW;++i){a[o++]=i/this._segmentsW*n.scaleU;a[o++]=r/this._segmentsH*n.scaleV}}n.updateUVs(a)}else if(t=="lineSubGeometry"){}};return t}(s);t.exports=a},{"awayjs-display/lib/prefabs/PrimitivePrefabBase":88}],90:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-display/lib/prefabs/PrimitivePrefabBase");var a=function(e){r(t,e);function t(t,i,r,s,a){if(t===void 0){t=50}if(i===void 0){i=50}if(r===void 0){r=16}if(s===void 0){s=8}if(a===void 0){a=true}e.call(this);this._numVertices=0;this._radius=t;this._tubeRadius=i;this._segmentsR=r;this._segmentsT=s;this._yUp=a}Object.defineProperty(t.prototype,"radius",{get:function(){return this._radius},set:function(e){this._radius=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"tubeRadius",{get:function(){return this._tubeRadius},set:function(e){this._tubeRadius=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"segmentsR",{get:function(){return this._segmentsR},set:function(e){this._segmentsR=e;this._pInvalidateGeometry();this._pInvalidateUVs()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"segmentsT",{get:function(){return this._segmentsT},set:function(e){this._segmentsT=e;this._pInvalidateGeometry();this._pInvalidateUVs()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"yUp",{get:function(){return this._yUp},set:function(e){this._yUp=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});t.prototype._pBuildGeometry=function(e,t){var i;var r;var s;var a;var n,o;var h,l,u,p,c,d,f,_;var y;var g;var m=0;if(t=="triangleSubGeometry"){var b=e;this._numVertices=(this._segmentsT+1)*(this._segmentsR+1);m=this._segmentsT*this._segmentsR*6;if(this._numVertices==b.numVertices){i=b.indices;r=b.positions;s=b.vertexNormals;a=b.vertexTangents}else{i=new Array(m);r=new Array(this._numVertices*3);s=new Array(this._numVertices*3);a=new Array(this._numVertices*3);this._pInvalidateUVs()}y=0;g=0;var v=2*Math.PI/this._segmentsR;var w=2*Math.PI/this._segmentsT;var x,j;var P,D,T,C;var S=0;var O=0;var A,R,E,M,I;for(o=0;o<=this._segmentsT;++o){S=O*3;for(n=0;n<=this._segmentsR;++n){f=n*v;_=o*w;I=Math.cos(_);p=I*Math.cos(f);c=I*Math.sin(f);d=Math.sin(_);h=this._radius*Math.cos(f)+this._tubeRadius*p;l=this._radius*Math.sin(f)+this._tubeRadius*c;u=o==this._segmentsT?0:this._tubeRadius*d;if(this._yUp){T=-d;C=c;P=0;D=I?p/I:h/this._radius;x=-u;j=l}else{T=c;C=d;P=I?p/I:h/this._radius;D=0;x=l;j=u}if(n==this._segmentsR){r[y]=h;r[y+1]=r[S+1];r[y+2]=r[S+2]}else{r[y]=h;r[y+1]=x;r[y+2]=j}s[y]=p;s[y+1]=T;s[y+2]=C;a[y]=-(I?c/I:l/this._radius);a[y+1]=P;a[y+2]=D;y+=3;if(n>0&&o>0){A=O;R=O-1;E=R-this._segmentsR-1;M=A-this._segmentsR-1;i[g++]=A;i[g++]=R;i[g++]=E;i[g++]=A;i[g++]=E;i[g++]=M}O++}}b.updateIndices(i);b.updatePositions(r);b.updateVertexNormals(s);b.updateVertexTangents(a)}else if(t=="lineSubGeometry"){}};t.prototype._pBuildUVs=function(e,t){var i,r;var s;if(t=="triangleSubGeometry"){var a=e;if(a.uvs&&this._numVertices==a.numVertices){s=a.uvs}else{s=new Array(this._numVertices*2)}var n=0;for(r=0;r<=this._segmentsT;++r){for(i=0;i<=this._segmentsR;++i){s[n++]=i/this._segmentsR*a.scaleU;s[n++]=r/this._segmentsT*a.scaleV}}a.updateUVs(s)}else if(t=="lineSubGeometry"){}};return t}(s);t.exports=a},{"awayjs-display/lib/prefabs/PrimitivePrefabBase":88}],91:[function(e,t,i){var r=e("awayjs-display/lib/pool/EntityListItemPool");var s=function(){function e(){this._numCullPlanes=0;this._pNumEntities=0;this._pNumInteractiveEntities=0;this._pEntityListItemPool=new r}Object.defineProperty(e.prototype,"camera",{get:function(){return this._pCamera},set:function(e){this._pCamera=e;this._cullPlanes=this._pCamera.frustumPlanes},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"cullPlanes",{get:function(){return this._customCullPlanes},set:function(e){this._customCullPlanes=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"entityHead",{get:function(){return this._pEntityHead},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"numEntities",{get:function(){return this._pNumEntities},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"numInteractiveEntities",{get:function(){return this._pNumInteractiveEntities},enumerable:true,configurable:true});e.prototype.clear=function(){this._pNumEntities=this._pNumInteractiveEntities=0;this._cullPlanes=this._customCullPlanes?this._customCullPlanes:this._pCamera?this._pCamera.frustumPlanes:null;this._numCullPlanes=this._cullPlanes?this._cullPlanes.length:0;this._pEntityHead=null;this._pEntityListItemPool.freeAll()};e.prototype.enterNode=function(e){var t=this.scene._iCollectionMark!=e._iCollectionMark&&e.isInFrustum(this._cullPlanes,this._numCullPlanes);e._iCollectionMark=this.scene._iCollectionMark;return t};e.prototype.applyDirectionalLight=function(e){};e.prototype.applyEntity=function(e){this._pNumEntities++;if(e._iIsMouseEnabled())this._pNumInteractiveEntities++;var t=this._pEntityListItemPool.getItem();t.entity=e;t.next=this._pEntityHead;this._pEntityHead=t};e.prototype.applyLightProbe=function(e){};e.prototype.applyPointLight=function(e){};e.prototype.applySkybox=function(e){};return e}();t.exports=s},{"awayjs-display/lib/pool/EntityListItemPool":84}],92:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/geom/Vector3D");var a=e("awayjs-display/lib/traverse/CollectorBase");var n=function(e){r(t,e);function t(){e.call(this);this._rayPosition=new s;this._rayDirection=new s;this._iCollectionMark=0}Object.defineProperty(t.prototype,"rayPosition",{get:function(){return this._rayPosition},set:function(e){this._rayPosition=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rayDirection",{get:function(){return this._rayDirection},set:function(e){this._rayDirection=e},enumerable:true,configurable:true});t.prototype.enterNode=function(e){return e.isIntersectingRay(this._rayPosition,this._rayDirection)};return t}(a);t.exports=n},{"awayjs-core/lib/geom/Vector3D":115,"awayjs-display/lib/traverse/CollectorBase":91}],93:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-display/lib/traverse/CollectorBase");var a=function(e){r(t,e);function t(){e.call(this)}t.prototype.enterNode=function(t){var i=this.scene._iCollectionMark!=t._iCollectionMark&&t.isCastingShadow();if(!i){t._iCollectionMark=this.scene._iCollectionMark;return false}return e.prototype.enterNode.call(this,t)};return t}(s);t.exports=a},{"awayjs-display/lib/traverse/CollectorBase":91}],94:[function(e,t,i){t.exports=e(2)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/base/BitmapData.js":2,"awayjs-core/lib/geom/Rectangle":113,"awayjs-core/lib/utils/ColorUtils":126}],95:[function(e,t,i){t.exports=e(3)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/AbstractMethodError.js":3,"awayjs-core/lib/errors/Error":97}],96:[function(e,t,i){t.exports=e(4)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/ArgumentError.js":4,"awayjs-core/lib/errors/Error":97}],97:[function(e,t,i){t.exports=e(5)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/Error.js":5}],98:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/errors/Error");var a=function(e){r(t,e);function t(t,i){if(t===void 0){t=""}if(i===void 0){i=0}e.call(this,"PartialImplementationError - this function is in development. Required Dependency: "+t,i)}return t}(s);t.exports=a},{"awayjs-core/lib/errors/Error":97}],99:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/errors/Error");var a=function(e){r(t,e);function t(t,i){if(t===void 0){t=null}if(i===void 0){i=0}e.call(this,t||"RangeError",i)}return t}(s);t.exports=a},{"awayjs-core/lib/errors/Error":97}],100:[function(e,t,i){t.exports=e(6)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/AssetEvent.js":6,"awayjs-core/lib/events/Event":101}],101:[function(e,t,i){t.exports=e(7)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/Event.js":7}],102:[function(e,t,i){t.exports=e(8)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/EventDispatcher.js":8}],103:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];
function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/events/Event");var a=function(e){r(t,e);function t(t,i){e.call(this,t);this._projection=i}Object.defineProperty(t.prototype,"projection",{get:function(){return this._projection},enumerable:true,configurable:true});t.MATRIX_CHANGED="matrixChanged";return t}(s);t.exports=a},{"awayjs-core/lib/events/Event":101}],104:[function(e,t,i){var r=e("awayjs-core/lib/geom/Vector3D");var s=function(){function e(e,t,i,r,s,a){if(e===void 0){e=0}if(t===void 0){t=0}if(i===void 0){i=0}if(r===void 0){r=0}if(s===void 0){s=0}if(a===void 0){a=0}this.x=e;this.y=t;this.z=i;this.width=r;this.height=s;this.depth=a}Object.defineProperty(e.prototype,"back",{get:function(){return this.z+this.depth},set:function(e){this.depth=e-this.z},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},set:function(e){this.height=e-this.y},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"bottomRightBack",{get:function(){if(this._bottomRightBack==null)this._bottomRightBack=new r;this._bottomRightBack.x=this.x+this.width;this._bottomRightBack.y=this.y+this.height;this._bottomRightBack.z=this.z+this.depth;return this._bottomRightBack},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"front",{get:function(){return this.z},set:function(e){this.depth+=this.z-e;this.z=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"left",{get:function(){return this.x},set:function(e){this.width+=this.x-e;this.x=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},set:function(e){this.width=e-this.x},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"size",{get:function(){if(this._size==null)this._size=new r;this._size.x=this.width;this._size.y=this.height;this._size.z=this.depth;return this._size},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"top",{get:function(){return this.y},set:function(e){this.height+=this.y-e;this.y=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"topLeftFront",{get:function(){if(this._topLeftFront==null)this._topLeftFront=new r;this._topLeftFront.x=this.x;this._topLeftFront.y=this.y;this._topLeftFront.z=this.z;return this._topLeftFront},enumerable:true,configurable:true});e.prototype.clone=function(){return new e(this.x,this.y,this.z,this.width,this.height,this.depth)};e.prototype.contains=function(e,t,i){return this.x<=e&&this.x+this.width>=e&&this.y<=t&&this.y+this.height>=t&&this.z<=i&&this.z+this.depth>=i};e.prototype.containsPoint=function(e){return this.x<=e.x&&this.x+this.width>=e.x&&this.y<=e.y&&this.y+this.height>=e.y&&this.z<=e.z&&this.z+this.depth>=e.z};e.prototype.containsBox=function(e){return this.x<=e.x&&this.x+this.width>=e.x+e.width&&this.y<=e.y&&this.y+this.height>=e.y+e.height&&this.z<=e.z&&this.z+this.depth>=e.z+e.depth};e.prototype.copyFrom=function(e){this.x=e.x;this.y=e.y;this.z=e.z;this.width=e.width;this.height=e.height;this.depth=e.depth};e.prototype.equals=function(e){return this.x==e.x&&this.y==e.y&&this.z==e.z&&this.width==e.width&&this.height==e.height&&this.depth==e.depth};e.prototype.inflate=function(e,t,i){this.x-=e/2;this.y-=t/2;this.z-=i/2;this.width+=e/2;this.height+=t/2;this.depth+=i/2};e.prototype.inflatePoint=function(e){this.x-=e.x/2;this.y-=e.y/2;this.z-=e.z/2;this.width+=e.x/2;this.height+=e.y/2;this.depth+=e.z/2};e.prototype.intersection=function(t){if(this.intersects(t)){var i=new e;if(this.x>t.x){i.x=this.x;i.width=t.x-this.x+t.width;if(i.width>this.width)i.width=this.width}else{i.x=t.x;i.width=this.x-t.x+this.width;if(i.width>t.width)i.width=t.width}if(this.y>t.y){i.y=this.y;i.height=t.y-this.y+t.height;if(i.height>this.height)i.height=this.height}else{i.y=t.y;i.height=this.y-t.y+this.height;if(i.height>t.height)i.height=t.height}if(this.z>t.z){i.z=this.z;i.depth=t.z-this.z+t.depth;if(i.depth>this.depth)i.depth=this.depth}else{i.z=t.z;i.depth=this.z-t.z+this.depth;if(i.depth>t.depth)i.depth=t.depth}return i}return new e};e.prototype.intersects=function(e){return this.x+this.width>e.x&&this.x<e.x+e.width&&this.y+this.height>e.y&&this.y<e.y+e.height&&this.z+this.depth>e.z&&this.z<e.z+e.depth};e.prototype.rayIntersection=function(e,t,i){if(this.containsPoint(e))return 0;var r=this.width/2;var s=this.height/2;var a=this.depth/2;var n=this.x+r;var o=this.y+s;var h=this.z+a;var l=e.x-n;var u=e.y-o;var p=e.z-h;var c=t.x;var d=t.y;var f=t.z;var _;var y;var g;var m;var b;if(c<0){m=(r-l)/c;if(m>0){y=u+m*d;g=p+m*f;if(y>-s&&y<s&&g>-a&&g<a){i.x=1;i.y=0;i.z=0;b=true}}}if(!b&&c>0){m=(-r-l)/c;if(m>0){y=u+m*d;g=p+m*f;if(y>-s&&y<s&&g>-a&&g<a){i.x=-1;i.y=0;i.z=0;b=true}}}if(!b&&d<0){m=(s-u)/d;if(m>0){_=l+m*c;g=p+m*f;if(_>-r&&_<r&&g>-a&&g<a){i.x=0;i.y=1;i.z=0;b=true}}}if(!b&&d>0){m=(-s-u)/d;if(m>0){_=l+m*c;g=p+m*f;if(_>-r&&_<r&&g>-a&&g<a){i.x=0;i.y=-1;i.z=0;b=true}}}if(!b&&f<0){m=(a-p)/f;if(m>0){_=l+m*c;y=u+m*d;if(y>-s&&y<s&&_>-r&&_<r){i.x=0;i.y=0;i.z=1;b=true}}}if(!b&&f>0){m=(-a-p)/f;if(m>0){_=l+m*c;y=u+m*d;if(y>-s&&y<s&&_>-r&&_<r){i.x=0;i.y=0;i.z=-1;b=true}}}return b?m:-1};e.prototype.closestPointToPoint=function(e,t){if(t===void 0){t=null}var i;if(t==null)t=new r;i=e.x;if(i<this.x)i=this.x;if(i>this.x+this.width)i=this.x+this.width;t.x=i;i=e.y;if(i<this.y+this.height)i=this.y+this.height;if(i>this.y)i=this.y;t.y=i;i=e.z;if(i<this.z)i=this.z;if(i>this.z+this.depth)i=this.z+this.depth;t.z=i;return t};e.prototype.isEmpty=function(){return this.x==0&&this.y==0&&this.z==0&&this.width==0&&this.height==0&&this.depth==0};e.prototype.offset=function(e,t,i){this.x+=e;this.y+=t;this.z+=i};e.prototype.offsetPosition=function(e){this.x+=e.x;this.y+=e.y;this.z+=e.z};e.prototype.setEmpty=function(){this.x=0;this.y=0;this.z=0;this.width=0;this.height=0;this.depth=0};e.prototype.setTo=function(e,t,i,r,s,a){this.x=e;this.y=t;this.z=i;this.width=r;this.height=s;this.depth=a};e.prototype.toString=function(){return"[Box] (x="+this.x+", y="+this.y+", z="+this.z+", width="+this.width+", height="+this.height+", depth="+this.depth+")"};e.prototype.union=function(t){var i=new e;if(this.x<t.x){i.x=this.x;i.width=t.x-this.x+t.width;if(i.width<this.width)i.width=this.width}else{i.x=t.x;i.width=this.x-t.x+this.width;if(i.width<t.width)i.width=t.width}if(this.y<t.y){i.y=this.y;i.height=t.y-this.y+t.height;if(i.height<this.height)i.height=this.height}else{i.y=t.y;i.height=this.y-t.y+this.height;if(i.height<t.height)i.height=t.height}if(this.z<t.z){i.z=this.z;i.depth=t.z-this.z+t.depth;if(i.depth<this.depth)i.depth=this.depth}else{i.z=t.z;i.depth=this.z-t.z+this.depth;if(i.depth<t.depth)i.depth=t.depth}return i};return e}();t.exports=s},{"awayjs-core/lib/geom/Vector3D":115}],105:[function(e,t,i){var r=function(){function e(){}e.RADIANS_TO_DEGREES=180/Math.PI;e.DEGREES_TO_RADIANS=Math.PI/180;return e}();t.exports=r},{}],106:[function(e,t,i){t.exports=e(12)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Matrix.js":12,"awayjs-core/lib/errors/ArgumentError":96,"awayjs-core/lib/geom/Point":112}],107:[function(e,t,i){var r=e("awayjs-core/lib/geom/Orientation3D");var s=e("awayjs-core/lib/geom/Vector3D");var a=e("awayjs-core/lib/errors/ArgumentError");var n=function(){function e(e){if(e===void 0){e=null}if(e!=null&&e.length==16)this.rawData=e.concat();else this.rawData=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}e.prototype.append=function(e){var t=this.rawData[0],i=this.rawData[4],r=this.rawData[8],s=this.rawData[12],a=this.rawData[1],n=this.rawData[5],o=this.rawData[9],h=this.rawData[13],l=this.rawData[2],u=this.rawData[6],p=this.rawData[10],c=this.rawData[14],d=this.rawData[3],f=this.rawData[7],_=this.rawData[11],y=this.rawData[15],g=e.rawData[0],m=e.rawData[4],b=e.rawData[8],v=e.rawData[12],w=e.rawData[1],x=e.rawData[5],j=e.rawData[9],P=e.rawData[13],D=e.rawData[2],T=e.rawData[6],C=e.rawData[10],S=e.rawData[14],O=e.rawData[3],A=e.rawData[7],R=e.rawData[11],E=e.rawData[15];this.rawData[0]=t*g+a*m+l*b+d*v;this.rawData[1]=t*w+a*x+l*j+d*P;this.rawData[2]=t*D+a*T+l*C+d*S;this.rawData[3]=t*O+a*A+l*R+d*E;this.rawData[4]=i*g+n*m+u*b+f*v;this.rawData[5]=i*w+n*x+u*j+f*P;this.rawData[6]=i*D+n*T+u*C+f*S;this.rawData[7]=i*O+n*A+u*R+f*E;this.rawData[8]=r*g+o*m+p*b+_*v;this.rawData[9]=r*w+o*x+p*j+_*P;this.rawData[10]=r*D+o*T+p*C+_*S;this.rawData[11]=r*O+o*A+p*R+_*E;this.rawData[12]=s*g+h*m+c*b+y*v;this.rawData[13]=s*w+h*x+c*j+y*P;this.rawData[14]=s*D+h*T+c*C+y*S;this.rawData[15]=s*O+h*A+c*R+y*E};e.prototype.appendRotation=function(t,i){var r=e.getAxisRotation(i.x,i.y,i.z,t);this.append(r)};e.prototype.appendScale=function(t,i,r){this.append(new e([t,0,0,0,0,i,0,0,0,0,r,0,0,0,0,1]))};e.prototype.appendTranslation=function(e,t,i){this.rawData[12]+=e;this.rawData[13]+=t;this.rawData[14]+=i};e.prototype.clone=function(){return new e(this.rawData.slice(0))};e.prototype.copyColumnFrom=function(e,t){switch(e){case 0:this.rawData[0]=t.x;this.rawData[1]=t.y;this.rawData[2]=t.z;this.rawData[3]=t.w;break;case 1:this.rawData[4]=t.x;this.rawData[5]=t.y;this.rawData[6]=t.z;this.rawData[7]=t.w;break;case 2:this.rawData[8]=t.x;this.rawData[9]=t.y;this.rawData[10]=t.z;this.rawData[11]=t.w;break;case 3:this.rawData[12]=t.x;this.rawData[13]=t.y;this.rawData[14]=t.z;this.rawData[15]=t.w;break;default:throw new a("ArgumentError, Column "+e+" out of bounds [0, ..., 3]")}};e.prototype.copyColumnTo=function(e,t){switch(e){case 0:t.x=this.rawData[0];t.y=this.rawData[1];t.z=this.rawData[2];t.w=this.rawData[3];break;case 1:t.x=this.rawData[4];t.y=this.rawData[5];t.z=this.rawData[6];t.w=this.rawData[7];break;case 2:t.x=this.rawData[8];t.y=this.rawData[9];t.z=this.rawData[10];t.w=this.rawData[11];break;case 3:t.x=this.rawData[12];t.y=this.rawData[13];t.z=this.rawData[14];t.w=this.rawData[15];break;default:throw new a("ArgumentError, Column "+e+" out of bounds [0, ..., 3]")}};e.prototype.copyFrom=function(e){var t=e.rawData.length;for(var i=0;i<t;i++)this.rawData[i]=e.rawData[i]};e.prototype.copyRawDataFrom=function(e,t,i){if(t===void 0){t=0}if(i===void 0){i=false}if(i)this.transpose();var r=e.length-t;for(var s=0;s<r;s++)this.rawData[s]=e[s+t];if(i)this.transpose()};e.prototype.copyRawDataTo=function(e,t,i){if(t===void 0){t=0}if(i===void 0){i=false}if(i)this.transpose();var r=this.rawData.length;for(var s=0;s<r;s++)e[s+t]=this.rawData[s];if(i)this.transpose()};e.prototype.copyRowFrom=function(e,t){switch(e){case 0:this.rawData[0]=t.x;this.rawData[4]=t.y;this.rawData[8]=t.z;this.rawData[12]=t.w;break;case 1:this.rawData[1]=t.x;this.rawData[5]=t.y;this.rawData[9]=t.z;this.rawData[13]=t.w;break;case 2:this.rawData[2]=t.x;this.rawData[6]=t.y;this.rawData[10]=t.z;this.rawData[14]=t.w;break;case 3:this.rawData[3]=t.x;this.rawData[7]=t.y;this.rawData[11]=t.z;this.rawData[15]=t.w;break;default:throw new a("ArgumentError, Row "+e+" out of bounds [0, ..., 3]")}};e.prototype.copyRowTo=function(e,t){switch(e){case 0:t.x=this.rawData[0];t.y=this.rawData[4];t.z=this.rawData[8];t.w=this.rawData[12];break;case 1:t.x=this.rawData[1];t.y=this.rawData[5];t.z=this.rawData[9];t.w=this.rawData[13];break;case 2:t.x=this.rawData[2];t.y=this.rawData[6];t.z=this.rawData[10];t.w=this.rawData[14];break;case 3:t.x=this.rawData[3];t.y=this.rawData[7];t.z=this.rawData[11];t.w=this.rawData[15];break;default:throw new a("ArgumentError, Row "+e+" out of bounds [0, ..., 3]")}};e.prototype.copyToMatrix3D=function(e){e.rawData=this.rawData.slice(0)};e.prototype.decompose=function(e){if(e===void 0){e="eulerAngles"}var t;var i=[];var a=this.clone();var n=a.rawData;var o=new s(n[12],n[13],n[14]);n[12]=0;n[13]=0;n[14]=0;var h=new s;h.x=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);h.y=Math.sqrt(n[4]*n[4]+n[5]*n[5]+n[6]*n[6]);h.z=Math.sqrt(n[8]*n[8]+n[9]*n[9]+n[10]*n[10]);if(n[0]*(n[5]*n[10]-n[6]*n[9])-n[1]*(n[4]*n[10]-n[6]*n[8])+n[2]*(n[4]*n[9]-n[5]*n[8])<0)h.z=-h.z;n[0]/=h.x;n[1]/=h.x;n[2]/=h.x;n[4]/=h.y;n[5]/=h.y;n[6]/=h.y;n[8]/=h.z;n[9]/=h.z;n[10]/=h.z;var l=new s;switch(e){case r.AXIS_ANGLE:l.w=Math.acos((n[0]+n[5]+n[10]-1)/2);var u=Math.sqrt((n[6]-n[9])*(n[6]-n[9])+(n[8]-n[2])*(n[8]-n[2])+(n[1]-n[4])*(n[1]-n[4]));l.x=(n[6]-n[9])/u;l.y=(n[8]-n[2])/u;l.z=(n[1]-n[4])/u;break;case r.QUATERNION:var p=n[0]+n[5]+n[10];if(p>0){l.w=Math.sqrt(1+p)/2;l.x=(n[6]-n[9])/(4*l.w);l.y=(n[8]-n[2])/(4*l.w);l.z=(n[1]-n[4])/(4*l.w)}else if(n[0]>n[5]&&n[0]>n[10]){l.x=Math.sqrt(1+n[0]-n[5]-n[10])/2;l.w=(n[6]-n[9])/(4*l.x);l.y=(n[1]+n[4])/(4*l.x);l.z=(n[8]+n[2])/(4*l.x)}else if(n[5]>n[10]){l.y=Math.sqrt(1+n[5]-n[0]-n[10])/2;l.x=(n[1]+n[4])/(4*l.y);l.w=(n[8]-n[2])/(4*l.y);l.z=(n[6]+n[9])/(4*l.y)}else{l.z=Math.sqrt(1+n[10]-n[0]-n[5])/2;l.x=(n[8]+n[2])/(4*l.z);l.y=(n[6]+n[9])/(4*l.z);l.w=(n[1]-n[4])/(4*l.z)}break;case r.EULER_ANGLES:l.y=Math.asin(-n[2]);if(n[2]!=1&&n[2]!=-1){l.x=Math.atan2(n[6],n[10]);l.z=Math.atan2(n[1],n[0])}else{l.z=0;l.x=Math.atan2(n[4],n[5])}break}i.push(o);i.push(l);i.push(h);return i};e.prototype.deltaTransformVector=function(e){var t=e.x;var i=e.y;var r=e.z;return new s(t*this.rawData[0]+i*this.rawData[4]+r*this.rawData[8],t*this.rawData[1]+i*this.rawData[5]+r*this.rawData[9],t*this.rawData[2]+i*this.rawData[6]+r*this.rawData[10],t*this.rawData[3]+i*this.rawData[7]+r*this.rawData[11])};e.prototype.identity=function(){this.rawData=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};e.interpolate=function(t,i,r){var s=new e;for(var a=0;a<16;++a)s.rawData[a]=t.rawData[a]+(i.rawData[a]-t.rawData[a])*r;return s};e.prototype.interpolateTo=function(e,t){for(var i=0;i<16;++i)this.rawData[i]=this.rawData[i]+(e.rawData[i]-this.rawData[i])*t};e.prototype.invert=function(){var e=this.determinant;var t=Math.abs(e)>1e-11;if(t){e=1/e;var i=this.rawData[0];var r=this.rawData[4];var s=this.rawData[8];var a=this.rawData[12];var n=this.rawData[1];var o=this.rawData[5];var h=this.rawData[9];var l=this.rawData[13];var u=this.rawData[2];var p=this.rawData[6];var c=this.rawData[10];var d=this.rawData[14];var f=this.rawData[3];var _=this.rawData[7];var y=this.rawData[11];var g=this.rawData[15];this.rawData[0]=e*(o*(c*g-d*y)-h*(p*g-d*_)+l*(p*y-c*_));this.rawData[1]=-e*(n*(c*g-d*y)-h*(u*g-d*f)+l*(u*y-c*f));this.rawData[2]=e*(n*(p*g-d*_)-o*(u*g-d*f)+l*(u*_-p*f));this.rawData[3]=-e*(n*(p*y-c*_)-o*(u*y-c*f)+h*(u*_-p*f));this.rawData[4]=-e*(r*(c*g-d*y)-s*(p*g-d*_)+a*(p*y-c*_));this.rawData[5]=e*(i*(c*g-d*y)-s*(u*g-d*f)+a*(u*y-c*f));this.rawData[6]=-e*(i*(p*g-d*_)-r*(u*g-d*f)+a*(u*_-p*f));this.rawData[7]=e*(i*(p*y-c*_)-r*(u*y-c*f)+s*(u*_-p*f));this.rawData[8]=e*(r*(h*g-l*y)-s*(o*g-l*_)+a*(o*y-h*_));this.rawData[9]=-e*(i*(h*g-l*y)-s*(n*g-l*f)+a*(n*y-h*f));this.rawData[10]=e*(i*(o*g-l*_)-r*(n*g-l*f)+a*(n*_-o*f));this.rawData[11]=-e*(i*(o*y-h*_)-r*(n*y-h*f)+s*(n*_-o*f));this.rawData[12]=-e*(r*(h*d-l*c)-s*(o*d-l*p)+a*(o*c-h*p));this.rawData[13]=e*(i*(h*d-l*c)-s*(n*d-l*u)+a*(n*c-h*u));this.rawData[14]=-e*(i*(o*d-l*p)-r*(n*d-l*u)+a*(n*p-o*u));this.rawData[15]=e*(i*(o*c-h*p)-r*(n*c-h*u)+s*(n*p-o*u))}return t};e.prototype.prepend=function(e){var t=e.rawData[0],i=e.rawData[4],r=e.rawData[8],s=e.rawData[12],a=e.rawData[1],n=e.rawData[5],o=e.rawData[9],h=e.rawData[13],l=e.rawData[2],u=e.rawData[6],p=e.rawData[10],c=e.rawData[14],d=e.rawData[3],f=e.rawData[7],_=e.rawData[11],y=e.rawData[15],g=this.rawData[0],m=this.rawData[4],b=this.rawData[8],v=this.rawData[12],w=this.rawData[1],x=this.rawData[5],j=this.rawData[9],P=this.rawData[13],D=this.rawData[2],T=this.rawData[6],C=this.rawData[10],S=this.rawData[14],O=this.rawData[3],A=this.rawData[7],R=this.rawData[11],E=this.rawData[15];this.rawData[0]=t*g+a*m+l*b+d*v;this.rawData[1]=t*w+a*x+l*j+d*P;this.rawData[2]=t*D+a*T+l*C+d*S;this.rawData[3]=t*O+a*A+l*R+d*E;this.rawData[4]=i*g+n*m+u*b+f*v;this.rawData[5]=i*w+n*x+u*j+f*P;this.rawData[6]=i*D+n*T+u*C+f*S;this.rawData[7]=i*O+n*A+u*R+f*E;this.rawData[8]=r*g+o*m+p*b+_*v;this.rawData[9]=r*w+o*x+p*j+_*P;this.rawData[10]=r*D+o*T+p*C+_*S;this.rawData[11]=r*O+o*A+p*R+_*E;this.rawData[12]=s*g+h*m+c*b+y*v;this.rawData[13]=s*w+h*x+c*j+y*P;this.rawData[14]=s*D+h*T+c*C+y*S;this.rawData[15]=s*O+h*A+c*R+y*E};e.prototype.prependRotation=function(t,i){var r=e.getAxisRotation(i.x,i.y,i.z,t);this.prepend(r)};e.prototype.prependScale=function(t,i,r){this.prepend(new e([t,0,0,0,0,i,0,0,0,0,r,0,0,0,0,1]))};e.prototype.prependTranslation=function(t,i,r){var a=new e;a.position=new s(t,i,r);this.prepend(a)};e.prototype.recompose=function(t){if(t.length<3)return false;this.identity();this.appendScale(t[2].x,t[2].y,t[2].z);var i;i=-t[1].x;this.append(new e([1,0,0,0,0,Math.cos(i),-Math.sin(i),0,0,Math.sin(i),Math.cos(i),0,0,0,0,0]));i=-t[1].y;this.append(new e([Math.cos(i),0,Math.sin(i),0,0,1,0,0,-Math.sin(i),0,Math.cos(i),0,0,0,0,0]));i=-t[1].z;this.append(new e([Math.cos(i),-Math.sin(i),0,0,Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,0]));this.position=t[0];this.rawData[15]=1;return true};e.prototype.transformVector=function(e){if(e==null)return new s;var t=e.x;var i=e.y;var r=e.z;return new s(t*this.rawData[0]+i*this.rawData[4]+r*this.rawData[8]+this.rawData[12],t*this.rawData[1]+i*this.rawData[5]+r*this.rawData[9]+this.rawData[13],t*this.rawData[2]+i*this.rawData[6]+r*this.rawData[10]+this.rawData[14],t*this.rawData[3]+i*this.rawData[7]+r*this.rawData[11]+this.rawData[15])};e.prototype.transformVectors=function(e,t){var i=0;var r=0,s=0,a=0;while(i+3<=e.length){r=e[i];s=e[i+1];a=e[i+2];t[i]=r*this.rawData[0]+s*this.rawData[4]+a*this.rawData[8]+this.rawData[12];t[i+1]=r*this.rawData[1]+s*this.rawData[5]+a*this.rawData[9]+this.rawData[13];t[i+2]=r*this.rawData[2]+s*this.rawData[6]+a*this.rawData[10]+this.rawData[14];i+=3}};e.prototype.transpose=function(){var e=this.rawData.slice(0);this.rawData[1]=e[4];this.rawData[2]=e[8];this.rawData[3]=e[12];this.rawData[4]=e[1];this.rawData[6]=e[9];this.rawData[7]=e[13];this.rawData[8]=e[2];this.rawData[9]=e[6];this.rawData[11]=e[14];this.rawData[12]=e[3];this.rawData[13]=e[7];this.rawData[14]=e[11]};e.getAxisRotation=function(t,i,r,s){var a=new e;var n=s*(Math.PI/180);var o=Math.cos(n);var h=Math.sin(n);var l=1-o;var u,p;a.rawData[0]=o+t*t*l;a.rawData[5]=o+i*i*l;a.rawData[10]=o+r*r*l;u=t*i*l;p=r*h;a.rawData[1]=u+p;a.rawData[4]=u-p;u=t*r*l;p=i*h;a.rawData[8]=u+p;a.rawData[2]=u-p;u=i*r*l;p=t*h;a.rawData[9]=u-p;a.rawData[6]=u+p;return a};Object.defineProperty(e.prototype,"determinant",{get:function(){return(this.rawData[0]*this.rawData[5]-this.rawData[4]*this.rawData[1])*(this.rawData[10]*this.rawData[15]-this.rawData[14]*this.rawData[11])-(this.rawData[0]*this.rawData[9]-this.rawData[8]*this.rawData[1])*(this.rawData[6]*this.rawData[15]-this.rawData[14]*this.rawData[7])+(this.rawData[0]*this.rawData[13]-this.rawData[12]*this.rawData[1])*(this.rawData[6]*this.rawData[11]-this.rawData[10]*this.rawData[7])+(this.rawData[4]*this.rawData[9]-this.rawData[8]*this.rawData[5])*(this.rawData[2]*this.rawData[15]-this.rawData[14]*this.rawData[3])-(this.rawData[4]*this.rawData[13]-this.rawData[12]*this.rawData[5])*(this.rawData[2]*this.rawData[11]-this.rawData[10]*this.rawData[3])+(this.rawData[8]*this.rawData[13]-this.rawData[12]*this.rawData[9])*(this.rawData[2]*this.rawData[7]-this.rawData[6]*this.rawData[3])},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"position",{get:function(){return new s(this.rawData[12],this.rawData[13],this.rawData[14])},set:function(e){this.rawData[12]=e.x;this.rawData[13]=e.y;this.rawData[14]=e.z},enumerable:true,configurable:true});e.prototype.toFixed=function(e){var t=Math.pow(10,e);return"matrix3d("+Math.round(this.rawData[0]*t)/t+","+Math.round(this.rawData[1]*t)/t+","+Math.round(this.rawData[2]*t)/t+","+Math.round(this.rawData[3]*t)/t+","+Math.round(this.rawData[4]*t)/t+","+Math.round(this.rawData[5]*t)/t+","+Math.round(this.rawData[6]*t)/t+","+Math.round(this.rawData[7]*t)/t+","+Math.round(this.rawData[8]*t)/t+","+Math.round(this.rawData[9]*t)/t+","+Math.round(this.rawData[10]*t)/t+","+Math.round(this.rawData[11]*t)/t+","+Math.round(this.rawData[12]*t)/t+","+Math.round(this.rawData[13]*t)/t+","+Math.round(this.rawData[14]*t)/t+","+Math.round(this.rawData[15]*t)/t+")"};e.prototype.toString=function(){return"matrix3d("+Math.round(this.rawData[0]*1e3)/1e3+","+Math.round(this.rawData[1]*1e3)/1e3+","+Math.round(this.rawData[2]*1e3)/1e3+","+Math.round(this.rawData[3]*1e3)/1e3+","+Math.round(this.rawData[4]*1e3)/1e3+","+Math.round(this.rawData[5]*1e3)/1e3+","+Math.round(this.rawData[6]*1e3)/1e3+","+Math.round(this.rawData[7]*1e3)/1e3+","+Math.round(this.rawData[8]*1e3)/1e3+","+Math.round(this.rawData[9]*1e3)/1e3+","+Math.round(this.rawData[10]*1e3)/1e3+","+Math.round(this.rawData[11]*1e3)/1e3+","+Math.round(this.rawData[12]*1e3)/1e3+","+Math.round(this.rawData[13]*1e3)/1e3+","+Math.round(this.rawData[14]*1e3)/1e3+","+Math.round(this.rawData[15]*1e3)/1e3+")"};return e}();t.exports=n},{"awayjs-core/lib/errors/ArgumentError":96,"awayjs-core/lib/geom/Orientation3D":109,"awayjs-core/lib/geom/Vector3D":115}],108:[function(e,t,i){var r=e("awayjs-core/lib/geom/Matrix3D");var s=e("awayjs-core/lib/geom/Vector3D");var a=function(){function e(){}e.quaternion2matrix=function(t,i){if(i===void 0){i=null}var s=t.x;var a=t.y;var n=t.z;var o=t.w;var h=s*s;var l=s*a;var u=s*n;var p=s*o;var c=a*a;var d=a*n;var f=a*o;var _=n*n;var y=n*o;var g=e.RAW_DATA_CONTAINER;g[0]=1-2*(c+_);g[1]=2*(l+y);g[2]=2*(u-f);g[4]=2*(l-y);g[5]=1-2*(h+_);g[6]=2*(d+p);g[8]=2*(u+f);g[9]=2*(d-p);g[10]=1-2*(h+c);g[3]=g[7]=g[11]=g[12]=g[13]=g[14]=0;g[15]=1;if(i){i.copyRawDataFrom(g);return i}else return new r(g)};e.getForward=function(e,t){if(t===void 0){t=null}if(t===null){t=new s(0,0,0)}e.copyColumnTo(2,t);t.normalize();return t};e.getUp=function(e,t){if(t===void 0){t=null}if(t===null){t=new s(0,0,0)}e.copyColumnTo(1,t);t.normalize();return t};e.getRight=function(e,t){if(t===void 0){t=null}if(t===null){t=new s(0,0,0)}e.copyColumnTo(0,t);t.normalize();return t};e.compare=function(t,i){var r=e.RAW_DATA_CONTAINER;var s=i.rawData;t.copyRawDataTo(r);for(var a=0;a<16;++a){if(r[a]!=s[a])return false}return true};e.lookAt=function(t,i,r,s){var a;var n;var o;var h=e.RAW_DATA_CONTAINER;o=r.crossProduct(s);o.normalize();n=o.crossProduct(r);n.normalize();a=r.clone();a.normalize();h[0]=o.x;h[1]=n.x;h[2]=-a.x;h[3]=0;h[4]=o.y;h[5]=n.y;h[6]=-a.y;h[7]=0;h[8]=o.z;h[9]=n.z;h[10]=-a.z;h[11]=0;h[12]=-o.dotProduct(i);h[13]=-n.dotProduct(i);h[14]=a.dotProduct(i);h[15]=1;t.copyRawDataFrom(h)};e.reflection=function(t,i){if(i===void 0){i=null}if(i===null)i=new r;var s=t.a,a=t.b,n=t.c,o=t.d;var h=e.RAW_DATA_CONTAINER;var l=-2*s*a;var u=-2*s*n;var p=-2*a*n;h[0]=1-2*s*s;h[4]=l;h[8]=u;h[12]=-2*s*o;h[1]=l;h[5]=1-2*a*a;h[9]=p;h[13]=-2*a*o;h[2]=u;h[6]=p;h[10]=1-2*n*n;h[14]=-2*n*o;h[3]=0;h[7]=0;h[11]=0;h[15]=1;i.copyRawDataFrom(h);return i};e.transformVector=function(t,i,r){if(r===void 0){r=null}if(!r)r=new s;var a=e.RAW_DATA_CONTAINER;t.copyRawDataTo(a);var n=a[0];var o=a[1];var h=a[2];var l=a[3];var u=a[4];var p=a[5];var c=a[6];var d=a[7];var f=a[8];var _=a[9];var y=a[10];var g=a[11];var m=a[12];var b=a[13];var v=a[14];var w=a[15];var x=i.x;var j=i.y;var P=i.z;r.x=n*x+u*j+f*P+m;r.y=o*x+p*j+_*P+b;r.z=h*x+c*j+y*P+v;r.w=l*x+d*j+g*P+w;return r};e.deltaTransformVector=function(t,i,r){if(r===void 0){r=null}if(!r)r=new s;var a=e.RAW_DATA_CONTAINER;t.copyRawDataTo(a);var n=a[0];var o=a[1];var h=a[2];var l=a[3];var u=a[4];var p=a[5];var c=a[6];var d=a[7];var f=a[8];var _=a[9];var y=a[10];var g=a[11];var m=i.x;var b=i.y;var v=i.z;r.x=n*m+u*b+f*v;r.y=o*m+p*b+_*v;r.z=h*m+c*b+y*v;r.w=l*m+d*b+g*v;return r};e.getTranslation=function(e,t){if(t===void 0){t=null}if(!t)t=new s;e.copyColumnTo(3,t);return t};e.deltaTransformVectors=function(t,i,r){var s=e.RAW_DATA_CONTAINER;t.copyRawDataTo(s);var a=s[0];var n=s[1];var o=s[2];var h=s[3];var l=s[4];var u=s[5];var p=s[6];var c=s[7];var d=s[8];var f=s[9];var _=s[10];var y=s[11];var g=0;var m=i.length;for(var b=0;b<m;b+=3){var v=i[b];var w=i[b+1];var x=i[b+2];r[g++]=a*v+l*w+d*x;r[g++]=n*v+u*w+f*x;r[g++]=o*v+p*w+_*x}};e.RAW_DATA_CONTAINER=new Array(16);e.CALCULATION_MATRIX=new r;return e}();t.exports=a},{"awayjs-core/lib/geom/Matrix3D":107,"awayjs-core/lib/geom/Vector3D":115}],109:[function(e,t,i){var r=function(){function e(){}e.AXIS_ANGLE="axisAngle";e.EULER_ANGLES="eulerAngles";e.QUATERNION="quaternion";return e}();t.exports=r},{}],110:[function(e,t,i){var r=e("awayjs-core/lib/geom/PlaneClassification");var s=function(){function e(t,i,r,s){if(t===void 0){t=0}if(i===void 0){i=0}if(r===void 0){r=0}if(s===void 0){s=0}this.a=t;this.b=i;this.c=r;this.d=s;if(t==0&&i==0){this._iAlignment=e.ALIGN_XY_AXIS}else if(i==0&&r==0){this._iAlignment=e.ALIGN_YZ_AXIS}else if(t==0&&r==0){this._iAlignment=e.ALIGN_XZ_AXIS}else{this._iAlignment=e.ALIGN_ANY}}e.prototype.fromPoints=function(t,i,r){var s=i.x-t.x;var a=i.y-t.y;var n=i.z-t.z;var o=r.x-t.x;var h=r.y-t.y;var l=r.z-t.z;this.a=a*l-n*h;this.b=n*o-s*l;this.c=s*h-a*o;this.d=this.a*t.x+this.b*t.y+this.c*t.z;if(this.a==0&&this.b==0){this._iAlignment=e.ALIGN_XY_AXIS}else if(this.b==0&&this.c==0){this._iAlignment=e.ALIGN_YZ_AXIS}else if(this.a==0&&this.c==0){this._iAlignment=e.ALIGN_XZ_AXIS}else{this._iAlignment=e.ALIGN_ANY}};e.prototype.fromNormalAndPoint=function(t,i){this.a=t.x;this.b=t.y;this.c=t.z;this.d=this.a*i.x+this.b*i.y+this.c*i.z;if(this.a==0&&this.b==0){this._iAlignment=e.ALIGN_XY_AXIS}else if(this.b==0&&this.c==0){this._iAlignment=e.ALIGN_YZ_AXIS}else if(this.a==0&&this.c==0){this._iAlignment=e.ALIGN_XZ_AXIS}else{this._iAlignment=e.ALIGN_ANY}};e.prototype.normalize=function(){var e=1/Math.sqrt(this.a*this.a+this.b*this.b+this.c*this.c);this.a*=e;this.b*=e;this.c*=e;this.d*=e;return this};e.prototype.distance=function(t){if(this._iAlignment==e.ALIGN_YZ_AXIS){return this.a*t.x-this.d}else if(this._iAlignment==e.ALIGN_XZ_AXIS){return this.b*t.y-this.d}else if(this._iAlignment==e.ALIGN_XY_AXIS){return this.c*t.z-this.d}else{return this.a*t.x+this.b*t.y+this.c*t.z-this.d}};e.prototype.classifyPoint=function(t,i){if(i===void 0){i=.01}if(this.d!=this.d)return r.FRONT;var s;if(this._iAlignment==e.ALIGN_YZ_AXIS)s=this.a*t.x-this.d;else if(this._iAlignment==e.ALIGN_XZ_AXIS)s=this.b*t.y-this.d;else if(this._iAlignment==e.ALIGN_XY_AXIS)s=this.c*t.z-this.d;else s=this.a*t.x+this.b*t.y+this.c*t.z-this.d;if(s<-i)return r.BACK;else if(s>i)return r.FRONT;else return r.INTERSECT};e.prototype.toString=function(){return"Plane3D [a:"+this.a+", b:"+this.b+", c:"+this.c+", d:"+this.d+"]"};e.ALIGN_ANY=0;e.ALIGN_XY_AXIS=1;e.ALIGN_YZ_AXIS=2;e.ALIGN_XZ_AXIS=3;return e}();t.exports=s},{"awayjs-core/lib/geom/PlaneClassification":111}],111:[function(e,t,i){var r=function(){function e(){}e.BACK=0;e.FRONT=1;e.IN=0;e.OUT=1;e.INTERSECT=2;return e}();t.exports=r},{}],112:[function(e,t,i){t.exports=e(13)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Point.js":13}],113:[function(e,t,i){t.exports=e(14)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Rectangle.js":14,"awayjs-core/lib/geom/Point":112}],114:[function(e,t,i){var r=function(){function e(e,t,i,r){if(e===void 0){e=0}if(t===void 0){t=0}if(i===void 0){i=0}if(r===void 0){r=0}this.x=e;this.y=t;this.z=i;this.radius=r}e.prototype.rayIntersection=function(e,t,i){if(this.containsPoint(e))return 0;var r=e.x-this.x,s=e.y-this.y,a=e.z-this.z;var n=t.x,o=t.y,h=t.z;var l;var u=n*n+o*o+h*h;var p=2*(r*n+s*o+a*h);var c=r*r+s*s+a*a-this.radius*this.radius;var d=p*p-4*u*c;if(d>=0){var f=Math.sqrt(d);l=(-p-f)/(2*u);if(l>=0){i.x=r+l*n;i.y=s+l*o;i.z=a+l*h;i.normalize();return l}}return-1};e.prototype.containsPoint=function(e){var t=e.x-this.x;var i=e.y-this.y;var r=e.z-this.z;var s=Math.sqrt(t*t+i*i+r*r);return s<=this.radius};e.prototype.toString=function(){return"Sphere [x:"+this.x+", y:"+this.y+", z:"+this.z+", radius:"+this.radius+"]"};return e}();t.exports=r},{}],115:[function(e,t,i){var r=function(){function e(e,t,i,r){if(e===void 0){e=0}if(t===void 0){t=0}if(i===void 0){i=0}if(r===void 0){r=0}this.x=e;this.y=t;this.z=i;this.w=r}Object.defineProperty(e.prototype,"length",{get:function(){return Math.sqrt(this.lengthSquared)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"lengthSquared",{get:function(){return this.x*this.x+this.y*this.y+this.z*this.z},enumerable:true,configurable:true});e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y,this.z+t.z,this.w+t.w)};e.angleBetween=function(e,t){return Math.acos(e.dotProduct(t)/(e.length*t.length))};e.prototype.clone=function(){return new e(this.x,this.y,this.z,this.w)};e.prototype.copyFrom=function(e){this.x=e.x;this.y=e.y;this.z=e.z;this.w=e.w};e.prototype.crossProduct=function(t){return new e(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x,1)};e.prototype.decrementBy=function(e){this.x-=e.x;this.y-=e.y;this.z-=e.z};e.distance=function(e,t){var i=e.x-t.x;var r=e.y-t.y;var s=e.z-t.z;return Math.sqrt(i*i+r*r+s*s)};e.prototype.dotProduct=function(e){return this.x*e.x+this.y*e.y+this.z*e.z};e.prototype.equals=function(e,t){if(t===void 0){t=false}return this.x==e.x&&this.y==e.y&&this.z==e.z&&(!t||this.w==e.w)};e.prototype.incrementBy=function(e){this.x+=e.x;this.y+=e.y;this.z+=e.z};e.prototype.nearEquals=function(e,t,i){if(i===void 0){i=true}return Math.abs(this.x-e.x)<t&&Math.abs(this.y-e.y)<t&&Math.abs(this.z-e.z)<t&&(!i||Math.abs(this.w-e.w)<t)};e.prototype.negate=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z};e.prototype.normalize=function(e){if(e===void 0){e=1}if(this.length!=0){var t=e/this.length;this.x*=t;this.y*=t;this.z*=t;return}};e.prototype.project=function(){this.x/=this.w;this.y/=this.w;this.z/=this.w};e.prototype.scaleBy=function(e){this.x*=e;this.y*=e;this.z*=e};e.prototype.setTo=function(e,t,i){this.x=e;this.y=t;this.z=i};e.prototype.subtract=function(t){return new e(this.x-t.x,this.y-t.y,this.z-t.z)};e.prototype.toString=function(){return"[Vector3D] (x:"+this.x+" ,y:"+this.y+", z"+this.z+", w:"+this.w+")"};e.X_AXIS=new e(1,0,0);e.Y_AXIS=new e(0,1,0);e.Z_AXIS=new e(0,0,1);return e}();t.exports=r},{}],116:[function(e,t,i){t.exports=e(15)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/AssetType.js":15}],117:[function(e,t,i){t.exports=e(16)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/NamedAssetBase.js":16,"awayjs-core/lib/errors/AbstractMethodError":95,"awayjs-core/lib/events/AssetEvent":100,"awayjs-core/lib/events/EventDispatcher":102}],118:[function(e,t,i){var r=function(){function e(){}e.LEFT_HANDED="leftHanded";e.RIGHT_HANDED="rightHanded";return e}();t.exports=r},{}],119:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/projections/PerspectiveProjection");var a=e("awayjs-core/lib/projections/ProjectionBase");var n=function(e){r(t,e);function t(){e.call(this);this._pMatrix.copyFrom((new s).matrix)}Object.defineProperty(t.prototype,"near",{set:function(e){this._pNear=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"far",{set:function(e){this._pFar=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"iAspectRatio",{set:function(e){this._pAspectRatio=e},enumerable:true,configurable:true});t.prototype.clone=function(){var e=new t;e._pMatrix.copyFrom(this._pMatrix);e._pNear=this._pNear;e._pFar=this._pFar;e._pAspectRatio=this._pAspectRatio;e.pInvalidateMatrix();return e};t.prototype.pUpdateMatrix=function(){this._pMatrixInvalid=false};return t}(a);t.exports=n},{"awayjs-core/lib/projections/PerspectiveProjection":120,"awayjs-core/lib/projections/ProjectionBase":121}],120:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/geom/Vector3D");var a=e("awayjs-core/lib/projections/CoordinateSystem");var n=e("awayjs-core/lib/projections/ProjectionBase");
var o=function(e){r(t,e);function t(t,i){if(t===void 0){t=60}if(i===void 0){i="leftHanded"}e.call(this,i);this._fieldOfView=60;this._focalLength=1e3;this._hFieldOfView=60;this._hFocalLength=1e3;this._preserveAspectRatio=true;this._preserveFocalLength=false;this.fieldOfView=t}Object.defineProperty(t.prototype,"preserveAspectRatio",{get:function(){return this._preserveAspectRatio},set:function(e){if(this._preserveAspectRatio==e)return;this._preserveAspectRatio=e;if(this._preserveAspectRatio)this.pInvalidateMatrix()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"preserveFocalLength",{get:function(){return this._preserveFocalLength},set:function(e){if(this._preserveFocalLength==e)return;this._preserveFocalLength=e;this.pInvalidateMatrix()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"fieldOfView",{get:function(){return this._fieldOfView},set:function(e){if(this._fieldOfView==e)return;this._fieldOfView=e;this.pInvalidateMatrix()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"focalLength",{get:function(){return this._focalLength},set:function(e){if(this._focalLength==e)return;this._focalLength=e;this.pInvalidateMatrix()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"hFieldOfView",{get:function(){return this._hFieldOfView},set:function(e){if(this._hFieldOfView==e)return;this._hFieldOfView=e;this._hFocalLength=1/Math.tan(this._hFieldOfView*Math.PI/360);this.pInvalidateMatrix()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"hFocalLength",{get:function(){return this._hFocalLength},set:function(e){if(this._hFocalLength==e)return;this._hFocalLength=e;this.pInvalidateMatrix()},enumerable:true,configurable:true});t.prototype.unproject=function(e,t,i){var r=new s(e,-t,i,1);r.x*=i;r.y*=i;r=this.unprojectionMatrix.transformVector(r);r.z=i;return r};t.prototype.clone=function(){var e=new t(this._fieldOfView);e._pNear=this._pNear;e._pFar=this._pFar;e._pAspectRatio=this._pAspectRatio;e._pCoordinateSystem=this._pCoordinateSystem;return e};t.prototype.pUpdateMatrix=function(){var e=[];if(this._preserveFocalLength){if(this._preserveAspectRatio)this._hFocalLength=this._focalLength;this._fieldOfView=Math.atan(.5*this._pScissorRect.height/this._focalLength)*360/Math.PI;this._hFieldOfView=Math.atan(.5*this._pScissorRect.width/this._hFocalLength)*360/Math.PI}else{this._focalLength=.5*this._pScissorRect.height/Math.tan(this._fieldOfView*Math.PI/360);if(this._preserveAspectRatio)this._hFocalLength=this._focalLength;else this._hFocalLength=.5*this._pScissorRect.width/Math.tan(this._hFieldOfView*Math.PI/360)}var t=-this._pOriginX/this._hFocalLength;var i=(1-this._pOriginX)/this._hFocalLength;var r=-this._pOriginY/this._focalLength;var s=(1-this._pOriginY)/this._focalLength;var n;var o;var h;var l;var u=-((t-i)*this._pScissorRect.x+t*this._pScissorRect.width);var p=(r-s)*this._pScissorRect.y+r*this._pScissorRect.height;n=u-(i-t)*this._pViewPort.width;o=u;h=p;l=p+(s-r)*this._pViewPort.height;e[0]=2/(o-n);e[5]=2/(l-h);e[8]=(o+n)/(o-n);e[9]=(l+h)/(l-h);e[10]=(this._pFar+this._pNear)/(this._pFar-this._pNear);e[11]=1;e[1]=e[2]=e[3]=e[4]=e[6]=e[7]=e[12]=e[13]=e[15]=0;e[14]=-2*this._pFar*this._pNear/(this._pFar-this._pNear);if(this._pCoordinateSystem==a.RIGHT_HANDED)e[5]=-e[5];this._pMatrix.copyRawDataFrom(e);this._pFrustumCorners[0]=this._pFrustumCorners[9]=this._pNear*n;this._pFrustumCorners[3]=this._pFrustumCorners[6]=this._pNear*o;this._pFrustumCorners[1]=this._pFrustumCorners[4]=this._pNear*h;this._pFrustumCorners[7]=this._pFrustumCorners[10]=this._pNear*l;this._pFrustumCorners[12]=this._pFrustumCorners[21]=this._pFar*n;this._pFrustumCorners[15]=this._pFrustumCorners[18]=this._pFar*o;this._pFrustumCorners[13]=this._pFrustumCorners[16]=this._pFar*h;this._pFrustumCorners[19]=this._pFrustumCorners[22]=this._pFar*l;this._pFrustumCorners[2]=this._pFrustumCorners[5]=this._pFrustumCorners[8]=this._pFrustumCorners[11]=this._pNear;this._pFrustumCorners[14]=this._pFrustumCorners[17]=this._pFrustumCorners[20]=this._pFrustumCorners[23]=this._pFar;this._pMatrixInvalid=false};return t}(n);t.exports=o},{"awayjs-core/lib/geom/Vector3D":115,"awayjs-core/lib/projections/CoordinateSystem":118,"awayjs-core/lib/projections/ProjectionBase":121}],121:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/geom/Matrix3D");var a=e("awayjs-core/lib/geom/Rectangle");var n=e("awayjs-core/lib/events/EventDispatcher");var o=e("awayjs-core/lib/events/ProjectionEvent");var h=e("awayjs-core/lib/errors/AbstractMethodError");var l=function(e){r(t,e);function t(t){if(t===void 0){t="leftHanded"}e.call(this);this._pMatrix=new s;this._pScissorRect=new a;this._pViewPort=new a;this._pNear=20;this._pFar=3e3;this._pAspectRatio=1;this._pMatrixInvalid=true;this._pFrustumCorners=[];this._pOriginX=.5;this._pOriginY=.5;this._unprojectionInvalid=true;this.coordinateSystem=t}Object.defineProperty(t.prototype,"coordinateSystem",{get:function(){return this._pCoordinateSystem},set:function(e){if(this._pCoordinateSystem==e)return;this._pCoordinateSystem=e;this.pInvalidateMatrix()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"frustumCorners",{get:function(){return this._pFrustumCorners},set:function(e){this._pFrustumCorners=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"matrix",{get:function(){if(this._pMatrixInvalid){this.pUpdateMatrix();this._pMatrixInvalid=false}return this._pMatrix},set:function(e){this._pMatrix=e;this.pInvalidateMatrix()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"near",{get:function(){return this._pNear},set:function(e){if(e==this._pNear){return}this._pNear=e;this.pInvalidateMatrix()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"originX",{get:function(){return this._pOriginX},set:function(e){if(this._pOriginX==e)return;this._pOriginX=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"originY",{get:function(){return this._pOriginY},set:function(e){if(this._pOriginY==e)return;this._pOriginY=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"far",{get:function(){return this._pFar},set:function(e){if(e==this._pFar){return}this._pFar=e;this.pInvalidateMatrix()},enumerable:true,configurable:true});t.prototype.project=function(e){var t=this.matrix.transformVector(e);t.x=t.x/t.w;t.y=-t.y/t.w;t.z=e.z;return t};Object.defineProperty(t.prototype,"unprojectionMatrix",{get:function(){if(this._unprojectionInvalid){if(!this._unprojection)this._unprojection=new s;this._unprojection.copyFrom(this.matrix);this._unprojection.invert();this._unprojectionInvalid=false}return this._unprojection},enumerable:true,configurable:true});t.prototype.unproject=function(e,t,i){throw new h};t.prototype.clone=function(){throw new h};Object.defineProperty(t.prototype,"_iAspectRatio",{get:function(){return this._pAspectRatio},set:function(e){if(this._pAspectRatio==e)return;this._pAspectRatio=e;this.pInvalidateMatrix()},enumerable:true,configurable:true});t.prototype.pInvalidateMatrix=function(){this._pMatrixInvalid=true;this._unprojectionInvalid=true;this.dispatchEvent(new o(o.MATRIX_CHANGED,this))};t.prototype.pUpdateMatrix=function(){throw new h};t.prototype._iUpdateScissorRect=function(e,t,i,r){this._pScissorRect.x=e;this._pScissorRect.y=t;this._pScissorRect.width=i;this._pScissorRect.height=r;this.pInvalidateMatrix()};t.prototype._iUpdateViewport=function(e,t,i,r){this._pViewPort.x=e;this._pViewPort.y=t;this._pViewPort.width=i;this._pViewPort.height=r;this.pInvalidateMatrix()};return t}(n);t.exports=l},{"awayjs-core/lib/errors/AbstractMethodError":95,"awayjs-core/lib/events/EventDispatcher":102,"awayjs-core/lib/events/ProjectionEvent":103,"awayjs-core/lib/geom/Matrix3D":107,"awayjs-core/lib/geom/Rectangle":113}],122:[function(e,t,i){t.exports=e(24)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/MipmapGenerator.js":24,"awayjs-core/lib/base/BitmapData":94,"awayjs-core/lib/geom/Matrix":106,"awayjs-core/lib/geom/Rectangle":113}],123:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/errors/Error");var a=e("awayjs-core/lib/textures/Texture2DBase");var n=e("awayjs-core/lib/utils/TextureUtils");var o=function(e){r(t,e);function t(t,i){e.call(this);this._pSetSize(t,i)}Object.defineProperty(t.prototype,"width",{get:function(){return this._pWidth},set:function(e){if(e==this._pWidth)return;if(!n.isDimensionValid(e))throw new s("Invalid size: Width and height must be power of 2 and cannot exceed 2048");this.invalidateContent();this._pSetSize(e,this._pHeight)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"height",{get:function(){return this._pHeight},set:function(e){if(e==this._pHeight)return;if(!n.isDimensionValid(e))throw new s("Invalid size: Width and height must be power of 2 and cannot exceed 2048");this.invalidateContent();this._pSetSize(this._pWidth,e)},enumerable:true,configurable:true});return t}(a);t.exports=o},{"awayjs-core/lib/errors/Error":97,"awayjs-core/lib/textures/Texture2DBase":124,"awayjs-core/lib/utils/TextureUtils":127}],124:[function(e,t,i){t.exports=e(25)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/Texture2DBase.js":25,"awayjs-core/lib/errors/AbstractMethodError":95,"awayjs-core/lib/textures/MipmapGenerator":122,"awayjs-core/lib/textures/TextureProxyBase":125}],125:[function(e,t,i){t.exports=e(26)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/TextureProxyBase.js":26,"awayjs-core/lib/library/AssetType":116,"awayjs-core/lib/library/NamedAssetBase":117}],126:[function(e,t,i){t.exports=e(29)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/ColorUtils.js":29}],127:[function(e,t,i){t.exports=e(31)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/TextureUtils.js":31}],128:[function(e,t,i){t.exports=e(32)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/getTimer.js":32}],129:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/textures/Texture2DBase");var a=e("awayjs-display/lib/materials/MaterialBase");var n=e("awayjs-stagegl/lib/base/ContextGLCompareMode");var o=e("awayjs-methodmaterials/lib/methods/AmbientBasicMethod");var h=e("awayjs-methodmaterials/lib/methods/DiffuseBasicMethod");var l=e("awayjs-methodmaterials/lib/methods/NormalBasicMethod");var u=e("awayjs-methodmaterials/lib/methods/SpecularBasicMethod");var p=e("awayjs-methodmaterials/lib/MethodMaterialMode");var c=function(e){r(t,e);function t(t,i,r,a){if(t===void 0){t=null}if(i===void 0){i=null}if(r===void 0){r=false}if(a===void 0){a=true}e.call(this);this._effectMethods=new Array;this._ambientMethod=new o;this._diffuseMethod=new h;this._normalMethod=new l;this._specularMethod=new u;this._depthCompareMode=n.LESS_EQUAL;this._mode=p.SINGLE_PASS;if(t instanceof s){this.texture=t;this.smooth=i==null?true:false;this.repeat=r;this.mipmap=a}else{this.color=t==null?16777215:Number(t);this.alpha=i==null?1:Number(i)}}Object.defineProperty(t.prototype,"mode",{get:function(){return this._mode},set:function(e){if(this._mode==e)return;this._mode=e;this._pInvalidateRenderObject()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"depthCompareMode",{get:function(){return this._depthCompareMode},set:function(e){if(this._depthCompareMode==e)return;this._depthCompareMode=e;this._pInvalidateRenderObject()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"diffuseTexture",{get:function(){return this._diffuseMethod.texture},set:function(e){this._diffuseMethod.texture=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"ambientMethod",{get:function(){return this._ambientMethod},set:function(e){if(this._ambientMethod==e)return;if(e&&this._ambientMethod)e.copyFrom(this._ambientMethod);this._ambientMethod=e;this._pInvalidateRenderObject()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"shadowMethod",{get:function(){return this._shadowMethod},set:function(e){if(this._shadowMethod==e)return;if(e&&this._shadowMethod)e.copyFrom(this._shadowMethod);this._shadowMethod=e;this._pInvalidateRenderObject()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"diffuseMethod",{get:function(){return this._diffuseMethod},set:function(e){if(this._diffuseMethod==e)return;if(e&&this._diffuseMethod)e.copyFrom(this._diffuseMethod);this._diffuseMethod=e;this._pInvalidateRenderObject()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"specularMethod",{get:function(){return this._specularMethod},set:function(e){if(this._specularMethod==e)return;if(e&&this._specularMethod)e.copyFrom(this._specularMethod);this._specularMethod=e;this._pInvalidateRenderObject()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"normalMethod",{get:function(){return this._normalMethod},set:function(e){if(this._normalMethod==e)return;if(e&&this._normalMethod)e.copyFrom(this._normalMethod);this._normalMethod=e;this._pInvalidateRenderObject()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numEffectMethods",{get:function(){return this._effectMethods.length},enumerable:true,configurable:true});t.prototype.addEffectMethod=function(e){this._effectMethods.push(e);this._pInvalidateRenderObject()};t.prototype.getEffectMethodAt=function(e){return this._effectMethods[e]};t.prototype.addEffectMethodAt=function(e,t){this._effectMethods.splice(t,0,e);this._pInvalidateRenderObject()};t.prototype.removeEffectMethod=function(e){this._effectMethods.splice(this._effectMethods.indexOf(e),1);this._pInvalidateRenderObject()};Object.defineProperty(t.prototype,"normalMap",{get:function(){return this._normalMethod.normalMap},set:function(e){this._normalMethod.normalMap=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"specularMap",{get:function(){return this._specularMethod.texture},set:function(e){this._specularMethod.texture=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"gloss",{get:function(){return this._specularMethod.gloss},set:function(e){this._specularMethod.gloss=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"ambient",{get:function(){return this._ambientMethod.ambient},set:function(e){this._ambientMethod.ambient=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"specular",{get:function(){return this._specularMethod.specular},set:function(e){this._specularMethod.specular=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"ambientColor",{get:function(){return this._diffuseMethod.ambientColor},set:function(e){this._diffuseMethod.ambientColor=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"diffuseColor",{get:function(){return this._diffuseMethod.diffuseColor},set:function(e){this._diffuseMethod.diffuseColor=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"specularColor",{get:function(){return this._specularMethod.specularColor},set:function(e){this._specularMethod.specularColor=e},enumerable:true,configurable:true});t.prototype.getRenderObject=function(e){return e.getMethodRenderObject(this)};return t}(a);t.exports=c},{"awayjs-core/lib/textures/Texture2DBase":159,"awayjs-display/lib/materials/MaterialBase":180,"awayjs-methodmaterials/lib/MethodMaterialMode":130,"awayjs-methodmaterials/lib/methods/AmbientBasicMethod":133,"awayjs-methodmaterials/lib/methods/DiffuseBasicMethod":134,"awayjs-methodmaterials/lib/methods/NormalBasicMethod":138,"awayjs-methodmaterials/lib/methods/SpecularBasicMethod":140,"awayjs-stagegl/lib/base/ContextGLCompareMode":302}],130:[function(e,t,i){var r=function(){function e(){}e.SINGLE_PASS="singlePass";e.MULTI_PASS="multiPass";return e}();t.exports=r},{}],131:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/base/BlendMode");var a=e("awayjs-display/lib/materials/lightpickers/StaticLightPicker");var n=e("awayjs-stagegl/lib/base/ContextGLCompareMode");var o=e("awayjs-renderergl/lib/compilation/RenderObjectBase");var h=e("awayjs-methodmaterials/lib/passes/MethodPassMode");var l=e("awayjs-methodmaterials/lib/passes/MethodPass");var u=e("awayjs-methodmaterials/lib/MethodMaterialMode");var p=function(e){r(t,e);function t(t,i,r,s){e.call(this,t,i,r,s);this._material=i}Object.defineProperty(t.prototype,"numLights",{get:function(){return this._material.lightPicker?this._material.lightPicker.numLightProbes+this._material.lightPicker.numDirectionalLights+this._material.lightPicker.numPointLights+this._material.lightPicker.numCastingDirectionalLights+this._material.lightPicker.numCastingPointLights:0},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numNonCasters",{get:function(){return this._material.lightPicker?this._material.lightPicker.numLightProbes+this._material.lightPicker.numDirectionalLights+this._material.lightPicker.numPointLights:0},enumerable:true,configurable:true});t.prototype._pUpdateRenderObject=function(){e.prototype._pUpdateRenderObject.call(this);this.initPasses();this.setBlendAndCompareModes();this._pClearScreenPasses();if(this._material.mode==u.MULTI_PASS){if(this._casterLightPass)this._pAddScreenPass(this._casterLightPass);if(this._nonCasterLightPasses)for(var t=0;t<this._nonCasterLightPasses.length;++t)this._pAddScreenPass(this._nonCasterLightPasses[t])}if(this._screenPass)this._pAddScreenPass(this._screenPass)};t.prototype.initPasses=function(){if(this.numLights==0||this._material.numEffectMethods>0||this._material.mode==u.SINGLE_PASS)this.initEffectPass();else if(this._screenPass)this.removeEffectPass();if(this._material.shadowMethod&&this._material.mode==u.MULTI_PASS)this.initCasterLightPass();else if(this._casterLightPass)this.removeCasterLightPass();if(this.numNonCasters>0&&this._material.mode==u.MULTI_PASS)this.initNonCasterLightPasses();else if(this._nonCasterLightPasses)this.removeNonCasterLightPasses()};t.prototype.setBlendAndCompareModes=function(){var e=Boolean(this._casterLightPass||this._screenPass);if(this._casterLightPass){this._casterLightPass.forceSeparateMVP=e;this._casterLightPass.setBlendMode(s.NORMAL);this._casterLightPass.depthCompareMode=this._material.depthCompareMode}if(this._nonCasterLightPasses){var t=0;if(!this._casterLightPass){this._nonCasterLightPasses[0].forceSeparateMVP=e;this._nonCasterLightPasses[0].setBlendMode(s.NORMAL);this._nonCasterLightPasses[0].depthCompareMode=this._material.depthCompareMode;t=1}for(var i=t;i<this._nonCasterLightPasses.length;++i){this._nonCasterLightPasses[i].forceSeparateMVP=e;this._nonCasterLightPasses[i].setBlendMode(s.ADD);this._nonCasterLightPasses[i].depthCompareMode=n.LESS_EQUAL}}if(this._casterLightPass||this._nonCasterLightPasses){this._pRequiresBlending=false;if(this._screenPass){this._screenPass.mode=h.EFFECTS;this._screenPass.depthCompareMode=n.LESS_EQUAL;this._screenPass.setBlendMode(s.LAYER);this._screenPass.forceSeparateMVP=e}}else if(this._screenPass){this._pRequiresBlending=this._material.blendMode!=s.NORMAL||this._material.alphaBlending||this._material.colorTransform&&this._material.colorTransform.alphaMultiplier<1;this._screenPass.mode=h.SUPER_SHADER;this._screenPass.depthCompareMode=this._material.depthCompareMode;this._screenPass.preserveAlpha=this._pRequiresBlending;this._screenPass.colorTransform=this._material.colorTransform;this._screenPass.setBlendMode(this._material.blendMode==s.NORMAL&&this._pRequiresBlending?s.LAYER:this._material.blendMode);this._screenPass.forceSeparateMVP=false}};t.prototype.initCasterLightPass=function(){if(this._casterLightPass==null)this._casterLightPass=new l(h.LIGHTING,this,this._material,this._renderableClass,this._stage);this._casterLightPass.lightPicker=new a([this._material.shadowMethod.castingLight]);this._casterLightPass.shadowMethod=this._material.shadowMethod;this._casterLightPass.diffuseMethod=this._material.diffuseMethod;this._casterLightPass.ambientMethod=this._material.ambientMethod;this._casterLightPass.normalMethod=this._material.normalMethod;this._casterLightPass.specularMethod=this._material.specularMethod};t.prototype.removeCasterLightPass=function(){this._casterLightPass.dispose();this._pRemoveScreenPass(this._casterLightPass);this._casterLightPass=null};t.prototype.initNonCasterLightPasses=function(){this.removeNonCasterLightPasses();var e;var t=this._material.lightPicker.numDirectionalLights;var i=this._material.lightPicker.numPointLights;var r=this._material.lightPicker.numLightProbes;var s=0;var a=0;var n=0;if(!this._casterLightPass){t+=this._material.lightPicker.numCastingDirectionalLights;i+=this._material.lightPicker.numCastingPointLights}this._nonCasterLightPasses=new Array;while(s<t||a<i||n<r){e=new l(h.LIGHTING,this,this._material,this._renderableClass,this._stage);e.includeCasters=this._material.shadowMethod==null;e.directionalLightsOffset=s;e.pointLightsOffset=a;e.lightProbesOffset=n;e.lightPicker=this._material.lightPicker;e.diffuseMethod=this._material.diffuseMethod;e.ambientMethod=this._material.ambientMethod;e.normalMethod=this._material.normalMethod;e.specularMethod=this._material.specularMethod;this._nonCasterLightPasses.push(e);s+=e.numDirectionalLights;a+=e.numPointLights;n+=e.numLightProbes}};t.prototype.removeNonCasterLightPasses=function(){if(!this._nonCasterLightPasses)return;for(var e=0;e<this._nonCasterLightPasses.length;++e)this._pRemoveScreenPass(this._nonCasterLightPasses[e]);this._nonCasterLightPasses=null};t.prototype.removeEffectPass=function(){if(this._screenPass.ambientMethod!=this._material.ambientMethod)this._screenPass.ambientMethod.dispose();if(this._screenPass.diffuseMethod!=this._material.diffuseMethod)this._screenPass.diffuseMethod.dispose();if(this._screenPass.specularMethod!=this._material.specularMethod)this._screenPass.specularMethod.dispose();if(this._screenPass.normalMethod!=this._material.normalMethod)this._screenPass.normalMethod.dispose();this._pRemoveScreenPass(this._screenPass);this._screenPass=null};t.prototype.initEffectPass=function(){if(this._screenPass==null)this._screenPass=new l(h.SUPER_SHADER,this,this._material,this._renderableClass,this._stage);if(this._material.mode==u.SINGLE_PASS){this._screenPass.ambientMethod=this._material.ambientMethod;this._screenPass.diffuseMethod=this._material.diffuseMethod;this._screenPass.specularMethod=this._material.specularMethod;this._screenPass.normalMethod=this._material.normalMethod;this._screenPass.shadowMethod=this._material.shadowMethod}else if(this._material.mode==u.MULTI_PASS){if(this.numLights==0){this._screenPass.ambientMethod=this._material.ambientMethod}else{this._screenPass.ambientMethod=null}this._screenPass.preserveAlpha=false;this._screenPass.normalMethod=this._material.normalMethod}var e=0;var t;var i=Math.max(this._material.numEffectMethods,this._screenPass.numEffectMethods);while(e<i){t=this._material.getEffectMethodAt(e);if(t!=this._screenPass.getEffectMethodAt(e)){this._screenPass.removeEffectMethodAt(e);if(t!=null){if(e<this._screenPass.numEffectMethods)this._screenPass.addEffectMethodAt(t,e);else this._screenPass.addEffectMethod(t)}}e++}};t.prototype.dispose=function(){e.prototype.dispose.call(this)};t.id="method";return t}(o);t.exports=p},{"awayjs-core/lib/base/BlendMode":146,"awayjs-display/lib/materials/lightpickers/StaticLightPicker":182,"awayjs-methodmaterials/lib/MethodMaterialMode":130,"awayjs-methodmaterials/lib/passes/MethodPass":141,"awayjs-methodmaterials/lib/passes/MethodPassMode":142,"awayjs-renderergl/lib/compilation/RenderObjectBase":231,"awayjs-stagegl/lib/base/ContextGLCompareMode":302}],132:[function(e,t,i){var r=function(){function e(e){this.useMethod=true;this.method=e}e.prototype.reset=function(){this.method.iReset();this.texturesIndex=-1;this.vertexConstantsIndex=-1;this.fragmentConstantsIndex=-1;this.needsProjection=false;this.needsView=false;this.needsNormals=false;this.needsTangents=false;this.needsUV=false;this.needsSecondaryUV=false;this.needsGlobalVertexPos=false;this.needsGlobalFragmentPos=false};return e}();t.exports=r},{}],133:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-renderergl/lib/utils/ShaderCompilerHelper");var a=e("awayjs-methodmaterials/lib/methods/ShadingMethodBase");var n=function(e){r(t,e);function t(){e.call(this);this._color=16777215;this._alpha=1;this._colorR=1;this._colorG=1;this._colorB=1;this._ambient=1}t.prototype.iInitVO=function(e,t){t.needsUV=Boolean(e.texture!=null)};t.prototype.iInitConstants=function(e,t){if(!t.needsUV){this._color=e.color;this.updateColor()}};Object.defineProperty(t.prototype,"ambient",{get:function(){return this._ambient},set:function(e){if(this._ambient==e)return;this._ambient=e;this.updateColor()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(e){if(this._alpha==e)return;this._alpha=e;this.updateColor()},enumerable:true,configurable:true});t.prototype.copyFrom=function(e){var t=e;var i=t};t.prototype.iGetFragmentCode=function(e,t,i,r,a){var n="";var o;if(t.needsUV){o=r.getFreeTextureReg();t.texturesIndex=o.index;n+=s.getTex2DSampleCode(i,a,o,e.texture,e.useSmoothTextures,e.repeatTextures,false);if(e.alphaThreshold>0){var h=r.getFreeFragmentConstant();t.fragmentConstantsIndex=h.index*4;n+="sub "+i+".w, "+i+".w, "+h+".x\n"+"kil "+i+".w\n"+"add "+i+".w, "+i+".w, "+h+".x\n"}}else{o=r.getFreeFragmentConstant();t.fragmentConstantsIndex=o.index*4;n+="mov "+i+", "+o+"\n"}return n};t.prototype.iActivate=function(e,t,i){if(t.needsUV){i.activateTexture(t.texturesIndex,e.texture,e.repeatTextures,e.useSmoothTextures,e.useMipmapping);if(e.alphaThreshold>0)e.fragmentConstantData[t.fragmentConstantsIndex]=e.alphaThreshold}else{var r=t.fragmentConstantsIndex;var s=e.fragmentConstantData;s[r]=this._colorR;s[r+1]=this._colorG;s[r+2]=this._colorB;s[r+3]=this._alpha}};t.prototype.updateColor=function(){this._colorR=(this._color>>16&255)/255*this._ambient;this._colorG=(this._color>>8&255)/255*this._ambient;this._colorB=(this._color&255)/255*this._ambient};return t}(a);t.exports=n},{"awayjs-methodmaterials/lib/methods/ShadingMethodBase":139,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":254}],134:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-renderergl/lib/utils/ShaderCompilerHelper");var a=e("awayjs-methodmaterials/lib/methods/LightingMethodBase");var n=function(e){r(t,e);function t(){e.call(this);this._multiply=true;this._diffuseColor=16777215;this._ambientColor=16777215;this._diffuseR=1;this._diffuseG=1;this._diffuseB=1;this._ambientR=1;this._ambientG=1;this._ambientB=1}t.prototype.iIsUsed=function(e){if(!e.numLights)return false;return true};Object.defineProperty(t.prototype,"multiply",{get:function(){return this._multiply},set:function(e){if(this._multiply==e)return;this._multiply=e;this.iInvalidateShaderProgram()},enumerable:true,configurable:true});t.prototype.iInitVO=function(e,t){t.needsUV=this._pUseTexture;t.needsNormals=e.numLights>0};t.prototype.generateMip=function(e){if(this._pUseTexture)e.activateTexture(0,this._texture,true,true,true)};Object.defineProperty(t.prototype,"diffuseColor",{get:function(){return this._diffuseColor},set:function(e){if(this._diffuseColor==e)return;this._diffuseColor=e;this.updateDiffuse()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"ambientColor",{get:function(){return this._ambientColor},set:function(e){if(this._ambientColor==e)return;this._ambientColor=e;this.updateAmbient()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){var t=e!=null;if(t!=this._pUseTexture||e&&this._texture&&e.format!=this._texture.format)this.iInvalidateShaderProgram();this._pUseTexture=t;this._texture=e},enumerable:true,configurable:true});t.prototype.dispose=function(){this._texture=null};t.prototype.copyFrom=function(e){var t=e;this.texture=t.texture;this.multiply=t.multiply;this.diffuseColor=t.diffuseColor;this.ambientColor=t.ambientColor};t.prototype.iCleanCompilationData=function(){e.prototype.iCleanCompilationData.call(this);this._pTotalLightColorReg=null;this._pDiffuseInputRegister=null};t.prototype.iGetFragmentPreLightingCode=function(e,t,i,r){var s="";this._pIsFirstLight=true;this._pTotalLightColorReg=i.getFreeFragmentVectorTemp();i.addFragmentTempUsages(this._pTotalLightColorReg,1);return s};t.prototype.iGetFragmentCodePerLight=function(e,t,i,r,s,a){var n="";var o;if(this._pIsFirstLight){o=this._pTotalLightColorReg}else{o=s.getFreeFragmentVectorTemp();s.addFragmentTempUsages(o,1)}n+="dp3 "+o+".x, "+i+", "+a.normalFragment+"\n"+"max "+o+".w, "+o+".x, "+a.commons+".y\n";if(e.usesLightFallOff)n+="mul "+o+".w, "+o+".w, "+i+".w\n";if(this._iModulateMethod!=null)n+=this._iModulateMethod(e,t,o,s,a);n+="mul "+o+", "+o+".w, "+r+"\n";if(!this._pIsFirstLight){n+="add "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+", "+o+"\n";s.removeFragmentTempUsage(o)}this._pIsFirstLight=false;return n};t.prototype.iGetFragmentCodePerProbe=function(e,t,i,r,s,a){var n="";var o;if(this._pIsFirstLight){o=this._pTotalLightColorReg}else{o=s.getFreeFragmentVectorTemp();s.addFragmentTempUsages(o,1)}n+="tex "+o+", "+a.normalFragment+", "+i+" <cube,linear,miplinear>\n"+"mul "+o+".xyz, "+o+".xyz, "+r+"\n";if(this._iModulateMethod!=null)n+=this._iModulateMethod(e,t,o,s,a);if(!this._pIsFirstLight){n+="add "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+", "+o+"\n";s.removeFragmentTempUsage(o)}this._pIsFirstLight=false;return n};t.prototype.iGetFragmentPostLightingCode=function(e,t,i,r,a){var n="";var o;var h;if(a.shadowTarget)n+=this.pApplyShadow(e,t,r,a);o=r.getFreeFragmentVectorTemp();r.addFragmentTempUsages(o,1);var l=r.getFreeFragmentConstant();t.fragmentConstantsIndex=l.index*4;if(this._pUseTexture){this._pDiffuseInputRegister=r.getFreeTextureReg();t.texturesIndex=this._pDiffuseInputRegister.index;n+=s.getTex2DSampleCode(o,a,this._pDiffuseInputRegister,this._texture,e.useSmoothTextures,e.repeatTextures,e.useMipmapping)}else{this._pDiffuseInputRegister=r.getFreeFragmentConstant();n+="mov "+o+", "+this._pDiffuseInputRegister+"\n"}n+="sat "+this._pTotalLightColorReg+", "+this._pTotalLightColorReg+"\n"+"mul "+o+".xyz, "+o+", "+this._pTotalLightColorReg+"\n";if(this._multiply){n+="add "+o+".xyz, "+o+", "+l+"\n"+"mul "+i+".xyz, "+i+", "+o+"\n"}else{n+="mul "+i+".xyz, "+i+", "+l+"\n"+"mul "+this._pTotalLightColorReg+".xyz, "+i+", "+this._pTotalLightColorReg+"\n"+"sub "+i+".xyz, "+i+", "+this._pTotalLightColorReg+"\n"+"add "+i+".xyz, "+i+", "+o+"\n"}r.removeFragmentTempUsage(this._pTotalLightColorReg);r.removeFragmentTempUsage(o);return n};t.prototype.pApplyShadow=function(e,t,i,r){return"mul "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+", "+r.shadowTarget+".w\n"};t.prototype.iActivate=function(e,t,i){if(this._pUseTexture){i.activateTexture(t.texturesIndex,this._texture,e.repeatTextures,e.useSmoothTextures,e.useMipmapping)}else{var r=t.fragmentConstantsIndex;
var s=e.fragmentConstantData;s[r+4]=this._diffuseR;s[r+5]=this._diffuseG;s[r+6]=this._diffuseB;s[r+7]=1}};t.prototype.updateDiffuse=function(){this._diffuseR=(this._diffuseColor>>16&255)/255;this._diffuseG=(this._diffuseColor>>8&255)/255;this._diffuseB=(this._diffuseColor&255)/255};t.prototype.updateAmbient=function(){this._ambientR=(this._ambientColor>>16&255)/255;this._ambientG=(this._ambientColor>>8&255)/255;this._ambientB=(this._ambientColor&255)/255};t.prototype.iSetRenderState=function(e,t,i,r,s){if(e.numLights>0){var a=t.fragmentConstantsIndex;var n=e.fragmentConstantData;n[a]=e.ambientR*this._ambientR;n[a+1]=e.ambientG*this._ambientG;n[a+2]=e.ambientB*this._ambientB;n[a+3]=1}};return t}(a);t.exports=n},{"awayjs-methodmaterials/lib/methods/LightingMethodBase":137,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":254}],135:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-methodmaterials/lib/methods/EffectMethodBase");var a=function(e){r(t,e);function t(){e.call(this)}Object.defineProperty(t.prototype,"colorTransform",{get:function(){return this._colorTransform},set:function(e){this._colorTransform=e},enumerable:true,configurable:true});t.prototype.iGetFragmentCode=function(e,t,i,r,s){var a="";var n=r.getFreeFragmentConstant();var o=r.getFreeFragmentConstant();t.fragmentConstantsIndex=n.index*4;a+="mul "+i+", "+i+", "+n+"\n"+"add "+i+", "+i+", "+o+"\n";return a};t.prototype.iActivate=function(e,t,i){var r=1/255;var s=t.fragmentConstantsIndex;var a=e.fragmentConstantData;a[s]=this._colorTransform.redMultiplier;a[s+1]=this._colorTransform.greenMultiplier;a[s+2]=this._colorTransform.blueMultiplier;a[s+3]=this._colorTransform.alphaMultiplier;a[s+4]=this._colorTransform.redOffset*r;a[s+5]=this._colorTransform.greenOffset*r;a[s+6]=this._colorTransform.blueOffset*r;a[s+7]=this._colorTransform.alphaOffset*r};return t}(s);t.exports=a},{"awayjs-methodmaterials/lib/methods/EffectMethodBase":136}],136:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/library/AssetType");var a=e("awayjs-core/lib/errors/AbstractMethodError");var n=e("awayjs-methodmaterials/lib/methods/ShadingMethodBase");var o=function(e){r(t,e);function t(){e.call(this)}Object.defineProperty(t.prototype,"assetType",{get:function(){return s.EFFECTS_METHOD},enumerable:true,configurable:true});t.prototype.iGetFragmentCode=function(e,t,i,r,s){throw new a;return""};return t}(n);t.exports=o},{"awayjs-core/lib/errors/AbstractMethodError":147,"awayjs-core/lib/library/AssetType":156,"awayjs-methodmaterials/lib/methods/ShadingMethodBase":139}],137:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-methodmaterials/lib/methods/ShadingMethodBase");var a=function(e){r(t,e);function t(){e.call(this)}t.prototype.iGetFragmentPreLightingCode=function(e,t,i,r){return""};t.prototype.iGetFragmentCodePerLight=function(e,t,i,r,s,a){return""};t.prototype.iGetFragmentCodePerProbe=function(e,t,i,r,s,a){return""};t.prototype.iGetFragmentPostLightingCode=function(e,t,i,r,s){return""};return t}(s);t.exports=a},{"awayjs-methodmaterials/lib/methods/ShadingMethodBase":139}],138:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-renderergl/lib/utils/ShaderCompilerHelper");var a=e("awayjs-methodmaterials/lib/methods/ShadingMethodBase");var n=function(e){r(t,e);function t(){e.call(this)}t.prototype.iIsUsed=function(e){if(!this._useTexture||!e.normalDependencies)return false;return true};t.prototype.iInitVO=function(e,t){t.needsUV=this._useTexture};t.prototype.iOutputsTangentNormals=function(){return true};t.prototype.copyFrom=function(e){var t=e;var i=e;if(i.normalMap!=null)this.normalMap=i.normalMap};Object.defineProperty(t.prototype,"normalMap",{get:function(){return this._texture},set:function(e){var t=e!=null;if(t!=this._useTexture||e&&this._texture&&e.format!=this._texture.format)this.iInvalidateShaderProgram();this._useTexture=t;this._texture=e},enumerable:true,configurable:true});t.prototype.iCleanCompilationData=function(){e.prototype.iCleanCompilationData.call(this);this._pNormalTextureRegister=null};t.prototype.dispose=function(){if(this._texture)this._texture=null};t.prototype.iActivate=function(e,t,i){if(t.texturesIndex>=0)i.activateTexture(t.texturesIndex,this._texture,e.repeatTextures,e.useSmoothTextures,e.useMipmapping)};t.prototype.iGetFragmentCode=function(e,t,i,r,a){this._pNormalTextureRegister=r.getFreeTextureReg();t.texturesIndex=this._pNormalTextureRegister.index;return s.getTex2DSampleCode(i,a,this._pNormalTextureRegister,this._texture,e.useSmoothTextures,e.repeatTextures,e.useMipmapping)+"sub "+i+".xyz, "+i+".xyz, "+a.commons+".xxx\n"+"nrm "+i+".xyz, "+i+"\n"};return t}(a);t.exports=n},{"awayjs-methodmaterials/lib/methods/ShadingMethodBase":139,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":254}],139:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/library/NamedAssetBase");var a=e("awayjs-renderergl/lib/events/ShadingMethodEvent");var n=function(e){r(t,e);function t(){e.call(this)}t.prototype.iIsUsed=function(e){return true};t.prototype.iInitVO=function(e,t){};t.prototype.iInitConstants=function(e,t){};t.prototype.iUsesTangentSpace=function(){return true};t.prototype.dispose=function(){};t.prototype.iReset=function(){this.iCleanCompilationData()};t.prototype.iCleanCompilationData=function(){};t.prototype.iGetVertexCode=function(e,t,i,r){return""};t.prototype.iGetFragmentCode=function(e,t,i,r,s){return null};t.prototype.iActivate=function(e,t,i){};t.prototype.iSetRenderState=function(e,t,i,r,s){};t.prototype.iDeactivate=function(e,t,i){};t.prototype.iInvalidateShaderProgram=function(){this.dispatchEvent(new a(a.SHADER_INVALIDATED))};t.prototype.copyFrom=function(e){};return t}(s);t.exports=n},{"awayjs-core/lib/library/NamedAssetBase":157,"awayjs-renderergl/lib/events/ShadingMethodEvent":241}],140:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-renderergl/lib/utils/ShaderCompilerHelper");var a=e("awayjs-methodmaterials/lib/methods/LightingMethodBase");var n=function(e){r(t,e);function t(){e.call(this);this._gloss=50;this._specular=1;this._specularColor=16777215;this._iSpecularR=1;this._iSpecularG=1;this._iSpecularB=1}t.prototype.iIsUsed=function(e){if(!e.numLights)return false;return true};t.prototype.iInitVO=function(e,t){t.needsUV=this._pUseTexture;t.needsNormals=e.numLights>0;t.needsView=e.numLights>0};Object.defineProperty(t.prototype,"gloss",{get:function(){return this._gloss},set:function(e){this._gloss=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"specular",{get:function(){return this._specular},set:function(e){if(e==this._specular)return;this._specular=e;this.updateSpecular()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"specularColor",{get:function(){return this._specularColor},set:function(e){if(this._specularColor==e)return;if(this._specularColor==0||e==0)this.iInvalidateShaderProgram();this._specularColor=e;this.updateSpecular()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){var t=e!=null;if(t!=this._pUseTexture||e&&this._texture&&e.format!=this._texture.format)this.iInvalidateShaderProgram();this._pUseTexture=t;this._texture=e},enumerable:true,configurable:true});t.prototype.copyFrom=function(e){var t=e;var i=e;var r=i;this.texture=r.texture;this.specular=r.specular;this.specularColor=r.specularColor;this.gloss=r.gloss};t.prototype.iCleanCompilationData=function(){e.prototype.iCleanCompilationData.call(this);this._pTotalLightColorReg=null;this._pSpecularTextureRegister=null;this._pSpecularTexData=null;this._pSpecularDataRegister=null};t.prototype.iGetFragmentPreLightingCode=function(e,t,i,r){var a="";this._pIsFirstLight=true;this._pSpecularDataRegister=i.getFreeFragmentConstant();t.fragmentConstantsIndex=this._pSpecularDataRegister.index*4;if(this._pUseTexture){this._pSpecularTexData=i.getFreeFragmentVectorTemp();i.addFragmentTempUsages(this._pSpecularTexData,1);this._pSpecularTextureRegister=i.getFreeTextureReg();t.texturesIndex=this._pSpecularTextureRegister.index;a=s.getTex2DSampleCode(this._pSpecularTexData,r,this._pSpecularTextureRegister,this._texture,e.useSmoothTextures,e.repeatTextures,e.useMipmapping)}else{this._pSpecularTextureRegister=null}this._pTotalLightColorReg=i.getFreeFragmentVectorTemp();i.addFragmentTempUsages(this._pTotalLightColorReg,1);return a};t.prototype.iGetFragmentCodePerLight=function(e,t,i,r,s,a){var n="";var o;if(this._pIsFirstLight){o=this._pTotalLightColorReg}else{o=s.getFreeFragmentVectorTemp();s.addFragmentTempUsages(o,1)}var h=a.viewDirFragment;var l=a.normalFragment;n+="add "+o+", "+i+", "+h+"\n"+"nrm "+o+".xyz, "+o+"\n"+"dp3 "+o+".w, "+l+", "+o+"\n"+"sat "+o+".w, "+o+".w\n";if(this._pUseTexture){n+="mul "+this._pSpecularTexData+".w, "+this._pSpecularTexData+".y, "+this._pSpecularDataRegister+".w\n"+"pow "+o+".w, "+o+".w, "+this._pSpecularTexData+".w\n"}else{n+="pow "+o+".w, "+o+".w, "+this._pSpecularDataRegister+".w\n"}if(e.usesLightFallOff)n+="mul "+o+".w, "+o+".w, "+i+".w\n";if(this._iModulateMethod!=null)n+=this._iModulateMethod(e,t,o,s,a);n+="mul "+o+".xyz, "+r+", "+o+".w\n";if(!this._pIsFirstLight){n+="add "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+", "+o+"\n";s.removeFragmentTempUsage(o)}this._pIsFirstLight=false;return n};t.prototype.iGetFragmentCodePerProbe=function(e,t,i,r,s,a){var n="";var o;if(this._pIsFirstLight){o=this._pTotalLightColorReg}else{o=s.getFreeFragmentVectorTemp();s.addFragmentTempUsages(o,1)}var h=a.normalFragment;var l=a.viewDirFragment;n+="dp3 "+o+".w, "+h+", "+l+"\n"+"add "+o+".w, "+o+".w, "+o+".w\n"+"mul "+o+", "+o+".w, "+h+"\n"+"sub "+o+", "+o+", "+l+"\n"+"tex "+o+", "+o+", "+i+" <cube,"+(e.useSmoothTextures?"linear":"nearest")+",miplinear>\n"+"mul "+o+".xyz, "+o+", "+r+"\n";if(this._iModulateMethod!=null)n+=this._iModulateMethod(e,t,o,s,a);if(!this._pIsFirstLight){n+="add "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+", "+o+"\n";s.removeFragmentTempUsage(o)}this._pIsFirstLight=false;return n};t.prototype.iGetFragmentPostLightingCode=function(e,t,i,r,s){var a="";if(s.shadowTarget)a+="mul "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+", "+s.shadowTarget+".w\n";if(this._pUseTexture){a+="mul "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+", "+this._pSpecularTexData+".x\n";r.removeFragmentTempUsage(this._pSpecularTexData)}a+="mul "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+", "+this._pSpecularDataRegister+"\n"+"add "+i+".xyz, "+i+", "+this._pTotalLightColorReg+"\n";r.removeFragmentTempUsage(this._pTotalLightColorReg);return a};t.prototype.iActivate=function(e,t,i){if(t.texturesIndex>=0)i.activateTexture(t.texturesIndex,this._texture,e.repeatTextures,e.useSmoothTextures,e.useMipmapping);var r=t.fragmentConstantsIndex;var s=e.fragmentConstantData;s[r]=this._iSpecularR;s[r+1]=this._iSpecularG;s[r+2]=this._iSpecularB;s[r+3]=this._gloss};t.prototype.updateSpecular=function(){this._iSpecularR=(this._specularColor>>16&255)/255*this._specular;this._iSpecularG=(this._specularColor>>8&255)/255*this._specular;this._iSpecularB=(this._specularColor&255)/255*this._specular};return t}(a);t.exports=n},{"awayjs-methodmaterials/lib/methods/LightingMethodBase":137,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":254}],141:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/events/Event");var a=e("awayjs-display/lib/materials/LightSources");var n=e("awayjs-renderergl/lib/compilation/ShaderLightingObject");var o=e("awayjs-renderergl/lib/events/ShadingMethodEvent");var h=e("awayjs-renderergl/lib/compilation/ShaderObjectBase");var l=e("awayjs-renderergl/lib/passes/RenderPassBase");var u=e("awayjs-methodmaterials/lib/data/MethodVO");var p=e("awayjs-methodmaterials/lib/methods/EffectColorTransformMethod");var c=e("awayjs-methodmaterials/lib/passes/MethodPassMode");var d=function(e){r(t,e);function t(t,i,r,s,a){var n=this;e.call(this,i,r,s,a);this._maxLights=3;this._mode=3;this._includeCasters=true;this._iMethodVOs=new Array;this._numEffectDependencies=0;this.numDirectionalLights=0;this.numPointLights=0;this.numLightProbes=0;this.pointLightsOffset=0;this.directionalLightsOffset=0;this.lightProbesOffset=0;this._mode=t;this._material=r;this._onLightsChangeDelegate=function(e){return n.onLightsChange(e)};this._onMethodInvalidatedDelegate=function(e){return n.onMethodInvalidated(e)};this.lightPicker=r.lightPicker;if(this._shader==null)this._updateShader()}Object.defineProperty(t.prototype,"mode",{get:function(){return this._mode},set:function(e){if(this._mode==e)return;this._mode=e;this._updateLights()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"includeCasters",{get:function(){return this._includeCasters},set:function(e){if(this._includeCasters==e)return;this._includeCasters=e;this._updateLights()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lightPicker",{get:function(){return this._lightPicker},set:function(e){if(this._lightPicker)this._lightPicker.removeEventListener(s.CHANGE,this._onLightsChangeDelegate);this._lightPicker=e;if(this._lightPicker)this._lightPicker.addEventListener(s.CHANGE,this._onLightsChangeDelegate);this._updateLights()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"enableLightFallOff",{get:function(){return this._material.enableLightFallOff},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"diffuseLightSources",{get:function(){return this._material.diffuseLightSources},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"specularLightSources",{get:function(){return this._material.specularLightSources},enumerable:true,configurable:true});t.prototype._updateShader=function(){if((this.numDirectionalLights||this.numPointLights||this.numLightProbes)&&!(this._shader instanceof n)){if(this._shader!=null)this._shader.dispose();this._shader=new n(this._renderableClass,this,this._stage)}else if(!(this._shader instanceof h)){if(this._shader!=null)this._shader.dispose();this._shader=new h(this._renderableClass,this,this._stage)}};t.prototype._iInitConstantData=function(t){e.prototype._iInitConstantData.call(this,t);var i=this._iMethodVOs.length;for(var r=0;r<i;++r)this._iMethodVOs[r].method.iInitConstants(t,this._iMethodVOs[r])};Object.defineProperty(t.prototype,"colorTransform",{get:function(){return this.colorTransformMethod?this.colorTransformMethod.colorTransform:null},set:function(e){if(e){if(this.colorTransformMethod==null)this.colorTransformMethod=new p;this.colorTransformMethod.colorTransform=e}else if(!e){if(this.colorTransformMethod)this.colorTransformMethod=null}},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"colorTransformMethod",{get:function(){return this._iColorTransformMethodVO?this._iColorTransformMethodVO.method:null},set:function(e){if(this._iColorTransformMethodVO&&this._iColorTransformMethodVO.method==e)return;if(this._iColorTransformMethodVO){this._removeDependency(this._iColorTransformMethodVO);this._iColorTransformMethodVO=null}if(e){this._iColorTransformMethodVO=new u(e);this._addDependency(this._iColorTransformMethodVO)}},enumerable:true,configurable:true});t.prototype._removeDependency=function(e,t){if(t===void 0){t=false}var i=this._iMethodVOs.indexOf(e);if(!t)this._numEffectDependencies--;e.method.removeEventListener(o.SHADER_INVALIDATED,this._onMethodInvalidatedDelegate);this._iMethodVOs.splice(i,1);this.invalidatePass()};t.prototype._addDependency=function(e,t,i){if(t===void 0){t=false}if(i===void 0){i=-1}e.method.addEventListener(o.SHADER_INVALIDATED,this._onMethodInvalidatedDelegate);if(t){if(i!=-1)this._iMethodVOs.splice(i+this._iMethodVOs.length-this._numEffectDependencies,0,e);else this._iMethodVOs.push(e);this._numEffectDependencies++}else{this._iMethodVOs.splice(this._iMethodVOs.length-this._numEffectDependencies,0,e)}this.invalidatePass()};t.prototype.addEffectMethod=function(e){this._addDependency(new u(e),true)};Object.defineProperty(t.prototype,"numEffectMethods",{get:function(){return this._numEffectDependencies},enumerable:true,configurable:true});t.prototype.hasEffectMethod=function(e){return this.getDependencyForMethod(e)!=null};t.prototype.getEffectMethodAt=function(e){if(e<0||e>this._numEffectDependencies-1)return null;return this._iMethodVOs[e+this._iMethodVOs.length-this._numEffectDependencies].method};t.prototype.addEffectMethodAt=function(e,t){this._addDependency(new u(e),true,t)};t.prototype.removeEffectMethod=function(e){var t=this.getDependencyForMethod(e);if(t!=null)this._removeDependency(t,true)};t.prototype.removeEffectMethodAt=function(e){if(e<0||e>this._numEffectDependencies-1)return;var t=this._iMethodVOs[e+this._iMethodVOs.length-this._numEffectDependencies];if(t!=null)this._removeDependency(t,true)};t.prototype.getDependencyForMethod=function(e){var t=this._iMethodVOs.length;for(var i=0;i<t;++i)if(this._iMethodVOs[i].method==e)return this._iMethodVOs[i];return null};Object.defineProperty(t.prototype,"normalMethod",{get:function(){return this._iNormalMethodVO?this._iNormalMethodVO.method:null},set:function(e){if(this._iNormalMethodVO&&this._iNormalMethodVO.method==e)return;if(this._iNormalMethodVO){this._removeDependency(this._iNormalMethodVO);this._iNormalMethodVO=null}if(e){this._iNormalMethodVO=new u(e);this._addDependency(this._iNormalMethodVO)}},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"ambientMethod",{get:function(){return this._iAmbientMethodVO?this._iAmbientMethodVO.method:null},set:function(e){if(this._iAmbientMethodVO&&this._iAmbientMethodVO.method==e)return;if(this._iAmbientMethodVO){this._removeDependency(this._iAmbientMethodVO);this._iAmbientMethodVO=null}if(e){this._iAmbientMethodVO=new u(e);this._addDependency(this._iAmbientMethodVO)}},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"shadowMethod",{get:function(){return this._iShadowMethodVO?this._iShadowMethodVO.method:null},set:function(e){if(this._iShadowMethodVO&&this._iShadowMethodVO.method==e)return;if(this._iShadowMethodVO){this._removeDependency(this._iShadowMethodVO);this._iShadowMethodVO=null}if(e){this._iShadowMethodVO=new u(e);this._addDependency(this._iShadowMethodVO)}},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"diffuseMethod",{get:function(){return this._iDiffuseMethodVO?this._iDiffuseMethodVO.method:null},set:function(e){if(this._iDiffuseMethodVO&&this._iDiffuseMethodVO.method==e)return;if(this._iDiffuseMethodVO){this._removeDependency(this._iDiffuseMethodVO);this._iDiffuseMethodVO=null}if(e){this._iDiffuseMethodVO=new u(e);this._addDependency(this._iDiffuseMethodVO)}},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"specularMethod",{get:function(){return this._iSpecularMethodVO?this._iSpecularMethodVO.method:null},set:function(e){if(this._iSpecularMethodVO&&this._iSpecularMethodVO.method==e)return;if(this._iSpecularMethodVO){this._removeDependency(this._iSpecularMethodVO);this._iSpecularMethodVO=null}if(e){this._iSpecularMethodVO=new u(e);this._addDependency(this._iSpecularMethodVO)}},enumerable:true,configurable:true});t.prototype.dispose=function(){e.prototype.dispose.call(this);if(this._lightPicker)this._lightPicker.removeEventListener(s.CHANGE,this._onLightsChangeDelegate);while(this._iMethodVOs.length)this._removeDependency(this._iMethodVOs[0]);this._iMethodVOs=null};t.prototype.onMethodInvalidated=function(e){this.invalidatePass()};t.prototype._iActivate=function(t){e.prototype._iActivate.call(this,t);var i;var r=this._iMethodVOs.length;for(var s=0;s<r;++s){i=this._iMethodVOs[s];if(i.useMethod)i.method.iActivate(this._shader,i,this._stage)}};t.prototype._iRender=function(t,i,r){e.prototype._iRender.call(this,t,i,r);var s;var a=this._iMethodVOs.length;for(var n=0;n<a;++n){s=this._iMethodVOs[n];if(s.useMethod)s.method.iSetRenderState(this._shader,s,t,this._stage,i)}};t.prototype._iDeactivate=function(){e.prototype._iDeactivate.call(this);var t;var i=this._iMethodVOs.length;for(var r=0;r<i;++r){t=this._iMethodVOs[r];if(t.useMethod)t.method.iDeactivate(this._shader,t,this._stage)}};t.prototype._iIncludeDependencies=function(t){e.prototype._iIncludeDependencies.call(this,t);t.usesFragmentAnimation=Boolean(this._mode==c.SUPER_SHADER);if(!t.usesTangentSpace&&this.numPointLights>0&&t.usesLights){t.globalPosDependencies++;if(Boolean(this._mode&c.EFFECTS))t.usesGlobalPosFragment=true}var i;var r=this._iMethodVOs.length;for(i=0;i<r;++i)this.setupAndCountDependencies(t,this._iMethodVOs[i]);for(i=0;i<r;++i)this._iMethodVOs[i].useMethod=this._iMethodVOs[i].method.iIsUsed(t)};t.prototype.setupAndCountDependencies=function(e,t){t.reset();t.method.iInitVO(e,t);if(t.needsProjection)e.projectionDependencies++;if(t.needsGlobalVertexPos){e.globalPosDependencies++;if(t.needsGlobalFragmentPos)e.usesGlobalPosFragment=true}else if(t.needsGlobalFragmentPos){e.globalPosDependencies++;e.usesGlobalPosFragment=true}if(t.needsNormals)e.normalDependencies++;if(t.needsTangents)e.tangentDependencies++;if(t.needsView)e.viewDirDependencies++;if(t.needsUV)e.uvDependencies++;if(t.needsSecondaryUV)e.secondaryUVDependencies++};t.prototype._iGetPreLightingVertexCode=function(e,t,i){var r="";if(this._iAmbientMethodVO&&this._iAmbientMethodVO.useMethod)r+=this._iAmbientMethodVO.method.iGetVertexCode(e,this._iAmbientMethodVO,t,i);if(this._iDiffuseMethodVO&&this._iDiffuseMethodVO.useMethod)r+=this._iDiffuseMethodVO.method.iGetVertexCode(e,this._iDiffuseMethodVO,t,i);if(this._iSpecularMethodVO&&this._iSpecularMethodVO.useMethod)r+=this._iSpecularMethodVO.method.iGetVertexCode(e,this._iSpecularMethodVO,t,i);return r};t.prototype._iGetPreLightingFragmentCode=function(e,t,i){var r="";if(this._iAmbientMethodVO&&this._iAmbientMethodVO.useMethod){r+=this._iAmbientMethodVO.method.iGetFragmentCode(e,this._iAmbientMethodVO,i.shadedTarget,t,i);if(this._iAmbientMethodVO.needsNormals)t.removeFragmentTempUsage(i.normalFragment);if(this._iAmbientMethodVO.needsView)t.removeFragmentTempUsage(i.viewDirFragment)}if(this._iDiffuseMethodVO&&this._iDiffuseMethodVO.useMethod)r+=this._iDiffuseMethodVO.method.iGetFragmentPreLightingCode(e,this._iDiffuseMethodVO,t,i);if(this._iSpecularMethodVO&&this._iSpecularMethodVO.useMethod)r+=this._iSpecularMethodVO.method.iGetFragmentPreLightingCode(e,this._iSpecularMethodVO,t,i);return r};t.prototype._iGetPerLightDiffuseFragmentCode=function(e,t,i,r,s){return this._iDiffuseMethodVO.method.iGetFragmentCodePerLight(e,this._iDiffuseMethodVO,t,i,r,s)};t.prototype._iGetPerLightSpecularFragmentCode=function(e,t,i,r,s){return this._iSpecularMethodVO.method.iGetFragmentCodePerLight(e,this._iSpecularMethodVO,t,i,r,s)};t.prototype._iGetPerProbeDiffuseFragmentCode=function(e,t,i,r,s){return this._iDiffuseMethodVO.method.iGetFragmentCodePerProbe(e,this._iDiffuseMethodVO,t,i,r,s)};t.prototype._iGetPerProbeSpecularFragmentCode=function(e,t,i,r,s){return this._iSpecularMethodVO.method.iGetFragmentCodePerProbe(e,this._iSpecularMethodVO,t,i,r,s)};t.prototype._iGetPostLightingVertexCode=function(e,t,i){var r="";if(this._iShadowMethodVO)r+=this._iShadowMethodVO.method.iGetVertexCode(e,this._iShadowMethodVO,t,i);return r};t.prototype._iGetPostLightingFragmentCode=function(e,t,i){var r="";if(e.useAlphaPremultiplied&&this._pEnableBlending){r+="add "+i.shadedTarget+".w, "+i.shadedTarget+".w, "+i.commons+".z\n"+"div "+i.shadedTarget+".xyz, "+i.shadedTarget+", "+i.shadedTarget+".w\n"+"sub "+i.shadedTarget+".w, "+i.shadedTarget+".w, "+i.commons+".z\n"+"sat "+i.shadedTarget+".xyz, "+i.shadedTarget+"\n"}if(this._iShadowMethodVO)r+=this._iShadowMethodVO.method.iGetFragmentCode(e,this._iShadowMethodVO,i.shadowTarget,t,i);if(this._iDiffuseMethodVO&&this._iDiffuseMethodVO.useMethod){r+=this._iDiffuseMethodVO.method.iGetFragmentPostLightingCode(e,this._iDiffuseMethodVO,i.shadedTarget,t,i);if(this._iDiffuseMethodVO.needsNormals)t.removeFragmentTempUsage(i.normalFragment);if(this._iDiffuseMethodVO.needsView)t.removeFragmentTempUsage(i.viewDirFragment)}if(this._iSpecularMethodVO&&this._iSpecularMethodVO.useMethod){r+=this._iSpecularMethodVO.method.iGetFragmentPostLightingCode(e,this._iSpecularMethodVO,i.shadedTarget,t,i);if(this._iSpecularMethodVO.needsNormals)t.removeFragmentTempUsage(i.normalFragment);if(this._iSpecularMethodVO.needsView)t.removeFragmentTempUsage(i.viewDirFragment)}if(this._iShadowMethodVO)t.removeFragmentTempUsage(i.shadowTarget);return r};t.prototype._pUsesTangentSpace=function(e){if(e.usesProbes)return false;var t;var i=this._iMethodVOs.length;for(var r=0;r<i;++r){t=this._iMethodVOs[r];if(t.useMethod&&!t.method.iUsesTangentSpace())return false}return true};t.prototype._pOutputsTangentNormals=function(e){return this._iNormalMethodVO.method.iOutputsTangentNormals()};t.prototype._pOutputsNormals=function(e){return this._iNormalMethodVO&&this._iNormalMethodVO.useMethod};t.prototype._iGetNormalVertexCode=function(e,t,i){return this._iNormalMethodVO.method.iGetVertexCode(e,this._iNormalMethodVO,t,i)};t.prototype._iGetNormalFragmentCode=function(e,t,i){var r=this._iNormalMethodVO.method.iGetFragmentCode(e,this._iNormalMethodVO,i.normalFragment,t,i);if(this._iNormalMethodVO.needsView)t.removeFragmentTempUsage(i.viewDirFragment);if(this._iNormalMethodVO.needsGlobalFragmentPos||this._iNormalMethodVO.needsGlobalVertexPos)t.removeVertexTempUsage(i.globalPositionVertex);return r};t.prototype._iGetVertexCode=function(e,t,i){var r="";var s;var a=this._iMethodVOs.length;for(var n=a-this._numEffectDependencies;n<a;n++){s=this._iMethodVOs[n];if(s.useMethod){r+=s.method.iGetVertexCode(e,s,t,i);if(s.needsGlobalVertexPos||s.needsGlobalFragmentPos)t.removeVertexTempUsage(i.globalPositionVertex)}}if(this._iColorTransformMethodVO&&this._iColorTransformMethodVO.useMethod)r+=this._iColorTransformMethodVO.method.iGetVertexCode(e,this._iColorTransformMethodVO,t,i);return r};t.prototype._iGetFragmentCode=function(e,t,i){var r="";var s;if(this.preserveAlpha&&this._numEffectDependencies>0){s=t.getFreeFragmentSingleTemp();t.addFragmentTempUsages(s,1);r+="mov "+s+", "+i.shadedTarget+".w\n"}var a;var n=this._iMethodVOs.length;for(var o=n-this._numEffectDependencies;o<n;o++){a=this._iMethodVOs[o];if(a.useMethod){r+=a.method.iGetFragmentCode(e,a,i.shadedTarget,t,i);if(a.needsNormals)t.removeFragmentTempUsage(i.normalFragment);if(a.needsView)t.removeFragmentTempUsage(i.viewDirFragment)}}if(this.preserveAlpha&&this._numEffectDependencies>0){r+="mov "+i.shadedTarget+".w, "+s+"\n";t.removeFragmentTempUsage(s)}if(this._iColorTransformMethodVO&&this._iColorTransformMethodVO.useMethod)r+=this._iColorTransformMethodVO.method.iGetFragmentCode(e,this._iColorTransformMethodVO,i.shadedTarget,t,i);return r};t.prototype._iUsesShadows=function(e){return Boolean(this._iShadowMethodVO&&(this._lightPicker.castingDirectionalLights.length>0||this._lightPicker.castingPointLights.length>0))};t.prototype._iUsesSpecular=function(e){return Boolean(this._iSpecularMethodVO)};t.prototype._iUsesDiffuse=function(e){return Boolean(this._iDiffuseMethodVO)};t.prototype.onLightsChange=function(e){this._updateLights()};t.prototype._updateLights=function(){var e=this.numDirectionalLights;var t=this.numPointLights;var i=this.numLightProbes;if(this._lightPicker&&this._mode&c.LIGHTING){this.numDirectionalLights=this.calculateNumDirectionalLights(this._lightPicker.numDirectionalLights);this.numPointLights=this.calculateNumPointLights(this._lightPicker.numPointLights);this.numLightProbes=this.calculateNumProbes(this._lightPicker.numLightProbes);if(this._includeCasters){this.numDirectionalLights+=this._lightPicker.numCastingDirectionalLights;this.numPointLights+=this._lightPicker.numCastingPointLights}}else{this.numDirectionalLights=0;this.numPointLights=0;this.numLightProbes=0}if(e!=this.numDirectionalLights||t!=this.numPointLights||i!=this.numLightProbes){this._updateShader();this.invalidatePass()}};t.prototype.calculateNumDirectionalLights=function(e){return Math.min(e-this.directionalLightsOffset,this._maxLights)};t.prototype.calculateNumPointLights=function(e){var t=this._maxLights-this.numDirectionalLights;return Math.min(e-this.pointLightsOffset,t)};t.prototype.calculateNumProbes=function(e){var t=0;if((this.specularLightSources&a.PROBES)!=0)++t;if((this.diffuseLightSources&a.PROBES)!=0)++t;return Math.min(e-this.lightProbesOffset,4/t|0)};return t}(l);t.exports=d},{"awayjs-core/lib/events/Event":151,"awayjs-display/lib/materials/LightSources":179,"awayjs-methodmaterials/lib/data/MethodVO":132,"awayjs-methodmaterials/lib/methods/EffectColorTransformMethod":135,"awayjs-methodmaterials/lib/passes/MethodPassMode":142,"awayjs-renderergl/lib/compilation/ShaderLightingObject":235,"awayjs-renderergl/lib/compilation/ShaderObjectBase":236,"awayjs-renderergl/lib/events/ShadingMethodEvent":241,"awayjs-renderergl/lib/passes/RenderPassBase":245}],142:[function(e,t,i){var r=function(){function e(){}e.EFFECTS=1;e.LIGHTING=2;e.SUPER_SHADER=3;return e}();t.exports=r},{}],143:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-renderergl/lib/pool/RenderablePoolBase");var a=e("awayjs-renderergl/lib/compilation/RenderObjectPool");var n=e("awayjs-methodmaterials/lib/compilation/RenderMethodMaterialObject");var o=function(e){r(t,e);function t(t,i){e.call(this,t,i);this._methodMaterialRenderObjectPool=new a(n,this._renderableClass,this._stage)}t.prototype.getMethodRenderObject=function(e){return this._methodMaterialRenderObjectPool.getItem(e)};t.getPool=function(e,i){var r=s._pools[i.stageIndex]||(s._pools[i.stageIndex]=new Object);return r[e.id]||(r[e.id]=new t(e,i))};return t}(s);t.exports=o},{"awayjs-methodmaterials/lib/compilation/RenderMethodMaterialObject":131,"awayjs-renderergl/lib/compilation/RenderObjectPool":232,"awayjs-renderergl/lib/pool/RenderablePoolBase":251}],144:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-renderergl/lib/pool/BillboardRenderable");var a=e("awayjs-renderergl/lib/pool/LineSegmentRenderable");var n=e("awayjs-renderergl/lib/pool/LineSubMeshRenderable");var o=e("awayjs-renderergl/lib/pool/TriangleSubMeshRenderable");var h=e("awayjs-renderergl/lib/pool/RendererPoolBase");var l=e("awayjs-methodmaterials/lib/pool/MethodRenderablePool");var u=function(e){r(t,e);function t(t){e.call(this,t)}t.prototype._pUpdatePool=function(){this._billboardRenderablePool=l.getPool(s,this._pStage);this._lineSegmentRenderablePool=l.getPool(a,this._pStage);this._triangleSubMeshRenderablePool=l.getPool(o,this._pStage);this._lineSubMeshRenderablePool=l.getPool(n,this._pStage)};return t}(h);t.exports=u},{"awayjs-methodmaterials/lib/pool/MethodRenderablePool":143,"awayjs-renderergl/lib/pool/BillboardRenderable":247,"awayjs-renderergl/lib/pool/LineSegmentRenderable":248,"awayjs-renderergl/lib/pool/LineSubMeshRenderable":249,"awayjs-renderergl/lib/pool/RendererPoolBase":252,"awayjs-renderergl/lib/pool/TriangleSubMeshRenderable":253}],145:[function(e,t,i){t.exports=e(2)
},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/base/BitmapData.js":2,"awayjs-core/lib/geom/Rectangle":155,"awayjs-core/lib/utils/ColorUtils":161}],146:[function(e,t,i){var r=function(){function e(){}e.ADD="add";e.ALPHA="alpha";e.DARKEN="darken";e.DIFFERENCE="difference";e.ERASE="erase";e.HARDLIGHT="hardlight";e.INVERT="invert";e.LAYER="layer";e.LIGHTEN="lighten";e.MULTIPLY="multiply";e.NORMAL="normal";e.OVERLAY="overlay";e.SCREEN="screen";e.SHADER="shader";e.SUBTRACT="subtract";return e}();t.exports=r},{}],147:[function(e,t,i){t.exports=e(3)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/AbstractMethodError.js":3,"awayjs-core/lib/errors/Error":149}],148:[function(e,t,i){t.exports=e(4)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/ArgumentError.js":4,"awayjs-core/lib/errors/Error":149}],149:[function(e,t,i){t.exports=e(5)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/Error.js":5}],150:[function(e,t,i){t.exports=e(6)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/AssetEvent.js":6,"awayjs-core/lib/events/Event":151}],151:[function(e,t,i){t.exports=e(7)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/Event.js":7}],152:[function(e,t,i){t.exports=e(8)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/EventDispatcher.js":8}],153:[function(e,t,i){t.exports=e(12)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Matrix.js":12,"awayjs-core/lib/errors/ArgumentError":148,"awayjs-core/lib/geom/Point":154}],154:[function(e,t,i){t.exports=e(13)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Point.js":13}],155:[function(e,t,i){t.exports=e(14)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Rectangle.js":14,"awayjs-core/lib/geom/Point":154}],156:[function(e,t,i){t.exports=e(15)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/AssetType.js":15}],157:[function(e,t,i){t.exports=e(16)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/NamedAssetBase.js":16,"awayjs-core/lib/errors/AbstractMethodError":147,"awayjs-core/lib/events/AssetEvent":150,"awayjs-core/lib/events/EventDispatcher":152}],158:[function(e,t,i){t.exports=e(24)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/MipmapGenerator.js":24,"awayjs-core/lib/base/BitmapData":145,"awayjs-core/lib/geom/Matrix":153,"awayjs-core/lib/geom/Rectangle":155}],159:[function(e,t,i){t.exports=e(25)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/Texture2DBase.js":25,"awayjs-core/lib/errors/AbstractMethodError":147,"awayjs-core/lib/textures/MipmapGenerator":158,"awayjs-core/lib/textures/TextureProxyBase":160}],160:[function(e,t,i){t.exports=e(26)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/TextureProxyBase.js":26,"awayjs-core/lib/library/AssetType":156,"awayjs-core/lib/library/NamedAssetBase":157}],161:[function(e,t,i){t.exports=e(29)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/ColorUtils.js":29}],162:[function(e,t,i){t.exports=e(33)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/AlignmentMode.js":33}],163:[function(e,t,i){t.exports=e(34)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/DisplayObject.js":34,"awayjs-core/lib/errors/AbstractMethodError":193,"awayjs-core/lib/geom/Box":202,"awayjs-core/lib/geom/MathConsts":204,"awayjs-core/lib/geom/Matrix3D":206,"awayjs-core/lib/geom/Matrix3DUtils":207,"awayjs-core/lib/geom/Point":211,"awayjs-core/lib/geom/Sphere":213,"awayjs-core/lib/geom/Vector3D":214,"awayjs-core/lib/library/NamedAssetBase":216,"awayjs-display/lib/base/AlignmentMode":162,"awayjs-display/lib/base/OrientationMode":165,"awayjs-display/lib/base/Transform":166,"awayjs-display/lib/events/DisplayObjectEvent":174,"awayjs-display/lib/events/SceneEvent":178,"awayjs-display/lib/pick/PickingCollisionVO":186}],164:[function(e,t,i){t.exports=e(36)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/LightBase.js":36,"awayjs-core/lib/errors/AbstractMethodError":193,"awayjs-core/lib/library/AssetType":215,"awayjs-display/lib/containers/DisplayObjectContainer":168,"awayjs-display/lib/events/LightEvent":175}],165:[function(e,t,i){t.exports=e(39)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/OrientationMode.js":39}],166:[function(e,t,i){t.exports=e(42)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/Transform.js":42,"awayjs-core/lib/geom/Matrix3D":206,"awayjs-core/lib/geom/Matrix3DUtils":207,"awayjs-core/lib/geom/Vector3D":214}],167:[function(e,t,i){t.exports=e(48)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/bounds/BoundsType.js":48}],168:[function(e,t,i){t.exports=e(50)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/containers/DisplayObjectContainer.js":50,"awayjs-core/lib/errors/ArgumentError":194,"awayjs-core/lib/errors/Error":195,"awayjs-core/lib/errors/RangeError":197,"awayjs-core/lib/library/AssetType":215,"awayjs-display/lib/base/DisplayObject":163}],169:[function(e,t,i){t.exports=e(53)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/entities/Camera.js":53,"awayjs-core/lib/events/ProjectionEvent":201,"awayjs-core/lib/geom/Matrix3D":206,"awayjs-core/lib/geom/Plane3D":209,"awayjs-core/lib/library/AssetType":215,"awayjs-core/lib/projections/PerspectiveProjection":219,"awayjs-display/lib/bounds/BoundsType":167,"awayjs-display/lib/containers/DisplayObjectContainer":168,"awayjs-display/lib/events/CameraEvent":173}],170:[function(e,t,i){t.exports=e(54)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/entities/DirectionalLight.js":54,"awayjs-core/lib/geom/Matrix3D":206,"awayjs-core/lib/geom/Vector3D":214,"awayjs-display/lib/base/LightBase":164,"awayjs-display/lib/bounds/BoundsType":167,"awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper":184}],171:[function(e,t,i){t.exports=e(55)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/entities/LightProbe.js":55,"awayjs-core/lib/errors/Error":195,"awayjs-display/lib/base/LightBase":164,"awayjs-display/lib/bounds/BoundsType":167}],172:[function(e,t,i){t.exports=e(57)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/entities/PointLight.js":57,"awayjs-core/lib/geom/Matrix3D":206,"awayjs-core/lib/geom/Vector3D":214,"awayjs-display/lib/base/LightBase":164,"awayjs-display/lib/bounds/BoundsType":167,"awayjs-display/lib/materials/shadowmappers/CubeMapShadowMapper":183}],173:[function(e,t,i){t.exports=e(58)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/CameraEvent.js":58,"awayjs-core/lib/events/Event":199}],174:[function(e,t,i){t.exports=e(59)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/DisplayObjectEvent.js":59,"awayjs-core/lib/events/Event":199}],175:[function(e,t,i){t.exports=e(61)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/LightEvent.js":61,"awayjs-core/lib/events/Event":199}],176:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/events/Event");var a=function(e){r(t,e);function t(t){e.call(this,t)}t.SIZE_CHANGED="sizeChanged";return t}(s);t.exports=a},{"awayjs-core/lib/events/Event":199}],177:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/events/Event");var a=function(e){r(t,e);function t(t,i){e.call(this,t);this._renderObjectOwner=i}Object.defineProperty(t.prototype,"renderObjectOwner",{get:function(){return this._renderObjectOwner},enumerable:true,configurable:true});t.prototype.clone=function(){return new t(this.type,this._renderObjectOwner)};t.RENDER_OBJECT_OWNER_UPDATED="renderObjectOwnerUpdated";return t}(s);t.exports=a},{"awayjs-core/lib/events/Event":199}],178:[function(e,t,i){t.exports=e(64)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/SceneEvent.js":64,"awayjs-core/lib/events/Event":199}],179:[function(e,t,i){var r=function(){function e(){}e.LIGHTS=1;e.PROBES=2;e.ALL=3;return e}();t.exports=r},{}],180:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/base/BlendMode");var a=e("awayjs-core/lib/geom/ColorTransform");var n=e("awayjs-core/lib/errors/AbstractMethodError");var o=e("awayjs-core/lib/events/Event");var h=e("awayjs-core/lib/library/AssetType");var l=e("awayjs-core/lib/library/NamedAssetBase");var u=e("awayjs-display/lib/events/MaterialEvent");var p=e("awayjs-display/lib/events/RenderableOwnerEvent");var c=function(e){r(t,e);function t(){var t=this;e.call(this);this._alphaBlending=false;this._alpha=1;this._renderObjects=new Array;this._pAlphaThreshold=0;this._pAnimateUVs=false;this._enableLightFallOff=true;this._specularLightSources=1;this._diffuseLightSources=3;this._iMaterialId=0;this._iBaseScreenPassIndex=0;this._bothSides=false;this._pBlendMode=s.NORMAL;this._mipmap=true;this._smooth=true;this._repeat=false;this._color=16777215;this._pHeight=1;this._pWidth=1;this._iMaterialId=Number(this.id);this._owners=new Array;this._onLightChangeDelegate=function(e){return t.onLightsChange(e)};this.alphaPremultiplied=false}Object.defineProperty(t.prototype,"assetType",{get:function(){return h.MATERIAL},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(e){if(e>1)e=1;else if(e<0)e=0;if(this._alpha==e)return;this._alpha=e;if(this._colorTransform==null)this._colorTransform=new a;this._colorTransform.alphaMultiplier=e;this._pInvalidateRenderObject()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"colorTransform",{get:function(){return this._colorTransform},set:function(e){this._colorTransform=e;this._pInvalidateRenderObject()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"alphaBlending",{get:function(){return this._alphaBlending},set:function(e){if(this._alphaBlending==e)return;this._alphaBlending=e;this._pInvalidateRenderObject()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"height",{get:function(){return this._pHeight},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"animationSet",{get:function(){return this._animationSet},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lightPicker",{get:function(){return this._pLightPicker},set:function(e){if(this._pLightPicker==e)return;if(this._pLightPicker)this._pLightPicker.removeEventListener(o.CHANGE,this._onLightChangeDelegate);this._pLightPicker=e;if(this._pLightPicker)this._pLightPicker.addEventListener(o.CHANGE,this._onLightChangeDelegate);this._pInvalidateRenderObject()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mipmap",{get:function(){return this._mipmap},set:function(e){if(this._mipmap==e)return;this._mipmap=e;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"smooth",{get:function(){return this._smooth},set:function(e){if(this._smooth==e)return;this._smooth=e;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"repeat",{get:function(){return this._repeat},set:function(e){if(this._repeat==e)return;this._repeat=e;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(e){if(this._color==e)return;this._color=e;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"texture",{get:function(){return this._pTexture},set:function(e){if(this._pTexture==e)return;this._pTexture=e;this._pInvalidatePasses();this._pHeight=this._pTexture.height;this._pWidth=this._pTexture.width;this._pNotifySizeChanged()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"animateUVs",{get:function(){return this._pAnimateUVs},set:function(e){if(this._pAnimateUVs==e)return;this._pAnimateUVs=e;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"enableLightFallOff",{get:function(){return this._enableLightFallOff},set:function(e){if(this._enableLightFallOff==e)return;this._enableLightFallOff=e;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"diffuseLightSources",{get:function(){return this._diffuseLightSources},set:function(e){if(this._diffuseLightSources==e)return;this._diffuseLightSources=e;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"specularLightSources",{get:function(){return this._specularLightSources},set:function(e){if(this._specularLightSources==e)return;this._specularLightSources=e;this._pInvalidatePasses()},enumerable:true,configurable:true});t.prototype.dispose=function(){var e;var t;t=this._renderObjects.length;for(e=0;e<t;e++)this._renderObjects[e].dispose();this._renderObjects=new Array};Object.defineProperty(t.prototype,"bothSides",{get:function(){return this._bothSides},set:function(e){if(this._bothSides=e)return;this._bothSides=e;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._pBlendMode},set:function(e){if(this._pBlendMode==e)return;this._pBlendMode=e;this._pInvalidateRenderObject()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"alphaPremultiplied",{get:function(){return this._alphaPremultiplied},set:function(e){if(this._alphaPremultiplied==e)return;this._alphaPremultiplied=e;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"alphaThreshold",{get:function(){return this._pAlphaThreshold},set:function(e){if(e<0)e=0;else if(e>1)e=1;if(this._pAlphaThreshold==e)return;this._pAlphaThreshold=e;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"width",{get:function(){return this._pWidth},enumerable:true,configurable:true});t.prototype.iAddOwner=function(e){this._owners.push(e);var t;var i=e.animator;if(i)t=i.animationSet;if(e.animator){if(this._animationSet&&t!=this._animationSet){throw new Error("A Material instance cannot be shared across material owners with different animation sets")}else{if(this._animationSet!=t){this._animationSet=t;this.invalidateAnimation()}}}e.dispatchEvent(new p(p.RENDER_OBJECT_OWNER_UPDATED,this))};t.prototype.iRemoveOwner=function(e){this._owners.splice(this._owners.indexOf(e),1);if(this._owners.length==0){this._animationSet=null;this.invalidateAnimation()}e.dispatchEvent(new p(p.RENDER_OBJECT_OWNER_UPDATED,this))};Object.defineProperty(t.prototype,"iOwners",{get:function(){return this._owners},enumerable:true,configurable:true});t.prototype._pInvalidatePasses=function(){var e=this._renderObjects.length;for(var t=0;t<e;t++)this._renderObjects[t].invalidatePasses()};t.prototype.invalidateAnimation=function(){var e=this._renderObjects.length;for(var t=0;t<e;t++)this._renderObjects[t].invalidateAnimation()};t.prototype._pInvalidateRenderObject=function(){var e=this._renderObjects.length;for(var t=0;t<e;t++)this._renderObjects[t].invalidateRenderObject()};t.prototype.onLightsChange=function(e){this._pInvalidateRenderObject()};t.prototype._pNotifySizeChanged=function(){if(!this._sizeChanged)this._sizeChanged=new u(u.SIZE_CHANGED);this.dispatchEvent(this._sizeChanged)};t.prototype._iAddRenderObject=function(e){this._renderObjects.push(e);return e};t.prototype._iRemoveRenderObject=function(e){this._renderObjects.splice(this._renderObjects.indexOf(e),1);return e};t.prototype.getRenderObject=function(e){throw new n};return t}(l);t.exports=c},{"awayjs-core/lib/base/BlendMode":192,"awayjs-core/lib/errors/AbstractMethodError":193,"awayjs-core/lib/events/Event":199,"awayjs-core/lib/geom/ColorTransform":203,"awayjs-core/lib/library/AssetType":215,"awayjs-core/lib/library/NamedAssetBase":216,"awayjs-display/lib/events/MaterialEvent":176,"awayjs-display/lib/events/RenderableOwnerEvent":177}],181:[function(e,t,i){t.exports=e(67)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/materials/lightpickers/LightPickerBase.js":67,"awayjs-core/lib/library/AssetType":215,"awayjs-core/lib/library/NamedAssetBase":216}],182:[function(e,t,i){t.exports=e(68)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/materials/lightpickers/StaticLightPicker.js":68,"awayjs-core/lib/events/Event":199,"awayjs-display/lib/entities/DirectionalLight":170,"awayjs-display/lib/entities/LightProbe":171,"awayjs-display/lib/entities/PointLight":172,"awayjs-display/lib/events/LightEvent":175,"awayjs-display/lib/materials/lightpickers/LightPickerBase":181}],183:[function(e,t,i){t.exports=e(69)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/materials/shadowmappers/CubeMapShadowMapper.js":69,"awayjs-core/lib/errors/PartialImplementationError":196,"awayjs-display/lib/entities/Camera":169,"awayjs-display/lib/materials/shadowmappers/ShadowMapperBase":185}],184:[function(e,t,i){t.exports=e(70)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper.js":70,"awayjs-core/lib/geom/Matrix3D":206,"awayjs-core/lib/projections/FreeMatrixProjection":218,"awayjs-display/lib/entities/Camera":169,"awayjs-display/lib/materials/shadowmappers/ShadowMapperBase":185}],185:[function(e,t,i){t.exports=e(71)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/materials/shadowmappers/ShadowMapperBase.js":71,"awayjs-core/lib/errors/AbstractMethodError":193,"awayjs-core/lib/textures/RenderTexture":222,"awayjs-display/lib/traverse/ShadowCasterCollector":190}],186:[function(e,t,i){t.exports=e(81)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/pick/PickingCollisionVO.js":81}],187:[function(e,t,i){t.exports=e(83)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/pool/EntityListItem.js":83}],188:[function(e,t,i){t.exports=e(84)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/pool/EntityListItemPool.js":84,"awayjs-display/lib/pool/EntityListItem":187}],189:[function(e,t,i){t.exports=e(91)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/traverse/CollectorBase.js":91,"awayjs-display/lib/pool/EntityListItemPool":188}],190:[function(e,t,i){t.exports=e(93)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/traverse/ShadowCasterCollector.js":93,"awayjs-display/lib/traverse/CollectorBase":189}],191:[function(e,t,i){t.exports=e(2)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/base/BitmapData.js":2,"awayjs-core/lib/geom/Rectangle":212,"awayjs-core/lib/utils/ColorUtils":225}],192:[function(e,t,i){t.exports=e(146)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-core/lib/base/BlendMode.js":146}],193:[function(e,t,i){t.exports=e(3)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/AbstractMethodError.js":3,"awayjs-core/lib/errors/Error":195}],194:[function(e,t,i){t.exports=e(4)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/ArgumentError.js":4,"awayjs-core/lib/errors/Error":195}],195:[function(e,t,i){t.exports=e(5)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/Error.js":5}],196:[function(e,t,i){t.exports=e(98)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/errors/PartialImplementationError.js":98,"awayjs-core/lib/errors/Error":195}],197:[function(e,t,i){t.exports=e(99)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/errors/RangeError.js":99,"awayjs-core/lib/errors/Error":195}],198:[function(e,t,i){t.exports=e(6)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/AssetEvent.js":6,"awayjs-core/lib/events/Event":199}],199:[function(e,t,i){t.exports=e(7)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/Event.js":7}],200:[function(e,t,i){t.exports=e(8)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/EventDispatcher.js":8}],201:[function(e,t,i){t.exports=e(103)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/events/ProjectionEvent.js":103,"awayjs-core/lib/events/Event":199}],202:[function(e,t,i){t.exports=e(104)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Box.js":104,"awayjs-core/lib/geom/Vector3D":214}],203:[function(e,t,i){var r=e("awayjs-core/lib/utils/ColorUtils");var s=function(){function e(e,t,i,r,s,a,n,o){if(e===void 0){e=1}if(t===void 0){t=1}if(i===void 0){i=1}if(r===void 0){r=1}if(s===void 0){s=0}if(a===void 0){a=0}if(n===void 0){n=0}if(o===void 0){o=0}this.redMultiplier=e;this.greenMultiplier=t;this.blueMultiplier=i;this.alphaMultiplier=r;this.redOffset=s;this.greenOffset=a;this.blueOffset=n;this.alphaOffset=o}Object.defineProperty(e.prototype,"color",{get:function(){return this.redOffset<<16|this.greenOffset<<8|this.blueOffset},set:function(e){var t=r.float32ColorToARGB(e);this.redOffset=t[1];this.greenOffset=t[2];this.blueOffset=t[3];this.redMultiplier=0;this.greenMultiplier=0;this.blueMultiplier=0},enumerable:true,configurable:true});e.prototype.concat=function(e){this.redMultiplier+=e.redMultiplier;this.greenMultiplier+=e.greenMultiplier;this.blueMultiplier+=e.blueMultiplier;this.alphaMultiplier+=e.alphaMultiplier};return e}();t.exports=s},{"awayjs-core/lib/utils/ColorUtils":225}],204:[function(e,t,i){t.exports=e(105)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/MathConsts.js":105}],205:[function(e,t,i){t.exports=e(12)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Matrix.js":12,"awayjs-core/lib/errors/ArgumentError":194,"awayjs-core/lib/geom/Point":211}],206:[function(e,t,i){t.exports=e(107)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Matrix3D.js":107,"awayjs-core/lib/errors/ArgumentError":194,"awayjs-core/lib/geom/Orientation3D":208,"awayjs-core/lib/geom/Vector3D":214}],207:[function(e,t,i){t.exports=e(108)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Matrix3DUtils.js":108,"awayjs-core/lib/geom/Matrix3D":206,"awayjs-core/lib/geom/Vector3D":214}],208:[function(e,t,i){t.exports=e(109)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Orientation3D.js":109}],209:[function(e,t,i){t.exports=e(110)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Plane3D.js":110,"awayjs-core/lib/geom/PlaneClassification":210}],210:[function(e,t,i){t.exports=e(111)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/PlaneClassification.js":111}],211:[function(e,t,i){t.exports=e(13)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Point.js":13}],212:[function(e,t,i){t.exports=e(14)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Rectangle.js":14,"awayjs-core/lib/geom/Point":211}],213:[function(e,t,i){t.exports=e(114)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Sphere.js":114}],214:[function(e,t,i){t.exports=e(115)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Vector3D.js":115}],215:[function(e,t,i){t.exports=e(15)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/AssetType.js":15}],216:[function(e,t,i){t.exports=e(16)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/NamedAssetBase.js":16,"awayjs-core/lib/errors/AbstractMethodError":193,"awayjs-core/lib/events/AssetEvent":198,"awayjs-core/lib/events/EventDispatcher":200}],217:[function(e,t,i){t.exports=e(118)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/projections/CoordinateSystem.js":118}],218:[function(e,t,i){t.exports=e(119)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/projections/FreeMatrixProjection.js":119,"awayjs-core/lib/projections/PerspectiveProjection":219,"awayjs-core/lib/projections/ProjectionBase":220}],219:[function(e,t,i){t.exports=e(120)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/projections/PerspectiveProjection.js":120,"awayjs-core/lib/geom/Vector3D":214,"awayjs-core/lib/projections/CoordinateSystem":217,"awayjs-core/lib/projections/ProjectionBase":220}],220:[function(e,t,i){t.exports=e(121)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/projections/ProjectionBase.js":121,"awayjs-core/lib/errors/AbstractMethodError":193,"awayjs-core/lib/events/EventDispatcher":200,"awayjs-core/lib/events/ProjectionEvent":201,"awayjs-core/lib/geom/Matrix3D":206,"awayjs-core/lib/geom/Rectangle":212}],221:[function(e,t,i){t.exports=e(24)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/MipmapGenerator.js":24,"awayjs-core/lib/base/BitmapData":191,"awayjs-core/lib/geom/Matrix":205,"awayjs-core/lib/geom/Rectangle":212}],222:[function(e,t,i){t.exports=e(123)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/textures/RenderTexture.js":123,"awayjs-core/lib/errors/Error":195,"awayjs-core/lib/textures/Texture2DBase":223,"awayjs-core/lib/utils/TextureUtils":226}],223:[function(e,t,i){t.exports=e(25)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/Texture2DBase.js":25,"awayjs-core/lib/errors/AbstractMethodError":193,"awayjs-core/lib/textures/MipmapGenerator":221,"awayjs-core/lib/textures/TextureProxyBase":224}],224:[function(e,t,i){t.exports=e(26)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/TextureProxyBase.js":26,"awayjs-core/lib/library/AssetType":215,"awayjs-core/lib/library/NamedAssetBase":216}],225:[function(e,t,i){t.exports=e(29)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/ColorUtils.js":29}],226:[function(e,t,i){t.exports=e(31)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/TextureUtils.js":31}],227:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-renderergl/lib/compilation/RenderObjectBase");var a=e("awayjs-renderergl/lib/passes/DepthPass");var n=function(e){r(t,e);function t(t,i,r,s){e.call(this,t,i,r,s);this._pAddScreenPass(new a(this,i,r,this._stage))}t.id="depth";return t}(s);t.exports=n},{"awayjs-renderergl/lib/compilation/RenderObjectBase":231,"awayjs-renderergl/lib/passes/DepthPass":243}],228:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-renderergl/lib/compilation/RenderObjectBase");var a=e("awayjs-renderergl/lib/passes/DistancePass");var n=function(e){r(t,e);function t(t,i,r,s){e.call(this,t,i,r,s);this._pAddScreenPass(new a(this,i,r,this._stage))}t.id="distance";return t}(s);t.exports=n},{"awayjs-renderergl/lib/compilation/RenderObjectBase":231,"awayjs-renderergl/lib/passes/DistancePass":244}],229:[function(e,t,i){var r=e("awayjs-renderergl/lib/compilation/ShaderRegisterElement");var s=function(){function e(e,t,i){if(i===void 0){i=true}this._regName=e;this._regCount=t;this._persistent=i;this.initRegisters(e,t)}e.prototype.requestFreeVectorReg=function(){for(var e=0;e<this._regCount;++e){if(!this.isRegisterUsed(e)){if(this._persistent)this._usedVectorCount[e]++;return this._vectorRegisters[e]}}throw new Error("Register overflow!")};e.prototype.requestFreeRegComponent=function(){for(var e=0;e<this._regCount;++e){if(this._usedVectorCount[e]>0)continue;for(var t=0;t<4;++t){if(this._usedSingleCount[t][e]==0){if(this._persistent)this._usedSingleCount[t][e]++;return this._registerComponents[t][e]}}}throw new Error("Register overflow!")};e.prototype.addUsage=function(e,t){if(e._component>-1)this._usedSingleCount[e._component][e.index]+=t;else this._usedVectorCount[e.index]+=t};e.prototype.removeUsage=function(e){if(e._component>-1){if(--this._usedSingleCount[e._component][e.index]<0)throw new Error("More usages removed than exist!")}else{if(--this._usedVectorCount[e.index]<0)throw new Error("More usages removed than exist!")}};e.prototype.dispose=function(){this._vectorRegisters=null;this._registerComponents=null;this._usedSingleCount=null;this._usedVectorCount=null};e.prototype.hasRegisteredRegs=function(){for(var e=0;e<this._regCount;++e)if(this.isRegisterUsed(e))return true;return false};e.prototype.initRegisters=function(t,i){var r=e._initPool(t,i);this._vectorRegisters=e._regPool[r];this._registerComponents=e._regCompsPool[r];this._usedVectorCount=this._initArray(Array(i),0);this._usedSingleCount=new Array(4);this._usedSingleCount[0]=this._initArray(new Array(i),0);this._usedSingleCount[1]=this._initArray(new Array(i),0);this._usedSingleCount[2]=this._initArray(new Array(i),0);this._usedSingleCount[3]=this._initArray(new Array(i),0)};e._initPool=function(t,i){var s=t+i;if(e._regPool[s]!=undefined)return s;var a=new Array(i);e._regPool[s]=a;var n=[[],[],[],[]];e._regCompsPool[s]=n;for(var o=0;o<i;++o){a[o]=new r(t,o);for(var h=0;h<4;++h)n[h][o]=new r(t,o,h)}return s};e.prototype.isRegisterUsed=function(e){if(this._usedVectorCount[e]>0)return true;for(var t=0;t<4;++t)if(this._usedSingleCount[t][e]>0)return true;return false};e.prototype._initArray=function(e,t){var i=e.length;for(var r=0;r<i;r++)e[r]=t;return e};e._regPool=new Object;e._regCompsPool=new Object;return e}();t.exports=s},{"awayjs-renderergl/lib/compilation/ShaderRegisterElement":239}],230:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r
};var s=e("awayjs-core/lib/base/BlendMode");var a=e("awayjs-renderergl/lib/compilation/RenderObjectBase");var n=e("awayjs-renderergl/lib/passes/BasicMaterialPass");var o=function(e){r(t,e);function t(t,i,r,s){e.call(this,t,i,r,s);this._material=i;this._pAddScreenPass(this._screenPass=new n(this,i,r,this._stage))}t.prototype._pUpdateRenderObject=function(){e.prototype._pUpdateRenderObject.call(this);this._pRequiresBlending=this._material.blendMode!=s.NORMAL||this._material.alphaBlending||this._material.colorTransform&&this._material.colorTransform.alphaMultiplier<1;this._screenPass.setBlendMode(this._renderObjectOwner.blendMode==s.NORMAL&&this._pRequiresBlending?s.LAYER:this._material.blendMode)};t.id="basic";return t}(a);t.exports=o},{"awayjs-core/lib/base/BlendMode":255,"awayjs-renderergl/lib/compilation/RenderObjectBase":231,"awayjs-renderergl/lib/passes/BasicMaterialPass":242}],231:[function(e,t,i){var r=e("awayjs-core/lib/events/Event");var s=e("awayjs-core/lib/library/AssetType");var a=function(){function e(e,t,i,r){var s=this;this._forceSeparateMVP=false;this._invalidAnimation=true;this._invalidRenderObject=true;this._passes=new Array;this._pRequiresBlending=false;this._pool=e;this.renderObjectId=t.id;this._renderObjectOwner=t;this._renderableClass=i;this._stage=r;this._onPassChangeDelegate=function(e){return s.onPassChange(e)}}Object.defineProperty(e.prototype,"requiresBlending",{get:function(){return this._pRequiresBlending},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"renderOrderId",{get:function(){if(this._invalidAnimation)this._updateAnimation();return this._renderOrderId},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"passes",{get:function(){if(this._invalidAnimation)this._updateAnimation();return this._passes},enumerable:true,configurable:true});e.prototype._iIncludeDependencies=function(e){this._renderableClass._iIncludeDependencies(e);e.alphaThreshold=this._renderObjectOwner.alphaThreshold;e.useMipmapping=this._renderObjectOwner.mipmap;e.useSmoothTextures=this._renderObjectOwner.smooth;if(this._renderObjectOwner.assetType=s.MATERIAL){var t=this._renderObjectOwner;e.useAlphaPremultiplied=t.alphaPremultiplied;e.useBothSides=t.bothSides;e.repeatTextures=t.repeat;e.usesUVTransform=t.animateUVs;e.texture=t.texture;e.color=t.color}};e.prototype.dispose=function(){this._pClearScreenPasses();var e=this._passes.length;for(var t=0;t<e;t++)this._passes[t].dispose();this._passes=null;this._pool.disposeItem(this._renderObjectOwner)};e.prototype.invalidateRenderObject=function(){this._invalidRenderObject=true;this._invalidAnimation=true};e.prototype.invalidatePasses=function(){var e=this._passes.length;for(var t=0;t<e;t++)this._passes[t].invalidatePass();this._invalidAnimation=true};e.prototype.invalidateAnimation=function(){this._invalidAnimation=true};e.prototype._updateAnimation=function(){if(this._invalidRenderObject)this._pUpdateRenderObject();this._invalidAnimation=false;var e=this._getEnabledGPUAnimation();var t=0;var i=1;var r;var s=this._passes.length;for(var a=0;a<s;a++){r=this._passes[a].shader;if(r.usesAnimation!=e){r.usesAnimation=e;r.invalidateProgram()}t+=r.programData.id*i;i*=1e3}this._renderOrderId=t};e.prototype._pUpdateRenderObject=function(){this._invalidRenderObject=false};e.prototype._pRemoveScreenPass=function(e){e.removeEventListener(r.CHANGE,this._onPassChangeDelegate);this._passes.splice(this._passes.indexOf(e),1)};e.prototype._pClearScreenPasses=function(){var e=this._passes.length;for(var t=0;t<e;++t)this._passes[t].removeEventListener(r.CHANGE,this._onPassChangeDelegate);this._passes.length=0};e.prototype._pAddScreenPass=function(e){this._passes.push(e);e.addEventListener(r.CHANGE,this._onPassChangeDelegate)};e.prototype.onPassChange=function(e){this.invalidateAnimation()};e.prototype._getEnabledGPUAnimation=function(){if(this._renderObjectOwner.animationSet){this._renderObjectOwner.animationSet.resetGPUCompatibility();var e=this._renderObjectOwner.iOwners;var t=e.length;var i=this._passes.length;for(var r=0;r<i;r++)for(var s=0;s<t;s++)if(e[s].animator)e[s].animator.testGPUCompatibility(this._passes[r].shader);return!this._renderObjectOwner.animationSet.usesCPU}return false};return e}();t.exports=a},{"awayjs-core/lib/events/Event":259,"awayjs-core/lib/library/AssetType":265}],232:[function(e,t,i){var r=function(){function e(e,t,i){this._renderObjectPool=new Object;this._renderObjectClass=e;this._renderableClass=t;this._stage=i}e.prototype.getItem=function(e){return this._renderObjectPool[e.id]||(this._renderObjectPool[e.id]=e._iAddRenderObject(new this._renderObjectClass(this,e,this._renderableClass,this._stage)))};e.prototype.disposeItem=function(e){e._iRemoveRenderObject(this._renderObjectPool[e.id]);this._renderObjectPool[e.id]=null};return e}();t.exports=r},{}],233:[function(e,t,i){var r=e("awayjs-renderergl/lib/compilation/ShaderRegisterCache");var s=e("awayjs-renderergl/lib/compilation/ShaderRegisterData");var a=function(){function e(e,t,i){this._pVertexCode="";this._pFragmentCode="";this._pPostAnimationFragmentCode="";this._pRenderableClass=e;this._pRenderPass=t;this._pShaderObject=i;this._pSharedRegisters=new s;this._pRegisterCache=new r(i.profile);this._pRegisterCache.vertexAttributesOffset=e.vertexAttributesOffset;this._pRegisterCache.reset()}e.prototype.compile=function(){this._pShaderObject.reset();this.pIncludeDependencies();this.pInitRegisterIndices();this.pCompileDependencies();this._pVertexCode+=this._pRenderPass._iGetVertexCode(this._pShaderObject,this._pRegisterCache,this._pSharedRegisters);this._pPostAnimationFragmentCode+=this._pRenderPass._iGetFragmentCode(this._pShaderObject,this._pRegisterCache,this._pSharedRegisters);this._pPostAnimationFragmentCode+="mov "+this._pRegisterCache.fragmentOutputRegister+", "+this._pSharedRegisters.shadedTarget+"\n";this._pRegisterCache.removeFragmentTempUsage(this._pSharedRegisters.shadedTarget);this._pShaderObject.initConstantData(this._pRegisterCache,this._pAnimatableAttributes,this._pAnimationTargetRegisters,this._uvSource,this._uvTarget);this._pRenderPass._iInitConstantData(this._pShaderObject)};e.prototype.pIncludeDependencies=function(){this._pShaderObject._iIncludeDependencies();this._pShaderObject.outputsNormals=this._pRenderPass._pOutputsNormals(this._pShaderObject);this._pShaderObject.outputsTangentNormals=this._pShaderObject.outputsNormals&&this._pRenderPass._pOutputsTangentNormals(this._pShaderObject);this._pShaderObject.usesTangentSpace=this._pShaderObject.outputsTangentNormals&&this._pRenderPass._pUsesTangentSpace(this._pShaderObject);if(!this._pShaderObject.usesTangentSpace&&this._pShaderObject.viewDirDependencies>0)this._pShaderObject.globalPosDependencies++};e.prototype.pCompileDependencies=function(){this._pSharedRegisters.shadedTarget=this._pRegisterCache.getFreeFragmentVectorTemp();this._pRegisterCache.addFragmentTempUsages(this._pSharedRegisters.shadedTarget,1);if(this._pShaderObject.globalPosDependencies>0)this.compileGlobalPositionCode();if(this._pShaderObject.uvDependencies>0)this.compileUVCode();if(this._pShaderObject.secondaryUVDependencies>0)this.compileSecondaryUVCode();if(this._pShaderObject.normalDependencies>0)this.compileNormalCode();if(this._pShaderObject.viewDirDependencies>0)this.compileViewDirCode();this._pVertexCode+=this._pRenderableClass._iGetVertexCode(this._pShaderObject,this._pRegisterCache,this._pSharedRegisters);this._pFragmentCode+=this._pRenderableClass._iGetFragmentCode(this._pShaderObject,this._pRegisterCache,this._pSharedRegisters);this._pVertexCode+=this._pRenderPass._iGetPreLightingVertexCode(this._pShaderObject,this._pRegisterCache,this._pSharedRegisters);this._pFragmentCode+=this._pRenderPass._iGetPreLightingFragmentCode(this._pShaderObject,this._pRegisterCache,this._pSharedRegisters)};e.prototype.compileGlobalPositionCode=function(){this._pRegisterCache.addVertexTempUsages(this._pSharedRegisters.globalPositionVertex=this._pRegisterCache.getFreeVertexVectorTemp(),this._pShaderObject.globalPosDependencies);var e=this._pRegisterCache.getFreeVertexConstant();this._pRegisterCache.getFreeVertexConstant();this._pRegisterCache.getFreeVertexConstant();this._pRegisterCache.getFreeVertexConstant();this._pShaderObject.sceneMatrixIndex=e.index*4;this._pVertexCode+="m44 "+this._pSharedRegisters.globalPositionVertex+", "+this._pSharedRegisters.localPosition+", "+e+"\n";if(this._pShaderObject.usesGlobalPosFragment){this._pSharedRegisters.globalPositionVarying=this._pRegisterCache.getFreeVarying();this._pVertexCode+="mov "+this._pSharedRegisters.globalPositionVarying+", "+this._pSharedRegisters.globalPositionVertex+"\n"}};e.prototype.compileUVCode=function(){var e=this._pRegisterCache.getFreeVertexAttribute();this._pShaderObject.uvBufferIndex=e.index;var t=this._pRegisterCache.getFreeVarying();this._pSharedRegisters.uvVarying=t;if(this._pShaderObject.usesUVTransform){var i=this._pRegisterCache.getFreeVertexConstant();var r=this._pRegisterCache.getFreeVertexConstant();this._pShaderObject.uvTransformIndex=i.index*4;this._pVertexCode+="dp4 "+t+".x, "+e+", "+i+"\n"+"dp4 "+t+".y, "+e+", "+r+"\n"+"mov "+t+".zw, "+e+".zw \n"}else{this._pShaderObject.uvTransformIndex=-1;this._uvTarget=t.toString();this._uvSource=e.toString()}};e.prototype.compileSecondaryUVCode=function(){var e=this._pRegisterCache.getFreeVertexAttribute();this._pShaderObject.secondaryUVBufferIndex=e.index;this._pSharedRegisters.secondaryUVVarying=this._pRegisterCache.getFreeVarying();this._pVertexCode+="mov "+this._pSharedRegisters.secondaryUVVarying+", "+e+"\n"};e.prototype.compileViewDirCode=function(){var e=this._pRegisterCache.getFreeVertexConstant();this._pSharedRegisters.viewDirVarying=this._pRegisterCache.getFreeVarying();this._pSharedRegisters.viewDirFragment=this._pRegisterCache.getFreeFragmentVectorTemp();this._pRegisterCache.addFragmentTempUsages(this._pSharedRegisters.viewDirFragment,this._pShaderObject.viewDirDependencies);this._pShaderObject.cameraPositionIndex=e.index*4;if(this._pShaderObject.usesTangentSpace){var t=this._pRegisterCache.getFreeVertexVectorTemp();this._pVertexCode+="sub "+t+", "+e+", "+this._pSharedRegisters.localPosition+"\n"+"m33 "+this._pSharedRegisters.viewDirVarying+".xyz, "+t+", "+this._pSharedRegisters.animatedTangent+"\n"+"mov "+this._pSharedRegisters.viewDirVarying+".w, "+this._pSharedRegisters.localPosition+".w\n"}else{this._pVertexCode+="sub "+this._pSharedRegisters.viewDirVarying+", "+e+", "+this._pSharedRegisters.globalPositionVertex+"\n";this._pRegisterCache.removeVertexTempUsage(this._pSharedRegisters.globalPositionVertex)}this._pFragmentCode+="nrm "+this._pSharedRegisters.viewDirFragment+".xyz, "+this._pSharedRegisters.viewDirVarying+"\n"+"mov "+this._pSharedRegisters.viewDirFragment+".w,   "+this._pSharedRegisters.viewDirVarying+".w\n"};e.prototype.compileNormalCode=function(){this._pSharedRegisters.normalFragment=this._pRegisterCache.getFreeFragmentVectorTemp();this._pRegisterCache.addFragmentTempUsages(this._pSharedRegisters.normalFragment,this._pShaderObject.normalDependencies);if(this._pShaderObject.outputsNormals&&!this._pShaderObject.outputsTangentNormals){this._pVertexCode+=this._pRenderPass._iGetNormalVertexCode(this._pShaderObject,this._pRegisterCache,this._pSharedRegisters);this._pFragmentCode+=this._pRenderPass._iGetNormalFragmentCode(this._pShaderObject,this._pRegisterCache,this._pSharedRegisters);return}var e;if(!this._pShaderObject.outputsNormals||!this._pShaderObject.usesTangentSpace){e=new Array(3);e[0]=this._pRegisterCache.getFreeVertexConstant();e[1]=this._pRegisterCache.getFreeVertexConstant();e[2]=this._pRegisterCache.getFreeVertexConstant();this._pRegisterCache.getFreeVertexConstant();this._pShaderObject.sceneNormalMatrixIndex=e[0].index*4;this._pSharedRegisters.normalVarying=this._pRegisterCache.getFreeVarying()}if(this._pShaderObject.outputsNormals){if(this._pShaderObject.usesTangentSpace){this._pVertexCode+="nrm "+this._pSharedRegisters.animatedNormal+".xyz, "+this._pSharedRegisters.animatedNormal+"\n"+"nrm "+this._pSharedRegisters.animatedTangent+".xyz, "+this._pSharedRegisters.animatedTangent+"\n"+"crs "+this._pSharedRegisters.bitangent+".xyz, "+this._pSharedRegisters.animatedNormal+", "+this._pSharedRegisters.animatedTangent+"\n";this._pFragmentCode+=this._pRenderPass._iGetNormalFragmentCode(this._pShaderObject,this._pRegisterCache,this._pSharedRegisters)}else{this._pSharedRegisters.tangentVarying=this._pRegisterCache.getFreeVarying();this._pSharedRegisters.bitangentVarying=this._pRegisterCache.getFreeVarying();var t=this._pRegisterCache.getFreeVertexVectorTemp();this._pVertexCode+="m33 "+t+".xyz, "+this._pSharedRegisters.animatedNormal+", "+e[0]+"\n"+"nrm "+this._pSharedRegisters.animatedNormal+".xyz, "+t+"\n"+"m33 "+t+".xyz, "+this._pSharedRegisters.animatedTangent+", "+e[0]+"\n"+"nrm "+this._pSharedRegisters.animatedTangent+".xyz, "+t+"\n"+"mov "+this._pSharedRegisters.tangentVarying+".x, "+this._pSharedRegisters.animatedTangent+".x  \n"+"mov "+this._pSharedRegisters.tangentVarying+".z, "+this._pSharedRegisters.animatedNormal+".x  \n"+"mov "+this._pSharedRegisters.tangentVarying+".w, "+this._pSharedRegisters.normalInput+".w  \n"+"mov "+this._pSharedRegisters.bitangentVarying+".x, "+this._pSharedRegisters.animatedTangent+".y  \n"+"mov "+this._pSharedRegisters.bitangentVarying+".z, "+this._pSharedRegisters.animatedNormal+".y  \n"+"mov "+this._pSharedRegisters.bitangentVarying+".w, "+this._pSharedRegisters.normalInput+".w  \n"+"mov "+this._pSharedRegisters.normalVarying+".x, "+this._pSharedRegisters.animatedTangent+".z  \n"+"mov "+this._pSharedRegisters.normalVarying+".z, "+this._pSharedRegisters.animatedNormal+".z  \n"+"mov "+this._pSharedRegisters.normalVarying+".w, "+this._pSharedRegisters.normalInput+".w  \n"+"crs "+t+".xyz, "+this._pSharedRegisters.animatedNormal+", "+this._pSharedRegisters.animatedTangent+"\n"+"mov "+this._pSharedRegisters.tangentVarying+".y, "+t+".x    \n"+"mov "+this._pSharedRegisters.bitangentVarying+".y, "+t+".y  \n"+"mov "+this._pSharedRegisters.normalVarying+".y, "+t+".z    \n";this._pRegisterCache.removeVertexTempUsage(this._pSharedRegisters.animatedTangent);var i;var r;var s;i=this._pRegisterCache.getFreeFragmentVectorTemp();this._pRegisterCache.addFragmentTempUsages(i,1);r=this._pRegisterCache.getFreeFragmentVectorTemp();this._pRegisterCache.addFragmentTempUsages(r,1);s=this._pRegisterCache.getFreeFragmentVectorTemp();this._pRegisterCache.addFragmentTempUsages(s,1);this._pFragmentCode+="nrm "+i+".xyz, "+this._pSharedRegisters.tangentVarying+"\n"+"mov "+i+".w, "+this._pSharedRegisters.tangentVarying+".w	\n"+"nrm "+r+".xyz, "+this._pSharedRegisters.bitangentVarying+"\n"+"nrm "+s+".xyz, "+this._pSharedRegisters.normalVarying+"\n";this._pFragmentCode+=this._pRenderPass._iGetNormalFragmentCode(this._pShaderObject,this._pRegisterCache,this._pSharedRegisters)+"m33 "+this._pSharedRegisters.normalFragment+".xyz, "+this._pSharedRegisters.normalFragment+", "+i+"\n"+"mov "+this._pSharedRegisters.normalFragment+".w, "+this._pSharedRegisters.normalVarying+".w\n";this._pRegisterCache.removeFragmentTempUsage(r);this._pRegisterCache.removeFragmentTempUsage(i);this._pRegisterCache.removeFragmentTempUsage(s)}}else{this._pVertexCode+="m33 "+this._pSharedRegisters.normalVarying+".xyz, "+this._pSharedRegisters.animatedNormal+", "+e[0]+"\n"+"mov "+this._pSharedRegisters.normalVarying+".w, "+this._pSharedRegisters.animatedNormal+".w\n";this._pFragmentCode+="nrm "+this._pSharedRegisters.normalFragment+".xyz, "+this._pSharedRegisters.normalVarying+"\n"+"mov "+this._pSharedRegisters.normalFragment+".w, "+this._pSharedRegisters.normalVarying+".w\n";if(this._pShaderObject.tangentDependencies>0){this._pSharedRegisters.tangentVarying=this._pRegisterCache.getFreeVarying();this._pVertexCode+="m33 "+this._pSharedRegisters.tangentVarying+".xyz, "+this._pSharedRegisters.animatedTangent+", "+e[0]+"\n"+"mov "+this._pSharedRegisters.tangentVarying+".w, "+this._pSharedRegisters.animatedTangent+".w\n"}}if(!this._pShaderObject.usesTangentSpace)this._pRegisterCache.removeVertexTempUsage(this._pSharedRegisters.animatedNormal)};e.prototype.pInitRegisterIndices=function(){this._pShaderObject.pInitRegisterIndices();this._pAnimatableAttributes=new Array("va0");this._pAnimationTargetRegisters=new Array("vt0");this._pVertexCode="";this._pFragmentCode="";this._pPostAnimationFragmentCode="";this._pRegisterCache.addVertexTempUsages(this._pSharedRegisters.localPosition=this._pRegisterCache.getFreeVertexVectorTemp(),1);this._pSharedRegisters.commons=this._pRegisterCache.getFreeFragmentConstant();this._pShaderObject.commonsDataIndex=this._pSharedRegisters.commons.index*4;if(this._pShaderObject.tangentDependencies>0||this._pShaderObject.outputsNormals){this._pSharedRegisters.tangentInput=this._pRegisterCache.getFreeVertexAttribute();this._pShaderObject.tangentBufferIndex=this._pSharedRegisters.tangentInput.index;this._pSharedRegisters.animatedTangent=this._pRegisterCache.getFreeVertexVectorTemp();this._pRegisterCache.addVertexTempUsages(this._pSharedRegisters.animatedTangent,1);if(this._pShaderObject.usesTangentSpace){this._pSharedRegisters.bitangent=this._pRegisterCache.getFreeVertexVectorTemp();this._pRegisterCache.addVertexTempUsages(this._pSharedRegisters.bitangent,1)}this._pAnimatableAttributes.push(this._pSharedRegisters.tangentInput.toString());this._pAnimationTargetRegisters.push(this._pSharedRegisters.animatedTangent.toString())}if(this._pShaderObject.normalDependencies>0){this._pSharedRegisters.normalInput=this._pRegisterCache.getFreeVertexAttribute();this._pShaderObject.normalBufferIndex=this._pSharedRegisters.normalInput.index;this._pSharedRegisters.animatedNormal=this._pRegisterCache.getFreeVertexVectorTemp();this._pRegisterCache.addVertexTempUsages(this._pSharedRegisters.animatedNormal,1);this._pAnimatableAttributes.push(this._pSharedRegisters.normalInput.toString());this._pAnimationTargetRegisters.push(this._pSharedRegisters.animatedNormal.toString())}if(this._pShaderObject.colorDependencies>0){this._pSharedRegisters.colorInput=this._pRegisterCache.getFreeVertexAttribute();this._pShaderObject.colorBufferIndex=this._pSharedRegisters.colorInput.index;this._pSharedRegisters.colorVarying=this._pRegisterCache.getFreeVarying();this._pVertexCode+="mov "+this._pSharedRegisters.colorVarying+", "+this._pSharedRegisters.colorInput+"\n"}};e.prototype.dispose=function(){this._pRegisterCache.dispose();this._pRegisterCache=null;this._pSharedRegisters=null};Object.defineProperty(e.prototype,"vertexCode",{get:function(){return this._pVertexCode},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"fragmentCode",{get:function(){return this._pFragmentCode},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"postAnimationFragmentCode",{get:function(){return this._pPostAnimationFragmentCode},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"shadedTarget",{get:function(){return this._pSharedRegisters.shadedTarget.toString()},enumerable:true,configurable:true});return e}();t.exports=a},{"awayjs-renderergl/lib/compilation/ShaderRegisterCache":237,"awayjs-renderergl/lib/compilation/ShaderRegisterData":238}],234:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-renderergl/lib/compilation/ShaderCompilerBase");var a=function(e){r(t,e);function t(t,i,r){e.call(this,t,i,r);this._shaderLightingObject=r;this._renderLightingPass=i}t.prototype.pCompileDependencies=function(){e.prototype.pCompileDependencies.call(this);if(this._shaderLightingObject.usesShadows)this.pCompileShadowCode();if(this._shaderLightingObject.usesLights){this.initLightRegisters();this.compileLightCode()}if(this._shaderLightingObject.usesProbes)this.compileLightProbeCode();this._pVertexCode+=this._renderLightingPass._iGetPostLightingVertexCode(this._shaderLightingObject,this._pRegisterCache,this._pSharedRegisters);this._pFragmentCode+=this._renderLightingPass._iGetPostLightingFragmentCode(this._shaderLightingObject,this._pRegisterCache,this._pSharedRegisters)};t.prototype.pCompileShadowCode=function(){if(this._shaderLightingObject.normalDependencies>0){this._pSharedRegisters.shadowTarget=this._pSharedRegisters.normalFragment}else{this._pSharedRegisters.shadowTarget=this._pRegisterCache.getFreeFragmentVectorTemp();this._pRegisterCache.addFragmentTempUsages(this._pSharedRegisters.shadowTarget,1)}};t.prototype.initLightRegisters=function(){var e,t;if(this._dirLightVertexConstants){t=this._dirLightVertexConstants.length;for(e=0;e<t;++e){this._dirLightVertexConstants[e]=this._pRegisterCache.getFreeVertexConstant();if(this._shaderLightingObject.lightVertexConstantIndex==-1)this._shaderLightingObject.lightVertexConstantIndex=this._dirLightVertexConstants[e].index*4}}if(this._pointLightVertexConstants){t=this._pointLightVertexConstants.length;for(e=0;e<t;++e){this._pointLightVertexConstants[e]=this._pRegisterCache.getFreeVertexConstant();if(this._shaderLightingObject.lightVertexConstantIndex==-1)this._shaderLightingObject.lightVertexConstantIndex=this._pointLightVertexConstants[e].index*4}}t=this._dirLightFragmentConstants.length;for(e=0;e<t;++e){this._dirLightFragmentConstants[e]=this._pRegisterCache.getFreeFragmentConstant();if(this._shaderLightingObject.lightFragmentConstantIndex==-1)this._shaderLightingObject.lightFragmentConstantIndex=this._dirLightFragmentConstants[e].index*4}t=this._pointLightFragmentConstants.length;for(e=0;e<t;++e){this._pointLightFragmentConstants[e]=this._pRegisterCache.getFreeFragmentConstant();if(this._shaderLightingObject.lightFragmentConstantIndex==-1)this._shaderLightingObject.lightFragmentConstantIndex=this._pointLightFragmentConstants[e].index*4}};t.prototype.compileLightCode=function(){var e;var t;var i;var r;var s=0;var a=0;var n=this._shaderLightingObject.usesLightsForSpecular;var o=this._shaderLightingObject.usesLightsForDiffuse;for(var h=0;h<this._shaderLightingObject.numDirectionalLights;++h){if(this._shaderLightingObject.usesTangentSpace){r=this._dirLightVertexConstants[s++];var l=this._pRegisterCache.getFreeVarying();this._pVertexCode+="m33 "+l+".xyz, "+r+", "+this._pSharedRegisters.animatedTangent+"\n"+"mov "+l+".w, "+r+".w\n";r=this._pRegisterCache.getFreeFragmentVectorTemp();this._pRegisterCache.addVertexTempUsages(r,1);this._pFragmentCode+="nrm "+r+".xyz, "+l+"\n"+"mov "+r+".w, "+l+".w\n"}else{r=this._dirLightFragmentConstants[a++]}e=this._dirLightFragmentConstants[a++];t=this._dirLightFragmentConstants[a++];if(o)this._pFragmentCode+=this._renderLightingPass._iGetPerLightDiffuseFragmentCode(this._shaderLightingObject,r,e,this._pRegisterCache,this._pSharedRegisters);if(n)this._pFragmentCode+=this._renderLightingPass._iGetPerLightSpecularFragmentCode(this._shaderLightingObject,r,t,this._pRegisterCache,this._pSharedRegisters);if(this._shaderLightingObject.usesTangentSpace)this._pRegisterCache.removeVertexTempUsage(r)}s=0;a=0;for(var h=0;h<this._shaderLightingObject.numPointLights;++h){if(this._shaderLightingObject.usesTangentSpace||!this._shaderLightingObject.usesGlobalPosFragment)i=this._pointLightVertexConstants[s++];else i=this._pointLightFragmentConstants[a++];e=this._pointLightFragmentConstants[a++];t=this._pointLightFragmentConstants[a++];r=this._pRegisterCache.getFreeFragmentVectorTemp();this._pRegisterCache.addFragmentTempUsages(r,1);var l;if(this._shaderLightingObject.usesTangentSpace){l=this._pRegisterCache.getFreeVarying();var u=this._pRegisterCache.getFreeVertexVectorTemp();this._pVertexCode+="sub "+u+", "+i+", "+this._pSharedRegisters.localPosition+"\n"+"m33 "+l+".xyz, "+u+", "+this._pSharedRegisters.animatedTangent+"\n"+"mov "+l+".w, "+this._pSharedRegisters.localPosition+".w\n"}else if(!this._shaderLightingObject.usesGlobalPosFragment){l=this._pRegisterCache.getFreeVarying();this._pVertexCode+="sub "+l+", "+i+", "+this._pSharedRegisters.globalPositionVertex+"\n"}else{l=r;this._pFragmentCode+="sub "+r+", "+i+", "+this._pSharedRegisters.globalPositionVarying+"\n"}if(this._shaderLightingObject.usesLightFallOff){this._pFragmentCode+="dp3 "+r+".w, "+l+", "+l+"\n"+"sub "+r+".w, "+r+".w, "+e+".w\n"+"mul "+r+".w, "+r+".w, "+t+".w\n"+"sat "+r+".w, "+r+".w\n"+"sub "+r+".w, "+this._pSharedRegisters.commons+".w, "+r+".w\n"+"nrm "+r+".xyz, "+l+"\n"}else{this._pFragmentCode+="nrm "+r+".xyz, "+l+"\n"+"mov "+r+".w, "+l+".w\n"}if(this._shaderLightingObject.lightFragmentConstantIndex==-1)this._shaderLightingObject.lightFragmentConstantIndex=i.index*4;if(o)this._pFragmentCode+=this._renderLightingPass._iGetPerLightDiffuseFragmentCode(this._shaderLightingObject,r,e,this._pRegisterCache,this._pSharedRegisters);if(n)this._pFragmentCode+=this._renderLightingPass._iGetPerLightSpecularFragmentCode(this._shaderLightingObject,r,t,this._pRegisterCache,this._pSharedRegisters);this._pRegisterCache.removeFragmentTempUsage(r)}};t.prototype.compileLightProbeCode=function(){var e;var t=[".x",".y",".z",".w"];var i=new Array;var r;var s;var a=this._shaderLightingObject.usesProbesForSpecular;var n=this._shaderLightingObject.usesProbesForDiffuse;if(n)this._shaderLightingObject.lightProbeDiffuseIndices=new Array;if(a)this._shaderLightingObject.lightProbeSpecularIndices=new Array;for(r=0;r<this._pNumProbeRegisters;++r){i[r]=this._pRegisterCache.getFreeFragmentConstant();if(r==0)this._shaderLightingObject.probeWeightsIndex=i[r].index*4}for(r=0;r<this._shaderLightingObject.numLightProbes;++r){e=i[Math.floor(r/4)].toString()+t[r%4];if(n){s=this._pRegisterCache.getFreeTextureReg();this._shaderLightingObject.lightProbeDiffuseIndices[r]=s.index;this._pFragmentCode+=this._renderLightingPass._iGetPerProbeDiffuseFragmentCode(this._shaderLightingObject,s,e,this._pRegisterCache,this._pSharedRegisters)}if(a){s=this._pRegisterCache.getFreeTextureReg();this._shaderLightingObject.lightProbeSpecularIndices[r]=s.index;this._pFragmentCode+=this._renderLightingPass._iGetPerProbeSpecularFragmentCode(this._shaderLightingObject,s,e,this._pRegisterCache,this._pSharedRegisters)}}};t.prototype.pInitRegisterIndices=function(){e.prototype.pInitRegisterIndices.call(this);this._shaderLightingObject.lightVertexConstantIndex=-1;this._shaderLightingObject.lightFragmentConstantIndex=-1;this._shaderLightingObject.probeWeightsIndex=-1;this._pNumProbeRegisters=Math.ceil(this._shaderLightingObject.numLightProbes/4);if(this._shaderLightingObject.usesTangentSpace||!this._shaderLightingObject.usesGlobalPosFragment){this._pointLightVertexConstants=new Array(this._shaderLightingObject.numPointLights);this._pointLightFragmentConstants=new Array(this._shaderLightingObject.numPointLights*2)}else{this._pointLightFragmentConstants=new Array(this._shaderLightingObject.numPointLights*3)}if(this._shaderLightingObject.usesTangentSpace){this._dirLightVertexConstants=new Array(this._shaderLightingObject.numDirectionalLights);this._dirLightFragmentConstants=new Array(this._shaderLightingObject.numDirectionalLights*2)}else{this._dirLightFragmentConstants=new Array(this._shaderLightingObject.numDirectionalLights*3)}};return t}(s);t.exports=a},{"awayjs-renderergl/lib/compilation/ShaderCompilerBase":233}],235:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-display/lib/materials/LightSources");var a=e("awayjs-stagegl/lib/base/ContextGLProfile");var n=e("awayjs-renderergl/lib/compilation/ShaderLightingCompiler");var o=e("awayjs-renderergl/lib/compilation/ShaderObjectBase");var h=function(e){r(t,e);function t(t,i,r){e.call(this,t,i,r);this._includeCasters=true;this._renderLightingPass=i}t.prototype._iIncludeDependencies=function(){this.numPointLights=this._renderLightingPass.numPointLights;this.numDirectionalLights=this._renderLightingPass.numDirectionalLights;this.numLightProbes=this._renderLightingPass.numLightProbes;var t=this._renderLightingPass.numPointLights+this._renderLightingPass.numDirectionalLights;var i=this._renderLightingPass.numLightProbes;var r=this._renderLightingPass._iUsesDiffuse(this)?this._renderLightingPass.diffuseLightSources:0;var n=this._renderLightingPass._iUsesSpecular(this)?this._renderLightingPass.specularLightSources:0;var o=r|n;this.usesLightFallOff=this._renderLightingPass.enableLightFallOff&&this.profile!=a.BASELINE_CONSTRAINED;this.numLights=t+i;this.usesLights=t>0&&(o&s.LIGHTS)!=0;this.usesProbes=i>0&&(o&s.PROBES)!=0;this.usesLightsForSpecular=t>0&&(n&s.LIGHTS)!=0;this.usesProbesForSpecular=i>0&&(n&s.PROBES)!=0;this.usesLightsForDiffuse=t>0&&(r&s.LIGHTS)!=0;this.usesProbesForDiffuse=i>0&&(r&s.PROBES)!=0;this.usesShadows=this._renderLightingPass._iUsesShadows(this);e.prototype._iIncludeDependencies.call(this)};t.prototype.createCompiler=function(e,t){return new n(e,t,this)};t.prototype.reset=function(){e.prototype.reset.call(this);this.numLights=0;this.usesLightFallOff=true};t.prototype._iRender=function(t,i,r){e.prototype._iRender.call(this,t,i,r);if(this._renderLightingPass.lightPicker)this._renderLightingPass.lightPicker.collectLights(t);if(this.usesLights)this.updateLights();if(this.usesProbes)this.updateProbes()};t.prototype.updateLights=function(){var e;var t;var i=0;var r=0;var s;var a;var n=0;var o=this.usesShadows?2:1;var h;var l;this.ambientR=this.ambientG=this.ambientB=0;h=this.lightVertexConstantIndex;r=this.lightFragmentConstantIndex;var u=0;var p=this._renderLightingPass.lightPicker.directionalLights;l=this._renderLightingPass.directionalLightsOffset;s=this._renderLightingPass.lightPicker.directionalLights.length;if(l>s){u=1;l-=s}for(;u<o;++u){if(u)p=this._renderLightingPass.lightPicker.castingDirectionalLights;s=p.length;if(s>this.numDirectionalLights)s=this.numDirectionalLights;for(i=0;i<s;++i){e=p[l+i];a=e.sceneDirection;this.ambientR+=e._iAmbientR;this.ambientG+=e._iAmbientG;this.ambientB+=e._iAmbientB;if(this.usesTangentSpace){var c=-a.x;var d=-a.y;var f=-a.z;this.vertexConstantData[h++]=this._pInverseSceneMatrix[0]*c+this._pInverseSceneMatrix[4]*d+this._pInverseSceneMatrix[8]*f;this.vertexConstantData[h++]=this._pInverseSceneMatrix[1]*c+this._pInverseSceneMatrix[5]*d+this._pInverseSceneMatrix[9]*f;this.vertexConstantData[h++]=this._pInverseSceneMatrix[2]*c+this._pInverseSceneMatrix[6]*d+this._pInverseSceneMatrix[10]*f;this.vertexConstantData[h++]=1}else{this.fragmentConstantData[r++]=-a.x;this.fragmentConstantData[r++]=-a.y;this.fragmentConstantData[r++]=-a.z;this.fragmentConstantData[r++]=1}this.fragmentConstantData[r++]=e._iDiffuseR;this.fragmentConstantData[r++]=e._iDiffuseG;this.fragmentConstantData[r++]=e._iDiffuseB;this.fragmentConstantData[r++]=1;this.fragmentConstantData[r++]=e._iSpecularR;this.fragmentConstantData[r++]=e._iSpecularG;this.fragmentConstantData[r++]=e._iSpecularB;this.fragmentConstantData[r++]=1;if(++n==this.numDirectionalLights){i=s;u=o}}}if(this.numDirectionalLights>n){i=r+(this.numDirectionalLights-n)*12;while(r<i)this.fragmentConstantData[r++]=0}n=0;var _=this._renderLightingPass.lightPicker.pointLights;l=this._renderLightingPass.pointLightsOffset;s=this._renderLightingPass.lightPicker.pointLights.length;if(l>s){u=1;l-=s}else{u=0}for(;u<o;++u){if(u)_=this._renderLightingPass.lightPicker.castingPointLights;s=_.length;for(i=0;i<s;++i){t=_[l+i];a=t.scenePosition;this.ambientR+=t._iAmbientR;this.ambientG+=t._iAmbientG;this.ambientB+=t._iAmbientB;if(this.usesTangentSpace){c=a.x;d=a.y;f=a.z;this.vertexConstantData[h++]=this._pInverseSceneMatrix[0]*c+this._pInverseSceneMatrix[4]*d+this._pInverseSceneMatrix[8]*f+this._pInverseSceneMatrix[12];this.vertexConstantData[h++]=this._pInverseSceneMatrix[1]*c+this._pInverseSceneMatrix[5]*d+this._pInverseSceneMatrix[9]*f+this._pInverseSceneMatrix[13];this.vertexConstantData[h++]=this._pInverseSceneMatrix[2]*c+this._pInverseSceneMatrix[6]*d+this._pInverseSceneMatrix[10]*f+this._pInverseSceneMatrix[14];this.vertexConstantData[h++]=1}else if(!this.usesGlobalPosFragment){this.vertexConstantData[h++]=a.x;
this.vertexConstantData[h++]=a.y;this.vertexConstantData[h++]=a.z;this.vertexConstantData[h++]=1}else{this.fragmentConstantData[r++]=a.x;this.fragmentConstantData[r++]=a.y;this.fragmentConstantData[r++]=a.z;this.fragmentConstantData[r++]=1}this.fragmentConstantData[r++]=t._iDiffuseR;this.fragmentConstantData[r++]=t._iDiffuseG;this.fragmentConstantData[r++]=t._iDiffuseB;var y=t._pRadius;this.fragmentConstantData[r++]=y*y;this.fragmentConstantData[r++]=t._iSpecularR;this.fragmentConstantData[r++]=t._iSpecularG;this.fragmentConstantData[r++]=t._iSpecularB;this.fragmentConstantData[r++]=t._pFallOffFactor;if(++n==this.numPointLights){i=s;u=o}}}if(this.numPointLights>n){i=r+(n-this.numPointLights)*12;for(;r<i;++r)this.fragmentConstantData[r]=0}};t.prototype.updateProbes=function(){var e;var t=this._renderLightingPass.lightPicker.lightProbes;var i=this._renderLightingPass.lightPicker.lightProbeWeights;var r=t.length-this._renderLightingPass.lightProbesOffset;var s=this.usesProbesForDiffuse;var a=this.usesProbesForSpecular;if(!(s||a))return;if(r>this.numLightProbes)r=this.numLightProbes;for(var n=0;n<r;++n){e=t[this._renderLightingPass.lightProbesOffset+n];if(s)this._stage.activateCubeTexture(this.lightProbeDiffuseIndices[n],e.diffuseMap,this.useSmoothTextures,this.useMipmapping);if(a)this._stage.activateCubeTexture(this.lightProbeSpecularIndices[n],e.specularMap,this.useSmoothTextures,this.useMipmapping)}for(n=0;n<r;++n)this.fragmentConstantData[this.probeWeightsIndex+n]=i[this._renderLightingPass.lightProbesOffset+n]};return t}(o);t.exports=h},{"awayjs-display/lib/materials/LightSources":274,"awayjs-renderergl/lib/compilation/ShaderLightingCompiler":234,"awayjs-renderergl/lib/compilation/ShaderObjectBase":236,"awayjs-stagegl/lib/base/ContextGLProfile":285}],236:[function(e,t,i){var r=e("awayjs-display/lib/base/LineSubGeometry");var s=e("awayjs-display/lib/base/TriangleSubGeometry");var a=e("awayjs-stagegl/lib/base/ContextGLTriangleFace");var n=e("awayjs-renderergl/lib/compilation/ShaderCompilerBase");var o=function(){function e(e,t,i){this._invalidShader=true;this._invalidProgram=true;this._animationVertexCode="";this._animationFragmentCode="";this._defaultCulling=a.BACK;this._pInverseSceneMatrix=new Array;this.ambientR=255;this.ambientG=255;this.ambientB=255;this.usesGlobalPosFragment=false;this.vertexConstantData=new Array;this.fragmentConstantData=new Array;this._renderableClass=e;this._renderPass=t;this._stage=i;this.profile=this._stage.profile}Object.defineProperty(e.prototype,"programData",{get:function(){if(this._invalidProgram)this._updateProgram();return this._programData},enumerable:true,configurable:true});e.prototype._iIncludeDependencies=function(){this._renderPass._iIncludeDependencies(this)};e.prototype.createCompiler=function(e,t){return new n(e,t,this)};e.prototype.reset=function(){this.projectionDependencies=0;this.normalDependencies=0;this.colorDependencies=0;this.viewDirDependencies=0;this.uvDependencies=0;this.secondaryUVDependencies=0;this.globalPosDependencies=0;this.tangentDependencies=0;this.usesGlobalPosFragment=false;this.usesFragmentAnimation=false;this.usesTangentSpace=false;this.outputsNormals=false;this.outputsTangentNormals=false};e.prototype.pInitRegisterIndices=function(){this.commonsDataIndex=-1;this.cameraPositionIndex=-1;this.uvBufferIndex=-1;this.uvTransformIndex=-1;this.secondaryUVBufferIndex=-1;this.normalBufferIndex=-1;this.colorBufferIndex=-1;this.tangentBufferIndex=-1;this.sceneMatrixIndex=-1;this.sceneNormalMatrixIndex=-1};e.prototype.initConstantData=function(e,t,i,r,s){this.numUsedVertexConstants=e.numUsedVertexConstants;this.numUsedFragmentConstants=e.numUsedFragmentConstants;this.numUsedStreams=e.numUsedStreams;this.numUsedTextures=e.numUsedTextures;this.numUsedVaryings=e.numUsedVaryings;this.numUsedFragmentConstants=e.numUsedFragmentConstants;this.animatableAttributes=t;this.animationTargetRegisters=i;this.uvSource=r;this.uvTarget=s;this.vertexConstantData.length=this.numUsedVertexConstants*4;this.fragmentConstantData.length=this.numUsedFragmentConstants*4;this.fragmentConstantData[this.commonsDataIndex]=.5;this.fragmentConstantData[this.commonsDataIndex+1]=0;this.fragmentConstantData[this.commonsDataIndex+2]=1/255;this.fragmentConstantData[this.commonsDataIndex+3]=1;if(this.uvTransformIndex>=0){this.vertexConstantData[this.uvTransformIndex]=1;this.vertexConstantData[this.uvTransformIndex+1]=0;this.vertexConstantData[this.uvTransformIndex+2]=0;this.vertexConstantData[this.uvTransformIndex+3]=0;this.vertexConstantData[this.uvTransformIndex+4]=0;this.vertexConstantData[this.uvTransformIndex+5]=1;this.vertexConstantData[this.uvTransformIndex+6]=0;this.vertexConstantData[this.uvTransformIndex+7]=0}if(this.cameraPositionIndex>=0)this.vertexConstantData[this.cameraPositionIndex+3]=1};e.prototype._iActivate=function(e){if(this.usesAnimation)this._renderPass.animationSet.activate(this,this._stage);this._stage.context.setCulling(this.useBothSides?a.NONE:this._defaultCulling,e.projection.coordinateSystem);if(!this.usesTangentSpace&&this.cameraPositionIndex>=0){var t=e.scenePosition;this.vertexConstantData[this.cameraPositionIndex]=t.x;this.vertexConstantData[this.cameraPositionIndex+1]=t.y;this.vertexConstantData[this.cameraPositionIndex+2]=t.z}};e.prototype._iDeactivate=function(){if(this.usesAnimation)this._renderPass.animationSet.deactivate(this,this._stage)};e.prototype._iRender=function(e,t,i){if(e.renderableOwner.animator)e.renderableOwner.animator.setRenderState(this,e,this._stage,t,this.numUsedVertexConstants,this.numUsedStreams);if(this.uvBufferIndex>=0)this._stage.activateBuffer(this.uvBufferIndex,e.getVertexData(s.UV_DATA),e.getVertexOffset(s.UV_DATA),s.UV_FORMAT);if(this.secondaryUVBufferIndex>=0)this._stage.activateBuffer(this.secondaryUVBufferIndex,e.getVertexData(s.SECONDARY_UV_DATA),e.getVertexOffset(s.SECONDARY_UV_DATA),s.SECONDARY_UV_FORMAT);if(this.normalBufferIndex>=0)this._stage.activateBuffer(this.normalBufferIndex,e.getVertexData(s.NORMAL_DATA),e.getVertexOffset(s.NORMAL_DATA),s.NORMAL_FORMAT);if(this.tangentBufferIndex>=0)this._stage.activateBuffer(this.tangentBufferIndex,e.getVertexData(s.TANGENT_DATA),e.getVertexOffset(s.TANGENT_DATA),s.TANGENT_FORMAT);if(this.colorBufferIndex>=0)this._stage.activateBuffer(this.colorBufferIndex,e.getVertexData(r.COLOR_DATA),e.getVertexOffset(r.COLOR_DATA),r.COLOR_FORMAT);if(this.usesUVTransform){var a=e.renderableOwner.uvTransform.matrix;if(a){this.vertexConstantData[this.uvTransformIndex]=a.a;this.vertexConstantData[this.uvTransformIndex+1]=a.b;this.vertexConstantData[this.uvTransformIndex+3]=a.tx;this.vertexConstantData[this.uvTransformIndex+4]=a.c;this.vertexConstantData[this.uvTransformIndex+5]=a.d;this.vertexConstantData[this.uvTransformIndex+7]=a.ty}else{this.vertexConstantData[this.uvTransformIndex]=1;this.vertexConstantData[this.uvTransformIndex+1]=0;this.vertexConstantData[this.uvTransformIndex+3]=0;this.vertexConstantData[this.uvTransformIndex+4]=0;this.vertexConstantData[this.uvTransformIndex+5]=1;this.vertexConstantData[this.uvTransformIndex+7]=0}}if(this.sceneNormalMatrixIndex>=0)e.sourceEntity.inverseSceneTransform.copyRawDataTo(this.vertexConstantData,this.sceneNormalMatrixIndex,false);if(this.usesTangentSpace&&this.cameraPositionIndex>=0){e.sourceEntity.inverseSceneTransform.copyRawDataTo(this._pInverseSceneMatrix);var n=t.scenePosition;var o=n.x;var h=n.y;var l=n.z;this.vertexConstantData[this.cameraPositionIndex]=this._pInverseSceneMatrix[0]*o+this._pInverseSceneMatrix[4]*h+this._pInverseSceneMatrix[8]*l+this._pInverseSceneMatrix[12];this.vertexConstantData[this.cameraPositionIndex+1]=this._pInverseSceneMatrix[1]*o+this._pInverseSceneMatrix[5]*h+this._pInverseSceneMatrix[9]*l+this._pInverseSceneMatrix[13];this.vertexConstantData[this.cameraPositionIndex+2]=this._pInverseSceneMatrix[2]*o+this._pInverseSceneMatrix[6]*h+this._pInverseSceneMatrix[10]*l+this._pInverseSceneMatrix[14]}};e.prototype.invalidateProgram=function(){this._invalidProgram=true};e.prototype.invalidateShader=function(){this._invalidShader=true;this._invalidProgram=true};e.prototype.dispose=function(){this._programData.dispose();this._programData=null};e.prototype._updateProgram=function(){this._invalidProgram=false;var e;if(this._invalidShader){this._invalidShader=false;e=this.createCompiler(this._renderableClass,this._renderPass);e.compile()}this._calcAnimationCode(e.shadedTarget);var t=this._stage.getProgramData(this._animationVertexCode+e.vertexCode,e.fragmentCode+this._animationFragmentCode+e.postAnimationFragmentCode);if(this._programData!=t){if(this._programData)this._programData.dispose();this._programData=t;t.usages++}};e.prototype._calcAnimationCode=function(e){this._animationVertexCode="";this._animationFragmentCode="";if(this.usesAnimation){var t=this._renderPass.animationSet;this._animationVertexCode+=t.getAGALVertexCode(this);if(this.uvDependencies>0&&!this.usesUVTransform)this._animationVertexCode+=t.getAGALUVCode(this);if(this.usesFragmentAnimation)this._animationFragmentCode+=t.getAGALFragmentCode(this,e);t.doneAGALCode(this)}else{var i=this.animatableAttributes.length;for(var r=0;r<i;++r)this._animationVertexCode+="mov "+this.animationTargetRegisters[r]+", "+this.animatableAttributes[r]+"\n";if(this.uvDependencies>0&&!this.usesUVTransform)this._animationVertexCode+="mov "+this.uvTarget+","+this.uvSource+"\n"}};return e}();t.exports=o},{"awayjs-display/lib/base/LineSubGeometry":266,"awayjs-display/lib/base/TriangleSubGeometry":270,"awayjs-renderergl/lib/compilation/ShaderCompilerBase":233,"awayjs-stagegl/lib/base/ContextGLTriangleFace":288}],237:[function(e,t,i){var r=e("awayjs-renderergl/lib/compilation/RegisterPool");var s=e("awayjs-renderergl/lib/compilation/ShaderRegisterElement");var a=function(){function e(e){this._numUsedVertexConstants=0;this._numUsedFragmentConstants=0;this._numUsedStreams=0;this._numUsedTextures=0;this._numUsedVaryings=0;this._profile=e}e.prototype.reset=function(){this._fragmentTempCache=new r("ft",8,false);this._vertexTempCache=new r("vt",8,false);this._varyingCache=new r("v",8);this._textureCache=new r("fs",8);this._vertexAttributesCache=new r("va",8);this._fragmentConstantsCache=new r("fc",28);this._vertexConstantsCache=new r("vc",128);this._fragmentOutputRegister=new s("oc",-1);this._vertexOutputRegister=new s("op",-1);this._numUsedVertexConstants=0;this._numUsedStreams=0;this._numUsedTextures=0;this._numUsedVaryings=0;this._numUsedFragmentConstants=0;var e;for(e=0;e<this._vertexAttributesOffset;++e)this.getFreeVertexAttribute();for(e=0;e<this._vertexConstantOffset;++e)this.getFreeVertexConstant();for(e=0;e<this._varyingsOffset;++e)this.getFreeVarying();for(e=0;e<this._fragmentConstantOffset;++e)this.getFreeFragmentConstant()};e.prototype.dispose=function(){this._fragmentTempCache.dispose();this._vertexTempCache.dispose();this._varyingCache.dispose();this._fragmentConstantsCache.dispose();this._vertexAttributesCache.dispose();this._fragmentTempCache=null;this._vertexTempCache=null;this._varyingCache=null;this._fragmentConstantsCache=null;this._vertexAttributesCache=null;this._fragmentOutputRegister=null;this._vertexOutputRegister=null};e.prototype.addFragmentTempUsages=function(e,t){this._fragmentTempCache.addUsage(e,t)};e.prototype.removeFragmentTempUsage=function(e){this._fragmentTempCache.removeUsage(e)};e.prototype.addVertexTempUsages=function(e,t){this._vertexTempCache.addUsage(e,t)};e.prototype.removeVertexTempUsage=function(e){this._vertexTempCache.removeUsage(e)};e.prototype.getFreeFragmentVectorTemp=function(){return this._fragmentTempCache.requestFreeVectorReg()};e.prototype.getFreeFragmentSingleTemp=function(){return this._fragmentTempCache.requestFreeRegComponent()};e.prototype.getFreeVarying=function(){++this._numUsedVaryings;return this._varyingCache.requestFreeVectorReg()};e.prototype.getFreeFragmentConstant=function(){++this._numUsedFragmentConstants;return this._fragmentConstantsCache.requestFreeVectorReg()};e.prototype.getFreeVertexConstant=function(){++this._numUsedVertexConstants;return this._vertexConstantsCache.requestFreeVectorReg()};e.prototype.getFreeVertexVectorTemp=function(){return this._vertexTempCache.requestFreeVectorReg()};e.prototype.getFreeVertexSingleTemp=function(){return this._vertexTempCache.requestFreeRegComponent()};e.prototype.getFreeVertexAttribute=function(){++this._numUsedStreams;return this._vertexAttributesCache.requestFreeVectorReg()};e.prototype.getFreeTextureReg=function(){++this._numUsedTextures;return this._textureCache.requestFreeVectorReg()};Object.defineProperty(e.prototype,"vertexConstantOffset",{get:function(){return this._vertexConstantOffset},set:function(e){this._vertexConstantOffset=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"vertexAttributesOffset",{get:function(){return this._vertexAttributesOffset},set:function(e){this._vertexAttributesOffset=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"varyingsOffset",{get:function(){return this._varyingsOffset},set:function(e){this._varyingsOffset=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"fragmentConstantOffset",{get:function(){return this._fragmentConstantOffset},set:function(e){this._fragmentConstantOffset=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"fragmentOutputRegister",{get:function(){return this._fragmentOutputRegister},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"numUsedVertexConstants",{get:function(){return this._numUsedVertexConstants},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"numUsedFragmentConstants",{get:function(){return this._numUsedFragmentConstants},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"numUsedStreams",{get:function(){return this._numUsedStreams},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"numUsedTextures",{get:function(){return this._numUsedTextures},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"numUsedVaryings",{get:function(){return this._numUsedVaryings},enumerable:true,configurable:true});return e}();t.exports=a},{"awayjs-renderergl/lib/compilation/RegisterPool":229,"awayjs-renderergl/lib/compilation/ShaderRegisterElement":239}],238:[function(e,t,i){var r=function(){function e(){}return e}();t.exports=r},{}],239:[function(e,t,i){var r=function(){function e(t,i,r){if(r===void 0){r=-1}this._component=r;this._regName=t;this._index=i;this._toStr=this._regName;if(this._index>=0)this._toStr+=this._index;if(r>-1)this._toStr+="."+e.COMPONENTS[r]}e.prototype.toString=function(){return this._toStr};Object.defineProperty(e.prototype,"regName",{get:function(){return this._regName},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:true,configurable:true});e.COMPONENTS=["x","y","z","w"];return e}();t.exports=r},{}],240:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/base/BlendMode");var a=e("awayjs-renderergl/lib/compilation/RenderObjectBase");var n=e("awayjs-renderergl/lib/passes/SkyboxPass");var o=function(e){r(t,e);function t(t,i,r,s){e.call(this,t,i,r,s);this._screenPass=new n(this,i,r,this._stage);this._pAddScreenPass(this._screenPass)}t.prototype._pUpdateRenderObject=function(){e.prototype._pUpdateRenderObject.call(this);this._pRequiresBlending=this._renderObjectOwner.blendMode!=s.NORMAL;this._screenPass.setBlendMode(this._renderObjectOwner.blendMode==s.NORMAL&&this._pRequiresBlending?s.LAYER:this._renderObjectOwner.blendMode)};t.id="skybox";return t}(a);t.exports=o},{"awayjs-core/lib/base/BlendMode":255,"awayjs-renderergl/lib/compilation/RenderObjectBase":231,"awayjs-renderergl/lib/passes/SkyboxPass":246}],241:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/events/Event");var a=function(e){r(t,e);function t(t){e.call(this,t)}t.SHADER_INVALIDATED="ShaderInvalidated";return t}(s);t.exports=a},{"awayjs-core/lib/events/Event":259}],242:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-renderergl/lib/compilation/ShaderObjectBase");var a=e("awayjs-renderergl/lib/utils/ShaderCompilerHelper");var n=e("awayjs-renderergl/lib/passes/RenderPassBase");var o=function(e){r(t,e);function t(t,i,r,a){e.call(this,t,i,r,a);this._diffuseR=1;this._diffuseG=1;this._diffuseB=1;this._diffuseA=1;this._shader=new s(r,this,this._stage)}t.prototype._iIncludeDependencies=function(t){e.prototype._iIncludeDependencies.call(this,t);if(t.texture!=null)t.uvDependencies++};t.prototype._iGetFragmentCode=function(e,t,i){var r="";var s=i.shadedTarget;var n;if(e.texture!=null){n=t.getFreeTextureReg();this._texturesIndex=n.index;r+=a.getTex2DSampleCode(s,i,n,e.texture,e.useSmoothTextures,e.repeatTextures,e.useMipmapping);if(e.alphaThreshold>0){var o=t.getFreeFragmentConstant();this._fragmentConstantsIndex=o.index*4;r+="sub "+s+".w, "+s+".w, "+o+".x\n"+"kil "+s+".w\n"+"add "+s+".w, "+s+".w, "+o+".x\n"}}else if(e.colorBufferIndex!=-1){r+="mov "+s+", "+i.colorVarying+"\n"}else{n=t.getFreeFragmentConstant();this._fragmentConstantsIndex=n.index*4;r+="mov "+s+", "+n+"\n"}return r};t.prototype._iActivate=function(t){e.prototype._iActivate.call(this,t);if(this._shader.texture!=null){this._stage.activateTexture(this._texturesIndex,this._shader.texture,this._shader.repeatTextures,this._shader.useSmoothTextures,this._shader.useMipmapping);if(this._shader.alphaThreshold>0)this._shader.fragmentConstantData[this._fragmentConstantsIndex]=this._shader.alphaThreshold}else if(this._shader.colorBufferIndex==-1){var i=this._fragmentConstantsIndex;var r=this._shader.fragmentConstantData;r[i]=this._diffuseR;r[i+1]=this._diffuseG;r[i+2]=this._diffuseB;r[i+3]=this._diffuseA}};return t}(n);t.exports=o},{"awayjs-renderergl/lib/compilation/ShaderObjectBase":236,"awayjs-renderergl/lib/passes/RenderPassBase":245,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":254}],243:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-renderergl/lib/compilation/ShaderObjectBase");var a=e("awayjs-renderergl/lib/utils/ShaderCompilerHelper");var n=e("awayjs-renderergl/lib/passes/RenderPassBase");var o=function(e){r(t,e);function t(t,i,r,a){e.call(this,t,i,r,a);this._shader=new s(r,this,this._stage)}t.prototype._iIncludeDependencies=function(t){e.prototype._iIncludeDependencies.call(this,t);t.projectionDependencies++;if(t.alphaThreshold>0)t.uvDependencies++};t.prototype._iInitConstantData=function(t){e.prototype._iInitConstantData.call(this,t);var i=this._fragmentConstantsIndex;var r=t.fragmentConstantData;r[i]=1;r[i+1]=255;r[i+2]=65025;r[i+3]=16581375;r[i+4]=1/255;r[i+5]=1/255;r[i+6]=1/255;r[i+7]=0};t.prototype._iGetFragmentCode=function(e,t,i){var r="";var s=i.shadedTarget;var n=t.getFreeTextureReg();var o=t.getFreeFragmentConstant();var h=t.getFreeFragmentConstant();this._fragmentConstantsIndex=o.index*4;var l=t.getFreeFragmentVectorTemp();t.addFragmentTempUsages(l,1);var u=t.getFreeFragmentVectorTemp();t.addFragmentTempUsages(u,1);r+="div "+l+", "+i.projectionFragment+", "+i.projectionFragment+".w\n"+"mul "+l+", "+o+", "+l+".z\n"+"frc "+l+", "+l+"\n"+"mul "+u+", "+l+".yzww, "+h+"\n";if(e.texture&&e.alphaThreshold>0){n=t.getFreeTextureReg();this._texturesIndex=n.index;var p=t.getFreeFragmentVectorTemp();r+=a.getTex2DSampleCode(p,i,n,e.texture,e.useSmoothTextures,e.repeatTextures,e.useMipmapping);var c=t.getFreeFragmentConstant();r+="sub "+p+".w, "+p+".w, "+c+".x\n"+"kil "+p+".w\n"}r+="sub "+s+", "+l+", "+u+"\n";t.removeFragmentTempUsage(l);t.removeFragmentTempUsage(u);return r};t.prototype._iActivate=function(t){e.prototype._iActivate.call(this,t);var i=this._stage.context;if(this._shader.texture&&this._shader.alphaThreshold>0){this._stage.activateTexture(this._texturesIndex,this._shader.texture,this._shader.repeatTextures,this._shader.useSmoothTextures,this._shader.useMipmapping);this._shader.fragmentConstantData[this._fragmentConstantsIndex+8]=this._shader.alphaThreshold}};return t}(n);t.exports=o},{"awayjs-renderergl/lib/compilation/ShaderObjectBase":236,"awayjs-renderergl/lib/passes/RenderPassBase":245,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":254}],244:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-renderergl/lib/compilation/ShaderObjectBase");var a=e("awayjs-renderergl/lib/utils/ShaderCompilerHelper");var n=e("awayjs-renderergl/lib/passes/RenderPassBase");var o=function(e){r(t,e);function t(t,i,r,a){e.call(this,t,i,r,a);this._shader=new s(r,this,this._stage)}t.prototype._iInitConstantData=function(t){e.prototype._iInitConstantData.call(this,t);var i=this._fragmentConstantsIndex;var r=t.fragmentConstantData;r[i+4]=1/255;r[i+5]=1/255;r[i+6]=1/255;r[i+7]=0};t.prototype._iIncludeDependencies=function(t){e.prototype._iIncludeDependencies.call(this,t);t.projectionDependencies++;t.viewDirDependencies++;if(t.alphaThreshold>0)t.uvDependencies++;if(t.viewDirDependencies>0)t.globalPosDependencies++};t.prototype._iGetFragmentCode=function(e,t,i){var r;var s=i.shadedTarget;var n=t.getFreeTextureReg();var o=t.getFreeFragmentConstant();var h=t.getFreeFragmentConstant();this._fragmentConstantsIndex=o.index*4;var l=t.getFreeFragmentVectorTemp();t.addFragmentTempUsages(l,1);var u=t.getFreeFragmentVectorTemp();t.addFragmentTempUsages(u,1);r="dp3 "+l+".z, "+i.viewDirVarying+".xyz, "+i.viewDirVarying+".xyz\n"+"mul "+l+", "+o+", "+l+".z\n"+"frc "+l+", "+l+"\n"+"mul "+u+", "+l+".yzww, "+h+"\n";if(e.alphaThreshold>0){n=t.getFreeTextureReg();this._texturesIndex=n.index;var p=t.getFreeFragmentVectorTemp();r+=a.getTex2DSampleCode(p,i,n,e.texture,e.useSmoothTextures,e.repeatTextures,e.useMipmapping);var c=t.getFreeFragmentConstant();r+="sub "+p+".w, "+p+".w, "+c+".x\n"+"kil "+p+".w\n"}r+="sub "+s+", "+l+", "+u+"\n";return r};t.prototype._iActivate=function(t){e.prototype._iActivate.call(this,t);var i=this._stage.context;var r=t.projection.far;r=1/(2*r*r);var s=this._fragmentConstantsIndex;var a=this._shader.fragmentConstantData;a[s]=1*r;a[s+1]=255*r;a[s+2]=65025*r;a[s+3]=16581375*r;if(this._shader.alphaThreshold>0){this._stage.activateTexture(this._texturesIndex,this._shader.texture,this._shader.repeatTextures,this._shader.useSmoothTextures,this._shader.useMipmapping);a[s+8]=this._shader.alphaThreshold}};return t}(n);t.exports=o},{"awayjs-renderergl/lib/compilation/ShaderObjectBase":236,"awayjs-renderergl/lib/passes/RenderPassBase":245,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":254}],245:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/base/BlendMode");var a=e("awayjs-core/lib/errors/ArgumentError");var n=e("awayjs-core/lib/events/Event");var o=e("awayjs-core/lib/events/EventDispatcher");var h=e("awayjs-stagegl/lib/base/ContextGLBlendFactor");var l=e("awayjs-stagegl/lib/base/ContextGLCompareMode");var u=function(e){r(t,e);function t(t,i,r,s){e.call(this);this._preserveAlpha=true;this._forceSeparateMVP=false;this._depthCompareMode=l.LESS_EQUAL;this._blendFactorSource=h.ONE;this._blendFactorDest=h.ZERO;this._pEnableBlending=false;this._writeDepth=true;this._renderObject=t;this._renderObjectOwner=i;this._renderableClass=r;this._stage=s}Object.defineProperty(t.prototype,"shader",{get:function(){return this._shader},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"animationSet",{get:function(){return this._renderObjectOwner.animationSet},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"preserveAlpha",{get:function(){return this._preserveAlpha},set:function(e){if(this._preserveAlpha==e)return;this._preserveAlpha=e;this.invalidatePass()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"forceSeparateMVP",{get:function(){return this._forceSeparateMVP},set:function(e){if(this._forceSeparateMVP==e)return;this._forceSeparateMVP=e;this.invalidatePass()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"writeDepth",{get:function(){return this._writeDepth},set:function(e){this._writeDepth=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"depthCompareMode",{get:function(){return this._depthCompareMode},set:function(e){this._depthCompareMode=e},enumerable:true,configurable:true});t.prototype.dispose=function(){this._shader.dispose();this._shader=null};t.prototype._iRender=function(e,t,i){this._shader._iRender(e,t,i)};t.prototype.setBlendMode=function(e){switch(e){case s.NORMAL:this._blendFactorSource=h.ONE;this._blendFactorDest=h.ZERO;this._pEnableBlending=false;break;case s.LAYER:this._blendFactorSource=h.SOURCE_ALPHA;this._blendFactorDest=h.ONE_MINUS_SOURCE_ALPHA;this._pEnableBlending=true;break;case s.MULTIPLY:this._blendFactorSource=h.ZERO;this._blendFactorDest=h.SOURCE_COLOR;this._pEnableBlending=true;break;case s.ADD:this._blendFactorSource=h.SOURCE_ALPHA;this._blendFactorDest=h.ONE;this._pEnableBlending=true;break;case s.ALPHA:this._blendFactorSource=h.ZERO;this._blendFactorDest=h.SOURCE_ALPHA;this._pEnableBlending=true;break;default:throw new a("Unsupported blend mode!")}};t.prototype._iActivate=function(e){this._stage.context.setDepthTest(this._writeDepth&&!this._pEnableBlending,this._depthCompareMode);if(this._pEnableBlending)this._stage.context.setBlendFactors(this._blendFactorSource,this._blendFactorDest);this._shader._iActivate(e)};t.prototype._iDeactivate=function(){this._shader._iDeactivate();this._stage.context.setDepthTest(true,l.LESS_EQUAL)};t.prototype.invalidatePass=function(){this._shader.invalidateShader();this.dispatchEvent(new n(n.CHANGE))};t.prototype._iIncludeDependencies=function(e){this._renderObject._iIncludeDependencies(e);if(this._forceSeparateMVP)e.globalPosDependencies++};t.prototype._iInitConstantData=function(e){};t.prototype._iGetPreLightingVertexCode=function(e,t,i){return""};t.prototype._iGetPreLightingFragmentCode=function(e,t,i){return""};t.prototype._iGetVertexCode=function(e,t,i){return""};t.prototype._iGetFragmentCode=function(e,t,i){return""};t.prototype._iGetNormalVertexCode=function(e,t,i){return""};t.prototype._iGetNormalFragmentCode=function(e,t,i){return""};t.prototype._pOutputsNormals=function(e){return false};t.prototype._pOutputsTangentNormals=function(e){return false};t.prototype._pUsesTangentSpace=function(e){return false};return t}(o);t.exports=u},{"awayjs-core/lib/base/BlendMode":255,"awayjs-core/lib/errors/ArgumentError":257,"awayjs-core/lib/events/Event":259,"awayjs-core/lib/events/EventDispatcher":260,"awayjs-stagegl/lib/base/ContextGLBlendFactor":283,"awayjs-stagegl/lib/base/ContextGLCompareMode":284}],246:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-stagegl/lib/base/ContextGLCompareMode");var a=e("awayjs-renderergl/lib/passes/RenderPassBase");var n=e("awayjs-renderergl/lib/compilation/ShaderObjectBase");var o=e("awayjs-renderergl/lib/utils/ShaderCompilerHelper");var h=function(e){r(t,e);function t(t,i,r,s){e.call(this,t,i,r,s);this._skybox=i;this._shader=new n(r,this,this._stage)}t.prototype._iGetFragmentCode=function(e,t,i){var r=",mipnone";if(e.useMipmapping)r=",miplinear";return"tex ft0, v0, fs0 <cube,"+o.getFormatStringForTexture(this._skybox.cubeMap)+"linear,clamp"+r+">\n"};t.prototype._iActivate=function(t){e.prototype._iActivate.call(this,t);var i=this._stage.context;i.setDepthTest(false,s.LESS);this._stage.activateCubeTexture(0,this._skybox.cubeMap,this._shader.useSmoothTextures,this._shader.useMipmapping)};return t}(a);t.exports=h},{"awayjs-renderergl/lib/compilation/ShaderObjectBase":236,"awayjs-renderergl/lib/passes/RenderPassBase":245,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":254,"awayjs-stagegl/lib/base/ContextGLCompareMode":284}],247:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/geom/Matrix3DUtils");var a=e("awayjs-display/lib/base/TriangleSubGeometry");var n=e("awayjs-stagegl/lib/base/ContextGLProgramType");var o=e("awayjs-renderergl/lib/pool/RenderableBase");var h=function(e){r(t,e);function t(t,i,r){e.call(this,t,i,i,i.material,r);this._billboard=i}t.prototype._pGetSubGeometry=function(){var e=this._billboard.material;var i=t._materialGeometry[e.id];if(!i){i=t._materialGeometry[e.id]=new a(true);i.autoDeriveNormals=false;i.autoDeriveTangents=false;i.updateIndices(Array(0,1,2,0,2,3));i.updatePositions(Array(0,e.height,0,e.width,e.height,0,e.width,0,0,0,0,0));i.updateVertexNormals(Array(1,0,0,1,0,0,1,0,0,1,0,0));i.updateVertexTangents(Array(0,0,-1,0,0,-1,0,0,-1,0,0,-1));i.updateUVs(Array(0,0,1,0,1,1,0,1))}else{i.updatePositions(Array(0,e.height,0,e.width,e.height,0,e.width,0,0,0,0,0))}this._pVertexDataDirty[a.POSITION_DATA]=true;this._pVertexDataDirty[a.NORMAL_DATA]=true;this._pVertexDataDirty[a.TANGENT_DATA]=true;this._pVertexDataDirty[a.UV_DATA]=true;return i};t._iIncludeDependencies=function(e){};t._iGetVertexCode=function(e,t,i){var r="";var s=e.globalPosDependencies>0?i.globalPositionVertex:i.localPosition;var a=t.getFreeVertexConstant();t.getFreeVertexConstant();t.getFreeVertexConstant();t.getFreeVertexConstant();e.viewMatrixIndex=a.index*4;if(e.projectionDependencies>0){i.projectionFragment=t.getFreeVarying();var n=t.getFreeVertexVectorTemp();r+="m44 "+n+", "+s+", "+a+"\n"+"mov "+i.projectionFragment+", "+n+"\n"+"mov op, "+n+"\n"}else{r+="m44 op, "+s+", "+a+"\n"}return r};t.prototype._iActivate=function(t,i){e.prototype._iActivate.call(this,t,i);this._stage.activateBuffer(0,this.getVertexData(a.POSITION_DATA),this.getVertexOffset(a.POSITION_DATA),a.POSITION_FORMAT)};t.prototype._iRender=function(t,i,r){e.prototype._iRender.call(this,t,i,r);var a=t.shader;if(a.sceneMatrixIndex>=0){this.sourceEntity.getRenderSceneTransform(i).copyRawDataTo(a.vertexConstantData,a.sceneMatrixIndex,true);r.copyRawDataTo(a.vertexConstantData,a.viewMatrixIndex,true)}else{var o=s.CALCULATION_MATRIX;o.copyFrom(this.sourceEntity.getRenderSceneTransform(i));o.append(r);o.copyRawDataTo(a.vertexConstantData,a.viewMatrixIndex,true)}var h=this._stage.context;h.setProgramConstantsFromArray(n.VERTEX,0,a.vertexConstantData,a.numUsedVertexConstants);h.setProgramConstantsFromArray(n.FRAGMENT,0,a.fragmentConstantData,a.numUsedFragmentConstants);this._stage.context.drawTriangles(this._stage.getIndexBuffer(this.getIndexData()),0,this.numTriangles)};t._materialGeometry=new Object;t.id="billboard";t.vertexAttributesOffset=1;return t}(o);t.exports=h},{"awayjs-core/lib/geom/Matrix3DUtils":262,"awayjs-display/lib/base/TriangleSubGeometry":270,"awayjs-renderergl/lib/pool/RenderableBase":250,"awayjs-stagegl/lib/base/ContextGLProgramType":286}],248:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/geom/Matrix3D");var a=e("awayjs-display/lib/base/LineSubGeometry");var n=e("awayjs-stagegl/lib/base/ContextGLProgramType");var o=e("awayjs-renderergl/lib/pool/RenderableBase");var h=function(e){r(t,e);function t(t,i,r,a,n){if(a===void 0){a=0}if(n===void 0){n=0
}e.call(this,t,i,i,i.material,r,a,n);this._constants=new Array(0,0,0,0);this._thickness=1.25;this._lineSegment=i;this._calcMatrix=new s;this._constants[1]=1/255}t.prototype._pGetSubGeometry=function(){var e=t._lineGeometry[this._lineSegment.id]||(t._lineGeometry[this._lineSegment.id]=new a);this._pVertexDataDirty[a.START_POSITION_DATA]=true;this._pVertexDataDirty[a.END_POSITION_DATA]=true;this._pVertexDataDirty[a.THICKNESS_DATA]=true;this._pVertexDataDirty[a.COLOR_DATA]=true;var i=this._lineSegment.startPostion;var r=this._lineSegment.endPosition;var s;var n;var o;if(e.indices!=null){s=e.startPositions;n=e.endPositions;o=e.thickness}else{s=new Array(3);n=new Array(3);o=new Array(1)}s[0]=i.x;s[1]=i.y;s[2]=i.z;n[0]=r.x;n[1]=r.y;n[2]=r.z;o[0]=this._lineSegment.thickness;e.updatePositions(s,n);e.updateThickness(o);return e};t._iIncludeDependencies=function(e){e.colorDependencies++};t._iGetVertexCode=function(e,t,i){return"m44 vt0, va0, vc8			\n"+"m44 vt1, va1, vc8			\n"+"sub vt2, vt1, vt0 			\n"+"slt vt5.x, vt0.z, vc7.z			\n"+"sub vt5.y, vc5.x, vt5.x			\n"+"add vt4.x, vt0.z, vc7.z			\n"+"sub vt4.y, vt0.z, vt1.z			\n"+"seq vt4.z, vt4.y vc6.x			\n"+"add vt4.y, vt4.y, vt4.z			\n"+"div vt4.z, vt4.x, vt4.y			\n"+"mul vt4.xyz, vt4.zzz, vt2.xyz	\n"+"add vt3.xyz, vt0.xyz, vt4.xyz	\n"+"mov vt3.w, vc5.x			\n"+"mul vt0, vt0, vt5.yyyy			\n"+"mul vt3, vt3, vt5.xxxx			\n"+"add vt0, vt0, vt3				\n"+"sub vt2, vt1, vt0 			\n"+"nrm vt2.xyz, vt2.xyz			\n"+"nrm vt5.xyz, vt0.xyz			\n"+"mov vt5.w, vc5.x				\n"+"crs vt3.xyz, vt2, vt5			\n"+"nrm vt3.xyz, vt3.xyz			\n"+"mul vt3.xyz, vt3.xyz, va2.xxx	\n"+"mov vt3.w, vc5.x			\n"+"dp3 vt4.x, vt0, vc6			\n"+"mul vt4.x, vt4.x, vc7.x			\n"+"mul vt3.xyz, vt3.xyz, vt4.xxx	\n"+"add vt0.xyz, vt0.xyz, vt3.xyz	\n"+"m44 op, vt0, vc0			\n"};t.prototype._iActivate=function(i,r){e.prototype._iActivate.call(this,i,r);this._constants[0]=this._thickness/(this._stage.scissorRect?Math.min(this._stage.scissorRect.width,this._stage.scissorRect.height):Math.min(this._stage.width,this._stage.height));this._constants[2]=r.projection.near;var s=this._stage.context;s.setProgramConstantsFromArray(n.VERTEX,5,t.pONE_VECTOR,1);s.setProgramConstantsFromArray(n.VERTEX,6,t.pFRONT_VECTOR,1);s.setProgramConstantsFromArray(n.VERTEX,7,this._constants,1);s.setProgramConstantsFromMatrix(n.VERTEX,0,r.projection.matrix,true)};t.prototype._iRender=function(t,i,r){e.prototype._iRender.call(this,t,i,r);var s=this._stage.context;this._calcMatrix.copyFrom(this.sourceEntity.sceneTransform);this._calcMatrix.append(i.inverseSceneTransform);s.setProgramConstantsFromMatrix(n.VERTEX,8,this._calcMatrix,true);this._stage.activateBuffer(0,this.getVertexData(a.START_POSITION_DATA),this.getVertexOffset(a.START_POSITION_DATA),a.POSITION_FORMAT);this._stage.activateBuffer(1,this.getVertexData(a.END_POSITION_DATA),this.getVertexOffset(a.END_POSITION_DATA),a.POSITION_FORMAT);this._stage.activateBuffer(2,this.getVertexData(a.THICKNESS_DATA),this.getVertexOffset(a.THICKNESS_DATA),a.THICKNESS_FORMAT);s.drawTriangles(this._stage.getIndexBuffer(this.getIndexData()),0,this.numTriangles)};t.prototype._pGetOverflowRenderable=function(e){return new t(this._pool,this.renderableOwner,this._stage,this._level+1,e)};t._lineGeometry=new Object;t.pONE_VECTOR=Array(1,1,1,1);t.pFRONT_VECTOR=Array(0,0,-1,0);t.id="linesegment";t.vertexAttributesOffset=3;return t}(o);t.exports=h},{"awayjs-core/lib/geom/Matrix3D":261,"awayjs-display/lib/base/LineSubGeometry":266,"awayjs-renderergl/lib/pool/RenderableBase":250,"awayjs-stagegl/lib/base/ContextGLProgramType":286}],249:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/geom/Matrix3D");var a=e("awayjs-display/lib/base/LineSubGeometry");var n=e("awayjs-stagegl/lib/base/ContextGLProgramType");var o=e("awayjs-renderergl/lib/pool/RenderableBase");var h=function(e){r(t,e);function t(t,i,r,a,n){if(a===void 0){a=0}if(n===void 0){n=0}e.call(this,t,i.parentMesh,i,i.material,r,a,n);this._constants=new Array(0,0,0,0);this._thickness=1.25;this.subMesh=i;this._calcMatrix=new s;this._constants[1]=1/255}t.prototype._pGetSubGeometry=function(){var e=this.subMesh.subGeometry;this._pVertexDataDirty[a.START_POSITION_DATA]=true;this._pVertexDataDirty[a.END_POSITION_DATA]=true;if(e.thickness)this._pVertexDataDirty[a.THICKNESS_DATA]=true;if(e.startColors)this._pVertexDataDirty[a.COLOR_DATA]=true;return e};t._iIncludeDependencies=function(e){e.colorDependencies++};t._iGetVertexCode=function(e,t,i){return"m44 vt0, va0, vc8			\n"+"m44 vt1, va1, vc8			\n"+"sub vt2, vt1, vt0 			\n"+"slt vt5.x, vt0.z, vc7.z			\n"+"sub vt5.y, vc5.x, vt5.x			\n"+"add vt4.x, vt0.z, vc7.z			\n"+"sub vt4.y, vt0.z, vt1.z			\n"+"seq vt4.z, vt4.y vc6.x			\n"+"add vt4.y, vt4.y, vt4.z			\n"+"div vt4.z, vt4.x, vt4.y			\n"+"mul vt4.xyz, vt4.zzz, vt2.xyz	\n"+"add vt3.xyz, vt0.xyz, vt4.xyz	\n"+"mov vt3.w, vc5.x			\n"+"mul vt0, vt0, vt5.yyyy			\n"+"mul vt3, vt3, vt5.xxxx			\n"+"add vt0, vt0, vt3				\n"+"sub vt2, vt1, vt0 			\n"+"nrm vt2.xyz, vt2.xyz			\n"+"nrm vt5.xyz, vt0.xyz			\n"+"mov vt5.w, vc5.x				\n"+"crs vt3.xyz, vt2, vt5			\n"+"nrm vt3.xyz, vt3.xyz			\n"+"mul vt3.xyz, vt3.xyz, va2.xxx	\n"+"mov vt3.w, vc5.x			\n"+"dp3 vt4.x, vt0, vc6			\n"+"mul vt4.x, vt4.x, vc7.x			\n"+"mul vt3.xyz, vt3.xyz, vt4.xxx	\n"+"add vt0.xyz, vt0.xyz, vt3.xyz	\n"+"m44 op, vt0, vc0			\n"};t.prototype._iActivate=function(i,r){e.prototype._iActivate.call(this,i,r);this._constants[0]=this._thickness/(this._stage.scissorRect?Math.min(this._stage.scissorRect.width,this._stage.scissorRect.height):Math.min(this._stage.width,this._stage.height));this._constants[2]=r.projection.near;var s=this._stage.context;s.setProgramConstantsFromArray(n.VERTEX,5,t.pONE_VECTOR,1);s.setProgramConstantsFromArray(n.VERTEX,6,t.pFRONT_VECTOR,1);s.setProgramConstantsFromArray(n.VERTEX,7,this._constants,1);s.setProgramConstantsFromMatrix(n.VERTEX,0,r.projection.matrix,true)};t.prototype._iRender=function(t,i,r){e.prototype._iRender.call(this,t,i,r);var s=this._stage.context;this._calcMatrix.copyFrom(this.sourceEntity.sceneTransform);this._calcMatrix.append(i.inverseSceneTransform);s.setProgramConstantsFromMatrix(n.VERTEX,8,this._calcMatrix,true);this._stage.activateBuffer(0,this.getVertexData(a.START_POSITION_DATA),this.getVertexOffset(a.START_POSITION_DATA),a.POSITION_FORMAT);this._stage.activateBuffer(1,this.getVertexData(a.END_POSITION_DATA),this.getVertexOffset(a.END_POSITION_DATA),a.POSITION_FORMAT);this._stage.activateBuffer(2,this.getVertexData(a.THICKNESS_DATA),this.getVertexOffset(a.THICKNESS_DATA),a.THICKNESS_FORMAT);s.drawTriangles(this._stage.getIndexBuffer(this.getIndexData()),0,this.numTriangles)};t.prototype._pGetOverflowRenderable=function(e){return new t(this._pool,this.renderableOwner,this._stage,this._level+1,e)};t.pONE_VECTOR=Array(1,1,1,1);t.pFRONT_VECTOR=Array(0,0,-1,0);t.id="linesubmesh";t.vertexAttributesOffset=3;return t}(o);t.exports=h},{"awayjs-core/lib/geom/Matrix3D":261,"awayjs-display/lib/base/LineSubGeometry":266,"awayjs-renderergl/lib/pool/RenderableBase":250,"awayjs-stagegl/lib/base/ContextGLProgramType":286}],250:[function(e,t,i){var r=e("awayjs-core/lib/errors/AbstractMethodError");var s=e("awayjs-display/lib/base/SubGeometryBase");var a=e("awayjs-display/lib/base/TriangleSubGeometry");var n=e("awayjs-display/lib/events/RenderableOwnerEvent");var o=e("awayjs-display/lib/events/SubGeometryEvent");var h=e("awayjs-stagegl/lib/pool/IndexDataPool");var l=e("awayjs-stagegl/lib/pool/VertexDataPool");var u=function(){function e(e,t,i,r,s,a,o){var h=this;if(a===void 0){a=0}if(o===void 0){o=0}this._geometryDirty=true;this._indexDataDirty=true;this._vertexData=new Object;this._pVertexDataDirty=new Object;this._vertexOffset=new Object;this._onIndicesUpdatedDelegate=function(e){return h._onIndicesUpdated(e)};this._onVerticesUpdatedDelegate=function(e){return h._onVerticesUpdated(e)};this._onRenderObjectOwnerUpdatedDelegate=function(e){return h._onRenderObjectOwnerUpdated(e)};this._pool=e;this._stage=s;this._level=a;this._indexOffset=o;this.sourceEntity=t;this.renderableOwner=i;this.renderableOwner.addEventListener(n.RENDER_OBJECT_OWNER_UPDATED,this._onRenderObjectOwnerUpdatedDelegate);this.renderObjectOwner=r}Object.defineProperty(e.prototype,"overflow",{get:function(){if(this._indexDataDirty)this._updateIndexData();return this._overflow},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"numTriangles",{get:function(){return this._numTriangles},enumerable:true,configurable:true});e.prototype.getIndexData=function(){if(this._indexDataDirty)this._updateIndexData();return this._indexData};e.prototype.getVertexData=function(e){if(this._indexDataDirty)this._updateIndexData();if(this._pVertexDataDirty[e])this._updateVertexData(e);return this._vertexData[this._concatenateArrays?a.VERTEX_DATA:e]};e.prototype.getVertexOffset=function(e){if(this._indexDataDirty)this._updateIndexData();if(this._pVertexDataDirty[e])this._updateVertexData(e);return this._vertexOffset[e]};e.prototype.dispose=function(){this._pool.disposeItem(this.renderableOwner);this._indexData.dispose();this._indexData=null;for(var e in this._vertexData){this._vertexData[e].dispose();this._vertexData[e]=null}if(this._overflow){this._overflow.dispose();this._overflow=null}};e.prototype.invalidateGeometry=function(){this._geometryDirty=true;if(this._level==0)this._indexDataDirty=true;if(this._overflow)this._overflow.invalidateGeometry()};e.prototype.invalidateIndexData=function(){this._indexDataDirty=true};e.prototype.invalidateVertexData=function(e){this._pVertexDataDirty[e]=true};e.prototype._pGetSubGeometry=function(){throw new r};e._iGetVertexCode=function(e,t,i){return""};e._iGetFragmentCode=function(e,t,i){return""};e.prototype._iFillIndexData=function(e){if(this._geometryDirty)this._updateGeometry();this._indexData=h.getItem(this._subGeometry,this._level,e);this._numTriangles=this._indexData.data.length/3;e=this._indexData.offset;if(e<this._subGeometry.indices.length){if(!this._overflow)this._overflow=this._pGetOverflowRenderable(e);this._overflow._iFillIndexData(e)}else if(this._overflow){this._overflow.dispose();this._overflow=null}};e.prototype._pGetOverflowRenderable=function(e){throw new r};e.prototype._iActivate=function(e,t){e._iActivate(t)};e.prototype._iRender=function(e,t,i){e._iRender(this,t,i)};e.prototype._iDeactivate=function(e){e._iDeactivate()};e.prototype._updateGeometry=function(){if(this._subGeometry){if(this._level==0)this._subGeometry.removeEventListener(o.INDICES_UPDATED,this._onIndicesUpdatedDelegate);this._subGeometry.removeEventListener(o.VERTICES_UPDATED,this._onVerticesUpdatedDelegate)}this._subGeometry=this._pGetSubGeometry();this._concatenateArrays=this._subGeometry.concatenateArrays;if(this._subGeometry){if(this._level==0)this._subGeometry.addEventListener(o.INDICES_UPDATED,this._onIndicesUpdatedDelegate);this._subGeometry.addEventListener(o.VERTICES_UPDATED,this._onVerticesUpdatedDelegate)}this._geometryDirty=false};e.prototype._updateIndexData=function(){this._iFillIndexData(this._indexOffset);this._indexDataDirty=false};e.prototype._updateVertexData=function(e){this._vertexOffset[e]=this._subGeometry.getOffset(e);if(this._subGeometry.concatenateArrays)e=s.VERTEX_DATA;this._vertexData[e]=l.getItem(this._subGeometry,this.getIndexData(),e);this._pVertexDataDirty[e]=false};e.prototype._onIndicesUpdated=function(e){this.invalidateIndexData()};e.prototype._onVerticesUpdated=function(e){this._concatenateArrays=e.target.concatenateArrays;this.invalidateVertexData(e.dataType)};e.prototype._onRenderObjectOwnerUpdated=function(e){this.renderObjectOwner=e.renderObjectOwner};return e}();t.exports=u},{"awayjs-core/lib/errors/AbstractMethodError":256,"awayjs-display/lib/base/SubGeometryBase":268,"awayjs-display/lib/base/TriangleSubGeometry":270,"awayjs-display/lib/events/RenderableOwnerEvent":272,"awayjs-display/lib/events/SubGeometryEvent":273,"awayjs-stagegl/lib/pool/IndexDataPool":291,"awayjs-stagegl/lib/pool/VertexDataPool":293}],251:[function(e,t,i){var r=e("awayjs-renderergl/lib/compilation/RenderObjectPool");var s=e("awayjs-renderergl/lib/compilation/RenderBasicMaterialObject");var a=e("awayjs-renderergl/lib/compilation/SkyboxRenderObject");var n=e("awayjs-renderergl/lib/compilation/DepthRenderObject");var o=e("awayjs-renderergl/lib/compilation/DistanceRenderObject");var h=function(){function e(e,t){this._renderablePool=new Object;this._renderableClass=e;this._stage=t;this._materialRenderObjectPool=new r(s,this._renderableClass,this._stage);this._skyboxRenderObjectPool=new r(a,this._renderableClass,this._stage);this._depthRenderObjectPool=new r(n,this._renderableClass,this._stage);this._distanceRenderObjectPool=new r(o,this._renderableClass,this._stage)}e.prototype.getItem=function(e){return this._renderablePool[e.id]||(this._renderablePool[e.id]=e._iAddRenderable(new this._renderableClass(this,e,this._stage)))};e.prototype.getMaterialRenderObject=function(e){return this._materialRenderObjectPool.getItem(e)};e.prototype.getSkyboxRenderObject=function(e){return this._skyboxRenderObjectPool.getItem(e)};e.prototype.getDepthRenderObject=function(e){return this._depthRenderObjectPool.getItem(e)};e.prototype.getDistanceRenderObject=function(e){return this._distanceRenderObjectPool.getItem(e)};e.prototype.disposeItem=function(e){e._iRemoveRenderable(this._renderablePool[e.id]);this._renderablePool[e.id]=null};e.prototype.dispose=function(){for(var t in this._renderablePool)this._renderablePool[t].dispose();e.disposePool(this._renderableClass,this._stage)};e.getPool=function(t,i){var r=e._pools[i.stageIndex]||(e._pools[i.stageIndex]=new Object);return r[t.id]||(r[t.id]=new e(t,i))};e.disposePool=function(t,i){var r=e._pools[i.stageIndex];if(r==undefined)return;if(r[t.id])r[t.id]=undefined};e._pools=new Object;return e}();t.exports=h},{"awayjs-renderergl/lib/compilation/DepthRenderObject":227,"awayjs-renderergl/lib/compilation/DistanceRenderObject":228,"awayjs-renderergl/lib/compilation/RenderBasicMaterialObject":230,"awayjs-renderergl/lib/compilation/RenderObjectPool":232,"awayjs-renderergl/lib/compilation/SkyboxRenderObject":240}],252:[function(e,t,i){var r=e("awayjs-renderergl/lib/pool/BillboardRenderable");var s=e("awayjs-renderergl/lib/pool/LineSegmentRenderable");var a=e("awayjs-renderergl/lib/pool/LineSubMeshRenderable");var n=e("awayjs-renderergl/lib/pool/TriangleSubMeshRenderable");var o=e("awayjs-renderergl/lib/pool/RenderablePoolBase");var h=function(){function e(e){this._renderer=e}Object.defineProperty(e.prototype,"stage",{get:function(){return this._pStage},set:function(e){if(this._pStage==e)return;if(this._pStage)this.dispose();this._pStage=e;if(this._pStage)this._pUpdatePool()},enumerable:true,configurable:true});e.prototype._pUpdatePool=function(){this._billboardRenderablePool=o.getPool(r,this._pStage);this._lineSegmentRenderablePool=o.getPool(s,this._pStage);this._triangleSubMeshRenderablePool=o.getPool(n,this._pStage);this._lineSubMeshRenderablePool=o.getPool(a,this._pStage)};e.prototype.dispose=function(){this._billboardRenderablePool.dispose();this._billboardRenderablePool=null;this._lineSegmentRenderablePool.dispose();this._lineSegmentRenderablePool=null;this._triangleSubMeshRenderablePool.dispose();this._triangleSubMeshRenderablePool=null;this._lineSubMeshRenderablePool.dispose();this._lineSubMeshRenderablePool=null};e.prototype.applyBillboard=function(e){this._renderer.applyRenderable(this._billboardRenderablePool.getItem(e))};e.prototype.applyLineSegment=function(e){this._renderer.applyRenderable(this._lineSegmentRenderablePool.getItem(e))};e.prototype.applyTriangleSubMesh=function(e){this._renderer.applyRenderable(this._triangleSubMeshRenderablePool.getItem(e))};e.prototype.applyLineSubMesh=function(e){this._renderer.applyRenderable(this._lineSubMeshRenderablePool.getItem(e))};return e}();t.exports=h},{"awayjs-renderergl/lib/pool/BillboardRenderable":247,"awayjs-renderergl/lib/pool/LineSegmentRenderable":248,"awayjs-renderergl/lib/pool/LineSubMeshRenderable":249,"awayjs-renderergl/lib/pool/RenderablePoolBase":251,"awayjs-renderergl/lib/pool/TriangleSubMeshRenderable":253}],253:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/geom/Matrix3DUtils");var a=e("awayjs-display/lib/base/TriangleSubGeometry");var n=e("awayjs-stagegl/lib/base/ContextGLVertexBufferFormat");var o=e("awayjs-stagegl/lib/base/ContextGLProgramType");var h=e("awayjs-renderergl/lib/pool/RenderableBase");var l=function(e){r(t,e);function t(t,i,r,s,a){if(s===void 0){s=0}if(a===void 0){a=0}e.call(this,t,i.parentMesh,i,i.material,r,s,a);this.subMesh=i}t.prototype._pGetSubGeometry=function(){var e;if(this.subMesh.animator)e=this.subMesh.animator.getRenderableSubGeometry(this,this.subMesh.subGeometry);else e=this.subMesh.subGeometry;this._pVertexDataDirty[a.POSITION_DATA]=true;if(e.vertexNormals)this._pVertexDataDirty[a.NORMAL_DATA]=true;if(e.vertexTangents)this._pVertexDataDirty[a.TANGENT_DATA]=true;if(e.uvs)this._pVertexDataDirty[a.UV_DATA]=true;if(e.secondaryUVs)this._pVertexDataDirty[a.SECONDARY_UV_DATA]=true;if(e.jointIndices)this._pVertexDataDirty[a.JOINT_INDEX_DATA]=true;if(e.jointWeights)this._pVertexDataDirty[a.JOINT_WEIGHT_DATA]=true;switch(e.jointsPerVertex){case 1:this.JOINT_INDEX_FORMAT=this.JOINT_WEIGHT_FORMAT=n.FLOAT_1;break;case 2:this.JOINT_INDEX_FORMAT=this.JOINT_WEIGHT_FORMAT=n.FLOAT_2;break;case 3:this.JOINT_INDEX_FORMAT=this.JOINT_WEIGHT_FORMAT=n.FLOAT_3;break;case 4:this.JOINT_INDEX_FORMAT=this.JOINT_WEIGHT_FORMAT=n.FLOAT_4;break;default:}return e};t._iIncludeDependencies=function(e){};t._iGetVertexCode=function(e,t,i){var r="";var s=e.globalPosDependencies>0?i.globalPositionVertex:i.localPosition;var a=t.getFreeVertexConstant();t.getFreeVertexConstant();t.getFreeVertexConstant();t.getFreeVertexConstant();e.viewMatrixIndex=a.index*4;if(e.projectionDependencies>0){i.projectionFragment=t.getFreeVarying();var n=t.getFreeVertexVectorTemp();r+="m44 "+n+", "+s+", "+a+"\n"+"mov "+i.projectionFragment+", "+n+"\n"+"mov op, "+n+"\n"}else{r+="m44 op, "+s+", "+a+"\n"}return r};t.prototype._iRender=function(t,i,r){e.prototype._iRender.call(this,t,i,r);var n=t.shader;if(n.sceneMatrixIndex>=0){this.sourceEntity.getRenderSceneTransform(i).copyRawDataTo(n.vertexConstantData,n.sceneMatrixIndex,true);r.copyRawDataTo(n.vertexConstantData,n.viewMatrixIndex,true)}else{var h=s.CALCULATION_MATRIX;h.copyFrom(this.sourceEntity.getRenderSceneTransform(i));h.append(r);h.copyRawDataTo(n.vertexConstantData,n.viewMatrixIndex,true)}var l=this._stage.context;l.setProgramConstantsFromArray(o.VERTEX,0,n.vertexConstantData,n.numUsedVertexConstants);l.setProgramConstantsFromArray(o.FRAGMENT,0,n.fragmentConstantData,n.numUsedFragmentConstants);this._stage.activateBuffer(0,this.getVertexData(a.POSITION_DATA),this.getVertexOffset(a.POSITION_DATA),a.POSITION_FORMAT);this._stage.context.drawTriangles(this._stage.getIndexBuffer(this.getIndexData()),0,this.numTriangles)};t.prototype._pGetOverflowRenderable=function(e){return new t(this._pool,this.renderableOwner,this._stage,this._level+1,e)};t.id="trianglesubmesh";t.vertexAttributesOffset=1;return t}(h);t.exports=l},{"awayjs-core/lib/geom/Matrix3DUtils":262,"awayjs-display/lib/base/TriangleSubGeometry":270,"awayjs-renderergl/lib/pool/RenderableBase":250,"awayjs-stagegl/lib/base/ContextGLProgramType":286,"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat":289}],254:[function(e,t,i){var r=e("awayjs-stagegl/lib/base/ContextGLTextureFormat");var s=function(){function e(){}e.getTex2DSampleCode=function(t,i,r,s,a,n,o,h,l){if(h===void 0){h=null}if(l===void 0){l=null}var u=l||(n?"wrap":"clamp");var p=e.getFormatStringForTexture(s);var c=a?o?"linear,miplinear":"linear":o?"nearest,mipnearest":"nearest";if(h==null)h=i.uvVarying;return"tex "+t+", "+h+", "+r+" <2d,"+c+","+p+u+">\n"};e.getTexCubeSampleCode=function(t,i,r,s,a,n){var o;var h=e.getFormatStringForTexture(r);var o=s?a?"linear,miplinear":"linear":a?"nearest,mipnearest":"nearest";return"tex "+t+", "+n+", "+i+" <cube,"+h+o+">\n"};e.getFormatStringForTexture=function(e){switch(e.format){case r.COMPRESSED:return"dxt1,";break;case r.COMPRESSED_ALPHA:return"dxt5,";break;default:return""}};return e}();t.exports=s},{"awayjs-stagegl/lib/base/ContextGLTextureFormat":287}],255:[function(e,t,i){t.exports=e(146)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-core/lib/base/BlendMode.js":146}],256:[function(e,t,i){t.exports=e(3)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/AbstractMethodError.js":3,"awayjs-core/lib/errors/Error":258}],257:[function(e,t,i){t.exports=e(4)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/ArgumentError.js":4,"awayjs-core/lib/errors/Error":258}],258:[function(e,t,i){t.exports=e(5)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/Error.js":5}],259:[function(e,t,i){t.exports=e(7)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/Event.js":7}],260:[function(e,t,i){t.exports=e(8)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/EventDispatcher.js":8}],261:[function(e,t,i){t.exports=e(107)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Matrix3D.js":107,"awayjs-core/lib/errors/ArgumentError":257,"awayjs-core/lib/geom/Orientation3D":263,"awayjs-core/lib/geom/Vector3D":264}],262:[function(e,t,i){t.exports=e(108)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Matrix3DUtils.js":108,"awayjs-core/lib/geom/Matrix3D":261,"awayjs-core/lib/geom/Vector3D":264}],263:[function(e,t,i){t.exports=e(109)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Orientation3D.js":109}],264:[function(e,t,i){t.exports=e(115)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Vector3D.js":115}],265:[function(e,t,i){t.exports=e(15)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/AssetType.js":15}],266:[function(e,t,i){t.exports=e(37)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/LineSubGeometry.js":37,"awayjs-display/lib/base/LineSubMesh":267,"awayjs-display/lib/base/SubGeometryBase":268,"awayjs-display/lib/base/TriangleSubGeometry":270,"awayjs-display/lib/events/SubGeometryEvent":273}],267:[function(e,t,i){t.exports=e(38)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/LineSubMesh.js":38,"awayjs-core/lib/library/AssetType":281,"awayjs-display/lib/base/SubMeshBase":269}],268:[function(e,t,i){t.exports=e(40)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/SubGeometryBase.js":40,"awayjs-core/lib/errors/AbstractMethodError":275,"awayjs-core/lib/library/NamedAssetBase":282,"awayjs-display/lib/events/SubGeometryEvent":273}],269:[function(e,t,i){t.exports=e(41)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/SubMeshBase.js":41,"awayjs-core/lib/errors/AbstractMethodError":275,"awayjs-core/lib/library/NamedAssetBase":282}],270:[function(e,t,i){t.exports=e(43)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/TriangleSubGeometry.js":43,"awayjs-core/lib/geom/Vector3D":280,"awayjs-display/lib/base/SubGeometryBase":268,"awayjs-display/lib/base/TriangleSubMesh":271,"awayjs-display/lib/events/SubGeometryEvent":273}],271:[function(e,t,i){t.exports=e(44)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/TriangleSubMesh.js":44,"awayjs-core/lib/library/AssetType":281,"awayjs-display/lib/base/SubMeshBase":269}],272:[function(e,t,i){t.exports=e(177)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-display/lib/events/RenderableOwnerEvent.js":177,"awayjs-core/lib/events/Event":278}],273:[function(e,t,i){t.exports=e(65)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/SubGeometryEvent.js":65,"awayjs-core/lib/events/Event":278}],274:[function(e,t,i){t.exports=e(179)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-display/lib/materials/LightSources.js":179}],275:[function(e,t,i){t.exports=e(3)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/AbstractMethodError.js":3,"awayjs-core/lib/errors/Error":276}],276:[function(e,t,i){t.exports=e(5)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/Error.js":5}],277:[function(e,t,i){t.exports=e(6)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/AssetEvent.js":6,"awayjs-core/lib/events/Event":278}],278:[function(e,t,i){t.exports=e(7)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/Event.js":7}],279:[function(e,t,i){t.exports=e(8)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/EventDispatcher.js":8}],280:[function(e,t,i){t.exports=e(115)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Vector3D.js":115}],281:[function(e,t,i){t.exports=e(15)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/AssetType.js":15}],282:[function(e,t,i){t.exports=e(16)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/NamedAssetBase.js":16,"awayjs-core/lib/errors/AbstractMethodError":275,"awayjs-core/lib/events/AssetEvent":277,"awayjs-core/lib/events/EventDispatcher":279}],283:[function(e,t,i){var r=function(){function e(){}e.DESTINATION_ALPHA="destinationAlpha";e.DESTINATION_COLOR="destinationColor";e.ONE="one";e.ONE_MINUS_DESTINATION_ALPHA="oneMinusDestinationAlpha";e.ONE_MINUS_DESTINATION_COLOR="oneMinusDestinationColor";e.ONE_MINUS_SOURCE_ALPHA="oneMinusSourceAlpha";e.ONE_MINUS_SOURCE_COLOR="oneMinusSourceColor";e.SOURCE_ALPHA="sourceAlpha";e.SOURCE_COLOR="sourceColor";e.ZERO="zero";return e}();t.exports=r},{}],284:[function(e,t,i){var r=function(){function e(){}e.ALWAYS="always";e.EQUAL="equal";e.GREATER="greater";e.GREATER_EQUAL="greaterEqual";e.LESS="less";e.LESS_EQUAL="lessEqual";e.NEVER="never";e.NOT_EQUAL="notEqual";return e}();t.exports=r},{}],285:[function(e,t,i){var r=function(){function e(){}e.BASELINE="baseline";e.BASELINE_CONSTRAINED="baselineConstrained";e.BASELINE_EXTENDED="baselineExtended";return e}();t.exports=r},{}],286:[function(e,t,i){var r=function(){function e(){}e.FRAGMENT="fragment";e.VERTEX="vertex";return e}();t.exports=r},{}],287:[function(e,t,i){var r=function(){function e(){}e.BGRA="bgra";e.BGRA_PACKED="bgraPacked4444";e.BGR_PACKED="bgrPacked565";e.COMPRESSED="compressed";e.COMPRESSED_ALPHA="compressedAlpha";return e}();t.exports=r},{}],288:[function(e,t,i){var r=function(){function e(){}e.BACK="back";e.FRONT="front";e.FRONT_AND_BACK="frontAndBack";e.NONE="none";return e}();t.exports=r},{}],289:[function(e,t,i){var r=function(){function e(){}e.BYTES_4="bytes4";e.FLOAT_1="float1";e.FLOAT_2="float2";e.FLOAT_3="float3";e.FLOAT_4="float4";return e}();t.exports=r},{}],290:[function(e,t,i){var r=function(){function e(e){this._dataDirty=true;this.invalid=new Array(8);this.contexts=new Array(8);this.buffers=new Array(8);this.level=e}e.prototype.updateData=function(t,i,r){if(this._dataDirty){this._dataDirty=false;if(i.length<e.LIMIT_INDICES&&r<e.LIMIT_VERTS){this.indexMappings=null;this.originalIndices=null;this.setData(i);this.offset=i.length}else{var s;var a;var n;var o;var h;var l=new Array;this.indexMappings=new Array(i.length);this.originalIndices=new Array;s=this.indexMappings.length;while(s--)this.indexMappings[s]=-1;var u;var p;n=0;a=i.length;s=t;h=0;while(s<a&&n+3<e.LIMIT_INDICES&&h+3<e.LIMIT_VERTS){for(o=0;o<3;o++){u=i[s+o];if(this.indexMappings[u]>=0){p=this.indexMappings[u]}else{p=h++;this.indexMappings[u]=p;this.originalIndices.push(u)}l[n+o]=p}n+=3;s+=3}this.setData(l);this.offset=s}}};e.prototype.invalidateData=function(){this._dataDirty=true};e.prototype.dispose=function(){for(var e=0;e<8;++e){if(this.contexts[e]){this.buffers[e].dispose();this.buffers[e]=null;this.contexts[e]=null}}};e.prototype.disposeBuffers=function(){for(var e=0;e<8;++e){if(this.buffers[e]){this.buffers[e].dispose();this.buffers[e]=null}}};e.prototype.invalidateBuffers=function(){for(var e=0;e<8;++e)this.invalid[e]=true};e.prototype.setData=function(e){if(this.data&&this.data.length!=e.length)this.disposeBuffers();else this.invalidateBuffers();this.data=e};e.LIMIT_VERTS=65535;e.LIMIT_INDICES=16777215;return e}();t.exports=r},{}],291:[function(e,t,i){var r=e("awayjs-stagegl/lib/pool/IndexData");var s=function(){function e(){}e.getItem=function(t,i,s){var a=e._pool[t.id]||(e._pool[t.id]=new Array);var n=a[i]||(a[i]=new r(i));n.updateData(s,t.indices,t.numVertices);return n};e.disposeItem=function(e,t){var i=this._pool[e];i[t].dispose();i[t]=null};e.prototype.disposeData=function(t){var i=e._pool[t];var r=i.length;for(var s=0;s<r;s++){i[s].dispose();i[s]=null}e._pool[t]=null};e._pool=new Object;return e}();t.exports=s},{"awayjs-stagegl/lib/pool/IndexData":290}],292:[function(e,t,i){var r=e("awayjs-display/lib/base/SubGeometryBase");var s=e("awayjs-display/lib/events/SubGeometryEvent");var a=function(){function e(e,t){var i=this;this._dataDirty=true;this.invalid=new Array(8);this.buffers=new Array(8);this.contexts=new Array(8);this._subGeometry=e;this._dataType=t;this._onVerticesUpdatedDelegate=function(e){return i._onVerticesUpdated(e)};this._subGeometry.addEventListener(s.VERTICES_UPDATED,this._onVerticesUpdatedDelegate)}e.prototype.updateData=function(e,t){if(e===void 0){e=null}if(t===void 0){t=null}if(this._dataDirty){this._dataDirty=false;this.dataPerVertex=this._subGeometry.getStride(this._dataType);var i=this._subGeometry[this._dataType];if(t==null){this.setData(i)}else{var r=new Array(e.length*this.dataPerVertex);var s;var a;var n=0;var o=0;while(n<e.length){s=e[n];a=t[s]*this.dataPerVertex;s*=this.dataPerVertex;for(o=0;o<this.dataPerVertex;o++)r[a+o]=i[s+o];n++}this.setData(r)}}};e.prototype.dispose=function(){for(var e=0;e<8;++e){if(this.contexts[e]){this.buffers[e].dispose();this.buffers[e]=null;this.contexts[e]=null}}};e.prototype.disposeBuffers=function(){for(var e=0;e<8;++e){if(this.buffers[e]){this.buffers[e].dispose();this.buffers[e]=null}}};e.prototype.invalidateBuffers=function(){for(var e=0;e<8;++e)this.invalid[e]=true};e.prototype.setData=function(e){if(this.data&&this.data.length!=e.length)this.disposeBuffers();else this.invalidateBuffers();this.data=e};e.prototype._onVerticesUpdated=function(e){var t=this._subGeometry.concatenateArrays?r.VERTEX_DATA:e.dataType;if(t==this._dataType)this._dataDirty=true};return e}();t.exports=a},{"awayjs-display/lib/base/SubGeometryBase":294,"awayjs-display/lib/events/SubGeometryEvent":295}],293:[function(e,t,i){var r=e("awayjs-display/lib/base/SubGeometryBase");var s=e("awayjs-stagegl/lib/pool/VertexData");var a=function(){function e(){}e.getItem=function(t,i,a){if(t.concatenateArrays)a=r.VERTEX_DATA;var n=e._pool[t.id]||(e._pool[t.id]=new Object);var o=n[a]||(n[a]=new Array);var h=o[i.level]||(o[i.level]=new s(t,a));h.updateData(i.originalIndices,i.indexMappings);return h};e.disposeItem=function(t,i,r){var s=e._pool[t.id];var a=s[r];a[i].dispose();a[i]=null};e.prototype.disposeData=function(t){var i=e._pool[t.id];
for(var r in i){var s=i[r];var a=s.length;for(var n=0;n<a;n++){s[n].dispose();s[n]=null}}e._pool[t.id]=null};e._pool=new Object;return e}();t.exports=a},{"awayjs-display/lib/base/SubGeometryBase":294,"awayjs-stagegl/lib/pool/VertexData":292}],294:[function(e,t,i){t.exports=e(40)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/SubGeometryBase.js":40,"awayjs-core/lib/errors/AbstractMethodError":296,"awayjs-core/lib/library/NamedAssetBase":301,"awayjs-display/lib/events/SubGeometryEvent":295}],295:[function(e,t,i){t.exports=e(65)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/SubGeometryEvent.js":65,"awayjs-core/lib/events/Event":299}],296:[function(e,t,i){t.exports=e(3)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/AbstractMethodError.js":3,"awayjs-core/lib/errors/Error":297}],297:[function(e,t,i){t.exports=e(5)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/Error.js":5}],298:[function(e,t,i){t.exports=e(6)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/AssetEvent.js":6,"awayjs-core/lib/events/Event":299}],299:[function(e,t,i){t.exports=e(7)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/Event.js":7}],300:[function(e,t,i){t.exports=e(8)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/EventDispatcher.js":8}],301:[function(e,t,i){t.exports=e(16)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/NamedAssetBase.js":16,"awayjs-core/lib/errors/AbstractMethodError":296,"awayjs-core/lib/events/AssetEvent":298,"awayjs-core/lib/events/EventDispatcher":300}],302:[function(e,t,i){t.exports=e(284)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-stagegl/lib/base/ContextGLCompareMode.js":284}],303:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/geom/Matrix3D");var a=e("awayjs-core/lib/geom/Vector3D");var n=e("awayjs-core/lib/textures/RenderTexture");var o=e("awayjs-stagegl/lib/base/ContextGLCompareMode");var h=e("awayjs-stagegl/lib/base/ContextGLClearMask");var l=e("awayjs-renderergl/lib/DepthRenderer");var u=e("awayjs-renderergl/lib/DistanceRenderer");var p=e("awayjs-renderergl/lib/Filter3DRenderer");var c=e("awayjs-renderergl/lib/base/RendererBase");var d=e("awayjs-renderergl/lib/pool/RenderablePoolBase");var f=e("awayjs-renderergl/lib/pool/SkyboxRenderable");var _=e("awayjs-renderergl/lib/managers/RTTBufferManager");var y=function(e){r(t,e);function t(t,i){if(t===void 0){t=null}if(i===void 0){i=null}e.call(this,t,i);this._skyboxProjection=new s;if(this._width==0)this.width=window.innerWidth;else this._pRttBufferManager.viewWidth=this._width;if(this._height==0)this.height=window.innerHeight;else this._pRttBufferManager.viewHeight=this._height}Object.defineProperty(t.prototype,"antiAlias",{get:function(){return this._antiAlias},set:function(e){if(this._antiAlias==e)return;this._antiAlias=e;this._pBackBufferInvalid=true},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"depthPrepass",{get:function(){return this._depthPrepass},set:function(e){this._depthPrepass=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"filters3d",{get:function(){return this._pFilter3DRenderer?this._pFilter3DRenderer.filters:null},set:function(e){if(e&&e.length==0)e=null;if(this._pFilter3DRenderer&&!e){this._pFilter3DRenderer.dispose();this._pFilter3DRenderer=null}else if(!this._pFilter3DRenderer&&e){this._pFilter3DRenderer=new p(this._pStage);this._pFilter3DRenderer.filters=e}if(this._pFilter3DRenderer){this._pFilter3DRenderer.filters=e;this._pRequireDepthRender=this._pFilter3DRenderer.requireDepthRender}else{this._pRequireDepthRender=false;if(this._pDepthRender){this._pDepthRender.dispose();this._pDepthRender=null}}},enumerable:true,configurable:true});t.prototype.render=function(t){e.prototype.render.call(this,t);if(!this._pStage.recoverFromDisposal()){this._pBackBufferInvalid=true;return}if(this._pBackBufferInvalid)this.pUpdateBackBuffer();if(this._shareContext&&this._pContext)this._pContext.clear(0,0,0,1,1,0,h.DEPTH);if(this._pFilter3DRenderer){this.textureRatioX=this._pRttBufferManager.textureRatioX;this.textureRatioY=this._pRttBufferManager.textureRatioY}else{this.textureRatioX=1;this.textureRatioY=1}if(this._pRequireDepthRender)this.pRenderSceneDepthToTexture(t);if(this._depthPrepass)this.pRenderDepthPrepass(t);if(this._pFilter3DRenderer&&this._pContext){}else{if(this._shareContext)this._iRender(t,null,this._pScissorRect);else this._iRender(t)}e.prototype.render.call(this,t);if(!this._shareContext&&this._pContext)this._pContext.present();this._pStage.bufferClear=false};t.prototype.pExecuteRender=function(t,i,r,s){if(i===void 0){i=null}if(r===void 0){r=null}if(s===void 0){s=0}this.updateLights(t);e.prototype.pExecuteRender.call(this,t,i,r,s)};t.prototype.updateLights=function(e){var t=e.directionalLights;var i=e.pointLights;var r,s;var a;var n;r=t.length;for(s=0;s<r;++s){a=t[s];n=a.shadowMapper;if(a.castsShadows&&(n.autoUpdateShadows||n._iShadowsInvalid))n.iRenderDepthMap(e,this._pDepthRenderer)}r=i.length;for(s=0;s<r;++s){a=i[s];n=a.shadowMapper;if(a.castsShadows&&(n.autoUpdateShadows||n._iShadowsInvalid))n.iRenderDepthMap(e,this._pDistanceRenderer)}};t.prototype.pDraw=function(t){if(t.skyBox){this._pContext.setDepthTest(false,o.ALWAYS);this.drawSkybox(t)}e.prototype.pDraw.call(this,t)};t.prototype._pGetRenderObject=function(e,t){return t.getRenderObject(e._pool)};t.prototype.drawSkybox=function(e){var t=this._skyboxRenderablePool.getItem(e.skyBox);var i=e.camera;this.updateSkyboxProjection(i);var r=t.renderObject=this._pGetRenderObject(t,t.renderObjectOwner);var s=r.passes[0];this.activatePass(t,s,i);t._iRender(s,i,this._skyboxProjection);this.deactivatePass(t,s)};t.prototype.updateSkyboxProjection=function(e){var t=new a;this._skyboxProjection.copyFrom(this._pRttViewProjectionMatrix);this._skyboxProjection.copyRowTo(2,t);var i=e.scenePosition;var r=t.x;var s=t.y;var n=t.z;var o=-(t.x*i.x+t.y*i.y+t.z*i.z+Math.sqrt(r*r+s*s+n*n));var h=r>=0?1:-1;var l=s>=0?1:-1;var u=new a(h,l,1,1);var p=this._skyboxProjection.clone();p.invert();var c=p.transformVector(u);this._skyboxProjection.copyRowTo(3,u);var d=(c.x*u.x+c.y*u.y+c.z*u.z+c.w*u.w)/(r*c.x+s*c.y+n*c.z+o*c.w);this._skyboxProjection.copyRowFrom(2,new a(r*d,s*d,n*d,o*d))};t.prototype.dispose=function(){if(!this._shareContext)this._pStage.dispose();this._skyboxRenderablePool.dispose();this._skyboxRenderablePool=null;this._pRttBufferManager.dispose();this._pRttBufferManager=null;this._pDepthRenderer.dispose();this._pDistanceRenderer.dispose();this._pDepthRenderer=null;this._pDistanceRenderer=null;this._pDepthRender=null;e.prototype.dispose.call(this)};t.prototype.pRenderDepthPrepass=function(e){this._pDepthRenderer.disableColor=true;if(this._pFilter3DRenderer){}else{this._pDepthRenderer.textureRatioX=1;this._pDepthRenderer.textureRatioY=1;this._pDepthRenderer._iRender(e)}this._pDepthRenderer.disableColor=false};t.prototype.pRenderSceneDepthToTexture=function(e){if(this._pDepthTextureInvalid||!this._pDepthRender)this.initDepthTexture(this._pStage.context);this._pDepthRenderer.textureRatioX=this._pRttBufferManager.textureRatioX;this._pDepthRenderer.textureRatioY=this._pRttBufferManager.textureRatioY;this._pDepthRenderer._iRender(e,this._pDepthRender)};t.prototype.pUpdateBackBuffer=function(){if(this._pStage.context&&!this._shareContext){if(this._width&&this._height){this._pStage.configureBackBuffer(this._width,this._height,this._antiAlias,true);this._pBackBufferInvalid=false}}};t.prototype.iSetStage=function(t){e.prototype.iSetStage.call(this,t);if(this._pStage){this._pRttBufferManager=_.getInstance(this._pStage);this._pDepthRenderer=new l(this._pRendererPoolClass,this._pStage);this._pDistanceRenderer=new u(this._pRendererPoolClass,this._pStage);this._skyboxRenderablePool=d.getPool(f,this._pStage)}};t.prototype.initDepthTexture=function(e){this._pDepthTextureInvalid=false;if(this._pDepthRender)this._pDepthRender.dispose();this._pDepthRender=new n(this._pRttBufferManager.textureWidth,this._pRttBufferManager.textureHeight)};return t}(c);t.exports=y},{"awayjs-core/lib/geom/Matrix3D":344,"awayjs-core/lib/geom/Vector3D":349,"awayjs-core/lib/textures/RenderTexture":353,"awayjs-renderergl/lib/DepthRenderer":304,"awayjs-renderergl/lib/DistanceRenderer":305,"awayjs-renderergl/lib/Filter3DRenderer":306,"awayjs-renderergl/lib/base/RendererBase":307,"awayjs-renderergl/lib/managers/RTTBufferManager":320,"awayjs-renderergl/lib/pool/RenderablePoolBase":330,"awayjs-renderergl/lib/pool/SkyboxRenderable":332,"awayjs-stagegl/lib/base/ContextGLClearMask":417,"awayjs-stagegl/lib/base/ContextGLCompareMode":418}],304:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-renderergl/lib/base/RendererBase");var a=function(e){r(t,e);function t(t,i){if(t===void 0){t=null}if(i===void 0){i=null}e.call(this,t,i);this._iBackgroundR=1;this._iBackgroundG=1;this._iBackgroundB=1}t.prototype._pGetRenderObject=function(e,t){return e._pool.getDepthRenderObject(t)};return t}(s);t.exports=a},{"awayjs-renderergl/lib/base/RendererBase":307}],305:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-renderergl/lib/base/RendererBase");var a=function(e){r(t,e);function t(t,i){if(t===void 0){t=null}if(i===void 0){i=null}e.call(this,t,i);this._iBackgroundR=1;this._iBackgroundG=1;this._iBackgroundB=1}t.prototype._pGetRenderObject=function(e,t){return e._pool.getDistanceRenderObject(t)};return t}(s);t.exports=a},{"awayjs-renderergl/lib/base/RendererBase":307}],306:[function(e,t,i){var r=e("awayjs-core/lib/events/Event");var s=e("awayjs-stagegl/lib/base/ContextGLBlendFactor");var a=e("awayjs-stagegl/lib/base/ContextGLVertexBufferFormat");var n=e("awayjs-renderergl/lib/managers/RTTBufferManager");var o=function(){function e(e){var t=this;this._filterSizesInvalid=true;this._onRTTResizeDelegate=function(e){return t.onRTTResize(e)};this._stage=e;this._rttManager=n.getInstance(e);this._rttManager.addEventListener(r.RESIZE,this._onRTTResizeDelegate)}e.prototype.onRTTResize=function(e){this._filterSizesInvalid=true};Object.defineProperty(e.prototype,"requireDepthRender",{get:function(){return this._requireDepthRender},enumerable:true,configurable:true});e.prototype.getMainInputTexture=function(e){if(this._filterTasksInvalid){this.updateFilterTasks(e)}return this._mainInputTexture};Object.defineProperty(e.prototype,"filters",{get:function(){return this._filters},set:function(e){this._filters=e;this._filterTasksInvalid=true;this._requireDepthRender=false;if(!this._filters){return}for(var t=0;t<this._filters.length;++t){var i=this._filters[t];var r=i.requireDepthRender==null?false:i.requireDepthRender;this._requireDepthRender=this._requireDepthRender||r}this._filterSizesInvalid=true},enumerable:true,configurable:true});e.prototype.updateFilterTasks=function(e){var t;if(this._filterSizesInvalid){this.updateFilterSizes()}if(!this._filters){this._tasks=null;return}this._tasks=new Array;t=this._filters.length-1;var i;for(var r=0;r<=t;++r){i=this._filters[r];i.setRenderTargets(r==t?null:this._filters[r+1].getMainInputTexture(e),e);this._tasks=this._tasks.concat(i.tasks)}this._mainInputTexture=this._filters[0].getMainInputTexture(e)};e.prototype.render=function(e,t,i){var r;var n;var o;var h=e.context;var l=this._rttManager.indexBuffer;var u=this._rttManager.renderToTextureVertexBuffer;if(!this._filters){return}if(this._filterSizesInvalid){this.updateFilterSizes()}if(this._filterTasksInvalid){this.updateFilterTasks(e)}r=this._filters.length;for(n=0;n<r;++n){this._filters[n].update(e,t)}r=this._tasks.length;if(r>1){h.setVertexBufferAt(0,u,0,a.FLOAT_2);h.setVertexBufferAt(1,u,2,a.FLOAT_2)}for(n=0;n<r;++n){o=this._tasks[n];if(!o.target){e.scissorRect=null;u=this._rttManager.renderToScreenVertexBuffer;h.setVertexBufferAt(0,u,0,a.FLOAT_2);h.setVertexBufferAt(1,u,2,a.FLOAT_2)}h.setTextureAt(0,o.getMainInputTexture(e));h.setProgram(o.getProgram(e));h.clear(0,0,0,0);o.activate(e,t,i);h.setBlendFactors(s.ONE,s.ZERO);h.drawTriangles(l,0,2);o.deactivate(e)}h.setTextureAt(0,null);h.setVertexBufferAt(0,null);h.setVertexBufferAt(1,null)};e.prototype.updateFilterSizes=function(){for(var e=0;e<this._filters.length;++e){this._filters[e].textureWidth=this._rttManager.textureWidth;this._filters[e].textureHeight=this._rttManager.textureHeight}this._filterSizesInvalid=true};e.prototype.dispose=function(){this._rttManager.removeEventListener(r.RESIZE,this._onRTTResizeDelegate);this._rttManager=null;this._stage=null};return e}();t.exports=o},{"awayjs-core/lib/events/Event":341,"awayjs-renderergl/lib/managers/RTTBufferManager":320,"awayjs-stagegl/lib/base/ContextGLBlendFactor":416,"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat":424}],307:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/geom/Matrix3D");var a=e("awayjs-core/lib/geom/Point");var n=e("awayjs-core/lib/geom/Rectangle");var o=e("awayjs-core/lib/errors/AbstractMethodError");var h=e("awayjs-core/lib/events/EventDispatcher");var l=e("awayjs-display/lib/sort/RenderableMergeSort");var u=e("awayjs-display/lib/events/RendererEvent");var p=e("awayjs-display/lib/events/StageEvent");var c=e("awayjs-display/lib/traverse/EntityCollector");var d=e("awayjs-display/lib/managers/DefaultMaterialManager");var f=e("awayjs-stagegl/lib/aglsl/assembler/AGALMiniAssembler");var _=e("awayjs-stagegl/lib/base/ContextGLBlendFactor");var y=e("awayjs-stagegl/lib/base/ContextGLCompareMode");var g=e("awayjs-stagegl/lib/managers/StageManager");var m=e("awayjs-renderergl/lib/pool/RendererPoolBase");var b=function(e){r(t,e);function t(t,i){var r=this;if(t===void 0){t=null}if(i===void 0){i=null}e.call(this);this._numUsedStreams=0;this._numUsedTextures=0;this._viewPort=new n;this._pBackBufferInvalid=true;this._pDepthTextureInvalid=true;this._depthPrepass=false;this._backgroundR=0;this._backgroundG=0;this._backgroundB=0;this._backgroundAlpha=1;this._shareContext=false;this.textureRatioX=1;this.textureRatioY=1;this._pRttViewProjectionMatrix=new s;this._localPos=new a;this._globalPos=new a;this._pScissorRect=new n;this._pNumTriangles=0;this._disableColor=false;this._renderBlended=true;this._pRendererPoolClass=t;this._onViewportUpdatedDelegate=function(e){return r.onViewportUpdated(e)};this._onContextUpdateDelegate=function(e){return r.onContextUpdate(e)};this.renderableSorter=new l;this._rendererPool=t?new this._pRendererPoolClass(this):new m(this);this.stage=i||g.getInstance().getFreeStage()}Object.defineProperty(t.prototype,"renderBlended",{get:function(){return this._renderBlended},set:function(e){this._renderBlended=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"disableColor",{get:function(){return this._disableColor},set:function(e){this._disableColor=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numTriangles",{get:function(){return this._pNumTriangles},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"viewPort",{get:function(){return this._viewPort},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"scissorRect",{get:function(){return this._pScissorRect},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"x",{get:function(){return this._localPos.x},set:function(e){if(this.x==e)return;this._globalPos.x=this._localPos.x=e;this.updateGlobalPos()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"y",{get:function(){return this._localPos.y},set:function(e){if(this.y==e)return;this._globalPos.y=this._localPos.y=e;this.updateGlobalPos()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){if(this._width==e)return;this._width=e;this._pScissorRect.width=e;if(this._pRttBufferManager)this._pRttBufferManager.viewWidth=e;this._pBackBufferInvalid=true;this._pDepthTextureInvalid=true;this.notifyScissorUpdate()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){if(this._height==e)return;this._height=e;this._pScissorRect.height=e;if(this._pRttBufferManager)this._pRttBufferManager.viewHeight=e;this._pBackBufferInvalid=true;this._pDepthTextureInvalid=true;this.notifyScissorUpdate()},enumerable:true,configurable:true});t.prototype.activatePass=function(e,t,i){for(var r=t.shader.numUsedStreams;r<this._numUsedStreams;r++)this._pContext.setVertexBufferAt(r,null);for(var r=t.shader.numUsedTextures;r<this._numUsedTextures;r++)this._pContext.setTextureAt(r,null);var s=t.shader.programData;if(!s.program){s.program=this._pContext.createProgram();var a=(new f).assemble("part vertex 1\n"+s.vertexString+"endpart")["vertex"].data;var n=(new f).assemble("part fragment 1\n"+s.fragmentString+"endpart")["fragment"].data;s.program.upload(a,n)}this._pContext.setProgram(s.program);e._iActivate(t,i)};t.prototype.deactivatePass=function(e,t){e._iDeactivate(t);this._numUsedStreams=t.shader.numUsedStreams;this._numUsedTextures=t.shader.numUsedTextures};t.prototype._iCreateEntityCollector=function(){return new c};Object.defineProperty(t.prototype,"_iBackgroundR",{get:function(){return this._backgroundR},set:function(e){if(this._backgroundR==e)return;this._backgroundR=e;this._pBackBufferInvalid=true},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"_iBackgroundG",{get:function(){return this._backgroundG},set:function(e){if(this._backgroundG==e)return;this._backgroundG=e;this._pBackBufferInvalid=true},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"_iBackgroundB",{get:function(){return this._backgroundB},set:function(e){if(this._backgroundB==e)return;this._backgroundB=e;this._pBackBufferInvalid=true},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"context",{get:function(){return this._pContext},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"stage",{get:function(){return this._pStage},set:function(e){if(this._pStage==e)return;this.iSetStage(e)},enumerable:true,configurable:true});t.prototype.iSetStage=function(e){if(this._pStage)this.dispose();if(e){this._pStage=e;this._rendererPool.stage=this._pStage;this._pStage.addEventListener(p.CONTEXT_CREATED,this._onContextUpdateDelegate);this._pStage.addEventListener(p.CONTEXT_RECREATED,this._onContextUpdateDelegate);this._pStage.addEventListener(p.VIEWPORT_UPDATED,this._onViewportUpdatedDelegate);if(this._pStage.context)this._pContext=this._pStage.context}this._pBackBufferInvalid=true;this.updateGlobalPos()};Object.defineProperty(t.prototype,"shareContext",{get:function(){return this._shareContext},set:function(e){if(this._shareContext==e)return;this._shareContext=e;this.updateGlobalPos()},enumerable:true,configurable:true});t.prototype.dispose=function(){this._rendererPool.dispose();this._pStage.removeEventListener(p.CONTEXT_CREATED,this._onContextUpdateDelegate);this._pStage.removeEventListener(p.CONTEXT_RECREATED,this._onContextUpdateDelegate);this._pStage.removeEventListener(p.VIEWPORT_UPDATED,this._onViewportUpdatedDelegate);this._pStage=null;this._pContext=null};t.prototype.render=function(e){this._viewportDirty=false;this._scissorDirty=false};t.prototype._iRender=function(e,t,i,r){if(t===void 0){t=null}if(i===void 0){i=null}if(r===void 0){r=0}if(!this._pStage||!this._pContext)return;this._pRttViewProjectionMatrix.copyFrom(e.camera.viewProjection);this._pRttViewProjectionMatrix.appendScale(this.textureRatioX,this.textureRatioY,1);this.pExecuteRender(e,t,i,r);for(var s=0;s<8;++s){this._pContext.setVertexBufferAt(s,null);this._pContext.setTextureAt(s,null)}};t.prototype._iRenderCascades=function(e,t,i,r,s){this.pCollectRenderables(e);this._pStage.setRenderTarget(t,true,0);this._pContext.clear(1,1,1,1,1,0);this._pContext.setBlendFactors(_.ONE,_.ZERO);this._pContext.setDepthTest(true,y.LESS);var a=this._pOpaqueRenderableHead;var n=true;for(var o=i-1;o>=0;--o){this._pStage.scissorRect=r[o];n=false}this._pContext.setDepthTest(false,y.LESS_EQUAL);this._pStage.scissorRect=null};t.prototype.pCollectRenderables=function(e){this._pBlendedRenderableHead=null;this._pOpaqueRenderableHead=null;this._pNumTriangles=0;var t=e.entityHead;this._pCamera=e.camera;this._iEntryPoint=this._pCamera.scenePosition;this._pCameraForward=this._pCamera.transform.forwardVector;while(t){t.entity._iCollectRenderables(this._rendererPool);t=t.next}this._pOpaqueRenderableHead=this.renderableSorter.sortOpaqueRenderables(this._pOpaqueRenderableHead);this._pBlendedRenderableHead=this.renderableSorter.sortBlendedRenderables(this._pBlendedRenderableHead)};t.prototype.pExecuteRender=function(e,t,i,r){if(t===void 0){t=null}if(i===void 0){i=null}if(r===void 0){r=0}this._pStage.setRenderTarget(t,true,r);if((t||!this._shareContext)&&!this._depthPrepass)this._pContext.clear(this._backgroundR,this._backgroundG,this._backgroundB,this._backgroundAlpha,1,0);this._pStage.scissorRect=i;this.pCollectRenderables(e);this._pContext.setBlendFactors(_.ONE,_.ZERO);this.pDraw(e);if(!this._shareContext){if(this._snapshotRequired&&this._snapshotBitmapData){this._pContext.drawToBitmapData(this._snapshotBitmapData);this._snapshotRequired=false}}this._pStage.scissorRect=null};t.prototype.queueSnapshot=function(e){this._snapshotRequired=true;this._snapshotBitmapData=e};t.prototype.pDraw=function(e){this._pContext.setDepthTest(true,y.LESS_EQUAL);if(this._disableColor)this._pContext.setColorMask(false,false,false,false);this.drawRenderables(this._pOpaqueRenderableHead,e);if(this._renderBlended)this.drawRenderables(this._pBlendedRenderableHead,e);if(this._disableColor)this._pContext.setColorMask(true,true,true,true)};t.prototype.drawRenderables=function(e,t){var i;var r;var s;var a;var n;var o;var h=t.camera;while(e){a=e.renderObject;n=a.passes;if(this._disableColor&&a._renderObjectOwner.alphaThreshold!=0){s=e;do{s=s.next}while(s&&s.renderObject==a)}else{r=n.length;for(i=0;i<r;i++){s=e;o=n[i];this.activatePass(e,o,h);do{s._iRender(o,h,this._pRttViewProjectionMatrix);s=s.next}while(s&&s.renderObject==a);this.deactivatePass(e,o)}}e=s}};t.prototype.onContextUpdate=function(e){this._pContext=this._pStage.context};Object.defineProperty(t.prototype,"_iBackgroundAlpha",{get:function(){return this._backgroundAlpha},set:function(e){if(this._backgroundAlpha==e)return;this._backgroundAlpha=e;this._pBackBufferInvalid=true},enumerable:true,configurable:true});t.prototype.notifyScissorUpdate=function(){if(this._scissorDirty)return;this._scissorDirty=true;if(!this._scissorUpdated)this._scissorUpdated=new u(u.SCISSOR_UPDATED);this.dispatchEvent(this._scissorUpdated)};t.prototype.notifyViewportUpdate=function(){if(this._viewportDirty)return;this._viewportDirty=true;if(!this._viewPortUpdated)this._viewPortUpdated=new u(u.VIEWPORT_UPDATED);this.dispatchEvent(this._viewPortUpdated)};t.prototype.onViewportUpdated=function(e){this._viewPort=this._pStage.viewPort;if(this._shareContext){this._pScissorRect.x=this._globalPos.x-this._pStage.x;this._pScissorRect.y=this._globalPos.y-this._pStage.y;this.notifyScissorUpdate()}this.notifyViewportUpdate()};t.prototype.updateGlobalPos=function(){if(this._shareContext){this._pScissorRect.x=this._globalPos.x-this._viewPort.x;this._pScissorRect.y=this._globalPos.y-this._viewPort.y}else{this._pScissorRect.x=0;this._pScissorRect.y=0;this._viewPort.x=this._globalPos.x;this._viewPort.y=this._globalPos.y}this.notifyScissorUpdate()};t.prototype.applyRenderable=function(e){var t=this._pGetRenderObject(e,e.renderObjectOwner||d.getDefaultMaterial(e.renderableOwner));e.renderObject=t;e.renderObjectId=t.renderObjectId;e.renderOrderId=t.renderOrderId;e.cascaded=false;var i=e.sourceEntity;var r=i.scenePosition;r=this._iEntryPoint.subtract(r);e.zIndex=i.zOffset+r.dotProduct(this._pCameraForward);e.renderSceneTransform=e.sourceEntity.getRenderSceneTransform(this._pCamera);if(t.requiresBlending){e.next=this._pBlendedRenderableHead;this._pBlendedRenderableHead=e}else{e.next=this._pOpaqueRenderableHead;this._pOpaqueRenderableHead=e}this._pNumTriangles+=e.numTriangles;if(e.overflow)this.applyRenderable(e.overflow)};t.prototype._pGetRenderObject=function(e,t){throw new o};return t}(h);t.exports=b},{"awayjs-core/lib/errors/AbstractMethodError":337,"awayjs-core/lib/events/EventDispatcher":342,"awayjs-core/lib/geom/Matrix3D":344,"awayjs-core/lib/geom/Point":347,"awayjs-core/lib/geom/Rectangle":348,"awayjs-display/lib/events/RendererEvent":366,"awayjs-display/lib/events/StageEvent":367,"awayjs-display/lib/managers/DefaultMaterialManager":369,"awayjs-display/lib/sort/RenderableMergeSort":374,"awayjs-display/lib/traverse/EntityCollector":376,"awayjs-renderergl/lib/pool/RendererPoolBase":331,"awayjs-stagegl/lib/aglsl/assembler/AGALMiniAssembler":407,"awayjs-stagegl/lib/base/ContextGLBlendFactor":416,"awayjs-stagegl/lib/base/ContextGLCompareMode":418,"awayjs-stagegl/lib/managers/StageManager":443}],308:[function(e,t,i){t.exports=e(227)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/DepthRenderObject.js":227,"awayjs-renderergl/lib/compilation/RenderObjectBase":312,"awayjs-renderergl/lib/passes/DepthPass":322}],309:[function(e,t,i){t.exports=e(228)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/DistanceRenderObject.js":228,"awayjs-renderergl/lib/compilation/RenderObjectBase":312,"awayjs-renderergl/lib/passes/DistancePass":323}],310:[function(e,t,i){t.exports=e(229)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/RegisterPool.js":229,"awayjs-renderergl/lib/compilation/ShaderRegisterElement":318}],311:[function(e,t,i){t.exports=e(230)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/RenderBasicMaterialObject.js":230,"awayjs-core/lib/base/BlendMode":336,"awayjs-renderergl/lib/compilation/RenderObjectBase":312,"awayjs-renderergl/lib/passes/BasicMaterialPass":321}],312:[function(e,t,i){t.exports=e(231)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/RenderObjectBase.js":231,"awayjs-core/lib/events/Event":341,"awayjs-core/lib/library/AssetType":350}],313:[function(e,t,i){t.exports=e(232)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/RenderObjectPool.js":232}],314:[function(e,t,i){t.exports=e(233)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/ShaderCompilerBase.js":233,"awayjs-renderergl/lib/compilation/ShaderRegisterCache":316,"awayjs-renderergl/lib/compilation/ShaderRegisterData":317}],315:[function(e,t,i){t.exports=e(236)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/ShaderObjectBase.js":236,"awayjs-display/lib/base/LineSubGeometry":358,"awayjs-display/lib/base/TriangleSubGeometry":362,"awayjs-renderergl/lib/compilation/ShaderCompilerBase":314,"awayjs-stagegl/lib/base/ContextGLTriangleFace":423}],316:[function(e,t,i){t.exports=e(237)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/ShaderRegisterCache.js":237,"awayjs-renderergl/lib/compilation/RegisterPool":310,"awayjs-renderergl/lib/compilation/ShaderRegisterElement":318}],317:[function(e,t,i){t.exports=e(238)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/ShaderRegisterData.js":238}],318:[function(e,t,i){t.exports=e(239)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/ShaderRegisterElement.js":239}],319:[function(e,t,i){t.exports=e(240)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/SkyboxRenderObject.js":240,"awayjs-core/lib/base/BlendMode":336,"awayjs-renderergl/lib/compilation/RenderObjectBase":312,"awayjs-renderergl/lib/passes/SkyboxPass":325}],320:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/geom/Rectangle");var a=e("awayjs-core/lib/events/Event");var n=e("awayjs-core/lib/events/EventDispatcher");var o=e("awayjs-core/lib/utils/TextureUtils");var h=function(e){r(t,e);function t(t){e.call(this);this._viewWidth=-1;this._viewHeight=-1;this._textureWidth=-1;this._textureHeight=-1;this._buffersInvalid=true;this._renderToTextureRect=new s;this._stage=t}t.getInstance=function(e){if(!e)throw new Error("stage key cannot be null!");if(t._instances==null)t._instances=new Array;var i=t.getRTTBufferManagerFromStage(e);if(i==null){i=new t(e);var r=new l;r.stage3d=e;r.rttbfm=i;t._instances.push(r)}return i};t.getRTTBufferManagerFromStage=function(e){var i=t._instances.length;var r;for(var s=0;s<i;s++){r=t._instances[s];if(r.stage3d===e)return r.rttbfm}return null};t.deleteRTTBufferManager=function(e){var i=t._instances.length;var r;for(var s=0;s<i;s++){r=t._instances[s];if(r.stage3d===e){t._instances.splice(s,1);return}}};Object.defineProperty(t.prototype,"textureRatioX",{get:function(){if(this._buffersInvalid)this.updateRTTBuffers();return this._textureRatioX},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"textureRatioY",{get:function(){if(this._buffersInvalid)this.updateRTTBuffers();return this._textureRatioY},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"viewWidth",{get:function(){return this._viewWidth},set:function(e){if(e==this._viewWidth)return;this._viewWidth=e;this._buffersInvalid=true;this._textureWidth=o.getBestPowerOf2(this._viewWidth);if(this._textureWidth>this._viewWidth){this._renderToTextureRect.x=Math.floor((this._textureWidth-this._viewWidth)*.5);this._renderToTextureRect.width=this._viewWidth}else{this._renderToTextureRect.x=0;this._renderToTextureRect.width=this._textureWidth}this.dispatchEvent(new a(a.RESIZE))},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"viewHeight",{get:function(){return this._viewHeight},set:function(e){if(e==this._viewHeight)return;this._viewHeight=e;this._buffersInvalid=true;this._textureHeight=o.getBestPowerOf2(this._viewHeight);if(this._textureHeight>this._viewHeight){this._renderToTextureRect.y=Math.floor((this._textureHeight-this._viewHeight)*.5);this._renderToTextureRect.height=this._viewHeight}else{this._renderToTextureRect.y=0;this._renderToTextureRect.height=this._textureHeight}this.dispatchEvent(new a(a.RESIZE))},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"renderToTextureVertexBuffer",{get:function(){if(this._buffersInvalid)this.updateRTTBuffers();return this._renderToTextureVertexBuffer},enumerable:true,configurable:true});
Object.defineProperty(t.prototype,"renderToScreenVertexBuffer",{get:function(){if(this._buffersInvalid)this.updateRTTBuffers();return this._renderToScreenVertexBuffer},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"indexBuffer",{get:function(){return this._indexBuffer},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"renderToTextureRect",{get:function(){if(this._buffersInvalid)this.updateRTTBuffers();return this._renderToTextureRect},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"textureWidth",{get:function(){return this._textureWidth},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"textureHeight",{get:function(){return this._textureHeight},enumerable:true,configurable:true});t.prototype.dispose=function(){t.deleteRTTBufferManager(this._stage);if(this._indexBuffer){this._indexBuffer.dispose();this._renderToScreenVertexBuffer.dispose();this._renderToTextureVertexBuffer.dispose();this._renderToScreenVertexBuffer=null;this._renderToTextureVertexBuffer=null;this._indexBuffer=null}};t.prototype.updateRTTBuffers=function(){var e=this._stage.context;var t;var i;var r;var s;if(this._renderToTextureVertexBuffer==null)this._renderToTextureVertexBuffer=e.createVertexBuffer(4,5);if(this._renderToScreenVertexBuffer==null)this._renderToScreenVertexBuffer=e.createVertexBuffer(4,5);if(!this._indexBuffer){this._indexBuffer=e.createIndexBuffer(6);this._indexBuffer.uploadFromArray([2,1,0,3,2,0],0,6)}this._textureRatioX=r=Math.min(this._viewWidth/this._textureWidth,1);this._textureRatioY=s=Math.min(this._viewHeight/this._textureHeight,1);var a=(1-r)*.5;var n=(r+1)*.5;var o=(s+1)*.5;var h=(1-s)*.5;t=[-r,-s,a,o,0,r,-s,n,o,1,r,s,n,h,2,-r,s,a,h,3];i=[-1,-1,a,o,0,1,-1,n,o,1,1,1,n,h,2,-1,1,a,h,3];this._renderToTextureVertexBuffer.uploadFromArray(t,0,4);this._renderToScreenVertexBuffer.uploadFromArray(i,0,4);this._buffersInvalid=false};return t}(n);var l=function(){function e(){}return e}();t.exports=h},{"awayjs-core/lib/events/Event":341,"awayjs-core/lib/events/EventDispatcher":342,"awayjs-core/lib/geom/Rectangle":348,"awayjs-core/lib/utils/TextureUtils":357}],321:[function(e,t,i){t.exports=e(242)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/passes/BasicMaterialPass.js":242,"awayjs-renderergl/lib/compilation/ShaderObjectBase":315,"awayjs-renderergl/lib/passes/RenderPassBase":324,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":334}],322:[function(e,t,i){t.exports=e(243)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/passes/DepthPass.js":243,"awayjs-renderergl/lib/compilation/ShaderObjectBase":315,"awayjs-renderergl/lib/passes/RenderPassBase":324,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":334}],323:[function(e,t,i){t.exports=e(244)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/passes/DistancePass.js":244,"awayjs-renderergl/lib/compilation/ShaderObjectBase":315,"awayjs-renderergl/lib/passes/RenderPassBase":324,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":334}],324:[function(e,t,i){t.exports=e(245)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/passes/RenderPassBase.js":245,"awayjs-core/lib/base/BlendMode":336,"awayjs-core/lib/errors/ArgumentError":338,"awayjs-core/lib/events/Event":341,"awayjs-core/lib/events/EventDispatcher":342,"awayjs-stagegl/lib/base/ContextGLBlendFactor":416,"awayjs-stagegl/lib/base/ContextGLCompareMode":418}],325:[function(e,t,i){t.exports=e(246)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/passes/SkyboxPass.js":246,"awayjs-renderergl/lib/compilation/ShaderObjectBase":315,"awayjs-renderergl/lib/passes/RenderPassBase":324,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":334,"awayjs-stagegl/lib/base/ContextGLCompareMode":418}],326:[function(e,t,i){t.exports=e(247)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/pool/BillboardRenderable.js":247,"awayjs-core/lib/geom/Matrix3DUtils":345,"awayjs-display/lib/base/TriangleSubGeometry":362,"awayjs-renderergl/lib/pool/RenderableBase":329,"awayjs-stagegl/lib/base/ContextGLProgramType":420}],327:[function(e,t,i){t.exports=e(248)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/pool/LineSegmentRenderable.js":248,"awayjs-core/lib/geom/Matrix3D":344,"awayjs-display/lib/base/LineSubGeometry":358,"awayjs-renderergl/lib/pool/RenderableBase":329,"awayjs-stagegl/lib/base/ContextGLProgramType":420}],328:[function(e,t,i){t.exports=e(249)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/pool/LineSubMeshRenderable.js":249,"awayjs-core/lib/geom/Matrix3D":344,"awayjs-display/lib/base/LineSubGeometry":358,"awayjs-renderergl/lib/pool/RenderableBase":329,"awayjs-stagegl/lib/base/ContextGLProgramType":420}],329:[function(e,t,i){t.exports=e(250)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/pool/RenderableBase.js":250,"awayjs-core/lib/errors/AbstractMethodError":337,"awayjs-display/lib/base/SubGeometryBase":360,"awayjs-display/lib/base/TriangleSubGeometry":362,"awayjs-display/lib/events/RenderableOwnerEvent":365,"awayjs-display/lib/events/SubGeometryEvent":368,"awayjs-stagegl/lib/pool/IndexDataPool":445,"awayjs-stagegl/lib/pool/VertexDataPool":451}],330:[function(e,t,i){t.exports=e(251)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/pool/RenderablePoolBase.js":251,"awayjs-renderergl/lib/compilation/DepthRenderObject":308,"awayjs-renderergl/lib/compilation/DistanceRenderObject":309,"awayjs-renderergl/lib/compilation/RenderBasicMaterialObject":311,"awayjs-renderergl/lib/compilation/RenderObjectPool":313,"awayjs-renderergl/lib/compilation/SkyboxRenderObject":319}],331:[function(e,t,i){t.exports=e(252)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/pool/RendererPoolBase.js":252,"awayjs-renderergl/lib/pool/BillboardRenderable":326,"awayjs-renderergl/lib/pool/LineSegmentRenderable":327,"awayjs-renderergl/lib/pool/LineSubMeshRenderable":328,"awayjs-renderergl/lib/pool/RenderablePoolBase":330,"awayjs-renderergl/lib/pool/TriangleSubMeshRenderable":333}],332:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-display/lib/base/TriangleSubGeometry");var a=e("awayjs-stagegl/lib/base/ContextGLProgramType");var n=e("awayjs-renderergl/lib/pool/RenderableBase");var o=function(e){r(t,e);function t(t,i,r){e.call(this,t,i,i,i,r);this._vertexArray=new Array(0,0,0,0,1,1,1,1)}t.prototype._pGetSubGeometry=function(){var e=t._geometry;if(!e){e=t._geometry=new s(true);e.autoDeriveNormals=false;e.autoDeriveTangents=false;e.updateIndices(Array(0,1,2,2,3,0,6,5,4,4,7,6,2,6,7,7,3,2,4,5,1,1,0,4,4,0,3,3,7,4,2,1,5,5,6,2));e.updatePositions(Array(-1,1,-1,1,1,-1,1,1,1,-1,1,1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1))}this._pVertexDataDirty[s.POSITION_DATA]=true;return e};t._iIncludeDependencies=function(e){};t._iGetVertexCode=function(e,t,i){return"mul vt0, va0, vc5\n"+"add vt0, vt0, vc4\n"+"m44 op, vt0, vc0\n"+"mov v0, va0\n"};t.prototype._iRender=function(t,i,r){e.prototype._iRender.call(this,t,i,r);var n=this._stage.context;var o=i.scenePosition;this._vertexArray[0]=o.x;this._vertexArray[1]=o.y;this._vertexArray[2]=o.z;this._vertexArray[4]=this._vertexArray[5]=this._vertexArray[6]=i.projection.far/Math.sqrt(3);n.setProgramConstantsFromMatrix(a.VERTEX,0,r,true);n.setProgramConstantsFromArray(a.VERTEX,4,this._vertexArray,2);this._stage.activateBuffer(0,this.getVertexData(s.POSITION_DATA),this.getVertexOffset(s.POSITION_DATA),s.POSITION_FORMAT);n.drawTriangles(this._stage.getIndexBuffer(this.getIndexData()),0,this.numTriangles)};t.id="skybox";t.vertexAttributesOffset=1;return t}(n);t.exports=o},{"awayjs-display/lib/base/TriangleSubGeometry":362,"awayjs-renderergl/lib/pool/RenderableBase":329,"awayjs-stagegl/lib/base/ContextGLProgramType":420}],333:[function(e,t,i){t.exports=e(253)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/pool/TriangleSubMeshRenderable.js":253,"awayjs-core/lib/geom/Matrix3DUtils":345,"awayjs-display/lib/base/TriangleSubGeometry":362,"awayjs-renderergl/lib/pool/RenderableBase":329,"awayjs-stagegl/lib/base/ContextGLProgramType":420,"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat":424}],334:[function(e,t,i){t.exports=e(254)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/utils/ShaderCompilerHelper.js":254,"awayjs-stagegl/lib/base/ContextGLTextureFormat":422}],335:[function(e,t,i){t.exports=e(2)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/base/BitmapData.js":2,"awayjs-core/lib/geom/Rectangle":348,"awayjs-core/lib/utils/ColorUtils":356}],336:[function(e,t,i){t.exports=e(146)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-core/lib/base/BlendMode.js":146}],337:[function(e,t,i){t.exports=e(3)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/AbstractMethodError.js":3,"awayjs-core/lib/errors/Error":339}],338:[function(e,t,i){t.exports=e(4)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/ArgumentError.js":4,"awayjs-core/lib/errors/Error":339}],339:[function(e,t,i){t.exports=e(5)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/Error.js":5}],340:[function(e,t,i){t.exports=e(6)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/AssetEvent.js":6,"awayjs-core/lib/events/Event":341}],341:[function(e,t,i){t.exports=e(7)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/Event.js":7}],342:[function(e,t,i){t.exports=e(8)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/EventDispatcher.js":8}],343:[function(e,t,i){t.exports=e(12)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Matrix.js":12,"awayjs-core/lib/errors/ArgumentError":338,"awayjs-core/lib/geom/Point":347}],344:[function(e,t,i){t.exports=e(107)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Matrix3D.js":107,"awayjs-core/lib/errors/ArgumentError":338,"awayjs-core/lib/geom/Orientation3D":346,"awayjs-core/lib/geom/Vector3D":349}],345:[function(e,t,i){t.exports=e(108)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Matrix3DUtils.js":108,"awayjs-core/lib/geom/Matrix3D":344,"awayjs-core/lib/geom/Vector3D":349}],346:[function(e,t,i){t.exports=e(109)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Orientation3D.js":109}],347:[function(e,t,i){t.exports=e(13)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Point.js":13}],348:[function(e,t,i){t.exports=e(14)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Rectangle.js":14,"awayjs-core/lib/geom/Point":347}],349:[function(e,t,i){t.exports=e(115)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Vector3D.js":115}],350:[function(e,t,i){t.exports=e(15)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/AssetType.js":15}],351:[function(e,t,i){t.exports=e(16)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/NamedAssetBase.js":16,"awayjs-core/lib/errors/AbstractMethodError":337,"awayjs-core/lib/events/AssetEvent":340,"awayjs-core/lib/events/EventDispatcher":342}],352:[function(e,t,i){t.exports=e(24)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/MipmapGenerator.js":24,"awayjs-core/lib/base/BitmapData":335,"awayjs-core/lib/geom/Matrix":343,"awayjs-core/lib/geom/Rectangle":348}],353:[function(e,t,i){t.exports=e(123)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/textures/RenderTexture.js":123,"awayjs-core/lib/errors/Error":339,"awayjs-core/lib/textures/Texture2DBase":354,"awayjs-core/lib/utils/TextureUtils":357}],354:[function(e,t,i){t.exports=e(25)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/Texture2DBase.js":25,"awayjs-core/lib/errors/AbstractMethodError":337,"awayjs-core/lib/textures/MipmapGenerator":352,"awayjs-core/lib/textures/TextureProxyBase":355}],355:[function(e,t,i){t.exports=e(26)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/TextureProxyBase.js":26,"awayjs-core/lib/library/AssetType":350,"awayjs-core/lib/library/NamedAssetBase":351}],356:[function(e,t,i){t.exports=e(29)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/ColorUtils.js":29}],357:[function(e,t,i){t.exports=e(31)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/TextureUtils.js":31}],358:[function(e,t,i){t.exports=e(37)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/LineSubGeometry.js":37,"awayjs-display/lib/base/LineSubMesh":359,"awayjs-display/lib/base/SubGeometryBase":360,"awayjs-display/lib/base/TriangleSubGeometry":362,"awayjs-display/lib/events/SubGeometryEvent":368}],359:[function(e,t,i){t.exports=e(38)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/LineSubMesh.js":38,"awayjs-core/lib/library/AssetType":390,"awayjs-display/lib/base/SubMeshBase":361}],360:[function(e,t,i){t.exports=e(40)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/SubGeometryBase.js":40,"awayjs-core/lib/errors/AbstractMethodError":379,"awayjs-core/lib/library/NamedAssetBase":391,"awayjs-display/lib/events/SubGeometryEvent":368}],361:[function(e,t,i){t.exports=e(41)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/SubMeshBase.js":41,"awayjs-core/lib/errors/AbstractMethodError":379,"awayjs-core/lib/library/NamedAssetBase":391}],362:[function(e,t,i){t.exports=e(43)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/TriangleSubGeometry.js":43,"awayjs-core/lib/geom/Vector3D":389,"awayjs-display/lib/base/SubGeometryBase":360,"awayjs-display/lib/base/TriangleSubMesh":363,"awayjs-display/lib/events/SubGeometryEvent":368}],363:[function(e,t,i){t.exports=e(44)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/TriangleSubMesh.js":44,"awayjs-core/lib/library/AssetType":390,"awayjs-display/lib/base/SubMeshBase":361}],364:[function(e,t,i){t.exports=e(176)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-display/lib/events/MaterialEvent.js":176,"awayjs-core/lib/events/Event":383}],365:[function(e,t,i){t.exports=e(177)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-display/lib/events/RenderableOwnerEvent.js":177,"awayjs-core/lib/events/Event":383}],366:[function(e,t,i){t.exports=e(63)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/RendererEvent.js":63,"awayjs-core/lib/events/Event":383}],367:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/events/Event");var a=function(e){r(t,e);function t(t){e.call(this,t)}t.CONTEXT_CREATED="contextCreated";t.CONTEXT_DISPOSED="contextDisposed";t.CONTEXT_RECREATED="contextRecreated";t.VIEWPORT_UPDATED="viewportUpdated";return t}(s);t.exports=a},{"awayjs-core/lib/events/Event":383}],368:[function(e,t,i){t.exports=e(65)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/SubGeometryEvent.js":65,"awayjs-core/lib/events/Event":383}],369:[function(e,t,i){var r=e("awayjs-core/lib/base/BitmapData");var s=e("awayjs-core/lib/library/AssetType");var a=e("awayjs-core/lib/textures/BitmapTexture");var n=e("awayjs-display/lib/materials/BasicMaterial");var o=function(){function e(){}e.getDefaultMaterial=function(t){if(t===void 0){t=null}if(t!=null&&t.assetType==s.LINE_SUB_MESH){if(!e._defaultLineMaterial)e.createDefaultLineMaterial();return e._defaultLineMaterial}else{if(!e._defaultTriangleMaterial)e.createDefaultTriangleMaterial();return e._defaultTriangleMaterial}};e.getDefaultTexture=function(t){if(t===void 0){t=null}if(!e._defaultTexture)e.createDefaultTexture();return e._defaultTexture};e.createDefaultTexture=function(){e._defaultBitmapData=e.createCheckeredBitmapData();e._defaultTexture=new a(e._defaultBitmapData);e._defaultTexture.name="defaultTexture"};e.createCheckeredBitmapData=function(){var e=new r(8,8,false,0);var t,i;for(t=0;t<8;t++){for(i=0;i<8;i++){if(i&1^t&1){e.setPixel(t,i,16777215)}}}return e};e.createDefaultTriangleMaterial=function(){if(!e._defaultTexture)e.createDefaultTexture();e._defaultTriangleMaterial=new n(e._defaultTexture);e._defaultTriangleMaterial.mipmap=false;e._defaultTriangleMaterial.smooth=false;e._defaultTriangleMaterial.name="defaultTriangleMaterial"};e.createDefaultLineMaterial=function(){e._defaultLineMaterial=new n;e._defaultLineMaterial.name="defaultLineMaterial"};return e}();t.exports=o},{"awayjs-core/lib/base/BitmapData":377,"awayjs-core/lib/library/AssetType":390,"awayjs-core/lib/textures/BitmapTexture":392,"awayjs-display/lib/materials/BasicMaterial":370}],370:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/textures/Texture2DBase");var a=e("awayjs-display/lib/materials/MaterialBase");var n=function(e){r(t,e);function t(t,i,r,a){if(t===void 0){t=null}if(i===void 0){i=null}if(r===void 0){r=false}if(a===void 0){a=false}e.call(this);if(t instanceof s){this.texture=t;this.smooth=i==null?true:false;this.repeat=r;this.mipmap=a}else{this.color=t?Number(t):13421772;this.alpha=i==null?1:Number(i)}}t.prototype.getRenderObject=function(e){return e.getMaterialRenderObject(this)};return t}(a);t.exports=n},{"awayjs-core/lib/textures/Texture2DBase":394,"awayjs-display/lib/materials/MaterialBase":371}],371:[function(e,t,i){t.exports=e(180)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-display/lib/materials/MaterialBase.js":180,"awayjs-core/lib/base/BlendMode":378,"awayjs-core/lib/errors/AbstractMethodError":379,"awayjs-core/lib/events/Event":383,"awayjs-core/lib/geom/ColorTransform":385,"awayjs-core/lib/library/AssetType":390,"awayjs-core/lib/library/NamedAssetBase":391,"awayjs-display/lib/events/MaterialEvent":364,"awayjs-display/lib/events/RenderableOwnerEvent":365}],372:[function(e,t,i){t.exports=e(83)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/pool/EntityListItem.js":83}],373:[function(e,t,i){t.exports=e(84)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/pool/EntityListItemPool.js":84,"awayjs-display/lib/pool/EntityListItem":372}],374:[function(e,t,i){var r=function(){function e(){}e.prototype.sortBlendedRenderables=function(e){var t;var i;var r;if(!e||!e.next){return e}r=e;i=e.next;while(i){i=i.next;if(i){r=r.next;i=i.next}}t=r.next;r.next=null;e=this.sortBlendedRenderables(e);t=this.sortBlendedRenderables(t);var s;var a;var n;if(!e)return t;if(!t)return e;while(e&&t){if(e.zIndex<t.zIndex){n=e;e=e.next}else{n=t;t=t.next}if(!s)s=n;else a.next=n;a=n}if(e)a.next=e;else if(t)a.next=t;return s};e.prototype.sortOpaqueRenderables=function(e){var t;var i,r;if(!e||!e.next){return e}r=e;i=e.next;while(i){i=i.next;if(i){r=r.next;i=i.next}}t=r.next;r.next=null;e=this.sortOpaqueRenderables(e);t=this.sortOpaqueRenderables(t);var s;var a;var n;var o=0;if(!e)return t;if(!t)return e;while(e&&t&&e!=null&&t!=null){var h=e.renderOrderId;var l=t.renderOrderId;if(h==l){var u=e.renderObjectId;var p=t.renderObjectId;if(u==p){if(e.zIndex<t.zIndex)o=1;else o=-1}else if(u>p){o=1}else{o=-1}}else if(h>l){o=1}else{o=-1}if(o<0){n=e;e=e.next}else{n=t;t=t.next}if(!s){s=n;a=n}else{a.next=n;a=n}}if(e)a.next=e;else if(t)a.next=t;return s};return e}();t.exports=r},{}],375:[function(e,t,i){t.exports=e(91)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/traverse/CollectorBase.js":91,"awayjs-display/lib/pool/EntityListItemPool":373}],376:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-display/lib/traverse/CollectorBase");var a=function(e){r(t,e);function t(){e.call(this);this._pNumLights=0;this._numDirectionalLights=0;this._numPointLights=0;this._numLightProbes=0;this._pLights=new Array;this._directionalLights=new Array;this._pointLights=new Array;this._lightProbes=new Array;this.isEntityCollector=true}Object.defineProperty(t.prototype,"directionalLights",{get:function(){return this._directionalLights},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lightProbes",{get:function(){return this._lightProbes},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lights",{get:function(){return this._pLights},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"pointLights",{get:function(){return this._pointLights},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skyBox",{get:function(){return this._pSkybox},enumerable:true,configurable:true});t.prototype.applyDirectionalLight=function(e){this._directionalLights[this._numDirectionalLights++]=e};t.prototype.applyLightProbe=function(e){this._lightProbes[this._numLightProbes++]=e};t.prototype.applyPointLight=function(e){this._pointLights[this._numPointLights++]=e};t.prototype.applySkybox=function(e){this._pSkybox=e};t.prototype.clear=function(){e.prototype.clear.call(this);this._pSkybox=null;if(this._pNumLights>0)this._pLights.length=this._pNumLights=0;if(this._numDirectionalLights>0)this._directionalLights.length=this._numDirectionalLights=0;if(this._numPointLights>0)this._pointLights.length=this._numPointLights=0;if(this._numLightProbes>0)this._lightProbes.length=this._numLightProbes=0};return t}(s);t.exports=a},{"awayjs-display/lib/traverse/CollectorBase":375}],377:[function(e,t,i){t.exports=e(2)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/base/BitmapData.js":2,"awayjs-core/lib/geom/Rectangle":388,"awayjs-core/lib/utils/ColorUtils":396}],378:[function(e,t,i){t.exports=e(146)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-core/lib/base/BlendMode.js":146}],379:[function(e,t,i){t.exports=e(3)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/AbstractMethodError.js":3,"awayjs-core/lib/errors/Error":381}],380:[function(e,t,i){t.exports=e(4)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/ArgumentError.js":4,"awayjs-core/lib/errors/Error":381}],381:[function(e,t,i){t.exports=e(5)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/Error.js":5}],382:[function(e,t,i){t.exports=e(6)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/AssetEvent.js":6,"awayjs-core/lib/events/Event":383}],383:[function(e,t,i){t.exports=e(7)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/Event.js":7}],384:[function(e,t,i){t.exports=e(8)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/EventDispatcher.js":8}],385:[function(e,t,i){t.exports=e(203)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/ColorTransform.js":203,"awayjs-core/lib/utils/ColorUtils":396}],386:[function(e,t,i){t.exports=e(12)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Matrix.js":12,"awayjs-core/lib/errors/ArgumentError":380,"awayjs-core/lib/geom/Point":387}],387:[function(e,t,i){t.exports=e(13)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Point.js":13}],388:[function(e,t,i){t.exports=e(14)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Rectangle.js":14,"awayjs-core/lib/geom/Point":387}],389:[function(e,t,i){t.exports=e(115)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Vector3D.js":115}],390:[function(e,t,i){t.exports=e(15)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/AssetType.js":15}],391:[function(e,t,i){t.exports=e(16)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/NamedAssetBase.js":16,"awayjs-core/lib/errors/AbstractMethodError":379,"awayjs-core/lib/events/AssetEvent":382,"awayjs-core/lib/events/EventDispatcher":384}],392:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/errors/Error");var a=e("awayjs-core/lib/textures/Texture2DBase");var n=e("awayjs-core/lib/utils/TextureUtils");var o=function(e){r(t,e);function t(t){e.call(this);this.bitmapData=t}Object.defineProperty(t.prototype,"bitmapData",{get:function(){return this._bitmapData},set:function(e){if(this._bitmapData==e)return;if(!n.isBitmapDataValid(e))throw new s("Invalid bitmapData: Width and height must be power of 2 and cannot exceed 2048");this._bitmapData=e;this.invalidateContent();this._pSetSize(e.width,e.height)},enumerable:true,configurable:true});t.prototype.dispose=function(){e.prototype.dispose.call(this);this._bitmapData.dispose();this._bitmapData=null};t.prototype._iGetTextureData=function(){return this._bitmapData};return t}(a);t.exports=o},{"awayjs-core/lib/errors/Error":381,"awayjs-core/lib/textures/Texture2DBase":394,"awayjs-core/lib/utils/TextureUtils":397}],393:[function(e,t,i){t.exports=e(24)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/MipmapGenerator.js":24,"awayjs-core/lib/base/BitmapData":377,"awayjs-core/lib/geom/Matrix":386,"awayjs-core/lib/geom/Rectangle":388}],394:[function(e,t,i){t.exports=e(25)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/Texture2DBase.js":25,"awayjs-core/lib/errors/AbstractMethodError":379,"awayjs-core/lib/textures/MipmapGenerator":393,"awayjs-core/lib/textures/TextureProxyBase":395}],395:[function(e,t,i){t.exports=e(26)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/TextureProxyBase.js":26,"awayjs-core/lib/library/AssetType":390,"awayjs-core/lib/library/NamedAssetBase":391}],396:[function(e,t,i){t.exports=e(29)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/ColorUtils.js":29}],397:[function(e,t,i){t.exports=e(31)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/TextureUtils.js":31}],398:[function(e,t,i){var r=e("awayjs-stagegl/lib/aglsl/Description");var s=e("awayjs-stagegl/lib/aglsl/Header");var a=e("awayjs-stagegl/lib/aglsl/Mapping");var n=e("awayjs-stagegl/lib/aglsl/Token");var o=function(){function e(){}e.prototype.decribeAGALByteArray=function(e){var t=new s;if(e.readUnsignedByte()!=160){throw"Bad AGAL: Missing 0xa0 magic byte."}t.version=e.readUnsignedInt();if(t.version>=16){e.readUnsignedByte();t.version>>=1}if(e.readUnsignedByte()!=161){throw"Bad AGAL: Missing 0xa1 magic byte."}t.progid=e.readUnsignedByte();switch(t.progid){case 1:t.type="fragment";break;case 0:t.type="vertex";break;case 2:t.type="cpu";break;default:t.type="";break}var i=new r;var o=[];while(e.position<e.length){var h=new n;h.opcode=e.readUnsignedInt();var l=a.agal2glsllut[h.opcode];if(!l){throw"Opcode not valid or not implemented yet: "+h.opcode}if(l.matrixheight){i.hasmatrix=true}if(l.dest){h.dest.regnum=e.readUnsignedShort();h.dest.mask=e.readUnsignedByte();h.dest.regtype=e.readUnsignedByte();i.regwrite[h.dest.regtype][h.dest.regnum]|=h.dest.mask}else{h.dest=null;e.readUnsignedInt()}if(l.a){this.readReg(h.a,1,i,e)}else{h.a=null;e.readUnsignedInt();e.readUnsignedInt()}if(l.b){this.readReg(h.b,l.matrixheight|0,i,e)}else{h.b=null;e.readUnsignedInt();e.readUnsignedInt()}o.push(h)}i.header=t;i.tokens=o;return i};e.prototype.readReg=function(e,t,i,r){e.regnum=r.readUnsignedShort();e.indexoffset=r.readByte();e.swizzle=r.readUnsignedByte();e.regtype=r.readUnsignedByte();i.regread[e.regtype][e.regnum]=15;if(e.regtype==5){e.lodbiad=e.indexoffset;e.indexoffset=undefined;e.swizzle=undefined;e.readmode=r.readUnsignedByte();e.dim=e.readmode>>4;e.readmode&=15;e.special=r.readUnsignedByte();e.wrap=e.special>>4;e.special&=15;e.mipmap=r.readUnsignedByte();e.filter=e.mipmap>>4;e.mipmap&=15;i.samplers[e.regnum]=e}else{e.indexregtype=r.readUnsignedByte();e.indexselect=r.readUnsignedByte();e.indirectflag=r.readUnsignedByte()}if(e.indirectflag){i.hasindirect=true}if(!e.indirectflag&&t){for(var s=0;s<t;s++){i.regread[e.regtype][e.regnum+s]=i.regread[e.regtype][e.regnum]}}};return e}();t.exports=o},{"awayjs-stagegl/lib/aglsl/Description":400,"awayjs-stagegl/lib/aglsl/Header":402,"awayjs-stagegl/lib/aglsl/Mapping":403,"awayjs-stagegl/lib/aglsl/Token":406}],399:[function(e,t,i){var r=e("awayjs-stagegl/lib/aglsl/Mapping");var s=e("awayjs-stagegl/lib/base/ContextStage3D");var a=function(){function e(){}e.prototype.parse=function(e){var t="";var i="";t+="precision highp float;\n";var a=e.header.type[0];if(e.header.type=="vertex"){t+="uniform float yflip;\n"}if(!e.hasindirect){for(var n=0;n<e.regread[1].length;n++){if(e.regread[1][n]){t+="uniform vec4 "+a+"c"+n+";\n"}}}else{t+="uniform vec4 "+a+"carrr["+s.maxvertexconstants+"];\n"}for(var n=0;n<e.regread[2].length||n<e.regwrite[2].length;n++){if(e.regread[2][n]||e.regwrite[2][n]){t+="vec4 "+a+"t"+n+";\n"}}for(var n=0;n<e.regread[0].length;n++){if(e.regread[0][n]){t+="attribute vec4 va"+n+";\n"}}for(var n=0;n<e.regread[4].length||n<e.regwrite[4].length;n++){if(e.regread[4][n]||e.regwrite[4][n]){t+="varying vec4 vi"+n+";\n"}}var o=["2D","Cube","3D",""];for(var n=0;n<e.samplers.length;n++){if(e.samplers[n]){t+="uniform sampler"+o[e.samplers[n].dim&3]+" fs"+n+";\n"}}if(e.header.type=="vertex"){t+="vec4 outpos;\n"}if(e.writedepth){t+="vec4 tmp_FragDepth;\n"}i+="void main() {\n";for(var n=0;n<e.tokens.length;n++){var h=r.agal2glsllut[e.tokens[n].opcode];if(!h){throw"Opcode not valid or not implemented yet: "}var l=h.matrixheight||1;for(var u=0;u<l;u++){var p="  "+h.s;if(e.tokens[n].dest){if(h.matrixheight){if((e.tokens[n].dest.mask>>u&1)!=1){continue
}var c=this.regtostring(e.tokens[n].dest.regtype,e.tokens[n].dest.regnum,e,a);var d="float";var f=["x","y","z","w"][u];c+="."+f}else{var c=this.regtostring(e.tokens[n].dest.regtype,e.tokens[n].dest.regnum,e,a);var d;var f;if(e.tokens[n].dest.mask!=15){var _=0;f="";if(e.tokens[n].dest.mask&1){_++;f+="x"}if(e.tokens[n].dest.mask&2){_++;f+="y"}if(e.tokens[n].dest.mask&4){_++;f+="z"}if(e.tokens[n].dest.mask&8){_++;f+="w"}c+="."+f;switch(_){case 1:d="float";break;case 2:d="vec2";break;case 3:d="vec3";break;default:throw"Unexpected destination mask"}}else{d="vec4";f="xyzw"}}p=p.replace("%dest",c);p=p.replace("%cast",d);p=p.replace("%dm",f)}var y=15;if(!h.ndwm&&h.dest&&e.tokens[n].dest){y=e.tokens[n].dest.mask}if(e.tokens[n].a){p=p.replace("%a",this.sourcetostring(e.tokens[n].a,0,y,h.scalar,e,a))}if(e.tokens[n].b){p=p.replace("%b",this.sourcetostring(e.tokens[n].b,u,y,h.scalar,e,a));if(e.tokens[n].b.regtype==5){var g=["2D","Cube","3D"][e.tokens[n].b.dim];var m=["vec2","vec3","vec3"][e.tokens[n].b.dim];p=p.replace("%texdim",g);p=p.replace("%texsize",m);var b="";p=p.replace("%lod",b)}}i+=p}}if(e.header.type=="vertex"){i+="  gl_Position = vec4(outpos.x, outpos.y, outpos.z*2.0 - outpos.w, outpos.w);\n"}if(e.writedepth){i+="  gl_FragDepth = clamp(tmp_FragDepth,0.0,1.0);\n"}i+="}\n";return t+i};e.prototype.regtostring=function(e,t,i,r){switch(e){case 0:return"va"+t;case 1:if(i.hasindirect&&i.header.type=="vertex"){return"vcarrr["+t+"]"}else{return r+"c"+t}case 2:return r+"t"+t;case 3:return i.header.type=="vertex"?"outpos":"gl_FragColor";case 4:return"vi"+t;case 5:return"fs"+t;case 6:return"tmp_FragDepth";default:throw"Unknown register type"}};e.prototype.sourcetostring=function(e,t,i,r,s,a){var n=["x","y","z","w"];var o;if(e.indirectflag){o="vcarrr[int("+this.regtostring(e.indexregtype,e.regnum,s,a)+"."+n[e.indexselect]+")";var h=t+e.indexoffset;if(h<0)o+=h.toString();if(h>0)o+="+"+h.toString();o+="]"}else{o=this.regtostring(e.regtype,e.regnum+t,s,a)}if(e.regtype==5){return o}if(r){return o+"."+n[e.swizzle>>0&3]}if(e.swizzle==228&&i==15){return o}o+=".";if(i&1)o+=n[e.swizzle>>0&3];if(i&2)o+=n[e.swizzle>>2&3];if(i&4)o+=n[e.swizzle>>4&3];if(i&8)o+=n[e.swizzle>>6&3];return o};return e}();t.exports=a},{"awayjs-stagegl/lib/aglsl/Mapping":403,"awayjs-stagegl/lib/base/ContextStage3D":426}],400:[function(e,t,i){var r=e("awayjs-stagegl/lib/aglsl/Header");var s=function(){function e(){this.regread=[[],[],[],[],[],[],[]];this.regwrite=[[],[],[],[],[],[],[]];this.hasindirect=false;this.writedepth=false;this.hasmatrix=false;this.samplers=[];this.tokens=[];this.header=new r}return e}();t.exports=s},{"awayjs-stagegl/lib/aglsl/Header":402}],401:[function(e,t,i){var r=function(){function e(){this.mask=0;this.regnum=0;this.regtype=0;this.dim=0}return e}();t.exports=r},{}],402:[function(e,t,i){var r=function(){function e(){this.progid=0;this.version=0;this.type=""}return e}();t.exports=r},{}],403:[function(e,t,i){var r=e("awayjs-stagegl/lib/aglsl/OpLUT");var s=function(){function e(e){}e.agal2glsllut=[new r("%dest = %cast(%a);\n",0,true,true,false,null,null,null,null,null,null),new r("%dest = %cast(%a + %b);\n",0,true,true,true,null,null,null,null,null,null),new r("%dest = %cast(%a - %b);\n",0,true,true,true,null,null,null,null,null,null),new r("%dest = %cast(%a * %b);\n",0,true,true,true,null,null,null,null,null,null),new r("%dest = %cast(%a / %b);\n",0,true,true,true,null,null,null,null,null,null),new r("%dest = %cast(1.0) / %a;\n",0,true,true,false,null,null,null,null,null,null),new r("%dest = %cast(min(%a,%b));\n",0,true,true,true,null,null,null,null,null,null),new r("%dest = %cast(max(%a,%b));\n",0,true,true,true,null,null,null,null,null,null),new r("%dest = %cast(fract(%a));\n",0,true,true,false,null,null,null,null,null,null),new r("%dest = %cast(sqrt(abs(%a)));\n",0,true,true,false,null,null,null,null,null,null),new r("%dest = %cast(inversesqrt(abs(%a)));\n",0,true,true,false,null,null,null,null,null,null),new r("%dest = %cast(pow(abs(%a),%b));\n",0,true,true,true,null,null,null,null,null,null),new r("%dest = %cast(log2(abs(%a)));\n",0,true,true,false,null,null,null,null,null,null),new r("%dest = %cast(exp2(%a));\n",0,true,true,false,null,null,null,null,null,null),new r("%dest = %cast(normalize(vec3( %a ) ));\n",0,true,true,false,null,null,true,null,null,null),new r("%dest = %cast(sin(%a));\n",0,true,true,false,null,null,null,null,null,null),new r("%dest = %cast(cos(%a));\n",0,true,true,false,null,null,null,null,null,null),new r("%dest = %cast(cross(vec3(%a),vec3(%b)));\n",0,true,true,true,null,null,true,null,null,null),new r("%dest = %cast(dot(vec3(%a),vec3(%b)));\n",0,true,true,true,null,null,true,null,null,null),new r("%dest = %cast(dot(vec4(%a),vec4(%b)));\n",0,true,true,true,null,null,true,null,null,null),new r("%dest = %cast(abs(%a));\n",0,true,true,false,null,null,null,null,null,null),new r("%dest = %cast(%a * -1.0);\n",0,true,true,false,null,null,null,null,null,null),new r("%dest = %cast(clamp(%a,0.0,1.0));\n",0,true,true,false,null,null,null,null,null,null),new r("%dest = %cast(dot(vec3(%a),vec3(%b)));\n",null,true,true,true,3,3,true,null,null,null),new r("%dest = %cast(dot(vec4(%a),vec4(%b)));\n",null,true,true,true,4,4,true,null,null,null),new r("%dest = %cast(dot(vec4(%a),vec4(%b)));\n",null,true,true,true,4,3,true,null,null,null),new r("%dest = %cast(dFdx(%a));\n",0,true,true,false,null,null,null,null,null,null),new r("%dest = %cast(dFdx(%a));\n",0,true,true,false,null,null,null,null,null,null),new r("if (float(%a)==float(%b)) {;\n",0,false,true,true,null,null,null,true,null,null),new r("if (float(%a)!=float(%b)) {;\n",0,false,true,true,null,null,null,true,null,null),new r("if (float(%a)>=float(%b)) {;\n",0,false,true,true,null,null,null,true,null,null),new r("if (float(%a)<float(%b)) {;\n",0,false,true,true,null,null,null,true,null,null),new r("} else {;\n",0,false,false,false,null,null,null,null,null,null),new r("};\n",0,false,false,false,null,null,null,null,null,null),new r(null,null,null,null,false,null,null,null,null,null,null),new r(null,null,null,null,false,null,null,null,null,null,null),new r(null,null,null,null,false,null,null,null,null,null,null),new r(null,null,null,null,false,null,null,null,null,null,null),new r("%dest = %cast(texture%texdimLod(%b,%texsize(%a)).%dm);\n",null,true,true,true,null,null,null,null,true,null),new r("if ( float(%a)<0.0 ) discard;\n",null,false,true,false,null,null,null,true,null,null),new r("%dest = %cast(texture%texdim(%b,%texsize(%a)%lod).%dm);\n",null,true,true,true,null,null,true,null,true,true),new r("%dest = %cast(greaterThanEqual(%a,%b).%dm);\n",0,true,true,true,null,null,true,null,true,null),new r("%dest = %cast(lessThan(%a,%b).%dm);\n",0,true,true,true,null,null,true,null,true,null),new r("%dest = %cast(sign(%a));\n",0,true,true,false,null,null,null,null,null,null),new r("%dest = %cast(equal(%a,%b).%dm);\n",0,true,true,true,null,null,true,null,true,null),new r("%dest = %cast(notEqual(%a,%b).%dm);\n",0,true,true,true,null,null,true,null,true,null)];return e}();t.exports=s},{"awayjs-stagegl/lib/aglsl/OpLUT":404}],404:[function(e,t,i){var r=function(){function e(e,t,i,r,s,a,n,o,h,l,u){this.s=e;this.flags=t;this.dest=i;this.a=r;this.b=s;this.matrixwidth=a;this.matrixheight=n;this.ndwm=o;this.scalar=h;this.dm=l;this.lod=u}return e}();t.exports=r},{}],405:[function(e,t,i){var r=function(){function e(){this.lodbias=0;this.dim=0;this.readmode=0;this.special=0;this.wrap=0;this.mipmap=0;this.filter=0}return e}();t.exports=r},{}],406:[function(e,t,i){var r=e("awayjs-stagegl/lib/aglsl/Destination");var s=function(){function e(){this.dest=new r;this.opcode=0;this.a=new r;this.b=new r}return e}();t.exports=s},{"awayjs-stagegl/lib/aglsl/Destination":401}],407:[function(e,t,i){var r=e("awayjs-stagegl/lib/aglsl/assembler/OpcodeMap");var s=e("awayjs-stagegl/lib/aglsl/assembler/Part");var a=e("awayjs-stagegl/lib/aglsl/assembler/RegMap");var n=e("awayjs-stagegl/lib/aglsl/assembler/SamplerMap");var o=function(){function e(){this.r={};this.cur=new s}e.prototype.assemble=function(e,t,i){if(t===void 0){t=null}if(i===void 0){i=null}if(!i){i=1}if(t){this.addHeader(t,i)}var r=e.replace(/[\f\n\r\v]+/g,"\n").split("\n");for(var s in r){this.processLine(r[s],s)}return this.r};e.prototype.processLine=function(e,t){var i=e.search("//");if(i!=-1){e=e.slice(0,i)}e=e.replace(/^\s+|\s+$/g,"");if(!(e.length>0)){return}var s=e.search(/<.*>/g);var a=null;if(s!=-1){a=e.slice(s).match(/([\w\.\-\+]+)/gi);e=e.slice(0,s)}var n=e.match(/([\w\.\+\[\]]+)/gi);if(!n||n.length<1){if(e.length>=3){console.log("Warning: bad line "+t+": "+e)}return}switch(n[0]){case"part":this.addHeader(n[1],Number(n[2]));break;case"endpart":if(!this.cur){throw"Unexpected endpart"}this.cur.data.position=0;this.cur=null;return;default:if(!this.cur){console.log("Warning: bad line "+t+": "+e+" (Outside of any part definition)");return}if(this.cur.name=="comment"){return}var o=r.map[n[0]];if(!o){throw"Bad opcode "+n[0]+" "+t+": "+e}this.emitOpcode(this.cur,o.opcode);var h=1;if(o.dest&&o.dest!="none"){if(!this.emitDest(this.cur,n[h++],o.dest)){throw"Bad destination register "+n[h-1]+" "+t+": "+e}}else{this.emitZeroDword(this.cur)}if(o.a&&o.a.format!="none"){if(!this.emitSource(this.cur,n[h++],o.a))throw"Bad source register "+n[h-1]+" "+t+": "+e}else{this.emitZeroQword(this.cur)}if(o.b&&o.b.format!="none"){if(o.b.format=="sampler"){if(!this.emitSampler(this.cur,n[h++],o.b,a)){throw"Bad sampler register "+n[h-1]+" "+t+": "+e}}else{if(!this.emitSource(this.cur,n[h++],o.b)){throw"Bad source register "+n[h-1]+" "+t+": "+e}}}else{this.emitZeroQword(this.cur)}break}};e.prototype.emitHeader=function(e){e.data.writeUnsignedByte(160);e.data.writeUnsignedInt(e.version);if(e.version>=16){e.data.writeUnsignedByte(0)}e.data.writeUnsignedByte(161);switch(e.name){case"fragment":e.data.writeUnsignedByte(1);break;case"vertex":e.data.writeUnsignedByte(0);break;case"cpu":e.data.writeUnsignedByte(2);break;default:e.data.writeUnsignedByte(255);break}};e.prototype.emitOpcode=function(e,t){e.data.writeUnsignedInt(t)};e.prototype.emitZeroDword=function(e){e.data.writeUnsignedInt(0)};e.prototype.emitZeroQword=function(e){e.data.writeUnsignedInt(0);e.data.writeUnsignedInt(0)};e.prototype.emitDest=function(e,t,i){var r=t.match(/([fov]?[tpocidavs])(\d*)(\.[xyzw]{1,4})?/i);if(!a.map[r[1]])return false;var s={num:r[2]?r[2]:0,code:a.map[r[1]].code,mask:this.stringToMask(r[3])};e.data.writeUnsignedShort(s.num);e.data.writeUnsignedByte(s.mask);e.data.writeUnsignedByte(s.code);return true};e.prototype.stringToMask=function(e){if(!e)return 15;var t=0;if(e.indexOf("x")!=-1)t|=1;if(e.indexOf("y")!=-1)t|=2;if(e.indexOf("z")!=-1)t|=4;if(e.indexOf("w")!=-1)t|=8;return t};e.prototype.stringToSwizzle=function(e){if(!e){return 228}var t={x:0,y:1,z:2,w:3};var i=0;if(e.charAt(0)!="."){throw"Missing . for swizzle"}if(e.length>1){i|=t[e.charAt(1)]}if(e.length>2){i|=t[e.charAt(2)]<<2}else{i|=(i&3)<<2}if(e.length>3){i|=t[e.charAt(3)]<<4}else{i|=(i&3<<2)<<2}if(e.length>4){i|=t[e.charAt(4)]<<6}else{i|=(i&3<<4)<<2}return i};e.prototype.emitSampler=function(e,t,i,r){var s=t.match(/fs(\d*)/i);if(!s||!s[1]){return false}e.data.writeUnsignedShort(parseInt(s[1]));e.data.writeUnsignedByte(0);e.data.writeUnsignedByte(0);var a=5;var o=0;for(var h=0;h<r.length;h++){var l=n.map[r[h].toLowerCase()];if(l){if((o>>l.shift&l.mask)!=0){console.log("Warning, duplicate sampler option")}o|=l.mask<<l.shift;a&=~(l.mask<<l.shift);a|=l.value<<l.shift}else{console.log("Warning, unknown sampler option: ",r[h])}}e.data.writeUnsignedInt(a);return true};e.prototype.emitSource=function(e,t,i){var r=t.match(/vc\[(v[tcai])(\d+)\.([xyzw])([\+\-]\d+)?\](\.[xyzw]{1,4})?/i);var s;if(r){if(!a.map[r[1]]){return false}var n={x:0,y:1,z:2,w:3};var o={num:r[2]|0,code:a.map[r[1]].code,swizzle:this.stringToSwizzle(r[5]),select:n[r[3]],offset:r[4]|0};e.data.writeUnsignedShort(o.num);e.data.writeByte(o.offset);e.data.writeUnsignedByte(o.swizzle);e.data.writeUnsignedByte(1);e.data.writeUnsignedByte(o.code);e.data.writeUnsignedByte(o.select);e.data.writeUnsignedByte(1<<7)}else{s=t.match(/([fov]?[tpocidavs])(\d*)(\.[xyzw]{1,4})?/i);if(!a.map[s[1]]){return false}var o={num:s[2]|0,code:a.map[s[1]].code,swizzle:this.stringToSwizzle(s[3])};e.data.writeUnsignedShort(o.num);e.data.writeUnsignedByte(0);e.data.writeUnsignedByte(o.swizzle);e.data.writeUnsignedByte(o.code);e.data.writeUnsignedByte(0);e.data.writeUnsignedByte(0);e.data.writeUnsignedByte(0)}return true};e.prototype.addHeader=function(e,t){if(!t){t=1}if(this.r[e]==undefined){this.r[e]=new s(e,t);this.emitHeader(this.r[e])}else if(this.r[e].version!=t){throw"Multiple versions for part "+e}this.cur=this.r[e]};return e}();t.exports=o},{"awayjs-stagegl/lib/aglsl/assembler/OpcodeMap":411,"awayjs-stagegl/lib/aglsl/assembler/Part":412,"awayjs-stagegl/lib/aglsl/assembler/RegMap":413,"awayjs-stagegl/lib/aglsl/assembler/SamplerMap":415}],408:[function(e,t,i){var r=function(){function e(){}return e}();t.exports=r},{}],409:[function(e,t,i){var r=function(){function e(){}return e}();t.exports=r},{}],410:[function(e,t,i){var r=e("awayjs-stagegl/lib/aglsl/assembler/Flags");var s=e("awayjs-stagegl/lib/aglsl/assembler/FS");var a=function(){function e(e,t,i,a,n,o,h,l,u,p){this.a=new s;this.b=new s;this.flags=new r;this.dest=e;this.a.format=t;this.a.size=i;this.b.format=a;this.b.size=n;this.opcode=o;this.flags.simple=h;this.flags.horizontal=l;this.flags.fragonly=u;this.flags.matrix=p}return e}();t.exports=a},{"awayjs-stagegl/lib/aglsl/assembler/FS":408,"awayjs-stagegl/lib/aglsl/assembler/Flags":409}],411:[function(e,t,i){var r=e("awayjs-stagegl/lib/aglsl/assembler/Opcode");var s=function(){function e(){}Object.defineProperty(e,"map",{get:function(){if(!e._map){e._map=new Array;e._map["mov"]=new r("vector","vector",4,"none",0,0,true,null,null,null);e._map["add"]=new r("vector","vector",4,"vector",4,1,true,null,null,null);e._map["sub"]=new r("vector","vector",4,"vector",4,2,true,null,null,null);e._map["mul"]=new r("vector","vector",4,"vector",4,3,true,null,null,null);e._map["div"]=new r("vector","vector",4,"vector",4,4,true,null,null,null);e._map["rcp"]=new r("vector","vector",4,"none",0,5,true,null,null,null);e._map["min"]=new r("vector","vector",4,"vector",4,6,true,null,null,null);e._map["max"]=new r("vector","vector",4,"vector",4,7,true,null,null,null);e._map["frc"]=new r("vector","vector",4,"none",0,8,true,null,null,null);e._map["sqt"]=new r("vector","vector",4,"none",0,9,true,null,null,null);e._map["rsq"]=new r("vector","vector",4,"none",0,10,true,null,null,null);e._map["pow"]=new r("vector","vector",4,"vector",4,11,true,null,null,null);e._map["log"]=new r("vector","vector",4,"none",0,12,true,null,null,null);e._map["exp"]=new r("vector","vector",4,"none",0,13,true,null,null,null);e._map["nrm"]=new r("vector","vector",4,"none",0,14,true,null,null,null);e._map["sin"]=new r("vector","vector",4,"none",0,15,true,null,null,null);e._map["cos"]=new r("vector","vector",4,"none",0,16,true,null,null,null);e._map["crs"]=new r("vector","vector",4,"vector",4,17,true,true,null,null);e._map["dp3"]=new r("vector","vector",4,"vector",4,18,true,true,null,null);e._map["dp4"]=new r("vector","vector",4,"vector",4,19,true,true,null,null);e._map["abs"]=new r("vector","vector",4,"none",0,20,true,null,null,null);e._map["neg"]=new r("vector","vector",4,"none",0,21,true,null,null,null);e._map["sat"]=new r("vector","vector",4,"none",0,22,true,null,null,null);e._map["ted"]=new r("vector","vector",4,"sampler",1,38,true,null,true,null);e._map["kil"]=new r("none","scalar",1,"none",0,39,true,null,true,null);e._map["tex"]=new r("vector","vector",4,"sampler",1,40,true,null,true,null);e._map["m33"]=new r("vector","matrix",3,"vector",3,23,true,null,null,true);e._map["m44"]=new r("vector","matrix",4,"vector",4,24,true,null,null,true);e._map["m43"]=new r("vector","matrix",3,"vector",4,25,true,null,null,true);e._map["sge"]=new r("vector","vector",4,"vector",4,41,true,null,null,null);e._map["slt"]=new r("vector","vector",4,"vector",4,42,true,null,null,null);e._map["sgn"]=new r("vector","vector",4,"vector",4,43,true,null,null,null);e._map["seq"]=new r("vector","vector",4,"vector",4,44,true,null,null,null);e._map["sne"]=new r("vector","vector",4,"vector",4,45,true,null,null,null)}return e._map},enumerable:true,configurable:true});return e}();t.exports=s},{"awayjs-stagegl/lib/aglsl/assembler/Opcode":410}],412:[function(e,t,i){var r=e("awayjs-core/lib/utils/ByteArray");var s=function(){function e(e,t){if(e===void 0){e=null}if(t===void 0){t=null}this.name="";this.version=0;this.name=e;this.version=t;this.data=new r}return e}();t.exports=s},{"awayjs-core/lib/utils/ByteArray":469}],413:[function(e,t,i){var r=function(){function e(e,t){this.code=e;this.desc=t}return e}();var s=function(){function e(){}Object.defineProperty(e,"map",{get:function(){if(!e._map){e._map=new Array;e._map["va"]=new r(0,"vertex attribute");e._map["fc"]=new r(1,"fragment constant");e._map["vc"]=new r(1,"vertex constant");e._map["ft"]=new r(2,"fragment temporary");e._map["vt"]=new r(2,"vertex temporary");e._map["vo"]=new r(3,"vertex output");e._map["op"]=new r(3,"vertex output");e._map["fd"]=new r(3,"fragment depth output");e._map["fo"]=new r(3,"fragment output");e._map["oc"]=new r(3,"fragment output");e._map["v"]=new r(4,"varying");e._map["vi"]=new r(4,"varying output");e._map["fi"]=new r(4,"varying input");e._map["fs"]=new r(5,"sampler")}return e._map},enumerable:true,configurable:true});return e}();t.exports=s},{}],414:[function(e,t,i){var r=function(){function e(e,t,i){this.shift=e;this.mask=t;this.value=i}return e}();t.exports=r},{}],415:[function(e,t,i){var r=e("awayjs-stagegl/lib/aglsl/assembler/Sampler");var s=function(){function e(){}Object.defineProperty(e,"map",{get:function(){if(!e._map){e._map=new Array;e._map["rgba"]=new r(8,15,0);e._map["rg"]=new r(8,15,5);e._map["r"]=new r(8,15,4);e._map["compressed"]=new r(8,15,1);e._map["compressed_alpha"]=new r(8,15,2);e._map["dxt1"]=new r(8,15,1);e._map["dxt5"]=new r(8,15,2);e._map["2d"]=new r(12,15,0);e._map["cube"]=new r(12,15,1);e._map["3d"]=new r(12,15,2);e._map["centroid"]=new r(16,1,1);e._map["ignoresampler"]=new r(16,4,4);e._map["clamp"]=new r(20,15,0);e._map["repeat"]=new r(20,15,1);e._map["wrap"]=new r(20,15,1);e._map["nomip"]=new r(24,15,0);e._map["mipnone"]=new r(24,15,0);e._map["mipnearest"]=new r(24,15,1);e._map["miplinear"]=new r(24,15,2);e._map["nearest"]=new r(28,15,0);e._map["linear"]=new r(28,15,1)}return e._map},enumerable:true,configurable:true});return e}();t.exports=s},{"awayjs-stagegl/lib/aglsl/assembler/Sampler":414}],416:[function(e,t,i){t.exports=e(283)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-stagegl/lib/base/ContextGLBlendFactor.js":283}],417:[function(e,t,i){var r=function(){function e(){}e.COLOR=1;e.DEPTH=2;e.STENCIL=4;e.ALL=e.COLOR|e.DEPTH|e.STENCIL;return e}();t.exports=r},{}],418:[function(e,t,i){t.exports=e(284)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-stagegl/lib/base/ContextGLCompareMode.js":284}],419:[function(e,t,i){var r=function(){function e(){}e.MIPLINEAR="miplinear";e.MIPNEAREST="mipnearest";e.MIPNONE="mipnone";return e}();t.exports=r},{}],420:[function(e,t,i){t.exports=e(286)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-stagegl/lib/base/ContextGLProgramType.js":286}],421:[function(e,t,i){var r=function(){function e(){}e.LINEAR="linear";e.NEAREST="nearest";return e}();t.exports=r},{}],422:[function(e,t,i){t.exports=e(287)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-stagegl/lib/base/ContextGLTextureFormat.js":287}],423:[function(e,t,i){t.exports=e(288)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-stagegl/lib/base/ContextGLTriangleFace.js":288}],424:[function(e,t,i){t.exports=e(289)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-stagegl/lib/base/ContextGLVertexBufferFormat.js":289}],425:[function(e,t,i){var r=function(){function e(){}e.CLAMP="clamp";e.REPEAT="repeat";return e}();t.exports=r},{}],426:[function(e,t,i){var r=e("awayjs-stagegl/lib/swfobject");var s=e("awayjs-stagegl/lib/aglsl/Sampler");var a=e("awayjs-stagegl/lib/base/ContextGLClearMask");var n=e("awayjs-stagegl/lib/base/ContextGLProgramType");var o=e("awayjs-stagegl/lib/base/CubeTextureFlash");var h=e("awayjs-stagegl/lib/base/IndexBufferFlash");var l=e("awayjs-stagegl/lib/base/OpCodes");var u=e("awayjs-stagegl/lib/base/ProgramFlash");var p=e("awayjs-stagegl/lib/base/TextureFlash");var c=e("awayjs-stagegl/lib/base/VertexBufferFlash");var d=function(){function e(t,i,s){this._cmdStream="";this._resources=new Array;var a="11.0.0";var n={id:t.id};var o={quality:"high",bgcolor:"#ffffff",allowscriptaccess:"sameDomain",allowfullscreen:"true",wmode:"direct"};this._errorCheckingEnabled=false;this._iDriverInfo="Unknown";var h={salign:"tl",id:t.id,name:t["name"]};this._oldCanvas=t.cloneNode();this._oldParent=t.parentNode;var l=this;e.contexts[t.id]=this;function u(e){if(!e.success)return;l._container=e.ref;l._iCallback=i}r.embedSWF("libs/molehill_js_flashbridge.swf",t.id,String(t.width),String(t.height),a,"",n,o,h,u)}Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"driverInfo",{get:function(){return this._iDriverInfo},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"errorCheckingEnabled",{get:function(){return this._errorCheckingEnabled},set:function(e){if(this._errorCheckingEnabled==e)return;this._errorCheckingEnabled=e;this.addStream(String.fromCharCode(l.enableErrorChecking,e?l.trueValue:l.falseValue));this.execute()},enumerable:true,configurable:true});e.prototype._iAddResource=function(e){this._resources.push(e)};e.prototype._iRemoveResource=function(e){this._resources.splice(this._resources.indexOf(e))};e.prototype.createTexture=function(e,t,i,r,s){if(s===void 0){s=0}return new p(this,e,t,i,r)};e.prototype.createCubeTexture=function(e,t,i,r){if(r===void 0){r=0}return new o(this,e,t,i)};e.prototype.setTextureAt=function(t,i){if(i){this.addStream(String.fromCharCode(l.setTextureAt)+t+","+i.id+",")}else{this.addStream(String.fromCharCode(l.clearTextureAt)+t.toString()+",")}if(e.debug)this.execute()};e.prototype.setSamplerStateAt=function(e,t,i,r){};e.prototype.setStencilActions=function(t,i,r,s,a){if(t===void 0){t="frontAndBack"}if(i===void 0){i="always"}if(r===void 0){r="keep"}if(s===void 0){s="keep"}if(a===void 0){a="keep"}this.addStream(String.fromCharCode(l.setStencilActions)+t+"$"+i+"$"+r+"$"+s+"$"+a+"$");if(e.debug)this.execute()};e.prototype.setStencilReferenceValue=function(t,i,r){if(i===void 0){i=255}if(r===void 0){r=255}this.addStream(String.fromCharCode(l.setStencilReferenceValue,t+l.intMask,i+l.intMask,r+l.intMask));if(e.debug)this.execute()};e.prototype.setCulling=function(t,i){if(i===void 0){i="leftHanded"}this.addStream(String.fromCharCode(l.setCulling)+t+"$");if(e.debug)this.execute()};e.prototype.drawTriangles=function(t,i,r){if(i===void 0){i=0}if(r===void 0){r=-1}i=i||0;if(!r||r<0)r=t.numIndices/3;this.addStream(String.fromCharCode(l.drawTriangles,t.id+l.intMask)+i+","+r+",");if(e.debug)this.execute()};e.prototype.setProgramConstantsFromMatrix=function(e,t,i,r){if(r===void 0){r=false}var s=i.rawData;if(r){this.setProgramConstantsFromArray(e,t,[s[0],s[4],s[8],s[12]],1);this.setProgramConstantsFromArray(e,t+1,[s[1],s[5],s[9],s[13]],1);this.setProgramConstantsFromArray(e,t+2,[s[2],s[6],s[10],s[14]],1);this.setProgramConstantsFromArray(e,t+3,[s[3],s[7],s[11],s[15]],1)}else{this.setProgramConstantsFromArray(e,t,[s[0],s[1],s[2],s[3]],1);this.setProgramConstantsFromArray(e,t+1,[s[4],s[5],s[6],s[7]],1);this.setProgramConstantsFromArray(e,t+2,[s[8],s[9],s[10],s[11]],1);this.setProgramConstantsFromArray(e,t+3,[s[12],s[13],s[14],s[15]],1)}};e.prototype.setProgramConstantsFromArray=function(t,i,r,s){if(s===void 0){s=-1}var a;var o=t==n.VERTEX?l.trueValue:l.falseValue;for(var h=0;h<s;h++){a=h*4;this.addStream(String.fromCharCode(l.setProgramConstant,o,i+h+l.intMask)+r[a]+","+r[a+1]+","+r[a+2]+","+r[a+3]+",");if(e.debug)this.execute()}};e.prototype.setProgram=function(t){this.addStream(String.fromCharCode(l.setProgram,t.id+l.intMask));if(e.debug)this.execute()};e.prototype.present=function(){this.addStream(String.fromCharCode(l.present));this.execute()};e.prototype.clear=function(t,i,r,s,n,o,h){if(t===void 0){t=0}if(i===void 0){i=0}if(r===void 0){r=0}if(s===void 0){s=1}if(n===void 0){n=1}if(o===void 0){o=0}if(h===void 0){h=a.ALL}this.addStream(String.fromCharCode(l.clear)+t+","+i+","+r+","+s+","+n+","+o+","+h+",");if(e.debug)this.execute()};e.prototype.createProgram=function(){return new u(this)};e.prototype.createVertexBuffer=function(e,t){return new c(this,e,t)};e.prototype.createIndexBuffer=function(e){return new h(this,e)};e.prototype.configureBackBuffer=function(e,t,i,r){if(r===void 0){r=true}this._width=e;this._height=t;this.addStream(String.fromCharCode(l.configureBackBuffer)+e+","+t+",")};e.prototype.drawToBitmapData=function(e){};e.prototype.setVertexBufferAt=function(t,i,r,s){if(r===void 0){r=0}if(s===void 0){s=null}if(i){this.addStream(String.fromCharCode(l.setVertexBufferAt,t+l.intMask)+i.id+","+r+","+s+"$")}else{this.addStream(String.fromCharCode(l.clearVertexBufferAt,t+l.intMask))}if(e.debug)this.execute()};e.prototype.setColorMask=function(t,i,r,s){this.addStream(String.fromCharCode(l.setColorMask,t?l.trueValue:l.falseValue,i?l.trueValue:l.falseValue,r?l.trueValue:l.falseValue,s?l.trueValue:l.falseValue));if(e.debug)this.execute()};e.prototype.setBlendFactors=function(t,i){this.addStream(String.fromCharCode(l.setBlendFactors)+t+"$"+i+"$");if(e.debug)this.execute()};e.prototype.setRenderToTexture=function(t,i,r,s){if(i===void 0){i=false}if(r===void 0){r=0}if(s===void 0){s=0}if(t===null||t===undefined){this.addStream(String.fromCharCode(l.clearRenderToTexture))}else{this.addStream(String.fromCharCode(l.setRenderToTexture,i?l.trueValue:l.falseValue)+t.id+","+(r||0)+",")}if(e.debug)this.execute()};e.prototype.setRenderToBackBuffer=function(){this.addStream(String.fromCharCode(l.clearRenderToTexture));if(e.debug)this.execute()};e.prototype.setScissorRectangle=function(t){if(t){this.addStream(String.fromCharCode(l.setScissorRect)+t.x+","+t.y+","+t.width+","+t.height+",")}else{this.addStream(String.fromCharCode(l.clearScissorRect))}if(e.debug)this.execute()};e.prototype.setDepthTest=function(t,i){this.addStream(String.fromCharCode(l.setDepthTest,t?l.trueValue:l.falseValue)+i+"$");if(e.debug)this.execute()};e.prototype.dispose=function(){if(this._container==null)return;console.log("Context3D dispose, releasing "+this._resources.length+" resources.");while(this._resources.length)this._resources[0].dispose();if(this._container){this.addStream(String.fromCharCode(l.disposeContext));this.execute();r.removeSWF(this._oldCanvas.id);if(this._oldCanvas&&this._oldParent){this._oldParent.appendChild(this._oldCanvas);this._oldParent=null}this._container=null}this._oldCanvas=null};e.prototype.addStream=function(e){this._cmdStream+=e};e.prototype.execute=function(){if(e.logStream)console.log(this._cmdStream);var t=this._container["CallFunction"]('<invoke name="execStage3dOpStream" returntype="javascript"><arguments><string>'+this._cmdStream+"</string></arguments></invoke>");if(Number(t)<=-3)throw"Exec stream failed";this._cmdStream="";return Number(t)};e.contexts=new Object;e.maxvertexconstants=128;e.maxfragconstants=28;e.maxtemp=8;e.maxstreams=8;e.maxtextures=8;e.defaultsampler=new s;e.debug=false;e.logStream=false;return e}();function f(e,t){var i=d.contexts[e];if(i._iCallback){i._iDriverInfo=t;var r=window.setTimeout(function(){window.clearTimeout(r);try{i._iCallback(i)}catch(e){console.log("Callback failed during flash initialization with '"+e.toString()+"'")}},1)}}t.exports=d},{"awayjs-stagegl/lib/aglsl/Sampler":405,"awayjs-stagegl/lib/base/ContextGLClearMask":417,"awayjs-stagegl/lib/base/ContextGLProgramType":420,"awayjs-stagegl/lib/base/CubeTextureFlash":428,"awayjs-stagegl/lib/base/IndexBufferFlash":430,"awayjs-stagegl/lib/base/OpCodes":432,"awayjs-stagegl/lib/base/ProgramFlash":433,"awayjs-stagegl/lib/base/TextureFlash":439,"awayjs-stagegl/lib/base/VertexBufferFlash":441,"awayjs-stagegl/lib/swfobject":452}],427:[function(e,t,i){var r=e("awayjs-core/lib/geom/Rectangle");var s=e("awayjs-core/lib/utils/ByteArray");var a=e("awayjs-stagegl/lib/base/ContextGLBlendFactor");var n=e("awayjs-stagegl/lib/base/ContextGLClearMask");var o=e("awayjs-stagegl/lib/base/ContextGLCompareMode");var h=e("awayjs-stagegl/lib/base/ContextGLMipFilter");var l=e("awayjs-stagegl/lib/base/ContextGLProgramType");var u=e("awayjs-stagegl/lib/base/ContextGLTextureFilter");var p=e("awayjs-stagegl/lib/base/ContextGLTriangleFace");var c=e("awayjs-stagegl/lib/base/ContextGLVertexBufferFormat");var d=e("awayjs-stagegl/lib/base/ContextGLWrapMode");var f=e("awayjs-stagegl/lib/base/CubeTextureWebGL");var _=e("awayjs-stagegl/lib/base/IndexBufferWebGL");var y=e("awayjs-stagegl/lib/base/ProgramWebGL");var g=e("awayjs-stagegl/lib/base/TextureWebGL");var m=e("awayjs-stagegl/lib/base/SamplerState");var b=e("awayjs-stagegl/lib/base/VertexBufferWebGL");var v=function(){function e(t){this._blendFactorDictionary=new Object;this._depthTestDictionary=new Object;this._textureIndexDictionary=new Array(8);this._textureTypeDictionary=new Object;this._wrapDictionary=new Object;this._filterDictionary=new Object;this._mipmapFilterDictionary=new Object;this._uniformLocationNameDictionary=new Object;this._vertexBufferDimensionDictionary=new Object;this._indexBufferList=new Array;this._vertexBufferList=new Array;this._textureList=new Array;this._programList=new Array;this._samplerStates=new Array(8);this._container=t;try{this._gl=t.getContext("experimental-webgl",{premultipliedAlpha:false,alpha:false});if(!this._gl)this._gl=t.getContext("webgl",{premultipliedAlpha:false,alpha:false})}catch(i){}if(this._gl){this._blendFactorDictionary[a.ONE]=this._gl.ONE;this._blendFactorDictionary[a.DESTINATION_ALPHA]=this._gl.DST_ALPHA;this._blendFactorDictionary[a.DESTINATION_COLOR]=this._gl.DST_COLOR;this._blendFactorDictionary[a.ONE]=this._gl.ONE;this._blendFactorDictionary[a.ONE_MINUS_DESTINATION_ALPHA]=this._gl.ONE_MINUS_DST_ALPHA;this._blendFactorDictionary[a.ONE_MINUS_DESTINATION_COLOR]=this._gl.ONE_MINUS_DST_COLOR;this._blendFactorDictionary[a.ONE_MINUS_SOURCE_ALPHA]=this._gl.ONE_MINUS_SRC_ALPHA;this._blendFactorDictionary[a.ONE_MINUS_SOURCE_COLOR]=this._gl.ONE_MINUS_SRC_COLOR;this._blendFactorDictionary[a.SOURCE_ALPHA]=this._gl.SRC_ALPHA;this._blendFactorDictionary[a.SOURCE_COLOR]=this._gl.SRC_COLOR;this._blendFactorDictionary[a.ZERO]=this._gl.ZERO;this._depthTestDictionary[o.ALWAYS]=this._gl.ALWAYS;this._depthTestDictionary[o.EQUAL]=this._gl.EQUAL;this._depthTestDictionary[o.GREATER]=this._gl.GREATER;this._depthTestDictionary[o.GREATER_EQUAL]=this._gl.GEQUAL;this._depthTestDictionary[o.LESS]=this._gl.LESS;this._depthTestDictionary[o.LESS_EQUAL]=this._gl.LEQUAL;this._depthTestDictionary[o.NEVER]=this._gl.NEVER;this._depthTestDictionary[o.NOT_EQUAL]=this._gl.NOTEQUAL;this._textureIndexDictionary[0]=this._gl.TEXTURE0;this._textureIndexDictionary[1]=this._gl.TEXTURE1;this._textureIndexDictionary[2]=this._gl.TEXTURE2;this._textureIndexDictionary[3]=this._gl.TEXTURE3;this._textureIndexDictionary[4]=this._gl.TEXTURE4;this._textureIndexDictionary[5]=this._gl.TEXTURE5;this._textureIndexDictionary[6]=this._gl.TEXTURE6;this._textureIndexDictionary[7]=this._gl.TEXTURE7;this._textureTypeDictionary["texture2d"]=this._gl.TEXTURE_2D;
this._textureTypeDictionary["textureCube"]=this._gl.TEXTURE_CUBE_MAP;this._wrapDictionary[d.REPEAT]=this._gl.REPEAT;this._wrapDictionary[d.CLAMP]=this._gl.CLAMP_TO_EDGE;this._filterDictionary[u.LINEAR]=this._gl.LINEAR;this._filterDictionary[u.NEAREST]=this._gl.NEAREST;this._mipmapFilterDictionary[u.LINEAR]=new Object;this._mipmapFilterDictionary[u.LINEAR][h.MIPNEAREST]=this._gl.LINEAR_MIPMAP_NEAREST;this._mipmapFilterDictionary[u.LINEAR][h.MIPLINEAR]=this._gl.LINEAR_MIPMAP_LINEAR;this._mipmapFilterDictionary[u.LINEAR][h.MIPNONE]=this._gl.LINEAR;this._mipmapFilterDictionary[u.NEAREST]=new Object;this._mipmapFilterDictionary[u.NEAREST][h.MIPNEAREST]=this._gl.NEAREST_MIPMAP_NEAREST;this._mipmapFilterDictionary[u.NEAREST][h.MIPLINEAR]=this._gl.NEAREST_MIPMAP_LINEAR;this._mipmapFilterDictionary[u.NEAREST][h.MIPNONE]=this._gl.NEAREST;this._uniformLocationNameDictionary[l.VERTEX]="vc";this._uniformLocationNameDictionary[l.FRAGMENT]="fc";this._vertexBufferDimensionDictionary[c.FLOAT_1]=1;this._vertexBufferDimensionDictionary[c.FLOAT_2]=2;this._vertexBufferDimensionDictionary[c.FLOAT_3]=3;this._vertexBufferDimensionDictionary[c.FLOAT_4]=4;this._vertexBufferDimensionDictionary[c.BYTES_4]=4}else{alert("WebGL is not available.")}for(var r=0;r<e.MAX_SAMPLERS;++r){this._samplerStates[r]=new m;this._samplerStates[r].wrap=this._gl.REPEAT;this._samplerStates[r].filter=this._gl.LINEAR;this._samplerStates[r].mipfilter=this._gl.LINEAR}}Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:true,configurable:true});e.prototype.gl=function(){return this._gl};e.prototype.clear=function(e,t,i,r,s,a,o){if(e===void 0){e=0}if(t===void 0){t=0}if(i===void 0){i=0}if(r===void 0){r=1}if(s===void 0){s=1}if(a===void 0){a=0}if(o===void 0){o=n.ALL}if(!this._drawing){this.updateBlendStatus();this._drawing=true}var h=0;if(o&n.COLOR)h|=this._gl.COLOR_BUFFER_BIT;if(o&n.STENCIL)h|=this._gl.STENCIL_BUFFER_BIT;if(o&n.DEPTH)h|=this._gl.DEPTH_BUFFER_BIT;this._gl.clearColor(e,t,i,r);this._gl.clearDepth(s);this._gl.clearStencil(a);this._gl.clear(h)};e.prototype.configureBackBuffer=function(e,t,i,r){if(r===void 0){r=true}this._width=e;this._height=t;if(r){this._gl.enable(this._gl.STENCIL_TEST);this._gl.enable(this._gl.DEPTH_TEST)}this._gl.viewport["width"]=e;this._gl.viewport["height"]=t;this._gl.viewport(0,0,e,t)};e.prototype.createCubeTexture=function(e,t,i,r){if(r===void 0){r=0}var s=new f(this._gl,e);this._textureList.push(s);return s};e.prototype.createIndexBuffer=function(e){var t=new _(this._gl,e);this._indexBufferList.push(t);return t};e.prototype.createProgram=function(){var e=new y(this._gl);this._programList.push(e);return e};e.prototype.createTexture=function(e,t,i,r,s){if(s===void 0){s=0}var a=new g(this._gl,e,t);this._textureList.push(a);return a};e.prototype.createVertexBuffer=function(e,t){var i=new b(this._gl,e,t);this._vertexBufferList.push(i);return i};e.prototype.dispose=function(){var e;for(e=0;e<this._indexBufferList.length;++e)this._indexBufferList[e].dispose();this._indexBufferList=null;for(e=0;e<this._vertexBufferList.length;++e)this._vertexBufferList[e].dispose();this._vertexBufferList=null;for(e=0;e<this._textureList.length;++e)this._textureList[e].dispose();this._textureList=null;for(e=0;e<this._programList.length;++e)this._programList[e].dispose();for(e=0;e<this._samplerStates.length;++e)this._samplerStates[e]=null;this._programList=null};e.prototype.drawToBitmapData=function(e){var t=new ArrayBuffer(e.width*e.height*4);this._gl.readPixels(0,0,e.width,e.height,this._gl.RGBA,this._gl.UNSIGNED_BYTE,new Uint8Array(t));var i=new s;i.setArrayBuffer(t);e.setPixels(new r(0,0,e.width,e.height),i)};e.prototype.drawTriangles=function(e,t,i){if(t===void 0){t=0}if(i===void 0){i=-1}if(!this._drawing)throw"Need to clear before drawing if the buffer has not been cleared since the last present() call.";this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,e.glBuffer);this._gl.drawElements(this._gl.TRIANGLES,i==-1?e.numIndices:i*3,this._gl.UNSIGNED_SHORT,t)};e.prototype.present=function(){this._drawing=false};e.prototype.setBlendFactors=function(e,t){this._blendEnabled=true;this._blendSourceFactor=this._blendFactorDictionary[e];this._blendDestinationFactor=this._blendFactorDictionary[t];this.updateBlendStatus()};e.prototype.setColorMask=function(e,t,i,r){this._gl.colorMask(e,t,i,r)};e.prototype.setCulling=function(e,t){if(t===void 0){t="leftHanded"}if(e==p.NONE){this._gl.disable(this._gl.CULL_FACE)}else{this._gl.enable(this._gl.CULL_FACE);switch(e){case p.BACK:this._gl.cullFace(t=="leftHanded"?this._gl.FRONT:this._gl.BACK);break;case p.FRONT:this._gl.cullFace(t=="leftHanded"?this._gl.BACK:this._gl.FRONT);break;case p.FRONT_AND_BACK:this._gl.cullFace(this._gl.FRONT_AND_BACK);break;default:throw"Unknown ContextGLTriangleFace type."}}};e.prototype.setDepthTest=function(e,t){this._gl.depthFunc(this._depthTestDictionary[t]);this._gl.depthMask(e)};e.prototype.setProgram=function(e){this._currentProgram=e;e.focusProgram()};e.prototype.setProgramConstantsFromMatrix=function(e,t,i,r){if(r===void 0){r=false}var s=i.rawData;if(r){this.setProgramConstantsFromArray(e,t,[s[0],s[4],s[8],s[12]],1);this.setProgramConstantsFromArray(e,t+1,[s[1],s[5],s[9],s[13]],1);this.setProgramConstantsFromArray(e,t+2,[s[2],s[6],s[10],s[14]],1);this.setProgramConstantsFromArray(e,t+3,[s[3],s[7],s[11],s[15]],1)}else{this.setProgramConstantsFromArray(e,t,[s[0],s[1],s[2],s[3]],1);this.setProgramConstantsFromArray(e,t+1,[s[4],s[5],s[6],s[7]],1);this.setProgramConstantsFromArray(e,t+2,[s[8],s[9],s[10],s[11]],1);this.setProgramConstantsFromArray(e,t+3,[s[12],s[13],s[14],s[15]],1)}};e.prototype.setProgramConstantsFromArray=function(e,t,i,r){if(r===void 0){r=-1}var s=this._uniformLocationNameDictionary[e];var a;for(var n=0;n<r;n++){a=n*4;this._gl.uniform4f(this._gl.getUniformLocation(this._currentProgram.glProgram,s+(t+n)),i[a],i[a+1],i[a+2],i[a+3])}};e.prototype.setScissorRectangle=function(e){if(!e){this._gl.disable(this._gl.SCISSOR_TEST);return}this._gl.enable(this._gl.SCISSOR_TEST);this._gl.scissor(e.x,e.y,e.width,e.height)};e.prototype.setTextureAt=function(e,t){var i=this._samplerStates[e];if(this._activeTexture!=e&&(t||i.type)){this._activeTexture=e;this._gl.activeTexture(this._textureIndexDictionary[e])}if(!t){if(i.type){this._gl.bindTexture(i.type,null);i.type=null}return}var r=this._textureTypeDictionary[t.textureType];i.type=r;this._gl.bindTexture(r,t.glTexture);this._gl.uniform1i(this._gl.getUniformLocation(this._currentProgram.glProgram,"fs"+e),e);this._gl.texParameteri(r,this._gl.TEXTURE_WRAP_S,i.wrap);this._gl.texParameteri(r,this._gl.TEXTURE_WRAP_T,i.wrap);this._gl.texParameteri(r,this._gl.TEXTURE_MAG_FILTER,i.filter);this._gl.texParameteri(r,this._gl.TEXTURE_MIN_FILTER,i.mipfilter)};e.prototype.setSamplerStateAt=function(t,i,r,s){if(0<=t&&t<e.MAX_SAMPLERS){this._samplerStates[t].wrap=this._wrapDictionary[i];this._samplerStates[t].filter=this._filterDictionary[r];this._samplerStates[t].mipfilter=this._mipmapFilterDictionary[r][s]}else{throw"Sampler is out of bounds."}};e.prototype.setVertexBufferAt=function(e,t,i,r){if(i===void 0){i=0}if(r===void 0){r=null}var s=this._currentProgram?this._gl.getAttribLocation(this._currentProgram.glProgram,"va"+e):-1;if(!t){if(s>-1)this._gl.disableVertexAttribArray(s);return}this._gl.bindBuffer(this._gl.ARRAY_BUFFER,t.glBuffer);this._gl.enableVertexAttribArray(s);this._gl.vertexAttribPointer(s,this._vertexBufferDimensionDictionary[r],this._gl.FLOAT,false,t.data32PerVertex*4,i*4)};e.prototype.setRenderToTexture=function(e,t,i,r){if(t===void 0){t=false}if(i===void 0){i=0}if(r===void 0){r=0}var s=e;var a=s.frameBuffer;this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,a);if(t){this._gl.enable(this._gl.STENCIL_TEST);this._gl.enable(this._gl.DEPTH_TEST)}this._gl.viewport(0,0,s.width,s.height)};e.prototype.setRenderToBackBuffer=function(){this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null)};e.prototype.updateBlendStatus=function(){if(this._blendEnabled){this._gl.enable(this._gl.BLEND);this._gl.blendEquation(this._gl.FUNC_ADD);this._gl.blendFunc(this._blendSourceFactor,this._blendDestinationFactor)}else{this._gl.disable(this._gl.BLEND)}};e.MAX_SAMPLERS=8;e.modulo=0;return e}();t.exports=v},{"awayjs-core/lib/geom/Rectangle":462,"awayjs-core/lib/utils/ByteArray":469,"awayjs-stagegl/lib/base/ContextGLBlendFactor":416,"awayjs-stagegl/lib/base/ContextGLClearMask":417,"awayjs-stagegl/lib/base/ContextGLCompareMode":418,"awayjs-stagegl/lib/base/ContextGLMipFilter":419,"awayjs-stagegl/lib/base/ContextGLProgramType":420,"awayjs-stagegl/lib/base/ContextGLTextureFilter":421,"awayjs-stagegl/lib/base/ContextGLTriangleFace":423,"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat":424,"awayjs-stagegl/lib/base/ContextGLWrapMode":425,"awayjs-stagegl/lib/base/CubeTextureWebGL":429,"awayjs-stagegl/lib/base/IndexBufferWebGL":431,"awayjs-stagegl/lib/base/ProgramWebGL":434,"awayjs-stagegl/lib/base/SamplerState":436,"awayjs-stagegl/lib/base/TextureWebGL":440,"awayjs-stagegl/lib/base/VertexBufferWebGL":442}],428:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/base/BitmapData");var a=e("awayjs-core/lib/utils/ByteArrayBase");var n=e("awayjs-stagegl/lib/base/OpCodes");var o=e("awayjs-stagegl/lib/base/ResourceBaseFlash");var h=function(e){r(t,e);function t(t,i,r,s,a){if(a===void 0){a=false}e.call(this);this._context=t;this._size=i;this._context.addStream(String.fromCharCode(n.initCubeTexture,s?n.trueValue:n.falseValue)+i+","+a+","+r+"$");this._pId=this._context.execute();this._context._iAddResource(this)}Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:true,configurable:true});t.prototype.dispose=function(){this._context.addStream(String.fromCharCode(n.disposeCubeTexture)+this._pId.toString()+",");this._context.execute();this._context._iRemoveResource(this);this._context=null};t.prototype.uploadFromData=function(e,t,i){if(i===void 0){i=0}if(e instanceof s){e=e.imageData.data}else if(e instanceof HTMLImageElement){var r=document.createElement("canvas");var o=e.width;var h=e.height;r.width=o;r.height=h;var l=r.getContext("2d");l.drawImage(e,0,0);e=l.getImageData(0,0,o,h).data}var u=0;var p=a.internalGetBase64String(e.length,function(){return e[u++]},null);this._context.addStream(String.fromCharCode(n.uploadBytesCubeTexture)+this._pId+","+i+","+t+","+(this.size>>i)+","+p+"%");this._context.execute()};t.prototype.uploadCompressedTextureFromByteArray=function(e,t,i){if(i===void 0){i=false}};return t}(o);t.exports=h},{"awayjs-core/lib/base/BitmapData":453,"awayjs-core/lib/utils/ByteArrayBase":470,"awayjs-stagegl/lib/base/OpCodes":432,"awayjs-stagegl/lib/base/ResourceBaseFlash":435}],429:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/base/BitmapData");var a=e("awayjs-stagegl/lib/base/TextureBaseWebGL");var n=function(e){r(t,e);function t(t,i){e.call(this,t);this._textureSelectorDictionary=new Array(6);this.textureType="textureCube";this._size=i;this._texture=this._gl.createTexture();this._textureSelectorDictionary[0]=t.TEXTURE_CUBE_MAP_POSITIVE_X;this._textureSelectorDictionary[1]=t.TEXTURE_CUBE_MAP_NEGATIVE_X;this._textureSelectorDictionary[2]=t.TEXTURE_CUBE_MAP_POSITIVE_Y;this._textureSelectorDictionary[3]=t.TEXTURE_CUBE_MAP_NEGATIVE_Y;this._textureSelectorDictionary[4]=t.TEXTURE_CUBE_MAP_POSITIVE_Z;this._textureSelectorDictionary[5]=t.TEXTURE_CUBE_MAP_NEGATIVE_Z}t.prototype.dispose=function(){this._gl.deleteTexture(this._texture)};t.prototype.uploadFromData=function(e,t,i){if(i===void 0){i=0}if(e instanceof s)e=e.imageData;this._gl.bindTexture(this._gl.TEXTURE_CUBE_MAP,this._texture);this._gl.texImage2D(this._textureSelectorDictionary[t],i,this._gl.RGBA,this._gl.RGBA,this._gl.UNSIGNED_BYTE,e);this._gl.bindTexture(this._gl.TEXTURE_CUBE_MAP,null)};t.prototype.uploadCompressedTextureFromByteArray=function(e,t,i){if(i===void 0){i=false}};Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"glTexture",{get:function(){return this._texture},enumerable:true,configurable:true});return t}(a);t.exports=n},{"awayjs-core/lib/base/BitmapData":453,"awayjs-stagegl/lib/base/TextureBaseWebGL":438}],430:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-stagegl/lib/base/OpCodes");var a=e("awayjs-stagegl/lib/base/ResourceBaseFlash");var n=function(e){r(t,e);function t(t,i){e.call(this);this._context=t;this._numIndices=i;this._context.addStream(String.fromCharCode(s.initIndexBuffer,i+s.intMask));this._pId=this._context.execute();this._context._iAddResource(this)}t.prototype.uploadFromArray=function(e,t,i){this._context.addStream(String.fromCharCode(s.uploadArrayIndexBuffer,this._pId+s.intMask)+e.join()+"#"+t+","+i+",");this._context.execute()};t.prototype.dispose=function(){this._context.addStream(String.fromCharCode(s.disposeIndexBuffer,this._pId+s.intMask));this._context.execute();this._context._iRemoveResource(this);this._context=null};Object.defineProperty(t.prototype,"numIndices",{get:function(){return this._numIndices},enumerable:true,configurable:true});return t}(a);t.exports=n},{"awayjs-stagegl/lib/base/OpCodes":432,"awayjs-stagegl/lib/base/ResourceBaseFlash":435}],431:[function(e,t,i){var r=function(){function e(e,t){this._gl=e;this._buffer=this._gl.createBuffer();this._numIndices=t}e.prototype.uploadFromArray=function(e,t,i){this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,this._buffer);this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(e),this._gl.STATIC_DRAW)};e.prototype.dispose=function(){this._gl.deleteBuffer(this._buffer)};Object.defineProperty(e.prototype,"numIndices",{get:function(){return this._numIndices},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"glBuffer",{get:function(){return this._buffer},enumerable:true,configurable:true});return e}();t.exports=r},{}],432:[function(e,t,i){var r=function(){function e(){}e.trueValue=32;e.falseValue=33;e.intMask=63;e.drawTriangles=41;e.setProgramConstant=42;e.setProgram=43;e.present=44;e.clear=45;e.initProgram=46;e.initVertexBuffer=47;e.initIndexBuffer=48;e.configureBackBuffer=49;e.uploadArrayIndexBuffer=50;e.uploadArrayVertexBuffer=51;e.uploadAGALBytesProgram=52;e.setVertexBufferAt=53;e.uploadBytesIndexBuffer=54;e.uploadBytesVertexBuffer=55;e.setColorMask=56;e.setDepthTest=57;e.disposeProgram=58;e.disposeContext=59;e.disposeVertexBuffer=61;e.disposeIndexBuffer=63;e.initTexture=64;e.setTextureAt=65;e.uploadBytesTexture=66;e.disposeTexture=67;e.setCulling=68;e.setScissorRect=69;e.clearScissorRect=70;e.setBlendFactors=71;e.setRenderToTexture=72;e.clearTextureAt=73;e.clearVertexBufferAt=74;e.setStencilActions=75;e.setStencilReferenceValue=76;e.initCubeTexture=77;e.disposeCubeTexture=78;e.uploadBytesCubeTexture=79;e.clearRenderToTexture=80;e.enableErrorChecking=81;return e}();t.exports=r},{}],433:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-stagegl/lib/base/ContextStage3D");var a=e("awayjs-stagegl/lib/base/OpCodes");var n=e("awayjs-stagegl/lib/base/ResourceBaseFlash");var o=function(e){r(t,e);function t(t){e.call(this);this._context=t;this._context.addStream(String.fromCharCode(a.initProgram));this._pId=this._context.execute();this._context._iAddResource(this)}t.prototype.upload=function(e,t){this._context.addStream(String.fromCharCode(a.uploadAGALBytesProgram,this._pId+a.intMask)+e.readBase64String(e.length)+"%"+t.readBase64String(t.length)+"%");if(s.debug)this._context.execute()};t.prototype.dispose=function(){this._context.addStream(String.fromCharCode(a.disposeProgram,this._pId+a.intMask));this._context.execute();this._context._iRemoveResource(this);this._context=null};return t}(n);t.exports=o},{"awayjs-stagegl/lib/base/ContextStage3D":426,"awayjs-stagegl/lib/base/OpCodes":432,"awayjs-stagegl/lib/base/ResourceBaseFlash":435}],434:[function(e,t,i){var r=e("awayjs-stagegl/lib/aglsl/AGALTokenizer");var s=e("awayjs-stagegl/lib/aglsl/AGLSLParser");var a=function(){function e(e){this._gl=e;this._program=this._gl.createProgram()}e.prototype.upload=function(t,i){var r=e._aglslParser.parse(e._tokenizer.decribeAGALByteArray(t));var s=e._aglslParser.parse(e._tokenizer.decribeAGALByteArray(i));this._vertexShader=this._gl.createShader(this._gl.VERTEX_SHADER);this._fragmentShader=this._gl.createShader(this._gl.FRAGMENT_SHADER);this._gl.shaderSource(this._vertexShader,r);this._gl.compileShader(this._vertexShader);if(!this._gl.getShaderParameter(this._vertexShader,this._gl.COMPILE_STATUS)){throw new Error(this._gl.getShaderInfoLog(this._vertexShader));return}this._gl.shaderSource(this._fragmentShader,s);this._gl.compileShader(this._fragmentShader);if(!this._gl.getShaderParameter(this._fragmentShader,this._gl.COMPILE_STATUS)){throw new Error(this._gl.getShaderInfoLog(this._fragmentShader));return}this._gl.attachShader(this._program,this._vertexShader);this._gl.attachShader(this._program,this._fragmentShader);this._gl.linkProgram(this._program);if(!this._gl.getProgramParameter(this._program,this._gl.LINK_STATUS)){throw new Error(this._gl.getProgramInfoLog(this._program))}};e.prototype.dispose=function(){this._gl.deleteProgram(this._program)};e.prototype.focusProgram=function(){this._gl.useProgram(this._program)};Object.defineProperty(e.prototype,"glProgram",{get:function(){return this._program},enumerable:true,configurable:true});e._tokenizer=new r;e._aglslParser=new s;return e}();t.exports=a},{"awayjs-stagegl/lib/aglsl/AGALTokenizer":398,"awayjs-stagegl/lib/aglsl/AGLSLParser":399}],435:[function(e,t,i){var r=function(){function e(){}Object.defineProperty(e.prototype,"id",{get:function(){return this._pId},enumerable:true,configurable:true});e.prototype.dispose=function(){};return e}();t.exports=r},{}],436:[function(e,t,i){var r=function(){function e(){}return e}();t.exports=r},{}],437:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/geom/Rectangle");var a=e("awayjs-core/lib/events/Event");var n=e("awayjs-core/lib/events/EventDispatcher");var o=e("awayjs-core/lib/textures/RenderTexture");var h=e("awayjs-core/lib/utils/CSS");var l=e("awayjs-display/lib/display/ContextMode");var u=e("awayjs-display/lib/events/StageEvent");var p=e("awayjs-stagegl/lib/base/ContextGLTextureFormat");var c=e("awayjs-stagegl/lib/base/ContextGLMipFilter");var d=e("awayjs-stagegl/lib/base/ContextGLTextureFilter");var f=e("awayjs-stagegl/lib/base/ContextGLWrapMode");var _=e("awayjs-stagegl/lib/base/ContextStage3D");var y=e("awayjs-stagegl/lib/base/ContextWebGL");var g=e("awayjs-stagegl/lib/pool/TextureDataPool");var m=e("awayjs-stagegl/lib/pool/ProgramDataPool");var b=function(e){r(t,e);function t(t,i,r,a,n){if(a===void 0){a=false}if(n===void 0){n="baseline"}e.call(this);this._programData=new Array;this._x=0;this._y=0;this._stageIndex=-1;this._antiAlias=0;this._renderTarget=null;this._renderSurfaceSelector=0;this._initialised=false;this._texturePool=new g;this._programDataPool=new m(this);this._container=t;this._stageIndex=i;this._stageManager=r;this._viewPort=new s;this._enableDepthAndStencil=true;h.setElementX(this._container,0);h.setElementY(this._container,0);this.visible=true}t.prototype.getProgramData=function(e,t){return this._programDataPool.getItem(e,t)};t.prototype.setRenderTarget=function(e,t,i){if(t===void 0){t=false}if(i===void 0){i=0}if(this._renderTarget===e&&i==this._renderSurfaceSelector&&this._enableDepthAndStencil==t)return;this._renderTarget=e;this._renderSurfaceSelector=i;this._enableDepthAndStencil=t;if(e instanceof o){this._context.setRenderToTexture(this.getRenderTexture(e),t,this._antiAlias,i)}else{this._context.setRenderToBackBuffer();this.configureBackBuffer(this._width,this._height,this._antiAlias,this._enableDepthAndStencil)}};t.prototype.getRenderTexture=function(e){var t=this._texturePool.getItem(e,false);if(!t.texture)t.texture=this._context.createTexture(e.width,e.height,p.BGRA,true);return t.texture};t.prototype.activateBuffer=function(e,t,i,r){if(!t.contexts[this._stageIndex])t.contexts[this._stageIndex]=this._context;if(!t.buffers[this._stageIndex]){t.buffers[this._stageIndex]=this._context.createVertexBuffer(t.data.length/t.dataPerVertex,t.dataPerVertex);t.invalid[this._stageIndex]=true}if(t.invalid[this._stageIndex]){t.buffers[this._stageIndex].uploadFromArray(t.data,0,t.data.length/t.dataPerVertex);t.invalid[this._stageIndex]=false}this._context.setVertexBufferAt(e,t.buffers[this._stageIndex],i,r)};t.prototype.disposeVertexData=function(e){e.buffers[this._stageIndex].dispose();e.buffers[this._stageIndex]=null};t.prototype.activateRenderTexture=function(e,t){this._setSamplerState(e,false,false,false);this._context.setTextureAt(e,this.getRenderTexture(t))};t.prototype.activateTexture=function(e,t,i,r,s){this._setSamplerState(e,i,r,s);var a=this._texturePool.getItem(t,s);if(!a.texture){a.texture=this._context.createTexture(t.width,t.height,p.BGRA,true);a.invalid=true}if(a.invalid){a.invalid=false;if(s){var n=t._iGetMipmapData();var o=n.length;for(var h=0;h<o;h++)a.texture.uploadFromData(n[h],h)}else{a.texture.uploadFromData(t._iGetTextureData(),0)}}this._context.setTextureAt(e,a.texture)};t.prototype.activateCubeTexture=function(e,t,i,r){this._setSamplerState(e,false,i,r);var s=this._texturePool.getItem(t,r);if(!s.texture){s.texture=this._context.createCubeTexture(t.size,p.BGRA,false);s.invalid=true}if(s.invalid){s.invalid=false;for(var a=0;a<6;++a){if(r){var n=t._iGetMipmapData(a);var o=n.length;for(var h=0;h<o;h++)s.texture.uploadFromData(n[h],a,h)}else{s.texture.uploadFromData(t._iGetTextureData(a),a,0)}}}this._context.setTextureAt(e,s.texture)};t.prototype.getIndexBuffer=function(e){if(!e.contexts[this._stageIndex])e.contexts[this._stageIndex]=this._context;if(!e.buffers[this._stageIndex]){e.buffers[this._stageIndex]=this._context.createIndexBuffer(e.data.length);e.invalid[this._stageIndex]=true}if(e.invalid[this._stageIndex]){e.buffers[this._stageIndex].uploadFromArray(e.data,0,e.data.length);e.invalid[this._stageIndex]=false}return e.buffers[this._stageIndex]};t.prototype.disposeIndexData=function(e){e.buffers[this._stageIndex].dispose();e.buffers[this._stageIndex]=null};t.prototype.requestContext=function(e,t,i){var r=this;if(e===void 0){e=false}if(t===void 0){t="baseline"}if(i===void 0){i="auto"}if(this._usesSoftwareRendering!=null)this._usesSoftwareRendering=e;this._profile=t;try{if(i==l.FLASH)new _(this._container,function(e){return r._callback(e)});else this._context=new y(this._container)}catch(s){try{if(i==l.AUTO)new _(this._container,function(e){return r._callback(e)});else this.dispatchEvent(new a(a.ERROR))}catch(s){this.dispatchEvent(new a(a.ERROR))}}if(this._context)this._callback(this._context)};Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){if(this._width==e)return;h.setElementWidth(this._container,e);this._width=this._viewPort.width=e;this._backBufferDirty=true;this.notifyViewportUpdated()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){if(this._height==e)return;h.setElementHeight(this._container,e);this._height=this._viewPort.height=e;this._backBufferDirty=true;this.notifyViewportUpdated()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){if(this._x==e)return;h.setElementX(this._container,e);this._x=this._viewPort.x=e;this.notifyViewportUpdated()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){if(this._y==e)return;h.setElementY(this._container,e);this._y=this._viewPort.y=e;this.notifyViewportUpdated()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"visible",{get:function(){return h.getElementVisibility(this._container)},set:function(e){h.setElementVisibility(this._container,e)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"container",{get:function(){return this._container},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"context",{get:function(){return this._context},enumerable:true,configurable:true});t.prototype.notifyViewportUpdated=function(){if(this._viewportDirty)return;this._viewportDirty=true;this._viewportUpdated=new u(u.VIEWPORT_UPDATED);this.dispatchEvent(this._viewportUpdated)};t.prototype.notifyEnterFrame=function(){if(!this._enterFrame)this._enterFrame=new a(a.ENTER_FRAME);this.dispatchEvent(this._enterFrame)};t.prototype.notifyExitFrame=function(){if(!this._exitFrame)this._exitFrame=new a(a.EXIT_FRAME);this.dispatchEvent(this._exitFrame)};Object.defineProperty(t.prototype,"profile",{get:function(){return this._profile},enumerable:true,configurable:true});t.prototype.dispose=function(){this._stageManager.iRemoveStage(this);this.freeContext();this._stageManager=null;this._stageIndex=-1};t.prototype.configureBackBuffer=function(e,t,i,r){this.width=e;this.height=t;this._antiAlias=i;this._enableDepthAndStencil=r;if(this._context)this._context.configureBackBuffer(e,t,i,r)};Object.defineProperty(t.prototype,"enableDepthAndStencil",{get:function(){return this._enableDepthAndStencil},set:function(e){this._enableDepthAndStencil=e;this._backBufferDirty=true},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"renderTarget",{get:function(){return this._renderTarget},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"renderSurfaceSelector",{get:function(){return this._renderSurfaceSelector},enumerable:true,configurable:true});t.prototype.clear=function(){if(!this._context)return;if(this._backBufferDirty){this.configureBackBuffer(this._width,this._height,this._antiAlias,this._enableDepthAndStencil);this._backBufferDirty=false}this._context.clear((this._color&4278190080)>>>24,(this._color&16711680)>>>16,(this._color&65280)>>>8,this._color&255);this._bufferClear=true};t.prototype.addEventListener=function(t,i){e.prototype.addEventListener.call(this,t,i)};t.prototype.removeEventListener=function(t,i){e.prototype.removeEventListener.call(this,t,i)};Object.defineProperty(t.prototype,"scissorRect",{get:function(){return this._scissorRect},set:function(e){this._scissorRect=e;this._context.setScissorRectangle(this._scissorRect)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"stageIndex",{get:function(){return this._stageIndex},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"usesSoftwareRendering",{get:function(){return this._usesSoftwareRendering},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"antiAlias",{get:function(){return this._antiAlias},set:function(e){this._antiAlias=e;this._backBufferDirty=true},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"viewPort",{get:function(){this._viewportDirty=false;return this._viewPort},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(e){this._color=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bufferClear",{get:function(){return this._bufferClear},set:function(e){this._bufferClear=e},enumerable:true,configurable:true});t.prototype.registerProgram=function(e){var t=0;while(this._programData[t]!=null)t++;this._programData[t]=e;e.id=t};t.prototype.unRegisterProgram=function(e){this._programData[e.id]=null;e.id=-1};t.prototype.freeContext=function(){if(this._context){this._context.dispose();this.dispatchEvent(new u(u.CONTEXT_DISPOSED))}this._context=null;this._initialised=false};t.prototype.onEnterFrame=function(e){if(!this._context)return;this.clear();this.notifyEnterFrame();if(!this._context)this._context.present();this.notifyExitFrame()};t.prototype.recoverFromDisposal=function(){if(!this._context)return false;return true};t.prototype._callback=function(e){this._context=e;this._container=this._context.container;if(this._width&&this._height)this._context.configureBackBuffer(this._width,this._height,this._antiAlias,this._enableDepthAndStencil);this.dispatchEvent(new u(this._initialised?u.CONTEXT_RECREATED:u.CONTEXT_CREATED));this._initialised=true};t.prototype._setSamplerState=function(e,t,i,r){var s=t?f.REPEAT:f.CLAMP;var a=i?d.LINEAR:d.NEAREST;var n=r?c.MIPLINEAR:c.MIPNONE;this._context.setSamplerStateAt(e,s,a,n)};return t}(n);t.exports=b},{"awayjs-core/lib/events/Event":458,"awayjs-core/lib/events/EventDispatcher":459,"awayjs-core/lib/geom/Rectangle":462,"awayjs-core/lib/textures/RenderTexture":466,"awayjs-core/lib/utils/CSS":471,"awayjs-display/lib/display/ContextMode":475,"awayjs-display/lib/events/StageEvent":476,"awayjs-stagegl/lib/base/ContextGLMipFilter":419,"awayjs-stagegl/lib/base/ContextGLTextureFilter":421,"awayjs-stagegl/lib/base/ContextGLTextureFormat":422,"awayjs-stagegl/lib/base/ContextGLWrapMode":425,"awayjs-stagegl/lib/base/ContextStage3D":426,"awayjs-stagegl/lib/base/ContextWebGL":427,"awayjs-stagegl/lib/pool/ProgramDataPool":447,"awayjs-stagegl/lib/pool/TextureDataPool":449}],438:[function(e,t,i){var r=e("awayjs-core/lib/errors/AbstractMethodError");var s=function(){function e(e){this.textureType="";this._gl=e}e.prototype.dispose=function(){throw"Abstract method must be overridden."};Object.defineProperty(e.prototype,"glTexture",{get:function(){throw new r},enumerable:true,configurable:true});return e}();t.exports=s},{"awayjs-core/lib/errors/AbstractMethodError":454}],439:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/base/BitmapData");var a=e("awayjs-core/lib/utils/ByteArrayBase");var n=e("awayjs-stagegl/lib/base/OpCodes");var o=e("awayjs-stagegl/lib/base/ResourceBaseFlash");var h=function(e){r(t,e);function t(t,i,r,s,a,o){if(o===void 0){o=false}e.call(this);this._context=t;this._width=i;this._height=r;this._context.addStream(String.fromCharCode(n.initTexture,a?n.trueValue:n.falseValue)+i+","+r+","+o+","+s+"$");this._pId=this._context.execute();this._context._iAddResource(this)}Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:true,configurable:true});t.prototype.dispose=function(){this._context.addStream(String.fromCharCode(n.disposeTexture)+this._pId.toString()+",");this._context.execute();this._context._iRemoveResource(this);this._context=null};t.prototype.uploadFromData=function(e,t){if(t===void 0){t=0}if(e instanceof s){e=e.imageData.data}else if(e instanceof HTMLImageElement){var i=document.createElement("canvas");var r=e.width;var o=e.height;i.width=r;i.height=o;var h=i.getContext("2d");h.drawImage(e,0,0);e=h.getImageData(0,0,r,o).data}var l=0;var u=a.internalGetBase64String(e.length,function(){return e[l++]},null);this._context.addStream(String.fromCharCode(n.uploadBytesTexture)+this._pId+","+t+","+(this._width>>t)+","+(this._height>>t)+","+u+"%");this._context.execute()};return t}(o);t.exports=h},{"awayjs-core/lib/base/BitmapData":453,"awayjs-core/lib/utils/ByteArrayBase":470,"awayjs-stagegl/lib/base/OpCodes":432,"awayjs-stagegl/lib/base/ResourceBaseFlash":435}],440:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];
function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/base/BitmapData");var a=e("awayjs-stagegl/lib/base/TextureBaseWebGL");var n=function(e){r(t,e);function t(t,i,r){e.call(this,t);this.textureType="texture2d";this._width=i;this._height=r;this._glTexture=this._gl.createTexture()}t.prototype.dispose=function(){this._gl.deleteTexture(this._glTexture)};Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"frameBuffer",{get:function(){if(!this._frameBuffer){this._frameBuffer=this._gl.createFramebuffer();this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._frameBuffer);this._gl.bindTexture(this._gl.TEXTURE_2D,this._glTexture);this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,this._width,this._height,0,this._gl.RGBA,this._gl.UNSIGNED_BYTE,null);var e=this._gl.createRenderbuffer();this._gl.bindRenderbuffer(this._gl.RENDERBUFFER,e);this._gl.renderbufferStorage(this._gl.RENDERBUFFER,this._gl.DEPTH_COMPONENT16,this._width,this._height);this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._glTexture,0);this._gl.framebufferRenderbuffer(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.RENDERBUFFER,e);this._gl.bindTexture(this._gl.TEXTURE_2D,null);this._gl.bindRenderbuffer(this._gl.RENDERBUFFER,null);this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null)}return this._frameBuffer},enumerable:true,configurable:true});t.prototype.uploadFromData=function(e,t){if(t===void 0){t=0}if(e instanceof s)e=e.imageData;this._gl.bindTexture(this._gl.TEXTURE_2D,this._glTexture);this._gl.texImage2D(this._gl.TEXTURE_2D,t,this._gl.RGBA,this._gl.RGBA,this._gl.UNSIGNED_BYTE,e);this._gl.bindTexture(this._gl.TEXTURE_2D,null)};t.prototype.uploadCompressedTextureFromByteArray=function(e,t,i){if(i===void 0){i=false}var r=this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc")};Object.defineProperty(t.prototype,"glTexture",{get:function(){return this._glTexture},enumerable:true,configurable:true});t.prototype.generateMipmaps=function(){};return t}(a);t.exports=n},{"awayjs-core/lib/base/BitmapData":453,"awayjs-stagegl/lib/base/TextureBaseWebGL":438}],441:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-stagegl/lib/base/OpCodes");var a=e("awayjs-stagegl/lib/base/ResourceBaseFlash");var n=function(e){r(t,e);function t(t,i,r){e.call(this);this._context=t;this._numVertices=i;this._data32PerVertex=r;this._context.addStream(String.fromCharCode(s.initVertexBuffer,r+s.intMask)+i.toString()+",");this._pId=this._context.execute();this._context._iAddResource(this)}t.prototype.uploadFromArray=function(e,t,i){this._context.addStream(String.fromCharCode(s.uploadArrayVertexBuffer,this._pId+s.intMask)+e.join()+"#"+[t,i].join()+",");this._context.execute()};Object.defineProperty(t.prototype,"numVertices",{get:function(){return this._numVertices},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"data32PerVertex",{get:function(){return this._data32PerVertex},enumerable:true,configurable:true});t.prototype.dispose=function(){this._context.addStream(String.fromCharCode(s.disposeVertexBuffer,this._pId+s.intMask));this._context.execute();this._context._iRemoveResource(this);this._context=null};return t}(a);t.exports=n},{"awayjs-stagegl/lib/base/OpCodes":432,"awayjs-stagegl/lib/base/ResourceBaseFlash":435}],442:[function(e,t,i){var r=function(){function e(e,t,i){this._gl=e;this._buffer=this._gl.createBuffer();this._numVertices=t;this._data32PerVertex=i}e.prototype.uploadFromArray=function(e,t,i){this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._buffer);this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array(e),this._gl.STATIC_DRAW)};Object.defineProperty(e.prototype,"numVertices",{get:function(){return this._numVertices},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"data32PerVertex",{get:function(){return this._data32PerVertex},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"glBuffer",{get:function(){return this._buffer},enumerable:true,configurable:true});e.prototype.dispose=function(){this._gl.deleteBuffer(this._buffer)};return e}();t.exports=r},{}],443:[function(e,t,i){var r=this.__extends||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];function r(){this.constructor=e}r.prototype=t.prototype;e.prototype=new r};var s=e("awayjs-core/lib/events/EventDispatcher");var a=e("awayjs-core/lib/errors/ArgumentError");var n=e("awayjs-display/lib/events/StageEvent");var o=e("awayjs-stagegl/lib/base/Stage");var h=function(e){r(t,e);function t(){var i=this;e.call(this);this._stages=new Array(t.STAGE_MAX_QUANTITY);this._onContextCreatedDelegate=function(e){return i.onContextCreated(e)}}t.getInstance=function(){if(this._instance==null)this._instance=new t;return this._instance};t.prototype.getStageAt=function(e,i,r,s){if(i===void 0){i=false}if(r===void 0){r="baseline"}if(s===void 0){s="auto"}if(e<0||e>=t.STAGE_MAX_QUANTITY)throw new a("Index is out of bounds [0.."+t.STAGE_MAX_QUANTITY+"]");if(!this._stages[e]){t._numStages++;var h=document.createElement("canvas");h.id="stage"+e;document.body.appendChild(h);var l=this._stages[e]=new o(h,e,this,i,r);l.addEventListener(n.CONTEXT_CREATED,this._onContextCreatedDelegate);l.requestContext(i,r,s)}return l};t.prototype.iRemoveStage=function(e){t._numStages--;e.removeEventListener(n.CONTEXT_CREATED,this._onContextCreatedDelegate);this._stages[e.stageIndex]=null};t.prototype.getFreeStage=function(e,t,i){if(e===void 0){e=false}if(t===void 0){t="baseline"}if(i===void 0){i="auto"}var r=0;var s=this._stages.length;while(r<s){if(!this._stages[r])return this.getStageAt(r,e,t,i);++r}return null};Object.defineProperty(t.prototype,"hasFreeStage",{get:function(){return t._numStages<t.STAGE_MAX_QUANTITY?true:false},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numSlotsFree",{get:function(){return t.STAGE_MAX_QUANTITY-t._numStages},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numSlotsUsed",{get:function(){return t._numStages},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numSlotsTotal",{get:function(){return this._stages.length},enumerable:true,configurable:true});t.prototype.onContextCreated=function(e){};t.STAGE_MAX_QUANTITY=8;t._numStages=0;return t}(s);t.exports=h},{"awayjs-core/lib/errors/ArgumentError":455,"awayjs-core/lib/events/EventDispatcher":459,"awayjs-display/lib/events/StageEvent":476,"awayjs-stagegl/lib/base/Stage":437}],444:[function(e,t,i){t.exports=e(290)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-stagegl/lib/pool/IndexData.js":290}],445:[function(e,t,i){t.exports=e(291)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-stagegl/lib/pool/IndexDataPool.js":291,"awayjs-stagegl/lib/pool/IndexData":444}],446:[function(e,t,i){var r=function(){function e(e,t,i,r){this.usages=0;this._pool=e;this.stage=t;this.vertexString=i;this.fragmentString=r;this.stage.registerProgram(this)}e.prototype.dispose=function(){this.usages--;if(!this.usages){this._pool.disposeItem(this.vertexString+this.fragmentString);this.stage.unRegisterProgram(this);if(this.program)this.program.dispose()}this.program=null};e.PROGRAMDATA_ID_COUNT=0;return e}();t.exports=r},{}],447:[function(e,t,i){var r=e("awayjs-stagegl/lib/pool/ProgramData");var s=function(){function e(e){this._pool=new Object;this._stage=e}e.prototype.getItem=function(e,t){var i=e+t;return this._pool[i]||(this._pool[i]=new r(this,this._stage,e,t))};e.prototype.disposeItem=function(e){this._pool[e]=null};return e}();t.exports=s},{"awayjs-stagegl/lib/pool/ProgramData":446}],448:[function(e,t,i){var r=function(){function e(e,t,i){this._pool=e;this.textureProxy=t;this.mipmap=i}e.prototype.dispose=function(){this._pool.disposeItem(this.textureProxy);this.texture.dispose();this.texture=null};e.prototype.invalidate=function(){this.invalid=true};return e}();t.exports=r},{}],449:[function(e,t,i){var r=e("awayjs-stagegl/lib/pool/TextureData");var s=function(){function e(){this._pool=new Object}e.prototype.getItem=function(e,t){var i=this._pool[e.id]||(this._pool[e.id]=e._iAddTextureData(new r(this,e,t)));if(!i.mipmap&&t){i.mipmap=true;i.invalidate()}return i};e.prototype.disposeItem=function(e){e._iRemoveTextureData(this._pool[e.id]);this._pool[e.id]=null};return e}();t.exports=s},{"awayjs-stagegl/lib/pool/TextureData":448}],450:[function(e,t,i){t.exports=e(292)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-stagegl/lib/pool/VertexData.js":292,"awayjs-display/lib/base/SubGeometryBase":474,"awayjs-display/lib/events/SubGeometryEvent":477}],451:[function(e,t,i){t.exports=e(293)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-stagegl/lib/pool/VertexDataPool.js":293,"awayjs-display/lib/base/SubGeometryBase":474,"awayjs-stagegl/lib/pool/VertexData":450}],452:[function(e,t,i){var r=function(){var e="undefined",t="object",i="Shockwave Flash",s="ShockwaveFlash.ShockwaveFlash",a="application/x-shockwave-flash",n="SWFObjectExprInst",o="onreadystatechange",h=window,l=document,u=navigator,p=false,c=[A],d=[],f=[],_=[],y,g,m,b,v=false,w=false,x,j,P=true,D=function(){var r=typeof l.getElementById!=e&&typeof l.getElementsByTagName!=e&&typeof l.createElement!=e,n=u.userAgent.toLowerCase(),o=u.platform.toLowerCase(),c=o?/win/.test(o):/win/.test(n),d=o?/mac/.test(o):/mac/.test(n),f=/webkit/.test(n)?parseFloat(n.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,_=!+"1",y=[0,0,0],g=null;if(typeof u.plugins!=e&&typeof u.plugins[i]==t){g=u.plugins[i].description;if(g&&!(typeof u.mimeTypes!=e&&u.mimeTypes[a]&&!u.mimeTypes[a].enabledPlugin)){p=true;_=false;g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1");y[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10);y[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10);y[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else if(typeof h.ActiveXObject!=e){try{var m=new ActiveXObject(s);if(m){g=m.GetVariable("$version");if(g){_=true;g=g.split(" ")[1].split(",");y=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]}}}catch(b){}}return{w3:r,pv:y,wk:f,ie:_,win:c,mac:d}}(),T=function(){if(!D.w3){return}if(typeof l.readyState!=e&&l.readyState=="complete"||typeof l.readyState==e&&(l.getElementsByTagName("body")[0]||l.body)){C()}if(!v){if(typeof l.addEventListener!=e){l.addEventListener("DOMContentLoaded",C,false)}if(D.ie&&D.win){l.attachEvent(o,function(){if(l.readyState=="complete"){l.detachEvent(o,arguments.callee);C()}});if(h==top){(function(){if(v){return}try{l.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}C()})()}}if(D.wk){(function(){if(v){return}if(!/loaded|complete/.test(l.readyState)){setTimeout(arguments.callee,0);return}C()})()}O(C)}}();function C(){if(v){return}try{var e=l.getElementsByTagName("body")[0].appendChild(z("span"));e.parentNode.removeChild(e)}catch(t){return}v=true;var i=c.length;for(var r=0;r<i;r++){c[r]()}}function S(e){if(v){e()}else{c[c.length]=e}}function O(t){if(typeof h.addEventListener!=e){h.addEventListener("load",t,false)}else if(typeof l.addEventListener!=e){l.addEventListener("load",t,false)}else if(typeof h.attachEvent!=e){W(h,"onload",t)}else if(typeof h.onload=="function"){var i=h.onload;h.onload=function(){i();t()}}else{h.onload=t}}function A(){if(p){R()}else{E()}}function R(){var i=l.getElementsByTagName("body")[0];var r=z(t);r.setAttribute("type",a);var s=i.appendChild(r);if(s){var n=0;(function(){if(typeof s.GetVariable!=e){var t=s.GetVariable("$version");if(t){t=t.split(" ")[1].split(",");D.pv=[parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10)]}}else if(n<10){n++;setTimeout(arguments.callee,10);return}i.removeChild(r);s=null;E()})()}else{E()}}function E(){var t=d.length;if(t>0){for(var i=0;i<t;i++){var r=d[i].id;var s=d[i].callbackFn;var a={success:false,id:r};if(D.pv[0]>0){var n=k(r);if(n){if(H(d[i].swfVersion)&&!(D.wk&&D.wk<312)){Y(r,true);if(s){a.success=true;a.ref=M(r);s(a)}}else if(d[i].expressInstall&&I()){var o={};o.data=d[i].expressInstall;o.width=n.getAttribute("width")||"0";o.height=n.getAttribute("height")||"0";if(n.getAttribute("class")){o.styleclass=n.getAttribute("class")}if(n.getAttribute("align")){o.align=n.getAttribute("align")}var h={};var l=n.getElementsByTagName("param");var u=l.length;for(var p=0;p<u;p++){if(l[p].getAttribute("name").toLowerCase()!="movie"){h[l[p].getAttribute("name")]=l[p].getAttribute("value")}}L(o,h,r,s)}else{U(n);if(s){s(a)}}}}else{Y(r,true);if(s){var c=M(r);if(c&&typeof c.SetVariable!=e){a.success=true;a.ref=c}s(a)}}}}}function M(i){var r=null;var s=k(i);if(s&&s.nodeName=="OBJECT"){if(typeof s.SetVariable!=e){r=s}else{var a=s.getElementsByTagName(t)[0];if(a){r=a}}}return r}function I(){return!w&&H("6.0.65")&&(D.win||D.mac)&&!(D.wk&&D.wk<312)}function L(t,i,r,s){w=true;m=s||null;b={success:false,id:r};var a=k(r);if(a){if(a.nodeName=="OBJECT"){y=V(a);g=null}else{y=a;g=r}t.id=n;if(typeof t.width==e||!/%$/.test(t.width)&&parseInt(t.width,10)<310){t.width="310"}if(typeof t.height==e||!/%$/.test(t.height)&&parseInt(t.height,10)<137){t.height="137"}l.title=l.title.slice(0,47)+" - Flash Player Installation";var o=D.ie&&D.win?"ActiveX":"PlugIn",h="MMredirectURL="+encodeURI(window.location).toString().replace(/&/g,"%26")+"&MMplayerType="+o+"&MMdoctitle="+l.title;if(typeof i.flashvars!=e){i.flashvars+="&"+h}else{i.flashvars=h}if(D.ie&&D.win&&a.readyState!=4){var u=z("div");r+="SWFObjectNew";u.setAttribute("id",r);a.parentNode.insertBefore(u,a);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}B(t,i,r)}}function U(e){if(D.ie&&D.win&&e.readyState!=4){var t=z("div");e.parentNode.insertBefore(t,e);t.parentNode.replaceChild(V(e),t);e.style.display="none";(function(){if(e.readyState==4){e.parentNode.removeChild(e)}else{setTimeout(arguments.callee,10)}})()}else{e.parentNode.replaceChild(V(e),e)}}function V(e){var i=z("div");if(D.win&&D.ie){i.innerHTML=e.innerHTML}else{var r=e.getElementsByTagName(t)[0];if(r){var s=r.childNodes;if(s){var a=s.length;for(var n=0;n<a;n++){if(!(s[n].nodeType==1&&s[n].nodeName=="PARAM")&&!(s[n].nodeType==8)){i.appendChild(s[n].cloneNode(true))}}}}}return i}function B(i,r,s){var n,o=k(s);if(D.wk&&D.wk<312){return n}if(o){if(typeof i.id==e){i.id=s}if(D.ie&&D.win){var h="";for(var l in i){if(i[l]!=Object.prototype[l]){if(l.toLowerCase()=="data"){r.movie=i[l]}else if(l.toLowerCase()=="styleclass"){h+=' class="'+i[l]+'"'}else if(l.toLowerCase()!="classid"){h+=" "+l+'="'+i[l]+'"'}}}var u="";for(var p in r){if(r[p]!=Object.prototype[p]){u+='<param name="'+p+'" value="'+r[p]+'" />'}}o.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+h+">"+u+"</object>";f[f.length]=i.id;n=k(i.id)}else{var c=z(t);c.setAttribute("type",a);for(var d in i){if(i[d]!=Object.prototype[d]){if(d.toLowerCase()=="styleclass"){c.setAttribute("class",i[d])}else if(d.toLowerCase()!="classid"){c.setAttribute(d,i[d])}}}for(var _ in r){if(r[_]!=Object.prototype[_]&&_.toLowerCase()!="movie"){N(c,_,r[_])}}o.parentNode.replaceChild(c,o);n=c}}return n}function N(e,t,i){var r=z("param");r.setAttribute("name",t);r.setAttribute("value",i);e.appendChild(r)}function F(e){var t=k(e);if(t&&t.nodeName=="OBJECT"){if(D.ie&&D.win){t.style.display="none";(function(){if(t.readyState==4){G(e)}else{setTimeout(arguments.callee,10)}})()}else{t.parentNode.removeChild(t)}}}function G(e){var t=k(e);if(t){for(var i in t){if(typeof t[i]=="function"){t[i]=null}}t.parentNode.removeChild(t)}}function k(e){var t=null;try{t=l.getElementById(e)}catch(i){}return t}function z(e){return l.createElement(e)}function W(e,t,i){e.attachEvent(t,i);_[_.length]=[e,t,i]}function H(e){var t=D.pv,i=e.split(".");i[0]=parseInt(i[0],10);i[1]=parseInt(i[1],10)||0;i[2]=parseInt(i[2],10)||0;return t[0]>i[0]||t[0]==i[0]&&t[1]>i[1]||t[0]==i[0]&&t[1]==i[1]&&t[2]>=i[2]?true:false}function X(i,r,s,a){if(D.ie&&D.mac){return}var n=l.getElementsByTagName("head")[0];if(!n){return}var o=s&&typeof s=="string"?s:"screen";if(a){x=null;j=null}if(!x||j!=o){var h=z("style");h.setAttribute("type","text/css");h.setAttribute("media",o);x=n.appendChild(h);if(D.ie&&D.win&&typeof l.styleSheets!=e&&l.styleSheets.length>0){x=l.styleSheets[l.styleSheets.length-1]}j=o}if(D.ie&&D.win){if(x&&typeof x.addRule==t){x.addRule(i,r)}}else{if(x&&typeof l.createTextNode!=e){x.appendChild(l.createTextNode(i+" {"+r+"}"))}}}function Y(e,t){if(!P){return}var i=t?"visible":"hidden";if(v&&k(e)){k(e).style.visibility=i}else{X("#"+e,"visibility:"+i)}}function q(t){var i=/[\\\"<>\.;]/;var r=i.exec(t)!=null;return r&&typeof encodeURIComponent!=e?encodeURIComponent(t):t}var Z=function(){if(D.ie&&D.win){window.attachEvent("onunload",function(){var e=_.length;for(var t=0;t<e;t++){_[t][0].detachEvent(_[t][1],_[t][2])}var i=f.length;for(var s=0;s<i;s++){F(f[s])}for(var a in D){D[a]=null}D=null;for(var n in r){r[n]=null}r=null})}}();return{registerObject:function(e,t,i,r){if(D.w3&&e&&t){var s={};s.id=e;s.swfVersion=t;s.expressInstall=i;s.callbackFn=r;d[d.length]=s;Y(e,false)}else if(r){r({success:false,id:e})}},getObjectById:function(e){if(D.w3){return M(e)}},embedSWF:function(i,r,s,a,n,o,h,l,u,p){var c={success:false,id:r};if(D.w3&&!(D.wk&&D.wk<312)&&i&&r&&s&&a&&n){Y(r,false);S(function(){s+="";a+="";var d={};if(u&&typeof u===t){for(var f in u){d[f]=u[f]}}d.data=i;d.width=s;d.height=a;var _={};if(l&&typeof l===t){for(var y in l){_[y]=l[y]}}if(h&&typeof h===t){for(var g in h){if(typeof _.flashvars!=e){_.flashvars+="&"+g+"="+h[g]}else{_.flashvars=g+"="+h[g]}}}if(H(n)){var m=B(d,_,r);if(d.id==r){Y(r,true)}c.success=true;c.ref=m}else if(o&&I()){d.data=o;L(d,_,r,p);return}else{Y(r,true)}if(p){p(c)}})}else if(p){p(c)}},switchOffAutoHideShow:function(){P=false},ua:D,getFlashPlayerVersion:function(){return{major:D.pv[0],minor:D.pv[1],release:D.pv[2]}},hasFlashPlayerVersion:H,createSWF:function(e,t,i){if(D.w3){return B(e,t,i)}else{return undefined}},showExpressInstall:function(e,t,i,r){if(D.w3&&I()){L(e,t,i,r)}},removeSWF:function(e){if(D.w3){F(e)}},createCSS:function(e,t,i,r){if(D.w3){X(e,t,i,r)}},addDomLoadEvent:S,addLoadEvent:O,getQueryParamValue:function(e){var t=l.location.search||l.location.hash;if(t){if(/\?/.test(t)){t=t.split("?")[1]}if(e==null){return q(t)}var i=t.split("&");for(var r=0;r<i.length;r++){if(i[r].substring(0,i[r].indexOf("="))==e){return q(i[r].substring(i[r].indexOf("=")+1))}}}return""},expressInstallCallback:function(){if(w){var e=k(n);if(e&&y){e.parentNode.replaceChild(y,e);if(g){Y(g,true);if(D.ie&&D.win){y.style.display="block"}}if(m){m(b)}}w=false}}}}();t.exports=r},{}],453:[function(e,t,i){t.exports=e(2)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/base/BitmapData.js":2,"awayjs-core/lib/geom/Rectangle":462,"awayjs-core/lib/utils/ColorUtils":472}],454:[function(e,t,i){t.exports=e(3)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/AbstractMethodError.js":3,"awayjs-core/lib/errors/Error":456}],455:[function(e,t,i){t.exports=e(4)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/ArgumentError.js":4,"awayjs-core/lib/errors/Error":456}],456:[function(e,t,i){t.exports=e(5)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/Error.js":5}],457:[function(e,t,i){t.exports=e(6)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/AssetEvent.js":6,"awayjs-core/lib/events/Event":458}],458:[function(e,t,i){t.exports=e(7)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/Event.js":7}],459:[function(e,t,i){t.exports=e(8)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/EventDispatcher.js":8}],460:[function(e,t,i){t.exports=e(12)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Matrix.js":12,"awayjs-core/lib/errors/ArgumentError":455,"awayjs-core/lib/geom/Point":461}],461:[function(e,t,i){t.exports=e(13)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Point.js":13}],462:[function(e,t,i){t.exports=e(14)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Rectangle.js":14,"awayjs-core/lib/geom/Point":461}],463:[function(e,t,i){t.exports=e(15)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/AssetType.js":15}],464:[function(e,t,i){t.exports=e(16)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/NamedAssetBase.js":16,"awayjs-core/lib/errors/AbstractMethodError":454,"awayjs-core/lib/events/AssetEvent":457,"awayjs-core/lib/events/EventDispatcher":459}],465:[function(e,t,i){t.exports=e(24)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/MipmapGenerator.js":24,"awayjs-core/lib/base/BitmapData":453,"awayjs-core/lib/geom/Matrix":460,"awayjs-core/lib/geom/Rectangle":462}],466:[function(e,t,i){t.exports=e(123)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/textures/RenderTexture.js":123,"awayjs-core/lib/errors/Error":456,"awayjs-core/lib/textures/Texture2DBase":467,"awayjs-core/lib/utils/TextureUtils":473}],467:[function(e,t,i){t.exports=e(25)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/Texture2DBase.js":25,"awayjs-core/lib/errors/AbstractMethodError":454,"awayjs-core/lib/textures/MipmapGenerator":465,"awayjs-core/lib/textures/TextureProxyBase":468}],468:[function(e,t,i){t.exports=e(26)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/TextureProxyBase.js":26,"awayjs-core/lib/library/AssetType":463,"awayjs-core/lib/library/NamedAssetBase":464}],469:[function(e,t,i){t.exports=e(27)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/ByteArray.js":27,"awayjs-core/lib/utils/ByteArrayBase":470}],470:[function(e,t,i){t.exports=e(28)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/ByteArrayBase.js":28,"awayjs-core/lib/errors/AbstractMethodError":454}],471:[function(e,t,i){var r=function(){function e(){}e.setElementSize=function(e,t,i){e.style.width=t+"px";e.style.height=i+"px";e["width"]=t;e["height"]=i};e.setElementWidth=function(e,t){e.style.width=t+"px";e["width"]=t};e.setElementHeight=function(e,t){e.style.height=t+"px";e["height"]=t};e.setElementX=function(e,t){e.style.position="absolute";e.style.left=t+"px"};e.setElementY=function(e,t){e.style.position="absolute";e.style.top=t+"px"};e.getElementVisibility=function(e){return e.style.visibility=="visible"};e.setElementVisibility=function(e,t){if(t){e.style.visibility="visible"}else{e.style.visibility="hidden"}};e.setElementAlpha=function(e,t){if(e instanceof HTMLCanvasElement){var i=e.getContext("2d");i.globalAlpha=t}};e.setElementPosition=function(e,t,i,r){if(r===void 0){r=false}if(r){e.style.position="absolute"}else{e.style.position="relative"}e.style.left=t+"px";e.style.top=i+"px"};return e}();t.exports=r},{}],472:[function(e,t,i){t.exports=e(29)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/ColorUtils.js":29}],473:[function(e,t,i){t.exports=e(31)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/TextureUtils.js":31}],474:[function(e,t,i){t.exports=e(40)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/SubGeometryBase.js":40,"awayjs-core/lib/errors/AbstractMethodError":478,"awayjs-core/lib/library/NamedAssetBase":483,"awayjs-display/lib/events/SubGeometryEvent":477}],475:[function(e,t,i){var r=function(){function e(){}e.AUTO="auto";e.WEBGL="webgl";e.FLASH="flash";e.NATIVE="native";return e}();t.exports=r},{}],476:[function(e,t,i){t.exports=e(367)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-renderergl/node_modules/awayjs-display/lib/events/StageEvent.js":367,"awayjs-core/lib/events/Event":481}],477:[function(e,t,i){t.exports=e(65)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/SubGeometryEvent.js":65,"awayjs-core/lib/events/Event":481}],478:[function(e,t,i){t.exports=e(3)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/AbstractMethodError.js":3,"awayjs-core/lib/errors/Error":479}],479:[function(e,t,i){t.exports=e(5)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/Error.js":5}],480:[function(e,t,i){t.exports=e(6)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/AssetEvent.js":6,"awayjs-core/lib/events/Event":481}],481:[function(e,t,i){t.exports=e(7)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/Event.js":7}],482:[function(e,t,i){t.exports=e(8)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/EventDispatcher.js":8}],483:[function(e,t,i){t.exports=e(16)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/NamedAssetBase.js":16,"awayjs-core/lib/errors/AbstractMethodError":478,"awayjs-core/lib/events/AssetEvent":480,"awayjs-core/lib/events/EventDispatcher":482}]},{},[1]);

//# sourceMappingURL=TorusPrimitive.js.map