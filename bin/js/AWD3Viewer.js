(function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var l=typeof require=="function"&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return r(n?n:e)},u,u.exports,e,t,n,i)}return n[a].exports}var o=typeof require=="function"&&require;for(var a=0;a<i.length;a++)r(i[a]);return r})({1:[function(e,t,n){var i=e("awayjs-core/lib/library/AssetLibrary");var r=e("awayjs-core/lib/library/AssetType");var o=e("awayjs-core/lib/events/AssetEvent");var a=e("awayjs-core/lib/net/URLRequest");var s=e("awayjs-core/lib/events/LoaderEvent");var l=e("awayjs-core/lib/geom/Vector3D");var c=e("awayjs-core/lib/projections/OrthographicOffCenterProjection");var u=e("awayjs-core/lib/utils/RequestAnimationFrame");var d=e("awayjs-display/lib/containers/View");var h=e("awayjs-display/lib/controllers/HoverController");var w=e("awayjs-display/lib/containers/Loader");var f=e("awayjs-renderergl/lib/DefaultRenderer");var p=e("awayjs-methodmaterials/lib/pool/MethodRendererPool");var m=e("awayjs-parsers/lib/AWDParser");var y=function(){function e(){this._time=0;this.init()}e.prototype.init=function(){this.initEngine();this.initObjects();this.initListeners()};e.prototype.initEngine=function(){this._view=new d(new f(p));this._view.backgroundColor=16777215;this._view.camera.projection=new c(0,550,-400,0);this._view.camera.projection.far=5e5;this._view.camera.projection.near=.1;this._cameraController=new h(this._view.camera,null,0,0,300,10,90);this._cameraController.lookAtPosition=new l(0,50,0);this._cameraController.tiltAngle=0;this._cameraController.panAngle=0;this._cameraController.minTiltAngle=5;this._cameraController.maxTiltAngle=60;this._cameraController.autoUpdate=false};e.prototype.initObjects=function(){var e=this;i.enableParser(m);var t=new w;t.addEventListener(o.ASSET_COMPLETE,function(t){return e.onAssetComplete(t)});t.addEventListener(s.RESOURCE_COMPLETE,function(t){return e.onRessourceComplete(t)});t.load(new a("assets/AWD3/ScareCrow_old.awd"))};e.prototype.initListeners=function(){var e=this;window.onresize=function(t){return e.onResize(t)};document.onmousedown=function(t){return e.onMouseDown(t)};document.onmouseup=function(t){return e.onMouseUp(t)};document.onmousemove=function(t){return e.onMouseMove(t)};document.onmousewheel=function(t){return e.onMouseWheel(t)};this.onResize();this._timer=new u(this.onEnterFrame,this);this._timer.start()};e.prototype.onAssetComplete=function(e){if(e.asset.assetType==r.TIMELINE){this._rootTimeLine=e.asset}};e.prototype.onRessourceComplete=function(e){if(this._rootTimeLine){this._view.scene.addChild(this._rootTimeLine)}};e.prototype.onEnterFrame=function(e){this._time+=e;this._cameraController.update();if(this._rootTimeLine!=undefined){this._rootTimeLine.update(e)}this._view.render()};e.prototype.onMouseDown=function(e){this._lastPanAngle=this._cameraController.panAngle;this._lastTiltAngle=this._cameraController.tiltAngle;this._lastMouseX=e.clientX;this._lastMouseY=e.clientY;this._move=true};e.prototype.onMouseUp=function(e){this._move=false};e.prototype.onMouseMove=function(e){if(this._move){this._cameraController.panAngle=.3*(e.clientX-this._lastMouseX)+this._lastPanAngle;this._cameraController.tiltAngle=.3*(e.clientY-this._lastMouseY)+this._lastTiltAngle}};e.prototype.onMouseWheel=function(e){this._cameraController.distance-=e.wheelDelta*5;if(this._cameraController.distance<100){this._cameraController.distance=100}else if(this._cameraController.distance>2e3){this._cameraController.distance=2e3}};e.prototype.onResize=function(e){if(e===void 0){e=null}this._view.y=0;this._view.x=0;this._view.width=window.innerWidth;this._view.height=window.innerHeight};return e}();window.onload=function(){new y}},{"awayjs-core/lib/events/AssetEvent":undefined,"awayjs-core/lib/events/LoaderEvent":undefined,"awayjs-core/lib/geom/Vector3D":undefined,"awayjs-core/lib/library/AssetLibrary":undefined,"awayjs-core/lib/library/AssetType":undefined,"awayjs-core/lib/net/URLRequest":undefined,"awayjs-core/lib/projections/OrthographicOffCenterProjection":undefined,"awayjs-core/lib/utils/RequestAnimationFrame":undefined,"awayjs-display/lib/containers/Loader":undefined,"awayjs-display/lib/containers/View":undefined,"awayjs-display/lib/controllers/HoverController":undefined,"awayjs-methodmaterials/lib/pool/MethodRendererPool":undefined,"awayjs-parsers/lib/AWDParser":undefined,"awayjs-renderergl/lib/DefaultRenderer":undefined}]},{},[1]);

//# sourceMappingURL=AWD3Viewer.js.map