{"version":3,"sources":["webpack:///./src/AWDSuzanne.ts"],"names":[],"mappings":"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","file":"AWDSuzanne.js","sourcesContent":["import LoaderEvent\t\t\t\t\tfrom \"awayjs-core/lib/events/LoaderEvent\";\r\nimport Vector3D\t\t\t\t\t\tfrom \"awayjs-core/lib/geom/Vector3D\";\r\nimport AssetLibrary\t\t\t\t\tfrom \"awayjs-core/lib/library/AssetLibrary\";\r\nimport Loader\t\t\t\t\t\tfrom \"awayjs-core/lib/library/Loader\";\r\nimport IAsset\t\t\t\t\t\tfrom \"awayjs-core/lib/library/IAsset\";\r\nimport URLRequest\t\t\t\t\tfrom \"awayjs-core/lib/net/URLRequest\";\r\nimport RequestAnimationFrame\t\tfrom \"awayjs-core/lib/utils/RequestAnimationFrame\";\r\n\r\nimport View\t\t\t\t\t\t\tfrom \"awayjs-display/lib/View\";\r\nimport DirectionalLight\t\t\t\tfrom \"awayjs-display/lib/display/DirectionalLight\";\r\nimport Sprite\t\t\t\t\t\tfrom \"awayjs-display/lib/display/Sprite\";\r\nimport JSPickingCollider\t\t\tfrom \"awayjs-display/lib/pick/JSPickingCollider\";\r\nimport MouseEvent\t\t\t\t\tfrom \"awayjs-display/lib/events/MouseEvent\";\r\nimport StaticLightPicker\t\t\tfrom \"awayjs-display/lib/materials/lightpickers/StaticLightPicker\";\r\n\r\nimport DefaultRenderer\t\t\t\tfrom \"awayjs-renderergl/lib/DefaultRenderer\";\r\n\r\nimport MethodMaterial\t\t\t\tfrom \"awayjs-methodmaterials/lib/MethodMaterial\";\r\nimport AWDParser\t\t\t\t\tfrom \"awayjs-parsers/lib/AWDParser\";\r\n\r\nclass AWDSuzanne\r\n{\r\n\r\n\tprivate _renderer:DefaultRenderer;\r\n\tprivate _view:View;\r\n\tprivate _timer:RequestAnimationFrame;\r\n\tprivate _suzane:Sprite;\r\n\tprivate _light:DirectionalLight;\r\n\tprivate _lightPicker:StaticLightPicker;\r\n\tprivate _lookAtPosition:Vector3D = new Vector3D();\r\n\tprivate _cameraIncrement:number = 0;\r\n\tprivate _mouseOverMaterial:MethodMaterial = new MethodMaterial(0xFF0000);\r\n\tprivate _mouseOutMaterial:MethodMaterial;\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tthis.initView();\r\n\t\tthis.loadAssets();\r\n\t\tthis.initLights();\r\n\r\n\t\twindow.onresize  = (event:UIEvent) => this.onResize(event);\r\n\r\n\t\tthis.onResize();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tprivate initView():void\r\n\t{\r\n\t\tthis._renderer = new DefaultRenderer();\r\n\t\tthis._view = new View(this._renderer);\r\n\t\tthis._view.camera.projection.far = 6000;\r\n\t\tthis._view.forceMouseMove = true;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tprivate loadAssets():void\r\n\t{\r\n\t\tthis._timer = new RequestAnimationFrame(this.render, this);\r\n\t\tthis._timer.start();\r\n\r\n\t\tAssetLibrary.enableParser(AWDParser);\r\n\r\n\t\tvar session:Loader = AssetLibrary.getLoader();\r\n\t\tsession.addEventListener(LoaderEvent.LOAD_COMPLETE, (event:LoaderEvent) => this.onResourceComplete(event));\r\n\t\tsession.load(new URLRequest('assets/suzanne.awd'));\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tprivate initLights():void\r\n\t{\r\n\t\tthis._light = new DirectionalLight();\r\n\t\tthis._light.color = 0x683019;\r\n\t\tthis._light.direction = new Vector3D(1, 0, 0);\r\n\t\tthis._light.ambient = 0.1;\r\n\t\tthis._light.ambientColor = 0x85b2cd;\r\n\t\tthis._light.diffuse = 2.8;\r\n\t\tthis._light.specular = 1.8;\r\n\t\tthis._view.scene.addChild(this._light);\r\n\t\tthis._lightPicker = new StaticLightPicker([this._light]);\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t */\r\n\tprivate onResize(event:UIEvent = null):void\r\n\t{\r\n\t\tthis._view.y = 0;\r\n\t\tthis._view.x = 0;\r\n\t\tthis._view.width = window.innerWidth;\r\n\t\tthis._view.height = window.innerHeight;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param dt\r\n\t */\r\n\tprivate render(dt:number) //animate based on dt for firefox\r\n\t{\r\n\t\tif (this._view.camera) {\r\n\t\t\tthis._view.camera.lookAt(this._lookAtPosition);\r\n\t\t\tthis._cameraIncrement += 0.01;\r\n\t\t\tthis._view.camera.x = Math.cos(this._cameraIncrement)*1400;\r\n\t\t\tthis._view.camera.z = Math.sin(this._cameraIncrement)*1400;\r\n\r\n\t\t\tthis._light.x = Math.cos(this._cameraIncrement)*1400;\r\n\t\t\tthis._light.y = Math.sin(this._cameraIncrement)*1400;\r\n\r\n\t\t}\r\n\r\n\t\tthis._view.render();\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param e\r\n\t */\r\n\tpublic onResourceComplete(e:LoaderEvent)\r\n\t{\r\n\t\tvar loader:Loader = e.target;\r\n\t\tvar numAssets:number = loader.baseDependency.assets.length;\r\n\r\n\t\tfor (var i:number = 0; i < numAssets; ++i) {\r\n\t\t\tvar asset:IAsset = loader.baseDependency.assets[ i ];\r\n\r\n\t\t\tswitch(asset.assetType) {\r\n\t\t\t\tcase Sprite.assetType:\r\n\r\n\t\t\t\t\tvar sprite:Sprite = <Sprite> asset;\r\n\r\n\t\t\t\t\tthis._suzane = sprite;\r\n\t\t\t\t\t(<MethodMaterial> this._suzane.material).lightPicker = this._lightPicker;\r\n\t\t\t\t\tthis._suzane.y = -100;\r\n\t\t\t\t\tthis._mouseOutMaterial = <MethodMaterial> this._suzane.material;\r\n\r\n\t\t\t\t\tfor (var c:number = 0; c < 80; c++) {\r\n\r\n\t\t\t\t\t\tvar clone:Sprite = <Sprite> sprite.clone();\r\n\t\t\t\t\t\tvar scale:number = this.getRandom(50, 200);\r\n\t\t\t\t\t\tclone.x = this.getRandom(-2000, 2000);\r\n\t\t\t\t\t\tclone.y = this.getRandom(-2000, 2000);\r\n\t\t\t\t\t\tclone.z = this.getRandom(-2000, 2000);\r\n\t\t\t\t\t\tclone.transform.scaleTo(scale, scale, scale);\r\n\t\t\t\t\t\tclone.rotationY = this.getRandom (0, 360);\r\n\t\t\t\t\t\tclone.addEventListener(MouseEvent.MOUSE_OVER, (event:MouseEvent) => this.onMouseOver(event));\r\n\t\t\t\t\t\tclone.addEventListener(MouseEvent.MOUSE_OUT, (event:MouseEvent) => this.onMouseOut(event));\r\n\t\t\t\t\t\tthis._view.scene.addChild(clone);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tsprite.transform.scaleTo(500, 500, 500);\r\n\t\t\t\t\tsprite.pickingCollider = new JSPickingCollider();\r\n\r\n\t\t\t\t\tsprite.addEventListener(MouseEvent.MOUSE_OVER, (event:MouseEvent) => this.onMouseOver(event));\r\n\t\t\t\t\tsprite.addEventListener(MouseEvent.MOUSE_OUT, (event:MouseEvent) => this.onMouseOut(event));\r\n\t\t\t\t\tthis._view.scene.addChild(sprite);\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate onMouseOver(event:MouseEvent)\r\n\t{\r\n\t\t(<Sprite> event.entity).material = this._mouseOverMaterial;\r\n\r\n\t\tconsole.log(\"mouseover\");\r\n\t}\r\n\r\n\tprivate onMouseOut(event:MouseEvent)\r\n\t{\r\n\t\t(<Sprite> event.entity).material = this._mouseOutMaterial;\r\n\r\n\t\tconsole.log(\"mouseout\");\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param min\r\n\t * @param max\r\n\t * @returns {number}\r\n\t */\r\n\tprivate getRandom(min:number, max:number):number\r\n\t{\r\n\t\treturn Math.random()*(max - min) + min;\r\n\t}\r\n}\r\n\r\nwindow.onload = function()\r\n{\r\n\tnew AWDSuzanne();\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/AWDSuzanne.ts\n **/"],"sourceRoot":""}