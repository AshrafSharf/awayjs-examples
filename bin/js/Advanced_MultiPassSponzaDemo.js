(function e(t,r,s){function i(o,n){if(!r[o]){if(!t[o]){var l=typeof require=="function"&&require;if(!n&&l)return l(o,!0);if(a)return a(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var p=r[o]={exports:{}};t[o][0].call(p.exports,function(e){var r=t[o][1][e];return i(r?r:e)},p,p.exports,e,t,r,s)}return r[o].exports}var a=typeof require=="function"&&require;for(var o=0;o<s.length;o++)i(s[o]);return i})({1:[function(e,t,r){var s=e("awayjs-core/lib/events/Event");var i=e("awayjs-core/lib/events/AssetEvent");var a=e("awayjs-core/lib/events/ProgressEvent");var o=e("awayjs-core/lib/events/LoaderEvent");var n=e("awayjs-core/lib/geom/UVTransform");var l=e("awayjs-core/lib/geom/Vector3D");var h=e("awayjs-core/lib/library/AssetLibrary");var p=e("awayjs-core/lib/library/AssetLoaderContext");var u=e("awayjs-core/lib/library/AssetType");var c=e("awayjs-core/lib/net/URLLoader");var d=e("awayjs-core/lib/net/URLLoaderDataFormat");var f=e("awayjs-core/lib/net/URLRequest");var y=e("awayjs-core/lib/parsers/ParserUtils");var m=e("awayjs-core/lib/textures/ImageTexture");var _=e("awayjs-core/lib/textures/SpecularBitmapTexture");var b=e("awayjs-core/lib/ui/Keyboard");var g=e("awayjs-core/lib/utils/RequestAnimationFrame");var w=e("awayjs-display/lib/containers/Loader");var v=e("awayjs-display/lib/containers/View");var j=e("awayjs-display/lib/controllers/FirstPersonController");var x=e("awayjs-display/lib/base/Geometry");var P=e("awayjs-display/lib/base/BlendMode");var D=e("awayjs-display/lib/entities/Mesh");var T=e("awayjs-display/lib/entities/Skybox");var A=e("awayjs-display/lib/entities/DirectionalLight");var C=e("awayjs-display/lib/entities/PointLight");var E=e("awayjs-display/lib/materials/lightpickers/StaticLightPicker");var S=e("awayjs-display/lib/prefabs/PrimitivePlanePrefab");var M=e("awayjs-display/lib/utils/Cast");var O=e("awayjs-renderergl/lib/materials/SkyboxMaterial");var R=e("awayjs-renderergl/lib/tools/commands/Merge");var I=e("awayjs-renderergl/lib/DefaultRenderer");var U=e("awayjs-methodmaterials/lib/TriangleMethodMaterial");var L=e("awayjs-methodmaterials/lib/TriangleMaterialMode");var B=e("awayjs-methodmaterials/lib/methods/ShadowSoftMethod");var N=e("awayjs-methodmaterials/lib/methods/EffectFogMethod");var F=e("awayjs-parsers/lib/AWDParser");var V=function(){function e(){this._assetsRoot="assets/";this._materialNameStrings=Array("arch","Material__298","bricks","ceiling","chain","column_a","column_b","column_c","fabric_g","fabric_c","fabric_f","details","fabric_d","fabric_a","fabric_e","flagpole","floor","16___Default","Material__25","roof","leaf","vase","vase_hanging","Material__57","vase_round");this._diffuseTextureStrings=Array("arch_diff.jpg","background.jpg","bricks_a_diff.jpg","ceiling_a_diff.jpg","chain_texture.png","column_a_diff.jpg","column_b_diff.jpg","column_c_diff.jpg","curtain_blue_diff.jpg","curtain_diff.jpg","curtain_green_diff.jpg","details_diff.jpg","fabric_blue_diff.jpg","fabric_diff.jpg","fabric_green_diff.jpg","flagpole_diff.jpg","floor_a_diff.jpg","gi_flag.jpg","lion.jpg","roof_diff.jpg","thorn_diff.png","vase_dif.jpg","vase_hanging.jpg","vase_plant.png","vase_round.jpg");this._normalTextureStrings=Array("arch_ddn.jpg","background_ddn.jpg","bricks_a_ddn.jpg",null,"chain_texture_ddn.jpg","column_a_ddn.jpg","column_b_ddn.jpg","column_c_ddn.jpg",null,null,null,null,null,null,null,null,null,null,"lion2_ddn.jpg",null,"thorn_ddn.jpg","vase_ddn.jpg",null,null,"vase_round_ddn.jpg");this._specularTextureStrings=Array("arch_spec.jpg",null,"bricks_a_spec.jpg","ceiling_a_spec.jpg",null,"column_a_spec.jpg","column_b_spec.jpg","column_c_spec.jpg","curtain_spec.jpg","curtain_spec.jpg","curtain_spec.jpg","details_spec.jpg","fabric_spec.jpg","fabric_spec.jpg","fabric_spec.jpg","flagpole_spec.jpg","floor_a_spec.jpg",null,null,null,"thorn_spec.jpg",null,null,"vase_plant_spec.jpg","vase_round_spec.jpg");this._numTexStrings=Array(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);this._meshReference=new Array(25);this._flameData=Array(new k(new l(-625,165,219),16755268),new k(new l(485,165,219),16755268),new k(new l(-625,165,-148),16755268),new k(new l(485,165,-148),16755268));this._textureDictionary=new Object;this._multiMaterialDictionary=new Object;this._singleMaterialDictionary=new Object;this.vaseMeshes=new Array;this.poleMeshes=new Array;this.colMeshes=new Array;this._singlePassMaterial=false;this._multiPassMaterial=true;this._cascadeLevels=3;this._shadowOptions="PCF";this._depthMapSize=2048;this._lightDirection=Math.PI/2;this._lightElevation=Math.PI/18;this._lights=new Array;this._numTextures=0;this._currentTexture=0;this._n=0;this._meshes=new Array;this._move=false;this._drag=.5;this._walkIncrement=10;this._strafeIncrement=10;this._walkSpeed=0;this._strafeSpeed=0;this._walkAcceleration=0;this._strafeAcceleration=0;this._time=0;this.init()}e.prototype.init=function(){this.initEngine();this.initLights();this.initListeners();this._n=0;this._loadingTextureStrings=this._diffuseTextureStrings;this.countNumTextures();this._n=0;this._loadingTextureStrings=this._diffuseTextureStrings;this.load(this._loadingTextureStrings[this._n])};e.prototype.initEngine=function(){this._view=new v(new I);this._view.camera.y=150;this._view.camera.z=0;this._cameraController=new j(this._view.camera,90,0,-80,80)};e.prototype.initLights=function(){this._lights=new Array;this._directionalLight=new A(-1,-15,1);this._directionalLight.color=15654365;this._directionalLight.ambient=.35;this._directionalLight.ambientColor=8421520;this._view.scene.addChild(this._directionalLight);this._lights.push(this._directionalLight);this.updateDirection();var e;var t=this._flameData.length;for(var r=0;r<t;r++){e=this._flameData[r];var s=e.light=new C;s.radius=200;s.fallOff=600;s.color=e.color;s.y=10;this._lights.push(s)}this._lightPicker=new E(this._lights);this._baseShadowMethod=new B(this._directionalLight,10,5);this._fogMethod=new N(0,4e3,9474279)};e.prototype.initObjects=function(){this._view.scene.addChild(new T(new O(this._skyMap)));this._flameGeometry=new S(40,80,1,1,false,true);var e;var t=this._flameData.length;for(var r=0;r<t;r++){e=this._flameData[r];var s=e.mesh=this._flameGeometry.getNewObject();s.material=this._flameMaterial;s.transform.position=e.position;s.subMeshes[0].uvTransform=new n;s.subMeshes[0].uvTransform.scaleU=1/16;this._view.scene.addChild(s);s.addChild(e.light)}};e.prototype.initListeners=function(){var e=this;window.onresize=function(t){return e.onResize(t)};document.onmousedown=function(t){return e.onMouseDown(t)};document.onmouseup=function(t){return e.onMouseUp(t)};document.onmousemove=function(t){return e.onMouseMove(t)};document.onkeydown=function(t){return e.onKeyDown(t)};document.onkeyup=function(t){return e.onKeyUp(t)};this.onResize();this.parseAWDDelegate=function(t){return e.parseAWD(t)};this.parseBitmapDelegate=function(t){return e.parseBitmap(t)};this.loadProgressDelegate=function(t){return e.loadProgress(t)};this.onBitmapCompleteDelegate=function(t){return e.onBitmapComplete(t)};this.onAssetCompleteDelegate=function(t){return e.onAssetComplete(t)};this.onResourceCompleteDelegate=function(t){return e.onResourceComplete(t)};this._timer=new g(this.onEnterFrame,this);this._timer.start()};e.prototype.updateDirection=function(){this._directionalLight.direction=new l(Math.sin(this._lightElevation)*Math.cos(this._lightDirection),-Math.cos(this._lightElevation),Math.sin(this._lightElevation)*Math.sin(this._lightDirection))};e.prototype.countNumTextures=function(){this._numTextures++;while(this._n++<this._loadingTextureStrings.length-1)if(this._loadingTextureStrings[this._n])break;if(this._n<this._loadingTextureStrings.length){this.countNumTextures()}else if(this._loadingTextureStrings==this._diffuseTextureStrings){this._n=0;this._loadingTextureStrings=this._normalTextureStrings;this.countNumTextures()}else if(this._loadingTextureStrings==this._normalTextureStrings){this._n=0;this._loadingTextureStrings=this._specularTextureStrings;this.countNumTextures()}};e.prototype.load=function(e){var t=new c;switch(e.substring(e.length-3)){case"AWD":case"awd":t.dataFormat=d.ARRAY_BUFFER;this._loadingText="Loading Model";t.addEventListener(s.COMPLETE,this.parseAWDDelegate);break;case"png":case"jpg":t.dataFormat=d.BLOB;this._currentTexture++;this._loadingText="Loading Textures";t.addEventListener(s.COMPLETE,this.parseBitmapDelegate);e="sponza/"+e;break}t.addEventListener(a.PROGRESS,this.loadProgressDelegate);var r=new f(this._assetsRoot+e);t.load(r)};e.prototype.loadProgress=function(e){var t=Math.floor(e["bytesLoaded"]/e["bytesTotal"]*100);if(t!=100){console.log(this._loadingText+"\n"+(this._loadingText=="Loading Model"?Math.floor(e["bytesLoaded"]/1024<<0)+"kb | "+Math.floor(e["bytesTotal"]/1024<<0)+"kb":this._currentTexture+" | "+this._numTextures))}};e.prototype.parseBitmap=function(e){var t=e.target;var r=y.blobToImage(t.data);r.onload=this.onBitmapCompleteDelegate;t.removeEventListener(s.COMPLETE,this.parseBitmapDelegate);t.removeEventListener(a.PROGRESS,this.loadProgressDelegate);t=null};e.prototype.onBitmapComplete=function(e){var t=e.target;t.onload=null;if(!this._textureDictionary[this._loadingTextureStrings[this._n]])this._textureDictionary[this._loadingTextureStrings[this._n]]=this._loadingTextureStrings==this._specularTextureStrings?new _(M.bitmapData(t)):new m(t);while(this._n++<this._loadingTextureStrings.length-1)if(this._loadingTextureStrings[this._n])break;if(this._n<this._loadingTextureStrings.length){this.load(this._loadingTextureStrings[this._n])}else if(this._loadingTextureStrings==this._diffuseTextureStrings){this._n=0;this._loadingTextureStrings=this._normalTextureStrings;this.load(this._loadingTextureStrings[this._n])}else if(this._loadingTextureStrings==this._normalTextureStrings){this._n=0;this._loadingTextureStrings=this._specularTextureStrings;this.load(this._loadingTextureStrings[this._n])}else{this.load("sponza/sponza.awd")}};e.prototype.parseAWD=function(e){console.log("Parsing Data");var t=e.target;var r=new w(false);r.addEventListener(i.ASSET_COMPLETE,this.onAssetCompleteDelegate);r.addEventListener(o.RESOURCE_COMPLETE,this.onResourceCompleteDelegate);r.loadData(t.data,new p(false),null,new F);t.removeEventListener(a.PROGRESS,this.loadProgressDelegate);t.removeEventListener(s.COMPLETE,this.parseAWDDelegate);t=null};e.prototype.onAssetComplete=function(e){if(e.asset.assetType==u.MESH){this._meshes.push(e.asset)}};e.prototype.onResourceComplete=function(e){var t=this;var r=new R(false,false,true);var s=e.target;s.removeEventListener(i.ASSET_COMPLETE,this.onAssetCompleteDelegate);s.removeEventListener(o.RESOURCE_COMPLETE,this.onResourceCompleteDelegate);var a;var n;var l=this._meshes.length;for(var u=0;u<l;u++){a=this._meshes[u];if(a.name=="sponza_04"||a.name=="sponza_379")continue;var c=Number(a.name.substring(7));n=a.material.name;if(n=="column_c"&&(c<22||c>33))continue;var d=c-125;if(n=="column_b"){if(d>=0&&d<132&&d%11<10){this.colMeshes.push(a);continue}else{this.colMeshes.push(a);var y=new R;var m=new D(new x);y.applyToMeshes(m,this.colMeshes);a=m;this.colMeshes=new Array}}var _=c-334;if(n=="vase_hanging"&&_%9<5){if(_>=0&&_<370&&_%9<4){this.vaseMeshes.push(a);continue}else{this.vaseMeshes.push(a);var b=new R;var g=new D(new x);b.applyToMeshes(g,this.vaseMeshes);a=g;this.vaseMeshes=new Array}}var w=c-290;if(n=="flagpole"){if(w>=0&&w<320&&w%3<2){this.poleMeshes.push(a);continue}else if(w>=0){this.poleMeshes.push(a);var v=new R;var j=new D(new x);v.applyToMeshes(j,this.poleMeshes);a=j;this.poleMeshes=new Array}}if(n=="flagpole"&&(c==260||c==261||c==263||c==265||c==268||c==269||c==271||c==273))continue;var P=this._materialNameStrings.indexOf(n);if(P==-1||P>=this._materialNameStrings.length)continue;this._numTexStrings[P]++;var T=this._diffuseTextureStrings[P];var A;var C;var E=this._multiMaterialDictionary[n];if(!E){E=new U(this._textureDictionary[T]);E.materialMode=L.MULTI_PASS;E.name=n;E.lightPicker=this._lightPicker;E.shadowMethod=this._baseShadowMethod;E.addEffectMethod(this._fogMethod);E.repeat=true;E.specular=2;if(T.substring(T.length-3)=="png")E.alphaThreshold=.5;A=this._normalTextureStrings[P];if(A)E.normalMap=this._textureDictionary[A];C=this._specularTextureStrings[P];if(C)E.specularMap=this._textureDictionary[C];this._multiMaterialDictionary[n]=E}a.material=E;this._view.scene.addChild(a);this._meshReference[P]=a}var S=0;while(S<this._numTexStrings.length){console.log(this._diffuseTextureStrings[S],this._numTexStrings[S]);S++}h.addEventListener(o.RESOURCE_COMPLETE,function(e){return t.onExtraResourceComplete(e)});var M=new p;M.dependencyBaseUrl="assets/skybox/";h.load(new f("assets/skybox/hourglass_texture.cube"),M);h.load(new f("assets/fire.png"))};e.prototype.onExtraResourceComplete=function(e){switch(e.url){case"assets/skybox/hourglass_texture.cube":this._skyMap=e.assets[0];break;case"assets/fire.png":this._flameMaterial=new U(e.assets[0]);this._flameMaterial.blendMode=P.ADD;this._flameMaterial.animateUVs=true;break}if(this._skyMap&&this._flameMaterial)this.initObjects()};e.prototype.onEnterFrame=function(e){if(this._walkSpeed||this._walkAcceleration){this._walkSpeed=(this._walkSpeed+this._walkAcceleration)*this._drag;if(Math.abs(this._walkSpeed)<.01)this._walkSpeed=0;this._cameraController.incrementWalk(this._walkSpeed)}if(this._strafeSpeed||this._strafeAcceleration){this._strafeSpeed=(this._strafeSpeed+this._strafeAcceleration)*this._drag;if(Math.abs(this._strafeSpeed)<.01)this._strafeSpeed=0;this._cameraController.incrementStrafe(this._strafeSpeed)}var t;var r=this._flameData.length;for(var s=0;s<r;s++){t=this._flameData[s];var i=t.light;if(!i)continue;i.fallOff=380+Math.random()*20;i.radius=200+Math.random()*30;i.diffuse=.9+Math.random()*.1;var a=t.mesh;if(!a)continue;var o=a.subMeshes[0];o.uvTransform.offsetU+=1/16;o.uvTransform.offsetU%=1;a.rotationY=Math.atan2(a.x-this._view.camera.x,a.z-this._view.camera.z)*180/Math.PI}this._view.render()};e.prototype.onKeyDown=function(e){switch(e.keyCode){case b.UP:case b.W:this._walkAcceleration=this._walkIncrement;break;case b.DOWN:case b.S:this._walkAcceleration=-this._walkIncrement;break;case b.LEFT:case b.A:this._strafeAcceleration=-this._strafeIncrement;break;case b.RIGHT:case b.D:this._strafeAcceleration=this._strafeIncrement;break;case b.F:break;case b.C:this._cameraController.fly=!this._cameraController.fly}};e.prototype.onKeyUp=function(e){switch(e.keyCode){case b.UP:case b.W:case b.DOWN:case b.S:this._walkAcceleration=0;break;case b.LEFT:case b.A:case b.RIGHT:case b.D:this._strafeAcceleration=0;break}};e.prototype.onMouseDown=function(e){this._lastPanAngle=this._cameraController.panAngle;this._lastTiltAngle=this._cameraController.tiltAngle;this._lastMouseX=e.clientX;this._lastMouseY=e.clientY;this._move=true};e.prototype.onMouseUp=function(e){this._move=false};e.prototype.onMouseMove=function(e){if(this._move){this._cameraController.panAngle=.3*(e.clientX-this._lastMouseX)+this._lastPanAngle;this._cameraController.tiltAngle=.3*(e.clientY-this._lastMouseY)+this._lastTiltAngle}};e.prototype.onResize=function(e){if(e===void 0){e=null}this._view.y=0;this._view.x=0;this._view.width=window.innerWidth;this._view.height=window.innerHeight};return e}();var k=function(){function e(e,t){this.position=e;this.color=t}return e}();window.onload=function(){new V}},{"awayjs-core/lib/events/AssetEvent":7,"awayjs-core/lib/events/Event":8,"awayjs-core/lib/events/LoaderEvent":12,"awayjs-core/lib/events/ProgressEvent":14,"awayjs-core/lib/geom/UVTransform":19,"awayjs-core/lib/geom/Vector3D":20,"awayjs-core/lib/library/AssetLibrary":21,"awayjs-core/lib/library/AssetLoaderContext":25,"awayjs-core/lib/library/AssetType":27,"awayjs-core/lib/net/URLLoader":35,"awayjs-core/lib/net/URLLoaderDataFormat":36,"awayjs-core/lib/net/URLRequest":37,"awayjs-core/lib/parsers/ParserUtils":42,"awayjs-core/lib/textures/ImageTexture":48,"awayjs-core/lib/textures/SpecularBitmapTexture":50,"awayjs-core/lib/ui/Keyboard":53,"awayjs-core/lib/utils/RequestAnimationFrame":57,"awayjs-display/lib/base/BlendMode":62,"awayjs-display/lib/base/Geometry":64,"awayjs-display/lib/containers/Loader":75,"awayjs-display/lib/containers/View":77,"awayjs-display/lib/controllers/FirstPersonController":79,"awayjs-display/lib/entities/DirectionalLight":81,"awayjs-display/lib/entities/Mesh":83,"awayjs-display/lib/entities/PointLight":84,"awayjs-display/lib/entities/Skybox":85,"awayjs-display/lib/materials/lightpickers/StaticLightPicker":97,"awayjs-display/lib/prefabs/PrimitivePlanePrefab":115,"awayjs-display/lib/utils/Cast":120,"awayjs-methodmaterials/lib/TriangleMaterialMode":192,"awayjs-methodmaterials/lib/TriangleMethodMaterial":193,"awayjs-methodmaterials/lib/methods/EffectFogMethod":198,"awayjs-methodmaterials/lib/methods/ShadowSoftMethod":205,"awayjs-parsers/lib/AWDParser":347,"awayjs-renderergl/lib/DefaultRenderer":766,"awayjs-renderergl/lib/materials/SkyboxMaterial":780,"awayjs-renderergl/lib/tools/commands/Merge":798}],2:[function(e,t,r){var s=e("awayjs-core/lib/geom/Rectangle");var i=e("awayjs-core/lib/utils/ColorUtils");var a=function(){function e(e,t,r,a){if(r===void 0){r=true}if(a===void 0){a=null}this._alpha=0;this._locked=false;this._transparent=r;this._imageCanvas=document.createElement("canvas");this._imageCanvas.width=e;this._imageCanvas.height=t;this._context=this._imageCanvas.getContext("2d");this._rect=new s(0,0,e,t);if(a!=null){if(this._transparent){this._alpha=i.float32ColorToARGB(a)[0]/255}else{this._alpha=1}this.fillRect(this._rect,a)}}e.prototype.dispose=function(){this._context=null;this._imageCanvas=null;this._imageData=null;this._rect=null;this._transparent=null;this._locked=null};e.prototype.lock=function(){this._locked=true;this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height)};e.prototype.unlock=function(){this._locked=false;if(this._imageData){this._context.putImageData(this._imageData,0,0);this._imageData=null}};e.prototype.getPixel=function(e,t){var r;var s;var i;var a;if(!this._locked){var o=this._context.getImageData(e,t,1,1);r=o.data[0];s=o.data[1];i=o.data[2];a=o.data[3]}else{var n=(e+t*this._imageCanvas.width)*4;if(!this._imageData)this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height);r=this._imageData.data[n+0];s=this._imageData.data[n+1];i=this._imageData.data[n+2];a=this._imageData.data[n+3]}if(!this._locked){this._imageData=null}return a<<24|r<<16|s<<8|i};e.prototype.setPixel=function(e,t,r){var s=i.float32ColorToARGB(r);if(!this._locked)this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height);if(this._imageData){var a=(e+t*this._imageCanvas.width)*4;this._imageData.data[a+0]=s[1];this._imageData.data[a+1]=s[2];this._imageData.data[a+2]=s[3];this._imageData.data[a+3]=255}if(!this._locked){this._context.putImageData(this._imageData,0,0);this._imageData=null}};e.prototype.setPixels=function(e,t){if(!this._locked)this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height);if(this._imageData){t.position=0;var r,s,i;for(r=0;r<e.width;++r){for(s=0;s<e.height;++s){i=(r+e.x+(s+e.y)*this._imageCanvas.width)*4;this._imageData.data[i+0]=t.readUnsignedInt();this._imageData.data[i+1]=t.readUnsignedInt();this._imageData.data[i+2]=t.readUnsignedInt();this._imageData.data[i+3]=t.readUnsignedInt()}}}if(!this._locked){this._context.putImageData(this._imageData,0,0);this._imageData=null}};e.prototype.setPixel32=function(e,t,r){var s=i.float32ColorToARGB(r);if(!this._locked)this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height);if(this._imageData){var a=(e+t*this._imageCanvas.width)*4;this._imageData.data[a+0]=s[1];this._imageData.data[a+1]=s[2];this._imageData.data[a+2]=s[3];this._imageData.data[a+3]=s[0]}if(!this._locked){this._context.putImageData(this._imageData,0,0);this._imageData=null}};e.prototype.setVector=function(e,t){if(!this._locked)this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height);if(this._imageData){var r,s,a,o;for(r=0;r<e.width;++r){for(s=0;s<e.height;++s){o=i.float32ColorToARGB(t[r+s*e.width]);a=(r+e.x+(s+e.y)*this._imageCanvas.width)*4;this._imageData.data[a+0]=o[1];this._imageData.data[a+1]=o[2];this._imageData.data[a+2]=o[3];this._imageData.data[a+3]=o[0]}}}if(!this._locked){this._context.putImageData(this._imageData,0,0);this._imageData=null}};e.prototype.drawImage=function(e,t,r){if(this._locked){if(this._imageData){this._context.putImageData(this._imageData,0,0)}this._drawImage(e,t,r);if(this._imageData){this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height)}}else{this._drawImage(e,t,r)}};e.prototype._drawImage=function(t,r,s){if(t instanceof e)this._context.drawImage(t.canvas,r.x,r.y,r.width,r.height,s.x,s.y,s.width,s.height);else if(t instanceof HTMLImageElement)this._context.drawImage(t,r.x,r.y,r.width,r.height,s.x,s.y,s.width,s.height)};e.prototype.copyPixels=function(e,t,r){if(this._locked){if(this._imageData){this._context.putImageData(this._imageData,0,0)}this._copyPixels(e,t,r);if(this._imageData){this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height)}}else{this._copyPixels(e,t,r)}};e.prototype._copyPixels=function(t,r,s){if(t instanceof e){this._context.drawImage(t.canvas,r.x,r.y,r.width,r.height,s.x,s.y,s.width,s.height)}else if(t instanceof HTMLImageElement){this._context.drawImage(t,r.x,r.y,r.width,r.height,s.x,s.y,s.width,s.height)}};e.prototype.fillRect=function(e,t){if(this._locked){if(this._imageData)this._context.putImageData(this._imageData,0,0);this._context.fillStyle=this.hexToRGBACSS(t);this._context.fillRect(e.x,e.y,e.width,e.height);if(this._imageData)this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height)}else{this._context.fillStyle=this.hexToRGBACSS(t);this._context.fillRect(e.x,e.y,e.width,e.height)}};e.prototype.draw=function(e,t){if(this._locked){if(this._imageData)this._context.putImageData(this._imageData,0,0);this._draw(e,t);if(this._imageData)this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height)}else{this._draw(e,t)}};e.prototype._draw=function(t,r){if(t instanceof e){this._context.save();if(r!=null)this._context.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty);this._context.drawImage(t.canvas,0,0);this._context.restore()}else if(t instanceof HTMLImageElement){this._context.save();if(r!=null)this._context.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty);this._context.drawImage(t,0,0);this._context.restore()}};e.prototype.copyChannel=function(e,t,r,s,i){var a=e.imageData;if(!this._locked)this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height);if(this._imageData){var o=e.imageData.data;var n=this._imageData.data;var l=Math.round(Math.log(s)/Math.log(2));var h=Math.round(Math.log(i)/Math.log(2));var p,u,c,d;for(p=0;p<t.width;++p){for(u=0;u<t.height;++u){c=(p+t.x+(u+t.y)*e.width)*4;d=(p+r.x+(u+r.y)*this.width)*4;n[d+h]=o[c+l]}}}if(!this._locked){this._context.putImageData(this._imageData,0,0);this._imageData=null}};e.prototype.colorTransform=function(e,t){if(!this._locked)this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height);if(this._imageData){var r=this._imageData.data;var s,i,a;for(s=0;s<e.width;++s){for(i=0;i<e.height;++i){a=(s+e.x+(i+e.y)*this.width)*4;r[a]=r[a]*t.redMultiplier+t.redOffset;r[a+1]=r[a+1]*t.greenMultiplier+t.greenOffset;r[a+2]=r[a+2]*t.blueMultiplier+t.blueOffset;r[a+3]=r[a+3]*t.alphaMultiplier+t.alphaOffset}}}if(!this._locked){this._context.putImageData(this._imageData,0,0);this._imageData=null}};Object.defineProperty(e.prototype,"imageData",{get:function(){return this._context.getImageData(0,0,this._rect.width,this._rect.height)},set:function(e){this._context.putImageData(e,0,0)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"width",{get:function(){return this._imageCanvas.width},set:function(e){this._rect.width=e;this._imageCanvas.width=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"height",{get:function(){return this._imageCanvas.height},set:function(e){this._rect.height=e;this._imageCanvas.height=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"rect",{get:function(){return this._rect},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"canvas",{get:function(){return this._imageCanvas},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:true,configurable:true});e.prototype.hexToRGBACSS=function(e){var t=i.float32ColorToARGB(e);if(this._transparent==false){t[0]=1;return"rgba("+t[1]+","+t[2]+","+t[3]+","+t[0]+")"}return"rgba("+t[1]+","+t[2]+","+t[3]+","+t[0]/255+")"};return e}();t.exports=a},{"awayjs-core/lib/geom/Rectangle":18,"awayjs-core/lib/utils/ColorUtils":56}],3:[function(e,t,r){var s=function(){function e(){}e.ALPHA=8;e.BLUE=4;e.GREEN=2;e.RED=1;return e}();t.exports=s},{}],4:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/errors/Error");var a=function(e){s(t,e);function t(t,r){if(t===void 0){t=null}if(r===void 0){r=0}e.call(this,t||"An abstract method was called! Either an instance of an abstract class was created, or an abstract method was not overridden by the subclass.",r)}return t}(i);t.exports=a},{"awayjs-core/lib/errors/Error":6}],5:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/errors/Error");var a=function(e){s(t,e);function t(t,r){if(t===void 0){t=null}if(r===void 0){r=0}e.call(this,t||"ArgumentError",r)}return t}(i);t.exports=a},{"awayjs-core/lib/errors/Error":6}],6:[function(e,t,r){var s=function(){function e(e,t,r){if(e===void 0){e=""}if(t===void 0){t=0}if(r===void 0){r=""}this._errorID=0;this._messsage="";this._name="";this._messsage=e;this._name=name;this._errorID=t}Object.defineProperty(e.prototype,"message",{get:function(){return this._messsage},set:function(e){this._messsage=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"errorID",{get:function(){return this._errorID},enumerable:true,configurable:true});return e}();t.exports=s},{}],7:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/events/Event");var a=function(e){s(t,e);function t(t,r,s){if(r===void 0){r=null}if(s===void 0){s=null}e.call(this,t);this._asset=r;this._prevName=s||(this._asset?this._asset.name:null)}Object.defineProperty(t.prototype,"asset",{get:function(){return this._asset},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"assetPrevName",{get:function(){return this._prevName},enumerable:true,configurable:true});t.prototype.clone=function(){return new t(this.type,this.asset,this.assetPrevName)};t.ASSET_COMPLETE="assetComplete";t.ASSET_RENAME="assetRename";t.ASSET_CONFLICT_RESOLVED="assetConflictResolved";t.TEXTURE_SIZE_ERROR="textureSizeError";return t}(i);t.exports=a},{"awayjs-core/lib/events/Event":8}],8:[function(e,t,r){var s=function(){function e(e){this.type=undefined;this.target=undefined;this.type=e}e.prototype.clone=function(){return new e(this.type)};e.COMPLETE="complete";e.OPEN="open";e.ENTER_FRAME="enterFrame";e.EXIT_FRAME="exitFrame";e.RESIZE="resize";e.ERROR="error";e.CHANGE="change";return e}();t.exports=s},{}],9:[function(e,t,r){var s=function(){function e(e){if(e===void 0){e=null}this.listeners=new Array;this.target=e||this}e.prototype.addEventListener=function(e,t){if(this.listeners[e]===undefined)this.listeners[e]=new Array;if(this.getEventListenerIndex(e,t)===-1)this.listeners[e].push(t)};e.prototype.removeEventListener=function(e,t){var r=this.getEventListenerIndex(e,t);if(r!==-1)this.listeners[e].splice(r,1)};e.prototype.dispatchEvent=function(e){var t=this.listeners[e.type];if(t!==undefined){var r=t.length;e.target=this.target;for(var s=0;s<r;s++)t[s](e)}};e.prototype.getEventListenerIndex=function(e,t){if(this.listeners[e]!==undefined){var r=this.listeners[e];var s=r.length;for(var i=0;i<s;i++)if(t==r[i])return i}return-1};e.prototype.hasEventListener=function(e,t){if(t!=null){return this.getEventListenerIndex(e,t)!==-1}else{if(this.listeners[e]!==undefined)return this.listeners[e].length>0;return false}return false};return e}();t.exports=s},{}],10:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/events/Event");var a=function(e){s(t,e);function t(t,r){if(r===void 0){r=null}e.call(this,t);this.status=r}t.HTTP_STATUS="httpStatus";return t}(i);t.exports=a},{"awayjs-core/lib/events/Event":8}],11:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/events/Event");var a=function(e){s(t,e);function t(t){e.call(this,t)}t.IO_ERROR="ioError";return t}(i);t.exports=a},{"awayjs-core/lib/events/Event":8}],12:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/events/Event");var a=function(e){s(t,e);function t(t,r,s,i){if(r===void 0){r=null}if(s===void 0){s=null}if(i===void 0){i=null}e.call(this,t);this._url=r;this._content=s;this._assets=i}Object.defineProperty(t.prototype,"content",{get:function(){return this._content},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"url",{get:function(){return this._url},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"assets",{get:function(){return this._assets},enumerable:true,configurable:true});t.prototype.clone=function(){return new t(this.type,this._url,this._content,this._assets)};t.RESOURCE_COMPLETE="resourceComplete";return t}(i);t.exports=a},{"awayjs-core/lib/events/Event":8}],13:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/events/Event");var a=function(e){s(t,e);function t(t,r){if(r===void 0){r=""}e.call(this,t);this._message=r}Object.defineProperty(t.prototype,"message",{get:function(){return this._message},enumerable:true,configurable:true});t.prototype.clone=function(){return new t(this.type,this.message)};t.PARSE_COMPLETE="parseComplete";t.PARSE_ERROR="parseError";t.READY_FOR_DEPENDENCIES="readyForDependencies";return t}(i);t.exports=a},{"awayjs-core/lib/events/Event":8}],14:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/events/Event");var a=function(e){s(t,e);function t(t){e.call(this,t)}t.PROGRESS="progress";return t}(i);t.exports=a},{"awayjs-core/lib/events/Event":8}],15:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/events/Event");var a=function(e){s(t,e);function t(t){e.call(this,t)}t.TIMER="timer";t.TIMER_COMPLETE="timerComplete";return t}(i);t.exports=a},{"awayjs-core/lib/events/Event":8}],16:[function(e,t,r){var s=e("awayjs-core/lib/geom/Point");var i=e("awayjs-core/lib/errors/ArgumentError");var a=function(){function e(e,t,r,s,i,a){if(e===void 0){e=1
}if(t===void 0){t=0}if(r===void 0){r=0}if(s===void 0){s=1}if(i===void 0){i=0}if(a===void 0){a=0}this.a=e;this.b=t;this.c=r;this.d=s;this.tx=i;this.ty=a}e.prototype.clone=function(){return new e(this.a,this.b,this.c,this.d,this.tx,this.ty)};e.prototype.concat=function(e){var t=this.a*e.a+this.b*e.c;this.b=this.a*e.b+this.b*e.d;this.a=t;var r=this.c*e.a+this.d*e.c;this.d=this.c*e.b+this.d*e.d;this.c=r;var s=this.tx*e.a+this.ty*e.c+e.tx;this.ty=this.tx*e.b+this.ty*e.d+e.ty;this.tx=s};e.prototype.copyColumnFrom=function(e,t){if(e>2){throw"Column "+e+" out of bounds (2)"}else if(e==0){this.a=t.x;this.c=t.y}else if(e==1){this.b=t.x;this.d=t.y}else{this.tx=t.x;this.ty=t.y}};e.prototype.copyColumnTo=function(e,t){if(e>2){throw new i("ArgumentError, Column "+e+" out of bounds [0, ..., 2]")}else if(e==0){t.x=this.a;t.y=this.c;t.z=0}else if(e==1){t.x=this.b;t.y=this.d;t.z=0}else{t.x=this.tx;t.y=this.ty;t.z=1}};e.prototype.copyFrom=function(e){this.a=e.a;this.b=e.b;this.c=e.c;this.d=e.d;this.tx=e.tx;this.ty=e.ty};e.prototype.copyRowFrom=function(e,t){if(e>2){throw new i("ArgumentError, Row "+e+" out of bounds [0, ..., 2]")}else if(e==0){this.a=t.x;this.c=t.y}else if(e==1){this.b=t.x;this.d=t.y}else{this.tx=t.x;this.ty=t.y}};e.prototype.copyRowTo=function(e,t){if(e>2){throw new i("ArgumentError, Row "+e+" out of bounds [0, ..., 2]")}else if(e==0){t.x=this.a;t.y=this.b;t.z=this.tx}else if(e==1){t.x=this.c;t.y=this.d;t.z=this.ty}else{t.setTo(0,0,1)}};e.prototype.createBox=function(e,t,r,s,i){if(r===void 0){r=0}if(s===void 0){s=0}if(i===void 0){i=0}this.a=e;this.d=t;this.b=r;this.tx=s;this.ty=i};e.prototype.createGradientBox=function(e,t,r,s,i){if(r===void 0){r=0}if(s===void 0){s=0}if(i===void 0){i=0}this.a=e/1638.4;this.d=t/1638.4;if(r!=0){var a=Math.cos(r);var o=Math.sin(r);this.b=o*this.d;this.c=-o*this.a;this.a*=a;this.d*=a}else{this.b=this.c=0}this.tx=s+e/2;this.ty=i+t/2};e.prototype.deltaTransformPoint=function(e){return new s(e.x*this.a+e.y*this.c,e.x*this.b+e.y*this.d)};e.prototype.identity=function(){this.a=1;this.b=0;this.c=0;this.d=1;this.tx=0;this.ty=0};e.prototype.invert=function(){var e=this.a*this.d-this.b*this.c;if(e==0){this.a=this.b=this.c=this.d=0;this.tx=-this.tx;this.ty=-this.ty}else{e=1/e;var t=this.d*e;this.d=this.a*e;this.a=t;this.b*=-e;this.c*=-e;var r=-this.a*this.tx-this.c*this.ty;this.ty=-this.b*this.tx-this.d*this.ty;this.tx=r}};e.prototype.multiply=function(t){var r=new e;r.a=this.a*t.a+this.b*t.c;r.b=this.a*t.b+this.b*t.d;r.c=this.c*t.a+this.d*t.c;r.d=this.c*t.b+this.d*t.d;r.tx=this.tx*t.a+this.ty*t.c+t.tx;r.ty=this.tx*t.b+this.ty*t.d+t.ty;return r};e.prototype.rotate=function(e){var t=Math.cos(e);var r=Math.sin(e);var s=this.a*t-this.b*r;this.b=this.a*r+this.b*t;this.a=s;var i=this.c*t-this.d*r;this.d=this.c*r+this.d*t;this.c=i;var a=this.tx*t-this.ty*r;this.ty=this.tx*r+this.ty*t;this.tx=a};e.prototype.scale=function(e,t){this.a*=e;this.b*=t;this.c*=e;this.d*=t;this.tx*=e;this.ty*=t};e.prototype.setTo=function(e,t,r,s,i,a){this.a=e;this.b=t;this.c=r;this.d=s;this.tx=i;this.ty=a};e.prototype.toString=function(){return"[Matrix] (a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"};e.prototype.transformPoint=function(e){return new s(e.x*this.a+e.y*this.c+this.tx,e.x*this.b+e.y*this.d+this.ty)};e.prototype.translate=function(e,t){this.tx+=e;this.ty+=t};return e}();t.exports=a},{"awayjs-core/lib/errors/ArgumentError":5,"awayjs-core/lib/geom/Point":17}],17:[function(e,t,r){var s=function(){function e(e,t){if(e===void 0){e=0}if(t===void 0){t=0}this.x=e;this.y=t}Object.defineProperty(e.prototype,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:true,configurable:true});e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)};e.prototype.clone=function(){return new e(this.x,this.y)};e.prototype.copyFrom=function(e){};e.prototype.equals=function(e){return this.x==e.x&&this.y==e.y};e.prototype.normalize=function(e){if(e===void 0){e=1}if(this.length!=0){var t=e/this.length;this.x*=t;this.y*=t;return}throw"Cannot divide by zero length."};e.prototype.offset=function(e,t){this.x+=e;this.y+=t};e.prototype.setTo=function(e,t){};e.prototype.subtract=function(t){return new e(this.x-t.x,this.y-t.y)};e.prototype.toString=function(){return"[Point] (x="+this.x+", y="+this.y+")"};e.distance=function(e,t){var r=t.x-e.x;var s=t.y-e.y;return Math.sqrt(r*r+s*s)};e.interpolate=function(t,r,s){return new e(r.x+(t.x-r.x)*s,r.y+(t.y-r.y)*s)};e.polar=function(t,r){return new e(t*Math.cos(r),t*Math.sin(r))};return e}();t.exports=s},{}],18:[function(e,t,r){var s=e("awayjs-core/lib/geom/Point");var i=function(){function e(e,t,r,s){if(e===void 0){e=0}if(t===void 0){t=0}if(r===void 0){r=0}if(s===void 0){s=0}this.x=e;this.y=t;this.width=r;this.height=s}Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"bottomRight",{get:function(){if(this._bottomRight==null)this._bottomRight=new s;this._bottomRight.x=this.x+this.width;this._bottomRight.y=this.y+this.height;return this._bottomRight},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"size",{get:function(){if(this._size==null)this._size=new s;this._size.x=this.width;this._size.y=this.height;return this._size},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"topLeft",{get:function(){if(this._topLeft==null)this._topLeft=new s;this._topLeft.x=this.x;this._topLeft.y=this.y;return this._topLeft},enumerable:true,configurable:true});e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)};e.prototype.contains=function(e,t){return this.x<=e&&this.x+this.width>=e&&this.y<=t&&this.y+this.height>=t};e.prototype.containsPoint=function(e){return this.x<=e.x&&this.x+this.width>=e.x&&this.y<=e.y&&this.y+this.height>=e.y};e.prototype.containsRect=function(e){return this.x<=e.x&&this.x+this.width>=e.x+e.width&&this.y<=e.y&&this.y+this.height>=e.y+e.height};e.prototype.copyFrom=function(e){};e.prototype.equals=function(e){return this.x==e.x&&this.y==e.y&&this.width==e.width&&this.height==e.height};e.prototype.inflate=function(e,t){this.x-=e/2;this.y-=t/2;this.width+=e/2;this.height+=t/2};e.prototype.inflatePoint=function(e){this.x-=e.x/2;this.y-=e.y/2;this.width+=e.x/2;this.height+=e.y/2};e.prototype.intersection=function(t){if(this.intersects(t)){var r=new e;if(this.x>t.x){r.x=this.x;r.width=t.x-this.x+t.width;if(r.width>this.width)r.width=this.width}else{r.x=t.x;r.width=this.x-t.x+this.width;if(r.width>t.width)r.width=t.width}if(this.y>t.y){r.y=this.y;r.height=t.y-this.y+t.height;if(r.height>this.height)r.height=this.height}else{r.y=t.y;r.height=this.y-t.y+this.height;if(r.height>t.height)r.height=t.height}return r}return new e};e.prototype.intersects=function(e){return this.x+this.width>e.x&&this.x<e.x+e.width&&this.y+this.height>e.y&&this.y<e.y+e.height};e.prototype.isEmpty=function(){return this.x==0&&this.y==0&&this.width==0&&this.height==0};e.prototype.offset=function(e,t){this.x+=e;this.y+=t};e.prototype.offsetPoint=function(e){this.x+=e.x;this.y+=e.y};e.prototype.setEmpty=function(){this.x=0;this.y=0;this.width=0;this.height=0};e.prototype.setTo=function(e,t,r,s){this.x=e;this.y=t;this.width=r;this.height=s};e.prototype.toString=function(){return"[Rectangle] (x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"};e.prototype.union=function(t){var r=new e;if(this.x<t.x){r.x=this.x;r.width=t.x-this.x+t.width;if(r.width<this.width)r.width=this.width}else{r.x=t.x;r.width=this.x-t.x+this.width;if(r.width<t.width)r.width=t.width}if(this.y<t.y){r.y=this.y;r.height=t.y-this.y+t.height;if(r.height<this.height)r.height=this.height}else{r.y=t.y;r.height=this.y-t.y+this.height;if(r.height<t.height)r.height=t.height}return r};return e}();t.exports=i},{"awayjs-core/lib/geom/Point":17}],19:[function(e,t,r){var s=e("awayjs-core/lib/geom/Matrix");var i=function(){function e(){this._uvMatrix=new s;this._rotation=0;this._scaleU=1;this._scaleV=1;this._offsetU=0;this._offsetV=0}Object.defineProperty(e.prototype,"offsetU",{get:function(){return this._offsetU},set:function(e){if(e==this._offsetU)return;this._offsetU=e;this._uvMatrixDirty=true},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"offsetV",{get:function(){return this._offsetV},set:function(e){if(e==this._offsetV)return;this._offsetV=e;this._uvMatrixDirty=true},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(e){if(e==this._rotation)return;this._rotation=e;this._uvMatrixDirty=true},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"scaleU",{get:function(){return this._scaleU},set:function(e){if(e==this._scaleU)return;this._scaleU=e;this._uvMatrixDirty=true},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"scaleV",{get:function(){return this._scaleV},set:function(e){if(e==this._scaleV)return;this._scaleV=e;this._uvMatrixDirty=true},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"matrix",{get:function(){if(this._uvMatrixDirty)this.updateUVMatrix();return this._uvMatrix},enumerable:true,configurable:true});e.prototype.updateUVMatrix=function(){this._uvMatrix.identity();if(this._rotation!=0)this._uvMatrix.rotate(this._rotation);if(this._scaleU!=1||this._scaleV!=1)this._uvMatrix.scale(this._scaleU,this._scaleV);this._uvMatrix.translate(this._offsetU,this._offsetV);this._uvMatrixDirty=false};return e}();t.exports=i},{"awayjs-core/lib/geom/Matrix":16}],20:[function(e,t,r){var s=function(){function e(e,t,r,s){if(e===void 0){e=0}if(t===void 0){t=0}if(r===void 0){r=0}if(s===void 0){s=0}this.x=e;this.y=t;this.z=r;this.w=s}Object.defineProperty(e.prototype,"length",{get:function(){return Math.sqrt(this.lengthSquared)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"lengthSquared",{get:function(){return this.x*this.x+this.y*this.y+this.z*this.z},enumerable:true,configurable:true});e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y,this.z+t.z,this.w+t.w)};e.angleBetween=function(e,t){return Math.acos(e.dotProduct(t)/(e.length*t.length))};e.prototype.clone=function(){return new e(this.x,this.y,this.z,this.w)};e.prototype.copyFrom=function(e){this.x=e.x;this.y=e.y;this.z=e.z;this.w=e.w};e.prototype.crossProduct=function(t){return new e(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x,1)};e.prototype.decrementBy=function(e){this.x-=e.x;this.y-=e.y;this.z-=e.z};e.distance=function(e,t){var r=e.x-t.x;var s=e.y-t.y;var i=e.z-t.z;return Math.sqrt(r*r+s*s+i*i)};e.prototype.dotProduct=function(e){return this.x*e.x+this.y*e.y+this.z*e.z};e.prototype.equals=function(e,t){if(t===void 0){t=false}return this.x==e.x&&this.y==e.y&&this.z==e.z&&(!t||this.w==e.w)};e.prototype.incrementBy=function(e){this.x+=e.x;this.y+=e.y;this.z+=e.z};e.prototype.nearEquals=function(e,t,r){if(r===void 0){r=true}return Math.abs(this.x-e.x)<t&&Math.abs(this.y-e.y)<t&&Math.abs(this.z-e.z)<t&&(!r||Math.abs(this.w-e.w)<t)};e.prototype.negate=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z};e.prototype.normalize=function(e){if(e===void 0){e=1}if(this.length!=0){var t=e/this.length;this.x*=t;this.y*=t;this.z*=t;return}};e.prototype.project=function(){this.x/=this.w;this.y/=this.w;this.z/=this.w};e.prototype.scaleBy=function(e){this.x*=e;this.y*=e;this.z*=e};e.prototype.setTo=function(e,t,r){this.x=e;this.y=t;this.z=r};e.prototype.subtract=function(t){return new e(this.x-t.x,this.y-t.y,this.z-t.z)};e.prototype.toString=function(){return"[Vector3D] (x:"+this.x+" ,y:"+this.y+", z"+this.z+", w:"+this.w+")"};e.X_AXIS=new e(1,0,0);e.Y_AXIS=new e(0,1,0);e.Z_AXIS=new e(0,0,1);return e}();t.exports=s},{}],21:[function(e,t,r){var s=e("awayjs-core/lib/library/AssetLibraryBundle");var i=e("awayjs-core/lib/library/AssetLoader");var a=function(){function e(){}e.getBundle=function(e){if(e===void 0){e="default"}return s.getInstance(e)};e.enableParser=function(e){i.enableParser(e)};e.enableParsers=function(e){i.enableParsers(e)};Object.defineProperty(e,"conflictStrategy",{get:function(){return e.getBundle().conflictStrategy},set:function(t){e.getBundle().conflictStrategy=t},enumerable:true,configurable:true});Object.defineProperty(e,"conflictPrecedence",{get:function(){return e.getBundle().conflictPrecedence},set:function(t){e.getBundle().conflictPrecedence=t},enumerable:true,configurable:true});e.createIterator=function(t,r,s){if(t===void 0){t=null}if(r===void 0){r=null}if(s===void 0){s=null}return e.getBundle().createIterator(t,r,s)};e.load=function(t,r,s,i){if(r===void 0){r=null}if(s===void 0){s=null}if(i===void 0){i=null}return e.getBundle().load(t,r,s,i)};e.loadData=function(t,r,s,i){if(r===void 0){r=null}if(s===void 0){s=null}if(i===void 0){i=null}return e.getBundle().loadData(t,r,s,i)};e.stopLoad=function(){e.getBundle().stopAllLoadingSessions()};e.getAsset=function(t,r){if(r===void 0){r=null}return e.getBundle().getAsset(t,r)};e.addEventListener=function(t,r){e.getBundle().addEventListener(t,r)};e.removeEventListener=function(t,r){e.getBundle().removeEventListener(t,r)};e.addAsset=function(t){e.getBundle().addAsset(t)};e.removeAsset=function(t,r){if(r===void 0){r=true}e.getBundle().removeAsset(t,r)};e.removeAssetByName=function(t,r,s){if(r===void 0){r=null}if(s===void 0){s=true}return e.getBundle().removeAssetByName(t,r,s)};e.removeAllAssets=function(t){if(t===void 0){t=true}e.getBundle().removeAllAssets(t)};e.removeNamespaceAssets=function(t,r){if(t===void 0){t=null}if(r===void 0){r=true}e.getBundle().removeNamespaceAssets(t,r)};return e}();t.exports=a},{"awayjs-core/lib/library/AssetLibraryBundle":22,"awayjs-core/lib/library/AssetLoader":24}],22:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/library/AssetLibraryIterator");var a=e("awayjs-core/lib/library/AssetLoader");var o=e("awayjs-core/lib/library/ConflictPrecedence");var n=e("awayjs-core/lib/library/ConflictStrategy");var l=e("awayjs-core/lib/library/NamedAssetBase");var h=e("awayjs-core/lib/errors/Error");var p=e("awayjs-core/lib/events/AssetEvent");var u=e("awayjs-core/lib/events/IOErrorEvent");var c=e("awayjs-core/lib/events/LoaderEvent");var d=e("awayjs-core/lib/events/EventDispatcher");var f=e("awayjs-core/lib/events/ParserEvent");var y=function(e){s(t,e);function t(){var t=this;e.call(this);this._loadingSessionsGarbage=new Array;this._assets=new Array;this._assetDictionary=new Object;this._loadingSessions=new Array;this.conflictStrategy=n.IGNORE.create();this.conflictPrecedence=o.FAVOR_NEW;this._onAssetRenameDelegate=function(e){return t.onAssetRename(e)};this._onAssetConflictResolvedDelegate=function(e){return t.onAssetConflictResolved(e)};this._onResourceCompleteDelegate=function(e){return t.onResourceComplete(e)};this._onTextureSizeErrorDelegate=function(e){return t.onTextureSizeError(e)};this._onAssetCompleteDelegate=function(e){return t.onAssetComplete(e)};this._onLoadErrorDelegate=function(e){return t.onLoadError(e)};this._onParseErrorDelegate=function(e){return t.onParseError(e)}}t.getInstance=function(e){if(e===void 0){e="default"}if(!e)e="default";if(!t._iInstances.hasOwnProperty(e))t._iInstances[e]=new t;return t._iInstances[e]};t.prototype.enableParser=function(e){a.enableParser(e)};t.prototype.enableParsers=function(e){a.enableParsers(e)};Object.defineProperty(t.prototype,"conflictStrategy",{get:function(){return this._strategy},set:function(e){if(!e)throw new h("namingStrategy must not be null. To ignore naming, use AssetLibrary.IGNORE");this._strategy=e.create()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"conflictPrecedence",{get:function(){return this._strategyPreference},set:function(e){this._strategyPreference=e},enumerable:true,configurable:true});t.prototype.createIterator=function(e,t,r){if(e===void 0){e=null}if(t===void 0){t=null}if(r===void 0){r=null}return new i(this._assets,e,t,r)};t.prototype.load=function(e,t,r,s){if(t===void 0){t=null}if(r===void 0){r=null}if(s===void 0){s=null}var i=new a;if(!this._loadingSessions)this._loadingSessions=new Array;this._loadingSessions.push(i);i.addEventListener(c.RESOURCE_COMPLETE,this._onResourceCompleteDelegate);i.addEventListener(p.TEXTURE_SIZE_ERROR,this._onTextureSizeErrorDelegate);i.addEventListener(p.ASSET_COMPLETE,this._onAssetCompleteDelegate);i._iAddErrorHandler(this._onLoadErrorDelegate);i._iAddParseErrorHandler(this._onParseErrorDelegate);return i.load(e,t,r,s)};t.prototype.loadData=function(e,t,r,s){if(t===void 0){t=null}if(r===void 0){r=null}if(s===void 0){s=null}var i=new a;if(!this._loadingSessions)this._loadingSessions=new Array;this._loadingSessions.push(i);i.addEventListener(c.RESOURCE_COMPLETE,this._onResourceCompleteDelegate);i.addEventListener(p.TEXTURE_SIZE_ERROR,this._onTextureSizeErrorDelegate);i.addEventListener(p.ASSET_COMPLETE,this._onAssetCompleteDelegate);i._iAddErrorHandler(this._onLoadErrorDelegate);i._iAddParseErrorHandler(this._onParseErrorDelegate);return i.loadData(e,"",t,r,s)};t.prototype.getAsset=function(e,t){if(t===void 0){t=null}if(this._assetDictDirty)this.rehashAssetDict();if(t==null)t=l.DEFAULT_NAMESPACE;if(!this._assetDictionary.hasOwnProperty(t))return null;return this._assetDictionary[t][e]};t.prototype.addAsset=function(e){var t;var r;if(this._assets.indexOf(e)>=0)return;r=this.getAsset(e.name,e.assetNamespace);t=e.assetNamespace||l.DEFAULT_NAMESPACE;if(r!=null)this._strategy.resolveConflict(e,r,this._assetDictionary[t],this._strategyPreference);this._assets.push(e);if(!this._assetDictionary.hasOwnProperty(t))this._assetDictionary[t]=new Object;this._assetDictionary[t][e.name]=e;e.addEventListener(p.ASSET_RENAME,this._onAssetRenameDelegate);e.addEventListener(p.ASSET_CONFLICT_RESOLVED,this._onAssetConflictResolvedDelegate)};t.prototype.removeAsset=function(e,t){if(t===void 0){t=true}var r;this.removeAssetFromDict(e);e.removeEventListener(p.ASSET_RENAME,this._onAssetRenameDelegate);e.removeEventListener(p.ASSET_CONFLICT_RESOLVED,this._onAssetConflictResolvedDelegate);r=this._assets.indexOf(e);if(r>=0)this._assets.splice(r,1);if(t)e.dispose()};t.prototype.removeAssetByName=function(e,t,r){if(t===void 0){t=null}if(r===void 0){r=true}var s=this.getAsset(e,t);if(s)this.removeAsset(s,r);return s};t.prototype.removeAllAssets=function(e){if(e===void 0){e=true}if(e){var t;for(var r=0;r<this._assets.length;r++){t=this._assets[r];t.dispose()}}this._assets.length=0;this.rehashAssetDict()};t.prototype.removeNamespaceAssets=function(e,t){if(e===void 0){e=null}if(t===void 0){t=true}var r=0;var s;var i;i=this._assets.concat();this._assets.length=0;if(e==null)e=l.DEFAULT_NAMESPACE;for(var a=0;a<i.length;a++){s=i[a];if(s.assetNamespace==e){if(t)s.dispose();this.removeAssetFromDict(s,false)}else{this._assets[r++]=s}}if(this._assetDictionary.hasOwnProperty(e))delete this._assetDictionary[e]};t.prototype.removeAssetFromDict=function(e,t){if(t===void 0){t=true}if(this._assetDictDirty)this.rehashAssetDict();if(this._assetDictionary.hasOwnProperty(e.assetNamespace)){if(this._assetDictionary[e.assetNamespace].hasOwnProperty(e.name))delete this._assetDictionary[e.assetNamespace][e.name];if(t){var r;var s=true;for(r in this._assetDictionary[e.assetNamespace]){s=false;break}if(s)delete this._assetDictionary[e.assetNamespace]}}};t.prototype.stopAllLoadingSessions=function(){var e;if(!this._loadingSessions)this._loadingSessions=new Array;var t=this._loadingSessions.length;for(e=0;e<t;e++)this.killLoadingSession(this._loadingSessions[e]);this._loadingSessions=null};t.prototype.rehashAssetDict=function(){var e;this._assetDictionary={};var t=this._assets.length;for(var r=0;r<t;r++){e=this._assets[r];if(!this._assetDictionary.hasOwnProperty(e.assetNamespace))this._assetDictionary[e.assetNamespace]={};this._assetDictionary[e.assetNamespace][e.name]=e}this._assetDictDirty=false};t.prototype.onLoadError=function(e){if(this.hasEventListener(u.IO_ERROR)){this.dispatchEvent(e);return true}else{return false}};t.prototype.onParseError=function(e){if(this.hasEventListener(f.PARSE_ERROR)){this.dispatchEvent(e);return true}else{return false}};t.prototype.onAssetComplete=function(e){if(e.type==p.ASSET_COMPLETE)this.addAsset(e.asset);this.dispatchEvent(e)};t.prototype.onTextureSizeError=function(e){this.dispatchEvent(e)};t.prototype.onResourceComplete=function(e){var t=this;var r=e.target;this.dispatchEvent(e);var s=this._loadingSessions.indexOf(r);this._loadingSessions.splice(s,1);this._loadingSessionsGarbage.push(r);this._gcTimeoutIID=setTimeout(function(){t.loadingSessionGC()},100)};t.prototype.loadingSessionGC=function(){var e;while(this._loadingSessionsGarbage.length>0){e=this._loadingSessionsGarbage.pop();this.killLoadingSession(e)}clearTimeout(this._gcTimeoutIID);this._gcTimeoutIID=null};t.prototype.killLoadingSession=function(e){e.removeEventListener(c.RESOURCE_COMPLETE,this._onResourceCompleteDelegate);e.removeEventListener(p.TEXTURE_SIZE_ERROR,this._onTextureSizeErrorDelegate);e.removeEventListener(p.ASSET_COMPLETE,this._onAssetCompleteDelegate);e.stop()};t.prototype.onAssetRename=function(e){var t=e.target;var r=this.getAsset(t.assetNamespace,t.name);if(r!=null){this._strategy.resolveConflict(t,r,this._assetDictionary[t.assetNamespace],this._strategyPreference)}else{var s=this._assetDictionary[e.asset.assetNamespace];if(s==null)return;s[e.assetPrevName]=null;s[e.asset.name]=e.asset}};t.prototype.onAssetConflictResolved=function(e){this.dispatchEvent(e.clone())};t._iInstances=new Object;return t}(d);t.exports=y},{"awayjs-core/lib/errors/Error":6,"awayjs-core/lib/events/AssetEvent":7,"awayjs-core/lib/events/EventDispatcher":9,"awayjs-core/lib/events/IOErrorEvent":11,"awayjs-core/lib/events/LoaderEvent":12,"awayjs-core/lib/events/ParserEvent":13,"awayjs-core/lib/library/AssetLibraryIterator":23,"awayjs-core/lib/library/AssetLoader":24,"awayjs-core/lib/library/ConflictPrecedence":28,"awayjs-core/lib/library/ConflictStrategy":29,"awayjs-core/lib/library/NamedAssetBase":33}],23:[function(e,t,r){var s=function(){function e(e,t,r,s){this._assets=e;this.filter(t,r,s)}Object.defineProperty(e.prototype,"currentAsset",{get:function(){return this._idx<this._filtered.length?this._filtered[this._idx]:null},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"numAssets",{get:function(){return this._filtered.length},enumerable:true,configurable:true});e.prototype.next=function(){var e=null;if(this._idx<this._filtered.length)e=this._filtered[this._idx];this._idx++;return e};e.prototype.reset=function(){this._idx=0};e.prototype.setIndex=function(e){this._idx=e};e.prototype.filter=function(e,t,r){if(e||t){var s;var i;s=0;this._filtered=new Array;var a=this._assets.length;for(var o=0;o<a;o++){i=this._assets[o];if(e&&i.assetType!=e)continue;if(t&&i.assetNamespace!=t)continue;if(r!=null&&!r(i))continue;this._filtered[s++]=i}}else{this._filtered=this._assets}};return e}();t.exports=s},{}],24:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/library/AssetLoaderToken");var a=e("awayjs-core/lib/net/URLLoader");var o=e("awayjs-core/lib/net/URLLoaderDataFormat");var n=e("awayjs-core/lib/errors/Error");var l=e("awayjs-core/lib/events/AssetEvent");var h=e("awayjs-core/lib/events/Event");var p=e("awayjs-core/lib/events/EventDispatcher");var u=e("awayjs-core/lib/events/IOErrorEvent");var c=e("awayjs-core/lib/events/LoaderEvent");var d=e("awayjs-core/lib/events/ParserEvent");var f=e("awayjs-core/lib/parsers/CubeTextureParser");var y=e("awayjs-core/lib/parsers/ResourceDependency");var m=e("awayjs-core/lib/parsers/Texture2DParser");var _=function(e){s(t,e);function t(t){var r=this;if(t===void 0){t=0}e.call(this);this._materialMode=t;this._stack=new Array;this._errorHandlers=new Array;this._parseErrorHandlers=new Array;this._onReadyForDependenciesDelegate=function(e){return r.onReadyForDependencies(e)};this._onParseCompleteDelegate=function(e){return r.onParseComplete(e)};this._onParseErrorDelegate=function(e){return r.onParseError(e)};this._onLoadCompleteDelegate=function(e){return r.onLoadComplete(e)};this._onLoadErrorDelegate=function(e){return r.onLoadError(e)};this._onTextureSizeErrorDelegate=function(e){return r.onTextureSizeError(e)};this._onAssetCompleteDelegate=function(e){return r.onAssetComplete(e)}}t.enableParser=function(e){if(t._parsers.indexOf(e)<0)t._parsers.push(e)};t.enableParsers=function(e){for(var r=0;r<e.length;r++)t.enableParser(e[r])};Object.defineProperty(t.prototype,"baseDependency",{get:function(){return this._baseDependency},enumerable:true,configurable:true});t.prototype.load=function(e,t,r,s){if(t===void 0){t=null}if(r===void 0){r=null}if(s===void 0){s=null}if(!this._token){this._token=new i(this);this._uri=e.url=e.url.replace(/\\/g,"/");this._context=t;this._namespace=r;this._baseDependency=new y("",e,null,s,null);this.retrieveDependency(this._baseDependency);return this._token}return null};t.prototype.loadData=function(e,t,r,s,a){if(r===void 0){r=null}if(s===void 0){s=null}if(a===void 0){a=null}if(!this._token){this._token=new i(this);this._uri=t;this._context=r;this._namespace=s;this._baseDependency=new y(t,null,e,a,null);this.retrieveDependency(this._baseDependency);return this._token}return null};t.prototype.retrieveNext=function(e){if(e===void 0){e=null}if(this._currentDependency.dependencies.length){var t=this._currentDependency.dependencies.pop();this._stack.push(this._currentDependency);this.retrieveDependency(t)}else if(this._currentDependency.parser&&this._currentDependency.parser.parsingPaused){this._currentDependency.parser._iResumeParsingAfterDependencies();this._stack.pop()}else if(this._stack.length){var r=this._currentDependency;this._currentDependency=this._stack.pop();if(r._iSuccess)r.resolve();this.retrieveNext(e)}else{this.dispatchEvent(new c(c.RESOURCE_COMPLETE,this._uri,this._baseDependency.parser.content,this._baseDependency.assets))}};t.prototype.retrieveDependency=function(e){var t;if(this._context&&this._context.materialMode!=0)this._materialMode=this._context.materialMode;this._currentDependency=e;e._iLoader=new a;this.addEventListeners(e._iLoader);t=e.data;if(this._context&&e.request&&this._context._iHasDataForUrl(e.request.url))t=this._context._iGetDataForUrl(e.request.url);if(t){if(t.constructor===Function)t=new t;e._iSetData(t);if(e.retrieveAsRawData){e.resolve();this.retrieveNext()}else{this.parseDependency(e)}}else{e.request.url=this.resolveDependencyUrl(e);if(e.retrieveAsRawData){e._iLoader.dataFormat=o.BINARY}else{if(!e.parser)e._iSetParser(this.getParserFromSuffix(e.request.url));if(e.parser){e._iLoader.dataFormat=e.parser.dataFormat}else{e._iLoader.dataFormat=o.BINARY}}e._iLoader.load(e.request)}};t.prototype.joinUrl=function(e,t){if(t.charAt(0)=="/")t=t.substr(1);if(e.length==0)return t;if(e.charAt(e.length-1)=="/")e=e.substr(0,e.length-1);return e.concat("/",t)};t.prototype.resolveDependencyUrl=function(e){var t;var r;var s=e.request.url;if(this._context&&this._context._iHasMappingForUrl(s))return this._context._iGetRemappedUrl(s);if(s==this._uri)return s;t=new RegExp("/^[a-zA-Z]{3,4}:///");if(s.charAt(0)=="/"){if(this._context&&this._context.overrideAbsolutePaths)return this.joinUrl(this._context.dependencyBaseUrl,s);else return s}else if(t.test(s)){if(this._context&&this._context.overrideFullURLs){var i=s.replace(t,"");return this.joinUrl(this._context.dependencyBaseUrl,i)}}if(this._context&&this._context.dependencyBaseUrl){r=this._context.dependencyBaseUrl;return this.joinUrl(r,s)}else{r=this._uri.substring(0,this._uri.lastIndexOf("/")+1);return this.joinUrl(r,s)}};t.prototype.retrieveParserDependencies=function(){if(!this._currentDependency)return;var e=this._currentDependency.parser.dependencies;var t,r=e.length;for(t=0;t<r;t++)this._currentDependency.dependencies[t]=e[t];e.length=0;this._stack.push(this._currentDependency);this.retrieveNext()};t.prototype.resolveParserDependencies=function(){this._currentDependency._iSuccess=true;if(this._currentDependency.parser&&this._currentDependency.parser.dependencies.length&&(!this._context||this._context.includeDependencies))this.retrieveParserDependencies();else this.retrieveNext()};t.prototype.onLoadError=function(e){var t;var r=this._currentDependency!=this._baseDependency;var s=e.target;this.removeEventListeners(s);if(this.hasEventListener(u.IO_ERROR)){this.dispatchEvent(e);t=true}else{var i,a=this._errorHandlers.length;for(i=0;i<a;i++)if(!t)t=this._errorHandlers[i](e)}if(t){if(r){this._currentDependency.resolveFailure();this.retrieveNext()}else{this.dispose();return}}else{throw new n}};t.prototype.onParseError=function(e){var t;var r=this._currentDependency!=this._baseDependency;var s=e.target;this.removeEventListeners(s);if(this.hasEventListener(d.PARSE_ERROR)){this.dispatchEvent(e);t=true}else{var i,a=this._parseErrorHandlers.length;for(i=0;i<a;i++)if(!t)t=this._parseErrorHandlers[i](e)}if(t){this.dispose();return}else{throw new n(e.message)}};t.prototype.onAssetComplete=function(e){if(this._currentDependency)this._currentDependency.assets.push(e.asset);e.asset.resetAssetPath(e.asset.name,this._namespace);if(!this._currentDependency.suppresAssetEvents)this.dispatchEvent(e)};t.prototype.onReadyForDependencies=function(e){var t=e.target;if(this._context&&!this._context.includeDependencies)t._iResumeParsingAfterDependencies();else this.retrieveParserDependencies()};t.prototype.onLoadComplete=function(e){var t=e.target;this.removeEventListeners(t);this._currentDependency._iSetData(t.data);if(this._currentDependency.retrieveAsRawData){this.resolveParserDependencies()}else{this.parseDependency(this._currentDependency)}};t.prototype.onParseComplete=function(e){var t=e.target;this.resolveParserDependencies();t.removeEventListener(d.READY_FOR_DEPENDENCIES,this._onReadyForDependenciesDelegate);t.removeEventListener(d.PARSE_COMPLETE,this._onParseCompleteDelegate);t.removeEventListener(d.PARSE_ERROR,this._onParseErrorDelegate);t.removeEventListener(l.TEXTURE_SIZE_ERROR,this._onTextureSizeErrorDelegate);t.removeEventListener(l.ASSET_COMPLETE,this._onAssetCompleteDelegate)};t.prototype.onTextureSizeError=function(e){e.asset.name=this._currentDependency.resolveName(e.asset);this.dispatchEvent(e)};t.prototype.addEventListeners=function(e){e.addEventListener(h.COMPLETE,this._onLoadCompleteDelegate);e.addEventListener(u.IO_ERROR,this._onLoadErrorDelegate)};t.prototype.removeEventListeners=function(e){e.removeEventListener(h.COMPLETE,this._onLoadCompleteDelegate);e.removeEventListener(u.IO_ERROR,this._onLoadErrorDelegate)};t.prototype.stop=function(){this.dispose()};t.prototype.dispose=function(){this._errorHandlers=null;this._parseErrorHandlers=null;this._context=null;this._token=null;this._stack=null;if(this._currentDependency&&this._currentDependency._iLoader)this.removeEventListeners(this._currentDependency._iLoader);this._currentDependency=null};t.prototype._iAddParseErrorHandler=function(e){if(this._parseErrorHandlers.indexOf(e)<0)this._parseErrorHandlers.push(e)};t.prototype._iAddErrorHandler=function(e){if(this._errorHandlers.indexOf(e)<0)this._errorHandlers.push(e)};t.prototype.getParserFromData=function(e){var r=t._parsers.length;for(var s=r-1;s>=0;s--)if(t._parsers[s].supportsData(e))return new t._parsers[s];return null};t.prototype.parseDependency=function(e){var t=e.parser;if(!t)e._iSetParser(t=this.getParserFromData(e.data));
if(t){t.addEventListener(d.READY_FOR_DEPENDENCIES,this._onReadyForDependenciesDelegate);t.addEventListener(d.PARSE_COMPLETE,this._onParseCompleteDelegate);t.addEventListener(d.PARSE_ERROR,this._onParseErrorDelegate);t.addEventListener(l.TEXTURE_SIZE_ERROR,this._onTextureSizeErrorDelegate);t.addEventListener(l.ASSET_COMPLETE,this._onAssetCompleteDelegate);if(e.request&&e.request.url)t._iFileName=e.request.url;t.materialMode=this._materialMode;t.parseAsync(e.data)}else{var r="No parser defined. To enable all parsers for auto-detection, use Parsers.enableAllBundled()";if(this.hasEventListener(d.PARSE_ERROR))this.dispatchEvent(new d(d.PARSE_ERROR,r));else throw new n(r)}};t.prototype.getParserFromSuffix=function(e){var r=e.indexOf("?")>0?e.split("?")[0]:e;var s=r.substr(r.lastIndexOf(".")+1).toLowerCase();var i=t._parsers.length;for(var a=i-1;a>=0;a--){var o=t._parsers[a];if(o.supportsType(s))return new o}return null};t._parsers=new Array(m,f);return t}(p);t.exports=_},{"awayjs-core/lib/errors/Error":6,"awayjs-core/lib/events/AssetEvent":7,"awayjs-core/lib/events/Event":8,"awayjs-core/lib/events/EventDispatcher":9,"awayjs-core/lib/events/IOErrorEvent":11,"awayjs-core/lib/events/LoaderEvent":12,"awayjs-core/lib/events/ParserEvent":13,"awayjs-core/lib/library/AssetLoaderToken":26,"awayjs-core/lib/net/URLLoader":35,"awayjs-core/lib/net/URLLoaderDataFormat":36,"awayjs-core/lib/parsers/CubeTextureParser":40,"awayjs-core/lib/parsers/ResourceDependency":43,"awayjs-core/lib/parsers/Texture2DParser":44}],25:[function(e,t,r){var s=function(){function e(t,r){if(t===void 0){t=true}if(r===void 0){r=null}this._includeDependencies=t;this._dependencyBaseUrl=r||"";this._embeddedDataByUrl={};this._remappedUrls={};this._materialMode=e.UNDEFINED}Object.defineProperty(e.prototype,"includeDependencies",{get:function(){return this._includeDependencies},set:function(e){this._includeDependencies=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"materialMode",{get:function(){return this._materialMode},set:function(e){this._materialMode=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"dependencyBaseUrl",{get:function(){return this._dependencyBaseUrl},set:function(e){this._dependencyBaseUrl=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"overrideAbsolutePaths",{get:function(){return this._overrideAbsPath},set:function(e){this._overrideAbsPath=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"overrideFullURLs",{get:function(){return this._overrideFullUrls},set:function(e){this._overrideFullUrls=e},enumerable:true,configurable:true});e.prototype.mapUrl=function(e,t){this._remappedUrls[e]=t};e.prototype.mapUrlToData=function(e,t){this._embeddedDataByUrl[e]=t};e.prototype._iHasDataForUrl=function(e){return this._embeddedDataByUrl.hasOwnProperty(e)};e.prototype._iGetDataForUrl=function(e){return this._embeddedDataByUrl[e]};e.prototype._iHasMappingForUrl=function(e){return this._remappedUrls.hasOwnProperty(e)};e.prototype._iGetRemappedUrl=function(e){return this._remappedUrls[e]};e.UNDEFINED=0;e.SINGLEPASS_MATERIALS=1;e.MULTIPASS_MATERIALS=2;return e}();t.exports=s},{}],26:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/events/EventDispatcher");var a=function(e){s(t,e);function t(t){e.call(this);this._iLoader=t}t.prototype.addEventListener=function(e,t){this._iLoader.addEventListener(e,t)};t.prototype.removeEventListener=function(e,t){this._iLoader.removeEventListener(e,t)};t.prototype.hasEventListener=function(e,t){if(t===void 0){t=null}return this._iLoader.hasEventListener(e,t)};return t}(i);t.exports=a},{"awayjs-core/lib/events/EventDispatcher":9}],27:[function(e,t,r){var s=function(){function e(){}e.ANIMATION_NODE="animationNode";e.ANIMATION_SET="animationSet";e.ANIMATION_STATE="animationState";e.ANIMATOR="animator";e.BILLBOARD="billboard";e.CAMERA="camera";e.CONTAINER="container";e.EFFECTS_METHOD="effectsMethod";e.GEOMETRY="geometry";e.LINE_SEGMENT="lineSegment";e.LIGHT="light";e.LIGHT_PICKER="lightPicker";e.MATERIAL="material";e.MESH="mesh";e.TRIANGLE_SUB_MESH="triangleSubMesh";e.LINE_SUB_MESH="lineSubMesh";e.PRIMITIVE_PREFAB="primitivePrefab";e.SHADOW_MAP_METHOD="shadowMapMethod";e.SKELETON="skeleton";e.SKELETON_POSE="skeletonPose";e.SKYBOX="skybox";e.STATE_TRANSITION="stateTransition";e.TEXTURE="texture";e.TEXTURE_PROJECTOR="textureProjector";e.TIMELINE="timeline";return e}();t.exports=s},{}],28:[function(e,t,r){var s=function(){function e(){}e.FAVOR_OLD="favorOld";e.FAVOR_NEW="favorNew";return e}();t.exports=s},{}],29:[function(e,t,r){var s=e("awayjs-core/lib/library/ErrorConflictStrategy");var i=e("awayjs-core/lib/library/IgnoreConflictStrategy");var a=e("awayjs-core/lib/library/NumSuffixConflictStrategy");var o=function(){function e(e){}e.APPEND_NUM_SUFFIX=new a;e.IGNORE=new i;e.THROW_ERROR=new s;return e}();t.exports=o},{"awayjs-core/lib/library/ErrorConflictStrategy":31,"awayjs-core/lib/library/IgnoreConflictStrategy":32,"awayjs-core/lib/library/NumSuffixConflictStrategy":34}],30:[function(e,t,r){var s=e("awayjs-core/lib/library/ConflictPrecedence");var i=e("awayjs-core/lib/errors/AbstractMethodError");var a=e("awayjs-core/lib/events/AssetEvent");var o=function(){function e(){}e.prototype.resolveConflict=function(e,t,r,s){throw new i};e.prototype.create=function(){throw new i};e.prototype._pUpdateNames=function(e,t,r,i,o,n){var l;var h;var p;h=n===s.FAVOR_NEW?i:r;p=n===s.FAVOR_NEW?r:i;l=p.name;o[h.name]=h;o[t]=p;p.resetAssetPath(t,e,false);p.dispatchEvent(new a(a.ASSET_CONFLICT_RESOLVED,p,l))};return e}();t.exports=o},{"awayjs-core/lib/errors/AbstractMethodError":4,"awayjs-core/lib/events/AssetEvent":7,"awayjs-core/lib/library/ConflictPrecedence":28}],31:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/library/ConflictStrategyBase");var a=e("awayjs-core/lib/errors/Error");var o=function(e){s(t,e);function t(){e.call(this)}t.prototype.resolveConflict=function(e,t,r,s){throw new a("Asset name collision while AssetLibrary.namingStrategy set to AssetLibrary.THROW_ERROR. Asset path: "+e.assetFullPath)};t.prototype.create=function(){return new t};return t}(i);t.exports=o},{"awayjs-core/lib/errors/Error":6,"awayjs-core/lib/library/ConflictStrategyBase":30}],32:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/library/ConflictStrategyBase");var a=function(e){s(t,e);function t(){e.call(this)}t.prototype.resolveConflict=function(e,t,r,s){return};t.prototype.create=function(){return new t};return t}(i);t.exports=a},{"awayjs-core/lib/library/ConflictStrategyBase":30}],33:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/errors/AbstractMethodError");var a=e("awayjs-core/lib/events/AssetEvent");var o=e("awayjs-core/lib/events/EventDispatcher");var n=function(e){s(t,e);function t(r){if(r===void 0){r=null}e.call(this);this._id=t.ID_COUNT++;if(r==null)r="null";this._name=r;this._originalName=r;this.updateFullPath()}Object.defineProperty(t.prototype,"assetType",{get:function(){throw new i},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"originalName",{get:function(){return this._originalName},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(e){var t;t=this._name;this._name=e;if(this._name==null)this._name="null";this.updateFullPath();this.dispatchEvent(new a(a.ASSET_RENAME,this,t))},enumerable:true,configurable:true});t.prototype.dispose=function(){throw new i};Object.defineProperty(t.prototype,"assetNamespace",{get:function(){return this._namespace},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"assetFullPath",{get:function(){return this._full_path},enumerable:true,configurable:true});t.prototype.assetPathEquals=function(e,t){return this._name==e&&(!t||this._namespace==t)};t.prototype.resetAssetPath=function(e,r,s){if(r===void 0){r=null}if(s===void 0){s=true}this._name=e?e:"null";this._namespace=r?r:t.DEFAULT_NAMESPACE;if(s)this._originalName=this._name;this.updateFullPath()};t.prototype.updateFullPath=function(){this._full_path=[this._namespace,this._name]};t.ID_COUNT=0;t.DEFAULT_NAMESPACE="default";return t}(o);t.exports=n},{"awayjs-core/lib/errors/AbstractMethodError":4,"awayjs-core/lib/events/AssetEvent":7,"awayjs-core/lib/events/EventDispatcher":9}],34:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/library/ConflictStrategyBase");var a=function(e){s(t,e);function t(t){if(t===void 0){t="."}e.call(this);this._separator=t;this._next_suffix={}}t.prototype.resolveConflict=function(e,t,r,s){var i;var a;var o;var n;i=e.name;if(i.indexOf(this._separator)>=0){o=i.substring(0,i.lastIndexOf(this._separator));n=parseInt(i.substring(o.length-1));if(isNaN(n)){o=i;n=0}}else{o=i;n=0}if(n==0&&this._next_suffix.hasOwnProperty(o)){n=this._next_suffix[o]}do{n++;a=o.concat(this._separator,n.toString())}while(r.hasOwnProperty(a));this._next_suffix[o]=n;this._pUpdateNames(t.assetNamespace,a,t,e,r,s)};t.prototype.create=function(){return new t(this._separator)};return t}(i);t.exports=a},{"awayjs-core/lib/library/ConflictStrategyBase":30}],35:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/net/URLLoaderDataFormat");var a=e("awayjs-core/lib/net/URLRequestMethod");var o=e("awayjs-core/lib/net/URLVariables");var n=e("awayjs-core/lib/events/Event");var l=e("awayjs-core/lib/events/EventDispatcher");var h=e("awayjs-core/lib/events/HTTPStatusEvent");var p=e("awayjs-core/lib/events/IOErrorEvent");var u=e("awayjs-core/lib/events/ProgressEvent");var c=function(e){s(t,e);function t(){e.call(this);this._bytesLoaded=0;this._bytesTotal=0;this._dataFormat=i.TEXT;this._loadError=false}Object.defineProperty(t.prototype,"url",{get:function(){return this._request?this._request.url:""},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"dataFormat",{get:function(){return this._dataFormat},set:function(e){this._dataFormat=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bytesLoaded",{get:function(){return this._bytesLoaded},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bytesTotal",{get:function(){return this._bytesTotal},enumerable:true,configurable:true});t.prototype.load=function(e){this._request=e;this.initXHR();if(e.method===a.POST)this.postRequest(e);else this.getRequest(e)};t.prototype.close=function(){this._XHR.abort();this.disposeXHR()};t.prototype.dispose=function(){if(this._XHR)this._XHR.abort();this.disposeXHR();this._data=null;this._dataFormat=null;this._bytesLoaded=null;this._bytesTotal=null};t.prototype.setResponseType=function(e,t){switch(t){case i.ARRAY_BUFFER:case i.BLOB:case i.TEXT:e.responseType=t;break;case i.VARIABLES:e.responseType=i.TEXT;break;case i.BINARY:e.responseType="";break;default:}};t.prototype.getRequest=function(e){try{this._XHR.open(e.method,e.url,e.async);this.setResponseType(this._XHR,this._dataFormat);this._XHR.send()}catch(t){this.handleXmlHttpRequestException(t)}};t.prototype.postRequest=function(e){this._loadError=false;this._XHR.open(e.method,e.url,e.async);if(e.data!=null){if(e.data instanceof o){var t=e.data;try{this._XHR.responseType="text";this._XHR.send(t.formData)}catch(r){this.handleXmlHttpRequestException(r)}}else{this.setResponseType(this._XHR,this._dataFormat);if(e.data)this._XHR.send(e.data);else this._XHR.send()}}else{this._XHR.send()}};t.prototype.handleXmlHttpRequestException=function(e){switch(e.code){case 101:break}};t.prototype.initXHR=function(){var e=this;if(!this._XHR){this._XHR=new XMLHttpRequest;this._XHR.onloadstart=function(t){return e.onLoadStart(t)};this._XHR.onprogress=function(t){return e.onProgress(t)};this._XHR.onabort=function(t){return e.onAbort(t)};this._XHR.onerror=function(t){return e.onLoadError(t)};this._XHR.onload=function(t){return e.onLoadComplete(t)};this._XHR.ontimeout=function(t){return e.onTimeOut(t)};this._XHR.onloadend=function(t){return e.onLoadEnd(t)};this._XHR.onreadystatechange=function(t){return e.onReadyStateChange(t)}}};t.prototype.disposeXHR=function(){if(this._XHR!==null){this._XHR.onloadstart=null;this._XHR.onprogress=null;this._XHR.onabort=null;this._XHR.onerror=null;this._XHR.onload=null;this._XHR.ontimeout=null;this._XHR.onloadend=null;this._XHR=null}};t.prototype.decodeURLVariables=function(e){var t=new Object;e=e.split("+").join(" ");var r,s=/[?&]?([^=]+)=([^&]*)/g;while(r=s.exec(e))t[decodeURIComponent(r[1])]=decodeURIComponent(r[2]);return t};t.prototype.onReadyStateChange=function(e){if(this._XHR.readyState==4){if(this._XHR.status==404){this._loadError=true;if(!this._loadErrorEvent)this._loadErrorEvent=new p(p.IO_ERROR);this.dispatchEvent(this._loadErrorEvent)}this.dispatchEvent(new h(h.HTTP_STATUS,this._XHR.status))}};t.prototype.onLoadEnd=function(e){if(this._loadError===true)return};t.prototype.onTimeOut=function(e){};t.prototype.onAbort=function(e){};t.prototype.onProgress=function(e){if(!this._progressEvent)this._progressEvent=new u(u.PROGRESS);this._progressEvent.bytesTotal=e.total;this._progressEvent.bytesLoaded=e.loaded;this.dispatchEvent(this._progressEvent)};t.prototype.onLoadStart=function(e){if(!this._loadStartEvent)this._loadStartEvent=new n(n.OPEN);this.dispatchEvent(this._loadStartEvent)};t.prototype.onLoadComplete=function(e){if(this._loadError===true)return;switch(this._dataFormat){case i.TEXT:this._data=this._XHR.responseText;break;case i.VARIABLES:this._data=this.decodeURLVariables(this._XHR.responseText);break;case i.BLOB:case i.ARRAY_BUFFER:case i.BINARY:this._data=this._XHR.response;break;default:this._data=this._XHR.responseText;break}if(!this._loadCompleteEvent)this._loadCompleteEvent=new n(n.COMPLETE);this.dispatchEvent(this._loadCompleteEvent)};t.prototype.onLoadError=function(e){this._loadError=true;if(!this._loadErrorEvent)this._loadErrorEvent=new p(p.IO_ERROR);this.dispatchEvent(this._loadErrorEvent)};return t}(l);t.exports=c},{"awayjs-core/lib/events/Event":8,"awayjs-core/lib/events/EventDispatcher":9,"awayjs-core/lib/events/HTTPStatusEvent":10,"awayjs-core/lib/events/IOErrorEvent":11,"awayjs-core/lib/events/ProgressEvent":14,"awayjs-core/lib/net/URLLoaderDataFormat":36,"awayjs-core/lib/net/URLRequestMethod":38,"awayjs-core/lib/net/URLVariables":39}],36:[function(e,t,r){var s=function(){function e(){}e.TEXT="text";e.VARIABLES="variables";e.BLOB="blob";e.ARRAY_BUFFER="arraybuffer";e.BINARY="binary";return e}();t.exports=s},{}],37:[function(e,t,r){var s=e("awayjs-core/lib/net/URLRequestMethod");var i=function(){function e(e){if(e===void 0){e=null}this.method=s.GET;this.async=true;this._url=e}Object.defineProperty(e.prototype,"url",{get:function(){return this._url},set:function(e){this._url=e},enumerable:true,configurable:true});e.prototype.dispose=function(){this.data=null;this._url=null};return e}();t.exports=i},{"awayjs-core/lib/net/URLRequestMethod":38}],38:[function(e,t,r){var s=function(){function e(){}e.POST="POST";e.GET="GET";return e}();t.exports=s},{}],39:[function(e,t,r){var s=function(){function e(e){if(e===void 0){e=null}this._variables=new Object;if(e!==null)this.decode(e)}e.prototype.decode=function(e){e=e.split("+").join(" ");var t,r=/[?&]?([^=]+)=([^&]*)/g;while(t=r.exec(e))this._variables[decodeURIComponent(t[1])]=decodeURIComponent(t[2])};e.prototype.toString=function(){return""};Object.defineProperty(e.prototype,"variables",{get:function(){return this._variables},set:function(e){this._variables=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"formData",{get:function(){var e=new FormData;for(var t in this._variables)e.append(t,this._variables[t]);return e},enumerable:true,configurable:true});return e}();t.exports=s},{}],40:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/net/URLLoaderDataFormat");var a=e("awayjs-core/lib/net/URLRequest");var o=e("awayjs-core/lib/parsers/ParserBase");var n=e("awayjs-core/lib/textures/ImageCubeTexture");var l=function(e){s(t,e);function t(){e.call(this,i.TEXT)}t.supportsType=function(e){e=e.toLowerCase();return e=="cube"};t.supportsData=function(e){try{var t=JSON.parse(e);if(t){return true}return false}catch(r){return false}return false};t.prototype._iResolveDependency=function(e){};t.prototype._iResolveDependencyFailure=function(e){};t.prototype._pProceedParsing=function(){if(this._imgDependencyDictionary!=null){var e=new n(this._getHTMLImageElement(t.posX),this._getHTMLImageElement(t.negX),this._getHTMLImageElement(t.posY),this._getHTMLImageElement(t.negY),this._getHTMLImageElement(t.posZ),this._getHTMLImageElement(t.negZ));this._imgDependencyDictionary=null;e.name=this._iFileName;this._pFinalizeAsset(e,this._iFileName);return o.PARSING_DONE}try{var r=JSON.parse(this.data);var s=r.data;var i;if(s.length!=6)this._pDieWithError("CubeTextureParser: Error - cube texture should have exactly 6 images");if(r){this._imgDependencyDictionary=new Object;for(var l=0;l<s.length;l++){i=s[l];this._imgDependencyDictionary[i.id]=this._pAddDependency(i.id,new a(i.image.toString()))}if(!this._validateCubeData()){this._pDieWithError("CubeTextureParser: JSON data error - cubes require id of:   \n"+t.posX+", "+t.negX+",  \n"+t.posY+", "+t.negY+",  \n"+t.posZ+", "+t.negZ);return o.PARSING_DONE}this._pPauseAndRetrieveDependencies();return o.MORE_TO_PARSE}}catch(h){this._pDieWithError("CubeTexturePaser Error parsing JSON")}return o.PARSING_DONE};t.prototype._validateCubeData=function(){return this._imgDependencyDictionary[t.posX]!=null&&this._imgDependencyDictionary[t.negX]!=null&&this._imgDependencyDictionary[t.posY]!=null&&this._imgDependencyDictionary[t.negY]!=null&&this._imgDependencyDictionary[t.posZ]!=null&&this._imgDependencyDictionary[t.negZ]!=null};t.prototype._getHTMLImageElement=function(e){var t=this._imgDependencyDictionary[e];if(t){return t.assets[0].htmlImageElement}return null};t.posX="posX";t.negX="negX";t.posY="posY";t.negY="negY";t.posZ="posZ";t.negZ="negZ";return t}(o);t.exports=l},{"awayjs-core/lib/net/URLLoaderDataFormat":36,"awayjs-core/lib/net/URLRequest":37,"awayjs-core/lib/parsers/ParserBase":41,"awayjs-core/lib/textures/ImageCubeTexture":47}],41:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/errors/AbstractMethodError");var a=e("awayjs-core/lib/events/AssetEvent");var o=e("awayjs-core/lib/events/EventDispatcher");var n=e("awayjs-core/lib/events/ParserEvent");var l=e("awayjs-core/lib/events/TimerEvent");var h=e("awayjs-core/lib/parsers/ParserUtils");var p=e("awayjs-core/lib/parsers/ResourceDependency");var u=e("awayjs-core/lib/utils/TextureUtils");var c=e("awayjs-core/lib/utils/Timer");var d=e("awayjs-core/lib/utils/getTimer");var f=function(e){s(t,e);function t(t){var r=this;e.call(this);this._materialMode=0;this._dataFormat=t;this._dependencies=new Array;this._pOnIntervalDelegate=function(e){return r._pOnInterval(e)}}t.supportsType=function(e){throw new i};Object.defineProperty(t.prototype,"content",{get:function(){return this._pContent},enumerable:true,configurable:true});t.prototype.isBitmapDataValid=function(e){var t=u.isBitmapDataValid(e);if(!t){console.log(">> Bitmap loaded is not having power of 2 dimensions or is higher than 2048")}return t};Object.defineProperty(t.prototype,"parsingFailure",{get:function(){return this._parsingFailure},set:function(e){this._parsingFailure=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"parsingPaused",{get:function(){return this._parsingPaused},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"parsingComplete",{get:function(){return this._parsingComplete},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"materialMode",{get:function(){return this._materialMode},set:function(e){this._materialMode=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"dataFormat",{get:function(){return this._dataFormat},enumerable:true,configurable:true});t.prototype.parseAsync=function(e,t){if(t===void 0){t=30}this._data=e;this._pStartParsing(t)};Object.defineProperty(t.prototype,"dependencies",{get:function(){return this._dependencies},enumerable:true,configurable:true});t.prototype._iResolveDependency=function(e){throw new i};t.prototype._iResolveDependencyFailure=function(e){throw new i};t.prototype._iResolveDependencyName=function(e,t){return t.name};t.prototype._iResumeParsingAfterDependencies=function(){this._parsingPaused=false;if(this._timer)this._timer.start()};t.prototype._pFinalizeAsset=function(e,t){if(t===void 0){t=null}var r;var s;if(t!=null)e.name=t;if(!e.name)e.name=e.assetType;this.dispatchEvent(new a(a.ASSET_COMPLETE,e))};t.prototype._pProceedParsing=function(){throw new i};t.prototype._pDieWithError=function(e){if(e===void 0){e="Unknown parsing error"}if(this._timer){this._timer.removeEventListener(l.TIMER,this._pOnIntervalDelegate);this._timer.stop();this._timer=null}this.dispatchEvent(new n(n.PARSE_ERROR,e))};t.prototype._pAddDependency=function(e,t,r,s,i){if(r===void 0){r=false}if(s===void 0){s=null}if(i===void 0){i=false}var a=new p(e,t,s,null,this,r,i);this._dependencies.push(a);return a};t.prototype._pPauseAndRetrieveDependencies=function(){if(this._timer)this._timer.stop();this._parsingPaused=true;this.dispatchEvent(new n(n.READY_FOR_DEPENDENCIES))};t.prototype._pHasTime=function(){return d()-this._lastFrameTime<this._frameLimit};t.prototype._pOnInterval=function(e){if(e===void 0){e=null}this._lastFrameTime=d();if(this._pProceedParsing()&&!this._parsingFailure)this._pFinishParsing()};t.prototype._pStartParsing=function(e){this._frameLimit=e;this._timer=new c(this._frameLimit,0);this._timer.addEventListener(l.TIMER,this._pOnIntervalDelegate);this._timer.start()};t.prototype._pFinishParsing=function(){if(this._timer){this._timer.removeEventListener(l.TIMER,this._pOnIntervalDelegate);this._timer.stop()}this._timer=null;this._parsingComplete=true;this.dispatchEvent(new n(n.PARSE_COMPLETE))};t.prototype._pGetTextData=function(){return h.toString(this._data)};t.prototype._pGetByteData=function(){return h.toByteArray(this._data)};t.PARSING_DONE=true;t.MORE_TO_PARSE=false;return t}(o);t.exports=f},{"awayjs-core/lib/errors/AbstractMethodError":4,"awayjs-core/lib/events/AssetEvent":7,"awayjs-core/lib/events/EventDispatcher":9,"awayjs-core/lib/events/ParserEvent":13,"awayjs-core/lib/events/TimerEvent":15,"awayjs-core/lib/parsers/ParserUtils":42,"awayjs-core/lib/parsers/ResourceDependency":43,"awayjs-core/lib/utils/TextureUtils":58,"awayjs-core/lib/utils/Timer":59,"awayjs-core/lib/utils/getTimer":60}],42:[function(e,t,r){var s=e("awayjs-core/lib/utils/ByteArray");var i=function(){function e(){}e.arrayBufferToImage=function(e){var t="";var r=new Uint8Array(e);var s=r.byteLength;for(var i=0;i<s;i++)t+=String.fromCharCode(r[i]);var a=window.btoa(t);var o="data:image/png;base64,"+a;var n=new Image;n.src=o;return n};e.byteArrayToImage=function(e){var t="";var r=new Uint8Array(e.arraybytes);var s=r.byteLength;for(var i=0;i<s;i++)t+=String.fromCharCode(r[i]);var a=window.btoa(t);var o="data:image/png;base64,"+a;var n=new Image;n.src=o;return n};e.blobToImage=function(e){var t=window["URL"]||window["webkitURL"];var r=t.createObjectURL(e);var s=new Image;s.src=r;return s};e.toByteArray=function(e){var t=new s;t.setArrayBuffer(e);return t};e.toString=function(e,t){if(t===void 0){t=0}if(typeof e==="string"){var r=e;if(r["substr"]!=null)return r.substr(0,r.length)}if(e instanceof s){var i=e;i.position=0;return i.readUTFBytes(Math.min(i.getBytesAvailable(),t))}return null};return e}();t.exports=i},{"awayjs-core/lib/utils/ByteArray":54}],43:[function(e,t,r){var s=function(){function e(e,t,r,s,i,a,o){if(a===void 0){a=false}if(o===void 0){o=false}this._id=e;this._request=t;this._data=r;this._parser=s;this._parentParser=i;this._retrieveAsRawData=a;this._suppressAssetEvents=o;this._assets=new Array;this._dependencies=new Array}Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"request",{get:function(){return this._request},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"parser",{get:function(){return this._parser},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"parentParser",{get:function(){return this._parentParser},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"retrieveAsRawData",{get:function(){return this._retrieveAsRawData},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"suppresAssetEvents",{get:function(){return this._suppressAssetEvents},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"assets",{get:function(){return this._assets},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"dependencies",{get:function(){return this._dependencies},enumerable:true,configurable:true});e.prototype._iSetData=function(e){this._data=e};e.prototype._iSetParser=function(e){this._parser=e};e.prototype.resolve=function(){if(this._parentParser)this._parentParser._iResolveDependency(this)};e.prototype.resolveFailure=function(){if(this._parentParser)this._parentParser._iResolveDependencyFailure(this)};e.prototype.resolveName=function(e){if(this._parentParser)return this._parentParser._iResolveDependencyName(this,e);return e.name};return e}();t.exports=s},{}],44:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/net/URLLoaderDataFormat");var a=e("awayjs-core/lib/parsers/ParserBase");var o=e("awayjs-core/lib/parsers/ParserUtils");var n=e("awayjs-core/lib/utils/ByteArray");var l=e("awayjs-core/lib/utils/TextureUtils");var h=e("awayjs-core/lib/textures/ImageTexture");var p=function(e){s(t,e);function t(){e.call(this,i.BLOB)}t.supportsType=function(e){e=e.toLowerCase();return e=="jpg"||e=="jpeg"||e=="png"||e=="gif"};t.supportsData=function(e){if(e instanceof HTMLImageElement)return true;if(!(e instanceof n))return false;var t=e;t.position=0;if(t.readUnsignedShort()==65496)return true;t.position=0;if(t.readShort()==16973)return true;t.position=1;if(t.readUTFBytes(3)=="PNG")return true;t.position=0;if(t.readUTFBytes(3)=="GIF"&&t.readShort()==14393&&t.readByte()==97)return true;t.position=0;if(t.readUTFBytes(3)=="ATF")return true;return false};t.prototype._pProceedParsing=function(){var e=this;var t;var r=false;if(this._loadingImage){return a.MORE_TO_PARSE}else if(this._htmlImageElement){if(l.isHTMLImageElementValid(this._htmlImageElement)){t=new h(this._htmlImageElement);this._pFinalizeAsset(t,this._iFileName)}}else if(this.data instanceof HTMLImageElement){if(l.isHTMLImageElementValid(this.data)){t=new h(this.data);this._pFinalizeAsset(t,this._iFileName)}else{r=true}}else if(this.data instanceof n){var s=this.data;s.position=0;var i=o.byteArrayToImage(this.data);if(l.isHTMLImageElementValid(i)){t=new h(i);this._pFinalizeAsset(t,this._iFileName)}else{r=true}}else if(this.data instanceof ArrayBuffer){this._htmlImageElement=o.arrayBufferToImage(this.data);t=new h(this._htmlImageElement);this._pFinalizeAsset(t,this._iFileName)}else if(this.data instanceof Blob){this._htmlImageElement=o.blobToImage(this.data);this._htmlImageElement.onload=function(t){return e.onLoadComplete(t)};this._loadingImage=true;return a.MORE_TO_PARSE}if(r==true){}this._pContent=t;return a.PARSING_DONE};t.prototype.onLoadComplete=function(e){this._loadingImage=false};return t}(a);t.exports=p},{"awayjs-core/lib/net/URLLoaderDataFormat":36,"awayjs-core/lib/parsers/ParserBase":41,"awayjs-core/lib/parsers/ParserUtils":42,"awayjs-core/lib/textures/ImageTexture":48,"awayjs-core/lib/utils/ByteArray":54,"awayjs-core/lib/utils/TextureUtils":58}],45:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/errors/Error");var a=e("awayjs-core/lib/textures/Texture2DBase");var o=e("awayjs-core/lib/utils/TextureUtils");var n=function(e){s(t,e);function t(t,r){if(r===void 0){r=false}e.call(this,r);this.bitmapData=t}Object.defineProperty(t.prototype,"bitmapData",{get:function(){return this._bitmapData},set:function(e){if(this._bitmapData==e)return;if(!o.isBitmapDataValid(e))throw new i("Invalid bitmapData: Width and height must be power of 2 and cannot exceed 2048");this._bitmapData=e;this.invalidateContent();this._pSetSize(e.width,e.height)},enumerable:true,configurable:true});t.prototype.dispose=function(){e.prototype.dispose.call(this);this._bitmapData.dispose();this._bitmapData=null};t.prototype._iGetTextureData=function(){return this._bitmapData};return t}(a);t.exports=n},{"awayjs-core/lib/errors/Error":6,"awayjs-core/lib/textures/Texture2DBase":51,"awayjs-core/lib/utils/TextureUtils":58}],46:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/errors/AbstractMethodError");var a=e("awayjs-core/lib/textures/MipmapGenerator");var o=e("awayjs-core/lib/textures/TextureProxyBase");var n=function(e){s(t,e);function t(t){if(t===void 0){t=false}e.call(this,t);this._mipmapDataArray=new Array(6);this._mipmapDataDirtyArray=new Array(6)}t.prototype._pSetSize=function(e){if(this._pSize!=e)this.invalidateSize();for(var t=0;t<6;t++)this._mipmapDataDirtyArray[t]=true;this._pSize=e};t.prototype.dispose=function(){e.prototype.dispose.call(this);for(var t=0;t<6;t++){var r=this._mipmapDataArray[t];var s=r.length;for(var i=0;i<s;i++)a.freeMipMapHolder(r[i])}};t.prototype.invalidateContent=function(){e.prototype.invalidateContent.call(this);for(var t=0;t<6;t++)this._mipmapDataDirtyArray[t]=true};t.prototype._iGetMipmapData=function(e){if(this._mipmapDataDirtyArray[e]){this._mipmapDataDirtyArray[e]=false;var t=this._mipmapDataArray[e]||(this._mipmapDataArray[e]=new Array);a.generateMipMaps(this._iGetTextureData(e),t,true)}return this._mipmapDataArray[e]};t.prototype._iGetTextureData=function(e){throw new i};return t}(o);t.exports=n},{"awayjs-core/lib/errors/AbstractMethodError":4,"awayjs-core/lib/textures/MipmapGenerator":49,"awayjs-core/lib/textures/TextureProxyBase":52}],47:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/errors/Error");
var a=e("awayjs-core/lib/textures/CubeTextureBase");var o=e("awayjs-core/lib/utils/TextureUtils");var n=function(e){s(t,e);function t(t,r,s,i,a,o,n){if(n===void 0){n=false}e.call(this,n);this._htmlImageElements=new Array(6);this._testSize(this._htmlImageElements[0]=t);this._testSize(this._htmlImageElements[1]=r);this._testSize(this._htmlImageElements[2]=s);this._testSize(this._htmlImageElements[3]=i);this._testSize(this._htmlImageElements[4]=a);this._testSize(this._htmlImageElements[5]=o);this.invalidateContent();this._pSetSize(t.width)}Object.defineProperty(t.prototype,"positiveX",{get:function(){return this._htmlImageElements[0]},set:function(e){this._testSize(e);this.invalidateContent();this._pSetSize(e.width);this._htmlImageElements[0]=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"negativeX",{get:function(){return this._htmlImageElements[1]},set:function(e){this._testSize(e);this.invalidateContent();this._pSetSize(e.width);this._htmlImageElements[1]=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"positiveY",{get:function(){return this._htmlImageElements[2]},set:function(e){this._testSize(e);this.invalidateContent();this._pSetSize(e.width);this._htmlImageElements[2]=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"negativeY",{get:function(){return this._htmlImageElements[3]},set:function(e){this._testSize(e);this.invalidateContent();this._pSetSize(e.width);this._htmlImageElements[3]=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"positiveZ",{get:function(){return this._htmlImageElements[4]},set:function(e){this._testSize(e);this.invalidateContent();this._pSetSize(e.width);this._htmlImageElements[4]=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"negativeZ",{get:function(){return this._htmlImageElements[5]},set:function(e){this._testSize(e);this.invalidateContent();this._pSetSize(e.width);this._htmlImageElements[5]=e},enumerable:true,configurable:true});t.prototype._testSize=function(e){if(e.width!=e.height)throw new i("BitmapData should have equal width and height!");if(!o.isHTMLImageElementValid(e))throw new i("Invalid bitmapData: Width and height must be power of 2 and cannot exceed 2048")};t.prototype._iGetTextureData=function(e){return this._htmlImageElements[e]};return t}(a);t.exports=n},{"awayjs-core/lib/errors/Error":6,"awayjs-core/lib/textures/CubeTextureBase":46,"awayjs-core/lib/utils/TextureUtils":58}],48:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/errors/Error");var a=e("awayjs-core/lib/textures/Texture2DBase");var o=e("awayjs-core/lib/utils/TextureUtils");var n=function(e){s(t,e);function t(t,r){if(r===void 0){r=false}e.call(this,r);this.htmlImageElement=t}Object.defineProperty(t.prototype,"htmlImageElement",{get:function(){return this._htmlImageElement},set:function(e){if(this._htmlImageElement==e)return;if(!o.isHTMLImageElementValid(e))throw new i("Invalid bitmapData: Width and height must be power of 2 and cannot exceed 2048");this._htmlImageElement=e;this.invalidateContent();this._pSetSize(e.width,e.height)},enumerable:true,configurable:true});t.prototype._iGetTextureData=function(){return this._htmlImageElement};return t}(a);t.exports=n},{"awayjs-core/lib/errors/Error":6,"awayjs-core/lib/textures/Texture2DBase":51,"awayjs-core/lib/utils/TextureUtils":58}],49:[function(e,t,r){var s=e("awayjs-core/lib/base/BitmapData");var i=e("awayjs-core/lib/geom/Matrix");var a=e("awayjs-core/lib/geom/Rectangle");var o=function(){function e(){}e.generateMipMaps=function(t,r,s){if(s===void 0){s=false}var i=t.width;var a=t.height;var o=0;var n;e._rect.width=i;e._rect.height=a;while(i>=1&&a>=1){n=r[o]=e._getMipmapHolder(r[o],i,a);if(s)n.fillRect(e._rect,0);e._matrix.a=e._rect.width/t.width;e._matrix.d=e._rect.height/t.height;n.draw(t,e._matrix);i>>=1;a>>=1;e._rect.width=i>1?i:1;e._rect.height=a>1?a:1;o++}};e._getMipmapHolder=function(t,r,i){if(t){if(t.width==r&&t.height==i)return t;e.freeMipMapHolder(t)}if(!e._mipMaps[r]){e._mipMaps[r]=[];e._mipMapUses[r]=[]}if(!e._mipMaps[r][i]){t=e._mipMaps[r][i]=new s(r,i,true);e._mipMapUses[r][i]=1}else{e._mipMapUses[r][i]=e._mipMapUses[r][i]+1;t=e._mipMaps[r][i]}return t};e.freeMipMapHolder=function(t){var r=t.width;var s=t.height;if(--e._mipMapUses[r][s]==0){e._mipMaps[r][s].dispose();e._mipMaps[r][s]=null}};e._mipMaps=[];e._mipMapUses=[];e._matrix=new i;e._rect=new a;return e}();t.exports=o},{"awayjs-core/lib/base/BitmapData":2,"awayjs-core/lib/geom/Matrix":16,"awayjs-core/lib/geom/Rectangle":18}],50:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/base/BitmapData");var a=e("awayjs-core/lib/base/BitmapDataChannel");var o=e("awayjs-core/lib/geom/Point");var n=e("awayjs-core/lib/textures/BitmapTexture");var l=function(e){s(t,e);function t(t,r,s){if(t===void 0){t=null}if(r===void 0){r=null}if(s===void 0){s=true}var a=t?t:r;a=a?new i(a.width,a.height,false,16777215):new i(1,1,false,16777215);e.call(this,a,s);this.specularMap=t;this.glossMap=r}Object.defineProperty(t.prototype,"specularMap",{get:function(){return this._specularMap},set:function(e){this._specularMap=e;this.invalidateContent();this._testSize()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"glossMap",{get:function(){return this._glossMap},set:function(e){this._glossMap=e;this.invalidateContent();this._testSize()},enumerable:true,configurable:true});t.prototype._testSize=function(){var e,t;if(this._specularMap){e=this._specularMap.width;t=this._specularMap.height}else if(this._glossMap){e=this._glossMap.width;t=this._glossMap.height}else{e=1;t=1}if(e!=this._bitmapData.width&&t!=this._bitmapData.height){var r=this._bitmapData;this.bitmapData=new i(this._specularMap.width,this._specularMap.height,false,16777215);r.dispose()}};t.prototype._iGetTextureData=function(){var e=this._specularMap.rect;var t=new o;this._bitmapData.fillRect(e,16777215);if(this._glossMap)this._bitmapData.copyChannel(this._glossMap,e,t,a.GREEN,a.GREEN);if(this._specularMap)this._bitmapData.copyChannel(this._specularMap,e,t,a.RED,a.RED);return this._bitmapData};return t}(n);t.exports=l},{"awayjs-core/lib/base/BitmapData":2,"awayjs-core/lib/base/BitmapDataChannel":3,"awayjs-core/lib/geom/Point":17,"awayjs-core/lib/textures/BitmapTexture":45}],51:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/errors/AbstractMethodError");var a=e("awayjs-core/lib/textures/MipmapGenerator");var o=e("awayjs-core/lib/textures/TextureProxyBase");var n=function(e){s(t,e);function t(t){if(t===void 0){t=false}e.call(this,t)}Object.defineProperty(t.prototype,"width",{get:function(){return this._pWidth},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"height",{get:function(){return this._pHeight},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"size",{get:function(){return this._pWidth},enumerable:true,configurable:true});t.prototype.dispose=function(){e.prototype.dispose.call(this);if(this._mipmapData){var t=this._mipmapData.length;for(var r=0;r<t;r++)a.freeMipMapHolder(this._mipmapData[r])}};t.prototype.invalidateContent=function(){e.prototype.invalidateContent.call(this);this._mipmapDataDirty=true};t.prototype._pSetSize=function(e,t){if(this._pWidth!=e||this._pHeight!=t)this.invalidateSize();this._mipmapDataDirty=true;this._pWidth=e;this._pHeight=t};t.prototype._iGetMipmapData=function(){if(this._mipmapDataDirty){this._mipmapDataDirty=false;if(!this._mipmapData)this._mipmapData=new Array;a.generateMipMaps(this._iGetTextureData(),this._mipmapData,true)}return this._mipmapData};t.prototype._iGetTextureData=function(){throw new i};return t}(o);t.exports=n},{"awayjs-core/lib/errors/AbstractMethodError":4,"awayjs-core/lib/textures/MipmapGenerator":49,"awayjs-core/lib/textures/TextureProxyBase":52}],52:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/library/AssetType");var a=e("awayjs-core/lib/library/NamedAssetBase");var o=function(e){s(t,e);function t(t){if(t===void 0){t=false}e.call(this);this._pFormat="bgra";this._textureData=new Array;this._generateMipmaps=this._hasMipmaps=t}Object.defineProperty(t.prototype,"size",{get:function(){return this._pSize},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"hasMipmaps",{get:function(){return this._hasMipmaps},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"format",{get:function(){return this._pFormat},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"generateMipmaps",{get:function(){return this._generateMipmaps},set:function(e){if(this._generateMipmaps==e)return;this._generateMipmaps=this._hasMipmaps=e;this.invalidateContent()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"assetType",{get:function(){return i.TEXTURE},enumerable:true,configurable:true});t.prototype.invalidateContent=function(){var e=this._textureData.length;for(var t=0;t<e;t++)this._textureData[t].invalidate()};t.prototype.invalidateSize=function(){while(this._textureData.length)this._textureData[0].dispose()};t.prototype.dispose=function(){while(this._textureData.length)this._textureData[0].dispose()};t.prototype._iAddTextureData=function(e){this._textureData.push(e);return e};t.prototype._iRemoveTextureData=function(e){this._textureData.splice(this._textureData.indexOf(e),1);return e};return t}(a);t.exports=o},{"awayjs-core/lib/library/AssetType":27,"awayjs-core/lib/library/NamedAssetBase":33}],53:[function(e,t,r){var s=function(){function e(){}e.A=65;e.ALTERNATE=18;e.AUDIO=16777239;e.B=66;e.BACK=16777238;e.BACKQUOTE=192;e.BACKSLASH=220;e.BACKSPACE=8;e.BLUE=16777219;e.C=67;e.CAPS_LOCK=20;e.CHANNEL_DOWN=16777221;e.CHANNEL_UP=16777221;e.COMMA=188;e.COMMAND=15;e.CONTROL=17;e.D=68;e.DELETE=46;e.DOWN=40;e.DVR=16777241;e.E=69;e.END=35;e.ENTER=13;e.EQUAL=187;e.ESCAPE=27;e.EXIT=16777237;e.F=70;e.F1=112;e.F10=121;e.F11=122;e.F12=123;e.F13=124;e.F14=125;e.F15=126;e.F2=113;e.F3=114;e.F4=115;e.F5=116;e.F6=117;e.F7=118;e.F8=119;e.F9=120;e.FAST_FORWARD=16777226;e.G=71;e.GREEN=16777217;e.GUIDE=16777236;e.H=72;e.HELP=16777245;e.HOME=36;e.I=73;e.INFO=16777235;e.INPUT=16777243;e.INSERT=45;e.J=74;e.K=75;e.KEYNAME_BEGIN="Begin";e.KEYNAME_BREAK="Break";e.KEYNAME_CLEARDISPLAY="ClrDsp";e.KEYNAME_CLEARLINE="ClrLn";e.KEYNAME_DELETE="Delete";e.KEYNAME_DELETECHAR="DelChr";e.KEYNAME_DELETELINE="DelLn";e.KEYNAME_DOWNARROW="Down";e.KEYNAME_END="End";e.KEYNAME_EXECUTE="Exec";e.KEYNAME_F1="F1";e.KEYNAME_F10="F10";e.KEYNAME_F11="F11";e.KEYNAME_F12="F12";e.KEYNAME_F13="F13";e.KEYNAME_F14="F14";e.KEYNAME_F15="F15";e.KEYNAME_F16="F16";e.KEYNAME_F17="F17";e.KEYNAME_F18="F18";e.KEYNAME_F19="F19";e.KEYNAME_F2="F2";e.KEYNAME_F20="F20";e.KEYNAME_F21="F21";e.KEYNAME_F22="F22";e.KEYNAME_F23="F23";e.KEYNAME_F24="F24";e.KEYNAME_F25="F25";e.KEYNAME_F26="F26";e.KEYNAME_F27="F27";e.KEYNAME_F28="F28";e.KEYNAME_F29="F29";e.KEYNAME_F3="F3";e.KEYNAME_F30="F30";e.KEYNAME_F31="F31";e.KEYNAME_F32="F32";e.KEYNAME_F33="F33";e.KEYNAME_F34="F34";e.KEYNAME_F35="F35";e.KEYNAME_F4="F4";e.KEYNAME_F5="F5";e.KEYNAME_F6="F6";e.KEYNAME_F7="F7";e.KEYNAME_F8="F8";e.KEYNAME_F9="F9";e.KEYNAME_FIND="Find";e.KEYNAME_HELP="Help";e.KEYNAME_HOME="Home";e.KEYNAME_INSERT="Insert";e.KEYNAME_INSERTCHAR="InsChr";e.KEYNAME_INSERTLINE="LnsLn";e.KEYNAME_LEFTARROW="Left";e.KEYNAME_MENU="Menu";e.KEYNAME_MODESWITCH="ModeSw";e.KEYNAME_NEXT="Next";e.KEYNAME_PAGEDOWN="PgDn";e.KEYNAME_PAGEUP="PgUp";e.KEYNAME_PAUSE="Pause";e.KEYNAME_PREV="Prev";e.KEYNAME_PRINT="Print";e.KEYNAME_PRINTSCREEN="PrntScrn";e.KEYNAME_REDO="Redo";e.KEYNAME_RESET="Reset";e.KEYNAME_RIGHTARROW="Right";e.KEYNAME_SCROLLLOCK="ScrlLck";e.KEYNAME_SELECT="Select";e.KEYNAME_STOP="Stop";e.KEYNAME_SYSREQ="SysReq";e.KEYNAME_SYSTEM="Sys";e.KEYNAME_UNDO="Undo";e.KEYNAME_UPARROW="Up";e.KEYNAME_USER="User";e.L=76;e.LAST=16777233;e.LEFT=37;e.LEFTBRACKET=219;e.LIVE=16777232;e.M=77;e.MASTER_SHELL=16777246;e.MENU=16777234;e.MINUS=189;e.N=78;e.NEXT=16777230;e.NUMBER_0=48;e.NUMBER_1=49;e.NUMBER_2=50;e.NUMBER_3=51;e.NUMBER_4=52;e.NUMBER_5=53;e.NUMBER_6=54;e.NUMBER_7=55;e.NUMBER_8=56;e.NUMBER_9=57;e.NUMPAD=21;e.NUMPAD_0=96;e.NUMPAD_1=97;e.NUMPAD_2=98;e.NUMPAD_3=99;e.NUMPAD_4=100;e.NUMPAD_5=101;e.NUMPAD_6=102;e.NUMPAD_7=103;e.NUMPAD_8=104;e.NUMPAD_9=105;e.NUMPAD_ADD=107;e.NUMPAD_DECIMAL=110;e.NUMPAD_DIVIDE=111;e.NUMPAD_ENTER=108;e.NUMPAD_MULTIPLY=106;e.NUMPAD_SUBTRACT=109;e.O=79;e.P=80;e.PAGE_DOWN=34;e.PAGE_UP=33;e.PAUSE=16777224;e.PERIOD=190;e.PLAY=16777223;e.PREVIOUS=16777231;e.Q=81;e.QUOTE=222;e.R=82;e.RECORD=16777222;e.RED=16777216;e.REWIND=16777227;e.RIGHT=39;e.RIGHTBRACKET=221;e.S=83;e.SEARCH=16777247;e.SEMICOLON=186;e.SETUP=16777244;e.SHIFT=16;e.SKIP_BACKWARD=16777229;e.SKIP_FORWARD=16777228;e.SLASH=191;e.SPACE=32;e.STOP=16777225;e.SUBTITLE=16777240;e.T=84;e.TAB=9;e.U=85;e.UP=38;e.V=86;e.VOD=16777242;e.W=87;e.X=88;e.Y=89;e.YELLOW=16777218;e.Z=90;return e}();t.exports=s},{}],54:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/utils/ByteArrayBase");var a=function(e){s(t,e);function t(){e.call(this);this.maxlength=0;this._mode="Typed array";this.maxlength=4;this.arraybytes=new ArrayBuffer(this.maxlength);this.unalignedarraybytestemp=new ArrayBuffer(16)}t.prototype.ensureWriteableSpace=function(e){this.ensureSpace(e+this.position)};t.prototype.setArrayBuffer=function(e){this.ensureSpace(e.byteLength);this.length=e.byteLength;var t=new Int8Array(e);var r=new Int8Array(this.arraybytes,0,this.length);r.set(t);this.position=0};t.prototype.getBytesAvailable=function(){return this.length-this.position};t.prototype.ensureSpace=function(e){if(e>this.maxlength){var t=e+255&~255;var r=new ArrayBuffer(t);var s=new Uint8Array(this.arraybytes,0,this.length);var i=new Uint8Array(r,0,this.length);i.set(s);this.arraybytes=r;this.maxlength=t}};t.prototype.writeByte=function(e){this.ensureWriteableSpace(1);var t=new Int8Array(this.arraybytes);t[this.position++]=~~e;if(this.position>this.length){this.length=this.position}};t.prototype.readByte=function(){if(this.position>=this.length){throw"ByteArray out of bounds read. Positon="+this.position+", Length="+this.length}var e=new Int8Array(this.arraybytes);return e[this.position++]};t.prototype.readBytes=function(e,t,r){if(t===void 0){t=0}if(r===void 0){r=0}if(r==null){r=e.length}e.ensureWriteableSpace(t+r);var s=new Int8Array(e.arraybytes);var i=new Int8Array(this.arraybytes);s.set(i.subarray(this.position,this.position+r),t);this.position+=r;if(r+t>e.length){e.length+=r+t-e.length}};t.prototype.writeUnsignedByte=function(e){this.ensureWriteableSpace(1);var t=new Uint8Array(this.arraybytes);t[this.position++]=~~e&255;if(this.position>this.length){this.length=this.position}};t.prototype.readUnsignedByte=function(){if(this.position>=this.length){throw"ByteArray out of bounds read. Positon="+this.position+", Length="+this.length}var e=new Uint8Array(this.arraybytes);return e[this.position++]};t.prototype.writeUnsignedShort=function(e){this.ensureWriteableSpace(2);if((this.position&1)==0){var t=new Uint16Array(this.arraybytes);t[this.position>>1]=~~e&65535}else{var t=new Uint16Array(this.unalignedarraybytestemp,0,1);t[0]=~~e&65535;var r=new Uint8Array(this.arraybytes,this.position,2);var s=new Uint8Array(this.unalignedarraybytestemp,0,2);r.set(s)}this.position+=2;if(this.position>this.length){this.length=this.position}};t.prototype.readUTFBytes=function(e){var t="";var r=this.position+e;var s=new DataView(this.arraybytes);while(this.position<r){var i=s.getUint8(this.position++);if(i<128){if(i==0)break;t+=String.fromCharCode(i)}else if(i<224){t+=String.fromCharCode((i&63)<<6|s.getUint8(this.position++)&127)}else if(i<240){var a=s.getUint8(this.position++);t+=String.fromCharCode((i&31)<<12|(a&127)<<6|s.getUint8(this.position++)&127)}else{var a=s.getUint8(this.position++);var o=s.getUint8(this.position++);t+=String.fromCharCode((i&15)<<18|(a&127)<<12|o<<6&127|s.getUint8(this.position++)&127)}}return t};t.prototype.readInt=function(){var e=new DataView(this.arraybytes);var t=e.getInt32(this.position,true);this.position+=4;return t};t.prototype.readShort=function(){var e=new DataView(this.arraybytes);var t=e.getInt16(this.position,true);this.position+=2;return t};t.prototype.readDouble=function(){var e=new DataView(this.arraybytes);var t=e.getFloat64(this.position,true);this.position+=8;return t};t.prototype.readUnsignedShort=function(){if(this.position>this.length+2){throw"ByteArray out of bounds read. Position="+this.position+", Length="+this.length}if((this.position&1)==0){var e=new Uint16Array(this.arraybytes);var t=this.position>>1;this.position+=2;return e[t]}else{var e=new Uint16Array(this.unalignedarraybytestemp,0,1);var r=new Uint8Array(this.arraybytes,this.position,2);var s=new Uint8Array(this.unalignedarraybytestemp,0,2);s.set(r);this.position+=2;return e[0]}};t.prototype.writeUnsignedInt=function(e){this.ensureWriteableSpace(4);if((this.position&3)==0){var t=new Uint32Array(this.arraybytes);t[this.position>>2]=~~e&4294967295}else{var t=new Uint32Array(this.unalignedarraybytestemp,0,1);t[0]=~~e&4294967295;var r=new Uint8Array(this.arraybytes,this.position,4);var s=new Uint8Array(this.unalignedarraybytestemp,0,4);r.set(s)}this.position+=4;if(this.position>this.length){this.length=this.position}};t.prototype.readUnsignedInt=function(){if(this.position>this.length+4){throw"ByteArray out of bounds read. Position="+this.position+", Length="+this.length}if((this.position&3)==0){var e=new Uint32Array(this.arraybytes);var t=this.position>>2;this.position+=4;return e[t]}else{var e=new Uint32Array(this.unalignedarraybytestemp,0,1);var r=new Uint8Array(this.arraybytes,this.position,4);var s=new Uint8Array(this.unalignedarraybytestemp,0,4);s.set(r);this.position+=4;return e[0]}};t.prototype.writeFloat=function(e){this.ensureWriteableSpace(4);if((this.position&3)==0){var t=new Float32Array(this.arraybytes);t[this.position>>2]=e}else{var t=new Float32Array(this.unalignedarraybytestemp,0,1);t[0]=e;var r=new Uint8Array(this.arraybytes,this.position,4);var s=new Uint8Array(this.unalignedarraybytestemp,0,4);r.set(s)}this.position+=4;if(this.position>this.length){this.length=this.position}};t.prototype.readFloat=function(){if(this.position>this.length+4){throw"ByteArray out of bounds read. Positon="+this.position+", Length="+this.length}if((this.position&3)==0){var e=new Float32Array(this.arraybytes);var t=this.position>>2;this.position+=4;return e[t]}else{var e=new Float32Array(this.unalignedarraybytestemp,0,1);var r=new Uint8Array(this.arraybytes,this.position,4);var s=new Uint8Array(this.unalignedarraybytestemp,0,4);s.set(r);this.position+=4;return e[0]}};return t}(i);t.exports=a},{"awayjs-core/lib/utils/ByteArrayBase":55}],55:[function(e,t,r){var s=e("awayjs-core/lib/errors/AbstractMethodError");var i=function(){function e(){this.position=0;this.length=0;this._mode=""}e.prototype.writeByte=function(e){throw"Virtual method"};e.prototype.readByte=function(){throw"Virtual method"};e.prototype.writeUnsignedByte=function(e){throw"Virtual method"};e.prototype.readUnsignedByte=function(){throw"Virtual method"};e.prototype.writeUnsignedShort=function(e){throw"Virtual method"};e.prototype.readUnsignedShort=function(){throw"Virtual method"};e.prototype.writeUnsignedInt=function(e){throw"Virtual method"};e.prototype.readUnsignedInt=function(){throw"Virtual method"};e.prototype.writeFloat=function(e){throw"Virtual method"};e.prototype.toFloatBits=function(e){throw"Virtual method"};e.prototype.readFloat=function(e){throw"Virtual method"};e.prototype.fromFloatBits=function(e){throw"Virtual method"};e.prototype.getBytesAvailable=function(){throw new s("ByteArrayBase, getBytesAvailable() not implemented ")};e.prototype.toString=function(){return"[ByteArray] ( "+this._mode+" ) position="+this.position+" length="+this.length};e.prototype.compareEqual=function(e,t){if(t==undefined||t>this.length-this.position)t=this.length-this.position;if(t>e.length-e.position)t=e.length-e.position;var r=t;var s=true;while(s&&t>=4){t-=4;if(this.readUnsignedInt()!=e.readUnsignedInt())s=false}while(s&&t>=1){t--;if(this.readUnsignedByte()!=e.readUnsignedByte())s=false}var i;this.position-=i-t;e.position-=i-t;return s};e.prototype.writeBase64String=function(e){for(var t=0;t<e.length;t++){var r=e.charAt(t)}};e.prototype.dumpToConsole=function(){var e=this.position;this.position=0;var t=8;function r(e,t){var r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];var s="";for(var i=0;i<t;i++){s=r[e>>(i<<2)&15]+s}return s}for(var s=0;s<this.length;s+=t){var i=r(s,4)+":";for(var a=0;a<t&&s+a<this.length;a++){i+=" "+r(this.readUnsignedByte(),2)}console.log(i)}this.position=e};e.prototype.readBase64String=function(t){if(t==undefined||t>this.length-this.position)t=this.length-this.position;if(!(t>0))return"";return e.internalGetBase64String(t,this.readUnsignedByte,this)};e.internalGetBase64String=function(t,r,s){var i="";var a,o,n,l,h,p,u;var c=e.Base64Key;while(t>=3){a=r.apply(s);o=r.apply(s);n=r.apply(s);l=a>>2;h=(a&3)<<4|o>>4;p=(o&15)<<2|n>>6;u=n&63;i+=c.charAt(l)+c.charAt(h)+c.charAt(p)+c.charAt(u);t-=3}if(t==2){a=r.apply(s);o=r.apply(s);l=a>>2;h=(a&3)<<4|o>>4;p=(o&15)<<2;i+=c.charAt(l)+c.charAt(h)+c.charAt(p)+"="}else if(t==1){a=r.apply(s);l=a>>2;h=(a&3)<<4;i+=c.charAt(l)+c.charAt(h)+"=="}return i};e.Base64Key="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";return e}();t.exports=i},{"awayjs-core/lib/errors/AbstractMethodError":4}],56:[function(e,t,r){var s=function(){function e(){}e.float32ColorToARGB=function(e){var t=(e&4278190080)>>>24;var r=(e&16711680)>>>16;var s=(e&65280)>>>8;var i=e&255;var a=[t,r,s,i];return a};e.componentToHex=function(e){var t=e.toString(16);return t.length==1?"0"+t:t};e.RGBToHexString=function(t){return"#"+e.componentToHex(t[1])+e.componentToHex(t[2])+e.componentToHex(t[3])};e.ARGBToHexString=function(t){return"#"+e.componentToHex(t[0])+e.componentToHex(t[1])+e.componentToHex(t[2])+e.componentToHex(t[3])};return e}();t.exports=s},{}],57:[function(e,t,r){var s=e("awayjs-core/lib/utils/getTimer");var i=function(){function e(e,t){var r=this;this._active=false;this._argsArray=new Array;this._getTimer=s;this.setCallback(e,t);this._rafUpdateFunction=function(){if(r._active)r._tick()};this._argsArray.push(this._dt)}e.prototype.setCallback=function(e,t){this._callback=e;this._callbackContext=t};e.prototype.start=function(){this._prevTime=this._getTimer();this._active=true;if(window.requestAnimationFrame){window.requestAnimationFrame(this._rafUpdateFunction)}else{if(window["mozRequestAnimationFrame"])window.requestAnimationFrame=window["mozRequestAnimationFrame"];else if(window["webkitRequestAnimationFrame"])window.requestAnimationFrame=window["webkitRequestAnimationFrame"];else if(window["oRequestAnimationFrame"])window.requestAnimationFrame=window["oRequestAnimationFrame"]}};e.prototype.stop=function(){this._active=false};Object.defineProperty(e.prototype,"active",{get:function(){return this._active},enumerable:true,configurable:true});e.prototype._tick=function(){this._currentTime=this._getTimer();this._dt=this._currentTime-this._prevTime;this._argsArray[0]=this._dt;this._callback.apply(this._callbackContext,this._argsArray);window.requestAnimationFrame(this._rafUpdateFunction);this._prevTime=this._currentTime};return e}();t.exports=i},{"awayjs-core/lib/utils/getTimer":60}],58:[function(e,t,r){var s=function(){function e(){}e.isBitmapDataValid=function(t){if(t==null){return true}return e.isDimensionValid(t.width)&&e.isDimensionValid(t.height)};e.isHTMLImageElementValid=function(t){if(t==null)return true;return e.isDimensionValid(t.width)&&e.isDimensionValid(t.height)};e.isDimensionValid=function(t){return t>=1&&t<=e.MAX_SIZE&&e.isPowerOfTwo(t)};e.isPowerOfTwo=function(e){return e?(e&-e)==e:false};e.getBestPowerOf2=function(t){var r=1;while(r<t)r<<=1;if(r>e.MAX_SIZE)r=e.MAX_SIZE;return r};e.MAX_SIZE=2048;return e}();t.exports=s},{}],59:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/errors/Error");var a=e("awayjs-core/lib/events/EventDispatcher");var o=e("awayjs-core/lib/events/TimerEvent");var n=function(e){s(t,e);function t(t,r){if(r===void 0){r=0}e.call(this);this._repeatCount=0;this._currentCount=0;this._running=false;this._delay=t;this._repeatCount=r;if(isNaN(t)||t<0){throw new i("Delay is negative or not a number")}}Object.defineProperty(t.prototype,"currentCount",{get:function(){return this._currentCount},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"delay",{get:function(){return this._delay},set:function(e){this._delay=e;if(this._running){this.stop();this.start()}},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"repeatCount",{get:function(){return this._repeatCount},set:function(e){this._repeatCount=e},enumerable:true,configurable:true});t.prototype.reset=function(){if(this._running){this.stop()}this._currentCount=0};Object.defineProperty(t.prototype,"running",{get:function(){return this._running},enumerable:true,configurable:true});t.prototype.start=function(){var e=this;this._running=true;clearInterval(this._iid);this._iid=setInterval(function(){return e.tick()},this._delay)};t.prototype.stop=function(){this._running=false;clearInterval(this._iid)};t.prototype.tick=function(){this._currentCount++;if(this._repeatCount>0&&this._currentCount>=this._repeatCount){this.stop();this.dispatchEvent(new o(o.TIMER));this.dispatchEvent(new o(o.TIMER_COMPLETE))}else{this.dispatchEvent(new o(o.TIMER))}};return t}(a);t.exports=n},{"awayjs-core/lib/errors/Error":6,"awayjs-core/lib/events/EventDispatcher":9,"awayjs-core/lib/events/TimerEvent":15}],60:[function(e,t,r){function s(){return Date.now()}t.exports=s},{}],61:[function(e,t,r){var s=function(){function e(){}e.REGISTRATION_POINT="registrationPoint";e.PIVOT_POINT="pivot";return e}();t.exports=s},{}],62:[function(e,t,r){var s=function(){function e(){}e.ADD="add";e.ALPHA="alpha";e.DARKEN="darken";e.DIFFERENCE="difference";e.ERASE="erase";e.HARDLIGHT="hardlight";e.INVERT="invert";e.LAYER="layer";e.LIGHTEN="lighten";e.MULTIPLY="multiply";e.NORMAL="normal";e.OVERLAY="overlay";e.SCREEN="screen";e.SHADER="shader";e.SUBTRACT="subtract";return e}();t.exports=s},{}],63:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/bounds/AxisAlignedBoundingBox");var a=e("awayjs-core/lib/geom/MathConsts");var o=e("awayjs-core/lib/geom/Matrix3D");var n=e("awayjs-core/lib/geom/Matrix3DUtils");var l=e("awayjs-core/lib/geom/Point");var h=e("awayjs-core/lib/geom/Vector3D");var p=e("awayjs-core/lib/library/NamedAssetBase");var u=e("awayjs-core/lib/errors/AbstractMethodError");var c=e("awayjs-display/lib/base/AlignmentMode");var d=e("awayjs-display/lib/base/OrientationMode");var f=e("awayjs-display/lib/base/Transform");var y=e("awayjs-display/lib/pick/PickingCollisionVO");var m=e("awayjs-display/lib/events/DisplayObjectEvent");var _=e("awayjs-display/lib/events/SceneEvent");var b=function(e){s(t,e);function t(){e.call(this);this._pSceneTransform=new o;this._pSceneTransformDirty=true;this._matrix3D=new o;this._matrix3DDirty=true;this._inverseSceneTransform=new o;this._inverseSceneTransformDirty=true;this._scenePosition=new h;this._scenePositionDirty=true;this._explicitVisibility=true;this._pImplicitVisibility=true;this._explicitMouseEnabled=true;this._pImplicitMouseEnabled=true;this._positionDirty=true;this._rotationDirty=true;this._scaleDirty=true;this._rotationX=0;this._rotationY=0;this._rotationZ=0;this._eulers=new h;this._flipY=new o;this._zOffset=0;this._pScaleX=1;this._pScaleY=1;this._pScaleZ=1;this._x=0;this._y=0;this._z=0;this._pivot=new h;this._orientationMatrix=new o;this._pivotZero=true;this._pivotDirty=true;this._pos=new h;this._rot=new h;this._sca=new h;this._pIgnoreTransform=false;this._pBoundsInvalid=true;this._worldBoundsInvalid=true;this._pRenderables=new Array;this.alignmentMode=c.REGISTRATION_POINT;this.castsShadows=true;this.orientationMode=d.DEFAULT;this._transformComponents=new Array(3);this._transformComponents[0]=this._pos;this._transformComponents[1]=this._rot;this._transformComponents[2]=this._sca;this._transform=new f(this);this._matrix3D.identity();this._flipY.appendScale(1,-1,1);this._pBounds=this.pCreateDefaultBoundingVolume();this._worldBounds=this.pCreateDefaultBoundingVolume()}Object.defineProperty(t.prototype,"bounds",{get:function(){if(this._pBoundsInvalid)this.pUpdateBounds();return this._pBounds},set:function(e){if(this._pBounds==e)return;this._pBounds=e;this._worldBounds=e.clone();this.pInvalidateBounds();if(this._boundsVisible)this._partitionNode._iUpdateEntityBounds()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"depth",{get:function(){if(this._pBoundsInvalid)this.pUpdateBounds();return this._depth},set:function(e){if(this._depth==e)return;this._depth==e;this._pScaleZ=e/this.bounds.aabb.depth;this.invalidateScale()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"eulers",{get:function(){this._eulers.x=this._rotationX*a.RADIANS_TO_DEGREES;this._eulers.y=this._rotationY*a.RADIANS_TO_DEGREES;this._eulers.z=this._rotationZ*a.RADIANS_TO_DEGREES;return this._eulers},set:function(e){this._rotationX=e.x*a.DEGREES_TO_RADIANS;this._rotationY=e.y*a.DEGREES_TO_RADIANS;this._rotationZ=e.z*a.DEGREES_TO_RADIANS;this.invalidateRotation()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"height",{get:function(){if(this._pBoundsInvalid)this.pUpdateBounds();return this._height},set:function(e){if(this._height==e)return;this._height==e;this._pScaleY=e/this.bounds.aabb.height;this.invalidateScale()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"index",{get:function(){if(this._pParent)return this._pParent.getChildIndex(this);return 0},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"inverseSceneTransform",{get:function(){if(this._inverseSceneTransformDirty){this._inverseSceneTransform.copyFrom(this.sceneTransform);this._inverseSceneTransform.invert();this._inverseSceneTransformDirty=false}return this._inverseSceneTransform},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"ignoreTransform",{get:function(){return this._pIgnoreTransform},set:function(e){if(this._pIgnoreTransform==e)return;this._pIgnoreTransform=e;if(e){this._pSceneTransform.identity();this._scenePosition.setTo(0,0,0)}this.pInvalidateSceneTransform()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"isEntity",{get:function(){return this._pIsEntity},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"loaderInfo",{get:function(){return this._loaderInfo},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mouseEnabled",{get:function(){return this._explicitMouseEnabled},set:function(e){if(this._explicitMouseEnabled==e)return;this._explicitMouseEnabled=e;this._pUpdateImplicitMouseEnabled(this._pParent?this._pParent.mouseChildren:true)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mouseX",{get:function(){return this._mouseX},enumerable:true,configurable:true});
Object.defineProperty(t.prototype,"mouseY",{get:function(){return this._mouseY},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"parent",{get:function(){return this._pParent},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"partition",{get:function(){return this._explicitPartition},set:function(e){if(this._explicitPartition==e)return;if(this._pScene&&this._explicitPartition)this._pScene.iUnregisterPartition(this._explicitPartition);this._explicitPartition=e;if(this._pScene&&e)this._pScene.iRegisterPartition(e);this._pUpdateImplicitPartition(this._pParent?this._pParent._iAssignedPartition:null)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"partitionNode",{get:function(){if(!this._partitionNode)this._partitionNode=this.pCreateEntityPartitionNode();return this._partitionNode},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"pickingCollider",{get:function(){return this._pPickingCollider},set:function(e){this._pPickingCollider=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"pivot",{get:function(){return this._pivot},set:function(e){this._pivot=e.clone();this.invalidatePivot()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rotationX",{get:function(){return this._rotationX*a.RADIANS_TO_DEGREES},set:function(e){if(this.rotationX==e)return;this._rotationX=e*a.DEGREES_TO_RADIANS;this.invalidateRotation()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rotationY",{get:function(){return this._rotationY*a.RADIANS_TO_DEGREES},set:function(e){if(this.rotationY==e)return;this._rotationY=e*a.DEGREES_TO_RADIANS;this.invalidateRotation()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rotationZ",{get:function(){return this._rotationZ*a.RADIANS_TO_DEGREES},set:function(e){if(this.rotationZ==e)return;this._rotationZ=e*a.DEGREES_TO_RADIANS;this.invalidateRotation()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"scaleX",{get:function(){return this._pScaleX},set:function(e){if(this._pScaleX==e)return;this._pScaleX=e;this.invalidateScale()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"scaleY",{get:function(){return this._pScaleY},set:function(e){if(this._pScaleY==e)return;this._pScaleY=e;this.invalidateScale()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"scaleZ",{get:function(){return this._pScaleZ},set:function(e){if(this._pScaleZ==e)return;this._pScaleZ=e;this.invalidateScale()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"scene",{get:function(){return this._pScene},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"scenePosition",{get:function(){if(this._scenePositionDirty){if(!this._pivotZero&&this.alignmentMode==c.PIVOT_POINT){var e=new h(this._pivot.x/this._pScaleX,this._pivot.y/this._pScaleY,this._pivot.z/this._pScaleZ);this._scenePosition=this.sceneTransform.transformVector(e)}else{this.sceneTransform.copyColumnTo(3,this._scenePosition)}this._scenePositionDirty=false}return this._scenePosition},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sceneTransform",{get:function(){if(this._pSceneTransformDirty)this.pUpdateSceneTransform();return this._pSceneTransform},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"shaderPickingDetails",{get:function(){return this._shaderPickingDetails},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"boundsVisible",{get:function(){return this._boundsVisible},set:function(e){if(e==this._boundsVisible)return;this._boundsVisible=e;this._partitionNode.boundsVisible=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"transform",{get:function(){return this._transform},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"visible",{get:function(){return this._explicitVisibility},set:function(e){if(this._explicitVisibility==e)return;this._explicitVisibility=e;this._pUpdateImplicitVisibility(this._pParent?this._pParent._iIsVisible():true)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"width",{get:function(){if(this._pBoundsInvalid)this.pUpdateBounds();return this._width},set:function(e){if(this._width==e)return;this._width==e;this._pScaleX=e/this.bounds.aabb.width;this.invalidateScale()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"worldBounds",{get:function(){if(this._iSourcePrefab)this._iSourcePrefab._iValidate();if(this._worldBoundsInvalid){this._worldBoundsInvalid=false;this._worldBounds.transformFrom(this.bounds,this.sceneTransform)}return this._worldBounds},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){if(this._x==e)return;this._x=e;this.invalidatePosition()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){if(this._y==e)return;this._y=e;this.invalidatePosition()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"z",{get:function(){return this._z},set:function(e){if(this._z==e)return;this._z=e;this.invalidatePosition()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"zOffset",{get:function(){return this._zOffset},set:function(e){this._zOffset=e},enumerable:true,configurable:true});t.prototype.addEventListener=function(t,r){e.prototype.addEventListener.call(this,t,r);switch(t){case m.POSITION_CHANGED:this._listenToPositionChanged=true;break;case m.ROTATION_CHANGED:this._listenToRotationChanged=true;break;case m.SCALE_CHANGED:this._listenToScaleChanged=true;break}};t.prototype.clone=function(){var e=new t;e.pivot=this.pivot;e._iMatrix3D=this._iMatrix3D;e.name=name;return e};t.prototype.dispose=function(){if(this.parent)this.parent.removeChild(this);while(this._pRenderables.length)this._pRenderables[0].dispose()};t.prototype.disposeAsset=function(){this.dispose()};t.prototype.getBounds=function(e){return this._bounds};t.prototype.getRect=function(e){return this._bounds};t.prototype.globalToLocal=function(e){return e};t.prototype.globalToLocal3D=function(e){return new h};t.prototype.hitTestObject=function(e){return false};t.prototype.hitTestPoint=function(e,t,r){if(r===void 0){r=false}return false};t.prototype.isIntersectingRay=function(e,t){var r=this.inverseSceneTransform.transformVector(e);var s=this.inverseSceneTransform.deltaTransformVector(t);var i=this._iPickingCollisionVO;if(!i.localNormal)i.localNormal=new h;var a=this.bounds.rayIntersection(r,s,i.localNormal);if(a<0)return false;i.rayEntryDistance=a;i.localRayPosition=r;i.localRayDirection=s;i.rayPosition=e;i.rayDirection=t;i.rayOriginIsInsideBounds=a==0;return true};t.prototype.local3DToGlobal=function(e){return new l};t.prototype.lookAt=function(e,t){if(t===void 0){t=null}var r;var s;var i;var a;if(t==null)t=h.Y_AXIS;else t.normalize();s=e.subtract(this._iMatrix3D.position);s.normalize();i=t.crossProduct(s);i.normalize();if(i.length<.05){i.x=t.y;i.y=t.x;i.z=0;i.normalize()}r=s.crossProduct(i);a=n.RAW_DATA_CONTAINER;a[0]=i.x;a[1]=i.y;a[2]=i.z;a[3]=0;a[4]=r.x;a[5]=r.y;a[6]=r.z;a[7]=0;a[8]=s.x;a[9]=s.y;a[10]=s.z;a[11]=0;var l=new o;l.copyRawDataFrom(a);var p=l.decompose()[1];this._rotationX=p.x;this._rotationY=p.y;this._rotationZ=p.z;this.invalidateRotation()};t.prototype.localToGlobal=function(e){return new l};t.prototype.moveTo=function(e,t,r){if(this._x==e&&this._y==t&&this._z==r)return;this._x=e;this._y=t;this._z=r;this.invalidatePosition()};t.prototype.movePivot=function(e,t,r){if(this._pivot==null)this._pivot=new h;this._pivot.x+=e;this._pivot.y+=t;this._pivot.z+=r;this.invalidatePivot()};t.prototype.pitch=function(e){this.rotate(h.X_AXIS,e)};t.prototype.getRenderSceneTransform=function(e){if(this.orientationMode==d.CAMERA_PLANE){var t=e.sceneTransform.decompose();var r=t[2];t[0]=this.scenePosition;r.x=this._pScaleX;r.y=this._pScaleY;r.z=this._pScaleZ;this._orientationMatrix.recompose(t);if(!this._pivotZero&&this.alignmentMode==c.PIVOT_POINT)this._orientationMatrix.prependTranslation(-this._pivot.x/this._pScaleX,-this._pivot.y/this._pScaleY,-this._pivot.z/this._pScaleZ);return this._orientationMatrix}return this.sceneTransform};t.prototype.roll=function(e){this.rotate(h.Z_AXIS,e)};t.prototype.rotate=function(e,t){var r=new o;r.prependRotation(t,e);var s=r.decompose()[1];this._rotationX+=s.x;this._rotationY+=s.y;this._rotationZ+=s.z;this.invalidateRotation()};t.prototype.rotateTo=function(e,t,r){this._rotationX=e*a.DEGREES_TO_RADIANS;this._rotationY=t*a.DEGREES_TO_RADIANS;this._rotationZ=r*a.DEGREES_TO_RADIANS;this.invalidateRotation()};t.prototype.removeEventListener=function(t,r){e.prototype.removeEventListener.call(this,t,r);if(this.hasEventListener(t,r))return;switch(t){case m.POSITION_CHANGED:this._listenToPositionChanged=false;break;case m.ROTATION_CHANGED:this._listenToRotationChanged=false;break;case m.SCALE_CHANGED:this._listenToScaleChanged=false;break}};t.prototype.translate=function(e,t){var r=e.x,s=e.y,i=e.z;var a=t/Math.sqrt(r*r+s*s+i*i);this._x+=r*a;this._y+=s*a;this._z+=i*a;this.invalidatePosition()};t.prototype.translateLocal=function(e,t){var r=e.x,s=e.y,i=e.z;var a=t/Math.sqrt(r*r+s*s+i*i);this._iMatrix3D.prependTranslation(r*a,s*a,i*a);this._matrix3D.copyColumnTo(3,this._pos);this._x=this._pos.x;this._y=this._pos.y;this._z=this._pos.z;this.invalidatePosition()};t.prototype.yaw=function(e){this.rotate(h.Y_AXIS,e)};Object.defineProperty(t.prototype,"_iAssignedPartition",{get:function(){return this._pImplicitPartition},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"_iMatrix3D",{get:function(){if(this._matrix3DDirty)this._pUpdateMatrix3D();return this._matrix3D},set:function(e){var t=e.decompose();var r;r=t[0];if(this._x!=r.x||this._y!=r.y||this._z!=r.z){this._x=r.x;this._y=r.y;this._z=r.z;this.invalidatePosition()}r=t[1];if(this._rotationX!=r.x||this._rotationY!=r.y||this._rotationZ!=r.z){this._rotationX=r.x;this._rotationY=r.y;this._rotationZ=r.z;this.invalidateRotation()}r=t[2];if(this._pScaleX!=r.x||this._pScaleY!=r.y||this._pScaleZ!=r.z){this._pScaleX=r.x;this._pScaleY=r.y;this._pScaleZ=r.z;this.invalidateScale()}},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"_iPickingCollisionVO",{get:function(){if(!this._pPickingCollisionVO)this._pPickingCollisionVO=new y(this);return this._pPickingCollisionVO},enumerable:true,configurable:true});t.prototype.iSetParent=function(e){this._pParent=e;if(e){this._pUpdateImplicitMouseEnabled(e.mouseChildren);this._pUpdateImplicitVisibility(e._iIsVisible());this._pUpdateImplicitPartition(e._iAssignedPartition);this._iSetScene(e._pScene)}else{this._pUpdateImplicitMouseEnabled(true);this._pUpdateImplicitVisibility(true);this._pUpdateImplicitPartition(null);this._iSetScene(null)}};t.prototype.pCreateDefaultBoundingVolume=function(){return new i};t.prototype.pCreateEntityPartitionNode=function(){throw new u};t.prototype.pInvalidateBounds=function(){this._pBoundsInvalid=true;this._worldBoundsInvalid=true;if(this.isEntity)this.invalidatePartition()};t.prototype.pInvalidateSceneTransform=function(){this._pSceneTransformDirty=!this._pIgnoreTransform;this._inverseSceneTransformDirty=!this._pIgnoreTransform;this._scenePositionDirty=!this._pIgnoreTransform;this._worldBoundsInvalid=!this._pIgnoreTransform;if(this.isEntity)this.invalidatePartition();if(this._listenToSceneTransformChanged)this.notifySceneTransformChange()};t.prototype.pUpdateBounds=function(){this._width=this._pBounds.aabb.width*this._pScaleX;this._height=this._pBounds.aabb.height*this._pScaleY;this._depth=this._pBounds.aabb.depth*this._pScaleZ;this._pBoundsInvalid=false};t.prototype._pUpdateImplicitMouseEnabled=function(e){this._pImplicitMouseEnabled=this._explicitMouseEnabled&&e;if(this._pImplicitMouseEnabled&&this._pParent&&!this._pPickingCollider)this._pPickingCollider=this._pParent._pPickingCollider};t.prototype._pUpdateImplicitPartition=function(e){this._pImplicitPartition=this._explicitPartition||e};t.prototype._pUpdateImplicitVisibility=function(e){this._pImplicitVisibility=this._explicitVisibility&&e};t.prototype._pUpdateMatrix3D=function(){this._pos.x=this._x;this._pos.y=this._y;this._pos.z=this._z;this._rot.x=this._rotationX;this._rot.y=this._rotationY;this._rot.z=this._rotationZ;this._sca.x=this._pScaleX;this._sca.y=this._pScaleY;this._sca.z=this._pScaleZ;this._matrix3D.recompose(this._transformComponents);if(!this._pivotZero){this._matrix3D.prependTranslation(-this._pivot.x/this._pScaleX,-this._pivot.y/this._pScaleY,-this._pivot.z/this._pScaleZ);if(this.alignmentMode!=c.PIVOT_POINT)this._matrix3D.appendTranslation(this._pivot.x,this._pivot.y,this._pivot.z)}this._matrix3DDirty=false;this._positionDirty=false;this._rotationDirty=false;this._scaleDirty=false;this._pivotDirty=false};t.prototype.pUpdateSceneTransform=function(){if(this._pParent&&!this._pParent._iIsRoot){this._pSceneTransform.copyFrom(this._pParent.sceneTransform);this._pSceneTransform.prepend(this._iMatrix3D)}else{this._pSceneTransform.copyFrom(this._iMatrix3D)}this._pSceneTransformDirty=false};t.prototype._iAddRenderable=function(e){this._pRenderables.push(e);return e};t.prototype._iRemoveRenderable=function(e){var t=this._pRenderables.indexOf(e);this._pRenderables.splice(t,1);return e};t.prototype._iTestCollision=function(e,t){return false};t.prototype._iInternalUpdate=function(){if(this._iController)this._iController.update()};t.prototype._iIsVisible=function(){return this._pImplicitVisibility};t.prototype._iIsMouseEnabled=function(){return this._pImplicitMouseEnabled};t.prototype._iSetScene=function(e){if(this._pScene==e)return;this._pUpdateScene(e);if(!this._pSceneTransformDirty&&!this._pIgnoreTransform)this.pInvalidateSceneTransform()};t.prototype._pUpdateScene=function(e){if(this._pScene){this._pScene.dispatchEvent(new _(_.REMOVED_FROM_SCENE,this));this._pScene.iUnregisterEntity(this)}this._pScene=e;if(e){e.dispatchEvent(new _(_.ADDED_TO_SCENE,this));e.iRegisterEntity(this)}this.notifySceneChange()};t.prototype.notifyPositionChanged=function(){if(!this._positionChanged)this._positionChanged=new m(m.POSITION_CHANGED,this);this.dispatchEvent(this._positionChanged)};t.prototype.notifyRotationChanged=function(){if(!this._rotationChanged)this._rotationChanged=new m(m.ROTATION_CHANGED,this);this.dispatchEvent(this._rotationChanged)};t.prototype.notifyScaleChanged=function(){if(!this._scaleChanged)this._scaleChanged=new m(m.SCALE_CHANGED,this);this.dispatchEvent(this._scaleChanged)};t.prototype.notifySceneChange=function(){if(this._listenToSceneChanged){if(!this._scenechanged)this._scenechanged=new m(m.SCENE_CHANGED,this);this.dispatchEvent(this._scenechanged)}};t.prototype.notifySceneTransformChange=function(){if(!this._sceneTransformChanged)this._sceneTransformChanged=new m(m.SCENETRANSFORM_CHANGED,this);this.dispatchEvent(this._sceneTransformChanged)};t.prototype.invalidateMatrix3D=function(){if(this._matrix3DDirty)return;this._matrix3DDirty=true;if(!this._pSceneTransformDirty&&!this._pIgnoreTransform)this.pInvalidateSceneTransform()};t.prototype.invalidatePartition=function(){if(this._iAssignedPartition)this._iAssignedPartition.iMarkForUpdate(this)};t.prototype.invalidatePivot=function(){this._pivotZero=this._pivot.x==0&&this._pivot.y==0&&this._pivot.z==0;if(this._pivotDirty)return;this._pivotDirty=true;this.invalidateMatrix3D()};t.prototype.invalidatePosition=function(){if(this._positionDirty)return;this._positionDirty=true;this.invalidateMatrix3D();if(this._listenToPositionChanged)this.notifyPositionChanged()};t.prototype.invalidateRotation=function(){if(this._rotationDirty)return;this._rotationDirty=true;this.invalidateMatrix3D();if(this._listenToRotationChanged)this.notifyRotationChanged()};t.prototype.invalidateScale=function(){if(this._scaleDirty)return;this._scaleDirty=true;this.invalidateMatrix3D();if(this._listenToScaleChanged)this.notifyScaleChanged()};return t}(p);t.exports=b},{"awayjs-core/lib/bounds/AxisAlignedBoundingBox":122,"awayjs-core/lib/errors/AbstractMethodError":126,"awayjs-core/lib/geom/MathConsts":142,"awayjs-core/lib/geom/Matrix3D":144,"awayjs-core/lib/geom/Matrix3DUtils":145,"awayjs-core/lib/geom/Point":149,"awayjs-core/lib/geom/Vector3D":151,"awayjs-core/lib/library/NamedAssetBase":162,"awayjs-display/lib/base/AlignmentMode":61,"awayjs-display/lib/base/OrientationMode":68,"awayjs-display/lib/base/Transform":71,"awayjs-display/lib/events/DisplayObjectEvent":88,"awayjs-display/lib/events/SceneEvent":93,"awayjs-display/lib/pick/PickingCollisionVO":110}],64:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/library/AssetType");var a=e("awayjs-core/lib/library/NamedAssetBase");var o=e("awayjs-display/lib/events/GeometryEvent");var n=function(e){s(t,e);function t(){e.call(this);this._subGeometries=new Array}Object.defineProperty(t.prototype,"assetType",{get:function(){return i.GEOMETRY},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"subGeometries",{get:function(){return this._subGeometries},enumerable:true,configurable:true});t.prototype.getSubGeometries=function(){return this._subGeometries};t.prototype.applyTransformation=function(e){var t=this._subGeometries.length;for(var r=0;r<t;++r)this._subGeometries[r].applyTransformation(e)};t.prototype.addSubGeometry=function(e){this._subGeometries.push(e);e.parentGeometry=this;if(this.hasEventListener(o.SUB_GEOMETRY_ADDED))this.dispatchEvent(new o(o.SUB_GEOMETRY_ADDED,e));this.iInvalidateBounds(e)};t.prototype.removeSubGeometry=function(e){this._subGeometries.splice(this._subGeometries.indexOf(e),1);e.parentGeometry=null;if(this.hasEventListener(o.SUB_GEOMETRY_REMOVED))this.dispatchEvent(new o(o.SUB_GEOMETRY_REMOVED,e));this.iInvalidateBounds(e)};t.prototype.clone=function(){var e=new t;var r=this._subGeometries.length;for(var s=0;s<r;++s)e.addSubGeometry(this._subGeometries[s].clone());return e};t.prototype.scale=function(e){var t=this._subGeometries.length;for(var r=0;r<t;++r)this._subGeometries[r].scale(e)};t.prototype.dispose=function(){var e=this._subGeometries.length;for(var t=0;t<e;++t){var r=this._subGeometries[0];this.removeSubGeometry(r);r.dispose()}};t.prototype.scaleUV=function(e,t){if(e===void 0){e=1}if(t===void 0){t=1}var r=this._subGeometries.length;for(var s=0;s<r;++s)this._subGeometries[s].scaleUV(e,t)};t.prototype.iInvalidateBounds=function(e){if(this.hasEventListener(o.BOUNDS_INVALID))this.dispatchEvent(new o(o.BOUNDS_INVALID,e))};return t}(a);t.exports=n},{"awayjs-core/lib/library/AssetType":156,"awayjs-core/lib/library/NamedAssetBase":162,"awayjs-display/lib/events/GeometryEvent":89}],65:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/library/AssetType");var a=e("awayjs-core/lib/errors/AbstractMethodError");var o=e("awayjs-display/lib/containers/DisplayObjectContainer");var n=e("awayjs-display/lib/events/LightEvent");var l=function(e){s(t,e);function t(){e.call(this);this._color=16777215;this._colorR=1;this._colorG=1;this._colorB=1;this._ambientColor=16777215;this._ambient=0;this._iAmbientR=0;this._iAmbientG=0;this._iAmbientB=0;this._specular=1;this._iSpecularR=1;this._iSpecularG=1;this._iSpecularB=1;this._diffuse=1;this._iDiffuseR=1;this._iDiffuseG=1;this._iDiffuseB=1;this._castsShadows=false}Object.defineProperty(t.prototype,"castsShadows",{get:function(){return this._castsShadows},set:function(e){if(this._castsShadows==e)return;this._castsShadows=e;if(e){if(this._shadowMapper==null)this._shadowMapper=this.pCreateShadowMapper();this._shadowMapper.light=this}else{this._shadowMapper.dispose();this._shadowMapper=null}this.dispatchEvent(new n(n.CASTS_SHADOW_CHANGE))},enumerable:true,configurable:true});t.prototype.pCreateShadowMapper=function(){throw new a};Object.defineProperty(t.prototype,"specular",{get:function(){return this._specular},set:function(e){if(e<0)e=0;this._specular=e;this.updateSpecular()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"diffuse",{get:function(){return this._diffuse},set:function(e){if(e<0)e=0;this._diffuse=e;this.updateDiffuse()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(e){this._color=e;this._colorR=(this._color>>16&255)/255;this._colorG=(this._color>>8&255)/255;this._colorB=(this._color&255)/255;this.updateDiffuse();this.updateSpecular()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"ambient",{get:function(){return this._ambient},set:function(e){if(e<0)e=0;else if(e>1)e=1;this._ambient=e;this.updateAmbient()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"ambientColor",{get:function(){return this._ambientColor},set:function(e){this._ambientColor=e;this.updateAmbient()},enumerable:true,configurable:true});t.prototype.updateAmbient=function(){this._iAmbientR=(this._ambientColor>>16&255)/255*this._ambient;this._iAmbientG=(this._ambientColor>>8&255)/255*this._ambient;this._iAmbientB=(this._ambientColor&255)/255*this._ambient};t.prototype.iGetObjectProjectionMatrix=function(e,t,r){if(r===void 0){r=null}throw new a};Object.defineProperty(t.prototype,"assetType",{get:function(){return i.LIGHT},enumerable:true,configurable:true});t.prototype.updateSpecular=function(){this._iSpecularR=this._colorR*this._specular;this._iSpecularG=this._colorG*this._specular;this._iSpecularB=this._colorB*this._specular};t.prototype.updateDiffuse=function(){this._iDiffuseR=this._colorR*this._diffuse;this._iDiffuseG=this._colorG*this._diffuse;this._iDiffuseB=this._colorB*this._diffuse};Object.defineProperty(t.prototype,"shadowMapper",{get:function(){return this._shadowMapper},set:function(e){this._shadowMapper=e;this._shadowMapper.light=this},enumerable:true,configurable:true});return t}(o);t.exports=l},{"awayjs-core/lib/errors/AbstractMethodError":126,"awayjs-core/lib/library/AssetType":156,"awayjs-display/lib/containers/DisplayObjectContainer":74,"awayjs-display/lib/events/LightEvent":90}],66:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-display/lib/base/LineSubMesh");var a=e("awayjs-display/lib/base/SubGeometryBase");var o=e("awayjs-display/lib/base/TriangleSubGeometry");var n=e("awayjs-display/lib/events/SubGeometryEvent");var l=function(e){s(t,e);function t(){e.call(this,true);this._positionsDirty=true;this._boundingPositionDirty=true;this._thicknessDirty=true;this._colorsDirty=true;this._pSubMeshClass=i}t.prototype._pUpdateStrideOffset=function(){this._pOffset[t.VERTEX_DATA]=0;var e=0;this._pOffset[t.START_POSITION_DATA]=e;e+=3;this._pOffset[t.END_POSITION_DATA]=e;e+=3;this._pOffset[t.THICKNESS_DATA]=e;e+=1;this._pOffset[t.COLOR_DATA]=e;e+=4;this._pStride[t.VERTEX_DATA]=e;this._pStride[t.START_POSITION_DATA]=e;this._pStride[t.END_POSITION_DATA]=e;this._pStride[t.THICKNESS_DATA]=e;this._pStride[t.COLOR_DATA]=e;var r=this._pNumVertices*e;if(this._pVertices==null)this._pVertices=new Array(r);else if(this._pVertices.length!=r)this._pVertices.length=r;this._pStrideOffsetDirty=false};Object.defineProperty(t.prototype,"vertices",{get:function(){if(this._positionsDirty)this.updatePositions(this._startPositions,this._endPositions);if(this._thicknessDirty)this.updateThickness(this._thickness);if(this._colorsDirty)this.updateColors(this._startColors,this._endColors);return this._pVertices},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"startPositions",{get:function(){if(this._positionsDirty)this.updatePositions(this._startPositions,this._endPositions);return this._startPositions},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"endPositions",{get:function(){if(this._positionsDirty)this.updatePositions(this._startPositions,this._endPositions);return this._endPositions},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"thickness",{get:function(){if(this._thicknessDirty)this.updateThickness(this._thickness);return this._thickness},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"startColors",{get:function(){if(this._colorsDirty)this.updateColors(this._startColors,this._endColors);return this._startColors},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"endColors",{get:function(){if(this._colorsDirty)this.updateColors(this._startColors,this._endColors);return this._endColors},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numSegments",{get:function(){return this._numSegments},enumerable:true,configurable:true});t.prototype.getBoundingPositions=function(){if(this._boundingPositionDirty)this._boundingPositions=this.startPositions.concat(this.endPositions);return this._boundingPositions};t.prototype.updatePositions=function(e,r){var s;var i;var a;var o;var n;var l;var h;this._startPositions=e;if(this._startPositions==null)this._startPositions=new Array;this._endPositions=r;if(this._endPositions==null)this._endPositions=new Array;this._boundingPositionDirty=true;this._numSegments=this._startPositions.length/3;this._pNumVertices=this._numSegments*4;var p=this._pNumVertices*this.getStride(t.VERTEX_DATA);if(this._pVertices==null)this._pVertices=new Array(p);else if(this._pVertices.length!=p)this._pVertices.length=p;s=0;i=0;o=this.getOffset(t.START_POSITION_DATA);n=this.getStride(t.START_POSITION_DATA);l=this._pVertices;h=new Array;while(s<e.length){a=o/n&1?r:e;l[o]=a[s];l[o+1]=a[s+1];l[o+2]=a[s+2];a=o/n&1?e:r;l[o+3]=a[s];l[o+4]=a[s+1];l[o+5]=a[s+2];if(++i==4){var u=o/n-3;h.push(u,u+1,u+2,u+3,u+2,u+1);i=0;s+=3}o+=n}this.updateIndices(h);this.pInvalidateBounds();this.notifyPositionsUpdate();this._positionsDirty=false};t.prototype.updateThickness=function(e){var r;var s;var i;var a;var o;var n;this._thickness=e;if(e!=null){r=0;s=0;a=this.getOffset(t.THICKNESS_DATA);o=this.getStride(t.THICKNESS_DATA);n=this._pVertices;i=a;while(r<e.length){n[i]=Math.floor(.5*(i-a)/o+.5)&1?-e[r]:e[r];if(++s==4){s=0;r++}i+=o}}this.notifyThicknessUpdate();this._thicknessDirty=false};t.prototype.updateColors=function(e,r){var s;var i;var a;var o;var n;var l;var h;this._startColors=e;this._endColors=r;if(this._startColors==null){this._startColors=new Array(this._numSegments*4);s=0;while(s<this._startColors.length)this._startColors[s++]=1}if(this._endColors==null){this._endColors=new Array(this._numSegments*4);s=0;while(s<this._endColors.length)this._endColors[s++]=1}s=0;i=0;n=this.getOffset(t.COLOR_DATA);l=this.getStride(t.COLOR_DATA);h=this._pVertices;o=n;while(s<this._startColors.length){a=(o-n)/l&1?this._endColors:this._startColors;h[o]=a[s];h[o+1]=a[s+1];h[o+2]=a[s+2];h[o+3]=a[s+3];if(++i==4){i=0;s+=4}o+=l}this.notifyColorsUpdate();this._colorsDirty=false};t.prototype.dispose=function(){e.prototype.dispose.call(this);this._startPositions=null;this._endPositions=null;this._thickness=null;this._startColors=null;this._endColors=null};t.prototype.pInvalidateBounds=function(){if(this.parentGeometry)this.parentGeometry.iInvalidateBounds(this)};t.prototype.clone=function(){var e=new t;e.updateIndices(this._pIndices.concat());e.updatePositions(this._startPositions.concat(),this._endPositions.concat());e.updateThickness(this._thickness.concat());e.updatePositions(this._startPositions.concat(),this._endPositions.concat());return e};t.prototype._pNotifyVerticesUpdate=function(){this._pStrideOffsetDirty=true;this.notifyPositionsUpdate();this.notifyThicknessUpdate();this.notifyColorsUpdate()};t.prototype.notifyPositionsUpdate=function(){if(this._positionsDirty)return;this._positionsDirty=true;if(!this._positionsUpdated)this._positionsUpdated=new n(n.VERTICES_UPDATED,o.POSITION_DATA);this.dispatchEvent(this._positionsUpdated)};t.prototype.notifyThicknessUpdate=function(){if(this._thicknessDirty)return;this._thicknessDirty=true;if(!this._thicknessUpdated)this._thicknessUpdated=new n(n.VERTICES_UPDATED,t.THICKNESS_DATA);this.dispatchEvent(this._thicknessUpdated)};t.prototype.notifyColorsUpdate=function(){if(this._colorsDirty)return;this._colorsDirty=true;if(!this._colorUpdated)this._colorUpdated=new n(n.VERTICES_UPDATED,t.COLOR_DATA);this.dispatchEvent(this._colorUpdated)};t.VERTEX_DATA="vertices";t.START_POSITION_DATA="startPositions";t.END_POSITION_DATA="endPositions";t.THICKNESS_DATA="thickness";t.COLOR_DATA="colors";t.POSITION_FORMAT="float3";t.COLOR_FORMAT="float4";t.THICKNESS_FORMAT="float1";return t}(a);t.exports=l},{"awayjs-display/lib/base/LineSubMesh":67,"awayjs-display/lib/base/SubGeometryBase":69,"awayjs-display/lib/base/TriangleSubGeometry":72,"awayjs-display/lib/events/SubGeometryEvent":94}],67:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/library/AssetType");var a=e("awayjs-display/lib/base/SubMeshBase");var o=function(e){s(t,e);function t(t,r,s){if(s===void 0){s=null}e.call(this);this._pParentMesh=r;this._subGeometry=t;this.material=s}Object.defineProperty(t.prototype,"assetType",{get:function(){return i.LINE_SUB_MESH},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"subGeometry",{get:function(){return this._subGeometry},enumerable:true,configurable:true});t.prototype.dispose=function(){this.material=null;e.prototype.dispose.call(this)};t.prototype._iCollectRenderable=function(e){e.applyLineSubMesh(this)};return t}(a);t.exports=o},{"awayjs-core/lib/library/AssetType":156,"awayjs-display/lib/base/SubMeshBase":70}],68:[function(e,t,r){var s=function(){function e(){}e.DEFAULT="default";e.CAMERA_PLANE="cameraPlane";e.CAMERA_POSITION="cameraPosition";return e}();t.exports=s},{}],69:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/library/NamedAssetBase");var a=e("awayjs-core/lib/errors/AbstractMethodError");var o=e("awayjs-display/lib/events/SubGeometryEvent");var n=function(e){s(t,e);function t(t){e.call(this);this._pStrideOffsetDirty=true;this._pConcatenateArrays=true;this._pStride=new Object;this._pOffset=new Object;this._pConcatenateArrays=t}t.prototype._pUpdateStrideOffset=function(){throw new a};Object.defineProperty(t.prototype,"subMeshClass",{get:function(){return this._pSubMeshClass},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"concatenateArrays",{get:function(){return this._pConcatenateArrays},set:function(e){if(this._pConcatenateArrays==e)return;this._pConcatenateArrays=e;this._pStrideOffsetDirty=true;if(e)this._pNotifyVerticesUpdate()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"indices",{get:function(){return this._pIndices},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"vertices",{get:function(){this.updateVertices();return this._pVertices},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numTriangles",{get:function(){return this._numTriangles},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numVertices",{get:function(){return this._pNumVertices},enumerable:true,configurable:true});t.prototype.getStride=function(e){if(this._pStrideOffsetDirty)this._pUpdateStrideOffset();return this._pStride[e]};t.prototype.getOffset=function(e){if(this._pStrideOffsetDirty)this._pUpdateStrideOffset();return this._pOffset[e]};t.prototype.updateVertices=function(){throw new a};t.prototype.dispose=function(){this._pIndices=null;
this._pVertices=null};t.prototype.updateIndices=function(e){this._pIndices=e;this._numIndices=e.length;this._numTriangles=this._numIndices/3;this.notifyIndicesUpdate()};t.prototype.pInvalidateBounds=function(){if(this.parentGeometry)this.parentGeometry.iInvalidateBounds(this)};t.prototype.clone=function(){throw new a};t.prototype.applyTransformation=function(e){};t.prototype.scale=function(e){};t.prototype.scaleUV=function(e,t){if(e===void 0){e=1}if(t===void 0){t=1}};t.prototype.getBoundingPositions=function(){throw new a};t.prototype.notifyIndicesUpdate=function(){if(!this._indicesUpdated)this._indicesUpdated=new o(o.INDICES_UPDATED);this.dispatchEvent(this._indicesUpdated)};t.prototype._pNotifyVerticesUpdate=function(){throw new a};t.VERTEX_DATA="vertices";return t}(i);t.exports=n},{"awayjs-core/lib/errors/AbstractMethodError":126,"awayjs-core/lib/library/NamedAssetBase":162,"awayjs-display/lib/events/SubGeometryEvent":94}],70:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/errors/AbstractMethodError");var a=e("awayjs-core/lib/library/NamedAssetBase");var o=function(e){s(t,e);function t(){e.call(this);this._iIndex=0;this._renderables=new Array}Object.defineProperty(t.prototype,"animator",{get:function(){return this._pParentMesh.animator},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"material",{get:function(){return this._material||this._pParentMesh.material},set:function(e){if(this.material)this.material.iRemoveOwner(this);this._material=e;if(this.material)this.material.iAddOwner(this)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sceneTransform",{get:function(){return this._pParentMesh.sceneTransform},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"parentMesh",{get:function(){return this._pParentMesh},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"uvTransform",{get:function(){return this._uvTransform||this._pParentMesh.uvTransform},set:function(e){this._uvTransform=e},enumerable:true,configurable:true});t.prototype.dispose=function(){this.material=null;var e=this._renderables.length;for(var t=0;t<e;t++)this._renderables[t].dispose()};t.prototype.getRenderSceneTransform=function(e){return this._pParentMesh.getRenderSceneTransform(e)};t.prototype._iAddRenderable=function(e){this._renderables.push(e);return e};t.prototype._iRemoveRenderable=function(e){var t=this._renderables.indexOf(e);this._renderables.splice(t,1);return e};t.prototype._iInvalidateRenderableGeometry=function(){var e=this._renderables.length;for(var t=0;t<e;t++)this._renderables[t].invalidateGeometry()};t.prototype._iCollectRenderable=function(e){throw new i};t.prototype._iGetExplicitMaterial=function(){return this._material};return t}(a);t.exports=o},{"awayjs-core/lib/errors/AbstractMethodError":126,"awayjs-core/lib/library/NamedAssetBase":162}],71:[function(e,t,r){var s=e("awayjs-core/lib/geom/Matrix3D");var i=e("awayjs-core/lib/geom/Matrix3DUtils");var a=e("awayjs-core/lib/geom/Vector3D");var o=function(){function e(e){this._position=new a;this._displayObject=e}Object.defineProperty(e.prototype,"backVector",{get:function(){var e=i.getForward(this._displayObject._iMatrix3D);e.negate();return e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"concatenatedColorTransform",{get:function(){return this._concatenatedColorTransform},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"concatenatedMatrix",{get:function(){return this._concatenatedMatrix},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"downVector",{get:function(){var e=i.getUp(this._displayObject._iMatrix3D);e.negate();return e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"forwardVector",{get:function(){return i.getForward(this._displayObject._iMatrix3D)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"leftVector",{get:function(){var e=i.getRight(this._displayObject._iMatrix3D);e.negate();return e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"matrix3D",{get:function(){return this._displayObject._iMatrix3D},set:function(e){this._displayObject._iMatrix3D=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"pixelBounds",{get:function(){return this._pixelBounds},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"position",{get:function(){return this._displayObject._iMatrix3D.position},set:function(e){this._displayObject.x=e.x;this._displayObject.y=e.y;this._displayObject.z=e.z},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"rightVector",{get:function(){return i.getRight(this._displayObject._iMatrix3D)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"rotation",{get:function(){return new a(this._displayObject.rotationX,this._displayObject.rotationY,this._displayObject.rotationZ)},set:function(e){this._displayObject.rotationX=e.x;this._displayObject.rotationY=e.y;this._displayObject.rotationZ=e.z},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"scale",{get:function(){return new a(this._displayObject.scaleX,this._displayObject.scaleY,this._displayObject.scaleZ)},set:function(e){this._displayObject.scaleX=e.x;this._displayObject.scaleY=e.y;this._displayObject.scaleZ=e.z},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"upVector",{get:function(){return i.getUp(this._displayObject._iMatrix3D)},enumerable:true,configurable:true});e.prototype.getRelativeMatrix3D=function(e){return new s};e.prototype.moveForward=function(e){this._displayObject.translateLocal(a.Z_AXIS,e)};e.prototype.moveBackward=function(e){this._displayObject.translateLocal(a.Z_AXIS,-e)};e.prototype.moveLeft=function(e){this._displayObject.translateLocal(a.X_AXIS,-e)};e.prototype.moveRight=function(e){this._displayObject.translateLocal(a.X_AXIS,e)};e.prototype.moveUp=function(e){this._displayObject.translateLocal(a.Y_AXIS,e)};e.prototype.moveDown=function(e){this._displayObject.translateLocal(a.Y_AXIS,-e)};return e}();t.exports=o},{"awayjs-core/lib/geom/Matrix3D":144,"awayjs-core/lib/geom/Matrix3DUtils":145,"awayjs-core/lib/geom/Vector3D":151}],72:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/geom/Vector3D");var a=e("awayjs-display/lib/base/SubGeometryBase");var o=e("awayjs-display/lib/base/TriangleSubMesh");var n=e("awayjs-display/lib/events/SubGeometryEvent");var l=function(e){s(t,e);function t(t){e.call(this,t);this._positionsDirty=true;this._faceNormalsDirty=true;this._faceTangentsDirty=true;this._vertexNormalsDirty=true;this._vertexTangentsDirty=true;this._uvsDirty=true;this._secondaryUVsDirty=true;this._jointIndicesDirty=true;this._jointWeightsDirty=true;this._concatenateArrays=true;this._autoDeriveNormals=true;this._autoDeriveTangents=true;this._autoDeriveUVs=false;this._useFaceWeights=false;this._scaleU=1;this._scaleV=1;this._pSubMeshClass=o}Object.defineProperty(t.prototype,"scaleU",{get:function(){return this._scaleU},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"scaleV",{get:function(){return this._scaleV},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"useCondensedIndices",{get:function(){return this._useCondensedIndices},set:function(e){if(this._useCondensedIndices==e)return;this._useCondensedIndices=e;this.notifyJointIndicesUpdate()},enumerable:true,configurable:true});t.prototype._pUpdateStrideOffset=function(){if(this._concatenateArrays){this._pOffset[t.VERTEX_DATA]=0;this._pOffset[t.POSITION_DATA]=0;var e=3;if(this._vertexNormals!=null){this._pOffset[t.NORMAL_DATA]=e;e+=3}if(this._vertexTangents!=null){this._pOffset[t.TANGENT_DATA]=e;e+=3}if(this._uvs!=null){this._pOffset[t.UV_DATA]=e;e+=2}if(this._secondaryUVs!=null){this._pOffset[t.SECONDARY_UV_DATA]=e;e+=2}if(this._jointIndices!=null){this._pOffset[t.JOINT_INDEX_DATA]=e;e+=this._jointsPerVertex}if(this._jointWeights!=null){this._pOffset[t.JOINT_WEIGHT_DATA]=e;e+=this._jointsPerVertex}this._pStride[t.VERTEX_DATA]=e;this._pStride[t.POSITION_DATA]=e;this._pStride[t.NORMAL_DATA]=e;this._pStride[t.TANGENT_DATA]=e;this._pStride[t.UV_DATA]=e;this._pStride[t.SECONDARY_UV_DATA]=e;this._pStride[t.JOINT_INDEX_DATA]=e;this._pStride[t.JOINT_WEIGHT_DATA]=e;var r=this._pNumVertices*e;if(this._pVertices==null)this._pVertices=new Array(r);else if(this._pVertices.length!=r)this._pVertices.length=r}else{this._pOffset[t.POSITION_DATA]=0;this._pOffset[t.NORMAL_DATA]=0;this._pOffset[t.TANGENT_DATA]=0;this._pOffset[t.UV_DATA]=0;this._pOffset[t.SECONDARY_UV_DATA]=0;this._pOffset[t.JOINT_INDEX_DATA]=0;this._pOffset[t.JOINT_WEIGHT_DATA]=0;this._pStride[t.POSITION_DATA]=3;this._pStride[t.NORMAL_DATA]=3;this._pStride[t.TANGENT_DATA]=3;this._pStride[t.UV_DATA]=2;this._pStride[t.SECONDARY_UV_DATA]=2;this._pStride[t.JOINT_INDEX_DATA]=this._jointsPerVertex;this._pStride[t.JOINT_WEIGHT_DATA]=this._jointsPerVertex}this._pStrideOffsetDirty=false};Object.defineProperty(t.prototype,"jointsPerVertex",{get:function(){return this._jointsPerVertex},set:function(e){if(this._jointsPerVertex==e)return;this._jointsPerVertex=e;this._pStrideOffsetDirty=true;if(this._pConcatenateArrays)this._pNotifyVerticesUpdate()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"autoDeriveUVs",{get:function(){return this._autoDeriveUVs},set:function(e){if(this._autoDeriveUVs==e)return;this._autoDeriveUVs=e;if(e)this.notifyUVsUpdate()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"autoDeriveNormals",{get:function(){return this._autoDeriveNormals},set:function(e){if(this._autoDeriveNormals==e)return;this._autoDeriveNormals=e;if(e)this.notifyNormalsUpdate()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"autoDeriveTangents",{get:function(){return this._autoDeriveTangents},set:function(e){if(this._autoDeriveTangents==e)return;this._autoDeriveTangents=e;if(e)this.notifyTangentsUpdate()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"vertices",{get:function(){if(this._positionsDirty)this.updatePositions(this._positions);if(this._vertexNormalsDirty)this.updateVertexNormals(this._vertexNormals);if(this._vertexTangentsDirty)this.updateVertexTangents(this._vertexTangents);if(this._uvsDirty)this.updateUVs(this._uvs);if(this._secondaryUVsDirty)this.updateSecondaryUVs(this._secondaryUVs);if(this._jointIndicesDirty)this.updateJointIndices(this._jointIndices);if(this._jointWeightsDirty)this.updateJointWeights(this._jointWeights);return this._pVertices},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"positions",{get:function(){if(this._positionsDirty)this.updatePositions(this._positions);return this._positions},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"vertexNormals",{get:function(){if(this._vertexNormalsDirty)this.updateVertexNormals(this._vertexNormals);return this._vertexNormals},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"vertexTangents",{get:function(){if(this._vertexTangentsDirty)this.updateVertexTangents(this._vertexTangents);return this._vertexTangents},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"faceNormals",{get:function(){if(this._faceNormalsDirty)this.updateFaceNormals();return this._faceNormals},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"faceTangents",{get:function(){if(this._faceTangentsDirty)this.updateFaceTangents();return this._faceTangents},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"uvs",{get:function(){if(this._uvsDirty)this.updateUVs(this._uvs);return this._uvs},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"secondaryUVs",{get:function(){if(this._secondaryUVsDirty)this.updateSecondaryUVs(this._secondaryUVs);return this._secondaryUVs},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"jointIndices",{get:function(){if(this._jointIndicesDirty)this.updateJointIndices(this._jointIndices);if(this._useCondensedIndices)return this._condensedJointIndices;return this._jointIndices},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"jointWeights",{get:function(){if(this._jointWeightsDirty)this.updateJointWeights(this._jointWeights);return this._jointWeights},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"useFaceWeights",{get:function(){return this._useFaceWeights},set:function(e){if(this._useFaceWeights==e)return;this._useFaceWeights=e;if(this._autoDeriveNormals)this.notifyNormalsUpdate();if(this._autoDeriveTangents)this.notifyTangentsUpdate();this._faceNormalsDirty=true},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numCondensedJoints",{get:function(){if(this._jointIndicesDirty)this.updateJointIndices(this._jointIndices);return this._numCondensedJoints},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"condensedIndexLookUp",{get:function(){if(this._jointIndicesDirty)this.updateJointIndices(this._jointIndices);return this._condensedIndexLookUp},enumerable:true,configurable:true});t.prototype.getBoundingPositions=function(){if(this._positionsDirty)this.updatePositions(this._positions);return this._positions};t.prototype.updatePositions=function(e){var r;var s;var i;var a;this._positions=e;if(this._positions==null)this._positions=new Array;this._pNumVertices=this._positions.length/3;if(this._concatenateArrays){var o=this._pNumVertices*this.getStride(t.VERTEX_DATA);if(this._pVertices==null)this._pVertices=new Array(o);else if(this._pVertices.length!=o)this._pVertices.length=o;r=0;s=this.getOffset(t.POSITION_DATA);i=this.getStride(t.POSITION_DATA);a=this._pVertices;while(r<e.length){a[s]=e[r++];a[s+1]=e[r++];a[s+2]=e[r++];s+=i}}if(this._autoDeriveNormals)this.notifyNormalsUpdate();if(this._autoDeriveTangents)this.notifyTangentsUpdate();if(this._autoDeriveUVs)this.notifyUVsUpdate();this.pInvalidateBounds();this.notifyPositionsUpdate();this._positionsDirty=false};t.prototype.updateVertexNormals=function(e){var r;var s;var i;var a;var o;if(!this._autoDeriveNormals){if((this._vertexNormals==null||e==null)&&(this._vertexNormals!=null||e!=null)){if(this._concatenateArrays)this._pNotifyVerticesUpdate();else this._pStrideOffsetDirty=true}this._vertexNormals=e;if(e!=null&&this._concatenateArrays){r=0;s=this.getOffset(t.NORMAL_DATA);a=this.getStride(t.NORMAL_DATA);o=this._pVertices;while(r<e.length){o[s]=e[r++];o[s+1]=e[r++];o[s+2]=e[r++];s+=a}}}else{if(this._vertexNormals==null){this._vertexNormals=new Array(this._positions.length);if(this._concatenateArrays)this._pNotifyVerticesUpdate();else this._pStrideOffsetDirty=true}if(this._faceNormalsDirty)this.updateFaceNormals();i=this.getOffset(t.NORMAL_DATA);a=this.getStride(t.NORMAL_DATA);o=this._concatenateArrays?this._pVertices:this._vertexNormals;var n=0;var l=1;var h=2;s=i;var p=o.length;while(s<p){o[s]=0;o[s+1]=0;o[s+2]=0;s+=a}var u=0;var c=this._pIndices.length;var d;r=0;while(r<c){d=this._useFaceWeights?this._faceWeights[u++]:1;s=i+this._pIndices[r++]*a;o[s]+=this._faceNormals[n]*d;o[s+1]+=this._faceNormals[l]*d;o[s+2]+=this._faceNormals[h]*d;s=i+this._pIndices[r++]*a;o[s]+=this._faceNormals[n]*d;o[s+1]+=this._faceNormals[l]*d;o[s+2]+=this._faceNormals[h]*d;s=i+this._pIndices[r++]*a;o[s]+=this._faceNormals[n]*d;o[s+1]+=this._faceNormals[l]*d;o[s+2]+=this._faceNormals[h]*d;n+=3;l+=3;h+=3}r=0;s=i;while(s<p){var f=o[s];var y=o[s+1];var m=o[s+2];var _=1/Math.sqrt(f*f+y*y+m*m);if(this._concatenateArrays){this._vertexNormals[r++]=o[s]=f*_;this._vertexNormals[r++]=o[s+1]=y*_;this._vertexNormals[r++]=o[s+2]=m*_}else{o[s]=f*_;o[s+1]=y*_;o[s+2]=m*_}s+=a}}this.notifyNormalsUpdate();this._vertexNormalsDirty=false};t.prototype.updateVertexTangents=function(e){var r;var s;var i;var a;var o;if(!this._autoDeriveTangents){if((this._vertexTangents==null||e==null)&&(this._vertexTangents!=null||e!=null)){if(this._concatenateArrays)this._pNotifyVerticesUpdate();else this._pStrideOffsetDirty=true}this._vertexTangents=e;if(e!=null&&this._concatenateArrays){r=0;s=this.getOffset(t.TANGENT_DATA);a=this.getStride(t.TANGENT_DATA);o=this._pVertices;while(r<e.length){o[s]=e[r++];o[s+1]=e[r++];o[s+2]=e[r++];s+=a}}}else{if(this._vertexTangents==null){this._vertexTangents=new Array(this._positions.length);if(this._concatenateArrays)this._pNotifyVerticesUpdate();else this._pStrideOffsetDirty=true}if(this._faceTangentsDirty)this.updateFaceTangents();i=this.getOffset(t.TANGENT_DATA);a=this.getStride(t.TANGENT_DATA);o=this._concatenateArrays?this._pVertices:this._vertexTangents;s=i;var n=o.length;while(s<n){o[s]=0;o[s+1]=0;o[s+2]=0;s+=a}var l=0;var h;var p=0;var u=1;var c=2;r=0;var d=this._pIndices.length;while(r<d){h=this._useFaceWeights?this._faceWeights[l++]:1;s=i+this._pIndices[r++]*a;o[s++]+=this._faceTangents[p]*h;o[s++]+=this._faceTangents[u]*h;o[s]+=this._faceTangents[c]*h;s=i+this._pIndices[r++]*a;o[s++]+=this._faceTangents[p]*h;o[s++]+=this._faceTangents[u]*h;o[s]+=this._faceTangents[c]*h;s=i+this._pIndices[r++]*a;o[s++]+=this._faceTangents[p]*h;o[s++]+=this._faceTangents[u]*h;o[s]+=this._faceTangents[c]*h;p+=3;u+=3;c+=3}r=0;s=i;while(s<n){var f=o[s];var y=o[s+1];var m=o[s+2];var _=1/Math.sqrt(f*f+y*y+m*m);if(this._concatenateArrays){this._vertexTangents[r++]=o[s]=f*_;this._vertexTangents[r++]=o[s+1]=y*_;this._vertexTangents[r++]=o[s+2]=m*_}else{o[s]=f*_;o[s+1]=y*_;o[s+2]=m*_}s+=a}}this.notifyTangentsUpdate();this._vertexTangentsDirty=false};t.prototype.updateUVs=function(e){var r;var s;var i;var a;var o;if(!this._autoDeriveUVs){if((this._uvs==null||e==null)&&(this._uvs!=null||e!=null)){if(this._concatenateArrays)this._pNotifyVerticesUpdate();else this._pStrideOffsetDirty=true}this._uvs=e;if(e!=null&&this._concatenateArrays){r=0;s=this.getOffset(t.UV_DATA);a=this.getStride(t.UV_DATA);o=this._pVertices;while(r<e.length){o[s]=e[r++];o[s+1]=e[r++];s+=a}}}else{if(this._uvs==null){this._uvs=new Array(this._positions.length*2/3);if(this._concatenateArrays)this._pNotifyVerticesUpdate();else this._pStrideOffsetDirty=true}i=this.getOffset(t.UV_DATA);a=this.getStride(t.UV_DATA);o=this._concatenateArrays?this._pVertices:this._uvs;r=0;s=i;var n=0;var l=o.length;while(s<l){if(this._concatenateArrays){this._uvs[r++]=o[s]=n*.5;this._uvs[r++]=o[s+1]=1-(n&1)}else{o[s]=n*.5;o[s+1]=1-(n&1)}if(++n==3)n=0;s+=a}}if(this._autoDeriveTangents)this.notifyTangentsUpdate();this.notifyUVsUpdate();this._uvsDirty=false};t.prototype.updateSecondaryUVs=function(e){var r;var s;var i;var a;var o;if(this._concatenateArrays&&(this._secondaryUVs==null||e==null)&&(this._secondaryUVs!=null||e!=null))this._pNotifyVerticesUpdate();this._secondaryUVs=e;if(e!=null&&this._concatenateArrays){i=this.getOffset(t.SECONDARY_UV_DATA);a=this.getStride(t.SECONDARY_UV_DATA);r=0;s=i;o=this._pVertices;while(r<e.length){o[s]=e[r++];o[s+1]=e[r++];s+=a}}this.notifySecondaryUVsUpdate();this._secondaryUVsDirty=false};t.prototype.updateJointIndices=function(e){var r;var s;var i;var a;var o;var n;if(this._concatenateArrays&&(this._jointIndices==null||e==null)&&(this._jointIndices!=null||e!=null))this._pNotifyVerticesUpdate();this._jointIndices=e;if(e!=null){a=this.getOffset(t.JOINT_INDEX_DATA);o=this.getStride(t.JOINT_INDEX_DATA);if(this._useCondensedIndices){r=0;s=0;i=a;n=this._concatenateArrays?this._pVertices:this._condensedJointIndices;var l;var h=0;var p=new Object;if(!this._concatenateArrays)this._condensedJointIndices=new Array(e.length);this._condensedIndexLookUp=new Array;while(r<e.length){for(s=0;s<this._jointsPerVertex;s++){l=e[r++];if(p[l]==undefined){p[l]=h*3;this._condensedIndexLookUp[h++]=l}n[i+s]=p[l]}i+=o}this._numCondensedJoints=h}else if(this._concatenateArrays){r=0;i=a;n=this._pVertices;while(r<e.length){s=0;while(s<this._jointsPerVertex)n[i+s++]=e[r++];i+=o}}}this.notifyJointIndicesUpdate();this._jointIndicesDirty=false};t.prototype.updateJointWeights=function(e){var r;var s;var i;var a;var o;var n;if(this._concatenateArrays&&(this._jointWeights==null||e==null)&&(this._jointWeights!=null||e!=null))this._pNotifyVerticesUpdate();this._jointWeights=e;if(e!=null&&this._concatenateArrays){a=this.getOffset(t.JOINT_WEIGHT_DATA);o=this.getStride(t.JOINT_WEIGHT_DATA);r=0;i=a;n=this._pVertices;while(r<e.length){s=0;while(s<this._jointsPerVertex)n[i+s++]=e[r++];i+=o}}this.notifyJointWeightsUpdate();this._jointWeightsDirty=false};t.prototype.dispose=function(){e.prototype.dispose.call(this);this._positions=null;this._vertexNormals=null;this._vertexTangents=null;this._uvs=null;this._secondaryUVs=null;this._jointIndices=null;this._jointWeights=null;this._faceNormals=null;this._faceWeights=null;this._faceTangents=null};t.prototype.updateIndices=function(t){e.prototype.updateIndices.call(this,t);this._faceNormalsDirty=true;if(this._autoDeriveNormals)this._vertexNormalsDirty=true;if(this._autoDeriveTangents)this._vertexTangentsDirty=true;if(this._autoDeriveUVs)this._uvsDirty=true};t.prototype.clone=function(){var e=new t(this._concatenateArrays);e.updateIndices(this._pIndices.concat());e.updatePositions(this._positions.concat());if(this._vertexNormals&&!this._autoDeriveNormals)e.updateVertexNormals(this._vertexNormals.concat());else e.updateVertexNormals(null);if(this._uvs&&!this._autoDeriveUVs)e.updateUVs(this._uvs.concat());else e.updateUVs(null);if(this._vertexTangents&&!this._autoDeriveTangents)e.updateVertexTangents(this._vertexTangents.concat());else e.updateVertexTangents(null);if(this._secondaryUVs)e.updateSecondaryUVs(this._secondaryUVs.concat());if(this._jointIndices){e.jointsPerVertex=this._jointsPerVertex;e.updateJointIndices(this._jointIndices.concat())}if(this._jointWeights)e.updateJointWeights(this._jointWeights.concat());return e};t.prototype.scaleUV=function(e,t){if(e===void 0){e=1}if(t===void 0){t=1}var r;var s;var i;var a;a=this._uvs;var o=e/this._scaleU;var n=t/this._scaleV;this._scaleU=e;this._scaleV=t;var l=a.length;s=0;i=2;r=s;while(r<l){a[r]*=o;a[r+1]*=n;r+=i}this.notifyUVsUpdate()};t.prototype.scale=function(e){var t;var r;var s;var i;var a;a=this._positions;var o=a.length;s=0;i=3;t=0;r=s;while(t<o){a[r]*=e;a[r+1]*=e;a[r+2]*=e;t+=3;r+=i}this.notifyPositionsUpdate()};t.prototype.applyTransformation=function(e){var r;var s;var a;if(this._concatenateArrays){r=this._pVertices;s=this._pVertices;a=this._pVertices}else{r=this._positions;s=this._vertexNormals;a=this._vertexTangents}var o=this._positions.length/3;var n;var l;var h;var p=new i;var u=this._vertexNormals!=null;var c=this._vertexTangents!=null;var d;if(u||c){d=e.clone();d.invert();d.transpose()}var f=this.getOffset(t.POSITION_DATA);var y=this.getOffset(t.NORMAL_DATA);var m=this.getOffset(t.TANGENT_DATA);var _=this.getStride(t.POSITION_DATA);var b=this.getStride(t.NORMAL_DATA);var g=this.getStride(t.TANGENT_DATA);for(n=0;n<o;++n){l=f+1;h=f+2;p.x=r[f];p.y=r[l];p.z=r[h];p=e.transformVector(p);r[f]=p.x;r[l]=p.y;r[h]=p.z;f+=_;if(u){l=y+1;h=y+2;p.x=s[y];p.y=s[l];p.z=s[h];p=d.deltaTransformVector(p);p.normalize();s[y]=p.x;s[l]=p.y;s[h]=p.z;y+=b}if(c){l=m+1;h=m+2;p.x=a[m];p.y=a[l];p.z=a[h];p=d.deltaTransformVector(p);p.normalize();a[m]=p.x;a[l]=p.y;a[h]=p.z;m+=g}}this.notifyPositionsUpdate();this.notifyNormalsUpdate();this.notifyTangentsUpdate()};t.prototype.updateFaceTangents=function(){var e=0;var t;var r;var s;var i;var a;var o;var n;var l;var h,p,u;var c,d,f;var y,m,_;var b,g,w;var v=this._positions;var j=this._uvs;var x=this._pIndices.length;if(this._faceTangents==null)this._faceTangents=new Array(x);while(e<x){t=this._pIndices[e];r=this._pIndices[e+1];s=this._pIndices[e+2];a=j[t*2+1];o=j[r*2+1]-a;n=j[s*2+1]-a;i=t*3;h=v[i];p=v[i+1];u=v[i+2];i=r*3;c=v[i]-h;d=v[i+1]-p;f=v[i+2]-u;i=s*3;y=v[i]-h;m=v[i+1]-p;_=v[i+2]-u;b=n*c-o*y;g=n*d-o*m;w=n*f-o*_;l=1/Math.sqrt(b*b+g*g+w*w);this._faceTangents[e++]=l*b;this._faceTangents[e++]=l*g;this._faceTangents[e++]=l*w}this._faceTangentsDirty=false};t.prototype.updateFaceNormals=function(){var e=0;var t=0;var r=0;var s;var i;var a;var o,n,l;var h,p,u;var c,d,f;var y,m,_;var b,g,w;var v,j,x;var P;var D=this._positions;var T=this._pIndices.length;if(this._faceNormals==null)this._faceNormals=new Array(T);if(this._useFaceWeights&&this._faceWeights==null)this._faceWeights=new Array(T/3);while(e<T){s=this._pIndices[e++]*3;o=D[s];h=D[s+1];c=D[s+2];s=this._pIndices[e++]*3;n=D[s];p=D[s+1];d=D[s+2];s=this._pIndices[e++]*3;l=D[s];u=D[s+1];f=D[s+2];y=l-o;m=u-h;_=f-c;b=n-o;g=p-h;w=d-c;v=_*g-m*w;j=y*w-_*b;x=m*b-y*g;P=Math.sqrt(v*v+j*j+x*x);if(this._useFaceWeights){var A=P*1e4;if(A<1)A=1;this._faceWeights[r++]=A}P=1/P;this._faceNormals[t++]=v*P;this._faceNormals[t++]=j*P;this._faceNormals[t++]=x*P}this._faceNormalsDirty=false};t.prototype._pNotifyVerticesUpdate=function(){this._pStrideOffsetDirty=true;this.notifyPositionsUpdate();this.notifyNormalsUpdate();this.notifyTangentsUpdate();this.notifyUVsUpdate();this.notifySecondaryUVsUpdate();this.notifyJointIndicesUpdate();this.notifyJointWeightsUpdate()};t.prototype.notifyPositionsUpdate=function(){if(this._positionsDirty)return;this._positionsDirty=true;if(!this._positionsUpdated)this._positionsUpdated=new n(n.VERTICES_UPDATED,t.POSITION_DATA);this.dispatchEvent(this._positionsUpdated)};t.prototype.notifyNormalsUpdate=function(){if(this._vertexNormalsDirty)return;this._vertexNormalsDirty=true;if(!this._normalsUpdated)this._normalsUpdated=new n(n.VERTICES_UPDATED,t.NORMAL_DATA);this.dispatchEvent(this._normalsUpdated)};t.prototype.notifyTangentsUpdate=function(){if(this._vertexTangentsDirty)return;this._vertexTangentsDirty=true;if(!this._tangentsUpdated)this._tangentsUpdated=new n(n.VERTICES_UPDATED,t.TANGENT_DATA);this.dispatchEvent(this._tangentsUpdated)};t.prototype.notifyUVsUpdate=function(){if(this._uvsDirty)return;this._uvsDirty=true;if(!this._uvsUpdated)this._uvsUpdated=new n(n.VERTICES_UPDATED,t.UV_DATA);this.dispatchEvent(this._uvsUpdated)};t.prototype.notifySecondaryUVsUpdate=function(){if(this._secondaryUVsDirty)return;this._secondaryUVsDirty=true;if(!this._secondaryUVsUpdated)this._secondaryUVsUpdated=new n(n.VERTICES_UPDATED,t.SECONDARY_UV_DATA);this.dispatchEvent(this._secondaryUVsUpdated)};t.prototype.notifyJointIndicesUpdate=function(){if(this._jointIndicesDirty)return;this._jointIndicesDirty=true;if(!this._jointIndicesUpdated)this._jointIndicesUpdated=new n(n.VERTICES_UPDATED,t.JOINT_INDEX_DATA);this.dispatchEvent(this._jointIndicesUpdated)};t.prototype.notifyJointWeightsUpdate=function(){if(this._jointWeightsDirty)return;this._jointWeightsDirty=true;if(!this._jointWeightsUpdated)this._jointWeightsUpdated=new n(n.VERTICES_UPDATED,t.JOINT_WEIGHT_DATA);this.dispatchEvent(this._jointWeightsUpdated)};t.POSITION_DATA="positions";t.NORMAL_DATA="vertexNormals";t.TANGENT_DATA="vertexTangents";t.UV_DATA="uvs";t.SECONDARY_UV_DATA="secondaryUVs";t.JOINT_INDEX_DATA="jointIndices";t.JOINT_WEIGHT_DATA="jointWeights";t.POSITION_FORMAT="float3";t.NORMAL_FORMAT="float3";t.TANGENT_FORMAT="float3";t.UV_FORMAT="float2";t.SECONDARY_UV_FORMAT="float2";return t}(a);t.exports=l},{"awayjs-core/lib/geom/Vector3D":151,"awayjs-display/lib/base/SubGeometryBase":69,"awayjs-display/lib/base/TriangleSubMesh":73,"awayjs-display/lib/events/SubGeometryEvent":94}],73:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/library/AssetType");var a=e("awayjs-display/lib/base/SubMeshBase");var o=function(e){s(t,e);function t(t,r,s){if(s===void 0){s=null}e.call(this);this._pParentMesh=r;this._subGeometry=t;this.material=s}Object.defineProperty(t.prototype,"assetType",{get:function(){return i.TRIANGLE_SUB_MESH},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"subGeometry",{get:function(){return this._subGeometry},enumerable:true,configurable:true});t.prototype.dispose=function(){e.prototype.dispose.call(this)};t.prototype._iCollectRenderable=function(e){e.applyTriangleSubMesh(this)};return t}(a);t.exports=o},{"awayjs-core/lib/library/AssetType":156,"awayjs-display/lib/base/SubMeshBase":70}],74:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/library/AssetType");var a=e("awayjs-core/lib/errors/ArgumentError");var o=e("awayjs-core/lib/errors/Error");var n=e("awayjs-core/lib/errors/RangeError");var l=e("awayjs-display/lib/base/DisplayObject");var h=function(e){s(t,e);function t(){e.call(this);this._mouseChildren=true;this._children=new Array}Object.defineProperty(t.prototype,"assetType",{get:function(){return i.CONTAINER},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mouseChildren",{get:function(){return this._mouseChildren},set:function(e){if(this._mouseChildren==e)return;this._mouseChildren=e;this._pUpdateImplicitMouseEnabled(this._pParent?this._pParent.mouseChildren:true)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numChildren",{get:function(){return this._children.length},enumerable:true,configurable:true});t.prototype.addChild=function(e){if(e==null)throw new o("Parameter child cannot be null.");if(e._pParent)e._pParent.removeChildInternal(e);e.iSetParent(this);this._children.push(e);return e};t.prototype.addChildAt=function(e,t){return e};t.prototype.addChildren=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t-0]=arguments[t]}var r=e.length;for(var s=0;s<r;s++)this.addChild(e[s])};t.prototype.clone=function(){var e=new t;e.pivot=this.pivot;e._iMatrix3D=this._iMatrix3D;e.partition=this.partition;e.name=name;var r=this._children.length;for(var s=0;s<r;++s)e.addChild(this._children[s].clone());return e};t.prototype.contains=function(e){return this._children.indexOf(e)>=0};t.prototype.disposeWithChildren=function(){this.dispose();while(this.numChildren>0)this.getChildAt(0).dispose()};t.prototype.getChildAt=function(e){var t=this._children[e];if(t==null)throw new n("Index does not exist in the child list of the caller");return t};t.prototype.getChildByName=function(e){var t=this._children.length;for(var r=0;r<t;++r)if(this._children[r].name==e)return this._children[r];return null};t.prototype.getChildIndex=function(e){var t=this._children.indexOf(e);if(t==-1)throw new a("Child parameter is not a child of the caller");return t};t.prototype.getObjectsUnderPoint=function(e){return new Array};t.prototype.removeChild=function(e){if(e==null)throw new o("Parameter child cannot be null");this.removeChildInternal(e);e.iSetParent(null);return e};t.prototype.removeChildAt=function(e){return this.removeChild(this._children[e])};t.prototype.removeChildren=function(e,t){if(e===void 0){e=0}if(t===void 0){t=2147483647}if(e<0)throw new n("beginIndex is out of range of the child list");if(t>this._children.length)throw new n("endIndex is out of range of the child list");for(var r=e;r<t;r++)this.removeChild(this._children[r])};t.prototype.setChildIndex=function(e,t){};t.prototype.swapChildren=function(e,t){};t.prototype.swapChildrenAt=function(e,t){};t.prototype.pInvalidateSceneTransform=function(){e.prototype.pInvalidateSceneTransform.call(this);var t=this._children.length;for(var r=0;r<t;++r)this._children[r].pInvalidateSceneTransform()};t.prototype._pUpdateScene=function(t){e.prototype._pUpdateScene.call(this,t);var r=this._children.length;for(var s=0;s<r;++s)this._children[s]._pUpdateScene(t)};t.prototype._pUpdateImplicitMouseEnabled=function(t){e.prototype._pUpdateImplicitMouseEnabled.call(this,t);var r=this._children.length;for(var s=0;s<r;++s)this._children[s]._pUpdateImplicitMouseEnabled(this._mouseChildren)};t.prototype._pUpdateImplicitVisibility=function(t){e.prototype._pUpdateImplicitVisibility.call(this,t);
var r=this._children.length;for(var s=0;s<r;++s)this._children[s]._pUpdateImplicitVisibility(this._pImplicitVisibility)};t.prototype._pUpdateImplicitPartition=function(t){e.prototype._pUpdateImplicitPartition.call(this,t);var r=this._children.length;for(var s=0;s<r;++s)this._children[s]._pUpdateImplicitPartition(this._pImplicitPartition)};t.prototype.removeChildInternal=function(e){this._children.splice(this.getChildIndex(e),1);return e};return t}(l);t.exports=h},{"awayjs-core/lib/errors/ArgumentError":127,"awayjs-core/lib/errors/Error":128,"awayjs-core/lib/errors/RangeError":130,"awayjs-core/lib/library/AssetType":156,"awayjs-display/lib/base/DisplayObject":63}],75:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/library/AssetLibraryBundle");var a=e("awayjs-core/lib/library/AssetLoader");var o=e("awayjs-core/lib/events/AssetEvent");var n=e("awayjs-core/lib/events/IOErrorEvent");var l=e("awayjs-core/lib/events/LoaderEvent");var h=e("awayjs-core/lib/events/ParserEvent");var p=e("awayjs-display/lib/containers/DisplayObjectContainer");var u=function(e){s(t,e);function t(t,r){var s=this;if(t===void 0){t=true}if(r===void 0){r=null}e.call(this);this._loadingSessions=new Array;this._useAssetLib=t;this._assetLibId=r;this._onResourceCompleteDelegate=function(e){return s.onResourceComplete(e)};this._onAssetCompleteDelegate=function(e){return s.onAssetComplete(e)}}Object.defineProperty(t.prototype,"content",{get:function(){return this._content},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"contentLoaderInfo",{get:function(){return this._contentLoaderInfo},enumerable:true,configurable:true});t.prototype.close=function(){if(this._useAssetLib){var e;e=i.getInstance(this._assetLibId);e.stopAllLoadingSessions();this._loadingSessions=null;return}var t;var r=this._loadingSessions.length;for(t=0;t<r;t++){this.removeListeners(this._loadingSessions[t]);this._loadingSessions[t].stop();this._loadingSessions[t]=null}this._loadingSessions=null};t.prototype.load=function(e,t,r,s){if(t===void 0){t=null}if(r===void 0){r=null}if(s===void 0){s=null}var n;if(this._useAssetLib){var h;h=i.getInstance(this._assetLibId);n=h.load(e,t,r,s)}else{var p=new a;this._loadingSessions.push(p);n=p.load(e,t,r,s)}n.addEventListener(l.RESOURCE_COMPLETE,this._onResourceCompleteDelegate);n.addEventListener(o.ASSET_COMPLETE,this._onAssetCompleteDelegate);n._iLoader._iAddErrorHandler(this.onLoadError);n._iLoader._iAddParseErrorHandler(this.onParseError);return n};t.prototype.loadData=function(e,t,r,s){if(t===void 0){t=null}if(r===void 0){r=null}if(s===void 0){s=null}var n;if(this._useAssetLib){var h;h=i.getInstance(this._assetLibId);n=h.loadData(e,t,r,s)}else{var p=new a;this._loadingSessions.push(p);n=p.loadData(e,"",t,r,s)}n.addEventListener(l.RESOURCE_COMPLETE,this._onResourceCompleteDelegate);n.addEventListener(o.ASSET_COMPLETE,this._onAssetCompleteDelegate);n._iLoader._iAddErrorHandler(this.onLoadError);n._iLoader._iAddParseErrorHandler(this.onParseError);return n};t.prototype.unload=function(){};t.enableParser=function(e){a.enableParser(e)};t.enableParsers=function(e){a.enableParsers(e)};t.prototype.removeListeners=function(e){e.removeEventListener(l.RESOURCE_COMPLETE,this._onResourceCompleteDelegate);e.removeEventListener(o.ASSET_COMPLETE,this._onAssetCompleteDelegate)};t.prototype.onAssetComplete=function(e){this.dispatchEvent(e)};t.prototype.onLoadError=function(e){if(this.hasEventListener(n.IO_ERROR)){this.dispatchEvent(e);return true}else{return false}};t.prototype.onParseError=function(e){if(this.hasEventListener(h.PARSE_ERROR)){this.dispatchEvent(e);return true}else{return false}};t.prototype.onResourceComplete=function(e){this._content=e.content;if(this._content)this.addChild(this._content);this.dispatchEvent(e)};return t}(p);t.exports=u},{"awayjs-core/lib/events/AssetEvent":131,"awayjs-core/lib/events/IOErrorEvent":135,"awayjs-core/lib/events/LoaderEvent":136,"awayjs-core/lib/events/ParserEvent":137,"awayjs-core/lib/library/AssetLibraryBundle":152,"awayjs-core/lib/library/AssetLoader":154,"awayjs-display/lib/containers/DisplayObjectContainer":74}],76:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/events/EventDispatcher");var a=e("awayjs-display/lib/containers/DisplayObjectContainer");var o=e("awayjs-display/lib/events/SceneEvent");var n=e("awayjs-display/lib/partition/NodeBase");var l=e("awayjs-display/lib/partition/Partition");var h=function(e){s(t,e);function t(){e.call(this);this._expandedPartitions=new Array;this._partitions=new Array;this._iCollectionMark=0;this._iSceneGraphRoot=new a;this._iSceneGraphRoot._iSetScene(this);this._iSceneGraphRoot._iIsRoot=true;this._iSceneGraphRoot.partition=new l(new n)}t.prototype.traversePartitions=function(e){var t=0;var r=this._partitions.length;e.scene=this;while(t<r){this._iCollectionMark++;this._partitions[t++].traverse(e)}};Object.defineProperty(t.prototype,"partition",{get:function(){return this._iSceneGraphRoot.partition},set:function(e){this._iSceneGraphRoot.partition=e;this.dispatchEvent(new o(o.PARTITION_CHANGED,this._iSceneGraphRoot))},enumerable:true,configurable:true});t.prototype.contains=function(e){return this._iSceneGraphRoot.contains(e)};t.prototype.addChild=function(e){return this._iSceneGraphRoot.addChild(e)};t.prototype.removeChild=function(e){this._iSceneGraphRoot.removeChild(e)};t.prototype.removeChildAt=function(e){this._iSceneGraphRoot.removeChildAt(e)};t.prototype.getChildAt=function(e){return this._iSceneGraphRoot.getChildAt(e)};Object.defineProperty(t.prototype,"numChildren",{get:function(){return this._iSceneGraphRoot.numChildren},enumerable:true,configurable:true});t.prototype.iRegisterEntity=function(e){if(e.partition)this.iRegisterPartition(e.partition);if(e.isEntity)e._iAssignedPartition.iMarkForUpdate(e)};t.prototype.iRegisterPartition=function(e){this._expandedPartitions.push(e);if(this._partitions.indexOf(e)==-1)this._partitions.push(e)};t.prototype.iUnregisterEntity=function(e){if(e.partition)this.iUnregisterPartition(e.partition);if(e.isEntity)e._iAssignedPartition.iRemoveEntity(e)};t.prototype.iUnregisterPartition=function(e){this._expandedPartitions.splice(this._expandedPartitions.indexOf(e),1);if(this._expandedPartitions.indexOf(e)==-1)this._partitions.splice(this._partitions.indexOf(e),1)};return t}(i);t.exports=h},{"awayjs-core/lib/events/EventDispatcher":133,"awayjs-display/lib/containers/DisplayObjectContainer":74,"awayjs-display/lib/events/SceneEvent":93,"awayjs-display/lib/partition/NodeBase":105,"awayjs-display/lib/partition/Partition":107}],77:[function(e,t,r){var s=e("awayjs-core/lib/utils/getTimer");var i=e("awayjs-display/lib/containers/Scene");var a=e("awayjs-display/lib/pick/RaycastPicker");var o=e("awayjs-display/lib/entities/Camera");var n=e("awayjs-display/lib/events/CameraEvent");var l=e("awayjs-display/lib/events/SceneEvent");var h=e("awayjs-display/lib/events/RendererEvent");var p=e("awayjs-display/lib/managers/MouseManager");var u=function(){function e(e,t,r){var s=this;if(t===void 0){t=null}if(r===void 0){r=null}this._width=0;this._height=0;this._time=0;this._deltaTime=0;this._backgroundColor=0;this._backgroundAlpha=1;this._viewportDirty=true;this._scissorDirty=true;this._mousePicker=new a;this._onScenePartitionChangedDelegate=function(e){return s.onScenePartitionChanged(e)};this._onProjectionChangedDelegate=function(e){return s.onProjectionChanged(e)};this._onViewportUpdatedDelegate=function(e){return s.onViewportUpdated(e)};this._onScissorUpdatedDelegate=function(e){return s.onScissorUpdated(e)};this.scene=t||new i;this.camera=r||new o;this.renderer=e;document.body.style.margin="0px";this._htmlElement=document.createElement("div");this._htmlElement.style.position="absolute";document.body.appendChild(this._htmlElement);this._mouseManager=p.getInstance();this._mouseManager.registerView(this)}e.prototype.onScenePartitionChanged=function(e){if(this._pCamera)this._pCamera.partition=this.scene.partition};Object.defineProperty(e.prototype,"mouseX",{get:function(){return this._pMouseX},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"mouseY",{get:function(){return this._pMouseY},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"htmlElement",{get:function(){return this._htmlElement},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"renderer",{get:function(){return this._pRenderer},set:function(e){if(this._pRenderer==e)return;if(this._pRenderer){this._pRenderer.dispose();this._pRenderer.removeEventListener(h.VIEWPORT_UPDATED,this._onViewportUpdatedDelegate);this._pRenderer.removeEventListener(h.SCISSOR_UPDATED,this._onScissorUpdatedDelegate)}this._pRenderer=e;this._pRenderer.addEventListener(h.VIEWPORT_UPDATED,this._onViewportUpdatedDelegate);this._pRenderer.addEventListener(h.SCISSOR_UPDATED,this._onScissorUpdatedDelegate);this._pEntityCollector=this._pRenderer._iCreateEntityCollector();if(this._pCamera)this._pEntityCollector.camera=this._pCamera;this._pRenderer._iBackgroundR=(this._backgroundColor>>16&255)/255;this._pRenderer._iBackgroundG=(this._backgroundColor>>8&255)/255;this._pRenderer._iBackgroundB=(this._backgroundColor&255)/255;this._pRenderer._iBackgroundAlpha=this._backgroundAlpha;this._pRenderer.width=this._width;this._pRenderer.height=this._height;this._pRenderer.shareContext=this._shareContext},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"shareContext",{get:function(){return this._shareContext},set:function(e){if(this._shareContext==e)return;this._shareContext=e;if(this._pRenderer)this._pRenderer.shareContext=this._shareContext},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){if(this._backgroundColor==e)return;this._backgroundColor=e;this._pRenderer._iBackgroundR=(e>>16&255)/255;this._pRenderer._iBackgroundG=(e>>8&255)/255;this._pRenderer._iBackgroundB=(e&255)/255},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundAlpha},set:function(e){if(e>1)e=1;else if(e<0)e=0;if(this._backgroundAlpha==e)return;this._pRenderer._iBackgroundAlpha=this._backgroundAlpha=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"camera",{get:function(){return this._pCamera},set:function(e){if(this._pCamera==e)return;if(this._pCamera)this._pCamera.removeEventListener(n.PROJECTION_CHANGED,this._onProjectionChangedDelegate);this._pCamera=e;if(this._pEntityCollector)this._pEntityCollector.camera=this._pCamera;if(this._pScene)this._pCamera.partition=this._pScene.partition;this._pCamera.addEventListener(n.PROJECTION_CHANGED,this._onProjectionChangedDelegate);this._scissorDirty=true;this._viewportDirty=true},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"scene",{get:function(){return this._pScene},set:function(e){if(this._pScene==e)return;if(this._pScene)this._pScene.removeEventListener(l.PARTITION_CHANGED,this._onScenePartitionChangedDelegate);this._pScene=e;this._pScene.addEventListener(l.PARTITION_CHANGED,this._onScenePartitionChangedDelegate);if(this._pCamera)this._pCamera.partition=this._pScene.partition},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"deltaTime",{get:function(){return this._deltaTime},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(e){if(this._width==e)return;this._width=e;this._aspectRatio=this._width/this._height;this._pCamera.projection._iAspectRatio=this._aspectRatio;this._pRenderer.width=e;this._htmlElement.style.width=e+"px"},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(e){if(this._height==e)return;this._height=e;this._aspectRatio=this._width/this._height;this._pCamera.projection._iAspectRatio=this._aspectRatio;this._pRenderer.height=e;this._htmlElement.style.height=e+"px"},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"mousePicker",{get:function(){return this._mousePicker},set:function(e){if(this._mousePicker==e)return;if(e==null)this._mousePicker=new a;else this._mousePicker=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"x",{get:function(){return this._pRenderer.x},set:function(e){if(this._pRenderer.x==e)return;this._pRenderer.x==e;this._htmlElement.style.left=e+"px"},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"y",{get:function(){return this._pRenderer.y},set:function(e){if(this._pRenderer.y==e)return;this._pRenderer.y==e;this._htmlElement.style.top=e+"px"},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"visible",{get:function(){return this._htmlElement.style.visibility=="visible"},set:function(e){this._htmlElement.style.visibility=e?"visible":"hidden"},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"renderedFacesCount",{get:function(){return 0},enumerable:true,configurable:true});e.prototype.render=function(){this.pUpdateTime();this._pCamera.projection._iAspectRatio=this._aspectRatio;if(this._scissorDirty){this._scissorDirty=false;this._pCamera.projection._iUpdateScissorRect(this._pRenderer.scissorRect.x,this._pRenderer.scissorRect.y,this._pRenderer.scissorRect.width,this._pRenderer.scissorRect.height)}if(this._viewportDirty){this._viewportDirty=false;this._pCamera.projection._iUpdateViewport(this._pRenderer.viewPort.x,this._pRenderer.viewPort.y,this._pRenderer.viewPort.width,this._pRenderer.viewPort.height)}if(!this._shareContext){if(this.forceMouseMove&&this._htmlElement==this._mouseManager._iActiveDiv&&!this._mouseManager._iUpdateDirty)this._mouseManager._iCollidingObject=this.mousePicker.getViewCollision(this._pMouseX,this._pMouseY,this);this._mouseManager.fireMouseEvents(this.forceMouseMove)}this._pEntityCollector.clear();this._pScene.traversePartitions(this._pEntityCollector);this._pRenderer.render(this._pEntityCollector)};e.prototype.pUpdateTime=function(){var e=s();if(this._time==0)this._time=e;this._deltaTime=e-this._time;this._time=e};e.prototype.dispose=function(){this._pRenderer.dispose();this._mouseManager.unregisterView(this);this._mouseManager=null;this._pRenderer=null;this._pEntityCollector=null};Object.defineProperty(e.prototype,"iEntityCollector",{get:function(){return this._pEntityCollector},enumerable:true,configurable:true});e.prototype.onProjectionChanged=function(e){this._scissorDirty=true;this._viewportDirty=true};e.prototype.onViewportUpdated=function(e){this._viewportDirty=true};e.prototype.onScissorUpdated=function(e){this._scissorDirty=true};e.prototype.project=function(e){var t=this._pCamera.project(e);t.x=t.x*this._pRenderer.viewPort.width/2+this._width*this._pCamera.projection.originX;t.y=t.y*this._pRenderer.viewPort.height/2+this._height*this._pCamera.projection.originY;return t};e.prototype.unproject=function(e,t,r){return this._pCamera.unproject(2*(e-this._width*this._pCamera.projection.originX)/this._pRenderer.viewPort.width,2*(t-this._height*this._pCamera.projection.originY)/this._pRenderer.viewPort.height,r)};e.prototype.getRay=function(e,t,r){return this._pCamera.getRay((e*2-this._width)/this._width,(t*2-this._height)/this._height,r)};e.prototype.updateCollider=function(){if(!this._shareContext){if(this._htmlElement==this._mouseManager._iActiveDiv)this._mouseManager._iCollidingObject=this.mousePicker.getViewCollision(this._pMouseX,this._pMouseY,this)}else{var e=this.mousePicker.getViewCollision(this._pMouseX,this._pMouseY,this);if(this.layeredView||this._mouseManager._iCollidingObject==null||e.rayEntryDistance<this._mouseManager._iCollidingObject.rayEntryDistance)this._mouseManager._iCollidingObject=e}};return e}();t.exports=u},{"awayjs-core/lib/utils/getTimer":191,"awayjs-display/lib/containers/Scene":76,"awayjs-display/lib/entities/Camera":80,"awayjs-display/lib/events/CameraEvent":87,"awayjs-display/lib/events/RendererEvent":92,"awayjs-display/lib/events/SceneEvent":93,"awayjs-display/lib/managers/MouseManager":95,"awayjs-display/lib/pick/RaycastPicker":111}],78:[function(e,t,r){var s=e("awayjs-core/lib/errors/AbstractMethodError");var i=function(){function e(e){if(e===void 0){e=null}this._pAutoUpdate=true;this.targetObject=e}e.prototype.pNotifyUpdate=function(){if(this._pTargetObject&&this._pTargetObject._iAssignedPartition&&this._pAutoUpdate){this._pTargetObject._iAssignedPartition.iMarkForUpdate(this._pTargetObject)}};Object.defineProperty(e.prototype,"targetObject",{get:function(){return this._pTargetObject},set:function(e){if(this._pTargetObject==e){return}if(this._pTargetObject&&this._pAutoUpdate){this._pTargetObject._iController=null}this._pTargetObject=e;if(this._pTargetObject&&this._pAutoUpdate){this._pTargetObject._iController=this}this.pNotifyUpdate()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._pAutoUpdate},set:function(e){if(this._pAutoUpdate==e){return}this._pAutoUpdate=e;if(this._pTargetObject){if(this._pTargetObject){this._pTargetObject._iController=this}else{this._pTargetObject._iController=null}}},enumerable:true,configurable:true});e.prototype.update=function(e){if(e===void 0){e=true}throw new s};return e}();t.exports=i},{"awayjs-core/lib/errors/AbstractMethodError":126}],79:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/geom/MathConsts");var a=e("awayjs-display/lib/controllers/ControllerBase");var o=function(e){s(t,e);function t(t,r,s,i,a,o,n){if(t===void 0){t=null}if(r===void 0){r=0}if(s===void 0){s=90}if(i===void 0){i=-90}if(a===void 0){a=90}if(o===void 0){o=8}if(n===void 0){n=false}e.call(this,t);this._iCurrentPanAngle=0;this._iCurrentTiltAngle=90;this._panAngle=0;this._tiltAngle=90;this._minTiltAngle=-90;this._maxTiltAngle=90;this._steps=8;this._walkIncrement=0;this._strafeIncrement=0;this._wrapPanAngle=false;this.fly=false;this.panAngle=r;this.tiltAngle=s;this.minTiltAngle=i;this.maxTiltAngle=a;this.steps=o;this.wrapPanAngle=n;this._iCurrentPanAngle=this._panAngle;this._iCurrentTiltAngle=this._tiltAngle}Object.defineProperty(t.prototype,"steps",{get:function(){return this._steps},set:function(e){e=e<1?1:e;if(this._steps==e)return;this._steps=e;this.pNotifyUpdate()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"panAngle",{get:function(){return this._panAngle},set:function(e){if(this._panAngle==e)return;this._panAngle=e;this.pNotifyUpdate()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"tiltAngle",{get:function(){return this._tiltAngle},set:function(e){e=Math.max(this._minTiltAngle,Math.min(this._maxTiltAngle,e));if(this._tiltAngle==e)return;this._tiltAngle=e;this.pNotifyUpdate()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"minTiltAngle",{get:function(){return this._minTiltAngle},set:function(e){if(this._minTiltAngle==e)return;this._minTiltAngle=e;this.tiltAngle=Math.max(this._minTiltAngle,Math.min(this._maxTiltAngle,this._tiltAngle))},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"maxTiltAngle",{get:function(){return this._maxTiltAngle},set:function(e){if(this._maxTiltAngle==e)return;this._maxTiltAngle=e;this.tiltAngle=Math.max(this._minTiltAngle,Math.min(this._maxTiltAngle,this._tiltAngle))},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"wrapPanAngle",{get:function(){return this._wrapPanAngle},set:function(e){if(this._wrapPanAngle==e)return;this._wrapPanAngle=e;this.pNotifyUpdate()},enumerable:true,configurable:true});t.prototype.update=function(e){if(e===void 0){e=true}if(this._tiltAngle!=this._iCurrentTiltAngle||this._panAngle!=this._iCurrentPanAngle){this.pNotifyUpdate();if(this._wrapPanAngle){if(this._panAngle<0){this._iCurrentPanAngle+=this._panAngle%360+360-this._panAngle;this._panAngle=this._panAngle%360+360}else{this._iCurrentPanAngle+=this._panAngle%360-this._panAngle;this._panAngle=this._panAngle%360}while(this._panAngle-this._iCurrentPanAngle<-180)this._iCurrentPanAngle-=360;while(this._panAngle-this._iCurrentPanAngle>180)this._iCurrentPanAngle+=360}if(e){this._iCurrentTiltAngle+=(this._tiltAngle-this._iCurrentTiltAngle)/(this.steps+1);this._iCurrentPanAngle+=(this._panAngle-this._iCurrentPanAngle)/(this.steps+1)}else{this._iCurrentTiltAngle=this._tiltAngle;this._iCurrentPanAngle=this._panAngle}if(Math.abs(this.tiltAngle-this._iCurrentTiltAngle)<.01&&Math.abs(this._panAngle-this._iCurrentPanAngle)<.01){this._iCurrentTiltAngle=this._tiltAngle;this._iCurrentPanAngle=this._panAngle}}this.targetObject.rotationX=this._iCurrentTiltAngle;this.targetObject.rotationY=this._iCurrentPanAngle;if(this._walkIncrement){if(this.fly){this.targetObject.transform.moveForward(this._walkIncrement)}else{this.targetObject.x+=this._walkIncrement*Math.sin(this._panAngle*i.DEGREES_TO_RADIANS);this.targetObject.z+=this._walkIncrement*Math.cos(this._panAngle*i.DEGREES_TO_RADIANS)}this._walkIncrement=0}if(this._strafeIncrement){this.targetObject.transform.moveRight(this._strafeIncrement);this._strafeIncrement=0}};t.prototype.incrementWalk=function(e){if(e==0)return;this._walkIncrement+=e;this.pNotifyUpdate()};t.prototype.incrementStrafe=function(e){if(e==0)return;this._strafeIncrement+=e;this.pNotifyUpdate()};return t}(a);t.exports=o},{"awayjs-core/lib/geom/MathConsts":142,"awayjs-display/lib/controllers/ControllerBase":78}],80:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/bounds/NullBounds");var a=e("awayjs-core/lib/geom/Matrix3D");var o=e("awayjs-core/lib/geom/Plane3D");var n=e("awayjs-core/lib/library/AssetType");var l=e("awayjs-core/lib/events/ProjectionEvent");var h=e("awayjs-core/lib/projections/PerspectiveProjection");var p=e("awayjs-display/lib/containers/DisplayObjectContainer");var u=e("awayjs-display/lib/events/CameraEvent");var c=e("awayjs-display/lib/partition/CameraNode");var d=function(e){s(t,e);function t(t){var r=this;if(t===void 0){t=null}e.call(this);this._viewProjection=new a;this._viewProjectionDirty=true;this._frustumPlanesDirty=true;this._pIsEntity=true;this._onProjectionMatrixChangedDelegate=function(e){return r.onProjectionMatrixChanged(e)};this._projection=t||new h;this._projection.addEventListener(l.MATRIX_CHANGED,this._onProjectionMatrixChangedDelegate);this._frustumPlanes=[];for(var s=0;s<6;++s)this._frustumPlanes[s]=new o;this.z=-1e3}t.prototype.pCreateDefaultBoundingVolume=function(){return new i};t.prototype.pCreateEntityPartitionNode=function(){return new c(this)};Object.defineProperty(t.prototype,"assetType",{get:function(){return n.CAMERA},enumerable:true,configurable:true});t.prototype.onProjectionMatrixChanged=function(e){this._viewProjectionDirty=true;this._frustumPlanesDirty=true;this.dispatchEvent(e)};Object.defineProperty(t.prototype,"frustumPlanes",{get:function(){if(this._frustumPlanesDirty)this.updateFrustum();return this._frustumPlanes},enumerable:true,configurable:true});t.prototype.updateFrustum=function(){var e,t,r;var s,i,a,o;var n,l,h,p;var u,c,d,f;var y,m,_,b;var g;var w=new Array(16);var v;this.viewProjection.copyRawDataTo(w);s=w[0];i=w[4];a=w[8];o=w[12];n=w[1];l=w[5];h=w[9];p=w[13];u=w[2];c=w[6];d=w[10];f=w[14];y=w[3];m=w[7];_=w[11];b=w[15];g=this._frustumPlanes[0];e=y+s;t=m+i;r=_+a;v=1/Math.sqrt(e*e+t*t+r*r);g.a=e*v;g.b=t*v;g.c=r*v;g.d=-(b+o)*v;g=this._frustumPlanes[1];e=y-s;t=m-i;r=_-a;v=1/Math.sqrt(e*e+t*t+r*r);g.a=e*v;g.b=t*v;g.c=r*v;g.d=(o-b)*v;g=this._frustumPlanes[2];e=y+n;t=m+l;r=_+h;v=1/Math.sqrt(e*e+t*t+r*r);g.a=e*v;g.b=t*v;g.c=r*v;g.d=-(b+p)*v;g=this._frustumPlanes[3];e=y-n;t=m-l;r=_-h;v=1/Math.sqrt(e*e+t*t+r*r);g.a=e*v;g.b=t*v;g.c=r*v;g.d=(p-b)*v;g=this._frustumPlanes[4];e=u;t=c;r=d;v=1/Math.sqrt(e*e+t*t+r*r);g.a=e*v;g.b=t*v;g.c=r*v;g.d=-f*v;g=this._frustumPlanes[5];e=y-u;t=m-c;r=_-d;v=1/Math.sqrt(e*e+t*t+r*r);g.a=e*v;g.b=t*v;g.c=r*v;g.d=(f-b)*v;this._frustumPlanesDirty=false};t.prototype.pInvalidateSceneTransform=function(){e.prototype.pInvalidateSceneTransform.call(this);this._viewProjectionDirty=true;this._frustumPlanesDirty=true};t.prototype.pUpdateBounds=function(){this._pBoundsInvalid=false;this._pBounds.nullify()};Object.defineProperty(t.prototype,"projection",{get:function(){return this._projection},set:function(e){if(this._projection==e)return;if(!e)throw new Error("Projection cannot be null!");this._projection.removeEventListener(l.MATRIX_CHANGED,this._onProjectionMatrixChangedDelegate);this._projection=e;this._projection.addEventListener(l.MATRIX_CHANGED,this._onProjectionMatrixChangedDelegate);this.dispatchEvent(new u(u.PROJECTION_CHANGED,this))},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"viewProjection",{get:function(){if(this._viewProjectionDirty){this._viewProjection.copyFrom(this.inverseSceneTransform);this._viewProjection.append(this._projection.matrix);this._viewProjectionDirty=false}return this._viewProjection},enumerable:true,configurable:true});t.prototype.getRay=function(e,t,r){return this.sceneTransform.deltaTransformVector(this._projection.unproject(e,t,r))};t.prototype.project=function(e){return this._projection.project(this.inverseSceneTransform.transformVector(e))};t.prototype.unproject=function(e,t,r){return this.sceneTransform.transformVector(this._projection.unproject(e,t,r))};t.prototype._iCollectRenderables=function(e){if(this._iSourcePrefab)this._iSourcePrefab._iValidate();this._iCollectRenderable(e)};t.prototype._iCollectRenderable=function(e){};return t}(p);t.exports=d},{"awayjs-core/lib/bounds/NullBounds":125,"awayjs-core/lib/events/ProjectionEvent":139,"awayjs-core/lib/geom/Matrix3D":144,"awayjs-core/lib/geom/Plane3D":147,"awayjs-core/lib/library/AssetType":156,"awayjs-core/lib/projections/PerspectiveProjection":176,"awayjs-display/lib/containers/DisplayObjectContainer":74,"awayjs-display/lib/events/CameraEvent":87,"awayjs-display/lib/partition/CameraNode":101}],81:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/bounds/NullBounds");var a=e("awayjs-core/lib/geom/Matrix3D");var o=e("awayjs-core/lib/geom/Vector3D");var n=e("awayjs-display/lib/base/LightBase");var l=e("awayjs-display/lib/partition/DirectionalLightNode");var h=e("awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper");var p=function(e){s(t,e);function t(t,r,s){if(t===void 0){t=0}if(r===void 0){r=-1}if(s===void 0){s=1}e.call(this);this._pIsEntity=true;this.direction=new o(t,r,s);this._sceneDirection=new o}Object.defineProperty(t.prototype,"sceneDirection",{get:function(){if(this._pSceneTransformDirty)this.pUpdateSceneTransform();return this._sceneDirection},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},set:function(e){this._direction=e;if(!this._tmpLookAt)this._tmpLookAt=new o;this._tmpLookAt.x=this.x+this._direction.x;this._tmpLookAt.y=this.y+this._direction.y;this._tmpLookAt.z=this.z+this._direction.z;this.lookAt(this._tmpLookAt)},enumerable:true,configurable:true});t.prototype.pCreateDefaultBoundingVolume=function(){return new i};t.prototype.pUpdateBounds=function(){};t.prototype.pUpdateSceneTransform=function(){e.prototype.pUpdateSceneTransform.call(this);this.sceneTransform.copyColumnTo(2,this._sceneDirection);this._sceneDirection.normalize()};t.prototype.pCreateShadowMapper=function(){return new h};t.prototype.pCreateEntityPartitionNode=function(){return new l(this)};t.prototype.iGetObjectProjectionMatrix=function(e,t,r){if(r===void 0){r=null}var s=new Array;var i=e.bounds;var o=new a;o.copyFrom(e.getRenderSceneTransform(t));o.append(this.inverseSceneTransform);if(!this._projAABBPoints)this._projAABBPoints=[];o.transformVectors(i.aabbPoints,this._projAABBPoints);var n=Infinity,l=-Infinity;var h=Infinity,p=-Infinity;var u=Infinity,c=-Infinity;var d;for(var f=0;f<24;){d=this._projAABBPoints[f++];if(d<n)n=d;if(d>l)l=d;d=this._projAABBPoints[f++];if(d<h)h=d;if(d>p)p=d;d=this._projAABBPoints[f++];if(d<u)u=d;if(d>c)c=d}var y=1/(l-n);var m=1/(p-h);var _=1/(c-u);s[0]=2*y;s[5]=2*m;s[10]=_;s[12]=-(l+n)*y;s[13]=-(p+h)*m;s[14]=-u*_;s[1]=s[2]=s[3]=s[4]=s[6]=s[7]=s[8]=s[9]=s[11]=0;s[15]=1;if(!r)r=new a;r.copyRawDataFrom(s);r.prepend(o);return r};t.prototype._iCollectRenderables=function(e){};return t}(n);t.exports=p},{"awayjs-core/lib/bounds/NullBounds":125,"awayjs-core/lib/geom/Matrix3D":144,"awayjs-core/lib/geom/Vector3D":151,"awayjs-display/lib/base/LightBase":65,"awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper":99,"awayjs-display/lib/partition/DirectionalLightNode":102}],82:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/bounds/NullBounds");var a=e("awayjs-core/lib/errors/Error");var o=e("awayjs-display/lib/base/LightBase");var n=e("awayjs-display/lib/partition/LightProbeNode");var l=function(e){s(t,e);function t(t,r){if(r===void 0){r=null}e.call(this);this._pIsEntity=true;this._diffuseMap=t;this._specularMap=r}Object.defineProperty(t.prototype,"diffuseMap",{get:function(){return this._diffuseMap},set:function(e){this._diffuseMap=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"specularMap",{get:function(){return this._specularMap},set:function(e){this._specularMap=e},enumerable:true,configurable:true});t.prototype.pCreateEntityPartitionNode=function(){return new n(this)};t.prototype.pUpdateBounds=function(){this._pBoundsInvalid=false};t.prototype.pCreateDefaultBoundingVolume=function(){return new i};t.prototype.iGetObjectProjectionMatrix=function(e,t,r){if(r===void 0){r=null}throw new a("Object projection matrices are not supported for LightProbe objects!")};t.prototype._iCollectRenderables=function(e){};return t}(o);t.exports=l},{"awayjs-core/lib/bounds/NullBounds":125,"awayjs-core/lib/errors/Error":128,"awayjs-display/lib/base/LightBase":65,"awayjs-display/lib/partition/LightProbeNode":104}],83:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/library/AssetType");var a=e("awayjs-display/lib/base/Geometry");var o=e("awayjs-display/lib/containers/DisplayObjectContainer");var n=e("awayjs-display/lib/partition/EntityNode");var l=e("awayjs-display/lib/events/GeometryEvent");var h=function(e){s(t,e);function t(t,r){var s=this;if(r===void 0){r=null}e.call(this);this._castsShadows=true;this._shareAnimationGeometry=true;this._pIsEntity=true;this._subMeshes=new Array;this._onGeometryBoundsInvalidDelegate=function(e){return s.onGeometryBoundsInvalid(e)};this._onSubGeometryAddedDelegate=function(e){return s.onSubGeometryAdded(e)};this._onSubGeometryRemovedDelegate=function(e){return s.onSubGeometryRemoved(e)};this.geometry=t||new a;this.material=r}Object.defineProperty(t.prototype,"animator",{get:function(){return this._animator},set:function(e){if(this._animator)this._animator.removeOwner(this);this._animator=e;var t=this._subMeshes.length;var r;for(var s=0;s<t;++s){r=this._subMeshes[s];if(r.material){r.material.iRemoveOwner(r);r.material.iAddOwner(r)}r._iInvalidateRenderableGeometry()}if(this._animator)this._animator.addOwner(this)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"assetType",{get:function(){return i.MESH
},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"castsShadows",{get:function(){return this._castsShadows},set:function(e){this._castsShadows=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"geometry",{get:function(){if(this._iSourcePrefab)this._iSourcePrefab._iValidate();return this._geometry},set:function(e){var t;if(this._geometry){this._geometry.removeEventListener(l.BOUNDS_INVALID,this._onGeometryBoundsInvalidDelegate);this._geometry.removeEventListener(l.SUB_GEOMETRY_ADDED,this._onSubGeometryAddedDelegate);this._geometry.removeEventListener(l.SUB_GEOMETRY_REMOVED,this._onSubGeometryRemovedDelegate);for(t=0;t<this._subMeshes.length;++t)this._subMeshes[t].dispose();this._subMeshes.length=0}this._geometry=e;if(this._geometry){this._geometry.addEventListener(l.BOUNDS_INVALID,this._onGeometryBoundsInvalidDelegate);this._geometry.addEventListener(l.SUB_GEOMETRY_ADDED,this._onSubGeometryAddedDelegate);this._geometry.addEventListener(l.SUB_GEOMETRY_REMOVED,this._onSubGeometryRemovedDelegate);var r=this._geometry.subGeometries;for(t=0;t<r.length;++t)this.addSubMesh(r[t])}},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"material",{get:function(){return this._material},set:function(e){if(e==this._material)return;var t;var r=this._subMeshes.length;var s;for(t=0;t<r;t++)if(this._material&&(s=this._subMeshes[t]).material==this._material)this._material.iRemoveOwner(s);this._material=e;for(t=0;t<r;t++)if(this._material&&(s=this._subMeshes[t]).material==this._material)this._material.iAddOwner(s)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"shareAnimationGeometry",{get:function(){return this._shareAnimationGeometry},set:function(e){this._shareAnimationGeometry=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"subMeshes",{get:function(){if(this._iSourcePrefab)this._iSourcePrefab._iValidate();return this._subMeshes},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"uvTransform",{get:function(){return this._uvTransform},set:function(e){this._uvTransform=e},enumerable:true,configurable:true});t.prototype.bakeTransformations=function(){this.geometry.applyTransformation(this._iMatrix3D);this._iMatrix3D.identity()};t.prototype.dispose=function(){e.prototype.dispose.call(this);this.material=null;this.geometry=null};t.prototype.disposeWithAnimatorAndChildren=function(){this.disposeWithChildren();if(this._animator)this._animator.dispose()};t.prototype.clone=function(){var e=new t(this._geometry,this._material);e._iMatrix3D=this._iMatrix3D;e.pivot=this.pivot;e.partition=this.partition;e.bounds=this.bounds.clone();e.name=this.name;e.castsShadows=this.castsShadows;e.shareAnimationGeometry=this.shareAnimationGeometry;e.mouseEnabled=this.mouseEnabled;e.mouseChildren=this.mouseChildren;e.extra=this.extra;var r=this._subMeshes.length;for(var s=0;s<r;++s)e._subMeshes[s].material=this._subMeshes[s]._iGetExplicitMaterial();r=this.numChildren;var i;for(s=0;s<r;++s){i=this.getChildAt(s).clone();e.addChild(i)}if(this._animator)e.animator=this._animator.clone();return e};t.prototype.getSubMeshFromSubGeometry=function(e){return this._subMeshes[this._geometry.subGeometries.indexOf(e)]};t.prototype.pCreateEntityPartitionNode=function(){return new n(this)};t.prototype.pUpdateBounds=function(){var t,r,s;var i=this._geometry.subGeometries;var a;var o;var n=i.length;var l,h,p;var u,c,d;if(n>0){t=0;a=i[0];o=a.getBoundingPositions();l=u=o[t];h=c=o[t+1];p=d=o[t+2];r=n;while(r--){a=i[r];o=a.getBoundingPositions();t=o.length;while(t--){s=o[t];if(s<l)l=s;else if(s>u)u=s;s=o[t+1];if(s<h)h=s;else if(s>c)c=s;s=o[t+2];if(s<p)p=s;else if(s>d)d=s}}this._pBounds.fromExtremes(l,h,p,u,c,d)}else{this._pBounds.fromExtremes(0,0,0,0,0,0)}e.prototype.pUpdateBounds.call(this)};t.prototype.onGeometryBoundsInvalid=function(e){this.pInvalidateBounds()};t.prototype.onSubGeometryAdded=function(e){this.addSubMesh(e.subGeometry)};t.prototype.onSubGeometryRemoved=function(e){var t;var r=e.subGeometry;var s=this._subMeshes.length;var i;for(i=0;i<s;++i){t=this._subMeshes[i];if(t.subGeometry==r){t.dispose();this._subMeshes.splice(i,1);break}}--s;for(;i<s;++i)this._subMeshes[i]._iIndex=i};t.prototype.addSubMesh=function(e){var t=e.subMeshClass;var r=new t(e,this,null);var s=this._subMeshes.length;r._iIndex=s;this._subMeshes[s]=r;this.pInvalidateBounds()};t.prototype._iTestCollision=function(e,t){return this._pPickingCollider.testMeshCollision(this,this._pPickingCollisionVO,e,t)};t.prototype._iCollectRenderables=function(e){if(this._iSourcePrefab)this._iSourcePrefab._iValidate();var t=this._subMeshes.length;for(var r=0;r<t;r++)this._subMeshes[r]._iCollectRenderable(e)};t.prototype._iInvalidateRenderableGeometries=function(){var e=this._subMeshes.length;for(var t=0;t<e;++t)this._subMeshes[t]._iInvalidateRenderableGeometry()};return t}(o);t.exports=h},{"awayjs-core/lib/library/AssetType":156,"awayjs-display/lib/base/Geometry":64,"awayjs-display/lib/containers/DisplayObjectContainer":74,"awayjs-display/lib/events/GeometryEvent":89,"awayjs-display/lib/partition/EntityNode":103}],84:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/bounds/BoundingSphere");var a=e("awayjs-core/lib/geom/Matrix3D");var o=e("awayjs-core/lib/geom/Vector3D");var n=e("awayjs-display/lib/base/LightBase");var l=e("awayjs-display/lib/partition/PointLightNode");var h=e("awayjs-display/lib/materials/shadowmappers/CubeMapShadowMapper");var p=function(e){s(t,e);function t(){e.call(this);this._pRadius=9e4;this._pFallOff=1e5;this._pIsEntity=true;this._pFallOffFactor=1/(this._pFallOff*this._pFallOff-this._pRadius*this._pRadius)}t.prototype.pCreateShadowMapper=function(){return new h};Object.defineProperty(t.prototype,"radius",{get:function(){return this._pRadius},set:function(e){this._pRadius=e;if(this._pRadius<0){this._pRadius=0}else if(this._pRadius>this._pFallOff){this._pFallOff=this._pRadius;this.pInvalidateBounds()}this._pFallOffFactor=1/(this._pFallOff*this._pFallOff-this._pRadius*this._pRadius)},enumerable:true,configurable:true});t.prototype.iFallOffFactor=function(){return this._pFallOffFactor};Object.defineProperty(t.prototype,"fallOff",{get:function(){return this._pFallOff},set:function(e){this._pFallOff=e;if(this._pFallOff<0)this._pFallOff=0;if(this._pFallOff<this._pRadius)this._pRadius=this._pFallOff;this._pFallOffFactor=1/(this._pFallOff*this._pFallOff-this._pRadius*this._pRadius);this.pInvalidateBounds()},enumerable:true,configurable:true});t.prototype.pCreateEntityPartitionNode=function(){return new l(this)};t.prototype.pUpdateBounds=function(){this._pBounds.fromSphere(new o,this._pFallOff);this._pBoundsInvalid=false};t.prototype.pCreateDefaultBoundingVolume=function(){return new i};t.prototype.iGetObjectProjectionMatrix=function(e,t,r){if(r===void 0){r=null}var s=new Array(16);var i=e.bounds;var n=new a;n.copyFrom(e.getRenderSceneTransform(t));n.append(this._pParent.inverseSceneTransform);this.lookAt(n.position);n.copyFrom(e.getRenderSceneTransform(t));n.append(this.inverseSceneTransform);var l=i.aabb;var h=n.deltaTransformVector(new o(l.left,l.bottom,l.front));var p=n.deltaTransformVector(new o(l.right,l.top,l.back));var u=h.x*h.x+h.y*h.y+h.z*h.z;var c=p.x*p.x+p.y*p.y+p.z*p.z;var d=Math.sqrt(u>c?u:c);var f;var y;var m=n.rawData[14];f=m-d;y=m+d;s[5]=s[0]=f/d;s[10]=y/(y-f);s[11]=1;s[1]=s[2]=s[3]=s[4]=s[6]=s[7]=s[8]=s[9]=s[12]=s[13]=s[15]=0;s[14]=-f*s[10];if(!r)r=new a;r.copyRawDataFrom(s);r.prepend(n);return r};t.prototype._iCollectRenderables=function(e){};return t}(n);t.exports=p},{"awayjs-core/lib/bounds/BoundingSphere":123,"awayjs-core/lib/geom/Matrix3D":144,"awayjs-core/lib/geom/Vector3D":151,"awayjs-display/lib/base/LightBase":65,"awayjs-display/lib/materials/shadowmappers/CubeMapShadowMapper":98,"awayjs-display/lib/partition/PointLightNode":108}],85:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/bounds/NullBounds");var a=e("awayjs-core/lib/library/AssetType");var o=e("awayjs-display/lib/base/DisplayObject");var n=e("awayjs-display/lib/partition/SkyboxNode");var l=function(e){s(t,e);function t(t){e.call(this);this._pIsEntity=true;this.material=t}Object.defineProperty(t.prototype,"animator",{get:function(){return this._animator},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"uvTransform",{get:function(){return this._uvTransform},set:function(e){this._uvTransform=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"material",{get:function(){return this._material},set:function(e){if(e==this._material)return;if(this._material)this._material.iRemoveOwner(this);this._material=e;if(this._material)this._material.iAddOwner(this)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"assetType",{get:function(){return a.SKYBOX},enumerable:true,configurable:true});t.prototype.pInvalidateBounds=function(){};t.prototype.pCreateEntityPartitionNode=function(){return new n(this)};t.prototype.pCreateDefaultBoundingVolume=function(){return new i};t.prototype.pUpdateBounds=function(){this._pBoundsInvalid=false};Object.defineProperty(t.prototype,"castsShadows",{get:function(){return false},enumerable:true,configurable:true});t.prototype._iCollectRenderables=function(e){};t.prototype._iCollectRenderable=function(e){};return t}(o);t.exports=l},{"awayjs-core/lib/bounds/NullBounds":125,"awayjs-core/lib/library/AssetType":156,"awayjs-display/lib/base/DisplayObject":63,"awayjs-display/lib/partition/SkyboxNode":109}],86:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/errors/Error");var a=function(e){s(t,e);function t(t){e.call(this,t)}return t}(i);t.exports=a},{"awayjs-core/lib/errors/Error":128}],87:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/events/Event");var a=function(e){s(t,e);function t(t,r){e.call(this,t);this._camera=r}Object.defineProperty(t.prototype,"camera",{get:function(){return this._camera},enumerable:true,configurable:true});t.PROJECTION_CHANGED="projectionChanged";return t}(i);t.exports=a},{"awayjs-core/lib/events/Event":132}],88:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/events/Event");var a=function(e){s(t,e);function t(t,r){e.call(this,t);this.object=r}t.VISIBLITY_UPDATED="visiblityUpdated";t.SCENETRANSFORM_CHANGED="scenetransformChanged";t.SCENE_CHANGED="sceneChanged";t.POSITION_CHANGED="positionChanged";t.ROTATION_CHANGED="rotationChanged";t.SCALE_CHANGED="scaleChanged";return t}(i);t.exports=a},{"awayjs-core/lib/events/Event":132}],89:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/events/Event");var a=function(e){s(t,e);function t(t,r){if(r===void 0){r=null}e.call(this,t);this._subGeometry=r}Object.defineProperty(t.prototype,"subGeometry",{get:function(){return this._subGeometry},enumerable:true,configurable:true});t.prototype.clone=function(){return new t(this.type,this._subGeometry)};t.SUB_GEOMETRY_ADDED="SubGeometryAdded";t.SUB_GEOMETRY_REMOVED="SubGeometryRemoved";t.BOUNDS_INVALID="BoundsInvalid";return t}(i);t.exports=a},{"awayjs-core/lib/events/Event":132}],90:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/events/Event");var a=function(e){s(t,e);function t(t){e.call(this,t)}t.prototype.clone=function(){return new t(this.type)};t.CASTS_SHADOW_CHANGE="castsShadowChange";return t}(i);t.exports=a},{"awayjs-core/lib/events/Event":132}],91:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/events/Event");var a=function(e){s(t,e);function t(t){e.call(this,t);this._iAllowedToPropagate=true}Object.defineProperty(t.prototype,"bubbles",{get:function(){var e=this._iAllowedToPropagate;this._iAllowedToPropagate=true;return e},enumerable:true,configurable:true});t.prototype.stopPropagation=function(){this._iAllowedToPropagate=false;if(this._iParentEvent)this._iParentEvent.stopPropagation()};t.prototype.stopImmediatePropagation=function(){this._iAllowedToPropagate=false;if(this._iParentEvent)this._iParentEvent.stopImmediatePropagation()};t.prototype.clone=function(){var e=new t(this.type);e.screenX=this.screenX;e.screenY=this.screenY;e.view=this.view;e.object=this.object;e.materialOwner=this.materialOwner;e.material=this.material;e.uv=this.uv;e.localPosition=this.localPosition;e.localNormal=this.localNormal;e.index=this.index;e.subGeometryIndex=this.subGeometryIndex;e.delta=this.delta;e.ctrlKey=this.ctrlKey;e.shiftKey=this.shiftKey;e._iParentEvent=this;e._iAllowedToPropagate=this._iAllowedToPropagate;return e};Object.defineProperty(t.prototype,"scenePosition",{get:function(){return this.object.sceneTransform.transformVector(this.localPosition)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sceneNormal",{get:function(){var e=this.object.sceneTransform.deltaTransformVector(this.localNormal);e.normalize();return e},enumerable:true,configurable:true});t.MOUSE_OVER="mouseOver3d";t.MOUSE_OUT="mouseOut3d";t.MOUSE_UP="mouseUp3d";t.MOUSE_DOWN="mouseDown3d";t.MOUSE_MOVE="mouseMove3d";t.CLICK="click3d";t.DOUBLE_CLICK="doubleClick3d";t.MOUSE_WHEEL="mouseWheel3d";return t}(i);t.exports=a},{"awayjs-core/lib/events/Event":132}],92:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/events/Event");var a=function(e){s(t,e);function t(t){e.call(this,t)}t.VIEWPORT_UPDATED="viewportUpdated";t.SCISSOR_UPDATED="scissorUpdated";return t}(i);t.exports=a},{"awayjs-core/lib/events/Event":132}],93:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/events/Event");var a=function(e){s(t,e);function t(t,r){e.call(this,t);this.displayObject=r}t.ADDED_TO_SCENE="addedToScene";t.REMOVED_FROM_SCENE="removedFromScene";t.PARTITION_CHANGED="partitionChanged";return t}(i);t.exports=a},{"awayjs-core/lib/events/Event":132}],94:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/events/Event");var a=function(e){s(t,e);function t(t,r){if(r===void 0){r=""}e.call(this,t);this._dataType=r}Object.defineProperty(t.prototype,"dataType",{get:function(){return this._dataType},enumerable:true,configurable:true});t.prototype.clone=function(){return new t(this.type,this._dataType)};t.INDICES_UPDATED="indicesUpdated";t.VERTICES_UPDATED="verticesUpdated";return t}(i);t.exports=a},{"awayjs-core/lib/events/Event":132}],95:[function(e,t,r){var s=e("awayjs-core/lib/geom/Vector3D");var i=e("awayjs-display/lib/events/MouseEvent");var a=function(){function e(){var e=this;this._viewLookup=new Array;this._nullVector=new s;this._queuedEvents=new Array;this._mouseUp=new i(i.MOUSE_UP);this._mouseClick=new i(i.CLICK);this._mouseOut=new i(i.MOUSE_OUT);this._mouseDown=new i(i.MOUSE_DOWN);this._mouseMove=new i(i.MOUSE_MOVE);this._mouseOver=new i(i.MOUSE_OVER);this._mouseWheel=new i(i.MOUSE_WHEEL);this._mouseDoubleClick=new i(i.DOUBLE_CLICK);this.onClickDelegate=function(t){return e.onClick(t)};this.onDoubleClickDelegate=function(t){return e.onDoubleClick(t)};this.onMouseDownDelegate=function(t){return e.onMouseDown(t)};this.onMouseMoveDelegate=function(t){return e.onMouseMove(t)};this.onMouseUpDelegate=function(t){return e.onMouseUp(t)};this.onMouseWheelDelegate=function(t){return e.onMouseWheel(t)};this.onMouseOverDelegate=function(t){return e.onMouseOver(t)};this.onMouseOutDelegate=function(t){return e.onMouseOut(t)}}e.getInstance=function(){if(this._instance)return this._instance;return this._instance=new e};e.prototype.fireMouseEvents=function(e){if(this._iCollidingObject!=this._previousCollidingObject){if(this._previousCollidingObject)this.queueDispatch(this._mouseOut,this._mouseMoveEvent,this._previousCollidingObject);if(this._iCollidingObject)this.queueDispatch(this._mouseOver,this._mouseMoveEvent)}if(e&&this._iCollidingObject)this.queueDispatch(this._mouseMove,this._mouseMoveEvent);var t;var r;var s=this._queuedEvents.length;for(var i=0;i<s;++i){t=this._queuedEvents[i];r=t.object;while(r&&!r._iIsMouseEnabled())r=r.parent;if(r)r.dispatchEvent(t)}this._queuedEvents.length=0;this._previousCollidingObject=this._iCollidingObject;this._iUpdateDirty=false};e.prototype.registerView=function(e){e.htmlElement.addEventListener("click",this.onClickDelegate);e.htmlElement.addEventListener("dblclick",this.onDoubleClickDelegate);e.htmlElement.addEventListener("mousedown",this.onMouseDownDelegate);e.htmlElement.addEventListener("mousemove",this.onMouseMoveDelegate);e.htmlElement.addEventListener("mouseup",this.onMouseUpDelegate);e.htmlElement.addEventListener("mousewheel",this.onMouseWheelDelegate);e.htmlElement.addEventListener("mouseover",this.onMouseOverDelegate);e.htmlElement.addEventListener("mouseout",this.onMouseOutDelegate);this._viewLookup.push(e)};e.prototype.unregisterView=function(e){e.htmlElement.removeEventListener("click",this.onClickDelegate);e.htmlElement.removeEventListener("dblclick",this.onDoubleClickDelegate);e.htmlElement.removeEventListener("mousedown",this.onMouseDownDelegate);e.htmlElement.removeEventListener("mousemove",this.onMouseMoveDelegate);e.htmlElement.removeEventListener("mouseup",this.onMouseUpDelegate);e.htmlElement.removeEventListener("mousewheel",this.onMouseWheelDelegate);e.htmlElement.removeEventListener("mouseover",this.onMouseOverDelegate);e.htmlElement.removeEventListener("mouseout",this.onMouseOutDelegate);this._viewLookup.slice(this._viewLookup.indexOf(e),1)};e.prototype.queueDispatch=function(e,t,r){if(r===void 0){r=null}if(t){e.ctrlKey=t.ctrlKey;e.altKey=t.altKey;e.shiftKey=t.shiftKey;e.screenX=t.clientX;e.screenY=t.clientY}if(r==null)r=this._iCollidingObject;if(r){e.object=r.displayObject;e.materialOwner=r.materialOwner;e.uv=r.uv;e.localPosition=r.localPosition?r.localPosition.clone():null;e.localNormal=r.localNormal?r.localNormal.clone():null;e.index=r.index}else{e.uv=null;e.object=null;e.localPosition=this._nullVector;e.localNormal=this._nullVector;e.index=0;e.subGeometryIndex=0}this._queuedEvents.push(e)};e.prototype.onMouseMove=function(e){this.updateColliders(e);if(this._iCollidingObject)this.queueDispatch(this._mouseMove,this._mouseMoveEvent=e)};e.prototype.onMouseOut=function(e){this._iActiveDiv=null;this.updateColliders(e);if(this._iCollidingObject)this.queueDispatch(this._mouseOut,e)};e.prototype.onMouseOver=function(e){this._iActiveDiv=e.target;this.updateColliders(e);if(this._iCollidingObject)this.queueDispatch(this._mouseOver,e)};e.prototype.onClick=function(e){this.updateColliders(e);if(this._iCollidingObject)this.queueDispatch(this._mouseClick,e)};e.prototype.onDoubleClick=function(e){this.updateColliders(e);if(this._iCollidingObject)this.queueDispatch(this._mouseDoubleClick,e)};e.prototype.onMouseDown=function(e){this._iActiveDiv=e.target;this.updateColliders(e);if(this._iCollidingObject)this.queueDispatch(this._mouseDown,e)};e.prototype.onMouseUp=function(e){this.updateColliders(e);if(this._iCollidingObject)this.queueDispatch(this._mouseUp,e)};e.prototype.onMouseWheel=function(e){this.updateColliders(e);if(this._iCollidingObject)this.queueDispatch(this._mouseWheel,e)};e.prototype.updateColliders=function(e){if(this._iUpdateDirty)return;var t;var r;var s=e.clientX;var i=e.clientY;var a=this._viewLookup.length;for(var o=0;o<a;o++){t=this._viewLookup[o];r=t.htmlElement.getBoundingClientRect();if(s<r.left||s>r.right||i<r.top||i>r.bottom){t._pMouseX=null;t._pMouseY=null}else{t._pMouseX=s+r.left;t._pMouseY=i+r.top;t.updateCollider();if(t.layeredView&&this._iCollidingObject)break}}this._iUpdateDirty=true};return e}();t.exports=a},{"awayjs-core/lib/geom/Vector3D":151,"awayjs-display/lib/events/MouseEvent":91}],96:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/library/AssetType");var a=e("awayjs-core/lib/library/NamedAssetBase");var o=function(e){s(t,e);function t(){e.call(this);this._pNumPointLights=0;this._pNumDirectionalLights=0;this._pNumCastingPointLights=0;this._pNumCastingDirectionalLights=0;this._pNumLightProbes=0}t.prototype.dispose=function(){};Object.defineProperty(t.prototype,"assetType",{get:function(){return i.LIGHT_PICKER},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numDirectionalLights",{get:function(){return this._pNumDirectionalLights},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numPointLights",{get:function(){return this._pNumPointLights},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numCastingDirectionalLights",{get:function(){return this._pNumCastingDirectionalLights},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numCastingPointLights",{get:function(){return this._pNumCastingPointLights},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numLightProbes",{get:function(){return this._pNumLightProbes},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"pointLights",{get:function(){return this._pPointLights},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"directionalLights",{get:function(){return this._pDirectionalLights},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"castingPointLights",{get:function(){return this._pCastingPointLights},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"castingDirectionalLights",{get:function(){return this._pCastingDirectionalLights},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lightProbes",{get:function(){return this._pLightProbes},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lightProbeWeights",{get:function(){return this._pLightProbeWeights},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"allPickedLights",{get:function(){return this._pAllPickedLights},enumerable:true,configurable:true});t.prototype.collectLights=function(e){this.updateProbeWeights(e)};t.prototype.updateProbeWeights=function(e){var t=e.sourceEntity.scenePosition;var r;var s=t.x,i=t.y,a=t.z;var o,n,l;var h,p=0;var u;for(u=0;u<this._pNumLightProbes;++u){r=this._pLightProbes[u].scenePosition;o=s-r.x;n=i-r.y;l=a-r.z;h=o*o+n*n+l*l;h=h>1e-5?1/h:5e7;this._pLightProbeWeights[u]=h;p+=h}p=1/p;for(u=0;u<this._pNumLightProbes;++u)this._pLightProbeWeights[u]*=p};return t}(a);t.exports=o},{"awayjs-core/lib/library/AssetType":156,"awayjs-core/lib/library/NamedAssetBase":162}],97:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/events/Event");var a=e("awayjs-display/lib/entities/DirectionalLight");var o=e("awayjs-display/lib/entities/LightProbe");var n=e("awayjs-display/lib/entities/PointLight");var l=e("awayjs-display/lib/events/LightEvent");var h=e("awayjs-display/lib/materials/lightpickers/LightPickerBase");var p=function(e){s(t,e);function t(t){var r=this;e.call(this);this._onCastShadowChangeDelegate=function(e){return r.onCastShadowChange(e)};this.lights=t}Object.defineProperty(t.prototype,"lights",{get:function(){return this._lights},set:function(e){var t=0;var r=0;var s=0;var h=0;var p=0;var u;if(this._lights)this.clearListeners();this._lights=e;this._pAllPickedLights=e;this._pPointLights=new Array;this._pCastingPointLights=new Array;this._pDirectionalLights=new Array;this._pCastingDirectionalLights=new Array;this._pLightProbes=new Array;var c=e.length;for(var d=0;d<c;++d){u=e[d];u.addEventListener(l.CASTS_SHADOW_CHANGE,this._onCastShadowChangeDelegate);if(u instanceof n){if(u.castsShadows)this._pCastingPointLights[s++]=u;else this._pPointLights[t++]=u}else if(u instanceof a){if(u.castsShadows)this._pCastingDirectionalLights[h++]=u;else this._pDirectionalLights[r++]=u}else if(u instanceof o){this._pLightProbes[p++]=u}}if(this._pNumDirectionalLights==r&&this._pNumPointLights==t&&this._pNumLightProbes==p&&this._pNumCastingPointLights==s&&this._pNumCastingDirectionalLights==h)return;this._pNumDirectionalLights=r;this._pNumCastingDirectionalLights=h;this._pNumPointLights=t;this._pNumCastingPointLights=s;this._pNumLightProbes=p;this._pLightProbeWeights=new Array(Math.ceil(p/4)*4);this.dispatchEvent(new i(i.CHANGE))},enumerable:true,configurable:true});t.prototype.clearListeners=function(){var e=this._lights.length;for(var t=0;t<e;++t)this._lights[t].removeEventListener(l.CASTS_SHADOW_CHANGE,this._onCastShadowChangeDelegate)};t.prototype.onCastShadowChange=function(e){var t=e.target;if(t instanceof n)this.updatePointCasting(t);else if(t instanceof a)this.updateDirectionalCasting(t);this.dispatchEvent(new i(i.CHANGE))};t.prototype.updateDirectionalCasting=function(e){var t=e;if(e.castsShadows){--this._pNumDirectionalLights;++this._pNumCastingDirectionalLights;this._pDirectionalLights.splice(this._pDirectionalLights.indexOf(t),1);this._pCastingDirectionalLights.push(e)}else{++this._pNumDirectionalLights;--this._pNumCastingDirectionalLights;this._pCastingDirectionalLights.splice(this._pCastingDirectionalLights.indexOf(t),1);this._pDirectionalLights.push(e)}};t.prototype.updatePointCasting=function(e){var t=e;if(e.castsShadows){--this._pNumPointLights;++this._pNumCastingPointLights;this._pPointLights.splice(this._pPointLights.indexOf(t),1);this._pCastingPointLights.push(e)}else{++this._pNumPointLights;--this._pNumCastingPointLights;this._pCastingPointLights.splice(this._pCastingPointLights.indexOf(t),1);this._pPointLights.push(e)}};return t}(h);t.exports=p},{"awayjs-core/lib/events/Event":132,"awayjs-display/lib/entities/DirectionalLight":81,"awayjs-display/lib/entities/LightProbe":82,"awayjs-display/lib/entities/PointLight":84,"awayjs-display/lib/events/LightEvent":90,"awayjs-display/lib/materials/lightpickers/LightPickerBase":96}],98:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/errors/PartialImplementationError");var a=e("awayjs-display/lib/entities/Camera");var o=e("awayjs-display/lib/materials/shadowmappers/ShadowMapperBase");var n=function(e){s(t,e);function t(){e.call(this);this._pDepthMapSize=512;this._needsRender=new Array;this.initCameras()}t.prototype.initCameras=function(){this._depthCameras=new Array;this._projections=new Array;this.addCamera(0,90,0);this.addCamera(0,-90,0);this.addCamera(-90,0,0);this.addCamera(90,0,0);this.addCamera(0,0,0);this.addCamera(0,180,0)};t.prototype.addCamera=function(e,t,r){var s=new a;s.rotationX=e;s.rotationY=t;s.rotationZ=r;s.projection.near=.01;var i=s.projection;i.fieldOfView=90;this._projections.push(i);s.projection._iAspectRatio=1;this._depthCameras.push(s)};t.prototype.pCreateDepthTexture=function(){throw new i};t.prototype.pUpdateDepthProjection=function(e){var t=this._pLight;var r=t._pFallOff;var s=this._pLight.scenePosition;for(var i=0;i<6;++i){this._projections[i].far=r;this._depthCameras[i].transform.position=s;this._needsRender[i]=true}};t.prototype.pDrawDepthMap=function(e,t,r){for(var s=0;s<6;++s){if(this._needsRender[s]){this._pCasterCollector.camera=this._depthCameras[s];this._pCasterCollector.clear();t.traversePartitions(this._pCasterCollector);r._iRender(this._pCasterCollector,e,null,s)}}};return t}(o);t.exports=n},{"awayjs-core/lib/errors/PartialImplementationError":129,"awayjs-display/lib/entities/Camera":80,"awayjs-display/lib/materials/shadowmappers/ShadowMapperBase":100}],99:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/geom/Matrix3D");var a=e("awayjs-core/lib/projections/FreeMatrixProjection");var o=e("awayjs-display/lib/entities/Camera");var n=e("awayjs-display/lib/materials/shadowmappers/ShadowMapperBase");var l=function(e){s(t,e);function t(){e.call(this);this._pLightOffset=1e4;this._pSnap=64;this._pCullPlanes=[];this._pOverallDepthProjection=new a;this._pOverallDepthCamera=new o(this._pOverallDepthProjection);this._pLocalFrustum=[];this._pMatrix=new i}Object.defineProperty(t.prototype,"snap",{get:function(){return this._pSnap},set:function(e){this._pSnap=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lightOffset",{get:function(){return this._pLightOffset},set:function(e){this._pLightOffset=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"iDepthProjection",{get:function(){return this._pOverallDepthCamera.viewProjection},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"depth",{get:function(){return this._pMaxZ-this._pMinZ},enumerable:true,configurable:true});t.prototype.pDrawDepthMap=function(e,t,r){this._pCasterCollector.camera=this._pOverallDepthCamera;this._pCasterCollector.cullPlanes=this._pCullPlanes;this._pCasterCollector.clear();t.traversePartitions(this._pCasterCollector);r._iRender(this._pCasterCollector,e)};t.prototype.pUpdateCullPlanes=function(e){var t=this._pOverallDepthCamera.frustumPlanes;var r=e.frustumPlanes;this._pCullPlanes.length=4;this._pCullPlanes[0]=t[0];this._pCullPlanes[1]=t[1];this._pCullPlanes[2]=t[2];this._pCullPlanes[3]=t[3];var s=this._pLight;var i=s.sceneDirection;var a=i.x;var o=i.y;var n=i.z;var l=4;for(var h=0;h<6;++h){var p=r[h];if(p.a*a+p.b*o+p.c*n<0)this._pCullPlanes[l++]=p}};t.prototype.pUpdateDepthProjection=function(e){this.pUpdateProjectionFromFrustumCorners(e,e.projection.frustumCorners,this._pMatrix);this._pOverallDepthProjection.matrix=this._pMatrix;this.pUpdateCullPlanes(e)};t.prototype.pUpdateProjectionFromFrustumCorners=function(e,t,r){var s=new Array;var i;var a,o,n;var l,h;var p,u;var c;var d=this._pLight;i=d.sceneDirection;this._pOverallDepthCamera.transform.matrix3D=this._pLight.sceneTransform;a=Math.floor((e.x-i.x*this._pLightOffset)/this._pSnap)*this._pSnap;o=Math.floor((e.y-i.y*this._pLightOffset)/this._pSnap)*this._pSnap;n=Math.floor((e.z-i.z*this._pLightOffset)/this._pSnap)*this._pSnap;this._pOverallDepthCamera.x=a;this._pOverallDepthCamera.y=o;this._pOverallDepthCamera.z=n;this._pMatrix.copyFrom(this._pOverallDepthCamera.inverseSceneTransform);this._pMatrix.prepend(e.sceneTransform);this._pMatrix.transformVectors(t,this._pLocalFrustum);l=p=this._pLocalFrustum[0];h=u=this._pLocalFrustum[1];this._pMaxZ=this._pLocalFrustum[2];c=3;while(c<24){a=this._pLocalFrustum[c];o=this._pLocalFrustum[c+1];n=this._pLocalFrustum[c+2];if(a<l)l=a;if(a>p)p=a;if(o<h)h=o;if(o>u)u=o;if(n>this._pMaxZ)this._pMaxZ=n;c+=3}this._pMinZ=1;var f=p-l;var y=u-h;var m=1/(this._pMaxZ-this._pMinZ);
if(l<0)l-=this._pSnap;if(h<0)h-=this._pSnap;l=Math.floor(l/this._pSnap)*this._pSnap;h=Math.floor(h/this._pSnap)*this._pSnap;var _=2*this._pSnap;f=Math.floor(f/_+2)*_;y=Math.floor(y/_+2)*_;p=l+f;u=h+y;f=1/f;y=1/y;s[0]=2*f;s[5]=2*y;s[10]=m;s[12]=-(p+l)*f;s[13]=-(u+h)*y;s[14]=-this._pMinZ*m;s[15]=1;s[1]=s[2]=s[3]=s[4]=s[6]=s[7]=s[8]=s[9]=s[11]=0;r.copyRawDataFrom(s)};return t}(n);t.exports=l},{"awayjs-core/lib/geom/Matrix3D":144,"awayjs-core/lib/projections/FreeMatrixProjection":175,"awayjs-display/lib/entities/Camera":80,"awayjs-display/lib/materials/shadowmappers/ShadowMapperBase":100}],100:[function(e,t,r){var s=e("awayjs-core/lib/errors/AbstractMethodError");var i=e("awayjs-display/lib/traverse/ShadowCasterCollector");var a=e("awayjs-core/lib/textures/RenderTexture");var o=function(){function e(){this._pDepthMapSize=2048;this._autoUpdateShadows=true;this._pCasterCollector=this.pCreateCasterCollector()}e.prototype.pCreateCasterCollector=function(){return new i};Object.defineProperty(e.prototype,"autoUpdateShadows",{get:function(){return this._autoUpdateShadows},set:function(e){this._autoUpdateShadows=e},enumerable:true,configurable:true});e.prototype.updateShadows=function(){this._iShadowsInvalid=true};e.prototype.iSetDepthMap=function(e){if(this._depthMap==e)return;if(this._depthMap&&!this._explicitDepthMap)this._depthMap.dispose();this._depthMap=e;if(this._depthMap){this._explicitDepthMap=true;this._pDepthMapSize=this._depthMap.size}else{this._explicitDepthMap=false}};Object.defineProperty(e.prototype,"light",{get:function(){return this._pLight},set:function(e){this._pLight=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"depthMap",{get:function(){if(!this._depthMap)this._depthMap=this.pCreateDepthTexture();return this._depthMap},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"depthMapSize",{get:function(){return this._pDepthMapSize},set:function(e){if(e==this._pDepthMapSize)return;this._pSetDepthMapSize(e)},enumerable:true,configurable:true});e.prototype.dispose=function(){this._pCasterCollector=null;if(this._depthMap&&!this._explicitDepthMap)this._depthMap.dispose();this._depthMap=null};e.prototype.pCreateDepthTexture=function(){return new a(this._pDepthMapSize,this._pDepthMapSize)};e.prototype.iRenderDepthMap=function(e,t){this._iShadowsInvalid=false;this.pUpdateDepthProjection(e.camera);if(!this._depthMap)this._depthMap=this.pCreateDepthTexture();this.pDrawDepthMap(this._depthMap,e.scene,t)};e.prototype.pUpdateDepthProjection=function(e){throw new s};e.prototype.pDrawDepthMap=function(e,t,r){throw new s};e.prototype._pSetDepthMapSize=function(e){this._pDepthMapSize=e;if(this._explicitDepthMap){throw Error("Cannot set depth map size for the current renderer.")}else if(this._depthMap){this._depthMap.dispose();this._depthMap=null}};return e}();t.exports=o},{"awayjs-core/lib/errors/AbstractMethodError":126,"awayjs-core/lib/textures/RenderTexture":183,"awayjs-display/lib/traverse/ShadowCasterCollector":119}],101:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-display/lib/partition/EntityNode");var a=function(e){s(t,e);function t(t){e.call(this,t)}t.prototype.acceptTraverser=function(e){};return t}(i);t.exports=a},{"awayjs-display/lib/partition/EntityNode":103}],102:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-display/lib/partition/EntityNode");var a=function(e){s(t,e);function t(t){e.call(this,t);this._directionalLight=t}t.prototype.acceptTraverser=function(e){if(e.enterNode(this))e.applyDirectionalLight(this._directionalLight)};t.prototype.isCastingShadow=function(){return false};return t}(i);t.exports=a},{"awayjs-display/lib/partition/EntityNode":103}],103:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/errors/PartialImplementationError");var a=e("awayjs-display/lib/partition/NodeBase");var o=function(e){s(t,e);function t(t){e.call(this);this._entity=t;this._iNumEntities=1}Object.defineProperty(t.prototype,"entity",{get:function(){return this._entity},enumerable:true,configurable:true});t.prototype.removeFromParent=function(){if(this._iParent)this._iParent.iRemoveNode(this);this._iParent=null};t.prototype.isCastingShadow=function(){return this.entity.castsShadows};t.prototype.isInFrustum=function(e,t){if(!this._entity._iIsVisible())return false;return this._entity.worldBounds.isInFrustum(e,t)};t.prototype.acceptTraverser=function(e){if(e.enterNode(this))e.applyEntity(this._entity)};t.prototype.isIntersectingRay=function(e,t){if(!this._entity._iIsVisible())return false;return this._entity.isIntersectingRay(e,t)};t.prototype._pCreateBoundsPrimitive=function(){throw new i};return t}(a);t.exports=o},{"awayjs-core/lib/errors/PartialImplementationError":129,"awayjs-display/lib/partition/NodeBase":105}],104:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-display/lib/partition/EntityNode");var a=function(e){s(t,e);function t(t){e.call(this,t);this._lightProbe=t}t.prototype.acceptTraverser=function(e){if(e.enterNode(this))e.applyLightProbe(this._lightProbe)};t.prototype.isCastingShadow=function(){return false};return t}(i);t.exports=a},{"awayjs-display/lib/partition/EntityNode":103}],105:[function(e,t,r){var s=function(){function e(){this._pNumChildNodes=0;this._iNumEntities=0;this._pChildNodes=new Array}Object.defineProperty(e.prototype,"boundsVisible",{get:function(){return this._explicitBoundsVisible},set:function(e){if(this._explicitBoundsVisible==e)return;this._explicitBoundsVisible=e;this._iUpdateImplicitBoundsVisible(this._iParent?this._iParent.boundsChildrenVisible:false)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"boundsChildrenVisible",{get:function(){return this._boundsChildrenVisible},set:function(e){if(this._boundsChildrenVisible==e)return;this._boundsChildrenVisible=e;for(var t=0;t<this._pNumChildNodes;++t)this._pChildNodes[t]._iUpdateImplicitBoundsVisible(this._boundsChildrenVisible)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"parent",{get:function(){return this._iParent},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"_pNumEntities",{get:function(){return this._iNumEntities},enumerable:true,configurable:true});e.prototype.isInFrustum=function(e,t){return true};e.prototype.isIntersectingRay=function(e,t){return true};e.prototype.isCastingShadow=function(){return true};e.prototype.findPartitionForEntity=function(e){return this};e.prototype.acceptTraverser=function(e){if(this._pNumEntities==0&&!this._implicitBoundsVisible)return;if(e.enterNode(this)){var t=0;while(t<this._pNumChildNodes)this._pChildNodes[t++].acceptTraverser(e);if(this._implicitBoundsVisible)this._pBoundsPrimitive.partitionNode.acceptTraverser(e)}};e.prototype._pCreateBoundsPrimitive=function(){return null};e.prototype.iAddNode=function(e){e._iParent=this;this._iNumEntities+=e._pNumEntities;this._pChildNodes[this._pNumChildNodes++]=e;e._iUpdateImplicitBoundsVisible(this.boundsChildrenVisible);var t=e._pNumEntities;e=this;do{e._iNumEntities+=t}while((e=e._iParent)!=null)};e.prototype.iRemoveNode=function(e){var t=this._pChildNodes.indexOf(e);this._pChildNodes[t]=this._pChildNodes[--this._pNumChildNodes];this._pChildNodes.pop();e._iUpdateImplicitBoundsVisible(false);var r=e._pNumEntities;e=this;do{e._pNumEntities-=r}while((e=e._iParent)!=null)};e.prototype._iUpdateImplicitBoundsVisible=function(e){if(this._implicitBoundsVisible==this._explicitBoundsVisible||e)return;this._implicitBoundsVisible=this._explicitBoundsVisible||e;this._iUpdateEntityBounds();for(var t=0;t<this._pNumChildNodes;++t)this._pChildNodes[t]._iUpdateImplicitBoundsVisible(this._boundsChildrenVisible)};e.prototype._iIsBoundsVisible=function(){return this._implicitBoundsVisible};e.prototype._iUpdateEntityBounds=function(){if(this._pBoundsPrimitive){this._pBoundsPrimitive.dispose();this._pBoundsPrimitive=null}if(this._implicitBoundsVisible)this._pBoundsPrimitive=this._pCreateBoundsPrimitive()};return e}();t.exports=s},{}],106:[function(e,t,r){var s=function(){function e(){}return e}();t.exports=s},{}],107:[function(e,t,r){var s=e("awayjs-display/lib/partition/NullNode");var i=function(){function e(e){this._updatesMade=false;this._rootNode=e||new s}Object.defineProperty(e.prototype,"rootNode",{get:function(){return this._rootNode},enumerable:true,configurable:true});e.prototype.traverse=function(e){if(this._updatesMade)this.updateEntities();this._rootNode.acceptTraverser(e)};e.prototype.iMarkForUpdate=function(e){var t=e.partitionNode;var r=this._updateQueue;while(r){if(t==r)return;r=r._iUpdateQueueNext}t._iUpdateQueueNext=this._updateQueue;this._updateQueue=t;this._updatesMade=true};e.prototype.iRemoveEntity=function(e){var t=e.partitionNode;var r;t.removeFromParent();if(t==this._updateQueue){this._updateQueue=t._iUpdateQueueNext}else{r=this._updateQueue;while(r&&r._iUpdateQueueNext!=t)r=r._iUpdateQueueNext;if(r)r._iUpdateQueueNext=t._iUpdateQueueNext}t._iUpdateQueueNext=null;if(!this._updateQueue)this._updatesMade=false};e.prototype.updateEntities=function(){var e=this._updateQueue;var t;var r;this._updateQueue=null;this._updatesMade=false;do{t=this._rootNode.findPartitionForEntity(e.entity);if(e.parent!=t){if(e)e.removeFromParent();t.iAddNode(e)}r=e._iUpdateQueueNext;e._iUpdateQueueNext=null;e.entity._iInternalUpdate()}while((e=r)!=null)};return e}();t.exports=i},{"awayjs-display/lib/partition/NullNode":106}],108:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-display/lib/partition/EntityNode");var a=function(e){s(t,e);function t(t){e.call(this,t);this._pointLight=t}t.prototype.acceptTraverser=function(e){if(e.enterNode(this))e.applyPointLight(this._pointLight)};t.prototype.isCastingShadow=function(){return false};return t}(i);t.exports=a},{"awayjs-display/lib/partition/EntityNode":103}],109:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-display/lib/partition/EntityNode");var a=function(e){s(t,e);function t(t){e.call(this,t);this._skyBox=t}t.prototype.acceptTraverser=function(e){if(e.enterNode(this))e.applySkybox(this._skyBox)};t.prototype.isInFrustum=function(e,t){if(!this._skyBox._iIsVisible)return false;return true};return t}(i);t.exports=a},{"awayjs-display/lib/partition/EntityNode":103}],110:[function(e,t,r){var s=function(){function e(e){this.displayObject=e}return e}();t.exports=s},{}],111:[function(e,t,r){var s=e("awayjs-core/lib/geom/Vector3D");var i=e("awayjs-display/lib/traverse/RaycastCollector");var a=function(){function e(e){if(e===void 0){e=false}this._ignoredEntities=[];this._onlyMouseEnabled=true;this._numEntities=0;this._raycastCollector=new i;this._findClosestCollision=e;this._entities=new Array}Object.defineProperty(e.prototype,"onlyMouseEnabled",{get:function(){return this._onlyMouseEnabled},set:function(e){this._onlyMouseEnabled=e},enumerable:true,configurable:true});e.prototype.getViewCollision=function(e,t,r){var s=r.unproject(e,t,0);var i=r.unproject(e,t,1).subtract(s);return this.getSceneCollision(s,i,r.scene)};e.prototype.getSceneCollision=function(e,t,r){this._raycastCollector.clear();this._raycastCollector.rayPosition=e;this._raycastCollector.rayDirection=t;r.traversePartitions(this._raycastCollector);this._numEntities=0;var s=this._raycastCollector.entityHead;var i;while(s){if(!this.isIgnored(i=s.entity))this._entities[this._numEntities++]=i;s=s.next}if(!this._numEntities)return null;return this.getPickingCollisionVO(this._raycastCollector)};e.prototype.setIgnoreList=function(e){this._ignoredEntities=e};e.prototype.isIgnored=function(e){if(this._onlyMouseEnabled&&!e._iIsMouseEnabled())return true;var t=this._ignoredEntities.length;for(var r=0;r<t;r++)if(this._ignoredEntities[r]==e)return true;return false};e.prototype.sortOnNearT=function(e,t){return e._iPickingCollisionVO.rayEntryDistance>t._iPickingCollisionVO.rayEntryDistance?1:-1};e.prototype.getPickingCollisionVO=function(e){this._entities.length=this._numEntities;this._entities=this._entities.sort(this.sortOnNearT);var t=Number.MAX_VALUE;var r;var s;var i;var a;for(a=0;a<this._numEntities;++a){i=this._entities[a];s=i._iPickingCollisionVO;if(i.pickingCollider){if((r==null||s.rayEntryDistance<r.rayEntryDistance)&&i._iTestCollision(t,this._findClosestCollision)){t=s.rayEntryDistance;r=s;if(!this._findClosestCollision){this.updateLocalPosition(s);return s}}}else if(r==null||s.rayEntryDistance<r.rayEntryDistance){if(!s.rayOriginIsInsideBounds){this.updateLocalPosition(s);return s}}}return r};e.prototype.updateLocalPosition=function(e){var t=e.localPosition==null?new s:e.localPosition;var r=e.localRayDirection;var i=e.localRayPosition;var a=e.rayEntryDistance;t.x=i.x+a*r.x;t.y=i.y+a*r.y;t.z=i.z+a*r.z};e.prototype.dispose=function(){};return e}();t.exports=a},{"awayjs-core/lib/geom/Vector3D":151,"awayjs-display/lib/traverse/RaycastCollector":118}],112:[function(e,t,r){var s=function(){function e(){}return e}();t.exports=s},{}],113:[function(e,t,r){var s=e("awayjs-display/lib/pool/EntityListItem");var i=function(){function e(){this._index=0;this._poolSize=0;this._pool=new Array}e.prototype.getItem=function(){var e;if(this._index==this._poolSize){e=new s;this._pool[this._index++]=e;++this._poolSize}else{e=this._pool[this._index++]}return e};e.prototype.freeAll=function(){this._index=0};e.prototype.dispose=function(){this._pool.length=0};return e}();t.exports=i},{"awayjs-display/lib/pool/EntityListItem":112}],114:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/library/NamedAssetBase");var a=e("awayjs-core/lib/errors/AbstractMethodError");var o=function(e){s(t,e);function t(){e.call(this);this._pObjects=new Array}t.prototype.getNewObject=function(){var e=this._pCreateObject();this._pObjects.push(e);return e};t.prototype._pCreateObject=function(){throw new a};t.prototype._iValidate=function(){};return t}(i);t.exports=o},{"awayjs-core/lib/errors/AbstractMethodError":126,"awayjs-core/lib/library/NamedAssetBase":162}],115:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-display/lib/prefabs/PrimitivePrefabBase");var a=function(e){s(t,e);function t(t,r,s,i,a,o){if(t===void 0){t=100}if(r===void 0){r=100}if(s===void 0){s=1}if(i===void 0){i=1}if(a===void 0){a=true}if(o===void 0){o=false}e.call(this);this._segmentsW=s;this._segmentsH=i;this._yUp=a;this._width=t;this._height=r;this._doubleSided=o}Object.defineProperty(t.prototype,"segmentsW",{get:function(){return this._segmentsW},set:function(e){this._segmentsW=e;this._pInvalidateGeometry();this._pInvalidateUVs()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"segmentsH",{get:function(){return this._segmentsH},set:function(e){this._segmentsH=e;this._pInvalidateGeometry();this._pInvalidateUVs()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"yUp",{get:function(){return this._yUp},set:function(e){this._yUp=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"doubleSided",{get:function(){return this._doubleSided},set:function(e){this._doubleSided=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});t.prototype._pBuildGeometry=function(e,t){var r;var s,i;var a;var o;var n=this._segmentsW+1;var l;var h,p;var u;var c;if(t=="triangleSubGeometry"){var d=e;var l=(this._segmentsH+1)*n;var f;var y;var m;if(this._doubleSided)l*=2;a=this._segmentsH*this._segmentsW*6;if(this._doubleSided)a*=2;if(d.indices!=null&&a==d.indices.length){r=d.indices}else{r=new Array(a);this._pInvalidateUVs()}if(l==d.numVertices){f=d.positions;y=d.vertexNormals;m=d.vertexTangents}else{f=new Array(l*3);y=new Array(l*3);m=new Array(l*3);this._pInvalidateUVs()}p=0;h=0;for(c=0;c<=this._segmentsH;++c){for(u=0;u<=this._segmentsW;++u){s=(u/this._segmentsW-.5)*this._width;i=(c/this._segmentsH-.5)*this._height;f[h]=s;if(this._yUp){f[h+1]=0;f[h+2]=i}else{f[h+1]=i;f[h+2]=0}y[h]=0;if(this._yUp){y[h+1]=1;y[h+2]=0}else{y[h+1]=0;y[h+2]=-1}m[h]=1;m[h+1]=0;m[h+2]=0;h+=3;if(this._doubleSided){for(var _=h;_<h+3;++_){f[_]=f[_-3];y[_]=-y[_-3];m[_]=-m[_-3]}h+=3}if(u!=this._segmentsW&&c!=this._segmentsH){o=u+c*n;var b=this._doubleSided?2:1;r[p++]=o*b;r[p++]=(o+n)*b;r[p++]=(o+n+1)*b;r[p++]=o*b;r[p++]=(o+n+1)*b;r[p++]=(o+1)*b;if(this._doubleSided){r[p++]=(o+n+1)*b+1;r[p++]=(o+n)*b+1;r[p++]=o*b+1;r[p++]=(o+1)*b+1;r[p++]=(o+n+1)*b+1;r[p++]=o*b+1}}}}d.updateIndices(r);d.updatePositions(f);d.updateVertexNormals(y);d.updateVertexTangents(m)}else if(t=="lineSubGeometry"){var g=e;var w=this._segmentsH+1+n;var v;var j;var x;var P=this._width/2;var D=this._height/2;if(g.indices!=null&&w==g.numSegments){v=g.startPositions;j=g.endPositions;x=g.thickness}else{v=new Array(w*3);j=new Array(w*3);x=new Array(w)}p=0;h=0;for(c=0;c<=this._segmentsH;++c){v[h]=-P;v[h+1]=0;v[h+2]=c*this._height-D;j[h]=P;j[h+1]=0;j[h+2]=c*this._height-D;x[p++]=1;h+=3}for(u=0;u<=this._segmentsW;++u){v[h]=u*this._width-P;v[h+1]=0;v[h+2]=-D;j[h]=u*this._width-P;j[h+1]=0;j[h+2]=D;x[p++]=1;h+=3}g.updatePositions(v,j);g.updateThickness(x)}};t.prototype._pBuildUVs=function(e,t){var r;var s;if(t=="triangleSubGeometry"){s=(this._segmentsH+1)*(this._segmentsW+1);if(this._doubleSided)s*=2;var i=e;if(i.uvs&&s==i.numVertices){r=i.uvs}else{r=new Array(s*2);this._pInvalidateGeometry()}var a=0;for(var o=0;o<=this._segmentsH;++o){for(var n=0;n<=this._segmentsW;++n){r[a]=n/this._segmentsW*i.scaleU;r[a+1]=(1-o/this._segmentsH)*i.scaleV;a+=2;if(this._doubleSided){r[a]=n/this._segmentsW*i.scaleU;r[a+1]=(1-o/this._segmentsH)*i.scaleV;a+=2}}}i.updateUVs(r)}else if(t=="lineSubGeometry"){}};return t}(i);t.exports=a},{"awayjs-display/lib/prefabs/PrimitivePrefabBase":116}],116:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/library/AssetType");var a=e("awayjs-core/lib/errors/AbstractMethodError");var o=e("awayjs-display/lib/base/Geometry");var n=e("awayjs-display/lib/base/TriangleSubGeometry");var l=e("awayjs-display/lib/base/LineSubGeometry");var h=e("awayjs-display/lib/entities/Mesh");var p=e("awayjs-display/lib/prefabs/PrefabBase");var u=function(e){s(t,e);function t(t,r){if(t===void 0){t=null}if(r===void 0){r="triangleSubGeometry"}e.call(this);this._geomDirty=true;this._uvDirty=true;this._geometryTypeDirty=true;this._geometry=new o;this._material=t;this._geometryType=r}Object.defineProperty(t.prototype,"assetType",{get:function(){return i.PRIMITIVE_PREFAB},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"geometryType",{get:function(){return this._geometryType},set:function(e){if(this._geometryType==e)return;this._geometryType=e;this.invalidateGeometryType()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"geometry",{get:function(){this._iValidate();return this._geometry},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"material",{get:function(){return this._material},set:function(e){if(e==this._material)return;this._material=e;var t=this._pObjects.length;for(var r=0;r<t;r++)this._pObjects[r].material=this._material},enumerable:true,configurable:true});t.prototype._pBuildGeometry=function(e,t){throw new a};t.prototype._pBuildUVs=function(e,t){throw new a};t.prototype.invalidateGeometryType=function(){this._geometryTypeDirty=true;this._geomDirty=true;this._uvDirty=true};t.prototype._pInvalidateGeometry=function(){this._geomDirty=true};t.prototype._pInvalidateUVs=function(){this._uvDirty=true};t.prototype.updateGeometryType=function(){if(this._subGeometry)this._geometry.removeSubGeometry(this._subGeometry);if(this._geometryType=="triangleSubGeometry"){var e=new n(true);e.autoDeriveNormals=false;e.autoDeriveTangents=false;e.autoDeriveUVs=false;this._geometry.addSubGeometry(e);this._subGeometry=e}else if(this._geometryType=="lineSubGeometry"){this._geometry.addSubGeometry(this._subGeometry=new l)}this._geometryTypeDirty=false};t.prototype.updateGeometry=function(){this._pBuildGeometry(this._subGeometry,this._geometryType);this._geomDirty=false};t.prototype.updateUVs=function(){this._pBuildUVs(this._subGeometry,this._geometryType);this._uvDirty=false};t.prototype._iValidate=function(){if(this._geometryTypeDirty)this.updateGeometryType();if(this._geomDirty)this.updateGeometry();if(this._uvDirty)this.updateUVs()};t.prototype._pCreateObject=function(){var e=new h(this._geometry,this._material);e._iSourcePrefab=this;return e};return t}(p);t.exports=u},{"awayjs-core/lib/errors/AbstractMethodError":126,"awayjs-core/lib/library/AssetType":156,"awayjs-display/lib/base/Geometry":64,"awayjs-display/lib/base/LineSubGeometry":66,"awayjs-display/lib/base/TriangleSubGeometry":72,"awayjs-display/lib/entities/Mesh":83,"awayjs-display/lib/prefabs/PrefabBase":114}],117:[function(e,t,r){var s=e("awayjs-display/lib/pool/EntityListItemPool");var i=function(){function e(){this._numCullPlanes=0;this._pNumEntities=0;this._pNumInteractiveEntities=0;this._pEntityListItemPool=new s}Object.defineProperty(e.prototype,"camera",{get:function(){return this._pCamera},set:function(e){this._pCamera=e;this._cullPlanes=this._pCamera.frustumPlanes},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"cullPlanes",{get:function(){return this._customCullPlanes},set:function(e){this._customCullPlanes=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"entityHead",{get:function(){return this._pEntityHead},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"numEntities",{get:function(){return this._pNumEntities},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"numInteractiveEntities",{get:function(){return this._pNumInteractiveEntities},enumerable:true,configurable:true});e.prototype.clear=function(){this._pNumEntities=this._pNumInteractiveEntities=0;this._cullPlanes=this._customCullPlanes?this._customCullPlanes:this._pCamera?this._pCamera.frustumPlanes:null;this._numCullPlanes=this._cullPlanes?this._cullPlanes.length:0;this._pEntityHead=null;this._pEntityListItemPool.freeAll()};e.prototype.enterNode=function(e){var t=this.scene._iCollectionMark!=e._iCollectionMark&&e.isInFrustum(this._cullPlanes,this._numCullPlanes);e._iCollectionMark=this.scene._iCollectionMark;return t};e.prototype.applyDirectionalLight=function(e){};e.prototype.applyEntity=function(e){this._pNumEntities++;if(e._iIsMouseEnabled())this._pNumInteractiveEntities++;var t=this._pEntityListItemPool.getItem();t.entity=e;t.next=this._pEntityHead;this._pEntityHead=t};e.prototype.applyLightProbe=function(e){};e.prototype.applyPointLight=function(e){};e.prototype.applySkybox=function(e){};return e}();t.exports=i},{"awayjs-display/lib/pool/EntityListItemPool":113}],118:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/geom/Vector3D");var a=e("awayjs-display/lib/traverse/CollectorBase");var o=function(e){s(t,e);function t(){e.call(this);this._rayPosition=new i;this._rayDirection=new i;this._iCollectionMark=0}Object.defineProperty(t.prototype,"rayPosition",{get:function(){return this._rayPosition},set:function(e){this._rayPosition=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rayDirection",{get:function(){return this._rayDirection},set:function(e){this._rayDirection=e},enumerable:true,configurable:true});t.prototype.enterNode=function(e){return e.isIntersectingRay(this._rayPosition,this._rayDirection)};return t}(a);t.exports=o},{"awayjs-core/lib/geom/Vector3D":151,"awayjs-display/lib/traverse/CollectorBase":117}],119:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-display/lib/traverse/CollectorBase");var a=function(e){s(t,e);function t(){e.call(this)}t.prototype.enterNode=function(t){var r=this.scene._iCollectionMark!=t._iCollectionMark&&t.isCastingShadow();if(!r){t._iCollectionMark=this.scene._iCollectionMark;return false}return e.prototype.enterNode.call(this,t)};return t}(i);t.exports=a},{"awayjs-display/lib/traverse/CollectorBase":117}],120:[function(e,t,r){var s=e("awayjs-core/lib/base/BitmapData");var i=e("awayjs-core/lib/utils/ByteArray");var a=e("awayjs-display/lib/errors/CastError");var o=e("awayjs-core/lib/textures/BitmapTexture");var n=e("awayjs-core/lib/textures/ImageTexture");var l=function(){function e(){}e.string=function(e){if(typeof e=="function")e=new e;if(typeof e=="string")return e;return e};e.byteArray=function(e){if(typeof e=="function")e=new e;if(e instanceof i)return e;return e};e.isHex=function(e){var t=e.length;for(var r=0;r<t;++r){if(this._hexChars.indexOf(e.charAt(r))==-1)return false}return true};e.tryColor=function(e){if(typeof e=="number")return Math.floor(e);if(typeof e=="string"){if(e=="random")return Math.floor(Math.random()*16777216);if(this._colorNames==null){this._colorNames=new Object;this._colorNames["steelblue"]=4620980;this._colorNames["royalblue"]=267920;this._colorNames["cornflowerblue"]=6591981;this._colorNames["lightsteelblue"]=11584734;this._colorNames["mediumslateblue"]=8087790;this._colorNames["slateblue"]=6970061;this._colorNames["darkslateblue"]=4734347;this._colorNames["midnightblue"]=1644912;this._colorNames["navy"]=128;this._colorNames["darkblue"]=139;this._colorNames["mediumblue"]=205;this._colorNames["blue"]=255;this._colorNames["dodgerblue"]=2003199;this._colorNames["deepskyblue"]=49151;this._colorNames["lightskyblue"]=8900346;this._colorNames["skyblue"]=8900331;this._colorNames["lightblue"]=11393254;this._colorNames["powderblue"]=11591910;this._colorNames["azure"]=15794175;this._colorNames["lightcyan"]=14745599;this._colorNames["paleturquoise"]=11529966;this._colorNames["mediumturquoise"]=4772300;this._colorNames["lightseagreen"]=2142890;this._colorNames["darkcyan"]=35723;this._colorNames["teal"]=32896;this._colorNames["cadetblue"]=6266528;this._colorNames["darkturquoise"]=52945;this._colorNames["aqua"]=65535;this._colorNames["cyan"]=65535;this._colorNames["turquoise"]=4251856;this._colorNames["aquamarine"]=8388564;this._colorNames["mediumaquamarine"]=6737322;this._colorNames["darkseagreen"]=9419919;this._colorNames["mediumseagreen"]=3978097;this._colorNames["seagreen"]=3050327;this._colorNames["darkgreen"]=25600;this._colorNames["green"]=32768;this._colorNames["forestgreen"]=2263842;this._colorNames["limegreen"]=3329330;this._colorNames["lime"]=65280;this._colorNames["chartreuse"]=8388352;this._colorNames["lawngreen"]=8190976;this._colorNames["greenyellow"]=11403055;this._colorNames["yellowgreen"]=10145074;this._colorNames["palegreen"]=10025880;this._colorNames["lightgreen"]=9498256;this._colorNames["springgreen"]=65407;this._colorNames["mediumspringgreen"]=64154;this._colorNames["darkolivegreen"]=5597999;this._colorNames["olivedrab"]=7048739;this._colorNames["olive"]=8421376;this._colorNames["darkkhaki"]=12433259;this._colorNames["darkgoldenrod"]=12092939;this._colorNames["goldenrod"]=14329120;this._colorNames["gold"]=16766720;this._colorNames["yellow"]=16776960;this._colorNames["khaki"]=15787660;this._colorNames["palegoldenrod"]=15657130;this._colorNames["blanchedalmond"]=16772045;this._colorNames["moccasin"]=16770229;this._colorNames["wheat"]=16113331;this._colorNames["navajowhite"]=16768685;this._colorNames["burlywood"]=14596231;this._colorNames["tan"]=13808780;this._colorNames["rosybrown"]=12357519;this._colorNames["sienna"]=10506797;this._colorNames["saddlebrown"]=9127187;this._colorNames["chocolate"]=13789470;this._colorNames["peru"]=13468991;this._colorNames["sandybrown"]=16032864;this._colorNames["darkred"]=9109504;this._colorNames["maroon"]=8388608;this._colorNames["brown"]=10824234;this._colorNames["firebrick"]=11674146;this._colorNames["indianred"]=13458524;this._colorNames["lightcoral"]=15761536;this._colorNames["salmon"]=16416882;this._colorNames["darksalmon"]=15308410;this._colorNames["lightsalmon"]=16752762;this._colorNames["coral"]=16744272;this._colorNames["tomato"]=16737095;this._colorNames["darkorange"]=16747520;this._colorNames["orange"]=16753920;this._colorNames["orangered"]=16729344;this._colorNames["crimson"]=14423100;this._colorNames["red"]=16711680;this._colorNames["deeppink"]=16716947;this._colorNames["fuchsia"]=16711935;this._colorNames["magenta"]=16711935;this._colorNames["hotpink"]=16738740;this._colorNames["lightpink"]=16758465;this._colorNames["pink"]=16761035;this._colorNames["palevioletred"]=14381203;this._colorNames["mediumvioletred"]=13047173;this._colorNames["purple"]=8388736;this._colorNames["darkmagenta"]=9109643;this._colorNames["mediumpurple"]=9662683;this._colorNames["blueviolet"]=9055202;this._colorNames["indigo"]=4915330;this._colorNames["darkviolet"]=9699539;this._colorNames["darkorchid"]=10040012;this._colorNames["mediumorchid"]=12211667;this._colorNames["orchid"]=14315734;this._colorNames["violet"]=15631086;this._colorNames["plum"]=14524637;this._colorNames["thistle"]=14204888;this._colorNames["lavender"]=15132410;this._colorNames["ghostwhite"]=16316671;this._colorNames["aliceblue"]=15792383;this._colorNames["mintcream"]=16121850;this._colorNames["honeydew"]=15794160;this._colorNames["lightgoldenrodyellow"]=16448210;this._colorNames["lemonchiffon"]=16775885;this._colorNames["cornsilk"]=16775388;this._colorNames["lightyellow"]=16777184;this._colorNames["ivory"]=16777200;this._colorNames["floralwhite"]=16775920;this._colorNames["linen"]=16445670;this._colorNames["oldlace"]=16643558;this._colorNames["antiquewhite"]=16444375;this._colorNames["bisque"]=16770244;this._colorNames["peachpuff"]=16767673;this._colorNames["papayawhip"]=16773077;this._colorNames["beige"]=16119260;this._colorNames["seashell"]=16774638;this._colorNames["lavenderblush"]=16773365;this._colorNames["mistyrose"]=16770273;this._colorNames["snow"]=16775930;this._colorNames["white"]=16777215;this._colorNames["whitesmoke"]=16119285;this._colorNames["gainsboro"]=14474460;this._colorNames["lightgrey"]=13882323;this._colorNames["silver"]=12632256;this._colorNames["darkgrey"]=11119017;this._colorNames["grey"]=8421504;this._colorNames["lightslategrey"]=7833753;this._colorNames["slategrey"]=7372944;this._colorNames["dimgrey"]=6908265;this._colorNames["darkslategrey"]=3100495;this._colorNames["black"]=0;this._colorNames["transparent"]=4278190080}if(this._colorNames[e]!=null)return this._colorNames[e];if(e.length==6&&this.isHex(e))return parseInt("0x"+e)}return null};e.color=function(e){var t=this.tryColor(e);if(t==null)throw new a("Can't cast to color: "+e);
return t};e.tryClass=function(e){if(this._notClasses[e])return e;var t=this._classes[e];if(t!=null)return t;try{t=window[e];this._classes[e]=t;return t}catch(r){}this._notClasses[e]=true;return e};e.bitmapData=function(e){if(e==null)return null;if(typeof e=="string")e=this.tryClass(e);if(typeof e=="function"){try{e=new e}catch(t){e=new e(0,0)}}if(e instanceof s)return e;if(e instanceof n)e=e.htmlImageElement;if(e instanceof HTMLImageElement){var r=e;var i=new s(r.width,r.height,true,0);i.draw(r);return i}throw new a("Can't cast to BitmapData: "+e)};e.bitmapTexture=function(t){if(t==null)return null;if(typeof t=="string")t=this.tryClass(t);if(typeof t=="function"){try{t=new t}catch(r){t=new t(0,0)}}if(t instanceof o)return t;try{var s=e.bitmapData(t);return new o(s)}catch(r){}throw new a("Can't cast to BitmapTexture: "+t)};e._hexChars="0123456789abcdefABCDEF";e._notClasses=new Object;e._classes=new Object;return e}();t.exports=l},{"awayjs-core/lib/base/BitmapData":121,"awayjs-core/lib/textures/BitmapTexture":178,"awayjs-core/lib/textures/ImageTexture":181,"awayjs-core/lib/utils/ByteArray":186,"awayjs-display/lib/errors/CastError":86}],121:[function(e,t,r){t.exports=e(2)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/base/BitmapData.js":2,"awayjs-core/lib/geom/Rectangle":150,"awayjs-core/lib/utils/ColorUtils":188}],122:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/bounds/BoundingVolumeBase");var a=e("awayjs-core/lib/geom/Matrix3DUtils");var o=e("awayjs-core/lib/geom/PlaneClassification");var n=e("awayjs-core/lib/geom/Vector3D");var l=function(e){s(t,e);function t(){e.call(this);this._centerX=0;this._centerY=0;this._centerZ=0;this._halfExtentsX=0;this._halfExtentsY=0;this._halfExtentsZ=0}t.prototype.nullify=function(){e.prototype.nullify.call(this);this._centerX=this._centerY=this._centerZ=0;this._halfExtentsX=this._halfExtentsY=this._halfExtentsZ=0};t.prototype.isInFrustum=function(e,t){for(var r=0;r<t;++r){var s=e[r];var i=s.a;var a=s.b;var o=s.c;var n=i<0?-this._halfExtentsX:this._halfExtentsX;var l=a<0?-this._halfExtentsY:this._halfExtentsY;var h=o<0?-this._halfExtentsZ:this._halfExtentsZ;var p=i*(this._centerX+n)+a*(this._centerY+l)+o*(this._centerZ+h)-s.d;if(p<0)return false}return true};t.prototype.rayIntersection=function(e,t,r){if(this.containsPoint(e))return 0;var s=e.x-this._centerX;var i=e.y-this._centerY;var a=e.z-this._centerZ;var o=t.x;var n=t.y;var l=t.z;var h;var p;var u;var c;var d;if(o<0){c=(this._halfExtentsX-s)/o;if(c>0){p=i+c*n;u=a+c*l;if(p>-this._halfExtentsY&&p<this._halfExtentsY&&u>-this._halfExtentsZ&&u<this._halfExtentsZ){r.x=1;r.y=0;r.z=0;d=true}}}if(!d&&o>0){c=(-this._halfExtentsX-s)/o;if(c>0){p=i+c*n;u=a+c*l;if(p>-this._halfExtentsY&&p<this._halfExtentsY&&u>-this._halfExtentsZ&&u<this._halfExtentsZ){r.x=-1;r.y=0;r.z=0;d=true}}}if(!d&&n<0){c=(this._halfExtentsY-i)/n;if(c>0){h=s+c*o;u=a+c*l;if(h>-this._halfExtentsX&&h<this._halfExtentsX&&u>-this._halfExtentsZ&&u<this._halfExtentsZ){r.x=0;r.y=1;r.z=0;d=true}}}if(!d&&n>0){c=(-this._halfExtentsY-i)/n;if(c>0){h=s+c*o;u=a+c*l;if(h>-this._halfExtentsX&&h<this._halfExtentsX&&u>-this._halfExtentsZ&&u<this._halfExtentsZ){r.x=0;r.y=-1;r.z=0;d=true}}}if(!d&&l<0){c=(this._halfExtentsZ-a)/l;if(c>0){h=s+c*o;p=i+c*n;if(p>-this._halfExtentsY&&p<this._halfExtentsY&&h>-this._halfExtentsX&&h<this._halfExtentsX){r.x=0;r.y=0;r.z=1;d=true}}}if(!d&&l>0){c=(-this._halfExtentsZ-a)/l;if(c>0){h=s+c*o;p=i+c*n;if(p>-this._halfExtentsY&&p<this._halfExtentsY&&h>-this._halfExtentsX&&h<this._halfExtentsX){r.x=0;r.y=0;r.z=-1;d=true}}}return d?c:-1};t.prototype.containsPoint=function(e){var t=e.x-this._centerX,r=e.y-this._centerY,s=e.z-this._centerZ;return t<=this._halfExtentsX&&t>=-this._halfExtentsX&&r<=this._halfExtentsY&&r>=-this._halfExtentsY&&s<=this._halfExtentsZ&&s>=-this._halfExtentsZ};t.prototype.fromExtremes=function(t,r,s,i,a,o){this._centerX=(i+t)*.5;this._centerY=(a+r)*.5;this._centerZ=(o+s)*.5;this._halfExtentsX=(i-t)*.5;this._halfExtentsY=(a-r)*.5;this._halfExtentsZ=(o-s)*.5;e.prototype.fromExtremes.call(this,t,r,s,i,a,o)};t.prototype.clone=function(){var e=new t;e.fromExtremes(this._aabb.x,this._aabb.y+this._aabb.height,this._aabb.z,this._aabb.x+this._aabb.width,this._aabb.y,this._aabb.z+this._aabb.depth);return e};Object.defineProperty(t.prototype,"halfExtentsX",{get:function(){return this._halfExtentsX},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"halfExtentsY",{get:function(){return this._halfExtentsY},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"halfExtentsZ",{get:function(){return this._halfExtentsZ},enumerable:true,configurable:true});t.prototype.closestPointToPoint=function(e,t){if(t===void 0){t=null}var r;if(t==null)t=new n;r=e.x;if(r<this._aabb.x)r=this._aabb.x;if(r>this._aabb.x+this._aabb.width)r=this._aabb.x+this._aabb.width;t.x=r;r=e.y;if(r<this._aabb.y+this._aabb.height)r=this._aabb.y+this._aabb.height;if(r>this._aabb.y)r=this._aabb.y;t.y=r;r=e.z;if(r<this._aabb.z)r=this._aabb.z;if(r>this._aabb.z+this._aabb.depth)r=this._aabb.z+this._aabb.depth;t.z=r;return t};t.prototype.classifyToPlane=function(e){var t=e.a;var r=e.b;var s=e.c;var i=t*this._centerX+r*this._centerY+s*this._centerZ-e.d;if(t<0)t=-t;if(r<0)r=-r;if(s<0)s=-s;var a=t*this._halfExtentsX+r*this._halfExtentsY+s*this._halfExtentsZ;return i>a?o.FRONT:i<-a?o.BACK:o.INTERSECT};t.prototype.transformFrom=function(e,t){var r=e;var s=r._centerX;var i=r._centerY;var o=r._centerZ;var n=a.RAW_DATA_CONTAINER;t.copyRawDataTo(n);var l=n[0],h=n[4],p=n[8],u=n[12];var c=n[1],d=n[5],f=n[9],y=n[13];var m=n[2],_=n[6],b=n[10],g=n[14];this._centerX=s*l+i*h+o*p+u;this._centerY=s*c+i*d+o*f+y;this._centerZ=s*m+i*_+o*b+g;if(l<0)l=-l;if(h<0)h=-h;if(p<0)p=-p;if(c<0)c=-c;if(d<0)d=-d;if(f<0)f=-f;if(m<0)m=-m;if(_<0)_=-_;if(b<0)b=-b;var w=r._halfExtentsX;var v=r._halfExtentsY;var j=r._halfExtentsZ;this._halfExtentsX=w*l+v*h+j*p;this._halfExtentsY=w*c+v*d+j*f;this._halfExtentsZ=w*m+v*_+j*b;this._aabb.width=this._aabb.height=this._aabb.depth=this._halfExtentsX*2;this._aabb.x=this._centerX-this._halfExtentsX;this._aabb.y=this._centerY+this._halfExtentsY;this._aabb.z=this._centerZ-this._halfExtentsZ};return t}(i);t.exports=l},{"awayjs-core/lib/bounds/BoundingVolumeBase":124,"awayjs-core/lib/geom/Matrix3DUtils":145,"awayjs-core/lib/geom/PlaneClassification":148,"awayjs-core/lib/geom/Vector3D":151}],123:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/bounds/BoundingVolumeBase");var a=e("awayjs-core/lib/geom/PlaneClassification");var o=e("awayjs-core/lib/geom/Vector3D");var n=function(e){s(t,e);function t(){e.call(this);this._radius=0;this._centerX=0;this._centerY=0;this._centerZ=0}Object.defineProperty(t.prototype,"radius",{get:function(){return this._radius},enumerable:true,configurable:true});t.prototype.nullify=function(){e.prototype.nullify.call(this);this._centerX=this._centerY=this._centerZ=0;this._radius=0};t.prototype.isInFrustum=function(e,t){for(var r=0;r<t;++r){var s=e[r];var i=s.a<0?-this._radius:this._radius;var a=s.b<0?-this._radius:this._radius;var o=s.c<0?-this._radius:this._radius;var n=s.a*(this._centerX+i)+s.b*(this._centerY+a)+s.c*(this._centerZ+o)-s.d;if(n<0){return false}}return true};t.prototype.fromSphere=function(e,t){this._centerX=e.x;this._centerY=e.y;this._centerZ=e.z;this._radius=t;this._aabb.width=this._aabb.height=this._aabb.depth=t*2;this._aabb.x=this._centerX-t;this._aabb.y=this._centerY+t;this._aabb.z=this._centerZ-t;this._pAabbPointsDirty=true};t.prototype.fromExtremes=function(t,r,s,i,a,o){this._centerX=(i+t)*.5;this._centerY=(a+r)*.5;this._centerZ=(o+s)*.5;var n=i-t;var l=a-r;var h=o-s;if(l>n)n=l;if(h>n)n=h;this._radius=n*Math.sqrt(.5);e.prototype.fromExtremes.call(this,t,r,s,i,a,o)};t.prototype.clone=function(){var e=new t;e.fromSphere(new o(this._centerX,this._centerY,this._centerZ),this._radius);return e};t.prototype.rayIntersection=function(e,t,r){if(this.containsPoint(e)){return 0}var s=e.x-this._centerX,i=e.y-this._centerY,a=e.z-this._centerZ;var o=t.x,n=t.y,l=t.z;var h;var p=o*o+n*n+l*l;var u=2*(s*o+i*n+a*l);var c=s*s+i*i+a*a-this._radius*this._radius;var d=u*u-4*p*c;if(d>=0){var f=Math.sqrt(d);h=(-u-f)/(2*p);if(h>=0){r.x=s+h*o;r.y=i+h*n;r.z=a+h*l;r.normalize();return h}}return-1};t.prototype.containsPoint=function(e){var t=e.x-this._centerX;var r=e.y-this._centerY;var s=e.z-this._centerZ;var i=Math.sqrt(t*t+r*r+s*s);return i<=this._radius};t.prototype.classifyToPlane=function(e){var t=e.a;var r=e.b;var s=e.c;var i=t*this._centerX+r*this._centerY+s*this._centerZ-e.d;if(t<0)t=-t;if(r<0)r=-r;if(s<0)s=-s;var o=(t+r+s)*this._radius;return i>o?a.FRONT:i<-o?a.BACK:a.INTERSECT};t.prototype.transformFrom=function(e,t){var r=e;var s=r._centerX;var i=r._centerY;var a=r._centerZ;var o=new Array(16);t.copyRawDataTo(o);var n=o[0],l=o[4],h=o[8],p=o[12];var u=o[1],c=o[5],d=o[9],f=o[13];var y=o[2],m=o[6],_=o[10],b=o[14];this._centerX=s*n+i*l+a*h+p;this._centerY=s*u+i*c+a*d+f;this._centerZ=s*y+i*m+a*_+b;if(n<0)n=-n;if(l<0)l=-l;if(h<0)h=-h;if(u<0)u=-u;if(c<0)c=-c;if(d<0)d=-d;if(y<0)y=-y;if(m<0)m=-m;if(_<0)_=-_;var g=r._radius;var w=n+l+h;var v=u+c+d;var j=y+m+_;this._radius=g*Math.sqrt(w*w+v*v+j*j);this._aabb.width=this._aabb.height=this._aabb.depth=this._radius*2;this._aabb.x=this._centerX-this._radius;this._aabb.y=this._centerY+this._radius;this._aabb.z=this._centerZ-this._radius};return t}(i);t.exports=n},{"awayjs-core/lib/bounds/BoundingVolumeBase":124,"awayjs-core/lib/geom/PlaneClassification":148,"awayjs-core/lib/geom/Vector3D":151}],124:[function(e,t,r){var s=e("awayjs-core/lib/geom/Box");var i=e("awayjs-core/lib/errors/AbstractMethodError");var a=function(){function e(){this._pAabbPoints=new Array;this._pAabbPointsDirty=true;this._aabb=new s}Object.defineProperty(e.prototype,"aabb",{get:function(){return this._aabb},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"aabbPoints",{get:function(){if(this._pAabbPointsDirty)this.pUpdateAABBPoints();return this._pAabbPoints},enumerable:true,configurable:true});e.prototype.nullify=function(){this._aabb.x=this._aabb.y=this._aabb.z=0;this._aabb.width=this._aabb.height=this._aabb.depth=0;this._pAabbPointsDirty=true};e.prototype.fromVertices=function(e){var t;var r=e.length;var s,i,a;var o,n,l;if(r==0){this.nullify();return}var h;s=o=e[t++];i=n=e[t++];a=l=e[t++];while(t<r){h=e[t++];if(h<s)s=h;else if(h>o)o=h;h=e[t++];if(h<i)i=h;else if(h>n)n=h;h=e[t++];if(h<a)a=h;else if(h>l)l=h}this.fromExtremes(s,i,a,o,n,l)};e.prototype.fromSphere=function(e,t){this.fromExtremes(e.x-t,e.y-t,e.z-t,e.x+t,e.y+t,e.z+t)};e.prototype.fromExtremes=function(e,t,r,s,i,a){this._aabb.x=e;this._aabb.y=i;this._aabb.z=r;this._aabb.width=s-e;this._aabb.height=i-t;this._aabb.depth=a-r;this._pAabbPointsDirty=true};e.prototype.isInFrustum=function(e,t){throw new i};e.prototype.overlaps=function(e){return this._aabb.intersects(e.aabb)};e.prototype.clone=function(){throw new i};e.prototype.rayIntersection=function(e,t,r){return-1};e.prototype.containsPoint=function(e){return false};e.prototype.pUpdateAABBPoints=function(){var e=this._aabb.x;var t=this._aabb.y-this._aabb.height;var r=this._aabb.z;var s=this._aabb.x+this._aabb.width;var i=this._aabb.y;var a=this._aabb.z+this._aabb.depth;this._pAabbPoints[0]=e;this._pAabbPoints[1]=t;this._pAabbPoints[2]=r;this._pAabbPoints[3]=s;this._pAabbPoints[4]=t;this._pAabbPoints[5]=r;this._pAabbPoints[6]=e;this._pAabbPoints[7]=i;this._pAabbPoints[8]=r;this._pAabbPoints[9]=s;this._pAabbPoints[10]=i;this._pAabbPoints[11]=r;this._pAabbPoints[12]=e;this._pAabbPoints[13]=t;this._pAabbPoints[14]=a;this._pAabbPoints[15]=s;this._pAabbPoints[16]=t;this._pAabbPoints[17]=a;this._pAabbPoints[18]=e;this._pAabbPoints[19]=i;this._pAabbPoints[20]=a;this._pAabbPoints[21]=s;this._pAabbPoints[22]=i;this._pAabbPoints[23]=a;this._pAabbPointsDirty=false};e.prototype.classifyToPlane=function(e){throw new i};e.prototype.transformFrom=function(e,t){throw new i};return e}();t.exports=a},{"awayjs-core/lib/errors/AbstractMethodError":126,"awayjs-core/lib/geom/Box":141}],125:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/bounds/BoundingVolumeBase");var a=e("awayjs-core/lib/geom/PlaneClassification");var o=function(e){s(t,e);function t(t){if(t===void 0){t=true}e.call(this);this._alwaysIn=t;this._aabb.width=this._aabb.height=this._aabb.depth=Number.POSITIVE_INFINITY;this._aabb.x=this._aabb.y=this._aabb.z=this._alwaysIn?Number.NEGATIVE_INFINITY/2:Number.POSITIVE_INFINITY}t.prototype.clone=function(){return new t(this._alwaysIn)};t.prototype.isInFrustum=function(e,t){return this._alwaysIn};t.prototype.fromSphere=function(e,t){};t.prototype.fromExtremes=function(e,t,r,s,i,a){};t.prototype.classifyToPlane=function(e){return a.INTERSECT};t.prototype.transformFrom=function(e,t){this._alwaysIn=e._alwaysIn};return t}(i);t.exports=o},{"awayjs-core/lib/bounds/BoundingVolumeBase":124,"awayjs-core/lib/geom/PlaneClassification":148}],126:[function(e,t,r){t.exports=e(4)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/AbstractMethodError.js":4,"awayjs-core/lib/errors/Error":128}],127:[function(e,t,r){t.exports=e(5)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/ArgumentError.js":5,"awayjs-core/lib/errors/Error":128}],128:[function(e,t,r){t.exports=e(6)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/Error.js":6}],129:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/errors/Error");var a=function(e){s(t,e);function t(t,r){if(t===void 0){t=""}if(r===void 0){r=0}e.call(this,"PartialImplementationError - this function is in development. Required Dependency: "+t,r)}return t}(i);t.exports=a},{"awayjs-core/lib/errors/Error":128}],130:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/errors/Error");var a=function(e){s(t,e);function t(t,r){if(t===void 0){t=null}if(r===void 0){r=0}e.call(this,t||"RangeError",r)}return t}(i);t.exports=a},{"awayjs-core/lib/errors/Error":128}],131:[function(e,t,r){t.exports=e(7)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/AssetEvent.js":7,"awayjs-core/lib/events/Event":132}],132:[function(e,t,r){t.exports=e(8)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/Event.js":8}],133:[function(e,t,r){t.exports=e(9)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/EventDispatcher.js":9}],134:[function(e,t,r){t.exports=e(10)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/HTTPStatusEvent.js":10,"awayjs-core/lib/events/Event":132}],135:[function(e,t,r){t.exports=e(11)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/IOErrorEvent.js":11,"awayjs-core/lib/events/Event":132}],136:[function(e,t,r){t.exports=e(12)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/LoaderEvent.js":12,"awayjs-core/lib/events/Event":132}],137:[function(e,t,r){t.exports=e(13)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/ParserEvent.js":13,"awayjs-core/lib/events/Event":132}],138:[function(e,t,r){t.exports=e(14)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/ProgressEvent.js":14,"awayjs-core/lib/events/Event":132}],139:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/events/Event");var a=function(e){s(t,e);function t(t,r){e.call(this,t);this._projection=r}Object.defineProperty(t.prototype,"projection",{get:function(){return this._projection},enumerable:true,configurable:true});t.MATRIX_CHANGED="matrixChanged";return t}(i);t.exports=a},{"awayjs-core/lib/events/Event":132}],140:[function(e,t,r){t.exports=e(15)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/TimerEvent.js":15,"awayjs-core/lib/events/Event":132}],141:[function(e,t,r){var s=e("awayjs-core/lib/geom/Vector3D");var i=function(){function e(e,t,r,s,i,a){if(e===void 0){e=0}if(t===void 0){t=0}if(r===void 0){r=0}if(s===void 0){s=0}if(i===void 0){i=0}if(a===void 0){a=0}this.x=e;this.y=t;this.z=r;this.width=s;this.height=i;this.depth=a}Object.defineProperty(e.prototype,"back",{get:function(){return this.z+this.depth},set:function(e){this.depth=e-this.z},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},set:function(e){this.height=e-this.y},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"bottomRightBack",{get:function(){if(this._bottomRightBack==null)this._bottomRightBack=new s;this._bottomRightBack.x=this.x+this.width;this._bottomRightBack.y=this.y+this.height;this._bottomRightBack.z=this.z+this.depth;return this._bottomRightBack},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"front",{get:function(){return this.z},set:function(e){this.depth+=this.z-e;this.z=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"left",{get:function(){return this.x},set:function(e){this.width+=this.x-e;this.x=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},set:function(e){this.width=e-this.x},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"size",{get:function(){if(this._size==null)this._size=new s;this._size.x=this.width;this._size.y=this.height;this._size.z=this.depth;return this._size},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"top",{get:function(){return this.y},set:function(e){this.height+=this.y-e;this.y=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"topLeftFront",{get:function(){if(this._topLeftFront==null)this._topLeftFront=new s;this._topLeftFront.x=this.x;this._topLeftFront.y=this.y;this._topLeftFront.z=this.z;return this._topLeftFront},enumerable:true,configurable:true});e.prototype.clone=function(){return new e(this.x,this.y,this.z,this.width,this.height,this.depth)};e.prototype.contains=function(e,t,r){return this.x<=e&&this.x+this.width>=e&&this.y<=t&&this.y+this.height>=t&&this.z<=r&&this.z+this.depth>=r};e.prototype.containsPoint=function(e){return this.x<=e.x&&this.x+this.width>=e.x&&this.y<=e.y&&this.y+this.height>=e.y&&this.z<=e.z&&this.z+this.depth>=e.z};e.prototype.containsRect=function(e){return this.x<=e.x&&this.x+this.width>=e.x+e.width&&this.y<=e.y&&this.y+this.height>=e.y+e.height&&this.z<=e.z&&this.z+this.depth>=e.z+e.depth};e.prototype.copyFrom=function(e){};e.prototype.equals=function(e){return this.x==e.x&&this.y==e.y&&this.z==e.z&&this.width==e.width&&this.height==e.height&&this.depth==e.depth};e.prototype.inflate=function(e,t,r){this.x-=e/2;this.y-=t/2;this.z-=r/2;this.width+=e/2;this.height+=t/2;this.depth+=r/2};e.prototype.inflatePoint=function(e){this.x-=e.x/2;this.y-=e.y/2;this.z-=e.z/2;this.width+=e.x/2;this.height+=e.y/2;this.depth+=e.z/2};e.prototype.intersection=function(t){if(this.intersects(t)){var r=new e;if(this.x>t.x){r.x=this.x;r.width=t.x-this.x+t.width;if(r.width>this.width)r.width=this.width}else{r.x=t.x;r.width=this.x-t.x+this.width;if(r.width>t.width)r.width=t.width}if(this.y>t.y){r.y=this.y;r.height=t.y-this.y+t.height;if(r.height>this.height)r.height=this.height}else{r.y=t.y;r.height=this.y-t.y+this.height;if(r.height>t.height)r.height=t.height}if(this.z>t.z){r.z=this.z;r.depth=t.z-this.z+t.depth;if(r.depth>this.depth)r.depth=this.depth}else{r.z=t.z;r.depth=this.z-t.z+this.depth;if(r.depth>t.depth)r.depth=t.depth}return r}return new e};e.prototype.intersects=function(e){return this.x+this.width>e.x&&this.x<e.x+e.width&&this.y+this.height>e.y&&this.y<e.y+e.height&&this.z+this.depth>e.z&&this.z<e.z+e.depth};e.prototype.isEmpty=function(){return this.x==0&&this.y==0&&this.z==0&&this.width==0&&this.height==0&&this.depth==0};e.prototype.offset=function(e,t,r){this.x+=e;this.y+=t;this.z+=r};e.prototype.offsetPosition=function(e){this.x+=e.x;this.y+=e.y;this.z+=e.z};e.prototype.setEmpty=function(){this.x=0;this.y=0;this.z=0;this.width=0;this.height=0;this.depth=0};e.prototype.setTo=function(e,t,r,s,i,a){this.x=e;this.y=t;this.z=r;this.width=s;this.height=i;this.depth=a};e.prototype.toString=function(){return"[Box] (x="+this.x+", y="+this.y+", z="+this.z+", width="+this.width+", height="+this.height+", depth="+this.depth+")"};e.prototype.union=function(t){var r=new e;if(this.x<t.x){r.x=this.x;r.width=t.x-this.x+t.width;if(r.width<this.width)r.width=this.width}else{r.x=t.x;r.width=this.x-t.x+this.width;if(r.width<t.width)r.width=t.width}if(this.y<t.y){r.y=this.y;r.height=t.y-this.y+t.height;if(r.height<this.height)r.height=this.height}else{r.y=t.y;r.height=this.y-t.y+this.height;if(r.height<t.height)r.height=t.height}if(this.z<t.z){r.z=this.z;r.depth=t.z-this.z+t.depth;if(r.depth<this.depth)r.depth=this.depth}else{r.z=t.z;r.depth=this.z-t.z+this.depth;if(r.depth<t.depth)r.depth=t.depth}return r};return e}();t.exports=i},{"awayjs-core/lib/geom/Vector3D":151}],142:[function(e,t,r){var s=function(){function e(){}e.RADIANS_TO_DEGREES=180/Math.PI;e.DEGREES_TO_RADIANS=Math.PI/180;return e}();t.exports=s},{}],143:[function(e,t,r){t.exports=e(16)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Matrix.js":16,"awayjs-core/lib/errors/ArgumentError":127,"awayjs-core/lib/geom/Point":149}],144:[function(e,t,r){var s=e("awayjs-core/lib/geom/Orientation3D");var i=e("awayjs-core/lib/geom/Vector3D");var a=e("awayjs-core/lib/errors/ArgumentError");var o=function(){function e(e){if(e===void 0){e=null}if(e!=null&&e.length==16)this.rawData=e.concat();else this.rawData=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}e.prototype.append=function(e){var t=this.rawData[0],r=this.rawData[4],s=this.rawData[8],i=this.rawData[12],a=this.rawData[1],o=this.rawData[5],n=this.rawData[9],l=this.rawData[13],h=this.rawData[2],p=this.rawData[6],u=this.rawData[10],c=this.rawData[14],d=this.rawData[3],f=this.rawData[7],y=this.rawData[11],m=this.rawData[15],_=e.rawData[0],b=e.rawData[4],g=e.rawData[8],w=e.rawData[12],v=e.rawData[1],j=e.rawData[5],x=e.rawData[9],P=e.rawData[13],D=e.rawData[2],T=e.rawData[6],A=e.rawData[10],C=e.rawData[14],E=e.rawData[3],S=e.rawData[7],M=e.rawData[11],O=e.rawData[15];this.rawData[0]=t*_+a*b+h*g+d*w;this.rawData[1]=t*v+a*j+h*x+d*P;this.rawData[2]=t*D+a*T+h*A+d*C;this.rawData[3]=t*E+a*S+h*M+d*O;this.rawData[4]=r*_+o*b+p*g+f*w;this.rawData[5]=r*v+o*j+p*x+f*P;this.rawData[6]=r*D+o*T+p*A+f*C;this.rawData[7]=r*E+o*S+p*M+f*O;this.rawData[8]=s*_+n*b+u*g+y*w;this.rawData[9]=s*v+n*j+u*x+y*P;this.rawData[10]=s*D+n*T+u*A+y*C;this.rawData[11]=s*E+n*S+u*M+y*O;this.rawData[12]=i*_+l*b+c*g+m*w;this.rawData[13]=i*v+l*j+c*x+m*P;this.rawData[14]=i*D+l*T+c*A+m*C;this.rawData[15]=i*E+l*S+c*M+m*O};e.prototype.appendRotation=function(t,r){var s=e.getAxisRotation(r.x,r.y,r.z,t);this.append(s)};e.prototype.appendScale=function(t,r,s){this.append(new e([t,0,0,0,0,r,0,0,0,0,s,0,0,0,0,1]))};e.prototype.appendTranslation=function(e,t,r){this.rawData[12]+=e;this.rawData[13]+=t;this.rawData[14]+=r};e.prototype.clone=function(){return new e(this.rawData.slice(0))};e.prototype.copyColumnFrom=function(e,t){switch(e){case 0:this.rawData[0]=t.x;this.rawData[1]=t.y;this.rawData[2]=t.z;this.rawData[3]=t.w;break;case 1:this.rawData[4]=t.x;this.rawData[5]=t.y;this.rawData[6]=t.z;this.rawData[7]=t.w;break;case 2:this.rawData[8]=t.x;this.rawData[9]=t.y;this.rawData[10]=t.z;this.rawData[11]=t.w;break;case 3:this.rawData[12]=t.x;this.rawData[13]=t.y;this.rawData[14]=t.z;this.rawData[15]=t.w;break;default:throw new a("ArgumentError, Column "+e+" out of bounds [0, ..., 3]")}};e.prototype.copyColumnTo=function(e,t){switch(e){case 0:t.x=this.rawData[0];t.y=this.rawData[1];t.z=this.rawData[2];t.w=this.rawData[3];break;case 1:t.x=this.rawData[4];t.y=this.rawData[5];t.z=this.rawData[6];t.w=this.rawData[7];break;case 2:t.x=this.rawData[8];t.y=this.rawData[9];t.z=this.rawData[10];t.w=this.rawData[11];break;case 3:t.x=this.rawData[12];t.y=this.rawData[13];t.z=this.rawData[14];t.w=this.rawData[15];break;default:throw new a("ArgumentError, Column "+e+" out of bounds [0, ..., 3]")}};e.prototype.copyFrom=function(e){var t=e.rawData.length;for(var r=0;r<t;r++)this.rawData[r]=e.rawData[r]};e.prototype.copyRawDataFrom=function(e,t,r){if(t===void 0){t=0}if(r===void 0){r=false}if(r)this.transpose();var s=e.length-t;for(var i=0;i<s;i++)this.rawData[i]=e[i+t];if(r)this.transpose()};e.prototype.copyRawDataTo=function(e,t,r){if(t===void 0){t=0}if(r===void 0){r=false}if(r)this.transpose();var s=this.rawData.length;for(var i=0;i<s;i++)e[i+t]=this.rawData[i];if(r)this.transpose()};e.prototype.copyRowFrom=function(e,t){switch(e){case 0:this.rawData[0]=t.x;this.rawData[4]=t.y;this.rawData[8]=t.z;this.rawData[12]=t.w;break;case 1:this.rawData[1]=t.x;this.rawData[5]=t.y;this.rawData[9]=t.z;this.rawData[13]=t.w;break;case 2:this.rawData[2]=t.x;this.rawData[6]=t.y;this.rawData[10]=t.z;this.rawData[14]=t.w;break;case 3:this.rawData[3]=t.x;this.rawData[7]=t.y;this.rawData[11]=t.z;this.rawData[15]=t.w;break;default:throw new a("ArgumentError, Row "+e+" out of bounds [0, ..., 3]")}};e.prototype.copyRowTo=function(e,t){switch(e){case 0:t.x=this.rawData[0];t.y=this.rawData[4];t.z=this.rawData[8];t.w=this.rawData[12];break;case 1:t.x=this.rawData[1];t.y=this.rawData[5];t.z=this.rawData[9];t.w=this.rawData[13];break;case 2:t.x=this.rawData[2];t.y=this.rawData[6];t.z=this.rawData[10];t.w=this.rawData[14];break;case 3:t.x=this.rawData[3];t.y=this.rawData[7];t.z=this.rawData[11];t.w=this.rawData[15];break;default:throw new a("ArgumentError, Row "+e+" out of bounds [0, ..., 3]")}};e.prototype.copyToMatrix3D=function(e){e.rawData=this.rawData.slice(0)};e.prototype.decompose=function(e){if(e===void 0){e="eulerAngles"}var t;var r=[];var a=this.clone();var o=a.rawData;var n=new i(o[12],o[13],o[14]);o[12]=0;o[13]=0;o[14]=0;var l=new i;l.x=Math.sqrt(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]);l.y=Math.sqrt(o[4]*o[4]+o[5]*o[5]+o[6]*o[6]);l.z=Math.sqrt(o[8]*o[8]+o[9]*o[9]+o[10]*o[10]);if(o[0]*(o[5]*o[10]-o[6]*o[9])-o[1]*(o[4]*o[10]-o[6]*o[8])+o[2]*(o[4]*o[9]-o[5]*o[8])<0)l.z=-l.z;o[0]/=l.x;o[1]/=l.x;o[2]/=l.x;o[4]/=l.y;o[5]/=l.y;o[6]/=l.y;o[8]/=l.z;o[9]/=l.z;o[10]/=l.z;var h=new i;switch(e){case s.AXIS_ANGLE:h.w=Math.acos((o[0]+o[5]+o[10]-1)/2);var p=Math.sqrt((o[6]-o[9])*(o[6]-o[9])+(o[8]-o[2])*(o[8]-o[2])+(o[1]-o[4])*(o[1]-o[4]));h.x=(o[6]-o[9])/p;h.y=(o[8]-o[2])/p;h.z=(o[1]-o[4])/p;break;case s.QUATERNION:var u=o[0]+o[5]+o[10];if(u>0){h.w=Math.sqrt(1+u)/2;h.x=(o[6]-o[9])/(4*h.w);h.y=(o[8]-o[2])/(4*h.w);h.z=(o[1]-o[4])/(4*h.w)}else if(o[0]>o[5]&&o[0]>o[10]){h.x=Math.sqrt(1+o[0]-o[5]-o[10])/2;h.w=(o[6]-o[9])/(4*h.x);h.y=(o[1]+o[4])/(4*h.x);h.z=(o[8]+o[2])/(4*h.x)}else if(o[5]>o[10]){h.y=Math.sqrt(1+o[5]-o[0]-o[10])/2;h.x=(o[1]+o[4])/(4*h.y);h.w=(o[8]-o[2])/(4*h.y);h.z=(o[6]+o[9])/(4*h.y)}else{h.z=Math.sqrt(1+o[10]-o[0]-o[5])/2;h.x=(o[8]+o[2])/(4*h.z);h.y=(o[6]+o[9])/(4*h.z);h.w=(o[1]-o[4])/(4*h.z)}break;case s.EULER_ANGLES:h.y=Math.asin(-o[2]);if(o[2]!=1&&o[2]!=-1){h.x=Math.atan2(o[6],o[10]);h.z=Math.atan2(o[1],o[0])}else{h.z=0;h.x=Math.atan2(o[4],o[5])}break}r.push(n);r.push(h);r.push(l);return r};e.prototype.deltaTransformVector=function(e){var t=e.x;var r=e.y;var s=e.z;return new i(t*this.rawData[0]+r*this.rawData[4]+s*this.rawData[8],t*this.rawData[1]+r*this.rawData[5]+s*this.rawData[9],t*this.rawData[2]+r*this.rawData[6]+s*this.rawData[10],t*this.rawData[3]+r*this.rawData[7]+s*this.rawData[11])};e.prototype.identity=function(){this.rawData=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};e.interpolate=function(t,r,s){var i=new e;for(var a=0;a<16;++a)i.rawData[a]=t.rawData[a]+(r.rawData[a]-t.rawData[a])*s;return i};e.prototype.interpolateTo=function(e,t){for(var r=0;r<16;++r)this.rawData[r]=this.rawData[r]+(e.rawData[r]-this.rawData[r])*t};e.prototype.invert=function(){var e=this.determinant;var t=Math.abs(e)>1e-11;if(t){e=1/e;var r=this.rawData[0];var s=this.rawData[4];var i=this.rawData[8];var a=this.rawData[12];var o=this.rawData[1];var n=this.rawData[5];var l=this.rawData[9];var h=this.rawData[13];var p=this.rawData[2];var u=this.rawData[6];var c=this.rawData[10];var d=this.rawData[14];var f=this.rawData[3];var y=this.rawData[7];var m=this.rawData[11];var _=this.rawData[15];this.rawData[0]=e*(n*(c*_-d*m)-l*(u*_-d*y)+h*(u*m-c*y));this.rawData[1]=-e*(o*(c*_-d*m)-l*(p*_-d*f)+h*(p*m-c*f));this.rawData[2]=e*(o*(u*_-d*y)-n*(p*_-d*f)+h*(p*y-u*f));this.rawData[3]=-e*(o*(u*m-c*y)-n*(p*m-c*f)+l*(p*y-u*f));this.rawData[4]=-e*(s*(c*_-d*m)-i*(u*_-d*y)+a*(u*m-c*y));this.rawData[5]=e*(r*(c*_-d*m)-i*(p*_-d*f)+a*(p*m-c*f));this.rawData[6]=-e*(r*(u*_-d*y)-s*(p*_-d*f)+a*(p*y-u*f));this.rawData[7]=e*(r*(u*m-c*y)-s*(p*m-c*f)+i*(p*y-u*f));this.rawData[8]=e*(s*(l*_-h*m)-i*(n*_-h*y)+a*(n*m-l*y));this.rawData[9]=-e*(r*(l*_-h*m)-i*(o*_-h*f)+a*(o*m-l*f));this.rawData[10]=e*(r*(n*_-h*y)-s*(o*_-h*f)+a*(o*y-n*f));this.rawData[11]=-e*(r*(n*m-l*y)-s*(o*m-l*f)+i*(o*y-n*f));this.rawData[12]=-e*(s*(l*d-h*c)-i*(n*d-h*u)+a*(n*c-l*u));this.rawData[13]=e*(r*(l*d-h*c)-i*(o*d-h*p)+a*(o*c-l*p));this.rawData[14]=-e*(r*(n*d-h*u)-s*(o*d-h*p)+a*(o*u-n*p));this.rawData[15]=e*(r*(n*c-l*u)-s*(o*c-l*p)+i*(o*u-n*p))}return t};e.prototype.prepend=function(e){var t=e.rawData[0],r=e.rawData[4],s=e.rawData[8],i=e.rawData[12],a=e.rawData[1],o=e.rawData[5],n=e.rawData[9],l=e.rawData[13],h=e.rawData[2],p=e.rawData[6],u=e.rawData[10],c=e.rawData[14],d=e.rawData[3],f=e.rawData[7],y=e.rawData[11],m=e.rawData[15],_=this.rawData[0],b=this.rawData[4],g=this.rawData[8],w=this.rawData[12],v=this.rawData[1],j=this.rawData[5],x=this.rawData[9],P=this.rawData[13],D=this.rawData[2],T=this.rawData[6],A=this.rawData[10],C=this.rawData[14],E=this.rawData[3],S=this.rawData[7],M=this.rawData[11],O=this.rawData[15];this.rawData[0]=t*_+a*b+h*g+d*w;this.rawData[1]=t*v+a*j+h*x+d*P;this.rawData[2]=t*D+a*T+h*A+d*C;this.rawData[3]=t*E+a*S+h*M+d*O;this.rawData[4]=r*_+o*b+p*g+f*w;this.rawData[5]=r*v+o*j+p*x+f*P;this.rawData[6]=r*D+o*T+p*A+f*C;this.rawData[7]=r*E+o*S+p*M+f*O;this.rawData[8]=s*_+n*b+u*g+y*w;this.rawData[9]=s*v+n*j+u*x+y*P;this.rawData[10]=s*D+n*T+u*A+y*C;this.rawData[11]=s*E+n*S+u*M+y*O;this.rawData[12]=i*_+l*b+c*g+m*w;this.rawData[13]=i*v+l*j+c*x+m*P;this.rawData[14]=i*D+l*T+c*A+m*C;this.rawData[15]=i*E+l*S+c*M+m*O};e.prototype.prependRotation=function(t,r){var s=e.getAxisRotation(r.x,r.y,r.z,t);this.prepend(s)};e.prototype.prependScale=function(t,r,s){this.prepend(new e([t,0,0,0,0,r,0,0,0,0,s,0,0,0,0,1]))};e.prototype.prependTranslation=function(t,r,s){var a=new e;a.position=new i(t,r,s);this.prepend(a)};e.prototype.recompose=function(t){if(t.length<3)return false;this.identity();this.appendScale(t[2].x,t[2].y,t[2].z);var r;r=-t[1].x;this.append(new e([1,0,0,0,0,Math.cos(r),-Math.sin(r),0,0,Math.sin(r),Math.cos(r),0,0,0,0,0]));r=-t[1].y;this.append(new e([Math.cos(r),0,Math.sin(r),0,0,1,0,0,-Math.sin(r),0,Math.cos(r),0,0,0,0,0]));r=-t[1].z;this.append(new e([Math.cos(r),-Math.sin(r),0,0,Math.sin(r),Math.cos(r),0,0,0,0,1,0,0,0,0,0]));this.position=t[0];this.rawData[15]=1;return true
};e.prototype.transformVector=function(e){var t=e.x;var r=e.y;var s=e.z;return new i(t*this.rawData[0]+r*this.rawData[4]+s*this.rawData[8]+this.rawData[12],t*this.rawData[1]+r*this.rawData[5]+s*this.rawData[9]+this.rawData[13],t*this.rawData[2]+r*this.rawData[6]+s*this.rawData[10]+this.rawData[14],t*this.rawData[3]+r*this.rawData[7]+s*this.rawData[11]+this.rawData[15])};e.prototype.transformVectors=function(e,t){var r=0;var s=0,i=0,a=0;while(r+3<=e.length){s=e[r];i=e[r+1];a=e[r+2];t[r]=s*this.rawData[0]+i*this.rawData[4]+a*this.rawData[8]+this.rawData[12];t[r+1]=s*this.rawData[1]+i*this.rawData[5]+a*this.rawData[9]+this.rawData[13];t[r+2]=s*this.rawData[2]+i*this.rawData[6]+a*this.rawData[10]+this.rawData[14];r+=3}};e.prototype.transpose=function(){var e=this.rawData.slice(0);this.rawData[1]=e[4];this.rawData[2]=e[8];this.rawData[3]=e[12];this.rawData[4]=e[1];this.rawData[6]=e[9];this.rawData[7]=e[13];this.rawData[8]=e[2];this.rawData[9]=e[6];this.rawData[11]=e[14];this.rawData[12]=e[3];this.rawData[13]=e[7];this.rawData[14]=e[11]};e.getAxisRotation=function(t,r,s,i){var a=new e;var o=i*(Math.PI/180);var n=Math.cos(o);var l=Math.sin(o);var h=1-n;var p,u;a.rawData[0]=n+t*t*h;a.rawData[5]=n+r*r*h;a.rawData[10]=n+s*s*h;p=t*r*h;u=s*l;a.rawData[1]=p+u;a.rawData[4]=p-u;p=t*s*h;u=r*l;a.rawData[8]=p+u;a.rawData[2]=p-u;p=r*s*h;u=t*l;a.rawData[9]=p-u;a.rawData[6]=p+u;return a};Object.defineProperty(e.prototype,"determinant",{get:function(){return(this.rawData[0]*this.rawData[5]-this.rawData[4]*this.rawData[1])*(this.rawData[10]*this.rawData[15]-this.rawData[14]*this.rawData[11])-(this.rawData[0]*this.rawData[9]-this.rawData[8]*this.rawData[1])*(this.rawData[6]*this.rawData[15]-this.rawData[14]*this.rawData[7])+(this.rawData[0]*this.rawData[13]-this.rawData[12]*this.rawData[1])*(this.rawData[6]*this.rawData[11]-this.rawData[10]*this.rawData[7])+(this.rawData[4]*this.rawData[9]-this.rawData[8]*this.rawData[5])*(this.rawData[2]*this.rawData[15]-this.rawData[14]*this.rawData[3])-(this.rawData[4]*this.rawData[13]-this.rawData[12]*this.rawData[5])*(this.rawData[2]*this.rawData[11]-this.rawData[10]*this.rawData[3])+(this.rawData[8]*this.rawData[13]-this.rawData[12]*this.rawData[9])*(this.rawData[2]*this.rawData[7]-this.rawData[6]*this.rawData[3])},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"position",{get:function(){return new i(this.rawData[12],this.rawData[13],this.rawData[14])},set:function(e){this.rawData[12]=e.x;this.rawData[13]=e.y;this.rawData[14]=e.z},enumerable:true,configurable:true});e.prototype.toFixed=function(e){var t=Math.pow(10,e);return"matrix3d("+Math.round(this.rawData[0]*t)/t+","+Math.round(this.rawData[1]*t)/t+","+Math.round(this.rawData[2]*t)/t+","+Math.round(this.rawData[3]*t)/t+","+Math.round(this.rawData[4]*t)/t+","+Math.round(this.rawData[5]*t)/t+","+Math.round(this.rawData[6]*t)/t+","+Math.round(this.rawData[7]*t)/t+","+Math.round(this.rawData[8]*t)/t+","+Math.round(this.rawData[9]*t)/t+","+Math.round(this.rawData[10]*t)/t+","+Math.round(this.rawData[11]*t)/t+","+Math.round(this.rawData[12]*t)/t+","+Math.round(this.rawData[13]*t)/t+","+Math.round(this.rawData[14]*t)/t+","+Math.round(this.rawData[15]*t)/t+")"};e.prototype.toString=function(){return"matrix3d("+Math.round(this.rawData[0]*1e3)/1e3+","+Math.round(this.rawData[1]*1e3)/1e3+","+Math.round(this.rawData[2]*1e3)/1e3+","+Math.round(this.rawData[3]*1e3)/1e3+","+Math.round(this.rawData[4]*1e3)/1e3+","+Math.round(this.rawData[5]*1e3)/1e3+","+Math.round(this.rawData[6]*1e3)/1e3+","+Math.round(this.rawData[7]*1e3)/1e3+","+Math.round(this.rawData[8]*1e3)/1e3+","+Math.round(this.rawData[9]*1e3)/1e3+","+Math.round(this.rawData[10]*1e3)/1e3+","+Math.round(this.rawData[11]*1e3)/1e3+","+Math.round(this.rawData[12]*1e3)/1e3+","+Math.round(this.rawData[13]*1e3)/1e3+","+Math.round(this.rawData[14]*1e3)/1e3+","+Math.round(this.rawData[15]*1e3)/1e3+")"};return e}();t.exports=o},{"awayjs-core/lib/errors/ArgumentError":127,"awayjs-core/lib/geom/Orientation3D":146,"awayjs-core/lib/geom/Vector3D":151}],145:[function(e,t,r){var s=e("awayjs-core/lib/geom/Matrix3D");var i=e("awayjs-core/lib/geom/Vector3D");var a=function(){function e(){}e.quaternion2matrix=function(t,r){if(r===void 0){r=null}var i=t.x;var a=t.y;var o=t.z;var n=t.w;var l=i*i;var h=i*a;var p=i*o;var u=i*n;var c=a*a;var d=a*o;var f=a*n;var y=o*o;var m=o*n;var _=e.RAW_DATA_CONTAINER;_[0]=1-2*(c+y);_[1]=2*(h+m);_[2]=2*(p-f);_[4]=2*(h-m);_[5]=1-2*(l+y);_[6]=2*(d+u);_[8]=2*(p+f);_[9]=2*(d-u);_[10]=1-2*(l+c);_[3]=_[7]=_[11]=_[12]=_[13]=_[14]=0;_[15]=1;if(r){r.copyRawDataFrom(_);return r}else return new s(_)};e.getForward=function(e,t){if(t===void 0){t=null}if(t===null){t=new i(0,0,0)}e.copyColumnTo(2,t);t.normalize();return t};e.getUp=function(e,t){if(t===void 0){t=null}if(t===null){t=new i(0,0,0)}e.copyColumnTo(1,t);t.normalize();return t};e.getRight=function(e,t){if(t===void 0){t=null}if(t===null){t=new i(0,0,0)}e.copyColumnTo(0,t);t.normalize();return t};e.compare=function(t,r){var s=e.RAW_DATA_CONTAINER;var i=r.rawData;t.copyRawDataTo(s);for(var a=0;a<16;++a){if(s[a]!=i[a])return false}return true};e.lookAt=function(t,r,s,i){var a;var o;var n;var l=e.RAW_DATA_CONTAINER;n=s.crossProduct(i);n.normalize();o=n.crossProduct(s);o.normalize();a=s.clone();a.normalize();l[0]=n.x;l[1]=o.x;l[2]=-a.x;l[3]=0;l[4]=n.y;l[5]=o.y;l[6]=-a.y;l[7]=0;l[8]=n.z;l[9]=o.z;l[10]=-a.z;l[11]=0;l[12]=-n.dotProduct(r);l[13]=-o.dotProduct(r);l[14]=a.dotProduct(r);l[15]=1;t.copyRawDataFrom(l)};e.reflection=function(t,r){if(r===void 0){r=null}if(r===null)r=new s;var i=t.a,a=t.b,o=t.c,n=t.d;var l=e.RAW_DATA_CONTAINER;var h=-2*i*a;var p=-2*i*o;var u=-2*a*o;l[0]=1-2*i*i;l[4]=h;l[8]=p;l[12]=-2*i*n;l[1]=h;l[5]=1-2*a*a;l[9]=u;l[13]=-2*a*n;l[2]=p;l[6]=u;l[10]=1-2*o*o;l[14]=-2*o*n;l[3]=0;l[7]=0;l[11]=0;l[15]=1;r.copyRawDataFrom(l);return r};e.transformVector=function(t,r,s){if(s===void 0){s=null}if(!s)s=new i;var a=e.RAW_DATA_CONTAINER;t.copyRawDataTo(a);var o=a[0];var n=a[1];var l=a[2];var h=a[3];var p=a[4];var u=a[5];var c=a[6];var d=a[7];var f=a[8];var y=a[9];var m=a[10];var _=a[11];var b=a[12];var g=a[13];var w=a[14];var v=a[15];var j=r.x;var x=r.y;var P=r.z;s.x=o*j+p*x+f*P+b;s.y=n*j+u*x+y*P+g;s.z=l*j+c*x+m*P+w;s.w=h*j+d*x+_*P+v;return s};e.deltaTransformVector=function(t,r,s){if(s===void 0){s=null}if(!s)s=new i;var a=e.RAW_DATA_CONTAINER;t.copyRawDataTo(a);var o=a[0];var n=a[1];var l=a[2];var h=a[3];var p=a[4];var u=a[5];var c=a[6];var d=a[7];var f=a[8];var y=a[9];var m=a[10];var _=a[11];var b=r.x;var g=r.y;var w=r.z;s.x=o*b+p*g+f*w;s.y=n*b+u*g+y*w;s.z=l*b+c*g+m*w;s.w=h*b+d*g+_*w;return s};e.getTranslation=function(e,t){if(t===void 0){t=null}if(!t)t=new i;e.copyColumnTo(3,t);return t};e.deltaTransformVectors=function(t,r,s){var i=e.RAW_DATA_CONTAINER;t.copyRawDataTo(i);var a=i[0];var o=i[1];var n=i[2];var l=i[3];var h=i[4];var p=i[5];var u=i[6];var c=i[7];var d=i[8];var f=i[9];var y=i[10];var m=i[11];var _=0;var b=r.length;for(var g=0;g<b;g+=3){var w=r[g];var v=r[g+1];var j=r[g+2];s[_++]=a*w+h*v+d*j;s[_++]=o*w+p*v+f*j;s[_++]=n*w+u*v+y*j}};e.RAW_DATA_CONTAINER=new Array(16);e.CALCULATION_MATRIX=new s;return e}();t.exports=a},{"awayjs-core/lib/geom/Matrix3D":144,"awayjs-core/lib/geom/Vector3D":151}],146:[function(e,t,r){var s=function(){function e(){}e.AXIS_ANGLE="axisAngle";e.EULER_ANGLES="eulerAngles";e.QUATERNION="quaternion";return e}();t.exports=s},{}],147:[function(e,t,r){var s=e("awayjs-core/lib/geom/PlaneClassification");var i=function(){function e(t,r,s,i){if(t===void 0){t=0}if(r===void 0){r=0}if(s===void 0){s=0}if(i===void 0){i=0}this.a=t;this.b=r;this.c=s;this.d=i;if(t==0&&r==0){this._iAlignment=e.ALIGN_XY_AXIS}else if(r==0&&s==0){this._iAlignment=e.ALIGN_YZ_AXIS}else if(t==0&&s==0){this._iAlignment=e.ALIGN_XZ_AXIS}else{this._iAlignment=e.ALIGN_ANY}}e.prototype.fromPoints=function(t,r,s){var i=r.x-t.x;var a=r.y-t.y;var o=r.z-t.z;var n=s.x-t.x;var l=s.y-t.y;var h=s.z-t.z;this.a=a*h-o*l;this.b=o*n-i*h;this.c=i*l-a*n;this.d=this.a*t.x+this.b*t.y+this.c*t.z;if(this.a==0&&this.b==0){this._iAlignment=e.ALIGN_XY_AXIS}else if(this.b==0&&this.c==0){this._iAlignment=e.ALIGN_YZ_AXIS}else if(this.a==0&&this.c==0){this._iAlignment=e.ALIGN_XZ_AXIS}else{this._iAlignment=e.ALIGN_ANY}};e.prototype.fromNormalAndPoint=function(t,r){this.a=t.x;this.b=t.y;this.c=t.z;this.d=this.a*r.x+this.b*r.y+this.c*r.z;if(this.a==0&&this.b==0){this._iAlignment=e.ALIGN_XY_AXIS}else if(this.b==0&&this.c==0){this._iAlignment=e.ALIGN_YZ_AXIS}else if(this.a==0&&this.c==0){this._iAlignment=e.ALIGN_XZ_AXIS}else{this._iAlignment=e.ALIGN_ANY}};e.prototype.normalize=function(){var e=1/Math.sqrt(this.a*this.a+this.b*this.b+this.c*this.c);this.a*=e;this.b*=e;this.c*=e;this.d*=e;return this};e.prototype.distance=function(t){if(this._iAlignment==e.ALIGN_YZ_AXIS){return this.a*t.x-this.d}else if(this._iAlignment==e.ALIGN_XZ_AXIS){return this.b*t.y-this.d}else if(this._iAlignment==e.ALIGN_XY_AXIS){return this.c*t.z-this.d}else{return this.a*t.x+this.b*t.y+this.c*t.z-this.d}};e.prototype.classifyPoint=function(t,r){if(r===void 0){r=.01}if(this.d!=this.d)return s.FRONT;var i;if(this._iAlignment==e.ALIGN_YZ_AXIS)i=this.a*t.x-this.d;else if(this._iAlignment==e.ALIGN_XZ_AXIS)i=this.b*t.y-this.d;else if(this._iAlignment==e.ALIGN_XY_AXIS)i=this.c*t.z-this.d;else i=this.a*t.x+this.b*t.y+this.c*t.z-this.d;if(i<-r)return s.BACK;else if(i>r)return s.FRONT;else return s.INTERSECT};e.prototype.toString=function(){return"Plane3D [a:"+this.a+", b:"+this.b+", c:"+this.c+", d:"+this.d+"]"};e.ALIGN_ANY=0;e.ALIGN_XY_AXIS=1;e.ALIGN_YZ_AXIS=2;e.ALIGN_XZ_AXIS=3;return e}();t.exports=i},{"awayjs-core/lib/geom/PlaneClassification":148}],148:[function(e,t,r){var s=function(){function e(){}e.BACK=0;e.FRONT=1;e.IN=0;e.OUT=1;e.INTERSECT=2;return e}();t.exports=s},{}],149:[function(e,t,r){t.exports=e(17)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Point.js":17}],150:[function(e,t,r){t.exports=e(18)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Rectangle.js":18,"awayjs-core/lib/geom/Point":149}],151:[function(e,t,r){t.exports=e(20)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Vector3D.js":20}],152:[function(e,t,r){t.exports=e(22)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/AssetLibraryBundle.js":22,"awayjs-core/lib/errors/Error":128,"awayjs-core/lib/events/AssetEvent":131,"awayjs-core/lib/events/EventDispatcher":133,"awayjs-core/lib/events/IOErrorEvent":135,"awayjs-core/lib/events/LoaderEvent":136,"awayjs-core/lib/events/ParserEvent":137,"awayjs-core/lib/library/AssetLibraryIterator":153,"awayjs-core/lib/library/AssetLoader":154,"awayjs-core/lib/library/ConflictPrecedence":157,"awayjs-core/lib/library/ConflictStrategy":158,"awayjs-core/lib/library/NamedAssetBase":162}],153:[function(e,t,r){t.exports=e(23)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/AssetLibraryIterator.js":23}],154:[function(e,t,r){t.exports=e(24)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/AssetLoader.js":24,"awayjs-core/lib/errors/Error":128,"awayjs-core/lib/events/AssetEvent":131,"awayjs-core/lib/events/Event":132,"awayjs-core/lib/events/EventDispatcher":133,"awayjs-core/lib/events/IOErrorEvent":135,"awayjs-core/lib/events/LoaderEvent":136,"awayjs-core/lib/events/ParserEvent":137,"awayjs-core/lib/library/AssetLoaderToken":155,"awayjs-core/lib/net/URLLoader":164,"awayjs-core/lib/net/URLLoaderDataFormat":165,"awayjs-core/lib/parsers/CubeTextureParser":169,"awayjs-core/lib/parsers/ResourceDependency":172,"awayjs-core/lib/parsers/Texture2DParser":173}],155:[function(e,t,r){t.exports=e(26)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/AssetLoaderToken.js":26,"awayjs-core/lib/events/EventDispatcher":133}],156:[function(e,t,r){t.exports=e(27)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/AssetType.js":27}],157:[function(e,t,r){t.exports=e(28)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/ConflictPrecedence.js":28}],158:[function(e,t,r){t.exports=e(29)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/ConflictStrategy.js":29,"awayjs-core/lib/library/ErrorConflictStrategy":160,"awayjs-core/lib/library/IgnoreConflictStrategy":161,"awayjs-core/lib/library/NumSuffixConflictStrategy":163}],159:[function(e,t,r){t.exports=e(30)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/ConflictStrategyBase.js":30,"awayjs-core/lib/errors/AbstractMethodError":126,"awayjs-core/lib/events/AssetEvent":131,"awayjs-core/lib/library/ConflictPrecedence":157}],160:[function(e,t,r){t.exports=e(31)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/ErrorConflictStrategy.js":31,"awayjs-core/lib/errors/Error":128,"awayjs-core/lib/library/ConflictStrategyBase":159}],161:[function(e,t,r){t.exports=e(32)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/IgnoreConflictStrategy.js":32,"awayjs-core/lib/library/ConflictStrategyBase":159}],162:[function(e,t,r){t.exports=e(33)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/NamedAssetBase.js":33,"awayjs-core/lib/errors/AbstractMethodError":126,"awayjs-core/lib/events/AssetEvent":131,"awayjs-core/lib/events/EventDispatcher":133}],163:[function(e,t,r){t.exports=e(34)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/NumSuffixConflictStrategy.js":34,"awayjs-core/lib/library/ConflictStrategyBase":159}],164:[function(e,t,r){t.exports=e(35)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/net/URLLoader.js":35,"awayjs-core/lib/events/Event":132,"awayjs-core/lib/events/EventDispatcher":133,"awayjs-core/lib/events/HTTPStatusEvent":134,"awayjs-core/lib/events/IOErrorEvent":135,"awayjs-core/lib/events/ProgressEvent":138,"awayjs-core/lib/net/URLLoaderDataFormat":165,"awayjs-core/lib/net/URLRequestMethod":167,"awayjs-core/lib/net/URLVariables":168}],165:[function(e,t,r){t.exports=e(36)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/net/URLLoaderDataFormat.js":36}],166:[function(e,t,r){t.exports=e(37)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/net/URLRequest.js":37,"awayjs-core/lib/net/URLRequestMethod":167}],167:[function(e,t,r){t.exports=e(38)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/net/URLRequestMethod.js":38}],168:[function(e,t,r){t.exports=e(39)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/net/URLVariables.js":39}],169:[function(e,t,r){t.exports=e(40)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/parsers/CubeTextureParser.js":40,"awayjs-core/lib/net/URLLoaderDataFormat":165,"awayjs-core/lib/net/URLRequest":166,"awayjs-core/lib/parsers/ParserBase":170,"awayjs-core/lib/textures/ImageCubeTexture":180}],170:[function(e,t,r){t.exports=e(41)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/parsers/ParserBase.js":41,"awayjs-core/lib/errors/AbstractMethodError":126,"awayjs-core/lib/events/AssetEvent":131,"awayjs-core/lib/events/EventDispatcher":133,"awayjs-core/lib/events/ParserEvent":137,"awayjs-core/lib/events/TimerEvent":140,"awayjs-core/lib/parsers/ParserUtils":171,"awayjs-core/lib/parsers/ResourceDependency":172,"awayjs-core/lib/utils/TextureUtils":189,"awayjs-core/lib/utils/Timer":190,"awayjs-core/lib/utils/getTimer":191}],171:[function(e,t,r){t.exports=e(42)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/parsers/ParserUtils.js":42,"awayjs-core/lib/utils/ByteArray":186}],172:[function(e,t,r){t.exports=e(43)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/parsers/ResourceDependency.js":43}],173:[function(e,t,r){t.exports=e(44)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/parsers/Texture2DParser.js":44,"awayjs-core/lib/net/URLLoaderDataFormat":165,"awayjs-core/lib/parsers/ParserBase":170,"awayjs-core/lib/parsers/ParserUtils":171,"awayjs-core/lib/textures/ImageTexture":181,"awayjs-core/lib/utils/ByteArray":186,"awayjs-core/lib/utils/TextureUtils":189}],174:[function(e,t,r){var s=function(){function e(){}e.LEFT_HANDED="leftHanded";e.RIGHT_HANDED="rightHanded";return e}();t.exports=s},{}],175:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/projections/PerspectiveProjection");var a=e("awayjs-core/lib/projections/ProjectionBase");var o=function(e){s(t,e);function t(){e.call(this);this._pMatrix.copyFrom((new i).matrix)}Object.defineProperty(t.prototype,"near",{set:function(e){this._pNear=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"far",{set:function(e){this._pFar=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"iAspectRatio",{set:function(e){this._pAspectRatio=e},enumerable:true,configurable:true});t.prototype.clone=function(){var e=new t;e._pMatrix.copyFrom(this._pMatrix);e._pNear=this._pNear;e._pFar=this._pFar;e._pAspectRatio=this._pAspectRatio;e.pInvalidateMatrix();return e};t.prototype.pUpdateMatrix=function(){this._pMatrixInvalid=false};return t}(a);t.exports=o},{"awayjs-core/lib/projections/PerspectiveProjection":176,"awayjs-core/lib/projections/ProjectionBase":177}],176:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/geom/Vector3D");var a=e("awayjs-core/lib/projections/CoordinateSystem");var o=e("awayjs-core/lib/projections/ProjectionBase");var n=function(e){s(t,e);function t(t,r){if(t===void 0){t=60}if(r===void 0){r="leftHanded"}e.call(this,r);this._fieldOfView=60;this._focalLength=1e3;this._hFieldOfView=60;this._hFocalLength=1e3;this._preserveAspectRatio=true;this._preserveFocalLength=false;this.fieldOfView=t}Object.defineProperty(t.prototype,"preserveAspectRatio",{get:function(){return this._preserveAspectRatio},set:function(e){if(this._preserveAspectRatio==e)return;this._preserveAspectRatio=e;if(this._preserveAspectRatio)this.pInvalidateMatrix()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"preserveFocalLength",{get:function(){return this._preserveFocalLength},set:function(e){if(this._preserveFocalLength==e)return;this._preserveFocalLength=e;this.pInvalidateMatrix()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"fieldOfView",{get:function(){return this._fieldOfView},set:function(e){if(this._fieldOfView==e)return;this._fieldOfView=e;this.pInvalidateMatrix()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"focalLength",{get:function(){return this._focalLength},set:function(e){if(this._focalLength==e)return;this._focalLength=e;this.pInvalidateMatrix()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"hFieldOfView",{get:function(){return this._hFieldOfView},set:function(e){if(this._hFieldOfView==e)return;this._hFieldOfView=e;this._hFocalLength=1/Math.tan(this._hFieldOfView*Math.PI/360);this.pInvalidateMatrix()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"hFocalLength",{get:function(){return this._hFocalLength},set:function(e){if(this._hFocalLength==e)return;this._hFocalLength=e;this.pInvalidateMatrix()},enumerable:true,configurable:true});t.prototype.unproject=function(e,t,r){var s=new i(e,-t,r,1);s.x*=r;s.y*=r;s=this.unprojectionMatrix.transformVector(s);s.z=r;return s};t.prototype.clone=function(){var e=new t(this._fieldOfView);e._pNear=this._pNear;e._pFar=this._pFar;e._pAspectRatio=this._pAspectRatio;e._pCoordinateSystem=this._pCoordinateSystem;return e};t.prototype.pUpdateMatrix=function(){var e=[];if(this._preserveFocalLength){if(this._preserveAspectRatio)this._hFocalLength=this._focalLength;this._fieldOfView=Math.atan(.5*this._pScissorRect.height/this._focalLength)*360/Math.PI;this._hFieldOfView=Math.atan(.5*this._pScissorRect.width/this._hFocalLength)*360/Math.PI}else{this._focalLength=.5*this._pScissorRect.height/Math.tan(this._fieldOfView*Math.PI/360);if(this._preserveAspectRatio)this._hFocalLength=this._focalLength;else this._hFocalLength=.5*this._pScissorRect.width/Math.tan(this._hFieldOfView*Math.PI/360)}var t=-this._pOriginX/this._hFocalLength;var r=(1-this._pOriginX)/this._hFocalLength;var s=-this._pOriginY/this._focalLength;var i=(1-this._pOriginY)/this._focalLength;var o;var n;var l;var h;var p=-((t-r)*this._pScissorRect.x+t*this._pScissorRect.width);var u=(s-i)*this._pScissorRect.y+s*this._pScissorRect.height;o=p-(r-t)*this._pViewPort.width;n=p;l=u;h=u+(i-s)*this._pViewPort.height;e[0]=2/(n-o);e[5]=2/(h-l);e[8]=(n+o)/(n-o);e[9]=(h+l)/(h-l);e[10]=(this._pFar+this._pNear)/(this._pFar-this._pNear);e[11]=1;e[1]=e[2]=e[3]=e[4]=e[6]=e[7]=e[12]=e[13]=e[15]=0;e[14]=-2*this._pFar*this._pNear/(this._pFar-this._pNear);if(this._pCoordinateSystem==a.RIGHT_HANDED)e[5]=-e[5];this._pMatrix.copyRawDataFrom(e);this._pFrustumCorners[0]=this._pFrustumCorners[9]=this._pNear*o;this._pFrustumCorners[3]=this._pFrustumCorners[6]=this._pNear*n;this._pFrustumCorners[1]=this._pFrustumCorners[4]=this._pNear*l;this._pFrustumCorners[7]=this._pFrustumCorners[10]=this._pNear*h;this._pFrustumCorners[12]=this._pFrustumCorners[21]=this._pFar*o;this._pFrustumCorners[15]=this._pFrustumCorners[18]=this._pFar*n;this._pFrustumCorners[13]=this._pFrustumCorners[16]=this._pFar*l;this._pFrustumCorners[19]=this._pFrustumCorners[22]=this._pFar*h;this._pFrustumCorners[2]=this._pFrustumCorners[5]=this._pFrustumCorners[8]=this._pFrustumCorners[11]=this._pNear;this._pFrustumCorners[14]=this._pFrustumCorners[17]=this._pFrustumCorners[20]=this._pFrustumCorners[23]=this._pFar;this._pMatrixInvalid=false};return t}(o);t.exports=n},{"awayjs-core/lib/geom/Vector3D":151,"awayjs-core/lib/projections/CoordinateSystem":174,"awayjs-core/lib/projections/ProjectionBase":177}],177:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/geom/Matrix3D");var a=e("awayjs-core/lib/geom/Rectangle");var o=e("awayjs-core/lib/events/EventDispatcher");var n=e("awayjs-core/lib/events/ProjectionEvent");var l=e("awayjs-core/lib/errors/AbstractMethodError");var h=function(e){s(t,e);function t(t){if(t===void 0){t="leftHanded"}e.call(this);this._pMatrix=new i;this._pScissorRect=new a;this._pViewPort=new a;this._pNear=20;this._pFar=3e3;this._pAspectRatio=1;this._pMatrixInvalid=true;this._pFrustumCorners=[];this._pOriginX=.5;this._pOriginY=.5;this._unprojectionInvalid=true;this.coordinateSystem=t}Object.defineProperty(t.prototype,"coordinateSystem",{get:function(){return this._pCoordinateSystem},set:function(e){if(this._pCoordinateSystem==e)return;this._pCoordinateSystem=e;this.pInvalidateMatrix()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"frustumCorners",{get:function(){return this._pFrustumCorners},set:function(e){this._pFrustumCorners=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"matrix",{get:function(){if(this._pMatrixInvalid){this.pUpdateMatrix();this._pMatrixInvalid=false}return this._pMatrix},set:function(e){this._pMatrix=e;this.pInvalidateMatrix()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"near",{get:function(){return this._pNear},set:function(e){if(e==this._pNear){return}this._pNear=e;this.pInvalidateMatrix()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"originX",{get:function(){return this._pOriginX},set:function(e){if(this._pOriginX==e)return;this._pOriginX=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"originY",{get:function(){return this._pOriginY},set:function(e){if(this._pOriginY==e)return;this._pOriginY=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"far",{get:function(){return this._pFar},set:function(e){if(e==this._pFar){return}this._pFar=e;this.pInvalidateMatrix()},enumerable:true,configurable:true});t.prototype.project=function(e){var t=this.matrix.transformVector(e);t.x=t.x/t.w;t.y=-t.y/t.w;t.z=e.z;return t};Object.defineProperty(t.prototype,"unprojectionMatrix",{get:function(){if(this._unprojectionInvalid){if(!this._unprojection)this._unprojection=new i;this._unprojection.copyFrom(this.matrix);this._unprojection.invert();this._unprojectionInvalid=false}return this._unprojection},enumerable:true,configurable:true});t.prototype.unproject=function(e,t,r){throw new l};t.prototype.clone=function(){throw new l};Object.defineProperty(t.prototype,"_iAspectRatio",{get:function(){return this._pAspectRatio},set:function(e){if(this._pAspectRatio==e)return;this._pAspectRatio=e;this.pInvalidateMatrix()},enumerable:true,configurable:true});t.prototype.pInvalidateMatrix=function(){this._pMatrixInvalid=true;this._unprojectionInvalid=true;this.dispatchEvent(new n(n.MATRIX_CHANGED,this))};t.prototype.pUpdateMatrix=function(){throw new l};t.prototype._iUpdateScissorRect=function(e,t,r,s){this._pScissorRect.x=e;this._pScissorRect.y=t;this._pScissorRect.width=r;this._pScissorRect.height=s;this.pInvalidateMatrix()};t.prototype._iUpdateViewport=function(e,t,r,s){this._pViewPort.x=e;this._pViewPort.y=t;this._pViewPort.width=r;this._pViewPort.height=s;this.pInvalidateMatrix()};return t}(o);t.exports=h},{"awayjs-core/lib/errors/AbstractMethodError":126,"awayjs-core/lib/events/EventDispatcher":133,"awayjs-core/lib/events/ProjectionEvent":139,"awayjs-core/lib/geom/Matrix3D":144,"awayjs-core/lib/geom/Rectangle":150}],178:[function(e,t,r){t.exports=e(45)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/BitmapTexture.js":45,"awayjs-core/lib/errors/Error":128,"awayjs-core/lib/textures/Texture2DBase":184,"awayjs-core/lib/utils/TextureUtils":189}],179:[function(e,t,r){t.exports=e(46)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/CubeTextureBase.js":46,"awayjs-core/lib/errors/AbstractMethodError":126,"awayjs-core/lib/textures/MipmapGenerator":182,"awayjs-core/lib/textures/TextureProxyBase":185}],180:[function(e,t,r){t.exports=e(47)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/ImageCubeTexture.js":47,"awayjs-core/lib/errors/Error":128,"awayjs-core/lib/textures/CubeTextureBase":179,"awayjs-core/lib/utils/TextureUtils":189}],181:[function(e,t,r){t.exports=e(48)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/ImageTexture.js":48,"awayjs-core/lib/errors/Error":128,"awayjs-core/lib/textures/Texture2DBase":184,"awayjs-core/lib/utils/TextureUtils":189}],182:[function(e,t,r){t.exports=e(49)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/MipmapGenerator.js":49,"awayjs-core/lib/base/BitmapData":121,"awayjs-core/lib/geom/Matrix":143,"awayjs-core/lib/geom/Rectangle":150}],183:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/errors/Error");var a=e("awayjs-core/lib/textures/Texture2DBase");var o=e("awayjs-core/lib/utils/TextureUtils");var n=function(e){s(t,e);function t(t,r){e.call(this,false);this._pSetSize(t,r)}Object.defineProperty(t.prototype,"width",{get:function(){return this._pWidth},set:function(e){if(e==this._pWidth)return;if(!o.isDimensionValid(e))throw new i("Invalid size: Width and height must be power of 2 and cannot exceed 2048");this.invalidateContent();this._pSetSize(e,this._pHeight)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"height",{get:function(){return this._pHeight},set:function(e){if(e==this._pHeight)return;if(!o.isDimensionValid(e))throw new i("Invalid size: Width and height must be power of 2 and cannot exceed 2048");this.invalidateContent();this._pSetSize(this._pWidth,e)},enumerable:true,configurable:true});return t}(a);t.exports=n},{"awayjs-core/lib/errors/Error":128,"awayjs-core/lib/textures/Texture2DBase":184,"awayjs-core/lib/utils/TextureUtils":189}],184:[function(e,t,r){t.exports=e(51)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/Texture2DBase.js":51,"awayjs-core/lib/errors/AbstractMethodError":126,"awayjs-core/lib/textures/MipmapGenerator":182,"awayjs-core/lib/textures/TextureProxyBase":185}],185:[function(e,t,r){t.exports=e(52)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/TextureProxyBase.js":52,"awayjs-core/lib/library/AssetType":156,"awayjs-core/lib/library/NamedAssetBase":162}],186:[function(e,t,r){t.exports=e(54)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/ByteArray.js":54,"awayjs-core/lib/utils/ByteArrayBase":187}],187:[function(e,t,r){t.exports=e(55)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/ByteArrayBase.js":55,"awayjs-core/lib/errors/AbstractMethodError":126}],188:[function(e,t,r){t.exports=e(56)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/ColorUtils.js":56}],189:[function(e,t,r){t.exports=e(58)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/TextureUtils.js":58}],190:[function(e,t,r){t.exports=e(59)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/Timer.js":59,"awayjs-core/lib/errors/Error":128,"awayjs-core/lib/events/EventDispatcher":133,"awayjs-core/lib/events/TimerEvent":140}],191:[function(e,t,r){t.exports=e(60)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/getTimer.js":60}],192:[function(e,t,r){var s=function(){function e(){}e.SINGLE_PASS="singlePass";e.MULTI_PASS="multiPass";return e}();t.exports=s},{}],193:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/geom/ColorTransform");var a=e("awayjs-core/lib/textures/Texture2DBase");var o=e("awayjs-display/lib/base/BlendMode");var n=e("awayjs-display/lib/materials/lightpickers/StaticLightPicker");var l=e("awayjs-stagegl/lib/base/ContextGLCompareMode");var h=e("awayjs-renderergl/lib/materials/TriangleMaterialBase");var p=e("awayjs-methodmaterials/lib/TriangleMaterialMode");var u=e("awayjs-methodmaterials/lib/methods/AmbientBasicMethod");var c=e("awayjs-methodmaterials/lib/methods/DiffuseBasicMethod");var d=e("awayjs-methodmaterials/lib/methods/NormalBasicMethod");var f=e("awayjs-methodmaterials/lib/methods/SpecularBasicMethod");var y=e("awayjs-methodmaterials/lib/passes/MaterialPassMode");var m=e("awayjs-methodmaterials/lib/passes/TriangleMethodPass");var _=function(e){s(t,e);function t(t,r,s,i){if(t===void 0){t=null}if(r===void 0){r=null}if(s===void 0){s=false}if(i===void 0){i=false}e.call(this);this._alphaBlending=false;this._alpha=1;this._ambientMethod=new u;this._diffuseMethod=new c;this._normalMethod=new d;this._specularMethod=new f;this._depthCompareMode=l.LESS_EQUAL;this._materialMode=p.SINGLE_PASS;if(t instanceof a){this.texture=t;this.smooth=r==null?true:false;this.repeat=s;this.mipmap=i}else{this.color=t==null?16777215:Number(t);this.alpha=r==null?1:Number(r)}}Object.defineProperty(t.prototype,"materialMode",{get:function(){return this._materialMode
},set:function(e){if(this._materialMode==e)return;this._materialMode=e;this._pInvalidateScreenPasses()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"depthCompareMode",{get:function(){return this._depthCompareMode},set:function(e){if(this._depthCompareMode==e)return;this._depthCompareMode=e;this._pInvalidateScreenPasses()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(e){if(e>1)e=1;else if(e<0)e=0;if(this._alpha==e)return;this._alpha=e;if(this._colorTransform==null)this._colorTransform=new i;this._colorTransform.alphaMultiplier=e;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"colorTransform",{get:function(){return this._screenPass.colorTransform},set:function(e){this._screenPass.colorTransform=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"diffuseTexture",{get:function(){return this._diffuseMethod.texture},set:function(e){this._diffuseMethod.texture=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"ambientMethod",{get:function(){return this._ambientMethod},set:function(e){if(this._ambientMethod==e)return;if(e&&this._ambientMethod)e.copyFrom(this._ambientMethod);this._ambientMethod=e;this._pInvalidateScreenPasses()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"shadowMethod",{get:function(){return this._shadowMethod},set:function(e){if(this._shadowMethod==e)return;if(e&&this._shadowMethod)e.copyFrom(this._shadowMethod);this._shadowMethod=e;this._pInvalidateScreenPasses()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"diffuseMethod",{get:function(){return this._diffuseMethod},set:function(e){if(this._diffuseMethod==e)return;if(e&&this._diffuseMethod)e.copyFrom(this._diffuseMethod);this._diffuseMethod=e;this._pInvalidateScreenPasses()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"specularMethod",{get:function(){return this._specularMethod},set:function(e){if(this._specularMethod==e)return;if(e&&this._specularMethod)e.copyFrom(this._specularMethod);this._specularMethod=e;this._pInvalidateScreenPasses()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"normalMethod",{get:function(){return this._normalMethod},set:function(e){if(this._normalMethod==e)return;if(e&&this._normalMethod)e.copyFrom(this._normalMethod);this._normalMethod=e;this._pInvalidateScreenPasses()},enumerable:true,configurable:true});t.prototype.addEffectMethod=function(e){if(this._screenPass==null)this._screenPass=new m;this._screenPass.addEffectMethod(e);this._pInvalidateScreenPasses()};Object.defineProperty(t.prototype,"numEffectMethods",{get:function(){return this._screenPass?this._screenPass.numEffectMethods:0},enumerable:true,configurable:true});t.prototype.hasEffectMethod=function(e){return this._screenPass?this._screenPass.hasEffectMethod(e):false};t.prototype.getEffectMethodAt=function(e){if(this._screenPass==null)return null;return this._screenPass.getEffectMethodAt(e)};t.prototype.addEffectMethodAt=function(e,t){if(this._screenPass==null)this._screenPass=new m;this._screenPass.addEffectMethodAt(e,t);this._pInvalidatePasses()};t.prototype.removeEffectMethod=function(e){if(this._screenPass==null)return;this._screenPass.removeEffectMethod(e);if(this._screenPass.numEffectMethods==0)this._pInvalidatePasses()};Object.defineProperty(t.prototype,"normalMap",{get:function(){return this._normalMethod.normalMap},set:function(e){this._normalMethod.normalMap=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"specularMap",{get:function(){return this._specularMethod.texture},set:function(e){this._specularMethod.texture=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"gloss",{get:function(){return this._specularMethod.gloss},set:function(e){this._specularMethod.gloss=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"ambient",{get:function(){return this._ambientMethod.ambient},set:function(e){this._ambientMethod.ambient=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"specular",{get:function(){return this._specularMethod.specular},set:function(e){this._specularMethod.specular=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"ambientColor",{get:function(){return this._diffuseMethod.ambientColor},set:function(e){this._diffuseMethod.ambientColor=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"diffuseColor",{get:function(){return this._diffuseMethod.diffuseColor},set:function(e){this._diffuseMethod.diffuseColor=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"specularColor",{get:function(){return this._specularMethod.specularColor},set:function(e){this._specularMethod.specularColor=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"alphaBlending",{get:function(){return this._alphaBlending},set:function(e){if(this._alphaBlending==e)return;this._alphaBlending=e;this._pInvalidatePasses()},enumerable:true,configurable:true});t.prototype._iUpdateMaterial=function(){if(this._pScreenPassesInvalid){this._pScreenPassesInvalid=false;this.initPasses();this.setBlendAndCompareModes();this._pClearScreenPasses();if(this._materialMode==p.MULTI_PASS){if(this._casterLightPass)this._pAddScreenPass(this._casterLightPass);if(this._nonCasterLightPasses)for(var e=0;e<this._nonCasterLightPasses.length;++e)this._pAddScreenPass(this._nonCasterLightPasses[e])}if(this._screenPass)this._pAddScreenPass(this._screenPass)}};t.prototype.initPasses=function(){if(this.numLights==0||this.numEffectMethods>0||this._materialMode==p.SINGLE_PASS)this.initEffectPass();else if(this._screenPass)this.removeEffectPass();if(this._shadowMethod&&this._materialMode==p.MULTI_PASS)this.initCasterLightPass();else if(this._casterLightPass)this.removeCasterLightPass();if(this.numNonCasters>0&&this._materialMode==p.MULTI_PASS)this.initNonCasterLightPasses();else if(this._nonCasterLightPasses)this.removeNonCasterLightPasses()};t.prototype.setBlendAndCompareModes=function(){var e=Boolean(this._casterLightPass||this._screenPass);if(this._casterLightPass){this._casterLightPass.forceSeparateMVP=e;this._casterLightPass.setBlendMode(o.NORMAL);this._casterLightPass.depthCompareMode=this._depthCompareMode}if(this._nonCasterLightPasses){var t=0;if(!this._casterLightPass){this._nonCasterLightPasses[0].forceSeparateMVP=e;this._nonCasterLightPasses[0].setBlendMode(o.NORMAL);this._nonCasterLightPasses[0].depthCompareMode=this._depthCompareMode;t=1}for(var r=t;r<this._nonCasterLightPasses.length;++r){this._nonCasterLightPasses[r].forceSeparateMVP=e;this._nonCasterLightPasses[r].setBlendMode(o.ADD);this._nonCasterLightPasses[r].depthCompareMode=l.LESS_EQUAL}}if(this._casterLightPass||this._nonCasterLightPasses){this._pRequiresBlending=false;if(this._screenPass){this._screenPass.passMode=y.EFFECTS;this._screenPass.depthCompareMode=l.LESS_EQUAL;this._screenPass.setBlendMode(o.LAYER);this._screenPass.forceSeparateMVP=e}}else if(this._screenPass){this._pRequiresBlending=this._pBlendMode!=o.NORMAL||this._alphaBlending||this._colorTransform&&this._colorTransform.alphaMultiplier<1;this._screenPass.passMode=y.SUPER_SHADER;this._screenPass.depthCompareMode=this._depthCompareMode;this._screenPass.preserveAlpha=this._pRequiresBlending;this._screenPass.colorTransform=this._colorTransform;this._screenPass.setBlendMode(this._pBlendMode==o.NORMAL&&this._pRequiresBlending?o.LAYER:this._pBlendMode);this._screenPass.forceSeparateMVP=false}};t.prototype.initCasterLightPass=function(){if(this._casterLightPass==null)this._casterLightPass=new m(y.LIGHTING);this._casterLightPass.lightPicker=new n([this._shadowMethod.castingLight]);this._casterLightPass.shadowMethod=this._shadowMethod;this._casterLightPass.diffuseMethod=this._diffuseMethod;this._casterLightPass.ambientMethod=this._ambientMethod;this._casterLightPass.normalMethod=this._normalMethod;this._casterLightPass.specularMethod=this._specularMethod};t.prototype.removeCasterLightPass=function(){this._casterLightPass.dispose();this._pRemoveScreenPass(this._casterLightPass);this._casterLightPass=null};t.prototype.initNonCasterLightPasses=function(){this.removeNonCasterLightPasses();var e;var t=this._pLightPicker.numDirectionalLights;var r=this._pLightPicker.numPointLights;var s=this._pLightPicker.numLightProbes;var i=0;var a=0;var o=0;if(!this._casterLightPass){t+=this._pLightPicker.numCastingDirectionalLights;r+=this._pLightPicker.numCastingPointLights}this._nonCasterLightPasses=new Array;while(i<t||a<r||o<s){e=new m(y.LIGHTING);e.includeCasters=this._shadowMethod==null;e.directionalLightsOffset=i;e.pointLightsOffset=a;e.lightProbesOffset=o;e.lightPicker=this._pLightPicker;e.diffuseMethod=this._diffuseMethod;e.ambientMethod=this._ambientMethod;e.normalMethod=this._normalMethod;e.specularMethod=this._specularMethod;this._nonCasterLightPasses.push(e);i+=e.iNumDirectionalLights;a+=e.iNumPointLights;o+=e.iNumLightProbes}};t.prototype.removeNonCasterLightPasses=function(){if(!this._nonCasterLightPasses)return;for(var e=0;e<this._nonCasterLightPasses.length;++e)this._pRemoveScreenPass(this._nonCasterLightPasses[e]);this._nonCasterLightPasses=null};t.prototype.removeEffectPass=function(){if(this._screenPass.ambientMethod!=this._ambientMethod)this._screenPass.ambientMethod.dispose();if(this._screenPass.diffuseMethod!=this._diffuseMethod)this._screenPass.diffuseMethod.dispose();if(this._screenPass.specularMethod!=this._specularMethod)this._screenPass.specularMethod.dispose();if(this._screenPass.normalMethod!=this._normalMethod)this._screenPass.normalMethod.dispose();this._pRemoveScreenPass(this._screenPass);this._screenPass=null};t.prototype.initEffectPass=function(){if(this._screenPass==null)this._screenPass=new m;if(this._materialMode==p.SINGLE_PASS){this._screenPass.ambientMethod=this._ambientMethod;this._screenPass.diffuseMethod=this._diffuseMethod;this._screenPass.specularMethod=this._specularMethod;this._screenPass.normalMethod=this._normalMethod;this._screenPass.shadowMethod=this._shadowMethod}else if(this._materialMode==p.MULTI_PASS){if(this.numLights==0){this._screenPass.ambientMethod=this._ambientMethod}else{this._screenPass.ambientMethod=null}this._screenPass.preserveAlpha=false;this._screenPass.normalMethod=this._normalMethod}};Object.defineProperty(t.prototype,"numLights",{get:function(){return this._pLightPicker?this._pLightPicker.numLightProbes+this._pLightPicker.numDirectionalLights+this._pLightPicker.numPointLights+this._pLightPicker.numCastingDirectionalLights+this._pLightPicker.numCastingPointLights:0},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numNonCasters",{get:function(){return this._pLightPicker?this._pLightPicker.numLightProbes+this._pLightPicker.numDirectionalLights+this._pLightPicker.numPointLights:0},enumerable:true,configurable:true});return t}(h);t.exports=_},{"awayjs-core/lib/geom/ColorTransform":216,"awayjs-core/lib/textures/Texture2DBase":224,"awayjs-display/lib/base/BlendMode":228,"awayjs-display/lib/materials/lightpickers/StaticLightPicker":243,"awayjs-methodmaterials/lib/TriangleMaterialMode":192,"awayjs-methodmaterials/lib/methods/AmbientBasicMethod":195,"awayjs-methodmaterials/lib/methods/DiffuseBasicMethod":196,"awayjs-methodmaterials/lib/methods/NormalBasicMethod":201,"awayjs-methodmaterials/lib/methods/SpecularBasicMethod":206,"awayjs-methodmaterials/lib/passes/MaterialPassMode":207,"awayjs-methodmaterials/lib/passes/TriangleMethodPass":208,"awayjs-renderergl/lib/materials/TriangleMaterialBase":305,"awayjs-stagegl/lib/base/ContextGLCompareMode":343}],194:[function(e,t,r){var s=function(){function e(e){this.useMethod=true;this.method=e}e.prototype.reset=function(){this.method.iReset();this.texturesIndex=-1;this.vertexConstantsIndex=-1;this.fragmentConstantsIndex=-1;this.needsProjection=false;this.needsView=false;this.needsNormals=false;this.needsTangents=false;this.needsUV=false;this.needsSecondaryUV=false;this.needsGlobalVertexPos=false;this.needsGlobalFragmentPos=false};return e}();t.exports=s},{}],195:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-stagegl/lib/base/ContextGLMipFilter");var a=e("awayjs-stagegl/lib/base/ContextGLTextureFilter");var o=e("awayjs-stagegl/lib/base/ContextGLWrapMode");var n=e("awayjs-renderergl/lib/utils/ShaderCompilerHelper");var l=e("awayjs-methodmaterials/lib/methods/ShadingMethodBase");var h=function(e){s(t,e);function t(){e.call(this);this._color=16777215;this._alpha=1;this._colorR=1;this._colorG=1;this._colorB=1;this._ambient=1}t.prototype.iInitVO=function(e,t){t.needsUV=Boolean(e.texture!=null)};t.prototype.iInitConstants=function(e,t){if(!t.needsUV){this._color=e.color;this.updateColor()}};Object.defineProperty(t.prototype,"ambient",{get:function(){return this._ambient},set:function(e){if(this._ambient==e)return;this._ambient=e;this.updateColor()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(e){if(this._alpha==e)return;this._alpha=e;this.updateColor()},enumerable:true,configurable:true});t.prototype.copyFrom=function(e){var t=e;var r=t};t.prototype.iGetFragmentCode=function(e,t,r,s,i){var a="";var o;if(t.needsUV){o=s.getFreeTextureReg();t.texturesIndex=o.index;a+=n.getTex2DSampleCode(r,i,o,e.texture,e.useSmoothTextures,e.repeatTextures,e.useMipmapping);if(e.alphaThreshold>0){var l=s.getFreeFragmentConstant();t.fragmentConstantsIndex=l.index*4;a+="sub "+r+".w, "+r+".w, "+l+".x\n"+"kil "+r+".w\n"+"add "+r+".w, "+r+".w, "+l+".x\n"}}else{o=s.getFreeFragmentConstant();t.fragmentConstantsIndex=o.index*4;a+="mov "+r+", "+o+"\n"}return a};t.prototype.iActivate=function(e,t,r){if(t.needsUV){r.context.setSamplerStateAt(t.texturesIndex,e.repeatTextures?o.REPEAT:o.CLAMP,e.useSmoothTextures?a.LINEAR:a.NEAREST,e.useMipmapping?i.MIPLINEAR:i.MIPNONE);r.activateTexture(t.texturesIndex,e.texture);if(e.alphaThreshold>0)e.fragmentConstantData[t.fragmentConstantsIndex]=e.alphaThreshold}else{var s=t.fragmentConstantsIndex;var n=e.fragmentConstantData;n[s]=this._colorR;n[s+1]=this._colorG;n[s+2]=this._colorB;n[s+3]=this._alpha}};t.prototype.updateColor=function(){this._colorR=(this._color>>16&255)/255*this._ambient;this._colorG=(this._color>>8&255)/255*this._ambient;this._colorB=(this._color&255)/255*this._ambient};return t}(l);t.exports=h},{"awayjs-methodmaterials/lib/methods/ShadingMethodBase":202,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":308,"awayjs-stagegl/lib/base/ContextGLMipFilter":344,"awayjs-stagegl/lib/base/ContextGLTextureFilter":345,"awayjs-stagegl/lib/base/ContextGLWrapMode":346}],196:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-stagegl/lib/base/ContextGLMipFilter");var a=e("awayjs-stagegl/lib/base/ContextGLTextureFilter");var o=e("awayjs-stagegl/lib/base/ContextGLWrapMode");var n=e("awayjs-renderergl/lib/utils/ShaderCompilerHelper");var l=e("awayjs-methodmaterials/lib/methods/LightingMethodBase");var h=function(e){s(t,e);function t(){e.call(this);this._multiply=true;this._diffuseColor=16777215;this._ambientColor=16777215;this._diffuseR=1;this._diffuseG=1;this._diffuseB=1;this._ambientR=1;this._ambientG=1;this._ambientB=1}t.prototype.iIsUsed=function(e){if(!e.numLights)return false;return true};Object.defineProperty(t.prototype,"multiply",{get:function(){return this._multiply},set:function(e){if(this._multiply==e)return;this._multiply=e;this.iInvalidateShaderProgram()},enumerable:true,configurable:true});t.prototype.iInitVO=function(e,t){t.needsUV=this._pUseTexture;t.needsNormals=e.numLights>0};t.prototype.generateMip=function(e){if(this._pUseTexture)e.activateTexture(0,this._texture)};Object.defineProperty(t.prototype,"diffuseColor",{get:function(){return this._diffuseColor},set:function(e){if(this._diffuseColor==e)return;this._diffuseColor=e;this.updateDiffuse()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"ambientColor",{get:function(){return this._ambientColor},set:function(e){if(this._ambientColor==e)return;this._ambientColor=e;this.updateAmbient()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){var t=e!=null;if(t!=this._pUseTexture||e&&this._texture&&(e.hasMipmaps!=this._texture.hasMipmaps||e.format!=this._texture.format))this.iInvalidateShaderProgram();this._pUseTexture=t;this._texture=e},enumerable:true,configurable:true});t.prototype.dispose=function(){this._texture=null};t.prototype.copyFrom=function(e){var t=e;this.texture=t.texture;this.multiply=t.multiply;this.diffuseColor=t.diffuseColor;this.ambientColor=t.ambientColor};t.prototype.iCleanCompilationData=function(){e.prototype.iCleanCompilationData.call(this);this._pTotalLightColorReg=null;this._pDiffuseInputRegister=null};t.prototype.iGetFragmentPreLightingCode=function(e,t,r,s){var i="";this._pIsFirstLight=true;this._pTotalLightColorReg=r.getFreeFragmentVectorTemp();r.addFragmentTempUsages(this._pTotalLightColorReg,1);return i};t.prototype.iGetFragmentCodePerLight=function(e,t,r,s,i,a){var o="";var n;if(this._pIsFirstLight){n=this._pTotalLightColorReg}else{n=i.getFreeFragmentVectorTemp();i.addFragmentTempUsages(n,1)}o+="dp3 "+n+".x, "+r+", "+a.normalFragment+"\n"+"max "+n+".w, "+n+".x, "+a.commons+".y\n";if(e.usesLightFallOff)o+="mul "+n+".w, "+n+".w, "+r+".w\n";if(this._iModulateMethod!=null)o+=this._iModulateMethod(e,t,n,i,a);o+="mul "+n+", "+n+".w, "+s+"\n";if(!this._pIsFirstLight){o+="add "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+", "+n+"\n";i.removeFragmentTempUsage(n)}this._pIsFirstLight=false;return o};t.prototype.iGetFragmentCodePerProbe=function(e,t,r,s,i,a){var o="";var n;if(this._pIsFirstLight){n=this._pTotalLightColorReg}else{n=i.getFreeFragmentVectorTemp();i.addFragmentTempUsages(n,1)}o+="tex "+n+", "+a.normalFragment+", "+r+" <cube,linear,miplinear>\n"+"mul "+n+".xyz, "+n+".xyz, "+s+"\n";if(this._iModulateMethod!=null)o+=this._iModulateMethod(e,t,n,i,a);if(!this._pIsFirstLight){o+="add "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+", "+n+"\n";i.removeFragmentTempUsage(n)}this._pIsFirstLight=false;return o};t.prototype.iGetFragmentPostLightingCode=function(e,t,r,s,i){var a="";var o;var l;if(i.shadowTarget)a+=this.pApplyShadow(e,t,s,i);o=s.getFreeFragmentVectorTemp();s.addFragmentTempUsages(o,1);var h=s.getFreeFragmentConstant();t.fragmentConstantsIndex=h.index*4;if(this._pUseTexture){this._pDiffuseInputRegister=s.getFreeTextureReg();t.texturesIndex=this._pDiffuseInputRegister.index;a+=n.getTex2DSampleCode(o,i,this._pDiffuseInputRegister,this._texture,e.useSmoothTextures,e.repeatTextures,e.useMipmapping)}else{this._pDiffuseInputRegister=s.getFreeFragmentConstant();a+="mov "+o+", "+this._pDiffuseInputRegister+"\n"}a+="sat "+this._pTotalLightColorReg+", "+this._pTotalLightColorReg+"\n"+"mul "+o+".xyz, "+o+", "+this._pTotalLightColorReg+"\n";if(this._multiply){a+="add "+o+".xyz, "+o+", "+h+"\n"+"mul "+r+".xyz, "+r+", "+o+"\n"}else{a+="mul "+r+".xyz, "+r+", "+h+"\n"+"mul "+this._pTotalLightColorReg+".xyz, "+r+", "+this._pTotalLightColorReg+"\n"+"sub "+r+".xyz, "+r+", "+this._pTotalLightColorReg+"\n"+"add "+r+".xyz, "+r+", "+o+"\n"}s.removeFragmentTempUsage(this._pTotalLightColorReg);s.removeFragmentTempUsage(o);return a};t.prototype.pApplyShadow=function(e,t,r,s){return"mul "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+", "+s.shadowTarget+".w\n"};t.prototype.iActivate=function(e,t,r){if(this._pUseTexture){r.context.setSamplerStateAt(t.texturesIndex,e.repeatTextures?o.REPEAT:o.CLAMP,e.useSmoothTextures?a.LINEAR:a.NEAREST,e.useMipmapping?i.MIPLINEAR:i.MIPNONE);r.activateTexture(t.texturesIndex,this._texture)}else{var s=t.fragmentConstantsIndex;var n=e.fragmentConstantData;n[s+4]=this._diffuseR;n[s+5]=this._diffuseG;n[s+6]=this._diffuseB;n[s+7]=1}};t.prototype.updateDiffuse=function(){this._diffuseR=(this._diffuseColor>>16&255)/255;this._diffuseG=(this._diffuseColor>>8&255)/255;this._diffuseB=(this._diffuseColor&255)/255};t.prototype.updateAmbient=function(){this._ambientR=(this._ambientColor>>16&255)/255;this._ambientG=(this._ambientColor>>8&255)/255;this._ambientB=(this._ambientColor&255)/255};t.prototype.iSetRenderState=function(e,t,r,s,i){if(e.numLights>0){var a=t.fragmentConstantsIndex;var o=e.fragmentConstantData;o[a]=e.ambientR*this._ambientR;o[a+1]=e.ambientG*this._ambientG;o[a+2]=e.ambientB*this._ambientB;o[a+3]=1}};return t}(l);t.exports=h},{"awayjs-methodmaterials/lib/methods/LightingMethodBase":200,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":308,"awayjs-stagegl/lib/base/ContextGLMipFilter":344,"awayjs-stagegl/lib/base/ContextGLTextureFilter":345,"awayjs-stagegl/lib/base/ContextGLWrapMode":346}],197:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-methodmaterials/lib/methods/EffectMethodBase");var a=function(e){s(t,e);function t(){e.call(this)}Object.defineProperty(t.prototype,"colorTransform",{get:function(){return this._colorTransform},set:function(e){this._colorTransform=e},enumerable:true,configurable:true});t.prototype.iGetFragmentCode=function(e,t,r,s,i){var a="";var o=s.getFreeFragmentConstant();var n=s.getFreeFragmentConstant();t.fragmentConstantsIndex=o.index*4;a+="mul "+r+", "+r+", "+o+"\n"+"add "+r+", "+r+", "+n+"\n";return a};t.prototype.iActivate=function(e,t,r){var s=1/255;var i=t.fragmentConstantsIndex;var a=e.fragmentConstantData;a[i]=this._colorTransform.redMultiplier;a[i+1]=this._colorTransform.greenMultiplier;a[i+2]=this._colorTransform.blueMultiplier;a[i+3]=this._colorTransform.alphaMultiplier;a[i+4]=this._colorTransform.redOffset*s;a[i+5]=this._colorTransform.greenOffset*s;a[i+6]=this._colorTransform.blueOffset*s;a[i+7]=this._colorTransform.alphaOffset*s};return t}(i);t.exports=a},{"awayjs-methodmaterials/lib/methods/EffectMethodBase":199}],198:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-methodmaterials/lib/methods/EffectMethodBase");var a=function(e){s(t,e);function t(t,r,s){if(s===void 0){s=8421504}e.call(this);this._minDistance=0;this._maxDistance=1e3;this.minDistance=t;this.maxDistance=r;this.fogColor=s}t.prototype.iInitVO=function(e,t){t.needsProjection=true};t.prototype.iInitConstants=function(e,t){var r=e.fragmentConstantData;var s=t.fragmentConstantsIndex;r[s+3]=1;r[s+6]=0;r[s+7]=0};Object.defineProperty(t.prototype,"minDistance",{get:function(){return this._minDistance},set:function(e){this._minDistance=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"maxDistance",{get:function(){return this._maxDistance},set:function(e){this._maxDistance=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"fogColor",{get:function(){return this._fogColor},set:function(e){this._fogColor=e;this._fogR=(e>>16&255)/255;this._fogG=(e>>8&255)/255;this._fogB=(e&255)/255},enumerable:true,configurable:true});t.prototype.iActivate=function(e,t,r){var s=e.fragmentConstantData;var i=t.fragmentConstantsIndex;s[i]=this._fogR;s[i+1]=this._fogG;s[i+2]=this._fogB;s[i+4]=this._minDistance;s[i+5]=1/(this._maxDistance-this._minDistance)};t.prototype.iGetFragmentCode=function(e,t,r,s,i){var a=s.getFreeFragmentConstant();var o=s.getFreeFragmentConstant();var n=s.getFreeFragmentVectorTemp();s.addFragmentTempUsages(n,1);var l=s.getFreeFragmentVectorTemp();var h="";t.fragmentConstantsIndex=a.index*4;h+="sub "+l+".w, "+i.projectionFragment+".z, "+o+".x\n"+"mul "+l+".w, "+l+".w, "+o+".y\n"+"sat "+l+".w, "+l+".w\n"+"sub "+n+", "+a+", "+r+"\n"+"mul "+n+", "+n+", "+l+".w\n"+"add "+r+", "+r+", "+n+"\n";s.removeFragmentTempUsage(n);return h};return t}(i);t.exports=a},{"awayjs-methodmaterials/lib/methods/EffectMethodBase":199}],199:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/library/AssetType");var a=e("awayjs-core/lib/errors/AbstractMethodError");var o=e("awayjs-methodmaterials/lib/methods/ShadingMethodBase");var n=function(e){s(t,e);function t(){e.call(this)}Object.defineProperty(t.prototype,"assetType",{get:function(){return i.EFFECTS_METHOD},enumerable:true,configurable:true});t.prototype.iGetFragmentCode=function(e,t,r,s,i){throw new a;return""};return t}(o);t.exports=n},{"awayjs-core/lib/errors/AbstractMethodError":210,"awayjs-core/lib/library/AssetType":221,"awayjs-methodmaterials/lib/methods/ShadingMethodBase":202}],200:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-methodmaterials/lib/methods/ShadingMethodBase");var a=function(e){s(t,e);function t(){e.call(this)}t.prototype.iGetFragmentPreLightingCode=function(e,t,r,s){return""};t.prototype.iGetFragmentCodePerLight=function(e,t,r,s,i,a){return""};t.prototype.iGetFragmentCodePerProbe=function(e,t,r,s,i,a){return""};t.prototype.iGetFragmentPostLightingCode=function(e,t,r,s,i){return""};return t}(i);t.exports=a},{"awayjs-methodmaterials/lib/methods/ShadingMethodBase":202}],201:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-stagegl/lib/base/ContextGLMipFilter");var a=e("awayjs-stagegl/lib/base/ContextGLTextureFilter");var o=e("awayjs-stagegl/lib/base/ContextGLWrapMode");var n=e("awayjs-renderergl/lib/utils/ShaderCompilerHelper");var l=e("awayjs-methodmaterials/lib/methods/ShadingMethodBase");var h=function(e){s(t,e);function t(){e.call(this)}t.prototype.iIsUsed=function(e){if(!this._useTexture||!e.normalDependencies)return false;return true};t.prototype.iInitVO=function(e,t){t.needsUV=this._useTexture};t.prototype.iOutputsTangentNormals=function(){return true};t.prototype.copyFrom=function(e){var t=e;var r=e;if(r.normalMap!=null)this.normalMap=r.normalMap};Object.defineProperty(t.prototype,"normalMap",{get:function(){return this._texture},set:function(e){var t=e!=null;if(t!=this._useTexture||e&&this._texture&&(e.hasMipmaps!=this._texture.hasMipmaps||e.format!=this._texture.format))this.iInvalidateShaderProgram();this._useTexture=t;this._texture=e},enumerable:true,configurable:true});t.prototype.iCleanCompilationData=function(){e.prototype.iCleanCompilationData.call(this);this._pNormalTextureRegister=null};t.prototype.dispose=function(){if(this._texture)this._texture=null};t.prototype.iActivate=function(e,t,r){if(t.texturesIndex>=0){r.context.setSamplerStateAt(t.texturesIndex,e.repeatTextures?o.REPEAT:o.CLAMP,e.useSmoothTextures?a.LINEAR:a.NEAREST,e.useMipmapping?i.MIPLINEAR:i.MIPNONE);r.activateTexture(t.texturesIndex,this._texture)}};t.prototype.iGetFragmentCode=function(e,t,r,s,i){this._pNormalTextureRegister=s.getFreeTextureReg();t.texturesIndex=this._pNormalTextureRegister.index;return n.getTex2DSampleCode(r,i,this._pNormalTextureRegister,this._texture,e.useSmoothTextures,e.repeatTextures,e.useMipmapping)+"sub "+r+".xyz, "+r+".xyz, "+i.commons+".xxx\n"+"nrm "+r+".xyz, "+r+"\n"};return t}(l);t.exports=h},{"awayjs-methodmaterials/lib/methods/ShadingMethodBase":202,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":308,"awayjs-stagegl/lib/base/ContextGLMipFilter":344,"awayjs-stagegl/lib/base/ContextGLTextureFilter":345,"awayjs-stagegl/lib/base/ContextGLWrapMode":346}],202:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/library/NamedAssetBase");var a=e("awayjs-renderergl/lib/events/ShadingMethodEvent");var o=function(e){s(t,e);function t(){e.call(this)}t.prototype.iIsUsed=function(e){return true};t.prototype.iInitVO=function(e,t){};t.prototype.iInitConstants=function(e,t){};t.prototype.iUsesTangentSpace=function(){return true};t.prototype.dispose=function(){};t.prototype.iReset=function(){this.iCleanCompilationData()};t.prototype.iCleanCompilationData=function(){};t.prototype.iGetVertexCode=function(e,t,r,s){return""};t.prototype.iGetFragmentCode=function(e,t,r,s,i){return null};t.prototype.iActivate=function(e,t,r){};t.prototype.iSetRenderState=function(e,t,r,s,i){};t.prototype.iDeactivate=function(e,t,r){};t.prototype.iInvalidateShaderProgram=function(){this.dispatchEvent(new a(a.SHADER_INVALIDATED))};t.prototype.copyFrom=function(e){};return t}(i);t.exports=o},{"awayjs-core/lib/library/NamedAssetBase":222,"awayjs-renderergl/lib/events/ShadingMethodEvent":303}],203:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/library/AssetType");var a=e("awayjs-methodmaterials/lib/methods/ShadingMethodBase");var o=function(e){s(t,e);function t(t){e.call(this);this._pEpsilon=.02;this._pAlpha=1;this._pCastingLight=t;t.castsShadows=true;this._pShadowMapper=t.shadowMapper}Object.defineProperty(t.prototype,"assetType",{get:function(){return i.SHADOW_MAP_METHOD},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"alpha",{get:function(){return this._pAlpha},set:function(e){this._pAlpha=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"castingLight",{get:function(){return this._pCastingLight},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"epsilon",{get:function(){return this._pEpsilon},set:function(e){this._pEpsilon=e},enumerable:true,configurable:true});return t}(a);t.exports=o},{"awayjs-core/lib/library/AssetType":221,"awayjs-methodmaterials/lib/methods/ShadingMethodBase":202}],204:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/errors/AbstractMethodError");var a=e("awayjs-display/lib/entities/PointLight");var o=e("awayjs-methodmaterials/lib/methods/ShadowMapMethodBase");var n=function(e){s(t,e);function t(t){this._pUsePoint=t instanceof a;e.call(this,t)}t.prototype.iInitVO=function(e,t){t.needsView=true;t.needsGlobalVertexPos=true;t.needsGlobalFragmentPos=this._pUsePoint;t.needsNormals=e.numLights>0};t.prototype.iInitConstants=function(e,t){var r=e.fragmentConstantData;var s=e.vertexConstantData;var i=t.fragmentConstantsIndex;r[i]=1;r[i+1]=1/255;r[i+2]=1/65025;r[i+3]=1/16581375;r[i+6]=0;r[i+7]=1;if(this._pUsePoint){r[i+8]=0;r[i+9]=0;r[i+10]=0;r[i+11]=1}i=t.vertexConstantsIndex;if(i!=-1){s[i]=.5;s[i+1]=.5;s[i+2]=0;s[i+3]=1}};Object.defineProperty(t.prototype,"_iDepthMapCoordReg",{get:function(){return this._pDepthMapCoordReg},set:function(e){this._pDepthMapCoordReg=e},enumerable:true,configurable:true});t.prototype.iCleanCompilationData=function(){e.prototype.iCleanCompilationData.call(this);this._pDepthMapCoordReg=null};t.prototype.iGetVertexCode=function(e,t,r,s){return this._pUsePoint?this._pGetPointVertexCode(t,r,s):this.pGetPlanarVertexCode(t,r,s)};t.prototype._pGetPointVertexCode=function(e,t,r){e.vertexConstantsIndex=-1;return""};t.prototype.pGetPlanarVertexCode=function(e,t,r){var s="";var i=t.getFreeVertexVectorTemp();var a=t.getFreeVertexConstant();var o=t.getFreeVertexConstant();t.getFreeVertexConstant();t.getFreeVertexConstant();t.getFreeVertexConstant();
this._pDepthMapCoordReg=t.getFreeVarying();e.vertexConstantsIndex=a.index*4;s+="m44 "+i+", "+r.globalPositionVertex+", "+o+"\n"+"div "+i+", "+i+", "+i+".w\n"+"mul "+i+".xy, "+i+".xy, "+a+".xy\n"+"add "+this._pDepthMapCoordReg+", "+i+", "+a+".xxwz\n";return s};t.prototype.iGetFragmentCode=function(e,t,r,s,i){var a=this._pUsePoint?this._pGetPointFragmentCode(t,r,s,i):this._pGetPlanarFragmentCode(t,r,s,i);a+="add "+r+".w, "+r+".w, fc"+(t.fragmentConstantsIndex/4+1)+".y\n"+"sat "+r+".w, "+r+".w\n";return a};t.prototype._pGetPlanarFragmentCode=function(e,t,r,s){throw new i;return""};t.prototype._pGetPointFragmentCode=function(e,t,r,s){throw new i;return""};t.prototype.iSetRenderState=function(e,t,r,s,i){if(!this._pUsePoint)this._pShadowMapper.iDepthProjection.copyRawDataTo(e.vertexConstantData,t.vertexConstantsIndex+4,true)};t.prototype._iGetCascadeFragmentCode=function(e,t,r,s,i,a,o,n){throw new Error("This shadow method is incompatible with cascade shadows")};t.prototype.iActivate=function(e,t,r){var s=e.fragmentConstantData;var i=t.fragmentConstantsIndex;if(this._pUsePoint)s[i+4]=-Math.pow(1/(this._pCastingLight.fallOff*this._pEpsilon),2);else e.vertexConstantData[t.vertexConstantsIndex+3]=-1/(this._pShadowMapper.depth*this._pEpsilon);s[i+5]=1-this._pAlpha;if(this._pUsePoint){var a=this._pCastingLight.scenePosition;s[i+8]=a.x;s[i+9]=a.y;s[i+10]=a.z;var o=this._pCastingLight.fallOff;s[i+11]=1/(2*o*o)}if(!this._pUsePoint)r.activateRenderTexture(t.texturesIndex,this._pCastingLight.shadowMapper.depthMap)};t.prototype.iActivateForCascade=function(e,t,r){throw new Error("This shadow method is incompatible with cascade shadows")};return t}(o);t.exports=n},{"awayjs-core/lib/errors/AbstractMethodError":210,"awayjs-display/lib/entities/PointLight":237,"awayjs-methodmaterials/lib/methods/ShadowMapMethodBase":203}],205:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/geom/PoissonLookup");var a=e("awayjs-methodmaterials/lib/methods/ShadowMethodBase");var o=function(e){s(t,e);function t(t,r,s){if(r===void 0){r=5}if(s===void 0){s=1}e.call(this,t);this._range=1;this.numSamples=r;this.range=s}Object.defineProperty(t.prototype,"numSamples",{get:function(){return this._numSamples},set:function(e){this._numSamples=e;if(this._numSamples<1)this._numSamples=1;else if(this._numSamples>32)this._numSamples=32;this._offsets=i.getDistribution(this._numSamples);this.iInvalidateShaderProgram()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"range",{get:function(){return this._range},set:function(e){this._range=e},enumerable:true,configurable:true});t.prototype.iInitConstants=function(t,r){e.prototype.iInitConstants.call(this,t,r);t.fragmentConstantData[r.fragmentConstantsIndex+8]=1/this._numSamples;t.fragmentConstantData[r.fragmentConstantsIndex+9]=0};t.prototype.iActivate=function(t,r,s){e.prototype.iActivate.call(this,t,r,s);var i=.5*this._range/this._pCastingLight.shadowMapper.depthMapSize;var a=t.fragmentConstantData;var o=r.fragmentConstantsIndex+10;var n=this._numSamples<<1;for(var l=0;l<n;++l)a[o+l]=this._offsets[l]*i};t.prototype._pGetPlanarFragmentCode=function(e,t,r,s){var i=r.getFreeTextureReg();var a=r.getFreeFragmentConstant();var o=r.getFreeFragmentConstant();var n=r.getFreeFragmentConstant();e.fragmentConstantsIndex=a.index*4;e.texturesIndex=i.index;return this.getSampleCode(r,i,a,t,n)};t.prototype.addSample=function(e,t,r,s,i){var a=i.getFreeFragmentVectorTemp();return"tex "+a+", "+e+", "+t+" <2d,nearest,clamp>\n"+"dp4 "+a+".z, "+a+", "+r+"\n"+"slt "+e+".w, "+this._pDepthMapCoordReg+".z, "+a+".z\n"+"add "+s+".w, "+s+".w, "+e+".w\n"};t.prototype.iActivateForCascade=function(t,r,s){e.prototype.iActivate.call(this,t,r,s);var i=this._range/this._pCastingLight.shadowMapper.depthMapSize;var a=t.fragmentConstantData;var o=r.secondaryFragmentConstantsIndex;var n=this._numSamples<<1;a[o]=1/this._numSamples;a[o+1]=0;o+=2;for(var l=0;l<n;++l)a[o+l]=this._offsets[l]*i;if(n%4==0){a[o+n]=0;a[o+n+1]=0}};t.prototype._iGetCascadeFragmentCode=function(e,t,r,s,i,a,o,n){this._pDepthMapCoordReg=i;var l=o.getFreeFragmentConstant();t.secondaryFragmentConstantsIndex=l.index*4;return this.getSampleCode(o,s,r,a,l)};t.prototype.getSampleCode=function(e,t,r,s,i){var a;var o;var n=new Array(i+".zw");a=e.getFreeFragmentVectorTemp();e.addFragmentTempUsages(a,1);var l=e.getFreeFragmentVectorTemp();var h=this._numSamples>>1;for(var p=0;p<h;++p){var u=e.getFreeFragmentConstant();n.push(u+".xy");n.push(u+".zw")}for(p=0;p<this._numSamples;++p){if(p==0){o="add "+a+", "+this._pDepthMapCoordReg+", "+i+".zwyy\n"+"tex "+l+", "+a+", "+t+" <2d,nearest,clamp>\n"+"dp4 "+l+".z, "+l+", "+r+"\n"+"slt "+s+".w, "+this._pDepthMapCoordReg+".z, "+l+".z\n"}else{o+="add "+a+".xy, "+this._pDepthMapCoordReg+".xy, "+n[p]+"\n"+this.addSample(a,t,r,s,e)}}e.removeFragmentTempUsage(a);o+="mul "+s+".w, "+s+".w, "+i+".x\n";return o};return t}(a);t.exports=o},{"awayjs-core/lib/geom/PoissonLookup":219,"awayjs-methodmaterials/lib/methods/ShadowMethodBase":204}],206:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-stagegl/lib/base/ContextGLMipFilter");var a=e("awayjs-stagegl/lib/base/ContextGLTextureFilter");var o=e("awayjs-stagegl/lib/base/ContextGLWrapMode");var n=e("awayjs-renderergl/lib/utils/ShaderCompilerHelper");var l=e("awayjs-methodmaterials/lib/methods/LightingMethodBase");var h=function(e){s(t,e);function t(){e.call(this);this._gloss=50;this._specular=1;this._specularColor=16777215;this._iSpecularR=1;this._iSpecularG=1;this._iSpecularB=1}t.prototype.iIsUsed=function(e){if(!e.numLights)return false;return true};t.prototype.iInitVO=function(e,t){t.needsUV=this._pUseTexture;t.needsNormals=e.numLights>0;t.needsView=e.numLights>0};Object.defineProperty(t.prototype,"gloss",{get:function(){return this._gloss},set:function(e){this._gloss=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"specular",{get:function(){return this._specular},set:function(e){if(e==this._specular)return;this._specular=e;this.updateSpecular()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"specularColor",{get:function(){return this._specularColor},set:function(e){if(this._specularColor==e)return;if(this._specularColor==0||e==0)this.iInvalidateShaderProgram();this._specularColor=e;this.updateSpecular()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){var t=e!=null;if(t!=this._pUseTexture||e&&this._texture&&(e.hasMipmaps!=this._texture.hasMipmaps||e.format!=this._texture.format))this.iInvalidateShaderProgram();this._pUseTexture=t;this._texture=e},enumerable:true,configurable:true});t.prototype.copyFrom=function(e){var t=e;var r=e;var s=r;this.texture=s.texture;this.specular=s.specular;this.specularColor=s.specularColor;this.gloss=s.gloss};t.prototype.iCleanCompilationData=function(){e.prototype.iCleanCompilationData.call(this);this._pTotalLightColorReg=null;this._pSpecularTextureRegister=null;this._pSpecularTexData=null;this._pSpecularDataRegister=null};t.prototype.iGetFragmentPreLightingCode=function(e,t,r,s){var i="";this._pIsFirstLight=true;this._pSpecularDataRegister=r.getFreeFragmentConstant();t.fragmentConstantsIndex=this._pSpecularDataRegister.index*4;if(this._pUseTexture){this._pSpecularTexData=r.getFreeFragmentVectorTemp();r.addFragmentTempUsages(this._pSpecularTexData,1);this._pSpecularTextureRegister=r.getFreeTextureReg();t.texturesIndex=this._pSpecularTextureRegister.index;i=n.getTex2DSampleCode(this._pSpecularTexData,s,this._pSpecularTextureRegister,this._texture,e.useSmoothTextures,e.repeatTextures,e.useMipmapping)}else{this._pSpecularTextureRegister=null}this._pTotalLightColorReg=r.getFreeFragmentVectorTemp();r.addFragmentTempUsages(this._pTotalLightColorReg,1);return i};t.prototype.iGetFragmentCodePerLight=function(e,t,r,s,i,a){var o="";var n;if(this._pIsFirstLight){n=this._pTotalLightColorReg}else{n=i.getFreeFragmentVectorTemp();i.addFragmentTempUsages(n,1)}var l=a.viewDirFragment;var h=a.normalFragment;o+="add "+n+", "+r+", "+l+"\n"+"nrm "+n+".xyz, "+n+"\n"+"dp3 "+n+".w, "+h+", "+n+"\n"+"sat "+n+".w, "+n+".w\n";if(this._pUseTexture){o+="mul "+this._pSpecularTexData+".w, "+this._pSpecularTexData+".y, "+this._pSpecularDataRegister+".w\n"+"pow "+n+".w, "+n+".w, "+this._pSpecularTexData+".w\n"}else{o+="pow "+n+".w, "+n+".w, "+this._pSpecularDataRegister+".w\n"}if(e.usesLightFallOff)o+="mul "+n+".w, "+n+".w, "+r+".w\n";if(this._iModulateMethod!=null)o+=this._iModulateMethod(e,t,n,i,a);o+="mul "+n+".xyz, "+s+", "+n+".w\n";if(!this._pIsFirstLight){o+="add "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+", "+n+"\n";i.removeFragmentTempUsage(n)}this._pIsFirstLight=false;return o};t.prototype.iGetFragmentCodePerProbe=function(e,t,r,s,i,a){var o="";var n;if(this._pIsFirstLight){n=this._pTotalLightColorReg}else{n=i.getFreeFragmentVectorTemp();i.addFragmentTempUsages(n,1)}var l=a.normalFragment;var h=a.viewDirFragment;o+="dp3 "+n+".w, "+l+", "+h+"\n"+"add "+n+".w, "+n+".w, "+n+".w\n"+"mul "+n+", "+n+".w, "+l+"\n"+"sub "+n+", "+n+", "+h+"\n"+"tex "+n+", "+n+", "+r+" <cube,"+(e.useSmoothTextures?"linear":"nearest")+",miplinear>\n"+"mul "+n+".xyz, "+n+", "+s+"\n";if(this._iModulateMethod!=null)o+=this._iModulateMethod(e,t,n,i,a);if(!this._pIsFirstLight){o+="add "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+", "+n+"\n";i.removeFragmentTempUsage(n)}this._pIsFirstLight=false;return o};t.prototype.iGetFragmentPostLightingCode=function(e,t,r,s,i){var a="";if(i.shadowTarget)a+="mul "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+", "+i.shadowTarget+".w\n";if(this._pUseTexture){a+="mul "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+", "+this._pSpecularTexData+".x\n";s.removeFragmentTempUsage(this._pSpecularTexData)}a+="mul "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+", "+this._pSpecularDataRegister+"\n"+"add "+r+".xyz, "+r+", "+this._pTotalLightColorReg+"\n";s.removeFragmentTempUsage(this._pTotalLightColorReg);return a};t.prototype.iActivate=function(e,t,r){if(this._pUseTexture){r.context.setSamplerStateAt(t.texturesIndex,e.repeatTextures?o.REPEAT:o.CLAMP,e.useSmoothTextures?a.LINEAR:a.NEAREST,e.useMipmapping?i.MIPLINEAR:i.MIPNONE);r.activateTexture(t.texturesIndex,this._texture)}var s=t.fragmentConstantsIndex;var n=e.fragmentConstantData;n[s]=this._iSpecularR;n[s+1]=this._iSpecularG;n[s+2]=this._iSpecularB;n[s+3]=this._gloss};t.prototype.updateSpecular=function(){this._iSpecularR=(this._specularColor>>16&255)/255*this._specular;this._iSpecularG=(this._specularColor>>8&255)/255*this._specular;this._iSpecularB=(this._specularColor&255)/255*this._specular};return t}(l);t.exports=h},{"awayjs-methodmaterials/lib/methods/LightingMethodBase":200,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":308,"awayjs-stagegl/lib/base/ContextGLMipFilter":344,"awayjs-stagegl/lib/base/ContextGLTextureFilter":345,"awayjs-stagegl/lib/base/ContextGLWrapMode":346}],207:[function(e,t,r){var s=function(){function e(){}e.EFFECTS=1;e.LIGHTING=2;e.SUPER_SHADER=3;return e}();t.exports=s},{}],208:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-renderergl/lib/compilation/ShaderLightingObject");var a=e("awayjs-renderergl/lib/events/ShadingMethodEvent");var o=e("awayjs-renderergl/lib/compilation/ShaderObjectBase");var n=e("awayjs-renderergl/lib/passes/LightingPassGLBase");var l=e("awayjs-methodmaterials/lib/data/MethodVO");var h=e("awayjs-methodmaterials/lib/methods/EffectColorTransformMethod");var p=e("awayjs-methodmaterials/lib/passes/MaterialPassMode");var u=function(e){s(t,e);function t(t){var r=this;if(t===void 0){t=3}e.call(this);this._pNumLights=0;this._includeCasters=true;this._maxLights=3;this._iMethodVOs=new Array;this._numEffectDependencies=0;this._passMode=t;this._onShaderInvalidatedDelegate=function(e){return r.onShaderInvalidated(e)}}Object.defineProperty(t.prototype,"passMode",{get:function(){return this._passMode},set:function(e){this._passMode=e;this._pInvalidatePass()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"includeCasters",{get:function(){return this._includeCasters},set:function(e){if(this._includeCasters==e)return;this._includeCasters=e;this._pInvalidatePass()},enumerable:true,configurable:true});t.prototype.createShaderObject=function(e){if(this._pLightPicker&&this.passMode&p.LIGHTING)return new i(e);return new o(e)};t.prototype._iInitConstantData=function(t){e.prototype._iInitConstantData.call(this,t);var r=this._iMethodVOs.length;for(var s=0;s<r;++s)this._iMethodVOs[s].method.iInitConstants(t,this._iMethodVOs[s])};Object.defineProperty(t.prototype,"colorTransform",{get:function(){return this.colorTransformMethod?this.colorTransformMethod.colorTransform:null},set:function(e){if(e){if(this.colorTransformMethod==null)this.colorTransformMethod=new h;this.colorTransformMethod.colorTransform=e}else if(!e){if(this.colorTransformMethod)this.colorTransformMethod=null}},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"colorTransformMethod",{get:function(){return this._iColorTransformMethodVO?this._iColorTransformMethodVO.method:null},set:function(e){if(this._iColorTransformMethodVO&&this._iColorTransformMethodVO.method==e)return;if(this._iColorTransformMethodVO){this._removeDependency(this._iColorTransformMethodVO);this._iColorTransformMethodVO=null}if(e){this._iColorTransformMethodVO=new l(e);this._addDependency(this._iColorTransformMethodVO)}},enumerable:true,configurable:true});t.prototype.pUpdateLights=function(){var e=this._pNumDirectionalLights;var t=this._pNumPointLights;var r=this._pNumLightProbes;if(this._pLightPicker&&this._passMode&p.LIGHTING){this._pNumDirectionalLights=this.calculateNumDirectionalLights(this._pLightPicker.numDirectionalLights);this._pNumPointLights=this.calculateNumPointLights(this._pLightPicker.numPointLights);this._pNumLightProbes=this.calculateNumProbes(this._pLightPicker.numLightProbes);if(this._includeCasters){this._pNumDirectionalLights+=this._pLightPicker.numCastingDirectionalLights;this._pNumPointLights+=this._pLightPicker.numCastingPointLights}}else{this._pNumDirectionalLights=0;this._pNumPointLights=0;this._pNumLightProbes=0}this._pNumLights=this._pNumDirectionalLights+this._pNumPointLights;if(e!=this._pNumDirectionalLights||t!=this._pNumPointLights||r!=this._pNumLightProbes)this._pInvalidatePass()};t.prototype._removeDependency=function(e,t){if(t===void 0){t=false}var r=this._iMethodVOs.indexOf(e);if(!t)this._numEffectDependencies--;e.method.removeEventListener(a.SHADER_INVALIDATED,this._onShaderInvalidatedDelegate);this._iMethodVOs.splice(r,1);this._pInvalidatePass()};t.prototype._addDependency=function(e,t,r){if(t===void 0){t=false}if(r===void 0){r=-1}e.method.addEventListener(a.SHADER_INVALIDATED,this._onShaderInvalidatedDelegate);if(t){if(r!=-1)this._iMethodVOs.splice(r+this._iMethodVOs.length-this._numEffectDependencies,0,e);else this._iMethodVOs.push(e);this._numEffectDependencies++}else{this._iMethodVOs.splice(this._iMethodVOs.length-this._numEffectDependencies,0,e)}this._pInvalidatePass()};t.prototype.addEffectMethod=function(e){this._addDependency(new l(e),true)};Object.defineProperty(t.prototype,"numEffectMethods",{get:function(){return this._numEffectDependencies},enumerable:true,configurable:true});t.prototype.hasEffectMethod=function(e){return this.getDependencyForMethod(e)!=null};t.prototype.getEffectMethodAt=function(e){if(e<0||e>this._numEffectDependencies-1)return null;return this._iMethodVOs[e+this._iMethodVOs.length-this._numEffectDependencies].method};t.prototype.addEffectMethodAt=function(e,t){this._addDependency(new l(e),true,t)};t.prototype.removeEffectMethod=function(e){var t=this.getDependencyForMethod(e);if(t!=null)this._removeDependency(t,true)};t.prototype.getDependencyForMethod=function(e){var t=this._iMethodVOs.length;for(var r=0;r<t;++r)if(this._iMethodVOs[r].method==e)return this._iMethodVOs[r];return null};Object.defineProperty(t.prototype,"normalMethod",{get:function(){return this._iNormalMethodVO?this._iNormalMethodVO.method:null},set:function(e){if(this._iNormalMethodVO&&this._iNormalMethodVO.method==e)return;if(this._iNormalMethodVO){this._removeDependency(this._iNormalMethodVO);this._iNormalMethodVO=null}if(e){this._iNormalMethodVO=new l(e);this._addDependency(this._iNormalMethodVO)}},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"ambientMethod",{get:function(){return this._iAmbientMethodVO?this._iAmbientMethodVO.method:null},set:function(e){if(this._iAmbientMethodVO&&this._iAmbientMethodVO.method==e)return;if(this._iAmbientMethodVO){this._removeDependency(this._iAmbientMethodVO);this._iAmbientMethodVO=null}if(e){this._iAmbientMethodVO=new l(e);this._addDependency(this._iAmbientMethodVO)}},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"shadowMethod",{get:function(){return this._iShadowMethodVO?this._iShadowMethodVO.method:null},set:function(e){if(this._iShadowMethodVO&&this._iShadowMethodVO.method==e)return;if(this._iShadowMethodVO){this._removeDependency(this._iShadowMethodVO);this._iShadowMethodVO=null}if(e){this._iShadowMethodVO=new l(e);this._addDependency(this._iShadowMethodVO)}},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"diffuseMethod",{get:function(){return this._iDiffuseMethodVO?this._iDiffuseMethodVO.method:null},set:function(e){if(this._iDiffuseMethodVO&&this._iDiffuseMethodVO.method==e)return;if(this._iDiffuseMethodVO){this._removeDependency(this._iDiffuseMethodVO);this._iDiffuseMethodVO=null}if(e){this._iDiffuseMethodVO=new l(e);this._addDependency(this._iDiffuseMethodVO)}},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"specularMethod",{get:function(){return this._iSpecularMethodVO?this._iSpecularMethodVO.method:null},set:function(e){if(this._iSpecularMethodVO&&this._iSpecularMethodVO.method==e)return;if(this._iSpecularMethodVO){this._removeDependency(this._iSpecularMethodVO);this._iSpecularMethodVO=null}if(e){this._iSpecularMethodVO=new l(e);this._addDependency(this._iSpecularMethodVO)}},enumerable:true,configurable:true});t.prototype.dispose=function(){e.prototype.dispose.call(this);while(this._iMethodVOs.length)this._removeDependency(this._iMethodVOs[0]);this._iMethodVOs=null};t.prototype.onShaderInvalidated=function(e){this._pInvalidatePass()};t.prototype._iActivate=function(t,r,s){e.prototype._iActivate.call(this,t,r,s);var i;var a=this._iMethodVOs.length;for(var o=0;o<a;++o){i=this._iMethodVOs[o];if(i.useMethod)i.method.iActivate(t.shaderObject,i,r.stage)}};t.prototype.setRenderState=function(t,r,s,i,a){e.prototype.setRenderState.call(this,t,r,s,i,a);var o;var n=this._iMethodVOs.length;for(var l=0;l<n;++l){o=this._iMethodVOs[l];if(o.useMethod)o.method.iSetRenderState(t.shaderObject,o,r,s,i)}};t.prototype._iDeactivate=function(t,r){e.prototype._iDeactivate.call(this,t,r);var s;var i=this._iMethodVOs.length;for(var a=0;a<i;++a){s=this._iMethodVOs[a];if(s.useMethod)s.method.iDeactivate(t.shaderObject,s,r.stage)}};t.prototype._iIncludeDependencies=function(t){t.usesFragmentAnimation=Boolean(this._passMode==p.SUPER_SHADER);if(!t.usesTangentSpace&&t.numPointLights>0&&t.usesLights){t.globalPosDependencies++;if(Boolean(this._passMode&p.EFFECTS))t.usesGlobalPosFragment=true}var r;var s=this._iMethodVOs.length;for(r=0;r<s;++r)this.setupAndCountDependencies(t,this._iMethodVOs[r]);for(r=0;r<s;++r)this._iMethodVOs[r].useMethod=this._iMethodVOs[r].method.iIsUsed(t);e.prototype._iIncludeDependencies.call(this,t)};t.prototype.setupAndCountDependencies=function(e,t){t.reset();t.method.iInitVO(e,t);if(t.needsProjection)e.projectionDependencies++;if(t.needsGlobalVertexPos){e.globalPosDependencies++;if(t.needsGlobalFragmentPos)e.usesGlobalPosFragment=true}else if(t.needsGlobalFragmentPos){e.globalPosDependencies++;e.usesGlobalPosFragment=true}if(t.needsNormals)e.normalDependencies++;if(t.needsTangents)e.tangentDependencies++;if(t.needsView)e.viewDirDependencies++;if(t.needsUV)e.uvDependencies++;if(t.needsSecondaryUV)e.secondaryUVDependencies++};t.prototype._iGetPreLightingVertexCode=function(e,t,r){var s="";if(this._iAmbientMethodVO&&this._iAmbientMethodVO.useMethod)s+=this._iAmbientMethodVO.method.iGetVertexCode(e,this._iAmbientMethodVO,t,r);if(this._iDiffuseMethodVO&&this._iDiffuseMethodVO.useMethod)s+=this._iDiffuseMethodVO.method.iGetVertexCode(e,this._iDiffuseMethodVO,t,r);if(this._iSpecularMethodVO&&this._iSpecularMethodVO.useMethod)s+=this._iSpecularMethodVO.method.iGetVertexCode(e,this._iSpecularMethodVO,t,r);return s};t.prototype._iGetPreLightingFragmentCode=function(e,t,r){var s="";if(this._iAmbientMethodVO&&this._iAmbientMethodVO.useMethod){s+=this._iAmbientMethodVO.method.iGetFragmentCode(e,this._iAmbientMethodVO,r.shadedTarget,t,r);if(this._iAmbientMethodVO.needsNormals)t.removeFragmentTempUsage(r.normalFragment);if(this._iAmbientMethodVO.needsView)t.removeFragmentTempUsage(r.viewDirFragment)}if(this._iDiffuseMethodVO&&this._iDiffuseMethodVO.useMethod)s+=this._iDiffuseMethodVO.method.iGetFragmentPreLightingCode(e,this._iDiffuseMethodVO,t,r);if(this._iSpecularMethodVO&&this._iSpecularMethodVO.useMethod)s+=this._iSpecularMethodVO.method.iGetFragmentPreLightingCode(e,this._iSpecularMethodVO,t,r);return s};t.prototype._iGetPerLightDiffuseFragmentCode=function(e,t,r,s,i){return this._iDiffuseMethodVO.method.iGetFragmentCodePerLight(e,this._iDiffuseMethodVO,t,r,s,i)};t.prototype._iGetPerLightSpecularFragmentCode=function(e,t,r,s,i){return this._iSpecularMethodVO.method.iGetFragmentCodePerLight(e,this._iSpecularMethodVO,t,r,s,i)};t.prototype._iGetPerProbeDiffuseFragmentCode=function(e,t,r,s,i){return this._iDiffuseMethodVO.method.iGetFragmentCodePerProbe(e,this._iDiffuseMethodVO,t,r,s,i)};t.prototype._iGetPerProbeSpecularFragmentCode=function(e,t,r,s,i){return this._iSpecularMethodVO.method.iGetFragmentCodePerProbe(e,this._iSpecularMethodVO,t,r,s,i)};t.prototype._iGetPostLightingVertexCode=function(e,t,r){var s="";if(this._iShadowMethodVO)s+=this._iShadowMethodVO.method.iGetVertexCode(e,this._iShadowMethodVO,t,r);return s};t.prototype._iGetPostLightingFragmentCode=function(e,t,r){var s="";if(e.useAlphaPremultiplied&&this._pEnableBlending){s+="add "+r.shadedTarget+".w, "+r.shadedTarget+".w, "+r.commons+".z\n"+"div "+r.shadedTarget+".xyz, "+r.shadedTarget+", "+r.shadedTarget+".w\n"+"sub "+r.shadedTarget+".w, "+r.shadedTarget+".w, "+r.commons+".z\n"+"sat "+r.shadedTarget+".xyz, "+r.shadedTarget+"\n"}if(this._iShadowMethodVO)s+=this._iShadowMethodVO.method.iGetFragmentCode(e,this._iShadowMethodVO,r.shadowTarget,t,r);if(this._iDiffuseMethodVO&&this._iDiffuseMethodVO.useMethod){s+=this._iDiffuseMethodVO.method.iGetFragmentPostLightingCode(e,this._iDiffuseMethodVO,r.shadedTarget,t,r);if(this._iDiffuseMethodVO.needsNormals)t.removeFragmentTempUsage(r.normalFragment);if(this._iDiffuseMethodVO.needsView)t.removeFragmentTempUsage(r.viewDirFragment)}if(this._iSpecularMethodVO&&this._iSpecularMethodVO.useMethod){s+=this._iSpecularMethodVO.method.iGetFragmentPostLightingCode(e,this._iSpecularMethodVO,r.shadedTarget,t,r);if(this._iSpecularMethodVO.needsNormals)t.removeFragmentTempUsage(r.normalFragment);if(this._iSpecularMethodVO.needsView)t.removeFragmentTempUsage(r.viewDirFragment)}if(this._iShadowMethodVO)t.removeFragmentTempUsage(r.shadowTarget);return s};t.prototype._pUsesTangentSpace=function(e){if(e.usesProbes)return false;var t;var r=this._iMethodVOs.length;for(var s=0;s<r;++s){t=this._iMethodVOs[s];if(t.useMethod&&!t.method.iUsesTangentSpace())return false}return true};t.prototype._pOutputsTangentNormals=function(e){return this._iNormalMethodVO.method.iOutputsTangentNormals()};t.prototype._pOutputsNormals=function(e){return this._iNormalMethodVO&&this._iNormalMethodVO.useMethod};t.prototype._iGetNormalVertexCode=function(e,t,r){return this._iNormalMethodVO.method.iGetVertexCode(e,this._iNormalMethodVO,t,r)};t.prototype._iGetNormalFragmentCode=function(e,t,r){var s=this._iNormalMethodVO.method.iGetFragmentCode(e,this._iNormalMethodVO,r.normalFragment,t,r);if(this._iNormalMethodVO.needsView)t.removeFragmentTempUsage(r.viewDirFragment);if(this._iNormalMethodVO.needsGlobalFragmentPos||this._iNormalMethodVO.needsGlobalVertexPos)t.removeVertexTempUsage(r.globalPositionVertex);return s};t.prototype._iGetVertexCode=function(e,t,r){var s="";var i;var a=this._iMethodVOs.length;for(var o=a-this._numEffectDependencies;o<a;o++){i=this._iMethodVOs[o];if(i.useMethod){s+=i.method.iGetVertexCode(e,i,t,r);if(i.needsGlobalVertexPos||i.needsGlobalFragmentPos)t.removeVertexTempUsage(r.globalPositionVertex)}}if(this._iColorTransformMethodVO&&this._iColorTransformMethodVO.useMethod)s+=this._iColorTransformMethodVO.method.iGetVertexCode(e,this._iColorTransformMethodVO,t,r);return s};t.prototype._iGetFragmentCode=function(e,t,r){var s="";var i;if(this.preserveAlpha&&this._numEffectDependencies>0){i=t.getFreeFragmentSingleTemp();t.addFragmentTempUsages(i,1);s+="mov "+i+", "+r.shadedTarget+".w\n"}var a;var o=this._iMethodVOs.length;for(var n=o-this._numEffectDependencies;n<o;n++){a=this._iMethodVOs[n];if(a.useMethod){s+=a.method.iGetFragmentCode(e,a,r.shadedTarget,t,r);if(a.needsNormals)t.removeFragmentTempUsage(r.normalFragment);if(a.needsView)t.removeFragmentTempUsage(r.viewDirFragment)}}if(this.preserveAlpha&&this._numEffectDependencies>0){s+="mov "+r.shadedTarget+".w, "+i+"\n";t.removeFragmentTempUsage(i)}if(this._iColorTransformMethodVO&&this._iColorTransformMethodVO.useMethod)s+=this._iColorTransformMethodVO.method.iGetFragmentCode(e,this._iColorTransformMethodVO,r.shadedTarget,t,r);return s};t.prototype._iUsesShadows=function(){return Boolean(this._iShadowMethodVO||this.lightPicker.castingDirectionalLights.length>0||this.lightPicker.castingPointLights.length>0)};t.prototype._iUsesSpecular=function(){return Boolean(this._iSpecularMethodVO)};t.prototype.calculateNumDirectionalLights=function(e){return Math.min(e-this.directionalLightsOffset,this._maxLights)};t.prototype.calculateNumPointLights=function(e){var t=this._maxLights-this._pNumDirectionalLights;return Math.min(e-this.pointLightsOffset,t)};t.prototype.calculateNumProbes=function(e){var t=0;return Math.min(e-this.lightProbesOffset,4/t|0)};return t}(n);t.exports=u},{"awayjs-methodmaterials/lib/data/MethodVO":194,"awayjs-methodmaterials/lib/methods/EffectColorTransformMethod":197,"awayjs-methodmaterials/lib/passes/MaterialPassMode":207,"awayjs-renderergl/lib/compilation/ShaderLightingObject":298,"awayjs-renderergl/lib/compilation/ShaderObjectBase":299,"awayjs-renderergl/lib/events/ShadingMethodEvent":303,"awayjs-renderergl/lib/passes/LightingPassGLBase":306}],209:[function(e,t,r){t.exports=e(2)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/base/BitmapData.js":2,"awayjs-core/lib/geom/Rectangle":220,"awayjs-core/lib/utils/ColorUtils":226}],210:[function(e,t,r){t.exports=e(4)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/AbstractMethodError.js":4,"awayjs-core/lib/errors/Error":212}],211:[function(e,t,r){t.exports=e(5)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/ArgumentError.js":5,"awayjs-core/lib/errors/Error":212}],212:[function(e,t,r){t.exports=e(6)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/Error.js":6}],213:[function(e,t,r){t.exports=e(7)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/AssetEvent.js":7,"awayjs-core/lib/events/Event":214}],214:[function(e,t,r){t.exports=e(8)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/Event.js":8}],215:[function(e,t,r){t.exports=e(9)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/EventDispatcher.js":9}],216:[function(e,t,r){var s=e("awayjs-core/lib/utils/ColorUtils");var i=function(){function e(e,t,r,s,i,a,o,n){if(e===void 0){e=1}if(t===void 0){t=1}if(r===void 0){r=1}if(s===void 0){s=1}if(i===void 0){i=0}if(a===void 0){a=0}if(o===void 0){o=0}if(n===void 0){n=0}this.redMultiplier=e;this.greenMultiplier=t;this.blueMultiplier=r;this.alphaMultiplier=s;this.redOffset=i;this.greenOffset=a;this.blueOffset=o;this.alphaOffset=n}Object.defineProperty(e.prototype,"color",{get:function(){return this.redOffset<<16|this.greenOffset<<8|this.blueOffset},set:function(e){var t=s.float32ColorToARGB(e);this.redOffset=t[1];this.greenOffset=t[2];this.blueOffset=t[3];this.redMultiplier=0;this.greenMultiplier=0;this.blueMultiplier=0},enumerable:true,configurable:true});e.prototype.concat=function(e){this.redMultiplier+=e.redMultiplier;this.greenMultiplier+=e.greenMultiplier;this.blueMultiplier+=e.blueMultiplier;this.alphaMultiplier+=e.alphaMultiplier};return e}();t.exports=i},{"awayjs-core/lib/utils/ColorUtils":226}],217:[function(e,t,r){t.exports=e(16)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Matrix.js":16,"awayjs-core/lib/errors/ArgumentError":211,"awayjs-core/lib/geom/Point":218}],218:[function(e,t,r){t.exports=e(17)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Point.js":17}],219:[function(e,t,r){var s=function(){function e(){}e.initDistributions=function(){this._distributions=new Array;this._distributions[0]=new Array(.3082841,.4320919);this._distributions[1]=new Array(.3082841,.4320919,-.2274942,-.6640266);this._distributions[2]=new Array(.8742689,.0009265686,-.6864116,-.5536607,-.2325206,.7678371);this._distributions[3]=new Array(.3913446,-.7084417,-.7511101,-.5935929,-.2323436,.5320091,.8435315,.5035911);this._distributions[4]=new Array(.2122471,-.5771395,-.8543506,-.1763534,.5189021,.8323698,-.3616908,.5865368,.9523004,-.04948437);this._distributions[5]=new Array(.5791035,.3496495,.2959551,-.6006749,-.2419119,-.06879545,-.7403072,.6110353,-.04555973,.8059174,-.5275017,-.737129);this._distributions[6]=new Array(.06941478,.8519508,-.7441907,.2426432,.6439992,-.2405252,-.1007523,-.2327587,-.6427067,-.7248485,.8050759,.5492936,.3573822,-.8824506);this._distributions[7]=new Array(.8509863,.4452587,-.09507271,.2073005,.1706571,-.6434793,.8029777,-.2718274,-.4401725,.8196304,.2715359,.8598521,-.8121575,-.006447683,-.6486837,-.7237598);this._distributions[8]=new Array(.6951686,-.2680728,-.04933243,.3710589,.6592212,.3661054,-.01579228,-.6909603,-.3275101,-.1756866,.3811549,.9218544,-.216032,.9755028,-.7065172,.3355389,-.6579109,-.6798355);this._distributions[9]=new Array(.6181276,-.09790418,-.2537868,-.5570995,-.1964931,.3459414,.3474613,-.8885581,.5135743,.5753114,-.9549091,.1480672,-.8711916,-.4293123,-.6928071,.6190156,-.13369,.8892705,.0548224,-.1246777);this._distributions[10]=new Array(.4853027,-.5080479,-.1331675,-.506597,.139575,.01316885,.803486,-.07568797,.5240274,.4883182,-.4334005,.1207938,-.7794577,-.3985141,.1576432,-.9861221,-.3712867,.6959021,.1517378,.9847429,-.9762396,.1661073);this._distributions[11]=new Array(-.2790166,-.01252619,.3389016,.3921154,.2408341,-.313211,-.8151779,-.3898362,-.6347761,.3486495,.09471484,-.7722448,-.1385674,.6364574,.2456331,.9295807,-.3864306,-.8247881,.6111673,-.7164014,.8287669,.05466961,.837706,.5415626);this._distributions[12]=new Array(.056417,.3185693,-.8245888,.1882799,.8575996,.1136829,.1070375,.875332,.4076743,-.06000621,-.4311306,.7239349,.2677574,-.538472,-.08486642,-.2083647,-.888989,-.3906443,-.4768958,-.6664082,.09334993,-.9861541,.808736,-.455949,.5889823,.7660807);this._distributions[13]=new Array(-.2681346,-.3955857,-.1315102,-.8852947,-.5143692,.09551838,.4344836,-.546945,-.8620899,-.3813288,.1650431,.02034803,-.1543657,.3842218,-.828457,.5376903,-.6145,-.7818927,-.2639062,.8784655,.1912684,.9720125,.3135219,.5224229,.7850655,.4592297,.7465045,-.1368916);
this._distributions[14]=new Array(.4241029,.695281,.150511,-.02304107,-.2482675,.9120338,.8057325,.2622084,-.2445909,.2765962,.8588713,-.1772072,.3117845,-.4385471,-.3923851,-.3298936,-.1751254,-.7405846,.6926506,-.684163,-.9304563,-.3254691,-.8533293,.1523024,.2510415,-.917345,-.6239773,-.7105472,-.6104624,.6041355);this._distributions[15]=new Array(.5844554,.06651045,.1343258,.6756578,.3799674,-.6301104,.5590436,.7940555,.09574714,.02262517,.8697868,.393301,.003945862,-.421735,.9043913,-.2432393,-.4844007,.7190998,-.3201078,.2972371,-.3852352,-.6341155,-.5413069,-.09223081,-.8468984,-.5126905,.004156174,-.8633173,-.9681889,-.03305046,-.846509,.4414353);this._distributions[16]=new Array(.4506488,.657668,.4621297,.07441051,-.2782125,.6201044,.9750003,.09110117,.1019436,.2986514,.03457398,.9631706,.542098,-.5505635,.8675668,.4938077,-.5414361,.2655292,-.7941836,.6003053,-.09847672,-.1001604,-.9316511,-.08572888,.07286467,-.611899,-.5232627,-.4082253,-.5481608,-.827938,-.1551939,-.9621193,.9220031,-.3315949);this._distributions[17]=new Array(.197908,-.4697656,-.4474689,-.3428435,.8529873,-.2228634,.6022478,-.5469642,.2545276,-.931133,-.1507547,-.7855865,-.07606658,.1011628,.3046715,.2785755,.4698432,-.1064076,.6831254,.4152522,.1374381,.8363233,-.2166121,.6682042,.5511393,.7996449,-.4278994,.28836,-.8875198,.2181732,-.8772842,-.2818254,-.7000262,.5762185,-.6062385,-.7439126);this._distributions[18]=new Array(.6645703,-.05678739,.5720971,.4533803,-.07660709,.08802763,.5163431,-.4426552,.1163455,-.3404382,-.4004807,-.5046007,.2932099,-.8201418,-.5322125,.03834766,-.1490209,-.8817304,-.8000439,-.3509448,.5260983,.8421043,.1197811,.6963812,.9498612,.3122156,-.9285746,.02120355,-.6670724,.7217396,.9155889,-.3510147,-.271941,.4727852,.318879,.1634057,-.2686755,.9253026);this._distributions[19]=new Array(.5064292,.422527,.8935515,-.06610427,.1199719,.175568,.403388,-.2003276,.1657927,.8154403,.9301245,.2929218,-.1644068,.6201534,.7113559,-.6589743,-.3364046,-.1799502,.02109996,-.392765,-.382213,.3219992,-.9201946,.1207967,-.726185,.4291916,-.7443482,-.2480059,-.5147594,.7418784,.1935272,-.7406143,-.3643523,-.5559214,-.7147766,-.6326278,-.2524151,-.9096627,.5161405,.7908453);this._distributions[20]=new Array(.7921003,-.3032096,.5992879,-.009052323,.2538549,-.1872749,.7053444,.3677175,.5417761,-.8170255,.9749611,.1210478,.1969143,-.6117041,-.1824499,-.4634196,-.1181338,-.8668742,-.3050112,-.1352596,-.4409327,-.7082354,-.03225285,.1171548,.3113096,.3250439,-.8166144,-.463995,-.01014475,.4715334,-.6868284,.05091889,-.4011163,.2717285,-.06756835,.8307694,-.7938535,.4352129,-.4663842,.7165329,.559729,.8093995);this._distributions[21]=new Array(.07832243,.426151,-.3856795,.5799953,.01970797,.06706189,.4822682,.3014512,-.1532982,.87485,-.4959527,.07888043,.260601,-.2304784,.4996209,.7167382,.585986,-.04265174,-.7679967,.5509416,-.9041753,.1802134,-.8407655,-.4442826,-.2058258,-.2636995,-.4984115,-.5928579,.2926032,-.7886473,-.06933882,-.621177,.578115,-.4813387,.8981777,-.3291056,.1942733,.9255584,.8084362,.5066984,.9920095,.03103104,-.2403206,-.9389018);this._distributions[22]=new Array(-.5691095,.1014316,-.7788262,.384012,-.8253665,-.1645582,-.1830993,.002997211,-.2555013,-.4177977,-.6640869,-.4794711,-.2351242,.5850121,.02436554,.2825883,.006061143,-.8200245,.1618791,-.3063331,-.3765897,-.7249815,.6092919,-.6769328,-.5956934,.6957655,.5383642,.4522677,-.1489165,.9125596,.4167473,.1335986,.1898309,.5874342,.2288171,.9624356,.7540846,-.07672304,.8986252,.2788797,.3555991,-.9262139,.8454325,-.4027667,.4945236,-.2935512);this._distributions[23]=new Array(-.4481403,-.3758374,-.8877251,.08739938,.05015831,-.1339983,-.4070427,-.8534173,.1019274,-.5503222,-.445998,.1997541,-.8686263,-.2788867,-.7695944,-.6033704,-.05515742,-.885711,-.7714347,.5790485,.3466263,-.8799297,.4487582,-.5321087,-.2461368,.6053771,-.05568117,.2457351,-.4668669,.8523816,.8103387,-.4255538,.4054182,-.175663,-.2802011,-.08920153,.2665959,.382935,.555679,.1621837,.105246,.8420411,.6921161,.6902903,.880946,.2483067,.9699264,-.1021767);this._distributions[24]=new Array(-.1703323,-.3119385,.2916039,-.2988263,-.008472982,-.9277695,-.7730271,-.3277904,.3440474,-.6815342,-.2910278,.03461745,-.6764899,-.657078,-.3505501,-.7311988,-.03478927,.3258755,-.6048835,.159423,.2035525,.02212214,.5116573,.2226856,.6664805,-.2500189,.7147882,-.6609634,.03030632,-.5763278,-.2516585,.6116219,-.9434413,-.0116792,.9061816,.2491155,.182867,.6076167,.286593,.9485695,-.5992439,.6970096,-.2082874,.9416641,.9880044,-.1541709,-.9122881,.331555,.7324886,.6725098);this._distributions[25]=new Array(.3869598,-.04974834,.7168844,-.0693711,-.07166742,.1725325,.4599592,.3232779,.5872094,-.4198674,.2442266,-.625667,.1254557,.4500048,-.2290154,-.1803567,.890583,.3373493,.1256081,.7853789,-.2676466,.5305805,-.7063224,.252168,-.3989835,.1189921,.09617215,-.2451447,.6302541,.6085876,.9380925,-.3234899,.5086241,-.8573482,.03576187,-.9876697,-.0876712,-.6365195,-.5276513,.823456,-.6935764,-.2240411,-.5212318,-.5383121,-.2116208,.9639363,-.9840096,.02743555,-.3991577,-.8994547,-.7830126,.614068);this._distributions[26]=new Array(-.8366601,.4464895,-.5917366,-.02073906,-.9845258,.1635625,-.3097973,.4379579,-.5478154,.7173221,-.1685888,.9261969,.01503595,.6046097,.4452421,.5449086,.0315687,.1944619,.3753404,.8688548,.4143643,.1396648,.8711032,.4304703,.7328773,.1461501,.6374492,-.3521495,.145613,-.1341466,.9040975,-.135123,-.7839059,-.5450199,-.516019,-.3320859,-.206158,-.4431106,-.9703014,-.2368356,-.2473119,-.0864351,.2130725,-.4604077,-.003726701,-.7122303,-.4072131,-.6833169,.1632999,-.9776646,.4686888,-.680495,-.2293511,-.9509777);this._distributions[27]=new Array(.107311,-.1311369,-.4194764,-.3148777,.6171439,-.2745973,.2796618,.1937153,-.09106886,.4180236,.6044006,.05577846,.02927299,-.6738263,-.2580845,.1179939,-.09023564,-.3830024,.3570953,-.5000587,.81591,-.5518309,.9300217,-.1257987,.4904627,-.8381903,-.3163182,-.8632009,.1137595,-.9875998,.8390043,.3538185,.2149114,.4993694,.5191584,.3833552,.5002763,.7061465,-.2567276,.9068756,-.5197366,.3467845,.03668867,.9734009,-.5347553,.66747,-.9028882,.1023768,-.8967977,.412834,-.5821944,.0426479,-.8032165,-.2397038,-.5597343,-.6358021);this._distributions[28]=new Array(-.6562496,-.1781036,-.9301494,.1185208,-.3861143,-.4153562,-.1560799,-.1099607,-.5587025,.395218,-.5322112,-.699701,-.5008639,.08726846,-.970524,-.1963461,-.813577,-.5185111,-.1644458,.298,-.3216791,.639982,.3315373,.3339162,.2383235,-.00105722,.1137828,.5450742,-.01899921,.8798413,.2849685,.8255596,.6974412,.2123175,.7588523,.5470437,.5102502,-.1687844,.5853448,.8033476,.2590716,-.5262504,.5607718,-.6342825,.8666443,-.1491841,.8341052,-.4935003,-.1568441,-.6634066,.2512113,-.8769391,-.2559827,-.9572457,-.01928852,-.3966542,-.750667,.6409678);this._distributions[29]=new Array(.3454786,-.04837726,.2649553,.2406852,.5599093,-.3839145,-.1111814,-.05502108,.7586042,-.05818377,.2519488,-.4665135,-.1264972,.2602723,-.08766216,-.3671907,.6428129,.3999204,-.6105871,-.1246869,-.4589451,-.7646643,-.03021116,-.7899352,-.6036922,-.4293956,-.2481938,.6534185,.102798,.6784465,-.6392644,.4821358,-.6789002,.1779133,-.9140783,-.1989647,-.9262617,.3381507,.4794891,-.8093274,.3959447,.668478,.9602883,.2272305,-.123672,.9210883,.2375148,.9523395,-.52898,.7973378,-.382433,.1228794,.695015,.6948439,.7530277,-.6458191,.8777987,-.3272956,.2318525,-.962768);this._distributions[30]=new Array(.4518921,-.1146195,.4720805,-.4238748,.3655423,.1806341,.1589939,-.23568,.7673324,-.5149941,.01163658,.09045836,.7010971,.1245747,.7518286,-.1855433,.4960719,.4601022,.2566979,-.6308268,-.0654714,-.5126389,-.1823319,-.1343282,-.1464312,.4883236,-.3858738,.203523,.1484799,.4432284,-.477109,-.116241,.2719092,.7208626,.9104174,.3578536,-.5956199,.7662588,-.6996251,.3678654,-.2514512,.9251933,.1275825,-.9478135,-.204608,-.8611552,.4264838,-.877443,.9854161,.05521112,.5912951,.7997434,.1140349,.982093,-.9324368,-.2094094,-.42436,-.6441524,-.6722705,-.3554261,-.7844236,.08587621);this._distributions[31]=new Array(-.4206714,-.5613642,-.8733016,-.3373051,-.1046226,-.2902999,-.1318562,-.8434365,.1145093,-.5962623,-.4965627,-.1873259,-.5011808,-.8546229,-.7165636,-.5743566,.1090901,.2017643,.3404809,-.220455,-.1989015,.2372122,-.4538706,.0979171,.4514146,-.572846,.2314168,-.8514503,-.4247236,.5650803,-.943347,.04514639,-.1309718,.5221877,-.7004157,.4561877,.6306441,.04448673,.4301621,.5766876,.1078042,.7245752,.3875354,.2794483,.702876,-.2924213,.7360667,-.6210318,.7486517,.6531103,.4898235,.8591025,.6549174,.3854057,-.2596106,.7916998,.9251194,-.05296265,-.5620695,.820877,-.01228026,.9937211,.9612103,.2628758)};e.getDistribution=function(e){if(!this._distributions)this.initDistributions();if(e<2||e>32)return null;return this._distributions[e-1]};return e}();t.exports=s},{}],220:[function(e,t,r){t.exports=e(18)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Rectangle.js":18,"awayjs-core/lib/geom/Point":218}],221:[function(e,t,r){t.exports=e(27)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/AssetType.js":27}],222:[function(e,t,r){t.exports=e(33)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/NamedAssetBase.js":33,"awayjs-core/lib/errors/AbstractMethodError":210,"awayjs-core/lib/events/AssetEvent":213,"awayjs-core/lib/events/EventDispatcher":215}],223:[function(e,t,r){t.exports=e(49)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/MipmapGenerator.js":49,"awayjs-core/lib/base/BitmapData":209,"awayjs-core/lib/geom/Matrix":217,"awayjs-core/lib/geom/Rectangle":220}],224:[function(e,t,r){t.exports=e(51)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/Texture2DBase.js":51,"awayjs-core/lib/errors/AbstractMethodError":210,"awayjs-core/lib/textures/MipmapGenerator":223,"awayjs-core/lib/textures/TextureProxyBase":225}],225:[function(e,t,r){t.exports=e(52)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/TextureProxyBase.js":52,"awayjs-core/lib/library/AssetType":221,"awayjs-core/lib/library/NamedAssetBase":222}],226:[function(e,t,r){t.exports=e(56)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/ColorUtils.js":56}],227:[function(e,t,r){t.exports=e(61)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/AlignmentMode.js":61}],228:[function(e,t,r){t.exports=e(62)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/BlendMode.js":62}],229:[function(e,t,r){t.exports=e(63)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/DisplayObject.js":63,"awayjs-core/lib/bounds/AxisAlignedBoundingBox":259,"awayjs-core/lib/errors/AbstractMethodError":263,"awayjs-core/lib/geom/MathConsts":273,"awayjs-core/lib/geom/Matrix3D":275,"awayjs-core/lib/geom/Matrix3DUtils":276,"awayjs-core/lib/geom/Point":280,"awayjs-core/lib/geom/Vector3D":282,"awayjs-core/lib/library/NamedAssetBase":284,"awayjs-display/lib/base/AlignmentMode":227,"awayjs-display/lib/base/OrientationMode":231,"awayjs-display/lib/base/Transform":232,"awayjs-display/lib/events/DisplayObjectEvent":239,"awayjs-display/lib/events/SceneEvent":241,"awayjs-display/lib/pick/PickingCollisionVO":253}],230:[function(e,t,r){t.exports=e(65)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/LightBase.js":65,"awayjs-core/lib/errors/AbstractMethodError":263,"awayjs-core/lib/library/AssetType":283,"awayjs-display/lib/containers/DisplayObjectContainer":233,"awayjs-display/lib/events/LightEvent":240}],231:[function(e,t,r){t.exports=e(68)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/OrientationMode.js":68}],232:[function(e,t,r){t.exports=e(71)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/Transform.js":71,"awayjs-core/lib/geom/Matrix3D":275,"awayjs-core/lib/geom/Matrix3DUtils":276,"awayjs-core/lib/geom/Vector3D":282}],233:[function(e,t,r){t.exports=e(74)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/containers/DisplayObjectContainer.js":74,"awayjs-core/lib/errors/ArgumentError":264,"awayjs-core/lib/errors/Error":265,"awayjs-core/lib/errors/RangeError":267,"awayjs-core/lib/library/AssetType":283,"awayjs-display/lib/base/DisplayObject":229}],234:[function(e,t,r){t.exports=e(80)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/entities/Camera.js":80,"awayjs-core/lib/bounds/NullBounds":262,"awayjs-core/lib/events/ProjectionEvent":271,"awayjs-core/lib/geom/Matrix3D":275,"awayjs-core/lib/geom/Plane3D":278,"awayjs-core/lib/library/AssetType":283,"awayjs-core/lib/projections/PerspectiveProjection":287,"awayjs-display/lib/containers/DisplayObjectContainer":233,"awayjs-display/lib/events/CameraEvent":238,"awayjs-display/lib/partition/CameraNode":247}],235:[function(e,t,r){t.exports=e(81)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/entities/DirectionalLight.js":81,"awayjs-core/lib/bounds/NullBounds":262,"awayjs-core/lib/geom/Matrix3D":275,"awayjs-core/lib/geom/Vector3D":282,"awayjs-display/lib/base/LightBase":230,"awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper":245,"awayjs-display/lib/partition/DirectionalLightNode":248}],236:[function(e,t,r){t.exports=e(82)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/entities/LightProbe.js":82,"awayjs-core/lib/bounds/NullBounds":262,"awayjs-core/lib/errors/Error":265,"awayjs-display/lib/base/LightBase":230,"awayjs-display/lib/partition/LightProbeNode":250}],237:[function(e,t,r){t.exports=e(84)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/entities/PointLight.js":84,"awayjs-core/lib/bounds/BoundingSphere":260,"awayjs-core/lib/geom/Matrix3D":275,"awayjs-core/lib/geom/Vector3D":282,"awayjs-display/lib/base/LightBase":230,"awayjs-display/lib/materials/shadowmappers/CubeMapShadowMapper":244,"awayjs-display/lib/partition/PointLightNode":252}],238:[function(e,t,r){t.exports=e(87)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/CameraEvent.js":87,"awayjs-core/lib/events/Event":269}],239:[function(e,t,r){t.exports=e(88)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/DisplayObjectEvent.js":88,"awayjs-core/lib/events/Event":269}],240:[function(e,t,r){t.exports=e(90)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/LightEvent.js":90,"awayjs-core/lib/events/Event":269}],241:[function(e,t,r){t.exports=e(93)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/SceneEvent.js":93,"awayjs-core/lib/events/Event":269}],242:[function(e,t,r){t.exports=e(96)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/materials/lightpickers/LightPickerBase.js":96,"awayjs-core/lib/library/AssetType":283,"awayjs-core/lib/library/NamedAssetBase":284}],243:[function(e,t,r){t.exports=e(97)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/materials/lightpickers/StaticLightPicker.js":97,"awayjs-core/lib/events/Event":269,"awayjs-display/lib/entities/DirectionalLight":235,"awayjs-display/lib/entities/LightProbe":236,"awayjs-display/lib/entities/PointLight":237,"awayjs-display/lib/events/LightEvent":240,"awayjs-display/lib/materials/lightpickers/LightPickerBase":242}],244:[function(e,t,r){t.exports=e(98)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/materials/shadowmappers/CubeMapShadowMapper.js":98,"awayjs-core/lib/errors/PartialImplementationError":266,"awayjs-display/lib/entities/Camera":234,"awayjs-display/lib/materials/shadowmappers/ShadowMapperBase":246}],245:[function(e,t,r){t.exports=e(99)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper.js":99,"awayjs-core/lib/geom/Matrix3D":275,"awayjs-core/lib/projections/FreeMatrixProjection":286,"awayjs-display/lib/entities/Camera":234,"awayjs-display/lib/materials/shadowmappers/ShadowMapperBase":246}],246:[function(e,t,r){t.exports=e(100)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/materials/shadowmappers/ShadowMapperBase.js":100,"awayjs-core/lib/errors/AbstractMethodError":263,"awayjs-core/lib/textures/RenderTexture":290,"awayjs-display/lib/traverse/ShadowCasterCollector":257}],247:[function(e,t,r){t.exports=e(101)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/partition/CameraNode.js":101,"awayjs-display/lib/partition/EntityNode":249}],248:[function(e,t,r){t.exports=e(102)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/partition/DirectionalLightNode.js":102,"awayjs-display/lib/partition/EntityNode":249}],249:[function(e,t,r){t.exports=e(103)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/partition/EntityNode.js":103,"awayjs-core/lib/errors/PartialImplementationError":266,"awayjs-display/lib/partition/NodeBase":251}],250:[function(e,t,r){t.exports=e(104)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/partition/LightProbeNode.js":104,"awayjs-display/lib/partition/EntityNode":249}],251:[function(e,t,r){t.exports=e(105)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/partition/NodeBase.js":105}],252:[function(e,t,r){t.exports=e(108)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/partition/PointLightNode.js":108,"awayjs-display/lib/partition/EntityNode":249}],253:[function(e,t,r){t.exports=e(110)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/pick/PickingCollisionVO.js":110}],254:[function(e,t,r){t.exports=e(112)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/pool/EntityListItem.js":112}],255:[function(e,t,r){t.exports=e(113)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/pool/EntityListItemPool.js":113,"awayjs-display/lib/pool/EntityListItem":254}],256:[function(e,t,r){t.exports=e(117)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/traverse/CollectorBase.js":117,"awayjs-display/lib/pool/EntityListItemPool":255}],257:[function(e,t,r){t.exports=e(119)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/traverse/ShadowCasterCollector.js":119,"awayjs-display/lib/traverse/CollectorBase":256}],258:[function(e,t,r){t.exports=e(2)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/base/BitmapData.js":2,"awayjs-core/lib/geom/Rectangle":281,"awayjs-core/lib/utils/ColorUtils":293}],259:[function(e,t,r){t.exports=e(122)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/bounds/AxisAlignedBoundingBox.js":122,"awayjs-core/lib/bounds/BoundingVolumeBase":261,"awayjs-core/lib/geom/Matrix3DUtils":276,"awayjs-core/lib/geom/PlaneClassification":279,"awayjs-core/lib/geom/Vector3D":282}],260:[function(e,t,r){t.exports=e(123)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/bounds/BoundingSphere.js":123,"awayjs-core/lib/bounds/BoundingVolumeBase":261,"awayjs-core/lib/geom/PlaneClassification":279,"awayjs-core/lib/geom/Vector3D":282}],261:[function(e,t,r){t.exports=e(124)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/bounds/BoundingVolumeBase.js":124,"awayjs-core/lib/errors/AbstractMethodError":263,"awayjs-core/lib/geom/Box":272}],262:[function(e,t,r){t.exports=e(125)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/bounds/NullBounds.js":125,"awayjs-core/lib/bounds/BoundingVolumeBase":261,"awayjs-core/lib/geom/PlaneClassification":279}],263:[function(e,t,r){t.exports=e(4)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/AbstractMethodError.js":4,"awayjs-core/lib/errors/Error":265}],264:[function(e,t,r){t.exports=e(5)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/ArgumentError.js":5,"awayjs-core/lib/errors/Error":265}],265:[function(e,t,r){t.exports=e(6)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/Error.js":6}],266:[function(e,t,r){t.exports=e(129)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/errors/PartialImplementationError.js":129,"awayjs-core/lib/errors/Error":265}],267:[function(e,t,r){t.exports=e(130)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/errors/RangeError.js":130,"awayjs-core/lib/errors/Error":265}],268:[function(e,t,r){t.exports=e(7)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/AssetEvent.js":7,"awayjs-core/lib/events/Event":269}],269:[function(e,t,r){t.exports=e(8)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/Event.js":8}],270:[function(e,t,r){t.exports=e(9)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/EventDispatcher.js":9}],271:[function(e,t,r){t.exports=e(139)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/events/ProjectionEvent.js":139,"awayjs-core/lib/events/Event":269}],272:[function(e,t,r){t.exports=e(141)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Box.js":141,"awayjs-core/lib/geom/Vector3D":282}],273:[function(e,t,r){t.exports=e(142)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/MathConsts.js":142}],274:[function(e,t,r){t.exports=e(16)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Matrix.js":16,"awayjs-core/lib/errors/ArgumentError":264,"awayjs-core/lib/geom/Point":280}],275:[function(e,t,r){t.exports=e(144)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Matrix3D.js":144,"awayjs-core/lib/errors/ArgumentError":264,"awayjs-core/lib/geom/Orientation3D":277,"awayjs-core/lib/geom/Vector3D":282}],276:[function(e,t,r){t.exports=e(145)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Matrix3DUtils.js":145,"awayjs-core/lib/geom/Matrix3D":275,"awayjs-core/lib/geom/Vector3D":282}],277:[function(e,t,r){t.exports=e(146)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Orientation3D.js":146}],278:[function(e,t,r){t.exports=e(147)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Plane3D.js":147,"awayjs-core/lib/geom/PlaneClassification":279}],279:[function(e,t,r){t.exports=e(148)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/PlaneClassification.js":148}],280:[function(e,t,r){t.exports=e(17)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Point.js":17}],281:[function(e,t,r){t.exports=e(18)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Rectangle.js":18,"awayjs-core/lib/geom/Point":280}],282:[function(e,t,r){t.exports=e(20)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Vector3D.js":20}],283:[function(e,t,r){t.exports=e(27)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/AssetType.js":27}],284:[function(e,t,r){t.exports=e(33)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/NamedAssetBase.js":33,"awayjs-core/lib/errors/AbstractMethodError":263,"awayjs-core/lib/events/AssetEvent":268,"awayjs-core/lib/events/EventDispatcher":270}],285:[function(e,t,r){t.exports=e(174)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/projections/CoordinateSystem.js":174}],286:[function(e,t,r){t.exports=e(175)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/projections/FreeMatrixProjection.js":175,"awayjs-core/lib/projections/PerspectiveProjection":287,"awayjs-core/lib/projections/ProjectionBase":288}],287:[function(e,t,r){t.exports=e(176)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/projections/PerspectiveProjection.js":176,"awayjs-core/lib/geom/Vector3D":282,"awayjs-core/lib/projections/CoordinateSystem":285,"awayjs-core/lib/projections/ProjectionBase":288}],288:[function(e,t,r){t.exports=e(177)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/projections/ProjectionBase.js":177,"awayjs-core/lib/errors/AbstractMethodError":263,"awayjs-core/lib/events/EventDispatcher":270,"awayjs-core/lib/events/ProjectionEvent":271,"awayjs-core/lib/geom/Matrix3D":275,"awayjs-core/lib/geom/Rectangle":281}],289:[function(e,t,r){t.exports=e(49)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/MipmapGenerator.js":49,"awayjs-core/lib/base/BitmapData":258,"awayjs-core/lib/geom/Matrix":274,"awayjs-core/lib/geom/Rectangle":281}],290:[function(e,t,r){t.exports=e(183)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/textures/RenderTexture.js":183,"awayjs-core/lib/errors/Error":265,"awayjs-core/lib/textures/Texture2DBase":291,"awayjs-core/lib/utils/TextureUtils":294}],291:[function(e,t,r){t.exports=e(51)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/Texture2DBase.js":51,"awayjs-core/lib/errors/AbstractMethodError":263,"awayjs-core/lib/textures/MipmapGenerator":289,"awayjs-core/lib/textures/TextureProxyBase":292}],292:[function(e,t,r){t.exports=e(52)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/TextureProxyBase.js":52,"awayjs-core/lib/library/AssetType":283,"awayjs-core/lib/library/NamedAssetBase":284}],293:[function(e,t,r){t.exports=e(56)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/ColorUtils.js":56}],294:[function(e,t,r){t.exports=e(58)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/TextureUtils.js":58}],295:[function(e,t,r){var s=e("awayjs-renderergl/lib/compilation/ShaderRegisterElement");var i=function(){function e(e,t,r){if(r===void 0){r=true}this._regName=e;this._regCount=t;this._persistent=r;this.initRegisters(e,t)}e.prototype.requestFreeVectorReg=function(){for(var e=0;e<this._regCount;++e){if(!this.isRegisterUsed(e)){if(this._persistent)this._usedVectorCount[e]++;return this._vectorRegisters[e]}}throw new Error("Register overflow!")};e.prototype.requestFreeRegComponent=function(){for(var e=0;e<this._regCount;++e){if(this._usedVectorCount[e]>0)continue;for(var t=0;t<4;++t){if(this._usedSingleCount[t][e]==0){if(this._persistent)this._usedSingleCount[t][e]++;return this._registerComponents[t][e]}}}throw new Error("Register overflow!")};e.prototype.addUsage=function(e,t){if(e._component>-1)this._usedSingleCount[e._component][e.index]+=t;else this._usedVectorCount[e.index]+=t};e.prototype.removeUsage=function(e){if(e._component>-1){if(--this._usedSingleCount[e._component][e.index]<0)throw new Error("More usages removed than exist!")}else{if(--this._usedVectorCount[e.index]<0)throw new Error("More usages removed than exist!")}};e.prototype.dispose=function(){this._vectorRegisters=null;this._registerComponents=null;this._usedSingleCount=null;this._usedVectorCount=null};e.prototype.hasRegisteredRegs=function(){for(var e=0;e<this._regCount;++e)if(this.isRegisterUsed(e))return true;return false};e.prototype.initRegisters=function(t,r){var s=e._initPool(t,r);this._vectorRegisters=e._regPool[s];this._registerComponents=e._regCompsPool[s];this._usedVectorCount=this._initArray(Array(r),0);this._usedSingleCount=new Array(4);this._usedSingleCount[0]=this._initArray(new Array(r),0);this._usedSingleCount[1]=this._initArray(new Array(r),0);this._usedSingleCount[2]=this._initArray(new Array(r),0);this._usedSingleCount[3]=this._initArray(new Array(r),0)};e._initPool=function(t,r){var i=t+r;if(e._regPool[i]!=undefined)return i;var a=new Array(r);e._regPool[i]=a;var o=[[],[],[],[]];e._regCompsPool[i]=o;for(var n=0;n<r;++n){a[n]=new s(t,n);for(var l=0;l<4;++l)o[l][n]=new s(t,n,l)}return i};e.prototype.isRegisterUsed=function(e){if(this._usedVectorCount[e]>0)return true;for(var t=0;t<4;++t)if(this._usedSingleCount[t][e]>0)return true;return false};e.prototype._initArray=function(e,t){var r=e.length;for(var s=0;s<r;s++)e[s]=t;return e};e._regPool=new Object;e._regCompsPool=new Object;return e}();t.exports=i},{"awayjs-renderergl/lib/compilation/ShaderRegisterElement":302}],296:[function(e,t,r){var s=e("awayjs-renderergl/lib/compilation/ShaderRegisterCache");var i=e("awayjs-renderergl/lib/compilation/ShaderRegisterData");var a=function(){function e(e,t,r){this._pVertexCode="";this._pFragmentCode="";this._pPostAnimationFragmentCode="";this._pMaterial=e;this._pMaterialPass=t;this._pShaderObject=r;this._pProfile=r.profile;this._pSharedRegisters=new i;this._pRegisterCache=new s(this._pProfile);this._pRegisterCache.vertexAttributesOffset=1;this._pRegisterCache.reset()}e.prototype.compile=function(){this._pShaderObject.reset();this.pCalculateDependencies();this.pInitRegisterIndices();this.pCompileDependencies();this._pVertexCode+=this._pMaterialPass._iGetVertexCode(this._pShaderObject,this._pRegisterCache,this._pSharedRegisters);this._pPostAnimationFragmentCode+=this._pMaterialPass._iGetFragmentCode(this._pShaderObject,this._pRegisterCache,this._pSharedRegisters);this._pPostAnimationFragmentCode+="mov "+this._pRegisterCache.fragmentOutputRegister+", "+this._pSharedRegisters.shadedTarget+"\n";this._pRegisterCache.removeFragmentTempUsage(this._pSharedRegisters.shadedTarget);this._pShaderObject.initConstantData(this._pRegisterCache,this._pAnimatableAttributes,this._pAnimationTargetRegisters,this._uvSource,this._uvTarget);this._pMaterialPass._iInitConstantData(this._pShaderObject)};e.prototype.pCompileDependencies=function(){this._pSharedRegisters.shadedTarget=this._pRegisterCache.getFreeFragmentVectorTemp();this._pRegisterCache.addFragmentTempUsages(this._pSharedRegisters.shadedTarget,1);if(this._pShaderObject.globalPosDependencies>0)this.compileGlobalPositionCode();if(this._pShaderObject.uvDependencies>0)this.compileUVCode();if(this._pShaderObject.secondaryUVDependencies>0)this.compileSecondaryUVCode();if(this._pShaderObject.normalDependencies>0)this.compileNormalCode();if(this._pShaderObject.viewDirDependencies>0)this.compileViewDirCode();this._pVertexCode+=this._pMaterial._iGetVertexCode(this._pShaderObject,this._pRegisterCache,this._pSharedRegisters);this._pFragmentCode+=this._pMaterial._iGetFragmentCode(this._pShaderObject,this._pRegisterCache,this._pSharedRegisters);this._pVertexCode+=this._pMaterialPass._iGetPreLightingVertexCode(this._pShaderObject,this._pRegisterCache,this._pSharedRegisters);this._pFragmentCode+=this._pMaterialPass._iGetPreLightingFragmentCode(this._pShaderObject,this._pRegisterCache,this._pSharedRegisters)
};e.prototype.compileGlobalPositionCode=function(){this._pRegisterCache.addVertexTempUsages(this._pSharedRegisters.globalPositionVertex=this._pRegisterCache.getFreeVertexVectorTemp(),this._pShaderObject.globalPosDependencies);var e=this._pRegisterCache.getFreeVertexConstant();this._pRegisterCache.getFreeVertexConstant();this._pRegisterCache.getFreeVertexConstant();this._pRegisterCache.getFreeVertexConstant();this._pShaderObject.sceneMatrixIndex=e.index*4;this._pVertexCode+="m44 "+this._pSharedRegisters.globalPositionVertex+", "+this._pSharedRegisters.localPosition+", "+e+"\n";if(this._pShaderObject.usesGlobalPosFragment){this._pSharedRegisters.globalPositionVarying=this._pRegisterCache.getFreeVarying();this._pVertexCode+="mov "+this._pSharedRegisters.globalPositionVarying+", "+this._pSharedRegisters.globalPositionVertex+"\n"}};e.prototype.compileUVCode=function(){var e=this._pRegisterCache.getFreeVertexAttribute();this._pShaderObject.uvBufferIndex=e.index;var t=this._pRegisterCache.getFreeVarying();this._pSharedRegisters.uvVarying=t;if(this._pShaderObject.usesUVTransform){var r=this._pRegisterCache.getFreeVertexConstant();var s=this._pRegisterCache.getFreeVertexConstant();this._pShaderObject.uvTransformIndex=r.index*4;this._pVertexCode+="dp4 "+t+".x, "+e+", "+r+"\n"+"dp4 "+t+".y, "+e+", "+s+"\n"+"mov "+t+".zw, "+e+".zw \n"}else{this._pShaderObject.uvTransformIndex=-1;this._uvTarget=t.toString();this._uvSource=e.toString()}};e.prototype.compileSecondaryUVCode=function(){var e=this._pRegisterCache.getFreeVertexAttribute();this._pShaderObject.secondaryUVBufferIndex=e.index;this._pSharedRegisters.secondaryUVVarying=this._pRegisterCache.getFreeVarying();this._pVertexCode+="mov "+this._pSharedRegisters.secondaryUVVarying+", "+e+"\n"};e.prototype.compileViewDirCode=function(){var e=this._pRegisterCache.getFreeVertexConstant();this._pSharedRegisters.viewDirVarying=this._pRegisterCache.getFreeVarying();this._pSharedRegisters.viewDirFragment=this._pRegisterCache.getFreeFragmentVectorTemp();this._pRegisterCache.addFragmentTempUsages(this._pSharedRegisters.viewDirFragment,this._pShaderObject.viewDirDependencies);this._pShaderObject.cameraPositionIndex=e.index*4;if(this._pShaderObject.usesTangentSpace){var t=this._pRegisterCache.getFreeVertexVectorTemp();this._pVertexCode+="sub "+t+", "+e+", "+this._pSharedRegisters.localPosition+"\n"+"m33 "+this._pSharedRegisters.viewDirVarying+".xyz, "+t+", "+this._pSharedRegisters.animatedTangent+"\n"+"mov "+this._pSharedRegisters.viewDirVarying+".w, "+this._pSharedRegisters.localPosition+".w\n"}else{this._pVertexCode+="sub "+this._pSharedRegisters.viewDirVarying+", "+e+", "+this._pSharedRegisters.globalPositionVertex+"\n";this._pRegisterCache.removeVertexTempUsage(this._pSharedRegisters.globalPositionVertex)}this._pFragmentCode+="nrm "+this._pSharedRegisters.viewDirFragment+".xyz, "+this._pSharedRegisters.viewDirVarying+"\n"+"mov "+this._pSharedRegisters.viewDirFragment+".w,   "+this._pSharedRegisters.viewDirVarying+".w\n"};e.prototype.compileNormalCode=function(){this._pSharedRegisters.normalFragment=this._pRegisterCache.getFreeFragmentVectorTemp();this._pRegisterCache.addFragmentTempUsages(this._pSharedRegisters.normalFragment,this._pShaderObject.normalDependencies);if(this._pShaderObject.outputsNormals&&!this._pShaderObject.outputsTangentNormals){this._pVertexCode+=this._pMaterialPass._iGetNormalVertexCode(this._pShaderObject,this._pRegisterCache,this._pSharedRegisters);this._pFragmentCode+=this._pMaterialPass._iGetNormalFragmentCode(this._pShaderObject,this._pRegisterCache,this._pSharedRegisters);return}var e;if(!this._pShaderObject.outputsNormals||!this._pShaderObject.usesTangentSpace){e=new Array(3);e[0]=this._pRegisterCache.getFreeVertexConstant();e[1]=this._pRegisterCache.getFreeVertexConstant();e[2]=this._pRegisterCache.getFreeVertexConstant();this._pRegisterCache.getFreeVertexConstant();this._pShaderObject.sceneNormalMatrixIndex=e[0].index*4;this._pSharedRegisters.normalVarying=this._pRegisterCache.getFreeVarying()}if(this._pShaderObject.outputsNormals){if(this._pShaderObject.usesTangentSpace){this._pVertexCode+="nrm "+this._pSharedRegisters.animatedNormal+".xyz, "+this._pSharedRegisters.animatedNormal+"\n"+"nrm "+this._pSharedRegisters.animatedTangent+".xyz, "+this._pSharedRegisters.animatedTangent+"\n"+"crs "+this._pSharedRegisters.bitangent+".xyz, "+this._pSharedRegisters.animatedNormal+", "+this._pSharedRegisters.animatedTangent+"\n";this._pFragmentCode+=this._pMaterialPass._iGetNormalFragmentCode(this._pShaderObject,this._pRegisterCache,this._pSharedRegisters)}else{this._pSharedRegisters.tangentVarying=this._pRegisterCache.getFreeVarying();this._pSharedRegisters.bitangentVarying=this._pRegisterCache.getFreeVarying();var t=this._pRegisterCache.getFreeVertexVectorTemp();this._pVertexCode+="m33 "+t+".xyz, "+this._pSharedRegisters.animatedNormal+", "+e[0]+"\n"+"nrm "+this._pSharedRegisters.animatedNormal+".xyz, "+t+"\n"+"m33 "+t+".xyz, "+this._pSharedRegisters.animatedTangent+", "+e[0]+"\n"+"nrm "+this._pSharedRegisters.animatedTangent+".xyz, "+t+"\n"+"mov "+this._pSharedRegisters.tangentVarying+".x, "+this._pSharedRegisters.animatedTangent+".x  \n"+"mov "+this._pSharedRegisters.tangentVarying+".z, "+this._pSharedRegisters.animatedNormal+".x  \n"+"mov "+this._pSharedRegisters.tangentVarying+".w, "+this._pSharedRegisters.normalInput+".w  \n"+"mov "+this._pSharedRegisters.bitangentVarying+".x, "+this._pSharedRegisters.animatedTangent+".y  \n"+"mov "+this._pSharedRegisters.bitangentVarying+".z, "+this._pSharedRegisters.animatedNormal+".y  \n"+"mov "+this._pSharedRegisters.bitangentVarying+".w, "+this._pSharedRegisters.normalInput+".w  \n"+"mov "+this._pSharedRegisters.normalVarying+".x, "+this._pSharedRegisters.animatedTangent+".z  \n"+"mov "+this._pSharedRegisters.normalVarying+".z, "+this._pSharedRegisters.animatedNormal+".z  \n"+"mov "+this._pSharedRegisters.normalVarying+".w, "+this._pSharedRegisters.normalInput+".w  \n"+"crs "+t+".xyz, "+this._pSharedRegisters.animatedNormal+", "+this._pSharedRegisters.animatedTangent+"\n"+"mov "+this._pSharedRegisters.tangentVarying+".y, "+t+".x    \n"+"mov "+this._pSharedRegisters.bitangentVarying+".y, "+t+".y  \n"+"mov "+this._pSharedRegisters.normalVarying+".y, "+t+".z    \n";this._pRegisterCache.removeVertexTempUsage(this._pSharedRegisters.animatedTangent);var r;var s;var i;r=this._pRegisterCache.getFreeFragmentVectorTemp();this._pRegisterCache.addFragmentTempUsages(r,1);s=this._pRegisterCache.getFreeFragmentVectorTemp();this._pRegisterCache.addFragmentTempUsages(s,1);i=this._pRegisterCache.getFreeFragmentVectorTemp();this._pRegisterCache.addFragmentTempUsages(i,1);this._pFragmentCode+="nrm "+r+".xyz, "+this._pSharedRegisters.tangentVarying+"\n"+"mov "+r+".w, "+this._pSharedRegisters.tangentVarying+".w	\n"+"nrm "+s+".xyz, "+this._pSharedRegisters.bitangentVarying+"\n"+"nrm "+i+".xyz, "+this._pSharedRegisters.normalVarying+"\n";this._pFragmentCode+=this._pMaterialPass._iGetNormalFragmentCode(this._pShaderObject,this._pRegisterCache,this._pSharedRegisters)+"m33 "+this._pSharedRegisters.normalFragment+".xyz, "+this._pSharedRegisters.normalFragment+", "+r+"\n"+"mov "+this._pSharedRegisters.normalFragment+".w, "+this._pSharedRegisters.normalVarying+".w\n";this._pRegisterCache.removeFragmentTempUsage(s);this._pRegisterCache.removeFragmentTempUsage(r);this._pRegisterCache.removeFragmentTempUsage(i)}}else{this._pVertexCode+="m33 "+this._pSharedRegisters.normalVarying+".xyz, "+this._pSharedRegisters.animatedNormal+", "+e[0]+"\n"+"mov "+this._pSharedRegisters.normalVarying+".w, "+this._pSharedRegisters.animatedNormal+".w\n";this._pFragmentCode+="nrm "+this._pSharedRegisters.normalFragment+".xyz, "+this._pSharedRegisters.normalVarying+"\n"+"mov "+this._pSharedRegisters.normalFragment+".w, "+this._pSharedRegisters.normalVarying+".w\n";if(this._pShaderObject.tangentDependencies>0){this._pSharedRegisters.tangentVarying=this._pRegisterCache.getFreeVarying();this._pVertexCode+="m33 "+this._pSharedRegisters.tangentVarying+".xyz, "+this._pSharedRegisters.animatedTangent+", "+e[0]+"\n"+"mov "+this._pSharedRegisters.tangentVarying+".w, "+this._pSharedRegisters.animatedTangent+".w\n"}}if(!this._pShaderObject.usesTangentSpace)this._pRegisterCache.removeVertexTempUsage(this._pSharedRegisters.animatedNormal)};e.prototype.pInitRegisterIndices=function(){this._pShaderObject.pInitRegisterIndices();this._pAnimatableAttributes=new Array("va0");this._pAnimationTargetRegisters=new Array("vt0");this._pVertexCode="";this._pFragmentCode="";this._pPostAnimationFragmentCode="";this._pRegisterCache.addVertexTempUsages(this._pSharedRegisters.localPosition=this._pRegisterCache.getFreeVertexVectorTemp(),1);this._pSharedRegisters.commons=this._pRegisterCache.getFreeFragmentConstant();this._pShaderObject.commonsDataIndex=this._pSharedRegisters.commons.index*4;if(this._pShaderObject.tangentDependencies>0||this._pShaderObject.outputsNormals){this._pSharedRegisters.tangentInput=this._pRegisterCache.getFreeVertexAttribute();this._pShaderObject.tangentBufferIndex=this._pSharedRegisters.tangentInput.index;this._pSharedRegisters.animatedTangent=this._pRegisterCache.getFreeVertexVectorTemp();this._pRegisterCache.addVertexTempUsages(this._pSharedRegisters.animatedTangent,1);if(this._pShaderObject.usesTangentSpace){this._pSharedRegisters.bitangent=this._pRegisterCache.getFreeVertexVectorTemp();this._pRegisterCache.addVertexTempUsages(this._pSharedRegisters.bitangent,1)}this._pAnimatableAttributes.push(this._pSharedRegisters.tangentInput.toString());this._pAnimationTargetRegisters.push(this._pSharedRegisters.animatedTangent.toString())}if(this._pShaderObject.normalDependencies>0){this._pSharedRegisters.normalInput=this._pRegisterCache.getFreeVertexAttribute();this._pShaderObject.normalBufferIndex=this._pSharedRegisters.normalInput.index;this._pSharedRegisters.animatedNormal=this._pRegisterCache.getFreeVertexVectorTemp();this._pRegisterCache.addVertexTempUsages(this._pSharedRegisters.animatedNormal,1);this._pAnimatableAttributes.push(this._pSharedRegisters.normalInput.toString());this._pAnimationTargetRegisters.push(this._pSharedRegisters.animatedNormal.toString())}};e.prototype.pCalculateDependencies=function(){this._pShaderObject.useAlphaPremultiplied=this._pMaterial.alphaPremultiplied;this._pShaderObject.useBothSides=this._pMaterial.bothSides;this._pShaderObject.useMipmapping=this._pMaterial.mipmap;this._pShaderObject.useSmoothTextures=this._pMaterial.smooth;this._pShaderObject.repeatTextures=this._pMaterial.repeat;this._pShaderObject.usesUVTransform=this._pMaterial.animateUVs;this._pShaderObject.alphaThreshold=this._pMaterial.alphaThreshold;this._pShaderObject.texture=this._pMaterial.texture;this._pShaderObject.color=this._pMaterial.color;this._pMaterialPass._iIncludeDependencies(this._pShaderObject)};e.prototype.dispose=function(){this._pRegisterCache.dispose();this._pRegisterCache=null;this._pSharedRegisters=null};Object.defineProperty(e.prototype,"vertexCode",{get:function(){return this._pVertexCode},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"fragmentCode",{get:function(){return this._pFragmentCode},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"postAnimationFragmentCode",{get:function(){return this._pPostAnimationFragmentCode},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"shadedTarget",{get:function(){return this._pSharedRegisters.shadedTarget.toString()},enumerable:true,configurable:true});return e}();t.exports=a},{"awayjs-renderergl/lib/compilation/ShaderRegisterCache":300,"awayjs-renderergl/lib/compilation/ShaderRegisterData":301}],297:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-display/lib/materials/LightSources");var a=e("awayjs-stagegl/lib/base/ContextGLProfile");var o=e("awayjs-renderergl/lib/compilation/ShaderCompilerBase");var n=function(e){s(t,e);function t(t,r,s){e.call(this,t,r,s);this._materialLightingPass=r;this._shaderLightingObject=s}t.prototype.pCompileDependencies=function(){e.prototype.pCompileDependencies.call(this);if(this._shaderLightingObject.usesShadows)this.pCompileShadowCode();if(this._shaderLightingObject.usesLights){this.initLightRegisters();this.compileLightCode()}if(this._shaderLightingObject.usesProbes)this.compileLightProbeCode();this._pVertexCode+=this._materialLightingPass._iGetPostLightingVertexCode(this._shaderLightingObject,this._pRegisterCache,this._pSharedRegisters);this._pFragmentCode+=this._materialLightingPass._iGetPostLightingFragmentCode(this._shaderLightingObject,this._pRegisterCache,this._pSharedRegisters)};t.prototype.pCompileShadowCode=function(){if(this._shaderLightingObject.normalDependencies>0){this._pSharedRegisters.shadowTarget=this._pSharedRegisters.normalFragment}else{this._pSharedRegisters.shadowTarget=this._pRegisterCache.getFreeFragmentVectorTemp();this._pRegisterCache.addFragmentTempUsages(this._pSharedRegisters.shadowTarget,1)}};t.prototype.initLightRegisters=function(){var e,t;if(this._dirLightVertexConstants){t=this._dirLightVertexConstants.length;for(e=0;e<t;++e){this._dirLightVertexConstants[e]=this._pRegisterCache.getFreeVertexConstant();if(this._shaderLightingObject.lightVertexConstantIndex==-1)this._shaderLightingObject.lightVertexConstantIndex=this._dirLightVertexConstants[e].index*4}}if(this._pointLightVertexConstants){t=this._pointLightVertexConstants.length;for(e=0;e<t;++e){this._pointLightVertexConstants[e]=this._pRegisterCache.getFreeVertexConstant();if(this._shaderLightingObject.lightVertexConstantIndex==-1)this._shaderLightingObject.lightVertexConstantIndex=this._pointLightVertexConstants[e].index*4}}t=this._dirLightFragmentConstants.length;for(e=0;e<t;++e){this._dirLightFragmentConstants[e]=this._pRegisterCache.getFreeFragmentConstant();if(this._shaderLightingObject.lightFragmentConstantIndex==-1)this._shaderLightingObject.lightFragmentConstantIndex=this._dirLightFragmentConstants[e].index*4}t=this._pointLightFragmentConstants.length;for(e=0;e<t;++e){this._pointLightFragmentConstants[e]=this._pRegisterCache.getFreeFragmentConstant();if(this._shaderLightingObject.lightFragmentConstantIndex==-1)this._shaderLightingObject.lightFragmentConstantIndex=this._pointLightFragmentConstants[e].index*4}};t.prototype.compileLightCode=function(){var e;var t;var r;var s;var i=0;var a=0;var o=this._shaderLightingObject.usesLightsForSpecular;var n=this._shaderLightingObject.usesLightsForDiffuse;for(var l=0;l<this._materialLightingPass.iNumDirectionalLights;++l){if(this._shaderLightingObject.usesTangentSpace){s=this._dirLightVertexConstants[i++];var h=this._pRegisterCache.getFreeVarying();this._pVertexCode+="m33 "+h+".xyz, "+s+", "+this._pSharedRegisters.animatedTangent+"\n"+"mov "+h+".w, "+s+".w\n";s=this._pRegisterCache.getFreeFragmentVectorTemp();this._pRegisterCache.addVertexTempUsages(s,1);this._pFragmentCode+="nrm "+s+".xyz, "+h+"\n"+"mov "+s+".w, "+h+".w\n"}else{s=this._dirLightFragmentConstants[a++]}e=this._dirLightFragmentConstants[a++];t=this._dirLightFragmentConstants[a++];if(n)this._pFragmentCode+=this._materialLightingPass._iGetPerLightDiffuseFragmentCode(this._shaderLightingObject,s,e,this._pRegisterCache,this._pSharedRegisters);if(o)this._pFragmentCode+=this._materialLightingPass._iGetPerLightSpecularFragmentCode(this._shaderLightingObject,s,t,this._pRegisterCache,this._pSharedRegisters);if(this._shaderLightingObject.usesTangentSpace)this._pRegisterCache.removeVertexTempUsage(s)}i=0;a=0;for(var l=0;l<this._materialLightingPass.iNumPointLights;++l){if(this._shaderLightingObject.usesTangentSpace||!this._shaderLightingObject.usesGlobalPosFragment)r=this._pointLightVertexConstants[i++];else r=this._pointLightFragmentConstants[a++];e=this._pointLightFragmentConstants[a++];t=this._pointLightFragmentConstants[a++];s=this._pRegisterCache.getFreeFragmentVectorTemp();this._pRegisterCache.addFragmentTempUsages(s,1);var h;if(this._shaderLightingObject.usesTangentSpace){h=this._pRegisterCache.getFreeVarying();var p=this._pRegisterCache.getFreeVertexVectorTemp();this._pVertexCode+="sub "+p+", "+r+", "+this._pSharedRegisters.localPosition+"\n"+"m33 "+h+".xyz, "+p+", "+this._pSharedRegisters.animatedTangent+"\n"+"mov "+h+".w, "+this._pSharedRegisters.localPosition+".w\n"}else if(!this._shaderLightingObject.usesGlobalPosFragment){h=this._pRegisterCache.getFreeVarying();this._pVertexCode+="sub "+h+", "+r+", "+this._pSharedRegisters.globalPositionVertex+"\n"}else{h=s;this._pFragmentCode+="sub "+s+", "+r+", "+this._pSharedRegisters.globalPositionVarying+"\n"}if(this._shaderLightingObject.usesLightFallOff){this._pFragmentCode+="dp3 "+s+".w, "+h+", "+h+"\n"+"sub "+s+".w, "+s+".w, "+e+".w\n"+"mul "+s+".w, "+s+".w, "+t+".w\n"+"sat "+s+".w, "+s+".w\n"+"sub "+s+".w, "+this._pSharedRegisters.commons+".w, "+s+".w\n"+"nrm "+s+".xyz, "+h+"\n"}else{this._pFragmentCode+="nrm "+s+".xyz, "+h+"\n"+"mov "+s+".w, "+h+".w\n"}if(this._shaderLightingObject.lightFragmentConstantIndex==-1)this._shaderLightingObject.lightFragmentConstantIndex=r.index*4;if(n)this._pFragmentCode+=this._materialLightingPass._iGetPerLightDiffuseFragmentCode(this._shaderLightingObject,s,e,this._pRegisterCache,this._pSharedRegisters);if(o)this._pFragmentCode+=this._materialLightingPass._iGetPerLightSpecularFragmentCode(this._shaderLightingObject,s,t,this._pRegisterCache,this._pSharedRegisters);this._pRegisterCache.removeFragmentTempUsage(s)}};t.prototype.compileLightProbeCode=function(){var e;var t=[".x",".y",".z",".w"];var r=new Array;var s;var i;var a=this._shaderLightingObject.usesProbesForSpecular;var o=this._shaderLightingObject.usesProbesForDiffuse;if(o)this._shaderLightingObject.lightProbeDiffuseIndices=new Array;if(a)this._shaderLightingObject.lightProbeSpecularIndices=new Array;for(s=0;s<this._pNumProbeRegisters;++s){r[s]=this._pRegisterCache.getFreeFragmentConstant();if(s==0)this._shaderLightingObject.probeWeightsIndex=r[s].index*4}for(s=0;s<this._materialLightingPass.iNumLightProbes;++s){e=r[Math.floor(s/4)].toString()+t[s%4];if(o){i=this._pRegisterCache.getFreeTextureReg();this._shaderLightingObject.lightProbeDiffuseIndices[s]=i.index;this._pFragmentCode+=this._materialLightingPass._iGetPerProbeDiffuseFragmentCode(this._shaderLightingObject,i,e,this._pRegisterCache,this._pSharedRegisters)}if(a){i=this._pRegisterCache.getFreeTextureReg();this._shaderLightingObject.lightProbeSpecularIndices[s]=i.index;this._pFragmentCode+=this._materialLightingPass._iGetPerProbeSpecularFragmentCode(this._shaderLightingObject,i,e,this._pRegisterCache,this._pSharedRegisters)}}};t.prototype.pInitRegisterIndices=function(){e.prototype.pInitRegisterIndices.call(this);this._shaderLightingObject.lightVertexConstantIndex=-1;this._shaderLightingObject.lightFragmentConstantIndex=-1;this._shaderLightingObject.probeWeightsIndex=-1;this._pNumProbeRegisters=Math.ceil(this._materialLightingPass.iNumLightProbes/4);if(this._shaderLightingObject.usesTangentSpace||!this._shaderLightingObject.usesGlobalPosFragment){this._pointLightVertexConstants=new Array(this._materialLightingPass.iNumPointLights);this._pointLightFragmentConstants=new Array(this._materialLightingPass.iNumPointLights*2)}else{this._pointLightFragmentConstants=new Array(this._materialLightingPass.iNumPointLights*3)}if(this._shaderLightingObject.usesTangentSpace){this._dirLightVertexConstants=new Array(this._materialLightingPass.iNumDirectionalLights);this._dirLightFragmentConstants=new Array(this._materialLightingPass.iNumDirectionalLights*2)}else{this._dirLightFragmentConstants=new Array(this._materialLightingPass.iNumDirectionalLights*3)}};t.prototype.pCalculateDependencies=function(){var t=this._materialLightingPass.iNumPointLights+this._materialLightingPass.iNumDirectionalLights;var r=this._materialLightingPass.iNumLightProbes;var s=this._pMaterial.diffuseLightSources;var o=this._materialLightingPass._iUsesSpecular()?this._pMaterial.specularLightSources:0;var n=s|o;this._shaderLightingObject.usesLightFallOff=this._pMaterial.enableLightFallOff&&this._shaderLightingObject.profile!=a.BASELINE_CONSTRAINED;this._shaderLightingObject.numLights=t+r;this._shaderLightingObject.numPointLights=this._materialLightingPass.iNumPointLights;this._shaderLightingObject.numDirectionalLights=this._materialLightingPass.iNumDirectionalLights;this._shaderLightingObject.numLightProbes=r;this._shaderLightingObject.pointLightsOffset=this._materialLightingPass.pointLightsOffset;this._shaderLightingObject.directionalLightsOffset=this._materialLightingPass.directionalLightsOffset;this._shaderLightingObject.lightProbesOffset=this._materialLightingPass.lightProbesOffset;this._shaderLightingObject.lightPicker=this._materialLightingPass.lightPicker;this._shaderLightingObject.usesLights=t>0&&(n&i.LIGHTS)!=0;this._shaderLightingObject.usesProbes=r>0&&(n&i.PROBES)!=0;this._shaderLightingObject.usesLightsForSpecular=t>0&&(o&i.LIGHTS)!=0;this._shaderLightingObject.usesProbesForSpecular=r>0&&(o&i.PROBES)!=0;this._shaderLightingObject.usesLightsForDiffuse=t>0&&(s&i.LIGHTS)!=0;this._shaderLightingObject.usesProbesForDiffuse=r>0&&(s&i.PROBES)!=0;this._shaderLightingObject.usesShadows=this._materialLightingPass._iUsesShadows();e.prototype.pCalculateDependencies.call(this)};return t}(o);t.exports=n},{"awayjs-display/lib/materials/LightSources":327,"awayjs-renderergl/lib/compilation/ShaderCompilerBase":296,"awayjs-stagegl/lib/base/ContextGLProfile":339}],298:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-renderergl/lib/compilation/ShaderLightingCompiler");var a=e("awayjs-renderergl/lib/compilation/ShaderObjectBase");var o=function(e){s(t,e);function t(t){e.call(this,t)}t.prototype.createCompiler=function(e,t){return new i(e,t,this)};t.prototype.reset=function(){e.prototype.reset.call(this);this.numLights=0;this.usesLightFallOff=true};t.prototype.setRenderState=function(t,r,s,i){e.prototype.setRenderState.call(this,t,r,s,i);if(this.usesLights)this.updateLights();if(this.usesProbes)this.updateProbes(r)};t.prototype.updateLights=function(){var e;var t;var r=0;var s=0;var i;var a;var o=0;var n=this.usesShadows?2:1;var l;var h;this.ambientR=this.ambientG=this.ambientB=0;l=this.lightVertexConstantIndex;s=this.lightFragmentConstantIndex;var p=0;var u=this.lightPicker.directionalLights;h=this.directionalLightsOffset;i=this.lightPicker.directionalLights.length;if(h>i){p=1;h-=i}for(;p<n;++p){if(p)u=this.lightPicker.castingDirectionalLights;i=u.length;if(i>this.numDirectionalLights)i=this.numDirectionalLights;for(r=0;r<i;++r){e=u[h+r];a=e.sceneDirection;this.ambientR+=e._iAmbientR;this.ambientG+=e._iAmbientG;this.ambientB+=e._iAmbientB;if(this.usesTangentSpace){var c=-a.x;var d=-a.y;var f=-a.z;this.vertexConstantData[l++]=this._pInverseSceneMatrix[0]*c+this._pInverseSceneMatrix[4]*d+this._pInverseSceneMatrix[8]*f;this.vertexConstantData[l++]=this._pInverseSceneMatrix[1]*c+this._pInverseSceneMatrix[5]*d+this._pInverseSceneMatrix[9]*f;this.vertexConstantData[l++]=this._pInverseSceneMatrix[2]*c+this._pInverseSceneMatrix[6]*d+this._pInverseSceneMatrix[10]*f;this.vertexConstantData[l++]=1}else{this.fragmentConstantData[s++]=-a.x;this.fragmentConstantData[s++]=-a.y;this.fragmentConstantData[s++]=-a.z;this.fragmentConstantData[s++]=1}this.fragmentConstantData[s++]=e._iDiffuseR;this.fragmentConstantData[s++]=e._iDiffuseG;this.fragmentConstantData[s++]=e._iDiffuseB;this.fragmentConstantData[s++]=1;this.fragmentConstantData[s++]=e._iSpecularR;this.fragmentConstantData[s++]=e._iSpecularG;this.fragmentConstantData[s++]=e._iSpecularB;this.fragmentConstantData[s++]=1;if(++o==this.numDirectionalLights){r=i;p=n}}}if(this.numDirectionalLights>o){r=s+(this.numDirectionalLights-o)*12;while(s<r)this.fragmentConstantData[s++]=0}o=0;var y=this.lightPicker.pointLights;h=this.pointLightsOffset;i=this.lightPicker.pointLights.length;if(h>i){p=1;h-=i}else{p=0}for(;p<n;++p){if(p)y=this.lightPicker.castingPointLights;i=y.length;for(r=0;r<i;++r){t=y[h+r];a=t.scenePosition;this.ambientR+=t._iAmbientR;this.ambientG+=t._iAmbientG;this.ambientB+=t._iAmbientB;if(this.usesTangentSpace){c=a.x;d=a.y;f=a.z;this.vertexConstantData[l++]=this._pInverseSceneMatrix[0]*c+this._pInverseSceneMatrix[4]*d+this._pInverseSceneMatrix[8]*f+this._pInverseSceneMatrix[12];this.vertexConstantData[l++]=this._pInverseSceneMatrix[1]*c+this._pInverseSceneMatrix[5]*d+this._pInverseSceneMatrix[9]*f+this._pInverseSceneMatrix[13];this.vertexConstantData[l++]=this._pInverseSceneMatrix[2]*c+this._pInverseSceneMatrix[6]*d+this._pInverseSceneMatrix[10]*f+this._pInverseSceneMatrix[14];this.vertexConstantData[l++]=1}else if(!this.usesGlobalPosFragment){this.vertexConstantData[l++]=a.x;this.vertexConstantData[l++]=a.y;this.vertexConstantData[l++]=a.z;this.vertexConstantData[l++]=1}else{this.fragmentConstantData[s++]=a.x;this.fragmentConstantData[s++]=a.y;this.fragmentConstantData[s++]=a.z;this.fragmentConstantData[s++]=1}this.fragmentConstantData[s++]=t._iDiffuseR;this.fragmentConstantData[s++]=t._iDiffuseG;this.fragmentConstantData[s++]=t._iDiffuseB;var m=t._pRadius;this.fragmentConstantData[s++]=m*m;this.fragmentConstantData[s++]=t._iSpecularR;this.fragmentConstantData[s++]=t._iSpecularG;this.fragmentConstantData[s++]=t._iSpecularB;this.fragmentConstantData[s++]=t._pFallOffFactor;if(++o==this.numPointLights){r=i;p=n}}}if(this.numPointLights>o){r=s+(o-this.numPointLights)*12;for(;s<r;++s)this.fragmentConstantData[s]=0}};t.prototype.updateProbes=function(e){var t;var r=this.lightPicker.lightProbes;var s=this.lightPicker.lightProbeWeights;var i=r.length-this.lightProbesOffset;var a=this.usesProbesForDiffuse;var o=this.usesProbesForSpecular;if(!(a||o))return;if(i>this.numLightProbes)i=this.numLightProbes;for(var n=0;n<i;++n){t=r[this.lightProbesOffset+n];if(a)e.activateCubeTexture(this.lightProbeDiffuseIndices[n],t.diffuseMap);if(o)e.activateCubeTexture(this.lightProbeSpecularIndices[n],t.specularMap)}for(n=0;n<i;++n)this.fragmentConstantData[this.probeWeightsIndex+n]=s[this.lightProbesOffset+n]};return t}(a);t.exports=o},{"awayjs-renderergl/lib/compilation/ShaderLightingCompiler":297,"awayjs-renderergl/lib/compilation/ShaderObjectBase":299}],299:[function(e,t,r){var s=e("awayjs-display/lib/base/TriangleSubGeometry");var i=e("awayjs-stagegl/lib/base/ContextGLTriangleFace");var a=e("awayjs-renderergl/lib/compilation/ShaderCompilerBase");var o=function(){function e(e){this._defaultCulling=i.BACK;this._pInverseSceneMatrix=new Array;this.ambientR=255;this.ambientG=255;this.ambientB=255;this.usesGlobalPosFragment=false;this.vertexConstantData=new Array;this.fragmentConstantData=new Array;this.profile=e}e.prototype.createCompiler=function(e,t){return new a(e,t,this)};e.prototype.reset=function(){this.projectionDependencies=0;this.normalDependencies=0;this.viewDirDependencies=0;this.uvDependencies=0;this.secondaryUVDependencies=0;this.globalPosDependencies=0;this.tangentDependencies=0;this.usesGlobalPosFragment=false;this.usesFragmentAnimation=false;this.usesTangentSpace=false;this.outputsNormals=false;this.outputsTangentNormals=false};e.prototype.pInitRegisterIndices=function(){this.commonsDataIndex=-1;this.cameraPositionIndex=-1;this.uvBufferIndex=-1;this.uvTransformIndex=-1;this.secondaryUVBufferIndex=-1;this.normalBufferIndex=-1;this.tangentBufferIndex=-1;this.sceneMatrixIndex=-1;this.sceneNormalMatrixIndex=-1};e.prototype.initConstantData=function(e,t,r,s,i){this.numUsedVertexConstants=e.numUsedVertexConstants;this.numUsedFragmentConstants=e.numUsedFragmentConstants;this.numUsedStreams=e.numUsedStreams;this.numUsedTextures=e.numUsedTextures;this.numUsedVaryings=e.numUsedVaryings;this.numUsedFragmentConstants=e.numUsedFragmentConstants;this.animatableAttributes=t;this.animationTargetRegisters=r;this.uvSource=s;this.uvTarget=i;this.vertexConstantData.length=this.numUsedVertexConstants*4;this.fragmentConstantData.length=this.numUsedFragmentConstants*4;this.fragmentConstantData[this.commonsDataIndex]=.5;this.fragmentConstantData[this.commonsDataIndex+1]=0;this.fragmentConstantData[this.commonsDataIndex+2]=1/255;this.fragmentConstantData[this.commonsDataIndex+3]=1;if(this.uvTransformIndex>=0){this.vertexConstantData[this.uvTransformIndex]=1;this.vertexConstantData[this.uvTransformIndex+1]=0;this.vertexConstantData[this.uvTransformIndex+2]=0;this.vertexConstantData[this.uvTransformIndex+3]=0;this.vertexConstantData[this.uvTransformIndex+4]=0;this.vertexConstantData[this.uvTransformIndex+5]=1;this.vertexConstantData[this.uvTransformIndex+6]=0;this.vertexConstantData[this.uvTransformIndex+7]=0}if(this.cameraPositionIndex>=0)this.vertexConstantData[this.cameraPositionIndex+3]=1};e.prototype.iActivate=function(e,t){e.context.setCulling(this.useBothSides?i.NONE:this._defaultCulling,t.projection.coordinateSystem);if(!this.usesTangentSpace&&this.cameraPositionIndex>=0){var r=t.scenePosition;this.vertexConstantData[this.cameraPositionIndex]=r.x;this.vertexConstantData[this.cameraPositionIndex+1]=r.y;this.vertexConstantData[this.cameraPositionIndex+2]=r.z}};e.prototype.iDeactivate=function(e){};e.prototype.setRenderState=function(e,t,r,i){var a=t.context;if(e.materialOwner.animator)e.materialOwner.animator.setRenderState(this,e,t,r,this.numUsedVertexConstants,this.numUsedStreams);if(this.uvBufferIndex>=0)t.activateBuffer(this.uvBufferIndex,e.getVertexData(s.UV_DATA),e.getVertexOffset(s.UV_DATA),s.UV_FORMAT);if(this.secondaryUVBufferIndex>=0)t.activateBuffer(this.secondaryUVBufferIndex,e.getVertexData(s.SECONDARY_UV_DATA),e.getVertexOffset(s.SECONDARY_UV_DATA),s.SECONDARY_UV_FORMAT);if(this.normalBufferIndex>=0)t.activateBuffer(this.normalBufferIndex,e.getVertexData(s.NORMAL_DATA),e.getVertexOffset(s.NORMAL_DATA),s.NORMAL_FORMAT);if(this.tangentBufferIndex>=0)t.activateBuffer(this.tangentBufferIndex,e.getVertexData(s.TANGENT_DATA),e.getVertexOffset(s.TANGENT_DATA),s.TANGENT_FORMAT);if(this.usesUVTransform){var o=e.materialOwner.uvTransform.matrix;if(o){this.vertexConstantData[this.uvTransformIndex]=o.a;this.vertexConstantData[this.uvTransformIndex+1]=o.b;this.vertexConstantData[this.uvTransformIndex+3]=o.tx;this.vertexConstantData[this.uvTransformIndex+4]=o.c;this.vertexConstantData[this.uvTransformIndex+5]=o.d;this.vertexConstantData[this.uvTransformIndex+7]=o.ty}else{this.vertexConstantData[this.uvTransformIndex]=1;this.vertexConstantData[this.uvTransformIndex+1]=0;this.vertexConstantData[this.uvTransformIndex+3]=0;this.vertexConstantData[this.uvTransformIndex+4]=0;this.vertexConstantData[this.uvTransformIndex+5]=1;this.vertexConstantData[this.uvTransformIndex+7]=0}}if(this.sceneNormalMatrixIndex>=0)e.sourceEntity.inverseSceneTransform.copyRawDataTo(this.vertexConstantData,this.sceneNormalMatrixIndex,false);if(this.usesTangentSpace&&this.cameraPositionIndex>=0){e.sourceEntity.inverseSceneTransform.copyRawDataTo(this._pInverseSceneMatrix);var n=r.scenePosition;var l=n.x;var h=n.y;var p=n.z;this.vertexConstantData[this.cameraPositionIndex]=this._pInverseSceneMatrix[0]*l+this._pInverseSceneMatrix[4]*h+this._pInverseSceneMatrix[8]*p+this._pInverseSceneMatrix[12];this.vertexConstantData[this.cameraPositionIndex+1]=this._pInverseSceneMatrix[1]*l+this._pInverseSceneMatrix[5]*h+this._pInverseSceneMatrix[9]*p+this._pInverseSceneMatrix[13];this.vertexConstantData[this.cameraPositionIndex+2]=this._pInverseSceneMatrix[2]*l+this._pInverseSceneMatrix[6]*h+this._pInverseSceneMatrix[10]*p+this._pInverseSceneMatrix[14]}};e.prototype.dispose=function(){};return e}();t.exports=o},{"awayjs-display/lib/base/TriangleSubGeometry":323,"awayjs-renderergl/lib/compilation/ShaderCompilerBase":296,"awayjs-stagegl/lib/base/ContextGLTriangleFace":342}],300:[function(e,t,r){var s=e("awayjs-renderergl/lib/compilation/RegisterPool");var i=e("awayjs-renderergl/lib/compilation/ShaderRegisterElement");var a=function(){function e(e){this._numUsedVertexConstants=0;
this._numUsedFragmentConstants=0;this._numUsedStreams=0;this._numUsedTextures=0;this._numUsedVaryings=0;this._profile=e}e.prototype.reset=function(){this._fragmentTempCache=new s("ft",8,false);this._vertexTempCache=new s("vt",8,false);this._varyingCache=new s("v",8);this._textureCache=new s("fs",8);this._vertexAttributesCache=new s("va",8);this._fragmentConstantsCache=new s("fc",28);this._vertexConstantsCache=new s("vc",128);this._fragmentOutputRegister=new i("oc",-1);this._vertexOutputRegister=new i("op",-1);this._numUsedVertexConstants=0;this._numUsedStreams=0;this._numUsedTextures=0;this._numUsedVaryings=0;this._numUsedFragmentConstants=0;var e;for(e=0;e<this._vertexAttributesOffset;++e)this.getFreeVertexAttribute();for(e=0;e<this._vertexConstantOffset;++e)this.getFreeVertexConstant();for(e=0;e<this._varyingsOffset;++e)this.getFreeVarying();for(e=0;e<this._fragmentConstantOffset;++e)this.getFreeFragmentConstant()};e.prototype.dispose=function(){this._fragmentTempCache.dispose();this._vertexTempCache.dispose();this._varyingCache.dispose();this._fragmentConstantsCache.dispose();this._vertexAttributesCache.dispose();this._fragmentTempCache=null;this._vertexTempCache=null;this._varyingCache=null;this._fragmentConstantsCache=null;this._vertexAttributesCache=null;this._fragmentOutputRegister=null;this._vertexOutputRegister=null};e.prototype.addFragmentTempUsages=function(e,t){this._fragmentTempCache.addUsage(e,t)};e.prototype.removeFragmentTempUsage=function(e){this._fragmentTempCache.removeUsage(e)};e.prototype.addVertexTempUsages=function(e,t){this._vertexTempCache.addUsage(e,t)};e.prototype.removeVertexTempUsage=function(e){this._vertexTempCache.removeUsage(e)};e.prototype.getFreeFragmentVectorTemp=function(){return this._fragmentTempCache.requestFreeVectorReg()};e.prototype.getFreeFragmentSingleTemp=function(){return this._fragmentTempCache.requestFreeRegComponent()};e.prototype.getFreeVarying=function(){++this._numUsedVaryings;return this._varyingCache.requestFreeVectorReg()};e.prototype.getFreeFragmentConstant=function(){++this._numUsedFragmentConstants;return this._fragmentConstantsCache.requestFreeVectorReg()};e.prototype.getFreeVertexConstant=function(){++this._numUsedVertexConstants;return this._vertexConstantsCache.requestFreeVectorReg()};e.prototype.getFreeVertexVectorTemp=function(){return this._vertexTempCache.requestFreeVectorReg()};e.prototype.getFreeVertexSingleTemp=function(){return this._vertexTempCache.requestFreeRegComponent()};e.prototype.getFreeVertexAttribute=function(){++this._numUsedStreams;return this._vertexAttributesCache.requestFreeVectorReg()};e.prototype.getFreeTextureReg=function(){++this._numUsedTextures;return this._textureCache.requestFreeVectorReg()};Object.defineProperty(e.prototype,"vertexConstantOffset",{get:function(){return this._vertexConstantOffset},set:function(e){this._vertexConstantOffset=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"vertexAttributesOffset",{get:function(){return this._vertexAttributesOffset},set:function(e){this._vertexAttributesOffset=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"varyingsOffset",{get:function(){return this._varyingsOffset},set:function(e){this._varyingsOffset=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"fragmentConstantOffset",{get:function(){return this._fragmentConstantOffset},set:function(e){this._fragmentConstantOffset=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"fragmentOutputRegister",{get:function(){return this._fragmentOutputRegister},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"numUsedVertexConstants",{get:function(){return this._numUsedVertexConstants},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"numUsedFragmentConstants",{get:function(){return this._numUsedFragmentConstants},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"numUsedStreams",{get:function(){return this._numUsedStreams},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"numUsedTextures",{get:function(){return this._numUsedTextures},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"numUsedVaryings",{get:function(){return this._numUsedVaryings},enumerable:true,configurable:true});return e}();t.exports=a},{"awayjs-renderergl/lib/compilation/RegisterPool":295,"awayjs-renderergl/lib/compilation/ShaderRegisterElement":302}],301:[function(e,t,r){var s=function(){function e(){}return e}();t.exports=s},{}],302:[function(e,t,r){var s=function(){function e(t,r,s){if(s===void 0){s=-1}this._component=s;this._regName=t;this._index=r;this._toStr=this._regName;if(this._index>=0)this._toStr+=this._index;if(s>-1)this._toStr+="."+e.COMPONENTS[s]}e.prototype.toString=function(){return this._toStr};Object.defineProperty(e.prototype,"regName",{get:function(){return this._regName},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:true,configurable:true});e.COMPONENTS=["x","y","z","w"];return e}();t.exports=s},{}],303:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/events/Event");var a=function(e){s(t,e);function t(t){e.call(this,t)}t.SHADER_INVALIDATED="ShaderInvalidated";return t}(i);t.exports=a},{"awayjs-core/lib/events/Event":313}],304:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-display/lib/materials/MaterialBase");var a=function(e){s(t,e);function t(){e.apply(this,arguments)}t.prototype._iGetVertexCode=function(e,t,r){return""};t.prototype._iGetFragmentCode=function(e,t,r){return""};return t}(i);t.exports=a},{"awayjs-display/lib/materials/MaterialBase":328}],305:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/geom/Matrix3DUtils");var a=e("awayjs-display/lib/base/TriangleSubGeometry");var o=e("awayjs-stagegl/lib/base/ContextGLProgramType");var n=e("awayjs-renderergl/lib/materials/MaterialGLBase");var l=function(e){s(t,e);function t(){e.apply(this,arguments)}t.prototype._iGetVertexCode=function(e,t,r){var s="";var i=e.globalPosDependencies>0?r.globalPositionVertex:r.localPosition;var a=t.getFreeVertexConstant();t.getFreeVertexConstant();t.getFreeVertexConstant();t.getFreeVertexConstant();e.viewMatrixIndex=a.index*4;if(e.projectionDependencies>0){r.projectionFragment=t.getFreeVarying();var o=t.getFreeVertexVectorTemp();s+="m44 "+o+", "+i+", "+a+"\n"+"mov "+r.projectionFragment+", "+o+"\n"+"mov op, "+o+"\n"}else{s+="m44 op, "+i+", "+a+"\n"}return s};t.prototype._iRenderPass=function(t,r,s,n,l){e.prototype._iRenderPass.call(this,t,r,s,n,l);var h=t.shaderObject;if(h.sceneMatrixIndex>=0){r.sourceEntity.getRenderSceneTransform(n).copyRawDataTo(h.vertexConstantData,h.sceneMatrixIndex,true);l.copyRawDataTo(h.vertexConstantData,h.viewMatrixIndex,true)}else{var p=i.CALCULATION_MATRIX;p.copyFrom(r.sourceEntity.getRenderSceneTransform(n));p.append(l);p.copyRawDataTo(h.vertexConstantData,h.viewMatrixIndex,true)}var u=s.context;u.setProgramConstantsFromArray(o.VERTEX,0,h.vertexConstantData,h.numUsedVertexConstants);u.setProgramConstantsFromArray(o.FRAGMENT,0,h.fragmentConstantData,h.numUsedFragmentConstants);s.activateBuffer(0,r.getVertexData(a.POSITION_DATA),r.getVertexOffset(a.POSITION_DATA),a.POSITION_FORMAT);u.drawTriangles(s.getIndexBuffer(r.getIndexData()),0,r.numTriangles)};return t}(n);t.exports=l},{"awayjs-core/lib/geom/Matrix3DUtils":316,"awayjs-display/lib/base/TriangleSubGeometry":323,"awayjs-renderergl/lib/materials/MaterialGLBase":304,"awayjs-stagegl/lib/base/ContextGLProgramType":340}],306:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/errors/AbstractMethodError");var a=e("awayjs-renderergl/lib/passes/MaterialPassGLBase");var o=function(e){s(t,e);function t(){e.call(this);this._pNumPointLights=0;this._pNumDirectionalLights=0;this._pNumLightProbes=0;this._directionalLightsOffset=0;this._pointLightsOffset=0;this._lightProbesOffset=0}Object.defineProperty(t.prototype,"directionalLightsOffset",{get:function(){return this._directionalLightsOffset},set:function(e){this._directionalLightsOffset=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"pointLightsOffset",{get:function(){return this._pointLightsOffset},set:function(e){this._pointLightsOffset=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lightProbesOffset",{get:function(){return this._lightProbesOffset},set:function(e){this._lightProbesOffset=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"iNumPointLights",{get:function(){return this._pNumPointLights},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"iNumDirectionalLights",{get:function(){return this._pNumDirectionalLights},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"iNumLightProbes",{get:function(){return this._pNumLightProbes},enumerable:true,configurable:true});t.prototype._iUsesSpecular=function(){throw new i};t.prototype._iUsesShadows=function(){throw new i};t.prototype._iGetPreLightingVertexCode=function(e,t,r){throw new i};t.prototype._iGetPreLightingFragmentCode=function(e,t,r){throw new i};t.prototype._iGetPerLightDiffuseFragmentCode=function(e,t,r,s,a){throw new i};t.prototype._iGetPerLightSpecularFragmentCode=function(e,t,r,s,a){throw new i};t.prototype._iGetPerProbeDiffuseFragmentCode=function(e,t,r,s,a){throw new i};t.prototype._iGetPerProbeSpecularFragmentCode=function(e,t,r,s,a){throw new i};t.prototype._iGetPostLightingVertexCode=function(e,t,r){throw new i};t.prototype._iGetPostLightingFragmentCode=function(e,t,r){throw new i};return t}(a);t.exports=o},{"awayjs-core/lib/errors/AbstractMethodError":309,"awayjs-renderergl/lib/passes/MaterialPassGLBase":307}],307:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/library/NamedAssetBase");var a=e("awayjs-core/lib/errors/ArgumentError");var o=e("awayjs-core/lib/events/Event");var n=e("awayjs-display/lib/base/BlendMode");var l=e("awayjs-stagegl/lib/base/ContextGLBlendFactor");var h=e("awayjs-stagegl/lib/base/ContextGLCompareMode");var p=e("awayjs-renderergl/lib/compilation/ShaderObjectBase");var u=function(e){s(t,e);function t(){var t=this;e.call(this);this._materialPassData=new Array;this._preserveAlpha=true;this._forceSeparateMVP=false;this._depthCompareMode=h.LESS_EQUAL;this._blendFactorSource=l.ONE;this._blendFactorDest=l.ZERO;this._pEnableBlending=false;this._writeDepth=true;this._onLightsChangeDelegate=function(e){return t.onLightsChange(e)}}Object.defineProperty(t.prototype,"preserveAlpha",{get:function(){return this._preserveAlpha},set:function(e){if(this._preserveAlpha==e)return;this._preserveAlpha=e;this._pInvalidatePass()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"forceSeparateMVP",{get:function(){return this._forceSeparateMVP},set:function(e){if(this._forceSeparateMVP==e)return;this._forceSeparateMVP=e;this._pInvalidatePass()},enumerable:true,configurable:true});t.prototype.createShaderObject=function(e){return new p(e)};Object.defineProperty(t.prototype,"writeDepth",{get:function(){return this._writeDepth},set:function(e){this._writeDepth=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"depthCompareMode",{get:function(){return this._depthCompareMode},set:function(e){this._depthCompareMode=e},enumerable:true,configurable:true});t.prototype.dispose=function(){if(this._pLightPicker)this._pLightPicker.removeEventListener(o.CHANGE,this._onLightsChangeDelegate);while(this._materialPassData.length)this._materialPassData[0].dispose();this._materialPassData=null};t.prototype._iRender=function(e,t,r,s,i){this.setRenderState(e,t,r,s,i)};t.prototype.setRenderState=function(e,t,r,s,i){e.shaderObject.setRenderState(t,r,s,i)};t.prototype.setBlendMode=function(e){switch(e){case n.NORMAL:this._blendFactorSource=l.ONE;this._blendFactorDest=l.ZERO;this._pEnableBlending=false;break;case n.LAYER:this._blendFactorSource=l.SOURCE_ALPHA;this._blendFactorDest=l.ONE_MINUS_SOURCE_ALPHA;this._pEnableBlending=true;break;case n.MULTIPLY:this._blendFactorSource=l.ZERO;this._blendFactorDest=l.SOURCE_COLOR;this._pEnableBlending=true;break;case n.ADD:this._blendFactorSource=l.SOURCE_ALPHA;this._blendFactorDest=l.ONE;this._pEnableBlending=true;break;case n.ALPHA:this._blendFactorSource=l.ZERO;this._blendFactorDest=l.SOURCE_ALPHA;this._pEnableBlending=true;break;default:throw new a("Unsupported blend mode!")}};t.prototype._iActivate=function(e,t,r){t.context.setDepthTest(this._writeDepth&&!this._pEnableBlending,this._depthCompareMode);if(this._pEnableBlending)t.context.setBlendFactors(this._blendFactorSource,this._blendFactorDest);t.activateMaterialPass(e,r)};t.prototype._iDeactivate=function(e,t){t.deactivateMaterialPass(e);t.context.setDepthTest(true,h.LESS_EQUAL)};t.prototype._pInvalidatePass=function(){var e=this._materialPassData.length;for(var t=0;t<e;t++)this._materialPassData[t].invalidate();this.dispatchEvent(new o(o.CHANGE))};Object.defineProperty(t.prototype,"lightPicker",{get:function(){return this._pLightPicker},set:function(e){if(this._pLightPicker)this._pLightPicker.removeEventListener(o.CHANGE,this._onLightsChangeDelegate);this._pLightPicker=e;if(this._pLightPicker)this._pLightPicker.addEventListener(o.CHANGE,this._onLightsChangeDelegate);this.pUpdateLights()},enumerable:true,configurable:true});t.prototype.onLightsChange=function(e){this.pUpdateLights()};t.prototype.pUpdateLights=function(){};t.prototype._iIncludeDependencies=function(e){if(this._forceSeparateMVP)e.globalPosDependencies++;e.outputsNormals=this._pOutputsNormals(e);e.outputsTangentNormals=e.outputsNormals&&this._pOutputsTangentNormals(e);e.usesTangentSpace=e.outputsTangentNormals&&this._pUsesTangentSpace(e);if(!e.usesTangentSpace&&e.viewDirDependencies>0)e.globalPosDependencies++};t.prototype._iInitConstantData=function(e){};t.prototype._iGetPreLightingVertexCode=function(e,t,r){return""};t.prototype._iGetPreLightingFragmentCode=function(e,t,r){return""};t.prototype._iGetVertexCode=function(e,t,r){return""};t.prototype._iGetFragmentCode=function(e,t,r){return""};t.prototype._iGetNormalVertexCode=function(e,t,r){return""};t.prototype._iGetNormalFragmentCode=function(e,t,r){return""};t.prototype._pOutputsNormals=function(e){return false};t.prototype._pOutputsTangentNormals=function(e){return false};t.prototype._pUsesTangentSpace=function(e){return false};t.prototype._iAddMaterialPassData=function(e){this._materialPassData.push(e);return e};t.prototype._iRemoveMaterialPassData=function(e){this._materialPassData.splice(this._materialPassData.indexOf(e),1);return e};return t}(i);t.exports=u},{"awayjs-core/lib/errors/ArgumentError":310,"awayjs-core/lib/events/Event":313,"awayjs-core/lib/library/NamedAssetBase":319,"awayjs-display/lib/base/BlendMode":320,"awayjs-renderergl/lib/compilation/ShaderObjectBase":299,"awayjs-stagegl/lib/base/ContextGLBlendFactor":337,"awayjs-stagegl/lib/base/ContextGLCompareMode":338}],308:[function(e,t,r){var s=e("awayjs-stagegl/lib/base/ContextGLTextureFormat");var i=function(){function e(){}e.getTex2DSampleCode=function(t,r,s,i,a,o,n,l,h){if(l===void 0){l=null}if(h===void 0){h=null}var p=h||(o?"wrap":"clamp");var u=e.getFormatStringForTexture(i);var c=n&&i.hasMipmaps;var d=a?c?"linear,miplinear":"linear":c?"nearest,mipnearest":"nearest";if(l==null)l=r.uvVarying;return"tex "+t+", "+l+", "+s+" <2d,"+d+","+u+p+">\n"};e.getTexCubeSampleCode=function(t,r,s,i,a,o){var n;var l=e.getFormatStringForTexture(s);var h=a&&s.hasMipmaps;var n=i?h?"linear,miplinear":"linear":h?"nearest,mipnearest":"nearest";return"tex "+t+", "+o+", "+r+" <cube,"+l+n+">\n"};e.getFormatStringForTexture=function(e){switch(e.format){case s.COMPRESSED:return"dxt1,";break;case s.COMPRESSED_ALPHA:return"dxt5,";break;default:return""}};return e}();t.exports=i},{"awayjs-stagegl/lib/base/ContextGLTextureFormat":341}],309:[function(e,t,r){t.exports=e(4)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/AbstractMethodError.js":4,"awayjs-core/lib/errors/Error":311}],310:[function(e,t,r){t.exports=e(5)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/ArgumentError.js":5,"awayjs-core/lib/errors/Error":311}],311:[function(e,t,r){t.exports=e(6)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/Error.js":6}],312:[function(e,t,r){t.exports=e(7)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/AssetEvent.js":7,"awayjs-core/lib/events/Event":313}],313:[function(e,t,r){t.exports=e(8)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/Event.js":8}],314:[function(e,t,r){t.exports=e(9)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/EventDispatcher.js":9}],315:[function(e,t,r){t.exports=e(144)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Matrix3D.js":144,"awayjs-core/lib/errors/ArgumentError":310,"awayjs-core/lib/geom/Orientation3D":317,"awayjs-core/lib/geom/Vector3D":318}],316:[function(e,t,r){t.exports=e(145)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Matrix3DUtils.js":145,"awayjs-core/lib/geom/Matrix3D":315,"awayjs-core/lib/geom/Vector3D":318}],317:[function(e,t,r){t.exports=e(146)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Orientation3D.js":146}],318:[function(e,t,r){t.exports=e(20)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Vector3D.js":20}],319:[function(e,t,r){t.exports=e(33)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/NamedAssetBase.js":33,"awayjs-core/lib/errors/AbstractMethodError":309,"awayjs-core/lib/events/AssetEvent":312,"awayjs-core/lib/events/EventDispatcher":314}],320:[function(e,t,r){t.exports=e(62)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/BlendMode.js":62}],321:[function(e,t,r){t.exports=e(69)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/SubGeometryBase.js":69,"awayjs-core/lib/errors/AbstractMethodError":329,"awayjs-core/lib/library/NamedAssetBase":336,"awayjs-display/lib/events/SubGeometryEvent":326}],322:[function(e,t,r){t.exports=e(70)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/SubMeshBase.js":70,"awayjs-core/lib/errors/AbstractMethodError":329,"awayjs-core/lib/library/NamedAssetBase":336}],323:[function(e,t,r){t.exports=e(72)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/TriangleSubGeometry.js":72,"awayjs-core/lib/geom/Vector3D":334,"awayjs-display/lib/base/SubGeometryBase":321,"awayjs-display/lib/base/TriangleSubMesh":324,"awayjs-display/lib/events/SubGeometryEvent":326}],324:[function(e,t,r){t.exports=e(73)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/TriangleSubMesh.js":73,"awayjs-core/lib/library/AssetType":335,"awayjs-display/lib/base/SubMeshBase":322}],325:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/events/Event");var a=function(e){s(t,e);function t(t){e.call(this,t)}t.SIZE_CHANGED="sizeChanged";return t}(i);t.exports=a},{"awayjs-core/lib/events/Event":332}],326:[function(e,t,r){t.exports=e(94)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/SubGeometryEvent.js":94,"awayjs-core/lib/events/Event":332}],327:[function(e,t,r){var s=function(){function e(){}e.LIGHTS=1;e.PROBES=2;e.ALL=3;return e}();t.exports=s},{}],328:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/events/Event");var a=e("awayjs-core/lib/library/AssetType");var o=e("awayjs-core/lib/library/NamedAssetBase");var n=e("awayjs-display/lib/base/BlendMode");var l=e("awayjs-display/lib/events/MaterialEvent");var h=function(e){s(t,e);function t(){var t=this;e.call(this);this._materialPassData=new Array;this._materialData=new Array;this._pAlphaThreshold=0;this._pAnimateUVs=false;this._enableLightFallOff=true;this._specularLightSources=1;this._diffuseLightSources=3;this._iMaterialId=0;this._iBaseScreenPassIndex=0;this._bothSides=false;this._pScreenPassesInvalid=true;this._pBlendMode=n.NORMAL;this._numPasses=0;this._mipmap=false;this._smooth=true;this._repeat=false;this._color=16777215;this._pHeight=1;this._pWidth=1;this._pRequiresBlending=false;this._iMaterialId=Number(this.id);this._owners=new Array;this._passes=new Array;this._onPassChangeDelegate=function(e){return t.onPassChange(e)};this._onLightChangeDelegate=function(e){return t.onLightsChange(e)};this.alphaPremultiplied=false}Object.defineProperty(t.prototype,"assetType",{get:function(){return a.MATERIAL},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"height",{get:function(){return this._pHeight},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"animationSet",{get:function(){return this._animationSet},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lightPicker",{get:function(){return this._pLightPicker},set:function(e){if(this._pLightPicker==e)return;if(this._pLightPicker)this._pLightPicker.removeEventListener(i.CHANGE,this._onLightChangeDelegate);this._pLightPicker=e;if(this._pLightPicker)this._pLightPicker.addEventListener(i.CHANGE,this._onLightChangeDelegate);this._pInvalidateScreenPasses()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mipmap",{get:function(){return this._mipmap},set:function(e){if(this._mipmap==e)return;this._mipmap=e;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"smooth",{get:function(){return this._smooth},set:function(e){if(this._smooth==e)return;this._smooth=e;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"repeat",{get:function(){return this._repeat},set:function(e){if(this._repeat==e)return;this._repeat=e;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(e){if(this._color==e)return;this._color=e;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"texture",{get:function(){return this._pTexture},set:function(e){if(this._pTexture==e)return;this._pTexture=e;this._pInvalidatePasses();this._pHeight=this._pTexture.height;this._pWidth=this._pTexture.width;this._pNotifySizeChanged()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"animateUVs",{get:function(){return this._pAnimateUVs},set:function(e){if(this._pAnimateUVs==e)return;this._pAnimateUVs=e;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"enableLightFallOff",{get:function(){return this._enableLightFallOff},set:function(e){if(this._enableLightFallOff==e)return;this._enableLightFallOff=e;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"diffuseLightSources",{get:function(){return this._diffuseLightSources},set:function(e){if(this._diffuseLightSources==e)return;this._diffuseLightSources=e;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"specularLightSources",{get:function(){return this._specularLightSources},set:function(e){if(this._specularLightSources==e)return;this._specularLightSources=e;this._pInvalidatePasses()},enumerable:true,configurable:true});t.prototype.dispose=function(){var e;var t;this._pClearScreenPasses();t=this._materialData.length;for(e=0;e<t;e++)this._materialData[e].dispose();this._materialData=new Array;t=this._materialPassData.length;for(e=0;e<t;e++)this._materialPassData[e].dispose();this._materialPassData=new Array};Object.defineProperty(t.prototype,"bothSides",{get:function(){return this._bothSides},set:function(e){if(this._bothSides=e)return;this._bothSides=e;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._pBlendMode},set:function(e){if(this._pBlendMode==e)return;this._pBlendMode=e;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"alphaPremultiplied",{get:function(){return this._alphaPremultiplied},set:function(e){if(this._alphaPremultiplied==e)return;this._alphaPremultiplied=e;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"alphaThreshold",{get:function(){return this._pAlphaThreshold},set:function(e){if(e<0)e=0;else if(e>1)e=1;if(this._pAlphaThreshold==e)return;this._pAlphaThreshold=e;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"requiresBlending",{get:function(){return this._pRequiresBlending},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"width",{get:function(){return this._pWidth},enumerable:true,configurable:true});t.prototype._iActivatePass=function(e,t,r){e.materialPass._iActivate(e,t,r)};t.prototype._iDeactivatePass=function(e,t){e.materialPass._iDeactivate(e,t)};t.prototype._iRenderPass=function(e,t,r,s,i){if(this._pLightPicker)this._pLightPicker.collectLights(t);e.materialPass._iRender(e,t,r,s,i)};t.prototype.iAddOwner=function(e){this._owners.push(e);var t;var r=e.animator;if(r)t=r.animationSet;if(e.animator){if(this._animationSet&&t!=this._animationSet){throw new Error("A Material instance cannot be shared across material owners with different animation sets")}else{if(this._animationSet!=t){this._animationSet=t;this.invalidateAnimation()}}}};t.prototype.iRemoveOwner=function(e){this._owners.splice(this._owners.indexOf(e),1);if(this._owners.length==0){this._animationSet=null;this.invalidateAnimation()}};Object.defineProperty(t.prototype,"iOwners",{get:function(){return this._owners},enumerable:true,configurable:true});t.prototype._iNumScreenPasses=function(){return this._numPasses};Object.defineProperty(t.prototype,"_iScreenPasses",{get:function(){return this._passes},enumerable:true,configurable:true});t.prototype._pInvalidatePasses=function(){var e=this._materialPassData.length;for(var t=0;t<e;t++)this._materialPassData[t].invalidate();this.invalidateMaterial()};t.prototype._pInvalidateScreenPasses=function(){this._pScreenPassesInvalid=true};t.prototype._pRemoveScreenPass=function(e){e.removeEventListener(i.CHANGE,this._onPassChangeDelegate);this._passes.splice(this._passes.indexOf(e),1);this._numPasses--};t.prototype._pClearScreenPasses=function(){for(var e=0;e<this._numPasses;++e)this._passes[e].removeEventListener(i.CHANGE,this._onPassChangeDelegate);this._passes.length=this._numPasses=0};t.prototype._pAddScreenPass=function(e){this._passes[this._numPasses++]=e;e.lightPicker=this._pLightPicker;e.addEventListener(i.CHANGE,this._onPassChangeDelegate);this.invalidateMaterial()};t.prototype._iAddMaterialData=function(e){this._materialData.push(e);return e};t.prototype._iRemoveMaterialData=function(e){this._materialData.splice(this._materialData.indexOf(e),1);return e};t.prototype._iUpdateMaterial=function(){};t.prototype.onPassChange=function(e){this.invalidateMaterial()};t.prototype.invalidateAnimation=function(){var e=this._materialData.length;for(var t=0;t<e;t++)this._materialData[t].invalidateAnimation()};t.prototype.invalidateMaterial=function(){var e=this._materialData.length;for(var t=0;t<e;t++)this._materialData[t].invalidateMaterial()};t.prototype.onLightsChange=function(e){this._pInvalidateScreenPasses()};t.prototype._pNotifySizeChanged=function(){if(!this._sizeChanged)this._sizeChanged=new l(l.SIZE_CHANGED);this.dispatchEvent(this._sizeChanged)};t.prototype._iAddMaterialPassData=function(e){this._materialPassData.push(e);return e};t.prototype._iRemoveMaterialPassData=function(e){this._materialPassData.splice(this._materialPassData.indexOf(e),1);return e};return t}(o);t.exports=h},{"awayjs-core/lib/events/Event":332,"awayjs-core/lib/library/AssetType":335,"awayjs-core/lib/library/NamedAssetBase":336,"awayjs-display/lib/base/BlendMode":320,"awayjs-display/lib/events/MaterialEvent":325}],329:[function(e,t,r){t.exports=e(4)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/AbstractMethodError.js":4,"awayjs-core/lib/errors/Error":330}],330:[function(e,t,r){t.exports=e(6)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/Error.js":6}],331:[function(e,t,r){t.exports=e(7)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/AssetEvent.js":7,"awayjs-core/lib/events/Event":332}],332:[function(e,t,r){t.exports=e(8)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/Event.js":8}],333:[function(e,t,r){t.exports=e(9)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/EventDispatcher.js":9}],334:[function(e,t,r){t.exports=e(20)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Vector3D.js":20}],335:[function(e,t,r){t.exports=e(27)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/AssetType.js":27}],336:[function(e,t,r){t.exports=e(33)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/NamedAssetBase.js":33,"awayjs-core/lib/errors/AbstractMethodError":329,"awayjs-core/lib/events/AssetEvent":331,"awayjs-core/lib/events/EventDispatcher":333}],337:[function(e,t,r){var s=function(){function e(){}e.DESTINATION_ALPHA="destinationAlpha";e.DESTINATION_COLOR="destinationColor";e.ONE="one";e.ONE_MINUS_DESTINATION_ALPHA="oneMinusDestinationAlpha";e.ONE_MINUS_DESTINATION_COLOR="oneMinusDestinationColor";e.ONE_MINUS_SOURCE_ALPHA="oneMinusSourceAlpha";e.ONE_MINUS_SOURCE_COLOR="oneMinusSourceColor";e.SOURCE_ALPHA="sourceAlpha";e.SOURCE_COLOR="sourceColor";e.ZERO="zero";return e}();t.exports=s},{}],338:[function(e,t,r){var s=function(){function e(){}e.ALWAYS="always";e.EQUAL="equal";e.GREATER="greater";e.GREATER_EQUAL="greaterEqual";e.LESS="less";e.LESS_EQUAL="lessEqual";e.NEVER="never";e.NOT_EQUAL="notEqual";return e}();t.exports=s},{}],339:[function(e,t,r){var s=function(){function e(){}e.BASELINE="baseline";e.BASELINE_CONSTRAINED="baselineConstrained";e.BASELINE_EXTENDED="baselineExtended";return e}();t.exports=s},{}],340:[function(e,t,r){var s=function(){function e(){}e.FRAGMENT="fragment";e.VERTEX="vertex";return e}();t.exports=s},{}],341:[function(e,t,r){var s=function(){function e(){}e.BGRA="bgra";e.BGRA_PACKED="bgraPacked4444";e.BGR_PACKED="bgrPacked565";e.COMPRESSED="compressed";e.COMPRESSED_ALPHA="compressedAlpha";return e}();t.exports=s},{}],342:[function(e,t,r){var s=function(){function e(){}e.BACK="back";e.FRONT="front";
e.FRONT_AND_BACK="frontAndBack";e.NONE="none";return e}();t.exports=s},{}],343:[function(e,t,r){t.exports=e(338)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-stagegl/lib/base/ContextGLCompareMode.js":338}],344:[function(e,t,r){var s=function(){function e(){}e.MIPLINEAR="miplinear";e.MIPNEAREST="mipnearest";e.MIPNONE="mipnone";return e}();t.exports=s},{}],345:[function(e,t,r){var s=function(){function e(){}e.LINEAR="linear";e.NEAREST="nearest";return e}();t.exports=s},{}],346:[function(e,t,r){var s=function(){function e(){}e.CLAMP="clamp";e.REPEAT="repeat";return e}();t.exports=s},{}],347:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/geom/ColorTransform");var a=e("awayjs-core/lib/geom/Matrix3D");var o=e("awayjs-core/lib/geom/Vector3D");var n=e("awayjs-core/lib/net/URLLoaderDataFormat");var l=e("awayjs-core/lib/net/URLRequest");var h=e("awayjs-core/lib/library/AssetType");var p=e("awayjs-core/lib/parsers/ParserBase");var u=e("awayjs-core/lib/parsers/ParserUtils");var c=e("awayjs-core/lib/projections/PerspectiveProjection");var d=e("awayjs-core/lib/projections/OrthographicProjection");var f=e("awayjs-core/lib/projections/OrthographicOffCenterProjection");var y=e("awayjs-core/lib/textures/BitmapCubeTexture");var m=e("awayjs-core/lib/textures/ImageCubeTexture");var _=e("awayjs-core/lib/textures/ImageTexture");var b=e("awayjs-core/lib/utils/ByteArray");var g=e("awayjs-display/lib/containers/DisplayObjectContainer");var w=e("awayjs-display/lib/base/BlendMode");var v=e("awayjs-display/lib/base/Geometry");var j=e("awayjs-display/lib/base/TriangleSubGeometry");var x=e("awayjs-display/lib/entities/DirectionalLight");var P=e("awayjs-display/lib/entities/PointLight");var D=e("awayjs-display/lib/entities/Camera");var T=e("awayjs-display/lib/entities/Mesh");var A=e("awayjs-display/lib/entities/Skybox");var C=e("awayjs-display/lib/materials/lightpickers/StaticLightPicker");var E=e("awayjs-display/lib/materials/shadowmappers/CubeMapShadowMapper");var S=e("awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper");var M=e("awayjs-display/lib/prefabs/PrefabBase");var O=e("awayjs-display/lib/prefabs/PrimitiveCapsulePrefab");var R=e("awayjs-display/lib/prefabs/PrimitiveConePrefab");var I=e("awayjs-display/lib/prefabs/PrimitiveCubePrefab");var U=e("awayjs-display/lib/prefabs/PrimitiveCylinderPrefab");var L=e("awayjs-display/lib/prefabs/PrimitivePlanePrefab");var B=e("awayjs-display/lib/prefabs/PrimitiveSpherePrefab");var N=e("awayjs-display/lib/prefabs/PrimitiveTorusPrefab");var F=e("awayjs-renderergl/lib/animators/VertexAnimationSet");var V=e("awayjs-renderergl/lib/animators/VertexAnimator");var k=e("awayjs-renderergl/lib/animators/SkeletonAnimationSet");var G=e("awayjs-renderergl/lib/animators/SkeletonAnimator");var W=e("awayjs-renderergl/lib/animators/data/JointPose");var z=e("awayjs-renderergl/lib/animators/data/Skeleton");var H=e("awayjs-renderergl/lib/animators/data/SkeletonPose");var X=e("awayjs-renderergl/lib/animators/data/SkeletonJoint");var Y=e("awayjs-renderergl/lib/animators/nodes/SkeletonClipNode");var q=e("awayjs-renderergl/lib/animators/nodes/VertexClipNode");var Z=e("awayjs-renderergl/lib/managers/DefaultMaterialManager");var K=e("awayjs-renderergl/lib/materials/SkyboxMaterial");var J=e("awayjs-methodmaterials/lib/TriangleMaterialMode");var Q=e("awayjs-methodmaterials/lib/TriangleMethodMaterial");var $=e("awayjs-methodmaterials/lib/methods/AmbientEnvMapMethod");var et=e("awayjs-methodmaterials/lib/methods/DiffuseDepthMethod");var tt=e("awayjs-methodmaterials/lib/methods/DiffuseCelMethod");var rt=e("awayjs-methodmaterials/lib/methods/DiffuseGradientMethod");var st=e("awayjs-methodmaterials/lib/methods/DiffuseLightMapMethod");var it=e("awayjs-methodmaterials/lib/methods/DiffuseWrapMethod");var at=e("awayjs-methodmaterials/lib/methods/EffectAlphaMaskMethod");var ot=e("awayjs-methodmaterials/lib/methods/EffectColorMatrixMethod");var nt=e("awayjs-methodmaterials/lib/methods/EffectColorTransformMethod");var lt=e("awayjs-methodmaterials/lib/methods/EffectEnvMapMethod");var ht=e("awayjs-methodmaterials/lib/methods/EffectFogMethod");var pt=e("awayjs-methodmaterials/lib/methods/EffectFresnelEnvMapMethod");var ut=e("awayjs-methodmaterials/lib/methods/EffectLightMapMethod");var ct=e("awayjs-methodmaterials/lib/methods/EffectRimLightMethod");var dt=e("awayjs-methodmaterials/lib/methods/NormalSimpleWaterMethod");var ft=e("awayjs-methodmaterials/lib/methods/ShadowDitheredMethod");var yt=e("awayjs-methodmaterials/lib/methods/ShadowFilteredMethod");var mt=e("awayjs-methodmaterials/lib/methods/SpecularFresnelMethod");var _t=e("awayjs-methodmaterials/lib/methods/ShadowHardMethod");var bt=e("awayjs-methodmaterials/lib/methods/SpecularAnisotropicMethod");var gt=e("awayjs-methodmaterials/lib/methods/SpecularCelMethod");var wt=e("awayjs-methodmaterials/lib/methods/SpecularPhongMethod");var vt=e("awayjs-methodmaterials/lib/methods/ShadowNearMethod");var jt=e("awayjs-methodmaterials/lib/methods/ShadowSoftMethod");var xt=e("awayjs-display/lib/entities/TimeLine");var Pt=e("awayjs-display/lib/entities/timelinedata/TimeLineFrame");var Dt=e("awayjs-display/lib/entities/timelinedata/TimeLineObject");var Tt=e("awayjs-display/lib/entities/timelinedata/FrameCommand");var At=e("awayjs-display/lib/entities/timelinedata/CommandPropsDisplayObject");var Ct=function(e){s(t,e);function t(){e.call(this,n.ARRAY_BUFFER);this._debug=false;this._startedParsing=false;this._texture_users={};this._parsed_header=false;this._blocks=new Array;this._blocks[0]=new Et;this._blocks[0].data=null;this.blendModeDic=new Array;this.blendModeDic.push(w.NORMAL);this.blendModeDic.push(w.ADD);this.blendModeDic.push(w.ALPHA);this.blendModeDic.push(w.DARKEN);this.blendModeDic.push(w.DIFFERENCE);this.blendModeDic.push(w.ERASE);this.blendModeDic.push(w.HARDLIGHT);this.blendModeDic.push(w.INVERT);this.blendModeDic.push(w.LAYER);this.blendModeDic.push(w.LIGHTEN);this.blendModeDic.push(w.MULTIPLY);this.blendModeDic.push(w.NORMAL);this.blendModeDic.push(w.OVERLAY);this.blendModeDic.push(w.SCREEN);this.blendModeDic.push(w.SHADER);this.blendModeDic.push(w.OVERLAY);this._depthSizeDic=new Array;this._depthSizeDic.push(256);this._depthSizeDic.push(512);this._depthSizeDic.push(2048);this._depthSizeDic.push(1024);this._version=Array()}t.supportsType=function(e){e=e.toLowerCase();return e=="awd"};t.supportsData=function(e){return u.toString(e,3)=="AWD"};t.prototype._iResolveDependency=function(e){if(e.assets.length==1){var t=e.id.split("#");var r=t[0];var s;var i;var a;if(t.length==1){s=e.assets[0];if(s){var o;var n;a=this._blocks[e.id];a.data=s;s.resetAssetPath(a.name,null,true);a.name=s.name;this._pFinalizeAsset(s);if(this._debug){console.log("Successfully loaded Bitmap for texture");console.log("Parsed texture: Name = "+a.name)}}}if(t.length>1){i=e.assets[0];var l=i;this._cubeTextures[t[1]]=l.htmlImageElement;this._texture_users[r].push(1);if(this._debug){console.log("Successfully loaded Bitmap "+this._texture_users[r].length+" / 6 for Cubetexture")}if(this._texture_users[r].length==this._cubeTextures.length){var h=this._cubeTextures[0];var p=this._cubeTextures[1];var u=this._cubeTextures[2];var c=this._cubeTextures[3];var d=this._cubeTextures[4];var f=this._cubeTextures[5];s=new m(h,p,u,c,d,f);a=this._blocks[r];a.data=s;s.resetAssetPath(a.name,null,true);a.name=s.name;this._pFinalizeAsset(s);if(this._debug){console.log("Parsed CubeTexture: Name = "+a.name)}}}}};t.prototype._iResolveDependencyFailure=function(e){};t.prototype._iResolveDependencyName=function(e,t){var r=t.name;if(t){var s=this._blocks[parseInt(e.id)];t.resetAssetPath(s.name,null,true)}var i=t.name;t.name=r;return i};t.prototype._pProceedParsing=function(){if(!this._startedParsing){this._byteData=this._pGetByteData();this._startedParsing=true}if(!this._parsed_header){this.parseHeader();switch(this._compression){case t.DEFLATE:case t.LZMA:this._pDieWithError("Compressed AWD formats not yet supported");break;case t.UNCOMPRESSED:this._body=this._byteData;break}this._parsed_header=true}if(this._body){while(this._body.getBytesAvailable()>0&&!this.parsingPaused){this.parseNextBlock()}if(this._body.getBytesAvailable()==0){this.dispose();return p.PARSING_DONE}else{return p.MORE_TO_PARSE}}else{switch(this._compression){case t.DEFLATE:case t.LZMA:if(this._debug){console.log("(!) AWDParser Error: Compressed AWD formats not yet supported (!)")}break}return p.PARSING_DONE}};t.prototype._pStartParsing=function(t){e.prototype._pStartParsing.call(this,t);this._pContent=new g};t.prototype.dispose=function(){for(var e in this._blocks){var t=this._blocks[e];t.dispose()}};t.prototype.parseNextBlock=function(){var e;var r;var s=false;var i;var a;var o;var n;this._cur_block_id=this._body.readUnsignedInt();i=this._body.readUnsignedByte();a=this._body.readUnsignedByte();o=this._body.readUnsignedByte();n=this._body.readUnsignedInt();var l=Mt.test(o,Mt.FLAG4);var h=Mt.test(o,Mt.FLAG5);if(this._accuracyOnBlocks){this._accuracyMatrix=Mt.test(o,Mt.FLAG1);this._accuracyGeo=Mt.test(o,Mt.FLAG2);this._accuracyProps=Mt.test(o,Mt.FLAG3);this._geoNrType=t.FLOAT32;if(this._accuracyGeo){this._geoNrType=t.FLOAT64}this._matrixNrType=t.FLOAT32;if(this._accuracyMatrix){this._matrixNrType=t.FLOAT64}this._propsNrType=t.FLOAT32;if(this._accuracyProps){this._propsNrType=t.FLOAT64}}var p=this._body.position+n;if(n>this._body.getBytesAvailable()){this._pDieWithError("AWD2 block length is bigger than the bytes that are available!");this._body.position+=this._body.getBytesAvailable();return}this._newBlockBytes=new b;this._body.readBytes(this._newBlockBytes,0,n);if(l){this._pDieWithError("Compressed AWD formats not yet supported")}this._newBlockBytes.position=0;e=new Et;e.len=this._newBlockBytes.position+n;e.id=this._cur_block_id;var u=this._newBlockBytes.position+n;if(l){this._pDieWithError("Compressed AWD formats not yet supported")}if(this._debug){console.log("AWDBlock:  ID = "+this._cur_block_id+" | TypeID = "+a+" | Compression = "+l+" | Matrix-Precision = "+this._accuracyMatrix+" | Geometry-Precision = "+this._accuracyGeo+" | Properties-Precision = "+this._accuracyProps)}this._blocks[this._cur_block_id]=e;if(this._version[0]==3&&this._version[1]==0){switch(a){case 2:case 131:this.parseShape2D(this._cur_block_id);s=true;break;case 3:case 132:this.parseShape2DFill(this._cur_block_id);s=true;break;case 4:case 133:this.parseTimeLine(this._cur_block_id);s=true;break}}else if(this._version[0]==2&&this._version[1]==1){switch(a){case 11:this.parsePrimitves(this._cur_block_id);s=true;break;case 31:this.parseSkyboxInstance(this._cur_block_id);s=true;break;case 41:this.parseLight(this._cur_block_id);s=true;break;case 42:this.parseCamera(this._cur_block_id);s=true;break;case 51:this.parseLightPicker(this._cur_block_id);s=true;break;case 81:this.parseMaterial_v1(this._cur_block_id);s=true;break;case 83:this.parseCubeTexture(this._cur_block_id);s=true;break;case 91:this.parseSharedMethodBlock(this._cur_block_id);s=true;break;case 92:this.parseShadowMethodBlock(this._cur_block_id);s=true;break;case 111:this.parseMeshPoseAnimation(this._cur_block_id,true);s=true;break;case 112:this.parseMeshPoseAnimation(this._cur_block_id);s=true;break;case 113:this.parseVertexAnimationSet(this._cur_block_id);s=true;break;case 122:this.parseAnimatorSet(this._cur_block_id);s=true;break;case 253:this.parseCommand(this._cur_block_id);s=true;break}}if(s==false){switch(a){case 1:this.parseTriangleGeometrieBlock(this._cur_block_id);break;case 22:this.parseContainer(this._cur_block_id);break;case 23:this.parseMeshInstance(this._cur_block_id);break;case 81:this.parseMaterial(this._cur_block_id);break;case 82:this.parseTexture(this._cur_block_id);break;case 101:this.parseSkeleton(this._cur_block_id);break;case 102:this.parseSkeletonPose(this._cur_block_id);break;case 103:this.parseSkeletonAnimation(this._cur_block_id);break;case 121:case 254:this.parseNameSpace(this._cur_block_id);break;case 255:this.parseMetaData(this._cur_block_id);break;default:if(this._debug){console.log("AWDBlock:   Unknown BlockType  (BlockID = "+this._cur_block_id+") - Skip "+n+" bytes")}this._newBlockBytes.position+=n;break}}var c=0;if(this._newBlockBytes.position==u){if(this._debug){if(e.errorMessages){while(c<e.errorMessages.length){console.log("        (!) Error: "+e.errorMessages[c]+" (!)");c++}}}if(this._debug){console.log("\n")}}else{if(this._debug){console.log("  (!)(!)(!) Error while reading AWDBlock ID "+this._cur_block_id+" = skip to next block");if(e.errorMessages){while(c<e.errorMessages.length){console.log("        (!) Error: "+e.errorMessages[c]+" (!)");c++}}}}this._body.position=p;this._newBlockBytes=null};t.prototype.parseShape2D=function(e){var t=new v;var r=this.parseVarStr();var s=this._newBlockBytes.readUnsignedShort();var i=this.parseProperties({1:this._geoNrType,2:this._geoNrType});var a=0;while(a<s){var o;var n,l;var h;var p;var u;n=this._newBlockBytes.readUnsignedInt();l=this._newBlockBytes.position+n;var c=this.parseProperties({1:this._geoNrType,2:this._geoNrType});var d=new Array;var f=0;while(this._newBlockBytes.position<l){var y=0;var m=0;var _=0;var b=0;var g,w,x,P;w=this._newBlockBytes.readUnsignedByte();g=this._newBlockBytes.readUnsignedByte();x=this._newBlockBytes.readUnsignedInt();P=this._newBlockBytes.position+x;var D,T,A;var C;var E,S,M,O;var R,I;if(w==1){var U=new Array;var L=new Array;var B=new Array;var N=new Array;while(this._newBlockBytes.position<P){D=this.readNumber(this._accuracyGeo);T=this.readNumber(this._accuracyGeo);A=-.1*a;C=this.readNumber(this._accuracyGeo);R=this.readNumber(this._accuracyGeo);I=this.readNumber(this._accuracyGeo);E=this.readNumber(this._accuracyGeo);S=this.readNumber(this._accuracyGeo);M=this.readNumber(this._accuracyGeo);O=this.readNumber(this._accuracyGeo);if(true){L[y]=0;B[y]=0;U[y++]=D;L[y]=0;B[y]=0;U[y++]=T;B[y]=1;U[y++]=A}else{U[y++]=D;U[y++]=T;U[y++]=A;L[m++]=R;L[m++]=I;B[_++]=C;B[_++]=O;B[_++]=0;N[b++]=E;N[b++]=S;N[b++]=M}}}else if(w==2){while(this._newBlockBytes.position<P){var F=this._newBlockBytes.readUnsignedShort();d[f++]=F}}else if(w==3){while(this._newBlockBytes.position<P){var F=this._newBlockBytes.readUnsignedShort();d[f++]=F}}else if(w==4){while(this._newBlockBytes.position<P){var F=this._newBlockBytes.readUnsignedShort();d[f++]=F}}else if(w==5){while(this._newBlockBytes.position<P){var F=this._newBlockBytes.readUnsignedShort();d[f++]=F}}else{this._newBlockBytes.position=P}}this.parseUserAttributes();h=new j(true);h.autoDeriveNormals=false;if(true){h.autoDeriveTangents=true}else{h.updateVertexTangents(N)}h.updateIndices(d);h.updatePositions(U);h.updateUVs(L);h.updateVertexNormals(B);t.addSubGeometry(h);a++}this.parseUserAttributes();this._pFinalizeAsset(t,r);this._blocks[e].data=t;if(this._debug)console.log("Parsed a TriangleGeometry: Name = "+r+"| Id = "+h.id)};t.prototype.parseShape2DFill=function(e){var r=this.parseVarStr();var s=this._newBlockBytes.readUnsignedByte();var i=this.parseProperties({1:t.UINT32});switch(s){case 0:var a=new Q(i.get(1,13421772));a.bothSides=true;this._pFinalizeAsset(a,r);this._blocks[e].data=a;break;case 1:console.log("Parsed a bitmap FILL: Name = "+r);break;case 2:console.log("Parsed a linear gradient FILL: Name = "+r);break;case 3:console.log("Parsed a radial gradient FILL: Name = "+r);break;default:console.log("Parsed a unknown fillstyle: Name = "+r);break}this.parseUserAttributes()};t.prototype.parseTimeLine=function(e){var t;var r,s;var i=new xt;var n=this.parseVarStr();var l=Boolean(this._newBlockBytes.readUnsignedByte());var p=this._newBlockBytes.readUnsignedByte();var u=this._newBlockBytes.readUnsignedShort();var c;if(this._debug)console.log("Parsed a TIMELINE: Name = "+n+"| isScene = "+l+"| sceneID = "+p+"| num_frames = "+u);var d=0;for(r=0;r<u;r++){var f=new Pt;var y="frame = "+r;var m=this._newBlockBytes.readUnsignedInt();f.setFrameTime(d,m);d+=m;var _=this._newBlockBytes.readUnsignedShort();for(s=0;s<_;s++){var b=this._newBlockBytes.readUnsignedByte();var g=this.parseVarStr();f.addLabel(g,b);y+="\n     frame_name = "+t+" - label_type = "+b}var w=this._newBlockBytes.readUnsignedShort();var v="\n      Commands "+w;for(s=0;s<w;s++){var j=this._newBlockBytes.readUnsignedShort();if(j==1||j==2){var x=new At;var P;var D=Boolean(this._newBlockBytes.readByte());var A=Boolean(this._newBlockBytes.readByte());var C=Boolean(this._newBlockBytes.readByte());var E=Boolean(this._newBlockBytes.readByte());var S=Boolean(this._newBlockBytes.readByte());var M=Boolean(this._newBlockBytes.readByte());var O=Boolean(this._newBlockBytes.readByte());var R=Boolean(this._newBlockBytes.readByte());var I=this._newBlockBytes.readUnsignedInt();if(D){var U=this._newBlockBytes.readUnsignedInt();v+="\n      - Add new Ressource = "+U+" as object_id = "+I}else{v+="\n      - Update object_id = "+I}var L=new Array;if(A){L=new Array;var B=new a;var N=false;if(N){B=this.parseMatrix3D()}else{for(P=0;P<6;P++){L.push(this._newBlockBytes.readFloat())}B.position=new o(L[4],L[5],0)}x.setDisplaymatrix(B);v+="\n                transformArray = "+L}var F=new Array;if(C){for(P=0;P<20;P++){F.push(this._newBlockBytes.readFloat())}v+="\n                colorArray = "+F}if(E){var V=this._newBlockBytes.readUnsignedInt();v+="\n                Depth = "+V}if(S){}if(M){var k=this._newBlockBytes.readUnsignedByte();v+="\n                BlendMode = "+k}if(O){var G=this._newBlockBytes.readUnsignedInt();v+="\n                ClipDepth = "+G}if(R){var W=Boolean(this._newBlockBytes.readByte());v+="\n                Visibitily = "+W}var z=this._newBlockBytes.readUnsignedShort();var H=0;v+="\n                number of fills = "+z;var X=new Array;for(H=0;H<z;H++){X.push(this._newBlockBytes.readUnsignedInt());v+="\n                    id of fill = "+X[H]}var Y=this.parseVarStr();if(Y.length>0){x.setInstancename(Y);v+="\n                instanceName = "+Y}if(D){var q=this.getAssetByID(U,[h.GEOMETRY]);if(q[0]==true){var Z=q[1];var K=new T(Z);for(H=0;H<z;H++){var J=this.getAssetByID(X[H],[h.MATERIAL]);if(J[0]){if(K.subMeshes.length>H){K.subMeshes[H].material=J[1]}}}var Q=new Dt(K,I,new At);i.addTimeLineObject(Q);var $=new Tt(Q);$.commandProps=x;f.addCommand($)}else{var q=this.getAssetByID(U,[h.TIMELINE]);if(q[0]==true){var et=new Dt(q[1],I,new At);i.addTimeLineObject(et);var tt=new Tt(et);tt.commandProps=x;f.addCommand(tt)}}}else{var rt=i.getTimeLineObjectByID(I);var st=new Tt(rt);f.addCommand(st)}}else if(j==3){var I=this._newBlockBytes.readUnsignedInt();var rt=i.getTimeLineObjectByID(I);var st=new Tt(rt);st.activateObj=false;f.addCommand(st);v+="\n       - Remove object with ID: "+I}else if(j==4){var I=this._newBlockBytes.readUnsignedInt();var U=this._newBlockBytes.readUnsignedInt();v+="\n      - Add new Sound AWD-ID = "+U.toString()+" as object_id = "+I.toString()}else{v+="\n       - Unknown Command Type = "+j}}var it="";var at=this._newBlockBytes.readUnsignedInt();if(at>0){it=this._newBlockBytes.readUTFBytes(at);f.addToScript(it);y+="\nframe-code = "+it}y+=v;this._newBlockBytes.readUnsignedInt();i.addFrame(f)}this._pFinalizeAsset(i,n);this._blocks[e].data=i;var ot=this.parseProperties(null);this.parseUserAttributes()};t.prototype.parseTriangleGeometrieBlock=function(e){var t=new v;var r=this.parseVarStr();var s=this._newBlockBytes.readUnsignedShort();var i=this.parseProperties({1:this._geoNrType,2:this._geoNrType});var a=i.get(1,1);var o=i.get(2,1);var n=0;while(n<s){var l;var h,p;var u;var c;var d;h=this._newBlockBytes.readUnsignedInt();p=this._newBlockBytes.position+h;var f=this.parseProperties({1:this._geoNrType,2:this._geoNrType});while(this._newBlockBytes.position<p){var y=0;var m,_,b,g;_=this._newBlockBytes.readUnsignedByte();m=this._newBlockBytes.readUnsignedByte();b=this._newBlockBytes.readUnsignedInt();g=this._newBlockBytes.position+b;var w,x,P;if(_==1){var D=new Array;while(this._newBlockBytes.position<g){w=this.readNumber(this._accuracyGeo);x=this.readNumber(this._accuracyGeo);P=this.readNumber(this._accuracyGeo);D[y++]=w;D[y++]=x;D[y++]=P}}else if(_==2){var T=new Array;while(this._newBlockBytes.position<g){T[y++]=this._newBlockBytes.readUnsignedShort()}}else if(_==3){var A=new Array;while(this._newBlockBytes.position<g){A[y++]=this.readNumber(this._accuracyGeo)}}else if(_==4){var C=new Array;while(this._newBlockBytes.position<g){C[y++]=this.readNumber(this._accuracyGeo)}}else if(_==6){c=Array();while(this._newBlockBytes.position<g){c[y++]=this._newBlockBytes.readUnsignedShort()*3}}else if(_==7){d=new Array;while(this._newBlockBytes.position<g){d[y++]=this.readNumber(this._accuracyGeo)}}else{this._newBlockBytes.position=g}}this.parseUserAttributes();u=new j(true);if(d)u.jointsPerVertex=d.length/(D.length/3);if(C)u.autoDeriveNormals=false;if(A)u.autoDeriveUVs=false;u.updateIndices(T);u.updatePositions(D);u.updateVertexNormals(C);u.updateUVs(A);u.updateVertexTangents(null);u.updateJointWeights(d);u.updateJointIndices(c);var E=f.get(1,1);var S=f.get(2,1);var M=false;if(a!=E||o!=S){M=true;E=a/E;S=o/S}if(M)u.scaleUV(E,S);t.addSubGeometry(u);n++}if(a!=1||o!=1)t.scaleUV(a,o);this.parseUserAttributes();this._pFinalizeAsset(t,r);this._blocks[e].data=t;if(this._debug){console.log("Parsed a TriangleGeometry: Name = "+r+"| Id = "+u.id)}};t.prototype.parsePrimitves=function(e){var r;var s;var i;var a;var o;var n;r=this.parseVarStr();i=this._newBlockBytes.readUnsignedByte();o=this.parseProperties({101:this._geoNrType,102:this._geoNrType,103:this._geoNrType,110:this._geoNrType,111:this._geoNrType,301:t.UINT16,302:t.UINT16,303:t.UINT16,701:t.BOOL,702:t.BOOL,703:t.BOOL,704:t.BOOL});var l=["Unsupported Type-ID","PrimitivePlanePrefab","PrimitiveCubePrefab","PrimitiveSpherePrefab","PrimitiveCylinderPrefab","PrimitivesConePrefab","PrimitivesCapsulePrefab","PrimitivesTorusPrefab"];switch(i){case 1:s=new L(o.get(101,100),o.get(102,100),o.get(301,1),o.get(302,1),o.get(701,true),o.get(702,false));break;case 2:s=new I(o.get(101,100),o.get(102,100),o.get(103,100),o.get(301,1),o.get(302,1),o.get(303,1),o.get(701,true));break;case 3:s=new B(o.get(101,50),o.get(301,16),o.get(302,12),o.get(701,true));break;case 4:s=new U(o.get(101,50),o.get(102,50),o.get(103,100),o.get(301,16),o.get(302,1),true,true,true);if(!o.get(701,true))s.topClosed=false;if(!o.get(702,true))s.bottomClosed=false;if(!o.get(703,true))s.yUp=false;break;case 5:s=new R(o.get(101,50),o.get(102,100),o.get(301,16),o.get(302,1),o.get(701,true),o.get(702,true));break;case 6:s=new O(o.get(101,50),o.get(102,100),o.get(301,16),o.get(302,15),o.get(701,true));break;case 7:s=new N(o.get(101,50),o.get(102,50),o.get(301,16),o.get(302,8),o.get(701,true));break;default:s=new M;console.log("ERROR: UNSUPPORTED PREFAB_TYPE");break}if(o.get(110,1)!=1||o.get(111,1)!=1){}this.parseUserAttributes();s.name=r;this._pFinalizeAsset(s,r);this._blocks[e].data=s;if(this._debug){if(i<0||i>7){i=0}console.log("Parsed a Primivite: Name = "+r+"| type = "+l[i])}};t.prototype.parseContainer=function(e){var r;var s;var i;var a;var n;s=this._newBlockBytes.readUnsignedInt();i=this.parseMatrix3D();r=this.parseVarStr();var l="Root (TopLevel)";a=new g;a.transform.matrix3D=i;var p=this.getAssetByID(s,[h.CONTAINER,h.LIGHT,h.MESH]);if(p[0]){var u=p[1].addChild(a);l=p[1].name}else if(s>0){this._blocks[e].addError("Could not find a parent for this ObjectContainer3D")}else{this._pContent.addChild(a)}if(this._version[0]==2&&this._version[1]==1){var c=this.parseProperties({1:this._matrixNrType,2:this._matrixNrType,3:this._matrixNrType,4:t.UINT8});a.pivot=new o(c.get(1,0),c.get(2,0),c.get(3,0))}else{this.parseProperties(null)}a.extra=this.parseUserAttributes();this._pFinalizeAsset(a,r);this._blocks[e].data=a;if(this._debug){console.log("Parsed a Container: Name = '"+r+"' | Parent-Name = "+l)}};t.prototype.parseMeshInstance=function(e){var r;var s;var i;var a=this._newBlockBytes.readUnsignedInt();var n=this.parseMatrix3D();var l=this.parseVarStr();var p="Root (TopLevel)";var u=this._newBlockBytes.readUnsignedInt();var c;var d=this.getAssetByID(u,[h.GEOMETRY]);if(d[0]){c=d[1]}else{this._blocks[e].addError("Could not find a Geometry for this Mesh. A empty Geometry is created!");c=new v}this._blocks[e].geoID=u;var f=new Array;r=this._newBlockBytes.readUnsignedShort();var y=new Array;s=0;var m;while(s<r){var _;_=this._newBlockBytes.readUnsignedInt();m=this.getAssetByID(_,[h.MATERIAL]);if(!m[0]&&_>0){this._blocks[e].addError("Could not find Material Nr "+s+" (ID = "+_+" ) for this Mesh")}var b=m[1];f.push(b);y.push(b.name);s++}var g=new T(c,null);g.transform.matrix3D=n;var w=this.getAssetByID(a,[h.CONTAINER,h.LIGHT,h.MESH]);if(w[0]){var j=w[1];j.addChild(g);p=j.name}else if(a>0){this._blocks[e].addError("Could not find a parent for this Mesh")}else{this._pContent.addChild(g)}if(f.length>=1&&g.subMeshes.length==1){g.material=f[0]}else if(f.length>1){var x;for(x=0;x<g.subMeshes.length;x++){g.subMeshes[x].material=f[Math.min(f.length-1,x)]}}if(this._version[0]==2&&this._version[1]==1){var P=this.parseProperties({1:this._matrixNrType,2:this._matrixNrType,3:this._matrixNrType,4:t.UINT8,5:t.BOOL});g.pivot=new o(P.get(1,0),P.get(2,0),P.get(3,0));g.castsShadows=P.get(5,true)}else{this.parseProperties(null)}g.extra=this.parseUserAttributes();this._pFinalizeAsset(g,l);this._blocks[e].data=g;if(this._debug){console.log("Parsed a Mesh: Name = '"+l+"' | Parent-Name = "+p+"| Geometry-Name = "+c.name+" | SubMeshes = "+g.subMeshes.length+" | Mat-Names = "+y.toString())}};t.prototype.parseSkyboxInstance=function(e){var t=this.parseVarStr();var r=this._newBlockBytes.readUnsignedInt();var s=this.getAssetByID(r,[h.TEXTURE],"CubeTexture");if(!s[0]&&r!=0)this._blocks[e].addError("Could not find the Cubetexture (ID = "+r+" ) for this Skybox");var i=new A(new K(s[1]));this.parseProperties(null);i.extra=this.parseUserAttributes();this._pFinalizeAsset(i,t);this._blocks[e].data=i;if(this._debug)console.log("Parsed a Skybox: Name = '"+t+"' | CubeTexture-Name = "+s[1].name)};t.prototype.parseLight=function(e){var r;var s;var i=this._newBlockBytes.readUnsignedInt();var a=this.parseMatrix3D();var o=this.parseVarStr();var n=this._newBlockBytes.readUnsignedByte();var l=this.parseProperties({1:this._propsNrType,2:this._propsNrType,3:t.COLOR,4:this._propsNrType,5:this._propsNrType,6:t.BOOL,7:t.COLOR,8:this._propsNrType,9:t.UINT8,10:t.UINT8,11:this._propsNrType,12:t.UINT16,21:this._matrixNrType,22:this._matrixNrType,23:this._matrixNrType});var p=l.get(9,0);var u="Root (TopLevel)";var c=["Unsupported LightType","PointLight","DirectionalLight"];var d=["No ShadowMapper","DirectionalShadowMapper","NearDirectionalShadowMapper","CascadeShadowMapper","CubeMapShadowMapper"];if(n==1){r=new P;r.radius=l.get(1,9e4);r.fallOff=l.get(2,1e5);if(p>0){if(p==4){s=new E}}r.transform.matrix3D=a}if(n==2){r=new x(l.get(21,0),l.get(22,-1),l.get(23,1));if(p>0){if(p==1){s=new S}}}r.color=l.get(3,16777215);r.specular=l.get(4,1);r.diffuse=l.get(5,1);r.ambientColor=l.get(7,16777215);r.ambient=l.get(8,0);if(s){if(s instanceof E){if(l.get(10,1)!=1){s.depthMapSize=this._depthSizeDic[l.get(10,1)]}}else{if(l.get(10,2)!=2){s.depthMapSize=this._depthSizeDic[l.get(10,2)]}}r.shadowMapper=s;r.castsShadows=true}if(i!=0){var f=this.getAssetByID(i,[h.CONTAINER,h.LIGHT,h.MESH]);if(f[0]){f[1].addChild(r);u=f[1].name}else{this._blocks[e].addError("Could not find a parent for this Light")}}else{this._pContent.addChild(r)}this.parseUserAttributes();this._pFinalizeAsset(r,o);this._blocks[e].data=r;if(this._debug)console.log("Parsed a Light: Name = '"+o+"' | Type = "+c[n]+" | Parent-Name = "+u+" | ShadowMapper-Type = "+d[p])};t.prototype.parseCamera=function(e){var r=this._newBlockBytes.readUnsignedInt();var s=this.parseMatrix3D();var i=this.parseVarStr();var a="Root (TopLevel)";var n;this._newBlockBytes.readUnsignedByte();this._newBlockBytes.readShort();var l=this._newBlockBytes.readShort();var p=this.parseProperties({101:this._propsNrType,102:this._propsNrType,103:this._propsNrType,104:this._propsNrType});switch(l){case 5001:n=new c(p.get(101,60));break;case 5002:n=new d(p.get(101,500));break;case 5003:n=new f(p.get(101,-400),p.get(102,400),p.get(103,-300),p.get(104,300));break;default:console.log("unsupportedLenstype");return}var u=new D(n);u.transform.matrix3D=s;var y=this.getAssetByID(r,[h.CONTAINER,h.LIGHT,h.MESH]);if(y[0]){var m=y[1];m.addChild(u);a=m.name}else if(r>0){this._blocks[e].addError("Could not find a parent for this Camera")}else{this._pContent.addChild(u)}u.name=i;p=this.parseProperties({1:this._matrixNrType,2:this._matrixNrType,3:this._matrixNrType,4:t.UINT8});u.pivot=new o(p.get(1,0),p.get(2,0),p.get(3,0));u.extra=this.parseUserAttributes();this._pFinalizeAsset(u,i);this._blocks[e].data=u;if(this._debug){console.log("Parsed a Camera: Name = '"+i+"' | Projectiontype = "+n+" | Parent-Name = "+a)}};t.prototype.parseLightPicker=function(e){var t=this.parseVarStr();var r=this._newBlockBytes.readUnsignedShort();var s=new Array;var i=0;var a=0;var o;var n=new Array;for(i=0;i<r;i++){a=this._newBlockBytes.readUnsignedInt();o=this.getAssetByID(a,[h.LIGHT]);if(o[0]){s.push(o[1]);n.push(o[1].name)}else{this._blocks[e].addError("Could not find a Light Nr "+i+" (ID = "+a+" ) for this LightPicker")}}if(s.length==0){this._blocks[e].addError("Could not create this LightPicker, cause no Light was found.");this.parseUserAttributes();return}var l=new C(s);l.name=t;this.parseUserAttributes();this._pFinalizeAsset(l,t);this._blocks[e].data=l;if(this._debug){console.log("Parsed a StaticLightPicker: Name = '"+t+"' | Texture-Name = "+n.toString())}};t.prototype.parseMaterial=function(e){var r;var s;var i;var a;var o;var n;var l;var p;var u;r=this.parseVarStr();s=this._newBlockBytes.readUnsignedByte();l=this._newBlockBytes.readUnsignedByte();i=this.parseProperties({1:t.INT32,2:t.BADDR,10:this._propsNrType,11:t.BOOL,12:this._propsNrType,13:t.BOOL});p=0;while(p<l){var c;c=this._newBlockBytes.readUnsignedShort();this.parseProperties(null);this.parseUserAttributes();p+=1}var d="";o=this.parseUserAttributes();if(s===1){d+="Parsed a ColorMaterial(SinglePass): Name = '"+r+"' | ";var f;f=i.get(1,16777215);if(this.materialMode<2){a=new Q(f,i.get(10,1))}else{a=new Q(f);a.materialMode=J.MULTI_PASS}}else if(s===2){var y=i.get(2,0);u=this.getAssetByID(y,[h.TEXTURE]);if(!u[0]&&y>0)this._blocks[e].addError("Could not find the DiffsueTexture (ID = "+y+" ) for this Material");a=new Q(u[1]);if(this.materialMode<2){a.alphaBlending=i.get(11,false);a.alpha=i.get(10,1);d+="Parsed a TriangleMethodMaterial(SinglePass): Name = '"+r+"' | Texture-Name = "+a.name}else{a.materialMode=J.MULTI_PASS;d+="Parsed a TriangleMethodMaterial(MultiPass): Name = '"+r+"' | Texture-Name = "+a.name}}a.extra=o;a.alphaThreshold=i.get(12,0);a.repeat=i.get(13,false);this._pFinalizeAsset(a,r);this._blocks[e].data=a;if(this._debug){console.log(d)}};t.prototype.parseMaterial_v1=function(e){var r;var s;var i;var a;var o=this.parseVarStr();var n=this._newBlockBytes.readUnsignedByte();var l=this._newBlockBytes.readUnsignedByte();var p=this.parseProperties({1:t.UINT32,2:t.BADDR,3:t.BADDR,4:t.UINT8,5:t.BOOL,6:t.BOOL,7:t.BOOL,8:t.BOOL,9:t.UINT8,10:this._propsNrType,11:t.BOOL,12:this._propsNrType,13:t.BOOL,15:this._propsNrType,16:t.UINT32,17:t.BADDR,18:this._propsNrType,19:this._propsNrType,20:t.UINT32,21:t.BADDR,22:t.BADDR});var u=p.get(4,0);var c="";if(u>=2){this._blocks[e].addError("Material-spezialType '"+u+"' is not supported, can only be 0:singlePass, 1:MultiPass !");return}if(this.materialMode==1)u=0;else if(this.materialMode==2)u=1;if(u<2){if(n==1){var d=p.get(1,13421772);if(u==1){r=new Q(d);r.materialMode=J.MULTI_PASS;c+="Parsed a ColorMaterial(MultiPass): Name = '"+o+"' | "}else{r=new Q(d,p.get(10,1));r.alphaBlending=p.get(11,false);c+="Parsed a ColorMaterial(SinglePass): Name = '"+o+"' | "}}else if(n==2){var f=p.get(2,0);a=this.getAssetByID(f,[h.TEXTURE]);
if(!a[0]&&f>0)this._blocks[e].addError("Could not find the AmbientTexture (ID = "+f+" ) for this TriangleMethodMaterial");var y=a[1];r=new Q(y);if(u==1){r.materialMode=J.MULTI_PASS;c+="Parsed a TriangleMethodMaterial(MultiPass): Name = '"+o+"' | Texture-Name = "+y.name}else{r.alpha=p.get(10,1);r.alphaBlending=p.get(11,false);c+="Parsed a TriangleMethodMaterial(SinglePass): Name = '"+o+"' | Texture-Name = "+y.name}}var m;var _=p.get(17,0);a=this.getAssetByID(_,[h.TEXTURE]);if(!a[0]&&_!=0){this._blocks[e].addError("Could not find the DiffuseTexture (ID = "+_+" ) for this TriangleMethodMaterial")}if(a[0])m=a[1];if(m){r.diffuseTexture=m;c+=" | DiffuseTexture-Name = "+m.name}var b=p.get(3,0);a=this.getAssetByID(b,[h.TEXTURE]);if(!a[0]&&b!=0){this._blocks[e].addError("Could not find the NormalTexture (ID = "+b+" ) for this TriangleMethodMaterial")}if(a[0]){s=a[1];c+=" | NormalTexture-Name = "+s.name}var g=p.get(21,0);a=this.getAssetByID(g,[h.TEXTURE]);if(!a[0]&&g!=0){this._blocks[e].addError("Could not find the SpecularTexture (ID = "+g+" ) for this TriangleMethodMaterial")}if(a[0]){i=a[1];c+=" | SpecularTexture-Name = "+i.name}var w=p.get(22,0);a=this.getAssetByID(w,[h.LIGHT_PICKER]);if(!a[0]&&w){this._blocks[e].addError("Could not find the LightPicker (ID = "+w+" ) for this TriangleMethodMaterial")}else{r.lightPicker=a[1]}r.smooth=p.get(5,true);r.mipmap=p.get(6,true);r.bothSides=p.get(7,false);r.alphaPremultiplied=p.get(8,false);r.blendMode=this.blendModeDic[p.get(9,0)];r.repeat=p.get(13,false);if(s)r.normalMap=s;if(i)r.specularMap=i;r.alphaThreshold=p.get(12,0);r.ambient=p.get(15,1);r.diffuseColor=p.get(16,16777215);r.specular=p.get(18,1);r.gloss=p.get(19,50);r.specularColor=p.get(20,16777215);var v=0;var j;while(v<l){var x;x=this._newBlockBytes.readUnsignedShort();p=this.parseProperties({1:t.BADDR,2:t.BADDR,3:t.BADDR,101:this._propsNrType,102:this._propsNrType,103:this._propsNrType,201:t.UINT32,202:t.UINT32,301:t.UINT16,302:t.UINT16,401:t.UINT8,402:t.UINT8,601:t.COLOR,602:t.COLOR,701:t.BOOL,702:t.BOOL,801:t.MTX4x4});switch(x){case 999:j=p.get(1,0);a=this.getAssetByID(j,[h.EFFECTS_METHOD]);if(!a[0]){this._blocks[e].addError("Could not find the EffectMethod (ID = "+j+" ) for this Material")}else{r.addEffectMethod(a[1]);c+=" | EffectMethod-Name = "+a[1].name}break;case 998:j=p.get(1,0);a=this.getAssetByID(j,[h.SHADOW_MAP_METHOD]);if(!a[0]){this._blocks[e].addError("Could not find the ShadowMethod (ID = "+j+" ) for this Material")}else{r.shadowMethod=a[1];c+=" | ShadowMethod-Name = "+a[1].name}break;case 1:j=p.get(1,0);a=this.getAssetByID(j,[h.TEXTURE],"CubeTexture");if(!a[0])this._blocks[e].addError("Could not find the EnvMap (ID = "+j+" ) for this EnvMapAmbientMethodMaterial");r.ambientMethod=new $(a[1]);c+=" | AmbientEnvMapMethod | EnvMap-Name ="+a[1].name;break;case 51:r.diffuseMethod=new et;c+=" | DiffuseDepthMethod";break;case 52:j=p.get(1,0);a=this.getAssetByID(j,[h.TEXTURE]);if(!a[0])this._blocks[e].addError("Could not find the GradientDiffuseTexture (ID = "+j+" ) for this GradientDiffuseMethod");r.diffuseMethod=new rt(a[1]);c+=" | DiffuseGradientMethod | GradientDiffuseTexture-Name ="+a[1].name;break;case 53:r.diffuseMethod=new it(p.get(101,5));c+=" | DiffuseWrapMethod";break;case 54:j=p.get(1,0);a=this.getAssetByID(j,[h.TEXTURE]);if(!a[0])this._blocks[e].addError("Could not find the LightMap (ID = "+j+" ) for this LightMapDiffuseMethod");r.diffuseMethod=new st(a[1],this.blendModeDic[p.get(401,10)],false,r.diffuseMethod);c+=" | DiffuseLightMapMethod | LightMapTexture-Name ="+a[1].name;break;case 55:r.diffuseMethod=new tt(p.get(401,3),r.diffuseMethod);r.diffuseMethod.smoothness=p.get(101,.1);c+=" | DiffuseCelMethod";break;case 56:break;case 101:r.specularMethod=new bt;c+=" | SpecularAnisotropicMethod";break;case 102:r.specularMethod=new wt;c+=" | SpecularPhongMethod";break;case 103:r.specularMethod=new gt(p.get(101,.5),r.specularMethod);r.specularMethod.smoothness=p.get(102,.1);c+=" | SpecularCelMethod";break;case 104:r.specularMethod=new mt(p.get(701,true),r.specularMethod);r.specularMethod.fresnelPower=p.get(101,5);r.specularMethod.normalReflectance=p.get(102,.1);c+=" | SpecularFresnelMethod";break;case 151:break;case 152:j=p.get(1,0);a=this.getAssetByID(j,[h.TEXTURE]);if(!a[0])this._blocks[e].addError("Could not find the SecoundNormalMap (ID = "+j+" ) for this SimpleWaterNormalMethod");if(!r.normalMap)this._blocks[e].addError("Could not find a normal Map on this Material to use with this SimpleWaterNormalMethod");r.normalMap=a[1];r.normalMethod=new dt(r.normalMap,a[1]);c+=" | NormalSimpleWaterMethod | Second-NormalTexture-Name = "+a[1].name;break}this.parseUserAttributes();v+=1}}r.extra=this.parseUserAttributes();this._pFinalizeAsset(r,o);this._blocks[e].data=r;if(this._debug){console.log(c)}};t.prototype.parseTexture=function(e){var t;this._blocks[e].name=this.parseVarStr();var r=this._newBlockBytes.readUnsignedByte();var s;this._texture_users[this._cur_block_id.toString()]=[];if(r==0){s=this._newBlockBytes.readUnsignedInt();var i;i=this._newBlockBytes.readUTFBytes(s);this._pAddDependency(this._cur_block_id.toString(),new l(i),false,null,true)}else{s=this._newBlockBytes.readUnsignedInt();var a;a=new b;this._newBlockBytes.readBytes(a,0,s);this._pAddDependency(this._cur_block_id.toString(),null,false,u.byteArrayToImage(a),true)}this.parseProperties(null);this._blocks[e].extras=this.parseUserAttributes();this._pPauseAndRetrieveDependencies();this._blocks[e].data=t;if(this._debug){var o=["external","embed"];console.log("Start parsing a "+o[r]+" Bitmap for Texture")}};t.prototype.parseCubeTexture=function(e){var t;var r;var s;this._cubeTextures=new Array;this._texture_users[this._cur_block_id.toString()]=[];var i=this._newBlockBytes.readUnsignedByte();this._blocks[e].name=this.parseVarStr();for(s=0;s<6;s++){this._texture_users[this._cur_block_id.toString()]=[];this._cubeTextures.push(null);if(i==0){t=this._newBlockBytes.readUnsignedInt();var a;a=this._newBlockBytes.readUTFBytes(t);this._pAddDependency(this._cur_block_id.toString()+"#"+s,new l(a),false,null,true)}else{t=this._newBlockBytes.readUnsignedInt();var o;o=new b;this._newBlockBytes.readBytes(o,0,t);this._pAddDependency(this._cur_block_id.toString()+"#"+s,null,false,u.byteArrayToImage(o),true)}}this.parseProperties(null);this._blocks[e].extras=this.parseUserAttributes();this._pPauseAndRetrieveDependencies();this._blocks[e].data=r;if(this._debug){var n=["external","embed"];console.log("Start parsing 6 "+n[i]+" Bitmaps for CubeTexture")}};t.prototype.parseSharedMethodBlock=function(e){var t;this._blocks[e].name=this.parseVarStr();t=this.parseSharedMethodList(e);this.parseUserAttributes();this._blocks[e].data=t;this._pFinalizeAsset(t,this._blocks[e].name);this._blocks[e].data=t;if(this._debug){console.log("Parsed a EffectMethod: Name = "+t.name+" Type = "+t)}};t.prototype.parseShadowMethodBlock=function(e){var t;var r;var s;var i;this._blocks[e].name=this.parseVarStr();i=this._newBlockBytes.readUnsignedInt();var a=this.getAssetByID(i,[h.LIGHT]);if(!a[0]){this._blocks[e].addError("Could not find the TargetLight (ID = "+i+" ) for this ShadowMethod - ShadowMethod not created");return}s=this.parseShadowMethodList(a[1],e);if(!s)return;this.parseUserAttributes();this._pFinalizeAsset(s,this._blocks[e].name);this._blocks[e].data=s;if(this._debug){console.log("Parsed a ShadowMapMethodMethod: Name = "+s.name+" | Type = "+s+" | Light-Name = ",a[1].name)}};t.prototype.parseCommand=function(e){var r=this._newBlockBytes.readUnsignedByte()==1;var s=this._newBlockBytes.readUnsignedInt();var i=this.parseMatrix3D();var a=this.parseVarStr();var n;var l;var p=this.getAssetByID(s,[h.CONTAINER,h.LIGHT,h.MESH]);if(p[0]){n=p[1]}var u=this._newBlockBytes.readShort();var c=this._newBlockBytes.readShort();var d=this.parseProperties({1:t.BADDR});switch(c){case 1:var f=d.get(1,0);var y=this.getAssetByID(f,[h.LIGHT,h.TEXTURE_PROJECTOR]);if(!y[0]&&f!=0){this._blocks[e].addError("Could not find the light (ID = "+f+" ( for this CommandBock!");return}l=y[1];if(n){n.addChild(l)}l.transform.matrix3D=i;break}if(l){d=this.parseProperties({1:this._matrixNrType,2:this._matrixNrType,3:this._matrixNrType,4:t.UINT8});l.pivot=new o(d.get(1,0),d.get(2,0),d.get(3,0));l.extra=this.parseUserAttributes()}this._blocks[e].data=l;if(this._debug){console.log("Parsed a CommandBlock: Name = '"+a)}};t.prototype.parseMetaData=function(e){var r=this.parseProperties({1:t.UINT32,2:t.AWDSTRING,3:t.AWDSTRING,4:t.AWDSTRING,5:t.AWDSTRING});if(this._debug){console.log("Parsed a MetaDataBlock: TimeStamp         = "+r.get(1,0));console.log("                        EncoderName       = "+r.get(2,"unknown"));console.log("                        EncoderVersion    = "+r.get(3,"unknown"));console.log("                        GeneratorName     = "+r.get(4,"unknown"));console.log("                        GeneratorVersion  = "+r.get(5,"unknown"))}};t.prototype.parseNameSpace=function(e){var t=this._newBlockBytes.readUnsignedByte();var r=this.parseVarStr();if(this._debug)console.log("Parsed a NameSpaceBlock: ID = "+t+" | String = "+r)};t.prototype.parseShadowMethodList=function(e,r){var s=this._newBlockBytes.readUnsignedShort();var i;var a=this.parseProperties({1:t.BADDR,2:t.BADDR,3:t.BADDR,101:this._propsNrType,102:this._propsNrType,103:this._propsNrType,201:t.UINT32,202:t.UINT32,301:t.UINT16,302:t.UINT16,401:t.UINT8,402:t.UINT8,601:t.COLOR,602:t.COLOR,701:t.BOOL,702:t.BOOL,801:t.MTX4x4});var o;var n;switch(s){case 1002:o=a.get(1,0);n=this.getAssetByID(o,[h.SHADOW_MAP_METHOD]);if(!n[0]){this._blocks[r].addError("Could not find the ShadowBaseMethod (ID = "+o+" ) for this ShadowNearMethod - ShadowMethod not created");return i}i=new vt(n[1]);break;case 1101:i=new yt(e);i.alpha=a.get(101,1);i.epsilon=a.get(102,.002);break;case 1102:i=new ft(e,a.get(201,5));i.alpha=a.get(101,1);i.epsilon=a.get(102,.002);i.range=a.get(103,1);break;case 1103:i=new jt(e,a.get(201,5));i.alpha=a.get(101,1);i.epsilon=a.get(102,.002);i.range=a.get(103,1);break;case 1104:i=new _t(e);i.alpha=a.get(101,1);i.epsilon=a.get(102,.002);break}this.parseUserAttributes();return i};t.prototype.parseSkeleton=function(e){var t=this.parseVarStr();var r=this._newBlockBytes.readUnsignedShort();var s=new z;this.parseProperties(null);var i=0;while(i<r){var a;var o;this._newBlockBytes.readUnsignedShort();a=new X;a.parentIndex=this._newBlockBytes.readUnsignedShort()-1;a.name=this.parseVarStr();o=this.parseMatrix3D();a.inverseBindPose=o.rawData;this.parseProperties(null);this.parseUserAttributes();s.joints.push(a);i++}this.parseUserAttributes();this._pFinalizeAsset(s,t);this._blocks[e].data=s;if(this._debug)console.log("Parsed a Skeleton: Name = "+s.name+" | Number of Joints = "+i)};t.prototype.parseSkeletonPose=function(e){var t=this.parseVarStr();var r=this._newBlockBytes.readUnsignedShort();this.parseProperties(null);var s=new H;var i=0;while(i<r){var o;var n;o=new W;n=this._newBlockBytes.readUnsignedByte();if(n==1){var l=this.parseMatrix43RawData();var h=new a(l);o.orientation.fromMatrix(h);o.translation.copyFrom(h.position);s.jointPoses[i]=o}i++}this.parseUserAttributes();this._pFinalizeAsset(s,t);this._blocks[e].data=s;if(this._debug)console.log("Parsed a SkeletonPose: Name = "+s.name+" | Number of Joints = "+i)};t.prototype.parseSkeletonAnimation=function(e){var t;var r;var s=this.parseVarStr();var i=new Y;var a=this._newBlockBytes.readUnsignedShort();this.parseProperties(null);var o=0;var n;while(o<a){r=this._newBlockBytes.readUnsignedInt();t=this._newBlockBytes.readUnsignedShort();n=this.getAssetByID(r,[h.SKELETON_POSE]);if(!n[0])this._blocks[e].addError("Could not find the SkeletonPose Frame # "+o+" (ID = "+r+" ) for this SkeletonClipNode");else i.addFrame(this._blocks[r].data,t);o++}if(i.frames.length==0){this._blocks[e].addError("Could not this SkeletonClipNode, because no Frames where set.");return}this.parseUserAttributes();this._pFinalizeAsset(i,s);this._blocks[e].data=i;if(this._debug)console.log("Parsed a SkeletonClipNode: Name = "+i.name+" | Number of Frames = "+i.frames.length)};t.prototype.parseMeshPoseAnimation=function(e,r){if(r===void 0){r=false}var s=1;var i;var a;var o;var n;var l;var p;var u;var c;var d;var f;var y;var m=0;var _=new q;var b;var g;var w=0;var x=0;var P=new Array;var D;var T;var A=this.parseVarStr();var C=this._newBlockBytes.readUnsignedInt();var E=this.getAssetByID(C,[h.GEOMETRY]);if(!E[0]){this._blocks[e].addError("Could not find the target-Geometry-Object "+C+" ) for this VertexClipNode");return}var S=this.getUVForVertexAnimation(C);if(!r)s=this._newBlockBytes.readUnsignedShort();i=this._newBlockBytes.readUnsignedShort();w=this._newBlockBytes.readUnsignedShort();x=0;while(x<w){P.push(this._newBlockBytes.readUnsignedShort());x++}D=this.parseProperties({1:t.BOOL,2:t.BOOL});_.looping=D.get(1,true);_.stitchFinalFrame=D.get(2,false);a=0;while(a<s){n=this._newBlockBytes.readUnsignedShort();f=new v;o=0;while(o<i){x=0;c=this._newBlockBytes.readUnsignedInt();d=this._newBlockBytes.position+c;while(x<w){if(P[x]==1){b=E[1].subGeometries[o].indices;g=new Array;m=0;while(this._newBlockBytes.position<d){l=this.readNumber(this._accuracyGeo);p=this.readNumber(this._accuracyGeo);u=this.readNumber(this._accuracyGeo);g[m++]=l;g[m++]=p;g[m++]=u}y=new j(true);y.updateIndices(b);y.updatePositions(g);y.updateUVs(S[o]);y.updateVertexNormals(null);y.updateVertexTangents(null);y.autoDeriveNormals=false;y.autoDeriveTangents=false;o++;f.addSubGeometry(y)}else this._newBlockBytes.position=d;x++}}_.addFrame(f,n);a++}this.parseUserAttributes();this._pFinalizeAsset(_,A);this._blocks[e].data=_;if(this._debug)console.log("Parsed a VertexClipNode: Name = "+_.name+" | Target-Geometry-Name = "+E[1].name+" | Number of Frames = "+_.frames.length)};t.prototype.parseVertexAnimationSet=function(e){var r;var s="";var i=this.parseVarStr();var a=this._newBlockBytes.readUnsignedShort();var o=this.parseProperties({1:t.UINT16});var n=0;var l=new Array;var p=new Array;while(n<a){r=this._newBlockBytes.readUnsignedInt();var u=this.getAssetByID(r,[h.ANIMATION_NODE]);if(!u[0])this._blocks[e].addError("Could not find the AnimationClipNode Nr "+n+" ( "+r+" ) for this AnimationSet");else{if(u[1]instanceof q)p.push(u[1]);if(u[1]instanceof Y)l.push(u[1])}n++}if(p.length==0&&l.length==0){this._blocks[e].addError("Could not create this AnimationSet, because it contains no animations");return}this.parseUserAttributes();if(p.length>0){var c=new F;for(var d=0;d<p.length;d++)c.addAnimation(p[d]);this._pFinalizeAsset(c,i);this._blocks[e].data=c;if(this._debug)console.log("Parsed a VertexAnimationSet: Name = "+i+" | Animations = "+c.animations.length+" | Animation-Names = "+c.animationNames.toString())}else if(l.length>0){u=this.getAssetByID(r,[h.ANIMATION_NODE]);var f=new k(o.get(1,4));for(var d=0;d<l.length;d++)f.addAnimation(l[d]);this._pFinalizeAsset(f,i);this._blocks[e].data=f;if(this._debug)console.log("Parsed a SkeletonAnimationSet: Name = "+i+" | Animations = "+f.animations.length+" | Animation-Names = "+f.animationNames.toString())}};t.prototype.parseAnimatorSet=function(e){var r;var s;var i;var a="";var o=this.parseVarStr();var n=this._newBlockBytes.readUnsignedShort();var l=this.parseProperties({1:t.BADDR});s=this._newBlockBytes.readUnsignedInt();var p=this._newBlockBytes.readUnsignedShort();var u=new Array;for(var c=0;c<p;c++)u.push(this._newBlockBytes.readUnsignedInt());var d=this._newBlockBytes.readUnsignedShort();var f=this._newBlockBytes.readUnsignedByte()==1;this.parseUserAttributes();this.parseUserAttributes();var y;var m=new Array;for(c=0;c<u.length;c++){y=this.getAssetByID(u[c],[h.MESH]);if(y[0])m.push(y[1])}y=this.getAssetByID(s,[h.ANIMATION_SET]);if(!y[0]){this._blocks[e].addError("Could not find the AnimationSet ( "+s+" ) for this Animator");return}i=y[1];var _;if(n==1){y=this.getAssetByID(l.get(1,0),[h.SKELETON]);if(!y[0]){this._blocks[e].addError("Could not find the Skeleton ( "+l.get(1,0)+" ) for this Animator");return}_=new G(i,y[1])}else if(n==2)_=new V(i);this._pFinalizeAsset(_,o);this._blocks[e].data=_;for(c=0;c<m.length;c++){if(n==1)m[c].animator=_;if(n==2)m[c].animator=_}if(this._debug)console.log("Parsed a Animator: Name = "+o)};t.prototype.parseSharedMethodList=function(e){var r=this._newBlockBytes.readUnsignedShort();var s;var a=this.parseProperties({1:t.BADDR,2:t.BADDR,3:t.BADDR,101:this._propsNrType,102:this._propsNrType,103:this._propsNrType,104:this._propsNrType,105:this._propsNrType,106:this._propsNrType,107:this._propsNrType,201:t.UINT32,202:t.UINT32,301:t.UINT16,302:t.UINT16,401:t.UINT8,402:t.UINT8,601:t.COLOR,602:t.COLOR,701:t.BOOL,702:t.BOOL});var o;var n;switch(r){case 401:s=new ot(a.get(101,new Array(0,0,0,1,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)));break;case 402:s=new nt;var l=a.get(601,0);s.colorTransform=new i(a.get(102,1),a.get(103,1),a.get(104,1),a.get(101,1),l>>16&255,l>>8&255,l&255,l>>24&255);break;case 403:o=a.get(1,0);console.log("ENV MAP",o);n=this.getAssetByID(o,[h.TEXTURE],"CubeTexture");if(!n[0])this._blocks[e].addError("Could not find the EnvMap (ID = "+o+" ) for this EnvMapMethod");s=new lt(n[1],a.get(101,1));o=a.get(2,0);if(o>0){n=this.getAssetByID(o,[h.TEXTURE]);if(!n[0])this._blocks[e].addError("Could not find the Mask-texture (ID = "+o+" ) for this EnvMapMethod")}break;case 404:o=a.get(1,0);n=this.getAssetByID(o,[h.TEXTURE]);if(!n[0])this._blocks[e].addError("Could not find the LightMap (ID = "+o+" ) for this LightMapMethod");s=new ut(n[1],this.blendModeDic[a.get(401,10)]);break;case 406:s=new ct(a.get(601,16777215),a.get(101,.4),a.get(101,2));break;case 407:o=a.get(1,0);n=this.getAssetByID(o,[h.TEXTURE]);if(!n[0])this._blocks[e].addError("Could not find the Alpha-texture (ID = "+o+" ) for this AlphaMaskMethod");s=new at(n[1],a.get(701,false));break;case 410:o=a.get(1,0);n=this.getAssetByID(o,[h.TEXTURE],"CubeTexture");if(!n[0])this._blocks[e].addError("Could not find the EnvMap (ID = "+o+" ) for this FresnelEnvMapMethod");s=new pt(n[1],a.get(101,1));break;case 411:s=new ht(a.get(101,0),a.get(102,1e3),a.get(601,8421504));break}this.parseUserAttributes();return s};t.prototype.parseUserAttributes=function(){var e;var r;var s;r=this._newBlockBytes.readUnsignedInt();if(r>0){var i;e={};i=this._newBlockBytes.position+r;while(this._newBlockBytes.position<i){var a;var o;var n;var l;var h;a=this._newBlockBytes.readUnsignedByte();o=this.parseVarStr();n=this._newBlockBytes.readUnsignedByte();l=this._newBlockBytes.readUnsignedInt();if(this._newBlockBytes.position+l>i){console.log("           Error in reading attribute # "+s+" = skipped to end of attribute-list");this._newBlockBytes.position=i;return e}switch(n){case t.AWDSTRING:h=this._newBlockBytes.readUTFBytes(l);break;case t.INT8:h=this._newBlockBytes.readByte();break;case t.INT16:h=this._newBlockBytes.readShort();break;case t.INT32:h=this._newBlockBytes.readInt();break;case t.BOOL:case t.UINT8:h=this._newBlockBytes.readUnsignedByte();break;case t.UINT16:h=this._newBlockBytes.readUnsignedShort();break;case t.UINT32:case t.BADDR:h=this._newBlockBytes.readUnsignedInt();break;case t.FLOAT32:h=this._newBlockBytes.readFloat();break;case t.FLOAT64:h=this._newBlockBytes.readDouble();break;default:h="unimplemented attribute type "+n;this._newBlockBytes.position+=l;break}if(this._debug){console.log("attribute = name: "+o+"  / value = "+h)}e[o]=h;s+=1}}return e};t.prototype.parseProperties=function(e){var t;var r;var s=0;var i=new St;r=this._newBlockBytes.readUnsignedInt();t=this._newBlockBytes.position+r;if(e){while(this._newBlockBytes.position<t){var a;var o;var n;o=this._newBlockBytes.readUnsignedShort();a=this._newBlockBytes.readUnsignedInt();if(this._newBlockBytes.position+a>t){console.log("           Error in reading property # "+s+" = skipped to end of propertie-list");this._newBlockBytes.position=t;return i}if(e.hasOwnProperty(o.toString())){n=e[o];i.set(o,this.parseAttrValue(n,a))}else{this._newBlockBytes.position+=a}s+=1}}else{this._newBlockBytes.position=t}return i};t.prototype.parseAttrValue=function(e,r){var s;var i;switch(e){case t.BOOL:case t.INT8:s=1;i=this._newBlockBytes.readByte;break;case t.INT16:s=2;i=this._newBlockBytes.readShort;break;case t.INT32:s=4;i=this._newBlockBytes.readInt;break;case t.UINT8:s=1;i=this._newBlockBytes.readUnsignedByte;break;case t.UINT16:s=2;i=this._newBlockBytes.readUnsignedShort;break;case t.UINT32:case t.COLOR:case t.BADDR:s=4;i=this._newBlockBytes.readUnsignedInt;break;case t.FLOAT32:s=4;i=this._newBlockBytes.readFloat;break;case t.FLOAT64:s=8;i=this._newBlockBytes.readDouble;break;case t.AWDSTRING:return this._newBlockBytes.readUTFBytes(r);case t.VECTOR2x1:case t.VECTOR3x1:case t.VECTOR4x1:case t.MTX3x2:case t.MTX3x3:case t.MTX4x3:case t.MTX4x4:s=8;i=this._newBlockBytes.readDouble;break}if(s<r){var a=[];var o=0;var n=r/s;while(o<n){a.push(i.apply(this._newBlockBytes));o++}return a}else{var l=i.apply(this._newBlockBytes);return l}};t.prototype.parseHeader=function(){var e;var r;this._byteData.position=3;this._version[0]=this._byteData.readUnsignedByte();this._version[1]=this._byteData.readUnsignedByte();e=this._byteData.readUnsignedShort();this._streaming=Mt.test(e,Mt.FLAG1);if(this._version[0]==2&&this._version[1]==1){this._accuracyMatrix=Mt.test(e,Mt.FLAG2);this._accuracyGeo=Mt.test(e,Mt.FLAG3);this._accuracyProps=Mt.test(e,Mt.FLAG4)}this._geoNrType=t.FLOAT32;if(this._accuracyGeo){this._geoNrType=t.FLOAT64}this._matrixNrType=t.FLOAT32;if(this._accuracyMatrix){this._matrixNrType=t.FLOAT64}this._propsNrType=t.FLOAT32;if(this._accuracyProps){this._propsNrType=t.FLOAT64}this._compression=this._byteData.readUnsignedByte();if(this._debug){console.log("Import AWDFile of version = "+this._version[0]+" - "+this._version[1]);console.log("Global Settings = Compression = "+this._compression+" | Streaming = "+this._streaming+" | Matrix-Precision = "+this._accuracyMatrix+" | Geometry-Precision = "+this._accuracyGeo+" | Properties-Precision = "+this._accuracyProps)}r=this._byteData.readUnsignedInt();if(!this._streaming&&r!=this._byteData.getBytesAvailable()){this._pDieWithError("AWD2 body length does not match header integrity field")}};t.prototype.getUVForVertexAnimation=function(e){if(this._blocks[e].data instanceof T)e=this._blocks[e].geoID;if(this._blocks[e].uvsForVertexAnimation)return this._blocks[e].uvsForVertexAnimation;var t=this._blocks[e].data;var r=0;var s;var i;var a;var o;var n;var l;var h;this._blocks[e].uvsForVertexAnimation=new Array;while(r<t.subGeometries.length){l=new Array;h=t.subGeometries[r];o=h.numVertices;s=h.uvs;i=h.getStride(j.UV_DATA);a=h.getOffset(j.UV_DATA);for(n=0;n<o;n++){l.push(s[a+n*i+0]);l.push(s[a+n*i+1])}this._blocks[e].uvsForVertexAnimation.push(l);r++}return this._blocks[e].uvsForVertexAnimation};t.prototype.parseVarStr=function(){var e=this._newBlockBytes.readUnsignedShort();return this._newBlockBytes.readUTFBytes(e)};t.prototype.getAssetByID=function(e,t,r){if(r===void 0){r="SingleTexture"}var s=new Array;var i=0;if(e>0){if(this._blocks[e]){if(this._blocks[e].data){while(i<t.length){var a=this._blocks[e].data;if(a.assetType==t[i]){if(t[i]==h.TEXTURE&&r=="CubeTexture"){if(this._blocks[e].data instanceof m){s.push(true);s.push(this._blocks[e].data);return s}}if(t[i]==h.TEXTURE&&r=="SingleTexture"){if(this._blocks[e].data instanceof _){s.push(true);s.push(this._blocks[e].data);return s}}else{s.push(true);s.push(this._blocks[e].data);return s}}if(t[i]==h.GEOMETRY&&a.assetType==h.MESH){var o=this._blocks[e].data;s.push(true);s.push(o.geometry);return s}i++}}}}s.push(false);s.push(this.getDefaultAsset(t[0],r));return s};t.prototype.getDefaultAsset=function(e,t){switch(true){case e==h.TEXTURE:if(t=="CubeTexture")return this.getDefaultCubeTexture();if(t=="SingleTexture")return this.getDefaultTexture();break;case e==h.MATERIAL:return this.getDefaultMaterial();break;default:break}return null};t.prototype.getDefaultMaterial=function(){if(!this._defaultBitmapMaterial)this._defaultBitmapMaterial=Z.getDefaultMaterial();return this._defaultBitmapMaterial};t.prototype.getDefaultTexture=function(){if(!this._defaultTexture)this._defaultTexture=Z.getDefaultTexture();return this._defaultTexture};t.prototype.getDefaultCubeTexture=function(){if(!this._defaultCubeTexture){var e=Z.createCheckeredBitmapData();this._defaultCubeTexture=new y(e,e,e,e,e,e);this._defaultCubeTexture.name="defaultCubeTexture"}return this._defaultCubeTexture};t.prototype.readNumber=function(e){if(e===void 0){e=false}if(e)return this._newBlockBytes.readDouble();return this._newBlockBytes.readFloat()};t.prototype.parseMatrix3D=function(){return new a(this.parseMatrix43RawData())};t.prototype.parseMatrix32RawData=function(){var e;var t=new Array(6);for(e=0;e<6;e++){t[e]=this._newBlockBytes.readFloat()}return t};t.prototype.parseMatrix43RawData=function(){var e=new Array(16);e[0]=this.readNumber(this._accuracyMatrix);e[1]=this.readNumber(this._accuracyMatrix);e[2]=this.readNumber(this._accuracyMatrix);e[3]=0;e[4]=this.readNumber(this._accuracyMatrix);e[5]=this.readNumber(this._accuracyMatrix);e[6]=this.readNumber(this._accuracyMatrix);e[7]=0;e[8]=this.readNumber(this._accuracyMatrix);e[9]=this.readNumber(this._accuracyMatrix);e[10]=this.readNumber(this._accuracyMatrix);e[11]=0;e[12]=this.readNumber(this._accuracyMatrix);e[13]=this.readNumber(this._accuracyMatrix);e[14]=this.readNumber(this._accuracyMatrix);e[15]=1;if(isNaN(e[0])){e[0]=1;e[1]=0;e[2]=0;e[4]=0;e[5]=1;e[6]=0;e[8]=0;e[9]=0;e[10]=1;e[12]=0;e[13]=0;e[14]=0}return e};t.COMPRESSIONMODE_LZMA="lzma";t.UNCOMPRESSED=0;t.DEFLATE=1;t.LZMA=2;t.INT8=1;t.INT16=2;t.INT32=3;t.UINT8=4;t.UINT16=5;t.UINT32=6;t.FLOAT32=7;t.FLOAT64=8;t.BOOL=21;t.COLOR=22;t.BADDR=23;t.AWDSTRING=31;t.AWDBYTEARRAY=32;t.VECTOR2x1=41;t.VECTOR3x1=42;t.VECTOR4x1=43;t.MTX3x2=44;t.MTX3x3=45;t.MTX4x3=46;t.MTX4x4=47;return t}(p);var Et=function(){function e(){}e.prototype.dispose=function(){this.id=null;this.bytes=null;this.errorMessages=null;this.uvsForVertexAnimation=null};e.prototype.addError=function(e){if(!this.errorMessages)this.errorMessages=new Array;this.errorMessages.push(e)};return e}();var St=function(){function e(){}e.prototype.set=function(e,t){this[e.toString()]=t};e.prototype.get=function(e,t){if(this.hasOwnProperty(e.toString())){return this[e.toString()]}else{return t}};return e}();var Mt=function(){function e(){}e.test=function(e,t){return(e&t)==t};e.FLAG1=1;e.FLAG2=2;e.FLAG3=4;e.FLAG4=8;e.FLAG5=16;e.FLAG6=32;e.FLAG7=64;e.FLAG8=128;e.FLAG9=256;e.FLAG10=512;e.FLAG11=1024;e.FLAG12=2048;e.FLAG13=4096;e.FLAG14=8192;e.FLAG15=16384;e.FLAG16=32768;return e}();t.exports=Ct},{"awayjs-core/lib/geom/ColorTransform":358,"awayjs-core/lib/geom/Matrix3D":360,"awayjs-core/lib/geom/Vector3D":364,"awayjs-core/lib/library/AssetType":365,"awayjs-core/lib/net/URLLoaderDataFormat":367,"awayjs-core/lib/net/URLRequest":368,"awayjs-core/lib/parsers/ParserBase":370,"awayjs-core/lib/parsers/ParserUtils":371,"awayjs-core/lib/projections/OrthographicOffCenterProjection":374,"awayjs-core/lib/projections/OrthographicProjection":375,"awayjs-core/lib/projections/PerspectiveProjection":376,"awayjs-core/lib/textures/BitmapCubeTexture":378,"awayjs-core/lib/textures/ImageCubeTexture":380,"awayjs-core/lib/textures/ImageTexture":381,"awayjs-core/lib/utils/ByteArray":385,"awayjs-display/lib/base/BlendMode":392,"awayjs-display/lib/base/Geometry":394,"awayjs-display/lib/base/TriangleSubGeometry":402,"awayjs-display/lib/containers/DisplayObjectContainer":404,"awayjs-display/lib/entities/Camera":405,"awayjs-display/lib/entities/DirectionalLight":406,"awayjs-display/lib/entities/Mesh":408,"awayjs-display/lib/entities/PointLight":409,"awayjs-display/lib/entities/Skybox":410,"awayjs-display/lib/entities/TimeLine":411,"awayjs-display/lib/entities/timelinedata/CommandPropsDisplayObject":413,"awayjs-display/lib/entities/timelinedata/FrameCommand":414,"awayjs-display/lib/entities/timelinedata/TimeLineFrame":415,"awayjs-display/lib/entities/timelinedata/TimeLineObject":416,"awayjs-display/lib/materials/lightpickers/StaticLightPicker":424,"awayjs-display/lib/materials/shadowmappers/CubeMapShadowMapper":425,"awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper":426,"awayjs-display/lib/prefabs/PrefabBase":438,"awayjs-display/lib/prefabs/PrimitiveCapsulePrefab":439,"awayjs-display/lib/prefabs/PrimitiveConePrefab":440,"awayjs-display/lib/prefabs/PrimitiveCubePrefab":441,"awayjs-display/lib/prefabs/PrimitiveCylinderPrefab":442,"awayjs-display/lib/prefabs/PrimitivePlanePrefab":443,"awayjs-display/lib/prefabs/PrimitiveSpherePrefab":445,"awayjs-display/lib/prefabs/PrimitiveTorusPrefab":446,"awayjs-methodmaterials/lib/TriangleMaterialMode":486,"awayjs-methodmaterials/lib/TriangleMethodMaterial":487,"awayjs-methodmaterials/lib/methods/AmbientEnvMapMethod":490,"awayjs-methodmaterials/lib/methods/DiffuseCelMethod":492,"awayjs-methodmaterials/lib/methods/DiffuseDepthMethod":494,"awayjs-methodmaterials/lib/methods/DiffuseGradientMethod":495,"awayjs-methodmaterials/lib/methods/DiffuseLightMapMethod":496,"awayjs-methodmaterials/lib/methods/DiffuseWrapMethod":497,"awayjs-methodmaterials/lib/methods/EffectAlphaMaskMethod":498,"awayjs-methodmaterials/lib/methods/EffectColorMatrixMethod":499,"awayjs-methodmaterials/lib/methods/EffectColorTransformMethod":500,"awayjs-methodmaterials/lib/methods/EffectEnvMapMethod":501,"awayjs-methodmaterials/lib/methods/EffectFogMethod":502,"awayjs-methodmaterials/lib/methods/EffectFresnelEnvMapMethod":503,"awayjs-methodmaterials/lib/methods/EffectLightMapMethod":504,"awayjs-methodmaterials/lib/methods/EffectRimLightMethod":506,"awayjs-methodmaterials/lib/methods/NormalSimpleWaterMethod":509,"awayjs-methodmaterials/lib/methods/ShadowDitheredMethod":511,"awayjs-methodmaterials/lib/methods/ShadowFilteredMethod":512,"awayjs-methodmaterials/lib/methods/ShadowHardMethod":513,"awayjs-methodmaterials/lib/methods/ShadowNearMethod":516,"awayjs-methodmaterials/lib/methods/ShadowSoftMethod":517,"awayjs-methodmaterials/lib/methods/SpecularAnisotropicMethod":518,"awayjs-methodmaterials/lib/methods/SpecularCelMethod":520,"awayjs-methodmaterials/lib/methods/SpecularFresnelMethod":522,"awayjs-methodmaterials/lib/methods/SpecularPhongMethod":523,"awayjs-renderergl/lib/animators/SkeletonAnimationSet":668,"awayjs-renderergl/lib/animators/SkeletonAnimator":669,"awayjs-renderergl/lib/animators/VertexAnimationSet":670,"awayjs-renderergl/lib/animators/VertexAnimator":671,"awayjs-renderergl/lib/animators/data/JointPose":672,"awayjs-renderergl/lib/animators/data/Skeleton":673,"awayjs-renderergl/lib/animators/data/SkeletonJoint":674,"awayjs-renderergl/lib/animators/data/SkeletonPose":675,"awayjs-renderergl/lib/animators/nodes/SkeletonClipNode":678,"awayjs-renderergl/lib/animators/nodes/VertexClipNode":679,"awayjs-renderergl/lib/managers/DefaultMaterialManager":693,"awayjs-renderergl/lib/materials/SkyboxMaterial":696}],348:[function(e,t,r){t.exports=e(2)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/base/BitmapData.js":2,"awayjs-core/lib/geom/Rectangle":363,"awayjs-core/lib/utils/ColorUtils":387}],349:[function(e,t,r){t.exports=e(4)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/AbstractMethodError.js":4,"awayjs-core/lib/errors/Error":351}],350:[function(e,t,r){t.exports=e(5)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/ArgumentError.js":5,"awayjs-core/lib/errors/Error":351}],351:[function(e,t,r){t.exports=e(6)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/Error.js":6}],352:[function(e,t,r){t.exports=e(7)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/AssetEvent.js":7,"awayjs-core/lib/events/Event":353}],353:[function(e,t,r){t.exports=e(8)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/Event.js":8}],354:[function(e,t,r){t.exports=e(9)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/EventDispatcher.js":9}],355:[function(e,t,r){t.exports=e(13)
},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/ParserEvent.js":13,"awayjs-core/lib/events/Event":353}],356:[function(e,t,r){t.exports=e(139)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/events/ProjectionEvent.js":139,"awayjs-core/lib/events/Event":353}],357:[function(e,t,r){t.exports=e(15)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/TimerEvent.js":15,"awayjs-core/lib/events/Event":353}],358:[function(e,t,r){t.exports=e(216)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-core/lib/geom/ColorTransform.js":216,"awayjs-core/lib/utils/ColorUtils":387}],359:[function(e,t,r){t.exports=e(16)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Matrix.js":16,"awayjs-core/lib/errors/ArgumentError":350,"awayjs-core/lib/geom/Point":362}],360:[function(e,t,r){t.exports=e(144)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Matrix3D.js":144,"awayjs-core/lib/errors/ArgumentError":350,"awayjs-core/lib/geom/Orientation3D":361,"awayjs-core/lib/geom/Vector3D":364}],361:[function(e,t,r){t.exports=e(146)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Orientation3D.js":146}],362:[function(e,t,r){t.exports=e(17)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Point.js":17}],363:[function(e,t,r){t.exports=e(18)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Rectangle.js":18,"awayjs-core/lib/geom/Point":362}],364:[function(e,t,r){t.exports=e(20)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Vector3D.js":20}],365:[function(e,t,r){t.exports=e(27)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/AssetType.js":27}],366:[function(e,t,r){t.exports=e(33)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/NamedAssetBase.js":33,"awayjs-core/lib/errors/AbstractMethodError":349,"awayjs-core/lib/events/AssetEvent":352,"awayjs-core/lib/events/EventDispatcher":354}],367:[function(e,t,r){t.exports=e(36)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/net/URLLoaderDataFormat.js":36}],368:[function(e,t,r){t.exports=e(37)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/net/URLRequest.js":37,"awayjs-core/lib/net/URLRequestMethod":369}],369:[function(e,t,r){t.exports=e(38)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/net/URLRequestMethod.js":38}],370:[function(e,t,r){t.exports=e(41)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/parsers/ParserBase.js":41,"awayjs-core/lib/errors/AbstractMethodError":349,"awayjs-core/lib/events/AssetEvent":352,"awayjs-core/lib/events/EventDispatcher":354,"awayjs-core/lib/events/ParserEvent":355,"awayjs-core/lib/events/TimerEvent":357,"awayjs-core/lib/parsers/ParserUtils":371,"awayjs-core/lib/parsers/ResourceDependency":372,"awayjs-core/lib/utils/TextureUtils":388,"awayjs-core/lib/utils/Timer":389,"awayjs-core/lib/utils/getTimer":390}],371:[function(e,t,r){t.exports=e(42)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/parsers/ParserUtils.js":42,"awayjs-core/lib/utils/ByteArray":385}],372:[function(e,t,r){t.exports=e(43)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/parsers/ResourceDependency.js":43}],373:[function(e,t,r){t.exports=e(174)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/projections/CoordinateSystem.js":174}],374:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/geom/Vector3D");var a=e("awayjs-core/lib/projections/ProjectionBase");var o=function(e){s(t,e);function t(t,r,s,i){e.call(this);this._minX=t;this._maxX=r;this._minY=s;this._maxY=i}Object.defineProperty(t.prototype,"minX",{get:function(){return this._minX},set:function(e){this._minX=e;this.pInvalidateMatrix()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"maxX",{get:function(){return this._maxX},set:function(e){this._maxX=e;this.pInvalidateMatrix()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"minY",{get:function(){return this._minY},set:function(e){this._minY=e;this.pInvalidateMatrix()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"maxY",{get:function(){return this._maxY},set:function(e){this._maxY=e;this.pInvalidateMatrix()},enumerable:true,configurable:true});t.prototype.unproject=function(e,t,r){var s=new i(e,-t,r,1);s=this.unprojectionMatrix.transformVector(s);s.z=r;return s};t.prototype.clone=function(){var e=new t(this._minX,this._maxX,this._minY,this._maxY);e._pNear=this._pNear;e._pFar=this._pFar;e._pAspectRatio=this._pAspectRatio;return e};t.prototype.pUpdateMatrix=function(){var e=[];var t=1/(this._maxX-this._minX);var r=1/(this._maxY-this._minY);var s=1/(this._pFar-this._pNear);e[0]=2*t;e[5]=2*r;e[10]=s;e[12]=-(this._maxX+this._minX)*t;e[13]=-(this._maxY+this._minY)*r;e[14]=-this._pNear*s;e[15]=1;e[1]=e[2]=e[3]=e[4]=e[6]=e[7]=e[8]=e[9]=e[11]=0;this._pMatrix.copyRawDataFrom(e);this._pFrustumCorners[0]=this._pFrustumCorners[9]=this._pFrustumCorners[12]=this._pFrustumCorners[21]=this._minX;this._pFrustumCorners[3]=this._pFrustumCorners[6]=this._pFrustumCorners[15]=this._pFrustumCorners[18]=this._maxX;this._pFrustumCorners[1]=this._pFrustumCorners[4]=this._pFrustumCorners[13]=this._pFrustumCorners[16]=this._minY;this._pFrustumCorners[7]=this._pFrustumCorners[10]=this._pFrustumCorners[19]=this._pFrustumCorners[22]=this._maxY;this._pFrustumCorners[2]=this._pFrustumCorners[5]=this._pFrustumCorners[8]=this._pFrustumCorners[11]=this._pNear;this._pFrustumCorners[14]=this._pFrustumCorners[17]=this._pFrustumCorners[20]=this._pFrustumCorners[23]=this._pFar;this._pMatrixInvalid=false};return t}(a);t.exports=o},{"awayjs-core/lib/geom/Vector3D":364,"awayjs-core/lib/projections/ProjectionBase":377}],375:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/geom/Vector3D");var a=e("awayjs-core/lib/projections/ProjectionBase");var o=function(e){s(t,e);function t(t){if(t===void 0){t=500}e.call(this);this._projectionHeight=t}Object.defineProperty(t.prototype,"projectionHeight",{get:function(){return this._projectionHeight},set:function(e){if(e==this._projectionHeight){return}this._projectionHeight=e;this.pInvalidateMatrix()},enumerable:true,configurable:true});t.prototype.unproject=function(e,t,r){var s=new i(e+this.matrix.rawData[12],-t+this.matrix.rawData[13],r,1);s=this.unprojectionMatrix.transformVector(s);s.z=r;return s};t.prototype.clone=function(){var e=new t;e._pNear=this._pNear;e._pFar=this._pFar;e._pAspectRatio=this._pAspectRatio;e.projectionHeight=this._projectionHeight;return e};t.prototype.pUpdateMatrix=function(){var e=[];this._yMax=this._projectionHeight*.5;this._xMax=this._yMax*this._pAspectRatio;var t;var r;var s;var i;if(this._pScissorRect.x==0&&this._pScissorRect.y==0&&this._pScissorRect.width==this._pViewPort.width&&this._pScissorRect.height==this._pViewPort.height){t=-this._xMax;r=this._xMax;s=-this._yMax;i=this._yMax;e[0]=2/(this._projectionHeight*this._pAspectRatio);e[5]=2/this._projectionHeight;e[10]=1/(this._pFar-this._pNear);e[14]=this._pNear/(this._pNear-this._pFar);e[1]=e[2]=e[3]=e[4]=e[6]=e[7]=e[8]=e[9]=e[11]=e[12]=e[13]=0;e[15]=1}else{var a=this._xMax*(this._pViewPort.width/this._pScissorRect.width);var o=this._yMax*(this._pViewPort.height/this._pScissorRect.height);var n=this._xMax*(this._pScissorRect.x*2-this._pViewPort.width)/this._pScissorRect.width+this._xMax;var l=-this._yMax*(this._pScissorRect.y*2-this._pViewPort.height)/this._pScissorRect.height-this._yMax;t=n-a;r=n+a;s=l-o;i=l+o;e[0]=2*1/(r-t);e[5]=-2*1/(s-i);e[10]=1/(this._pFar-this._pNear);e[12]=(r+t)/(r-t);e[13]=(i+s)/(i-s);e[14]=this._pNear/(this.near-this.far);e[1]=e[2]=e[3]=e[4]=e[6]=e[7]=e[8]=e[9]=e[11]=0;e[15]=1}this._pFrustumCorners[0]=this._pFrustumCorners[9]=this._pFrustumCorners[12]=this._pFrustumCorners[21]=t;this._pFrustumCorners[3]=this._pFrustumCorners[6]=this._pFrustumCorners[15]=this._pFrustumCorners[18]=r;this._pFrustumCorners[1]=this._pFrustumCorners[4]=this._pFrustumCorners[13]=this._pFrustumCorners[16]=s;this._pFrustumCorners[7]=this._pFrustumCorners[10]=this._pFrustumCorners[19]=this._pFrustumCorners[22]=i;this._pFrustumCorners[2]=this._pFrustumCorners[5]=this._pFrustumCorners[8]=this._pFrustumCorners[11]=this._pNear;this._pFrustumCorners[14]=this._pFrustumCorners[17]=this._pFrustumCorners[20]=this._pFrustumCorners[23]=this._pFar;this._pMatrix.copyRawDataFrom(e);this._pMatrixInvalid=false};return t}(a);t.exports=o},{"awayjs-core/lib/geom/Vector3D":364,"awayjs-core/lib/projections/ProjectionBase":377}],376:[function(e,t,r){t.exports=e(176)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/projections/PerspectiveProjection.js":176,"awayjs-core/lib/geom/Vector3D":364,"awayjs-core/lib/projections/CoordinateSystem":373,"awayjs-core/lib/projections/ProjectionBase":377}],377:[function(e,t,r){t.exports=e(177)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/projections/ProjectionBase.js":177,"awayjs-core/lib/errors/AbstractMethodError":349,"awayjs-core/lib/events/EventDispatcher":354,"awayjs-core/lib/events/ProjectionEvent":356,"awayjs-core/lib/geom/Matrix3D":360,"awayjs-core/lib/geom/Rectangle":363}],378:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/errors/Error");var a=e("awayjs-core/lib/textures/CubeTextureBase");var o=e("awayjs-core/lib/utils/TextureUtils");var n=function(e){s(t,e);function t(t,r,s,i,a,o,n){if(n===void 0){n=false}e.call(this,n);this._bitmapDatas=new Array(6);this._testSize(this._bitmapDatas[0]=t);this._testSize(this._bitmapDatas[1]=r);this._testSize(this._bitmapDatas[2]=s);this._testSize(this._bitmapDatas[3]=i);this._testSize(this._bitmapDatas[4]=a);this._testSize(this._bitmapDatas[5]=o);this.invalidateContent();this._pSetSize(t.width)}Object.defineProperty(t.prototype,"positiveX",{get:function(){return this._bitmapDatas[0]},set:function(e){this._testSize(e);this.invalidateContent();this._pSetSize(e.width);this._bitmapDatas[0]=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"negativeX",{get:function(){return this._bitmapDatas[1]},set:function(e){this._testSize(e);this.invalidateContent();this._pSetSize(e.width);this._bitmapDatas[1]=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"positiveY",{get:function(){return this._bitmapDatas[2]},set:function(e){this._testSize(e);this.invalidateContent();this._pSetSize(e.width);this._bitmapDatas[2]=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"negativeY",{get:function(){return this._bitmapDatas[3]},set:function(e){this._testSize(e);this.invalidateContent();this._pSetSize(e.width);this._bitmapDatas[3]=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"positiveZ",{get:function(){return this._bitmapDatas[4]},set:function(e){this._testSize(e);this.invalidateContent();this._pSetSize(e.width);this._bitmapDatas[4]=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"negativeZ",{get:function(){return this._bitmapDatas[5]},set:function(e){this._testSize(e);this.invalidateContent();this._pSetSize(e.width);this._bitmapDatas[5]=e},enumerable:true,configurable:true});t.prototype._testSize=function(e){if(e.width!=e.height)throw new i("BitmapData should have equal width and height!");if(!o.isBitmapDataValid(e))throw new i("Invalid bitmapData: Width and height must be power of 2 and cannot exceed 2048")};t.prototype.dispose=function(){e.prototype.dispose.call(this);var t=this._bitmapDatas.length;for(var r=0;r<t;r++){this._bitmapDatas[r].dispose();this._bitmapDatas[r]=null}this._bitmapDatas=null};t.prototype._iGetTextureData=function(e){return this._bitmapDatas[e]};return t}(a);t.exports=n},{"awayjs-core/lib/errors/Error":351,"awayjs-core/lib/textures/CubeTextureBase":379,"awayjs-core/lib/utils/TextureUtils":388}],379:[function(e,t,r){t.exports=e(46)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/CubeTextureBase.js":46,"awayjs-core/lib/errors/AbstractMethodError":349,"awayjs-core/lib/textures/MipmapGenerator":382,"awayjs-core/lib/textures/TextureProxyBase":384}],380:[function(e,t,r){t.exports=e(47)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/ImageCubeTexture.js":47,"awayjs-core/lib/errors/Error":351,"awayjs-core/lib/textures/CubeTextureBase":379,"awayjs-core/lib/utils/TextureUtils":388}],381:[function(e,t,r){t.exports=e(48)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/ImageTexture.js":48,"awayjs-core/lib/errors/Error":351,"awayjs-core/lib/textures/Texture2DBase":383,"awayjs-core/lib/utils/TextureUtils":388}],382:[function(e,t,r){t.exports=e(49)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/MipmapGenerator.js":49,"awayjs-core/lib/base/BitmapData":348,"awayjs-core/lib/geom/Matrix":359,"awayjs-core/lib/geom/Rectangle":363}],383:[function(e,t,r){t.exports=e(51)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/Texture2DBase.js":51,"awayjs-core/lib/errors/AbstractMethodError":349,"awayjs-core/lib/textures/MipmapGenerator":382,"awayjs-core/lib/textures/TextureProxyBase":384}],384:[function(e,t,r){t.exports=e(52)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/TextureProxyBase.js":52,"awayjs-core/lib/library/AssetType":365,"awayjs-core/lib/library/NamedAssetBase":366}],385:[function(e,t,r){t.exports=e(54)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/ByteArray.js":54,"awayjs-core/lib/utils/ByteArrayBase":386}],386:[function(e,t,r){t.exports=e(55)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/ByteArrayBase.js":55,"awayjs-core/lib/errors/AbstractMethodError":349}],387:[function(e,t,r){t.exports=e(56)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/ColorUtils.js":56}],388:[function(e,t,r){t.exports=e(58)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/TextureUtils.js":58}],389:[function(e,t,r){t.exports=e(59)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/Timer.js":59,"awayjs-core/lib/errors/Error":351,"awayjs-core/lib/events/EventDispatcher":354,"awayjs-core/lib/events/TimerEvent":357}],390:[function(e,t,r){t.exports=e(60)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/getTimer.js":60}],391:[function(e,t,r){t.exports=e(61)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/AlignmentMode.js":61}],392:[function(e,t,r){t.exports=e(62)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/BlendMode.js":62}],393:[function(e,t,r){t.exports=e(63)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/DisplayObject.js":63,"awayjs-core/lib/bounds/AxisAlignedBoundingBox":450,"awayjs-core/lib/errors/AbstractMethodError":454,"awayjs-core/lib/geom/MathConsts":464,"awayjs-core/lib/geom/Matrix3D":466,"awayjs-core/lib/geom/Matrix3DUtils":467,"awayjs-core/lib/geom/Point":471,"awayjs-core/lib/geom/Vector3D":473,"awayjs-core/lib/library/NamedAssetBase":475,"awayjs-display/lib/base/AlignmentMode":391,"awayjs-display/lib/base/OrientationMode":398,"awayjs-display/lib/base/Transform":401,"awayjs-display/lib/events/DisplayObjectEvent":418,"awayjs-display/lib/events/SceneEvent":421,"awayjs-display/lib/pick/PickingCollisionVO":435}],394:[function(e,t,r){t.exports=e(64)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/Geometry.js":64,"awayjs-core/lib/library/AssetType":474,"awayjs-core/lib/library/NamedAssetBase":475,"awayjs-display/lib/events/GeometryEvent":419}],395:[function(e,t,r){t.exports=e(65)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/LightBase.js":65,"awayjs-core/lib/errors/AbstractMethodError":454,"awayjs-core/lib/library/AssetType":474,"awayjs-display/lib/containers/DisplayObjectContainer":404,"awayjs-display/lib/events/LightEvent":420}],396:[function(e,t,r){t.exports=e(66)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/LineSubGeometry.js":66,"awayjs-display/lib/base/LineSubMesh":397,"awayjs-display/lib/base/SubGeometryBase":399,"awayjs-display/lib/base/TriangleSubGeometry":402,"awayjs-display/lib/events/SubGeometryEvent":422}],397:[function(e,t,r){t.exports=e(67)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/LineSubMesh.js":67,"awayjs-core/lib/library/AssetType":474,"awayjs-display/lib/base/SubMeshBase":400}],398:[function(e,t,r){t.exports=e(68)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/OrientationMode.js":68}],399:[function(e,t,r){t.exports=e(69)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/SubGeometryBase.js":69,"awayjs-core/lib/errors/AbstractMethodError":454,"awayjs-core/lib/library/NamedAssetBase":475,"awayjs-display/lib/events/SubGeometryEvent":422}],400:[function(e,t,r){t.exports=e(70)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/SubMeshBase.js":70,"awayjs-core/lib/errors/AbstractMethodError":454,"awayjs-core/lib/library/NamedAssetBase":475}],401:[function(e,t,r){t.exports=e(71)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/Transform.js":71,"awayjs-core/lib/geom/Matrix3D":466,"awayjs-core/lib/geom/Matrix3DUtils":467,"awayjs-core/lib/geom/Vector3D":473}],402:[function(e,t,r){t.exports=e(72)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/TriangleSubGeometry.js":72,"awayjs-core/lib/geom/Vector3D":473,"awayjs-display/lib/base/SubGeometryBase":399,"awayjs-display/lib/base/TriangleSubMesh":403,"awayjs-display/lib/events/SubGeometryEvent":422}],403:[function(e,t,r){t.exports=e(73)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/TriangleSubMesh.js":73,"awayjs-core/lib/library/AssetType":474,"awayjs-display/lib/base/SubMeshBase":400}],404:[function(e,t,r){t.exports=e(74)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/containers/DisplayObjectContainer.js":74,"awayjs-core/lib/errors/ArgumentError":455,"awayjs-core/lib/errors/Error":456,"awayjs-core/lib/errors/RangeError":458,"awayjs-core/lib/library/AssetType":474,"awayjs-display/lib/base/DisplayObject":393}],405:[function(e,t,r){t.exports=e(80)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/entities/Camera.js":80,"awayjs-core/lib/bounds/NullBounds":453,"awayjs-core/lib/events/ProjectionEvent":462,"awayjs-core/lib/geom/Matrix3D":466,"awayjs-core/lib/geom/Plane3D":469,"awayjs-core/lib/library/AssetType":474,"awayjs-core/lib/projections/PerspectiveProjection":478,"awayjs-display/lib/containers/DisplayObjectContainer":404,"awayjs-display/lib/events/CameraEvent":417,"awayjs-display/lib/partition/CameraNode":428}],406:[function(e,t,r){t.exports=e(81)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/entities/DirectionalLight.js":81,"awayjs-core/lib/bounds/NullBounds":453,"awayjs-core/lib/geom/Matrix3D":466,"awayjs-core/lib/geom/Vector3D":473,"awayjs-display/lib/base/LightBase":395,"awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper":426,"awayjs-display/lib/partition/DirectionalLightNode":429}],407:[function(e,t,r){t.exports=e(82)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/entities/LightProbe.js":82,"awayjs-core/lib/bounds/NullBounds":453,"awayjs-core/lib/errors/Error":456,"awayjs-display/lib/base/LightBase":395,"awayjs-display/lib/partition/LightProbeNode":431}],408:[function(e,t,r){t.exports=e(83)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/entities/Mesh.js":83,"awayjs-core/lib/library/AssetType":474,"awayjs-display/lib/base/Geometry":394,"awayjs-display/lib/containers/DisplayObjectContainer":404,"awayjs-display/lib/events/GeometryEvent":419,"awayjs-display/lib/partition/EntityNode":430}],409:[function(e,t,r){t.exports=e(84)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/entities/PointLight.js":84,"awayjs-core/lib/bounds/BoundingSphere":451,"awayjs-core/lib/geom/Matrix3D":466,"awayjs-core/lib/geom/Vector3D":473,"awayjs-display/lib/base/LightBase":395,"awayjs-display/lib/materials/shadowmappers/CubeMapShadowMapper":425,"awayjs-display/lib/partition/PointLightNode":433}],410:[function(e,t,r){t.exports=e(85)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/entities/Skybox.js":85,"awayjs-core/lib/bounds/NullBounds":453,"awayjs-core/lib/library/AssetType":474,"awayjs-display/lib/base/DisplayObject":393,"awayjs-display/lib/partition/SkyboxNode":434}],411:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/library/AssetType");var a=e("awayjs-display/lib/containers/DisplayObjectContainer");var o=function(e){s(t,e);function t(){e.call(this);this._duration=0;this._timeLineObjs=new Array;this._frames=new Array;this._currentFrame=0;this._speed=1;this._isplaying=false;this._fps=25;this._time=0;this._duration=0;this._playMode=1}Object.defineProperty(t.prototype,"speed",{get:function(){return this._speed},set:function(e){this._speed=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"fps",{get:function(){return this._fps},set:function(e){this._fps=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"assetType",{get:function(){return i.TIMELINE},enumerable:true,configurable:true});t.prototype.update=function(e,t){if(t===void 0){t=false}var r;if(this._isplaying||!this._isInit||t){var e=e*this._speed;this._time+=e;while(this._time>this._duration){if(this._playMode==0){this._time=this._duration;this.stop()}else if(this._playMode==1){this._time-=this._duration}}while(this._time<0){if(this._playMode==0){this._time=0;this.stop()}else if(this._playMode==1){this._time+=this._duration}}var s=0;var a;var o=false;while(s<this._frames.length){a=this._frames[this._currentFrame];if(this._time>=a.startTime&&this._time<=a.endTime){o=true;s=this._frames.length}else{a.makeDirty();if(this._speed<0){this._currentFrame--;if(this._currentFrame<0){this._currentFrame=this._frames.length-1}}else{this._currentFrame++;if(this._currentFrame>=this._frames.length){this._currentFrame=0}}}s++}if(o){if(a.isDirty){var n=1;if(this._speed<0){n=2}n=0;for(r=0;r<this._timeLineObjs.length;r++){if(this._timeLineObjs[r].isActive){this._timeLineObjs[r].deactivate()}}a.executeCommands(1,this._time,this._speed);this.executeFrameScript(a.script)}else{}}this._isInit=true}for(r=0;r<this._timeLineObjs.length;r++){if(this._timeLineObjs[r].isActive){if(this._timeLineObjs[r].asset.assetType==i.TIMELINE){this._timeLineObjs[r].asset.update(e)}}}};t.prototype.addFrame=function(e){this._duration+=e.duration;this._frames.push(e)};Object.defineProperty(t.prototype,"duration",{get:function(){return this._duration},set:function(e){this._duration=e},enumerable:true,configurable:true});t.prototype.executeFrameScript=function(e){};t.prototype.start=function(){this._isplaying=true;this.update(0)};t.prototype.stop=function(){this._isplaying=false};t.prototype.gotoAndPlay=function(e){this._time=e*(1e3/this._fps);this._isplaying=true;this.update(0,true)};t.prototype.gotoAndStop=function(e){this._time=e*(1e3/this._fps);this.update(0,true);this._isplaying=false};t.prototype.gotoAndPlayLabel=function(e){var t=-1;for(var r=0;r<this._frames.length;r++){for(var s=0;s<this._frames[r].framelabels.length;s++){if(this._frames[r].framelabels[s]==e){s=this._frames[r].framelabels.length;t=r;r=this._frames.length}}}if(t>=0){this._time=t*(1e3/this._fps);this._isplaying=true;this.update(0,true)}};t.prototype.gotoAndStopLabel=function(e){var t=-1;for(var r=0;r<this._frames.length;r++){for(var s=0;s<this._frames[r].framelabels.length;s++){if(this._frames[r].framelabels[s]==e){s=this._frames[r].framelabels.length;t=r;r=this._frames.length}}}if(t>=0){this._time=t*(1e3/this._fps);this.update(0,true);this._isplaying=false}};t.prototype.gotoAndPlayTime=function(e){this._time=e;this._isplaying=true;this.update(0,true)};t.prototype.gotoAndStopTime=function(e){this._time=e;this.update(0,true);this._isplaying=false};t.prototype.addTimeLineObject=function(e,t){if(t===void 0){t=true}if(t){this.addChild(e.asset)}e.deactivate();this._timeLineObjs.push(e)};t.prototype.getTimeLineObjectByID=function(e){for(var t=0;t<this._timeLineObjs.length;t++){if(this._timeLineObjs[t].objID==e){return this._timeLineObjs[t]}}return undefined};t.prototype.getObjectByInstanceName=function(e){for(var t=0;t<this._timeLineObjs.length;t++){if(this._timeLineObjs[t].asset.name==e){return this._timeLineObjs[t].asset}}};return t}(a);t.exports=o},{"awayjs-core/lib/library/AssetType":474,"awayjs-display/lib/containers/DisplayObjectContainer":404}],412:[function(e,t,r){var s=function(){function e(){}e.prototype.deactivate=function(e){};e.prototype.apply=function(e,t,r){};return e}();t.exports=s},{}],413:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-display/lib/entities/timelinedata/CommandPropsBase");var a=function(e){s(t,e);function t(){e.call(this);this._doDisplaymatrix=0;this._doColorTransform=0;this._doInstanceName=false;this._doDepth=false;this._doFilters=false;this._doDepthClip=false;this._doBlendMode=false}t.prototype.setBlendMode=function(e){this._blendMode=e;this._doBlendMode=true};t.prototype.setClipDepth=function(e){this._depthClip=e;this._doDepthClip=true};t.prototype.setFilter=function(e){this._filter=e;this._doFilters=true};t.prototype.setDepth=function(e){this._depth=e;this._doDepth=true};t.prototype.setDisplaymatrixInterpolate=function(e){this._displayMatrixInterpolate=e;this._doDisplaymatrix=2};t.prototype.setDisplaymatrix=function(e){this._displayMatrix=e;this._doDisplaymatrix=1};t.prototype.setColorTransform=function(e){this._colorTransform=e;this._doColorTransform=1};t.prototype.setColorTranformInterpolate=function(e){this._colorTransformInterpolate=e;this._doColorTransform=2};t.prototype.setInstancename=function(e){this._instanceName=e;this._doInstanceName=true};t.prototype.deactivate=function(e){e.visible=false};t.prototype.apply=function(e,t,r){e.visible=true;if(this._doDisplaymatrix==1){e.transform.matrix3D=this._displayMatrix}else if(this._doDisplaymatrix==2){}if(this._doColorTransform==1){}else if(this._doColorTransform==2){}if(this._doInstanceName){e.name=this._instanceName}if(this._doDepth){}if(this._doBlendMode){}if(this._doDepthClip){}if(this._doFilters){}};return t}(i);t.exports=a},{"awayjs-display/lib/entities/timelinedata/CommandPropsBase":412}],414:[function(e,t,r){var s=function(){function e(e){this._tlObj=e;this.commandProps=null;this._activate=true}Object.defineProperty(e.prototype,"activateObj",{get:function(){return this._activate},set:function(e){this._activate=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"commandProps",{get:function(){return this._commandProps},set:function(e){this._commandProps=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"tlObj",{get:function(){return this._tlObj},set:function(e){this._tlObj=e},enumerable:true,configurable:true});e.prototype.execute=function(e,t){if(this.commandProps==undefined)return;if(this._activate){this.tlObj.isActive=true;this.commandProps.apply(this.tlObj.asset,e,t)}else{this.tlObj.isActive=false;this.commandProps.deactivate(this.tlObj.asset)}};return e}();t.exports=s},{}],415:[function(e,t,r){var s=function(){function e(){this._isDirty=true;this._script="";this._duration=1;this._frameCommands=new Array;this._frameCommandsReverse=new Array;this._frameCommandsInit=new Array;this._framelabels=new Array;this._labelTypes=new Array}e.prototype.addCommand=function(e){this._frameCommands.push(e)};e.prototype.addCommandReverse=function(e){this._frameCommandsReverse.push(e)};e.prototype.addCommandInit=function(e){this._frameCommandsInit.push(e)};e.prototype.addLabel=function(e,t){this._framelabels.push(e);this._labelTypes.push(t)};Object.defineProperty(e.prototype,"framelabels",{get:function(){return this._framelabels},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"labelTypes",{get:function(){return this._labelTypes},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"script",{get:function(){return this._script},enumerable:true,configurable:true});e.prototype.addToScript=function(e){this._script+=e};Object.defineProperty(e.prototype,"isDirty",{get:function(){return this._isDirty},enumerable:true,configurable:true});e.prototype.makeDirty=function(){this._isDirty=true};Object.defineProperty(e.prototype,"startTime",{get:function(){return this._startTime},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"endTime",{get:function(){return this._endTime},enumerable:true,configurable:true});e.prototype.setFrameTime=function(e,t){this._startTime=e;this._duration=t;this._endTime=e+t};e.prototype.executeCommands=function(e,t,r){if(e==0){for(var s=0;s<this._frameCommandsInit.length;s++){this._frameCommandsInit[s].execute(t,r)}}else if(e==1){for(var s=0;s<this._frameCommands.length;s++){this._frameCommands[s].execute(t,r)}}else if(e==2){for(var s=0;s<this._frameCommandsReverse.length;s++){this._frameCommandsReverse[s].execute(t,r)}}this._isDirty=false};return e}();t.exports=s},{}],416:[function(e,t,r){var s=function(){function e(e,t,r){this._asset=e;this._objID=t;this._is2D=true;this._isActive=false;this._deactivateCommandProps=r;this._deactivateCommandProps.deactivate(this._asset)}Object.defineProperty(e.prototype,"deactivateCommandProps",{set:function(e){this._deactivateCommandProps=e},enumerable:true,configurable:true});e.prototype.deactivate=function(){this._deactivateCommandProps.deactivate(this._asset);this._isActive=false};Object.defineProperty(e.prototype,"asset",{get:function(){return this._asset},set:function(e){this._asset=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"objID",{get:function(){return this._objID},set:function(e){this._objID=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"is2D",{get:function(){return this._is2D},set:function(e){this._is2D=e
},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},set:function(e){this._isActive=e},enumerable:true,configurable:true});return e}();t.exports=s},{}],417:[function(e,t,r){t.exports=e(87)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/CameraEvent.js":87,"awayjs-core/lib/events/Event":460}],418:[function(e,t,r){t.exports=e(88)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/DisplayObjectEvent.js":88,"awayjs-core/lib/events/Event":460}],419:[function(e,t,r){t.exports=e(89)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/GeometryEvent.js":89,"awayjs-core/lib/events/Event":460}],420:[function(e,t,r){t.exports=e(90)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/LightEvent.js":90,"awayjs-core/lib/events/Event":460}],421:[function(e,t,r){t.exports=e(93)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/SceneEvent.js":93,"awayjs-core/lib/events/Event":460}],422:[function(e,t,r){t.exports=e(94)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/SubGeometryEvent.js":94,"awayjs-core/lib/events/Event":460}],423:[function(e,t,r){t.exports=e(96)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/materials/lightpickers/LightPickerBase.js":96,"awayjs-core/lib/library/AssetType":474,"awayjs-core/lib/library/NamedAssetBase":475}],424:[function(e,t,r){t.exports=e(97)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/materials/lightpickers/StaticLightPicker.js":97,"awayjs-core/lib/events/Event":460,"awayjs-display/lib/entities/DirectionalLight":406,"awayjs-display/lib/entities/LightProbe":407,"awayjs-display/lib/entities/PointLight":409,"awayjs-display/lib/events/LightEvent":420,"awayjs-display/lib/materials/lightpickers/LightPickerBase":423}],425:[function(e,t,r){t.exports=e(98)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/materials/shadowmappers/CubeMapShadowMapper.js":98,"awayjs-core/lib/errors/PartialImplementationError":457,"awayjs-display/lib/entities/Camera":405,"awayjs-display/lib/materials/shadowmappers/ShadowMapperBase":427}],426:[function(e,t,r){t.exports=e(99)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper.js":99,"awayjs-core/lib/geom/Matrix3D":466,"awayjs-core/lib/projections/FreeMatrixProjection":477,"awayjs-display/lib/entities/Camera":405,"awayjs-display/lib/materials/shadowmappers/ShadowMapperBase":427}],427:[function(e,t,r){t.exports=e(100)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/materials/shadowmappers/ShadowMapperBase.js":100,"awayjs-core/lib/errors/AbstractMethodError":454,"awayjs-core/lib/textures/RenderTexture":481,"awayjs-display/lib/traverse/ShadowCasterCollector":448}],428:[function(e,t,r){t.exports=e(101)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/partition/CameraNode.js":101,"awayjs-display/lib/partition/EntityNode":430}],429:[function(e,t,r){t.exports=e(102)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/partition/DirectionalLightNode.js":102,"awayjs-display/lib/partition/EntityNode":430}],430:[function(e,t,r){t.exports=e(103)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/partition/EntityNode.js":103,"awayjs-core/lib/errors/PartialImplementationError":457,"awayjs-display/lib/partition/NodeBase":432}],431:[function(e,t,r){t.exports=e(104)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/partition/LightProbeNode.js":104,"awayjs-display/lib/partition/EntityNode":430}],432:[function(e,t,r){t.exports=e(105)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/partition/NodeBase.js":105}],433:[function(e,t,r){t.exports=e(108)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/partition/PointLightNode.js":108,"awayjs-display/lib/partition/EntityNode":430}],434:[function(e,t,r){t.exports=e(109)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/partition/SkyboxNode.js":109,"awayjs-display/lib/partition/EntityNode":430}],435:[function(e,t,r){t.exports=e(110)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/pick/PickingCollisionVO.js":110}],436:[function(e,t,r){t.exports=e(112)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/pool/EntityListItem.js":112}],437:[function(e,t,r){t.exports=e(113)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/pool/EntityListItemPool.js":113,"awayjs-display/lib/pool/EntityListItem":436}],438:[function(e,t,r){t.exports=e(114)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/prefabs/PrefabBase.js":114,"awayjs-core/lib/errors/AbstractMethodError":454,"awayjs-core/lib/library/NamedAssetBase":475}],439:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-display/lib/prefabs/PrimitivePrefabBase");var a=function(e){s(t,e);function t(t,r,s,i,a){if(t===void 0){t=50}if(r===void 0){r=100}if(s===void 0){s=16}if(i===void 0){i=15}if(a===void 0){a=true}e.call(this);this._numVertices=0;this._radius=t;this._height=r;this._segmentsW=s;this._segmentsH=i%2==0?i+1:i;this._yUp=a}Object.defineProperty(t.prototype,"radius",{get:function(){return this._radius},set:function(e){this._radius=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"segmentsW",{get:function(){return this._segmentsW},set:function(e){this._segmentsW=e;this._pInvalidateGeometry();this._pInvalidateUVs()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"segmentsH",{get:function(){return this._segmentsH},set:function(e){this._segmentsH=e%2==0?e+1:e;this._pInvalidateGeometry();this._pInvalidateUVs()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"yUp",{get:function(){return this._yUp},set:function(e){this._yUp=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});t.prototype._pBuildGeometry=function(e,t){var r;var s;var i;var a;var o;var n;var l=0;var h=0;var p;var u,c,d,f;var y=0;if(t=="triangleSubGeometry"){var m=e;this._numVertices=(this._segmentsH+1)*(this._segmentsW+1);y=(this._segmentsH-1)*this._segmentsW*6;if(this._numVertices==m.numVertices){r=m.indices;s=m.positions;i=m.vertexNormals;a=m.vertexTangents}else{r=new Array(y);s=new Array(this._numVertices*3);i=new Array(this._numVertices*3);a=new Array(this._numVertices*3);this._pInvalidateUVs()}for(n=0;n<=this._segmentsH;++n){var _=Math.PI*n/this._segmentsH;var b=-this._radius*Math.cos(_);var g=this._radius*Math.sin(_);p=h;for(o=0;o<=this._segmentsW;++o){var w=2*Math.PI*o/this._segmentsW;var v=g*Math.cos(w);var j=n>this._segmentsH/2?this._height/2:-this._height/2;var x=g*Math.sin(w);var P=1/Math.sqrt(v*v+x*x+b*b);var D=Math.sqrt(x*x+v*v);if(this._yUp){d=0;f=D>.007?v/D:0;u=-b;c=x}else{d=D>.007?v/D:0;f=0;u=x;c=b}if(o==this._segmentsW){s[h]=s[p];s[h+1]=s[p+1];s[h+2]=s[p+2];i[h]=(i[p]+v*P)*.5;i[h+1]=(i[p+1]+u*P)*.5;i[h+2]=(i[p+2]+c*P)*.5;a[h]=(a[p]+(D>.007?-x/D:1))*.5;a[h+1]=(a[p+1]+d)*.5;a[h+2]=(a[p+2]+f)*.5}else{s[h]=v;s[h+1]=this._yUp?u-j:u;s[h+2]=this._yUp?c:c+j;i[h]=v*P;i[h+1]=u*P;i[h+2]=c*P;a[h]=D>.007?-x/D:1;a[h+1]=d;a[h+2]=f}if(o>0&&n>0){var T=(this._segmentsW+1)*n+o;var A=(this._segmentsW+1)*n+o-1;var C=(this._segmentsW+1)*(n-1)+o-1;var E=(this._segmentsW+1)*(n-1)+o;if(n==this._segmentsH){s[h]=s[p];s[h+1]=s[p+1];s[h+2]=s[p+2];r[l++]=T;r[l++]=C;r[l++]=E}else if(n==1){r[l++]=T;r[l++]=A;r[l++]=C}else{r[l++]=T;r[l++]=A;r[l++]=C;r[l++]=T;r[l++]=C;r[l++]=E}}h+=3}}m.updateIndices(r);m.updatePositions(s);m.updateVertexNormals(i);m.updateVertexTangents(a)}else if(t=="lineSubGeometry"){}};t.prototype._pBuildUVs=function(e,t){var r,s;var i;if(t=="triangleSubGeometry"){var a=e;if(a.uvs&&this._numVertices==a.numVertices){i=a.uvs}else{i=new Array(this._numVertices*2)}var o=0;for(s=0;s<=this._segmentsH;++s){for(r=0;r<=this._segmentsW;++r){i[o++]=r/this._segmentsW*a.scaleU;i[o++]=s/this._segmentsH*a.scaleV}}a.updateUVs(i)}else if(t=="lineSubGeometry"){}};return t}(i);t.exports=a},{"awayjs-display/lib/prefabs/PrimitivePrefabBase":444}],440:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-display/lib/prefabs/PrimitiveCylinderPrefab");var a=function(e){s(t,e);function t(t,r,s,i,a,o){if(t===void 0){t=50}if(r===void 0){r=100}if(s===void 0){s=16}if(i===void 0){i=1}if(a===void 0){a=true}if(o===void 0){o=true}e.call(this,0,t,r,s,i,false,a,true,o)}Object.defineProperty(t.prototype,"radius",{get:function(){return this._pBottomRadius},set:function(e){this._pBottomRadius=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});return t}(i);t.exports=a},{"awayjs-display/lib/prefabs/PrimitiveCylinderPrefab":442}],441:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-display/lib/prefabs/PrimitivePrefabBase");var a=function(e){s(t,e);function t(t,r,s,i,a,o,n){if(t===void 0){t=100}if(r===void 0){r=100}if(s===void 0){s=100}if(i===void 0){i=1}if(a===void 0){a=1}if(o===void 0){o=1}if(n===void 0){n=true}e.call(this);this._width=t;this._height=r;this._depth=s;this._segmentsW=i;this._segmentsH=a;this._segmentsD=o;this._tile6=n}Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"depth",{get:function(){return this._depth},set:function(e){this._depth=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"tile6",{get:function(){return this._tile6},set:function(e){this._tile6=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"segmentsW",{get:function(){return this._segmentsW},set:function(e){this._segmentsW=e;this._pInvalidateGeometry();this._pInvalidateUVs()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"segmentsH",{get:function(){return this._segmentsH},set:function(e){this._segmentsH=e;this._pInvalidateGeometry();this._pInvalidateUVs()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"segmentsD",{get:function(){return this._segmentsD},set:function(e){this._segmentsD=e;this._pInvalidateGeometry();this._pInvalidateUVs()},enumerable:true,configurable:true});t.prototype._pBuildGeometry=function(e,t){var r;var s;var i;var a;var o,n,l,h;var p,u,c=0;var d,f;var y,m,_;var b,g,w;var v;var j;var x;y=this._width/2;m=this._height/2;_=this._depth/2;if(t=="triangleSubGeometry"){var P=e;x=((this._segmentsW+1)*(this._segmentsH+1)+(this._segmentsW+1)*(this._segmentsD+1)+(this._segmentsH+1)*(this._segmentsD+1))*2;j=(this._segmentsW*this._segmentsH+this._segmentsW*this._segmentsD+this._segmentsH*this._segmentsD)*12;if(x==P.numVertices&&P.indices!=null){r=P.indices;s=P.positions;i=P.vertexNormals;a=P.vertexTangents}else{r=new Array(j);s=new Array(x*3);i=new Array(x*3);a=new Array(x*3);this._pInvalidateUVs()}d=0;f=0;b=this._width/this._segmentsW;g=this._height/this._segmentsH;w=this._depth/this._segmentsD;for(p=0;p<=this._segmentsW;p++){v=-y+p*b;for(u=0;u<=this._segmentsH;u++){s[d]=v;s[d+1]=-m+u*g;s[d+2]=-_;i[d]=0;i[d+1]=0;i[d+2]=-1;a[d]=1;a[d+1]=0;a[d+2]=0;d+=3;s[d]=v;s[d+1]=-m+u*g;s[d+2]=_;i[d]=0;i[d+1]=0;i[d+2]=1;a[d]=-1;a[d+1]=0;a[d+2]=0;d+=3;if(p&&u){o=2*((p-1)*(this._segmentsH+1)+(u-1));n=2*(p*(this._segmentsH+1)+(u-1));l=o+2;h=n+2;r[f++]=o;r[f++]=l;r[f++]=h;r[f++]=o;r[f++]=h;r[f++]=n;r[f++]=n+1;r[f++]=h+1;r[f++]=l+1;r[f++]=n+1;r[f++]=l+1;r[f++]=o+1}}}c+=2*(this._segmentsW+1)*(this._segmentsH+1);for(p=0;p<=this._segmentsW;p++){v=-y+p*b;for(u=0;u<=this._segmentsD;u++){s[d]=v;s[d+1]=m;s[d+2]=-_+u*w;i[d]=0;i[d+1]=1;i[d+2]=0;a[d]=1;a[d+1]=0;a[d+2]=0;d+=3;s[d]=v;s[d+1]=-m;s[d+2]=-_+u*w;i[d]=0;i[d+1]=-1;i[d+2]=0;a[d]=1;a[d+1]=0;a[d+2]=0;d+=3;if(p&&u){o=c+2*((p-1)*(this._segmentsD+1)+(u-1));n=c+2*(p*(this._segmentsD+1)+(u-1));l=o+2;h=n+2;r[f++]=o;r[f++]=l;r[f++]=h;r[f++]=o;r[f++]=h;r[f++]=n;r[f++]=n+1;r[f++]=h+1;r[f++]=l+1;r[f++]=n+1;r[f++]=l+1;r[f++]=o+1}}}c+=2*(this._segmentsW+1)*(this._segmentsD+1);for(p=0;p<=this._segmentsD;p++){v=_-p*w;for(u=0;u<=this._segmentsH;u++){s[d]=-y;s[d+1]=-m+u*g;s[d+2]=v;i[d]=-1;i[d+1]=0;i[d+2]=0;a[d]=0;a[d+1]=0;a[d+2]=-1;d+=3;s[d]=y;s[d+1]=-m+u*g;s[d+2]=v;i[d]=1;i[d+1]=0;i[d+2]=0;a[d]=0;a[d+1]=0;a[d+2]=1;d+=3;if(p&&u){o=c+2*((p-1)*(this._segmentsH+1)+(u-1));n=c+2*(p*(this._segmentsH+1)+(u-1));l=o+2;h=n+2;r[f++]=o;r[f++]=l;r[f++]=h;r[f++]=o;r[f++]=h;r[f++]=n;r[f++]=n+1;r[f++]=h+1;r[f++]=l+1;r[f++]=n+1;r[f++]=l+1;r[f++]=o+1}}}P.updateIndices(r);P.updatePositions(s);P.updateVertexNormals(i);P.updateVertexTangents(a)}else if(t=="lineSubGeometry"){var D=e;var T=this._segmentsH*4+this._segmentsW*4+this._segmentsD*4;var A;var C;var E;if(D.indices!=null&&T==D.numSegments){A=D.startPositions;C=D.endPositions;E=D.thickness}else{A=new Array(T*3);C=new Array(T*3);E=new Array(T)}d=0;f=0;for(p=0;p<this._segmentsH;++p){A[d]=-y;A[d+1]=p*this._height/this._segmentsH-m;A[d+2]=-_;C[d]=y;C[d+1]=p*this._height/this._segmentsH-m;C[d+2]=-_;E[f++]=1;d+=3;A[d]=-y;A[d+1]=m-p*this._height/this._segmentsH;A[d+2]=_;C[d]=y;C[d+1]=m-p*this._height/this._segmentsH;C[d+2]=_;E[f++]=1;d+=3}for(p=0;p<this._segmentsW;++p){A[d]=p*this._width/this._segmentsW-y;A[d+1]=-m;A[d+2]=-_;C[d]=p*this._width/this._segmentsW-y;C[d+1]=m;C[d+2]=-_;E[f++]=1;d+=3;A[d]=y-p*this._width/this._segmentsW;A[d+1]=-m;A[d+2]=_;C[d]=y-p*this._width/this._segmentsW;C[d+1]=m;C[d+2]=_;E[f++]=1;d+=3}for(p=0;p<this._segmentsH;++p){A[d]=-y;A[d+1]=p*this._height/this._segmentsH-m;A[d+2]=-_;C[d]=-y;C[d+1]=p*this._height/this._segmentsH-m;C[d+2]=_;E[f++]=1;d+=3;A[d]=y;A[d+1]=m-p*this._height/this._segmentsH;A[d+2]=-_;C[d]=y;C[d+1]=m-p*this._height/this._segmentsH;C[d+2]=_;E[f++]=1;d+=3}for(p=0;p<this._segmentsD;++p){A[d]=y;A[d+1]=-m;A[d+2]=p*this._depth/this._segmentsD-_;C[d]=y;C[d+1]=m;C[d+2]=p*this._depth/this._segmentsD-_;E[f++]=1;d+=3;A[d]=-y;A[d+1]=-m;A[d+2]=_-p*this._depth/this._segmentsD;C[d]=-y;C[d+1]=m;C[d+2]=_-p*this._depth/this._segmentsD;E[f++]=1;d+=3}for(p=0;p<this._segmentsD;++p){A[d]=-y;A[d+1]=-m;A[d+2]=_-p*this._depth/this._segmentsD;C[d]=y;C[d+1]=-m;C[d+2]=_-p*this._depth/this._segmentsD;E[f++]=1;d+=3;A[d]=-y;A[d+1]=m;A[d+2]=p*this._depth/this._segmentsD-_;C[d]=y;C[d+1]=m;C[d+2]=p*this._depth/this._segmentsD-_;E[f++]=1;d+=3}for(p=0;p<this._segmentsW;++p){A[d]=y-p*this._width/this._segmentsW;A[d+1]=-m;A[d+2]=-_;C[d]=y-p*this._width/this._segmentsW;C[d+1]=-m;C[d+2]=_;E[f++]=1;d+=3;A[d]=p*this._width/this._segmentsW-y;A[d+1]=m;A[d+2]=-_;C[d]=p*this._width/this._segmentsW-y;C[d+1]=m;C[d+2]=_;E[f++]=1;d+=3}D.updatePositions(A,C);D.updateThickness(E)}};t.prototype._pBuildUVs=function(e,t){var r,s,i;var a;var o,n;var l,h;var p,u;var c,d;var f,y;var m;if(t=="triangleSubGeometry"){m=((this._segmentsW+1)*(this._segmentsH+1)+(this._segmentsW+1)*(this._segmentsD+1)+(this._segmentsH+1)*(this._segmentsD+1))*2;var _=e;if(m==_.numVertices&&_.uvs!=null){a=_.uvs}else{a=new Array(m*2)}if(this._tile6){o=l=1/3;n=h=1/2}else{o=n=1;l=h=0}i=0;p=1*l;u=1*h;c=2*l;d=0*h;f=o/this._segmentsW;y=n/this._segmentsH;for(r=0;r<=this._segmentsW;r++){for(s=0;s<=this._segmentsH;s++){a[i++]=(p+r*f)*_.scaleU;a[i++]=(u+(n-s*y))*_.scaleV;a[i++]=(c+(o-r*f))*_.scaleU;a[i++]=(d+(n-s*y))*_.scaleV}}p=1*l;u=0*h;c=0*l;d=0*h;f=o/this._segmentsW;y=n/this._segmentsD;for(r=0;r<=this._segmentsW;r++){for(s=0;s<=this._segmentsD;s++){a[i++]=(p+r*f)*_.scaleU;a[i++]=(u+(n-s*y))*_.scaleV;a[i++]=(c+r*f)*_.scaleU;a[i++]=(d+s*y)*_.scaleV}}p=0*l;u=1*h;c=2*l;d=1*h;f=o/this._segmentsD;y=n/this._segmentsH;for(r=0;r<=this._segmentsD;r++){for(s=0;s<=this._segmentsH;s++){a[i++]=(p+r*f)*_.scaleU;a[i++]=(u+(n-s*y))*_.scaleV;a[i++]=(c+(o-r*f))*_.scaleU;a[i++]=(d+(n-s*y))*_.scaleV}}_.updateUVs(a)}else if(t=="lineSubGeometry"){}};return t}(i);t.exports=a},{"awayjs-display/lib/prefabs/PrimitivePrefabBase":444}],442:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-display/lib/prefabs/PrimitivePrefabBase");var a=function(e){s(t,e);function t(t,r,s,i,a,o,n,l,h){if(t===void 0){t=50}if(r===void 0){r=50}if(s===void 0){s=100}if(i===void 0){i=16}if(a===void 0){a=1}if(o===void 0){o=true}if(n===void 0){n=true}if(l===void 0){l=true}if(h===void 0){h=true}e.call(this);this._numVertices=0;this._topRadius=t;this._pBottomRadius=r;this._height=s;this._pSegmentsW=i;this._pSegmentsH=a;this._topClosed=o;this._bottomClosed=n;this._surfaceClosed=l;this._yUp=h}Object.defineProperty(t.prototype,"topRadius",{get:function(){return this._topRadius},set:function(e){this._topRadius=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bottomRadius",{get:function(){return this._pBottomRadius},set:function(e){this._pBottomRadius=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"segmentsW",{get:function(){return this._pSegmentsW},set:function(e){this.setSegmentsW(e)},enumerable:true,configurable:true});t.prototype.setSegmentsW=function(e){this._pSegmentsW=e;this._pInvalidateGeometry();this._pInvalidateUVs()};Object.defineProperty(t.prototype,"segmentsH",{get:function(){return this._pSegmentsH},set:function(e){this.setSegmentsH(e)},enumerable:true,configurable:true});t.prototype.setSegmentsH=function(e){this._pSegmentsH=e;this._pInvalidateGeometry();this._pInvalidateUVs()};Object.defineProperty(t.prototype,"topClosed",{get:function(){return this._topClosed},set:function(e){this._topClosed=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bottomClosed",{get:function(){return this._bottomClosed},set:function(e){this._bottomClosed=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"yUp",{get:function(){return this._yUp},set:function(e){this._yUp=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});t.prototype._pBuildGeometry=function(e,t){var r;var s;var i;var a;var o;var n;var l;var h;var p;var u;var c;var d;var f;var y;var m;var _;var b=0;var g;var w;var v=0;var j=0;var x;var P;this._numVertices=0;var D=2*Math.PI/this._pSegmentsW;if(t=="triangleSubGeometry"){var T=e;if(this._surfaceClosed){this._numVertices+=(this._pSegmentsH+1)*(this._pSegmentsW+1);b+=this._pSegmentsH*this._pSegmentsW*6}if(this._topClosed){this._numVertices+=2*(this._pSegmentsW+1);b+=this._pSegmentsW*3}if(this._bottomClosed){this._numVertices+=2*(this._pSegmentsW+1);b+=this._pSegmentsW*3}if(this._numVertices==T.numVertices){r=T.indices;s=T.positions;i=T.vertexNormals;a=T.vertexTangents}else{r=new Array(b);s=new Array(this._numVertices*3);i=new Array(this._numVertices*3);a=new Array(this._numVertices*3);this._pInvalidateUVs()}u=0;c=0;if(this._topClosed&&this._topRadius>0){p=-.5*this._height;for(o=0;o<=this._pSegmentsW;++o){if(this._yUp){x=1;P=0;g=-p;w=0}else{x=0;P=-1;g=0;w=p}s[u]=0;s[u+1]=g;s[u+2]=w;i[u]=0;i[u+1]=x;i[u+2]=P;a[u]=1;a[u+1]=0;a[u+2]=0;u+=3;f=o*D;l=this._topRadius*Math.cos(f);h=this._topRadius*Math.sin(f);if(this._yUp){g=-p;w=h}else{g=h;w=p}if(o==this._pSegmentsW){s[u]=s[v+3];s[u+1]=s[v+4];s[u+2]=s[v+5]}else{s[u]=l;s[u+1]=g;s[u+2]=w}i[u]=0;i[u+1]=x;i[u+2]=P;a[u]=1;a[u+1]=0;a[u+2]=0;u+=3;if(o>0){r[c++]=j;r[c++]=j+1;r[c++]=j+2;j+=2}}j+=2}if(this._bottomClosed&&this._pBottomRadius>0){p=.5*this._height;v=j*3;for(o=0;o<=this._pSegmentsW;++o){if(this._yUp){x=-1;P=0;g=-p;w=0}else{x=0;P=1;g=0;w=p}s[u]=0;s[u+1]=g;s[u+2]=w;i[u]=0;i[u+1]=x;i[u+2]=P;a[u]=1;a[u+1]=0;a[u+2]=0;u+=3;f=o*D;l=this._pBottomRadius*Math.cos(f);h=this._pBottomRadius*Math.sin(f);if(this._yUp){g=-p;w=h}else{g=h;w=p}if(o==this._pSegmentsW){s[u]=s[v+3];s[u+1]=s[v+4];s[u+2]=s[v+5]}else{s[u]=l;s[u+1]=g;s[u+2]=w}i[u]=0;i[u+1]=x;i[u+2]=P;a[u]=1;a[u+1]=0;a[u+2]=0;u+=3;if(o>0){r[c++]=j;r[c++]=j+2;r[c++]=j+1;j+=2}}j+=2}y=this._pBottomRadius-this._topRadius;m=y/this._height;_=m==0?1:this._height/y;if(this._surfaceClosed){var A;var C;var E;var S;var M,O,R,I;for(n=0;n<=this._pSegmentsH;++n){d=this._topRadius-n/this._pSegmentsH*(this._topRadius-this._pBottomRadius);p=-(this._height/2)+n/this._pSegmentsH*this._height;v=j*3;for(o=0;o<=this._pSegmentsW;++o){f=o*D;l=d*Math.cos(f);h=d*Math.sin(f);M=_*Math.cos(f);O=_*Math.sin(f);if(this._yUp){x=0;P=-M;g=-p;w=h;R=m;I=O}else{x=-M;P=0;g=h;w=p;R=O;I=m}if(o==this._pSegmentsW){s[u]=s[v];s[u+1]=s[v+1];s[u+2]=s[v+2];i[u]=M;i[u+1]=m;i[u+2]=O;a[u]=O;a[u+1]=x;a[u+2]=P}else{s[u]=l;s[u+1]=g;s[u+2]=w;i[u]=M;i[u+1]=R;i[u+2]=I;a[u]=-O;a[u+1]=x;a[u+2]=P}u+=3;if(o>0&&n>0){A=j;C=j-1;E=C-this._pSegmentsW-1;S=A-this._pSegmentsW-1;r[c++]=A;r[c++]=C;r[c++]=E;r[c++]=A;r[c++]=E;r[c++]=S}j++}}}T.updateIndices(r);T.updatePositions(s);T.updateVertexNormals(i);T.updateVertexTangents(a)}else if(t=="lineSubGeometry"){var U=e;var L=(this._pSegmentsH+1)*this._pSegmentsW+this._pSegmentsW;var B;var N;var F;if(U.indices!=null&&L==U.numSegments){B=U.startPositions;N=U.endPositions;F=U.thickness}else{B=new Array(L*3);N=new Array(L*3);F=new Array(L)}u=0;c=0;for(n=0;n<=this._pSegmentsH;++n){d=this._topRadius-n/this._pSegmentsH*(this._topRadius-this._pBottomRadius);p=this._height*(n/this._pSegmentsH-.5);for(o=0;o<=this._pSegmentsW;++o){f=o*D;l=d*Math.cos(f);h=d*Math.sin(f);if(this._yUp){g=-p;w=h}else{g=h;w=p}if(o>0){N[u]=l;N[u+1]=g;N[u+2]=w;F[c++]=1;u+=3;B[u]=N[u-this._pSegmentsW*6];B[u+1]=N[u+1-this._pSegmentsW*6];B[u+2]=N[u+2-this._pSegmentsW*6];N[u]=l;N[u+1]=g;N[u+2]=w;F[c++]=1;u+=3}if(o<this._pSegmentsW){B[u]=l;B[u+1]=g;B[u+2]=w}}}U.updatePositions(B,N);U.updateThickness(F)}};t.prototype._pBuildUVs=function(e,t){var r;var s;var i;var a;var o;var n;if(t=="triangleSubGeometry"){var l=e;if(l.uvs&&this._numVertices==l.numVertices){n=l.uvs}else{n=new Array(this._numVertices*2)}var h=2*Math.PI/this._pSegmentsW;var p=0;if(this._topClosed){for(r=0;r<=this._pSegmentsW;++r){o=r*h;i=.5+.5*-Math.cos(o);a=.5+.5*Math.sin(o);n[p++]=.5*l.scaleU;n[p++]=.5*l.scaleV;n[p++]=i*l.scaleU;n[p++]=a*l.scaleV}}if(this._bottomClosed){for(r=0;r<=this._pSegmentsW;++r){o=r*h;i=.5+.5*Math.cos(o);a=.5+.5*Math.sin(o);n[p++]=.5*l.scaleU;n[p++]=.5*l.scaleV;n[p++]=i*l.scaleU;n[p++]=a*l.scaleV}}if(this._surfaceClosed){for(s=0;s<=this._pSegmentsH;++s){for(r=0;r<=this._pSegmentsW;++r){n[p++]=r/this._pSegmentsW*l.scaleU;n[p++]=s/this._pSegmentsH*l.scaleV}}}l.updateUVs(n)}else if(t=="lineSubGeometry"){}};return t}(i);t.exports=a},{"awayjs-display/lib/prefabs/PrimitivePrefabBase":444}],443:[function(e,t,r){t.exports=e(115)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/prefabs/PrimitivePlanePrefab.js":115,"awayjs-display/lib/prefabs/PrimitivePrefabBase":444}],444:[function(e,t,r){t.exports=e(116)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/prefabs/PrimitivePrefabBase.js":116,"awayjs-core/lib/errors/AbstractMethodError":454,"awayjs-core/lib/library/AssetType":474,"awayjs-display/lib/base/Geometry":394,"awayjs-display/lib/base/LineSubGeometry":396,"awayjs-display/lib/base/TriangleSubGeometry":402,"awayjs-display/lib/entities/Mesh":408,"awayjs-display/lib/prefabs/PrefabBase":438}],445:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-display/lib/prefabs/PrimitivePrefabBase");var a=function(e){s(t,e);function t(t,r,s,i){if(t===void 0){t=50}if(r===void 0){r=16}if(s===void 0){s=12}if(i===void 0){i=true}e.call(this);this._radius=t;this._segmentsW=r;this._segmentsH=s;this._yUp=i}Object.defineProperty(t.prototype,"radius",{get:function(){return this._radius},set:function(e){this._radius=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"segmentsW",{get:function(){return this._segmentsW},set:function(e){this._segmentsW=e;this._pInvalidateGeometry();this._pInvalidateUVs()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"segmentsH",{get:function(){return this._segmentsH},set:function(e){this._segmentsH=e;this._pInvalidateGeometry();this._pInvalidateUVs()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"yUp",{get:function(){return this._yUp},set:function(e){this._yUp=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});t.prototype._pBuildGeometry=function(e,t){var r;var s;var i;var a;var o;var n;var l,h;var p;var u;var c;if(t=="triangleSubGeometry"){var d=e;c=(this._segmentsH+1)*(this._segmentsW+1);if(c==d.numVertices&&d.indices!=null){r=d.indices;s=d.positions;i=d.vertexNormals;a=d.vertexTangents}else{r=new Array((this._segmentsH-1)*this._segmentsW*6);s=new Array(c*3);i=new Array(c*3);a=new Array(c*3);this._pInvalidateUVs()}l=0;h=0;var f;var y;var m;for(n=0;n<=this._segmentsH;++n){f=l;var _=Math.PI*n/this._segmentsH;var b=-this._radius*Math.cos(_);var g=this._radius*Math.sin(_);for(o=0;o<=this._segmentsW;++o){var w=2*Math.PI*o/this._segmentsW;var v=g*Math.cos(w);var j=g*Math.sin(w);var x=1/Math.sqrt(v*v+j*j+b*b);var P=Math.sqrt(j*j+v*v);if(this._yUp){y=0;m=P>.007?v/P:0;p=-b;u=j}else{y=P>.007?v/P:0;m=0;p=j;u=b}if(o==this._segmentsW){s[l]=s[f];s[l+1]=s[f+1];s[l+2]=s[f+2];i[l]=i[f]+v*x*.5;i[l+1]=i[f+1]+p*x*.5;i[l+2]=i[f+2]+u*x*.5;a[l]=P>.007?-j/P:1;a[l+1]=y;a[l+2]=m}else{s[l]=v;s[l+1]=p;s[l+2]=u;i[l]=v*x;i[l+1]=p*x;i[l+2]=u*x;a[l]=P>.007?-j/P:1;a[l+1]=y;a[l+2]=m}if(o>0&&n>0){var D=(this._segmentsW+1)*n+o;var T=(this._segmentsW+1)*n+o-1;var A=(this._segmentsW+1)*(n-1)+o-1;var C=(this._segmentsW+1)*(n-1)+o;if(n==this._segmentsH){s[l]=s[f];s[l+1]=s[f+1];s[l+2]=s[f+2];r[h++]=D;r[h++]=A;r[h++]=C}else if(n==1){r[h++]=D;r[h++]=T;r[h++]=A}else{r[h++]=D;r[h++]=T;r[h++]=A;r[h++]=D;r[h++]=A;r[h++]=C}}l+=3}}d.updateIndices(r);d.updatePositions(s);d.updateVertexNormals(i);d.updateVertexTangents(a)}else if(t=="lineSubGeometry"){var E=e;var S=(this._segmentsH-1)*this._segmentsW*2;var M;var O;var R;if(E.indices!=null&&S==E.numSegments){M=E.startPositions;O=E.endPositions;R=E.thickness}else{M=new Array(S*3);O=new Array(S*3);R=new Array(S)}l=0;h=0;for(n=0;n<=this._segmentsH;++n){var _=Math.PI*n/this._segmentsH;var b=-this._radius*Math.cos(_);var g=this._radius*Math.sin(_);for(o=0;o<=this._segmentsW;++o){var w=2*Math.PI*o/this._segmentsW;var v=g*Math.cos(w);var j=g*Math.sin(w);if(this._yUp){p=-b;u=j}else{p=j;u=b}if(o>0&&n>0){if(n<this._segmentsH){O[l]=v;O[l+1]=p;O[l+2]=u;R[h++]=1;l+=3}M[l]=O[l-this._segmentsW*6];M[l+1]=O[l+1-this._segmentsW*6];M[l+2]=O[l+2-this._segmentsW*6];O[l]=v;O[l+1]=p;O[l+2]=u;R[h++]=1;l+=3}if(o<this._segmentsW&&n>0&&n<this._segmentsH){M[l]=v;M[l+1]=p;M[l+2]=u}}}E.updatePositions(M,O);E.updateThickness(R)}};t.prototype._pBuildUVs=function(e,t){var r,s;var i=(this._segmentsH+1)*(this._segmentsW+1);var a;if(t=="triangleSubGeometry"){i=(this._segmentsH+1)*(this._segmentsW+1);var o=e;if(i==o.numVertices&&o.uvs!=null){a=o.uvs}else{a=new Array(i*2)}var n=0;for(s=0;s<=this._segmentsH;++s){for(r=0;r<=this._segmentsW;++r){a[n++]=r/this._segmentsW*o.scaleU;a[n++]=s/this._segmentsH*o.scaleV}}o.updateUVs(a)}else if(t=="lineSubGeometry"){}};return t}(i);t.exports=a},{"awayjs-display/lib/prefabs/PrimitivePrefabBase":444}],446:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-display/lib/prefabs/PrimitivePrefabBase");var a=function(e){s(t,e);function t(t,r,s,i,a){if(t===void 0){t=50}if(r===void 0){r=50}if(s===void 0){s=16}if(i===void 0){i=8}if(a===void 0){a=true}e.call(this);this._numVertices=0;this._radius=t;this._tubeRadius=r;this._segmentsR=s;this._segmentsT=i;this._yUp=a}Object.defineProperty(t.prototype,"radius",{get:function(){return this._radius},set:function(e){this._radius=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"tubeRadius",{get:function(){return this._tubeRadius},set:function(e){this._tubeRadius=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"segmentsR",{get:function(){return this._segmentsR},set:function(e){this._segmentsR=e;this._pInvalidateGeometry();this._pInvalidateUVs()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"segmentsT",{get:function(){return this._segmentsT},set:function(e){this._segmentsT=e;this._pInvalidateGeometry();this._pInvalidateUVs()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"yUp",{get:function(){return this._yUp},set:function(e){this._yUp=e;this._pInvalidateGeometry()},enumerable:true,configurable:true});t.prototype._pBuildGeometry=function(e,t){var r;var s;var i;var a;var o,n;var l,h,p,u,c,d,f,y;var m;var _;var b=0;if(t=="triangleSubGeometry"){var g=e;this._numVertices=(this._segmentsT+1)*(this._segmentsR+1);b=this._segmentsT*this._segmentsR*6;if(this._numVertices==g.numVertices){r=g.indices;s=g.positions;i=g.vertexNormals;a=g.vertexTangents}else{r=new Array(b);s=new Array(this._numVertices*3);i=new Array(this._numVertices*3);a=new Array(this._numVertices*3);this._pInvalidateUVs()}m=0;_=0;var w=2*Math.PI/this._segmentsR;var v=2*Math.PI/this._segmentsT;var j,x;var P,D,T,A;var C=0;var E=0;var S,M,O,R,I;for(n=0;n<=this._segmentsT;++n){C=E*3;for(o=0;o<=this._segmentsR;++o){f=o*w;y=n*v;I=Math.cos(y);u=I*Math.cos(f);c=I*Math.sin(f);d=Math.sin(y);l=this._radius*Math.cos(f)+this._tubeRadius*u;h=this._radius*Math.sin(f)+this._tubeRadius*c;p=n==this._segmentsT?0:this._tubeRadius*d;if(this._yUp){T=-d;A=c;P=0;D=I?u/I:l/this._radius;j=-p;x=h}else{T=c;A=d;P=I?u/I:l/this._radius;D=0;j=h;x=p}if(o==this._segmentsR){s[m]=l;s[m+1]=s[C+1];s[m+2]=s[C+2]}else{s[m]=l;s[m+1]=j;s[m+2]=x}i[m]=u;i[m+1]=T;i[m+2]=A;a[m]=-(I?c/I:h/this._radius);a[m+1]=P;a[m+2]=D;m+=3;if(o>0&&n>0){S=E;M=E-1;O=M-this._segmentsR-1;R=S-this._segmentsR-1;r[_++]=S;r[_++]=M;r[_++]=O;r[_++]=S;r[_++]=O;r[_++]=R}E++}}g.updateIndices(r);g.updatePositions(s);g.updateVertexNormals(i);g.updateVertexTangents(a)}else if(t=="lineSubGeometry"){}};t.prototype._pBuildUVs=function(e,t){var r,s;var i;if(t=="triangleSubGeometry"){var a=e;if(a.uvs&&this._numVertices==a.numVertices){i=a.uvs}else{i=new Array(this._numVertices*2)}var o=0;for(s=0;s<=this._segmentsT;++s){for(r=0;r<=this._segmentsR;++r){i[o++]=r/this._segmentsR*a.scaleU;i[o++]=s/this._segmentsT*a.scaleV}}a.updateUVs(i)}else if(t=="lineSubGeometry"){}};return t}(i);t.exports=a},{"awayjs-display/lib/prefabs/PrimitivePrefabBase":444}],447:[function(e,t,r){t.exports=e(117)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/traverse/CollectorBase.js":117,"awayjs-display/lib/pool/EntityListItemPool":437}],448:[function(e,t,r){t.exports=e(119)
},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/traverse/ShadowCasterCollector.js":119,"awayjs-display/lib/traverse/CollectorBase":447}],449:[function(e,t,r){t.exports=e(2)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/base/BitmapData.js":2,"awayjs-core/lib/geom/Rectangle":472,"awayjs-core/lib/utils/ColorUtils":484}],450:[function(e,t,r){t.exports=e(122)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/bounds/AxisAlignedBoundingBox.js":122,"awayjs-core/lib/bounds/BoundingVolumeBase":452,"awayjs-core/lib/geom/Matrix3DUtils":467,"awayjs-core/lib/geom/PlaneClassification":470,"awayjs-core/lib/geom/Vector3D":473}],451:[function(e,t,r){t.exports=e(123)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/bounds/BoundingSphere.js":123,"awayjs-core/lib/bounds/BoundingVolumeBase":452,"awayjs-core/lib/geom/PlaneClassification":470,"awayjs-core/lib/geom/Vector3D":473}],452:[function(e,t,r){t.exports=e(124)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/bounds/BoundingVolumeBase.js":124,"awayjs-core/lib/errors/AbstractMethodError":454,"awayjs-core/lib/geom/Box":463}],453:[function(e,t,r){t.exports=e(125)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/bounds/NullBounds.js":125,"awayjs-core/lib/bounds/BoundingVolumeBase":452,"awayjs-core/lib/geom/PlaneClassification":470}],454:[function(e,t,r){t.exports=e(4)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/AbstractMethodError.js":4,"awayjs-core/lib/errors/Error":456}],455:[function(e,t,r){t.exports=e(5)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/ArgumentError.js":5,"awayjs-core/lib/errors/Error":456}],456:[function(e,t,r){t.exports=e(6)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/Error.js":6}],457:[function(e,t,r){t.exports=e(129)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/errors/PartialImplementationError.js":129,"awayjs-core/lib/errors/Error":456}],458:[function(e,t,r){t.exports=e(130)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/errors/RangeError.js":130,"awayjs-core/lib/errors/Error":456}],459:[function(e,t,r){t.exports=e(7)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/AssetEvent.js":7,"awayjs-core/lib/events/Event":460}],460:[function(e,t,r){t.exports=e(8)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/Event.js":8}],461:[function(e,t,r){t.exports=e(9)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/EventDispatcher.js":9}],462:[function(e,t,r){t.exports=e(139)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/events/ProjectionEvent.js":139,"awayjs-core/lib/events/Event":460}],463:[function(e,t,r){t.exports=e(141)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Box.js":141,"awayjs-core/lib/geom/Vector3D":473}],464:[function(e,t,r){t.exports=e(142)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/MathConsts.js":142}],465:[function(e,t,r){t.exports=e(16)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Matrix.js":16,"awayjs-core/lib/errors/ArgumentError":455,"awayjs-core/lib/geom/Point":471}],466:[function(e,t,r){t.exports=e(144)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Matrix3D.js":144,"awayjs-core/lib/errors/ArgumentError":455,"awayjs-core/lib/geom/Orientation3D":468,"awayjs-core/lib/geom/Vector3D":473}],467:[function(e,t,r){t.exports=e(145)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Matrix3DUtils.js":145,"awayjs-core/lib/geom/Matrix3D":466,"awayjs-core/lib/geom/Vector3D":473}],468:[function(e,t,r){t.exports=e(146)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Orientation3D.js":146}],469:[function(e,t,r){t.exports=e(147)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Plane3D.js":147,"awayjs-core/lib/geom/PlaneClassification":470}],470:[function(e,t,r){t.exports=e(148)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/PlaneClassification.js":148}],471:[function(e,t,r){t.exports=e(17)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Point.js":17}],472:[function(e,t,r){t.exports=e(18)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Rectangle.js":18,"awayjs-core/lib/geom/Point":471}],473:[function(e,t,r){t.exports=e(20)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Vector3D.js":20}],474:[function(e,t,r){t.exports=e(27)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/AssetType.js":27}],475:[function(e,t,r){t.exports=e(33)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/NamedAssetBase.js":33,"awayjs-core/lib/errors/AbstractMethodError":454,"awayjs-core/lib/events/AssetEvent":459,"awayjs-core/lib/events/EventDispatcher":461}],476:[function(e,t,r){t.exports=e(174)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/projections/CoordinateSystem.js":174}],477:[function(e,t,r){t.exports=e(175)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/projections/FreeMatrixProjection.js":175,"awayjs-core/lib/projections/PerspectiveProjection":478,"awayjs-core/lib/projections/ProjectionBase":479}],478:[function(e,t,r){t.exports=e(176)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/projections/PerspectiveProjection.js":176,"awayjs-core/lib/geom/Vector3D":473,"awayjs-core/lib/projections/CoordinateSystem":476,"awayjs-core/lib/projections/ProjectionBase":479}],479:[function(e,t,r){t.exports=e(177)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/projections/ProjectionBase.js":177,"awayjs-core/lib/errors/AbstractMethodError":454,"awayjs-core/lib/events/EventDispatcher":461,"awayjs-core/lib/events/ProjectionEvent":462,"awayjs-core/lib/geom/Matrix3D":466,"awayjs-core/lib/geom/Rectangle":472}],480:[function(e,t,r){t.exports=e(49)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/MipmapGenerator.js":49,"awayjs-core/lib/base/BitmapData":449,"awayjs-core/lib/geom/Matrix":465,"awayjs-core/lib/geom/Rectangle":472}],481:[function(e,t,r){t.exports=e(183)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/textures/RenderTexture.js":183,"awayjs-core/lib/errors/Error":456,"awayjs-core/lib/textures/Texture2DBase":482,"awayjs-core/lib/utils/TextureUtils":485}],482:[function(e,t,r){t.exports=e(51)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/Texture2DBase.js":51,"awayjs-core/lib/errors/AbstractMethodError":454,"awayjs-core/lib/textures/MipmapGenerator":480,"awayjs-core/lib/textures/TextureProxyBase":483}],483:[function(e,t,r){t.exports=e(52)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/TextureProxyBase.js":52,"awayjs-core/lib/library/AssetType":474,"awayjs-core/lib/library/NamedAssetBase":475}],484:[function(e,t,r){t.exports=e(56)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/ColorUtils.js":56}],485:[function(e,t,r){t.exports=e(58)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/TextureUtils.js":58}],486:[function(e,t,r){t.exports=e(192)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/lib/TriangleMaterialMode.js":192}],487:[function(e,t,r){t.exports=e(193)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/lib/TriangleMethodMaterial.js":193,"awayjs-core/lib/geom/ColorTransform":533,"awayjs-core/lib/textures/Texture2DBase":542,"awayjs-display/lib/base/BlendMode":547,"awayjs-display/lib/materials/lightpickers/StaticLightPicker":562,"awayjs-methodmaterials/lib/TriangleMaterialMode":486,"awayjs-methodmaterials/lib/methods/AmbientBasicMethod":489,"awayjs-methodmaterials/lib/methods/DiffuseBasicMethod":491,"awayjs-methodmaterials/lib/methods/NormalBasicMethod":508,"awayjs-methodmaterials/lib/methods/SpecularBasicMethod":519,"awayjs-methodmaterials/lib/passes/MaterialPassMode":524,"awayjs-methodmaterials/lib/passes/TriangleMethodPass":525,"awayjs-renderergl/lib/materials/TriangleMaterialBase":624,"awayjs-stagegl/lib/base/ContextGLCompareMode":662}],488:[function(e,t,r){t.exports=e(194)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/lib/data/MethodVO.js":194}],489:[function(e,t,r){t.exports=e(195)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/lib/methods/AmbientBasicMethod.js":195,"awayjs-methodmaterials/lib/methods/ShadingMethodBase":510,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":627,"awayjs-stagegl/lib/base/ContextGLMipFilter":663,"awayjs-stagegl/lib/base/ContextGLTextureFilter":664,"awayjs-stagegl/lib/base/ContextGLWrapMode":665}],490:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-renderergl/lib/utils/ShaderCompilerHelper");var a=e("awayjs-methodmaterials/lib/methods/AmbientBasicMethod");var o=function(e){s(t,e);function t(t){e.call(this);this._cubeTexture=t}t.prototype.iInitVO=function(t,r){e.prototype.iInitVO.call(this,t,r);r.needsNormals=true};Object.defineProperty(t.prototype,"envMap",{get:function(){return this._cubeTexture},set:function(e){this._cubeTexture=e},enumerable:true,configurable:true});t.prototype.iActivate=function(t,r,s){e.prototype.iActivate.call(this,t,r,s);s.activateCubeTexture(r.texturesIndex,this._cubeTexture)};t.prototype.iGetFragmentCode=function(e,t,r,s,a){var o="";var n;var l=s.getFreeTextureReg();t.texturesIndex=l.index;o+=i.getTexCubeSampleCode(r,l,this._cubeTexture,e.useSmoothTextures,e.useMipmapping,a.normalFragment);n=s.getFreeFragmentConstant();t.fragmentConstantsIndex=n.index;o+="add "+r+".xyz, "+r+".xyz, "+n+".xyz\n";return o};return t}(a);t.exports=o},{"awayjs-methodmaterials/lib/methods/AmbientBasicMethod":489,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":627}],491:[function(e,t,r){t.exports=e(196)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/lib/methods/DiffuseBasicMethod.js":196,"awayjs-methodmaterials/lib/methods/LightingMethodBase":507,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":627,"awayjs-stagegl/lib/base/ContextGLMipFilter":663,"awayjs-stagegl/lib/base/ContextGLTextureFilter":664,"awayjs-stagegl/lib/base/ContextGLWrapMode":665}],492:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-methodmaterials/lib/methods/DiffuseCompositeMethod");var a=function(e){s(t,e);function t(t,r){var s=this;if(t===void 0){t=3}if(r===void 0){r=null}e.call(this,null,r);this._smoothness=.1;this.baseMethod._iModulateMethod=function(e,t,r,i,a){return s.clampDiffuse(e,t,r,i,a)};this._levels=t}t.prototype.iInitConstants=function(t,r){var s=t.fragmentConstantData;var i=r.secondaryFragmentConstantsIndex;e.prototype.iInitConstants.call(this,t,r);s[i+1]=1;s[i+2]=0};Object.defineProperty(t.prototype,"levels",{get:function(){return this._levels},set:function(e){this._levels=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"smoothness",{get:function(){return this._smoothness},set:function(e){this._smoothness=e},enumerable:true,configurable:true});t.prototype.iCleanCompilationData=function(){e.prototype.iCleanCompilationData.call(this);this._dataReg=null};t.prototype.iGetFragmentPreLightingCode=function(t,r,s,i){this._dataReg=s.getFreeFragmentConstant();r.secondaryFragmentConstantsIndex=this._dataReg.index*4;return e.prototype.iGetFragmentPreLightingCode.call(this,t,r,s,i)};t.prototype.iActivate=function(t,r,s){e.prototype.iActivate.call(this,t,r,s);var i=t.fragmentConstantData;var a=r.secondaryFragmentConstantsIndex;i[a]=this._levels;i[a+3]=this._smoothness};t.prototype.clampDiffuse=function(e,t,r,s,i){return"mul "+r+".w, "+r+".w, "+this._dataReg+".x\n"+"frc "+r+".z, "+r+".w\n"+"sub "+r+".y, "+r+".w, "+r+".z\n"+"mov "+r+".x, "+this._dataReg+".x\n"+"sub "+r+".x, "+r+".x, "+this._dataReg+".y\n"+"rcp "+r+".x,"+r+".x\n"+"mul "+r+".w, "+r+".y, "+r+".x\n"+"sub "+r+".y, "+r+".w, "+r+".x\n"+"div "+r+".z, "+r+".z, "+this._dataReg+".w\n"+"sat "+r+".z, "+r+".z\n"+"mul "+r+".w, "+r+".w, "+r+".z\n"+"sub "+r+".z, "+this._dataReg+".y, "+r+".z\n"+"mul "+r+".y, "+r+".y, "+r+".z\n"+"add "+r+".w, "+r+".w, "+r+".y\n"+"sat "+r+".w, "+r+".w\n"};return t}(i);t.exports=a},{"awayjs-methodmaterials/lib/methods/DiffuseCompositeMethod":493}],493:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-renderergl/lib/events/ShadingMethodEvent");var a=e("awayjs-methodmaterials/lib/methods/DiffuseBasicMethod");var o=function(e){s(t,e);function t(t,r){var s=this;if(r===void 0){r=null}e.call(this);this._onShaderInvalidatedDelegate=function(e){return s.onShaderInvalidated(e)};this.pBaseMethod=r||new a;this.pBaseMethod._iModulateMethod=t;this.pBaseMethod.addEventListener(i.SHADER_INVALIDATED,this._onShaderInvalidatedDelegate)}Object.defineProperty(t.prototype,"baseMethod",{get:function(){return this.pBaseMethod},set:function(e){if(this.pBaseMethod==e)return;this.pBaseMethod.removeEventListener(i.SHADER_INVALIDATED,this._onShaderInvalidatedDelegate);this.pBaseMethod=e;this.pBaseMethod.addEventListener(i.SHADER_INVALIDATED,this._onShaderInvalidatedDelegate);this.iInvalidateShaderProgram()},enumerable:true,configurable:true});t.prototype.iInitVO=function(e,t){this.pBaseMethod.iInitVO(e,t)};t.prototype.iInitConstants=function(e,t){this.pBaseMethod.iInitConstants(e,t)};t.prototype.dispose=function(){this.pBaseMethod.removeEventListener(i.SHADER_INVALIDATED,this._onShaderInvalidatedDelegate);this.pBaseMethod.dispose()};Object.defineProperty(t.prototype,"texture",{get:function(){return this.pBaseMethod.texture},set:function(e){this.pBaseMethod.texture=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"diffuseColor",{get:function(){return this.pBaseMethod.diffuseColor},set:function(e){this.pBaseMethod.diffuseColor=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"ambientColor",{get:function(){return this.pBaseMethod.ambientColor},set:function(e){this.pBaseMethod.ambientColor=e},enumerable:true,configurable:true});t.prototype.iGetFragmentPreLightingCode=function(e,t,r,s){return this.pBaseMethod.iGetFragmentPreLightingCode(e,t,r,s)};t.prototype.iGetFragmentCodePerLight=function(e,t,r,s,i,a){var o=this.pBaseMethod.iGetFragmentCodePerLight(e,t,r,s,i,a);this._pTotalLightColorReg=this.pBaseMethod._pTotalLightColorReg;return o};t.prototype.iGetFragmentCodePerProbe=function(e,t,r,s,i,a){var o=this.pBaseMethod.iGetFragmentCodePerProbe(e,t,r,s,i,a);this._pTotalLightColorReg=this.pBaseMethod._pTotalLightColorReg;return o};t.prototype.iActivate=function(e,t,r){this.pBaseMethod.iActivate(e,t,r)};t.prototype.iSetRenderState=function(e,t,r,s,i){this.pBaseMethod.iSetRenderState(e,t,r,s,i)};t.prototype.iDeactivate=function(e,t,r){this.pBaseMethod.iDeactivate(e,t,r)};t.prototype.iGetVertexCode=function(e,t,r,s){return this.pBaseMethod.iGetVertexCode(e,t,r,s)};t.prototype.iGetFragmentPostLightingCode=function(e,t,r,s,i){return this.pBaseMethod.iGetFragmentPostLightingCode(e,t,r,s,i)};t.prototype.iReset=function(){this.pBaseMethod.iReset()};t.prototype.iCleanCompilationData=function(){e.prototype.iCleanCompilationData.call(this);this.pBaseMethod.iCleanCompilationData()};t.prototype.onShaderInvalidated=function(e){this.iInvalidateShaderProgram()};return t}(a);t.exports=o},{"awayjs-methodmaterials/lib/methods/DiffuseBasicMethod":491,"awayjs-renderergl/lib/events/ShadingMethodEvent":622}],494:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-renderergl/lib/utils/ShaderCompilerHelper");var a=e("awayjs-methodmaterials/lib/methods/DiffuseBasicMethod");var o=function(e){s(t,e);function t(){e.call(this)}t.prototype.iInitConstants=function(e,t){var r=e.fragmentConstantData;var s=t.fragmentConstantsIndex;r[s]=1;r[s+1]=1/255;r[s+2]=1/65025;r[s+3]=1/16581375};t.prototype.iGetFragmentPostLightingCode=function(e,t,r,s,a){var o="";var n;var l;if(!this._pUseTexture)throw new Error("DiffuseDepthMethod requires texture!");if(e.numLights>0){if(a.shadowTarget)o+="mul "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+".xyz, "+a.shadowTarget+".w\n";o+="add "+r+".xyz, "+this._pTotalLightColorReg+".xyz, "+r+".xyz\n"+"sat "+r+".xyz, "+r+".xyz\n";s.removeFragmentTempUsage(this._pTotalLightColorReg)}n=e.numLights>0?s.getFreeFragmentVectorTemp():r;this._pDiffuseInputRegister=s.getFreeTextureReg();t.texturesIndex=this._pDiffuseInputRegister.index;l=s.getFreeFragmentConstant();t.fragmentConstantsIndex=l.index*4;o+=i.getTex2DSampleCode(n,a,this._pDiffuseInputRegister,this.texture,e.useSmoothTextures,e.repeatTextures,e.useMipmapping)+"dp4 "+n+".x, "+n+", "+l+"\n"+"mov "+n+".yz, "+n+".xx			\n"+"mov "+n+".w, "+l+".x\n"+"sub "+n+".xyz, "+l+".xxx, "+n+".xyz\n";if(e.numLights==0)return o;o+="mul "+r+".xyz, "+n+".xyz, "+r+".xyz\n"+"mov "+r+".w, "+n+".w\n";return o};return t}(a);t.exports=o},{"awayjs-methodmaterials/lib/methods/DiffuseBasicMethod":491,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":627}],495:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-renderergl/lib/utils/ShaderCompilerHelper");var a=e("awayjs-methodmaterials/lib/methods/DiffuseBasicMethod");var o=function(e){s(t,e);function t(t){e.call(this);this._gradient=t}Object.defineProperty(t.prototype,"gradient",{get:function(){return this._gradient},set:function(e){if(e.hasMipmaps!=this._gradient.hasMipmaps||e.format!=this._gradient.format)this.iInvalidateShaderProgram();this._gradient=e},enumerable:true,configurable:true});t.prototype.iCleanCompilationData=function(){e.prototype.iCleanCompilationData.call(this);this._gradientTextureRegister=null};t.prototype.iGetFragmentPreLightingCode=function(t,r,s,i){var a=e.prototype.iGetFragmentPreLightingCode.call(this,t,r,s,i);this._pIsFirstLight=true;if(t.numLights>0){this._gradientTextureRegister=s.getFreeTextureReg();r.secondaryTexturesIndex=this._gradientTextureRegister.index}return a};t.prototype.iGetFragmentCodePerLight=function(e,t,r,s,a,o){var n="";var l;if(this._pIsFirstLight)l=this._pTotalLightColorReg;else{l=a.getFreeFragmentVectorTemp();a.addFragmentTempUsages(l,1)}n+="dp3 "+l+".w, "+r+".xyz, "+o.normalFragment+".xyz\n"+"mul "+l+".w, "+l+".w, "+o.commons+".x\n"+"add "+l+".w, "+l+".w, "+o.commons+".x\n"+"mul "+l+".xyz, "+l+".w, "+r+".w\n";if(this._iModulateMethod!=null)n+=this._iModulateMethod(e,t,l,a,o);n+=i.getTex2DSampleCode(l,o,this._gradientTextureRegister,this._gradient,e.useSmoothTextures,e.repeatTextures,e.useMipmapping,l,"clamp")+"mul "+l+".xyz, "+l+".xyz, "+s+".xyz\n";if(!this._pIsFirstLight){n+="add "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+".xyz, "+l+".xyz\n";a.removeFragmentTempUsage(l)}this._pIsFirstLight=false;return n};t.prototype.pApplyShadow=function(e,t,r,s){var a=r.getFreeFragmentVectorTemp();return"mov "+a+", "+s.shadowTarget+".wwww\n"+i.getTex2DSampleCode(a,s,this._gradientTextureRegister,this._gradient,e.useSmoothTextures,e.repeatTextures,e.useMipmapping,a,"clamp")+"mul "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+", "+a+"\n"};t.prototype.iActivate=function(t,r,s){e.prototype.iActivate.call(this,t,r,s);s.activateTexture(r.secondaryTexturesIndex,this._gradient)};return t}(a);t.exports=o},{"awayjs-methodmaterials/lib/methods/DiffuseBasicMethod":491,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":627}],496:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-renderergl/lib/utils/ShaderCompilerHelper");var a=e("awayjs-methodmaterials/lib/methods/DiffuseCompositeMethod");var o=function(e){s(t,e);function t(t,r,s,i){if(r===void 0){r="multiply"}if(s===void 0){s=false}if(i===void 0){i=null}e.call(this,null,i);this._useSecondaryUV=s;this._lightMapTexture=t;this.blendMode=r}t.prototype.iInitVO=function(e,t){t.needsSecondaryUV=this._useSecondaryUV;t.needsUV=!this._useSecondaryUV};Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){if(e!=t.ADD&&e!=t.MULTIPLY)throw new Error("Unknown blendmode!");if(this._blendMode==e)return;this._blendMode=e;this.iInvalidateShaderProgram()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lightMapTexture",{get:function(){return this._lightMapTexture},set:function(e){this._lightMapTexture=e},enumerable:true,configurable:true});t.prototype.iActivate=function(t,r,s){s.activateTexture(r.secondaryTexturesIndex,this._lightMapTexture);e.prototype.iActivate.call(this,t,r,s)};t.prototype.iGetFragmentPostLightingCode=function(r,s,a,o,n){var l;var h=o.getFreeTextureReg();var p=o.getFreeFragmentVectorTemp();s.secondaryTexturesIndex=h.index;l=i.getTex2DSampleCode(p,n,h,this._lightMapTexture,r.useSmoothTextures,r.repeatTextures,r.useMipmapping,n.secondaryUVVarying);switch(this._blendMode){case t.MULTIPLY:l+="mul "+this._pTotalLightColorReg+", "+this._pTotalLightColorReg+", "+p+"\n";break;case t.ADD:l+="add "+this._pTotalLightColorReg+", "+this._pTotalLightColorReg+", "+p+"\n";break}l+=e.prototype.iGetFragmentPostLightingCode.call(this,r,s,a,o,n);return l};t.MULTIPLY="multiply";t.ADD="add";return t}(a);t.exports=o},{"awayjs-methodmaterials/lib/methods/DiffuseCompositeMethod":493,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":627}],497:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-methodmaterials/lib/methods/DiffuseBasicMethod");var a=function(e){s(t,e);function t(t){if(t===void 0){t=.5}e.call(this);this.wrapFactor=t}t.prototype.iCleanCompilationData=function(){e.prototype.iCleanCompilationData.call(this);this._wrapDataRegister=null};Object.defineProperty(t.prototype,"wrapFactor",{get:function(){return this._wrapFactor},set:function(e){this._wrapFactor=e;this._wrapFactor=1/(e+1)},enumerable:true,configurable:true});t.prototype.iGetFragmentPreLightingCode=function(t,r,s,i){var a=e.prototype.iGetFragmentPreLightingCode.call(this,t,r,s,i);this._pIsFirstLight=true;this._wrapDataRegister=s.getFreeFragmentConstant();r.secondaryFragmentConstantsIndex=this._wrapDataRegister.index*4;return a};t.prototype.iGetFragmentCodePerLight=function(e,t,r,s,i,a){var o="";var n;if(this._pIsFirstLight){n=this._pTotalLightColorReg}else{n=i.getFreeFragmentVectorTemp();i.addFragmentTempUsages(n,1)}o+="dp3 "+n+".x, "+r+".xyz, "+a.normalFragment+".xyz\n"+"add "+n+".y, "+n+".x, "+this._wrapDataRegister+".x\n"+"mul "+n+".y, "+n+".y, "+this._wrapDataRegister+".y\n"+"sat "+n+".w, "+n+".y\n"+"mul "+n+".xz, "+n+".w, "+r+".wz\n";if(this._iModulateMethod!=null)o+=this._iModulateMethod(e,t,r,i,a);o+="mul "+n+", "+n+".x, "+s+"\n";if(!this._pIsFirstLight){o+="add "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+".xyz, "+n+".xyz\n";i.removeFragmentTempUsage(n)}this._pIsFirstLight=false;return o};t.prototype.iActivate=function(t,r,s){e.prototype.iActivate.call(this,t,r,s);var i=r.secondaryFragmentConstantsIndex;var a=t.fragmentConstantData;a[i]=this._wrapFactor;a[i+1]=1/(this._wrapFactor+1)};return t}(i);t.exports=a},{"awayjs-methodmaterials/lib/methods/DiffuseBasicMethod":491}],498:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-renderergl/lib/utils/ShaderCompilerHelper");var a=e("awayjs-methodmaterials/lib/methods/EffectMethodBase");var o=function(e){s(t,e);function t(t,r){if(r===void 0){r=false}e.call(this);this._texture=t;this._useSecondaryUV=r}t.prototype.iInitVO=function(e,t){t.needsSecondaryUV=this._useSecondaryUV;t.needsUV=!this._useSecondaryUV};Object.defineProperty(t.prototype,"useSecondaryUV",{get:function(){return this._useSecondaryUV},set:function(e){if(this._useSecondaryUV==e)return;this._useSecondaryUV=e;this.iInvalidateShaderProgram()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture=e},enumerable:true,configurable:true});t.prototype.iActivate=function(e,t,r){r.activateTexture(t.texturesIndex,this._texture)};t.prototype.iGetFragmentCode=function(e,t,r,s,a){var o=s.getFreeTextureReg();var n=s.getFreeFragmentVectorTemp();var l=this._useSecondaryUV?a.secondaryUVVarying:a.uvVarying;t.texturesIndex=o.index;return i.getTex2DSampleCode(n,a,o,this._texture,e.useSmoothTextures,e.repeatTextures,e.useMipmapping,l)+"mul "+r+", "+r+", "+n+".x\n"};return t}(a);t.exports=o},{"awayjs-methodmaterials/lib/methods/EffectMethodBase":505,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":627}],499:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-methodmaterials/lib/methods/EffectMethodBase");var a=function(e){s(t,e);function t(t){e.call(this);if(t.length!=20)throw new Error("Matrix length must be 20!");this._matrix=t}Object.defineProperty(t.prototype,"colorMatrix",{get:function(){return this._matrix},set:function(e){this._matrix=e},enumerable:true,configurable:true});t.prototype.iGetFragmentCode=function(e,t,r,s,i){var a="";var o=s.getFreeFragmentConstant();s.getFreeFragmentConstant();s.getFreeFragmentConstant();s.getFreeFragmentConstant();var n=s.getFreeFragmentConstant();t.fragmentConstantsIndex=o.index*4;var l=s.getFreeFragmentVectorTemp();a+="m44 "+l+", "+r+", "+o+"\n"+"add "+r+", "+l+", "+n+"\n";return a};t.prototype.iActivate=function(e,t,r){var s=this._matrix;var i=t.fragmentConstantsIndex;var a=e.fragmentConstantData;a[i]=s[0];a[i+1]=s[1];a[i+2]=s[2];a[i+3]=s[3];a[i+4]=s[5];a[i+5]=s[6];a[i+6]=s[7];a[i+7]=s[8];a[i+8]=s[10];a[i+9]=s[11];a[i+10]=s[12];a[i+11]=s[13];a[i+12]=s[15];a[i+13]=s[16];a[i+14]=s[17];a[i+15]=s[18];a[i+16]=s[4];a[i+17]=s[9];a[i+18]=s[14];a[i+19]=s[19]};return t}(i);t.exports=a},{"awayjs-methodmaterials/lib/methods/EffectMethodBase":505}],500:[function(e,t,r){t.exports=e(197)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/lib/methods/EffectColorTransformMethod.js":197,"awayjs-methodmaterials/lib/methods/EffectMethodBase":505}],501:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-renderergl/lib/utils/ShaderCompilerHelper");var a=e("awayjs-methodmaterials/lib/methods/EffectMethodBase");var o=function(e){s(t,e);function t(t,r){if(r===void 0){r=1}e.call(this);this._cubeTexture=t;this._alpha=r}Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(e){if(e!=this._mask||e&&this._mask&&(e.hasMipmaps!=this._mask.hasMipmaps||e.format!=this._mask.format))this.iInvalidateShaderProgram();this._mask=e},enumerable:true,configurable:true});t.prototype.iInitVO=function(e,t){t.needsNormals=true;t.needsView=true;t.needsUV=this._mask!=null};Object.defineProperty(t.prototype,"envMap",{get:function(){return this._cubeTexture},set:function(e){this._cubeTexture=e},enumerable:true,configurable:true});t.prototype.dispose=function(){};Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(e){this._alpha=e},enumerable:true,configurable:true});t.prototype.iActivate=function(e,t,r){e.fragmentConstantData[t.fragmentConstantsIndex]=this._alpha;r.activateCubeTexture(t.texturesIndex,this._cubeTexture);if(this._mask)r.activateTexture(t.texturesIndex+1,this._mask)};t.prototype.iGetFragmentCode=function(e,t,r,s,a){var o=s.getFreeFragmentConstant();var n=s.getFreeFragmentVectorTemp();var l="";var h=s.getFreeTextureReg();t.texturesIndex=h.index;t.fragmentConstantsIndex=o.index*4;s.addFragmentTempUsages(n,1);var p=s.getFreeFragmentVectorTemp();l+="dp3 "+n+".w, "+a.viewDirFragment+".xyz, "+a.normalFragment+".xyz\n"+"add "+n+".w, "+n+".w, "+n+".w\n"+"mul "+n+".xyz, "+a.normalFragment+".xyz, "+n+".w\n"+"sub "+n+".xyz, "+n+".xyz, "+a.viewDirFragment+".xyz\n"+i.getTexCubeSampleCode(n,h,this._cubeTexture,e.useSmoothTextures,e.useMipmapping,n)+"sub "+p+".w, "+n+".w, fc0.x\n"+"kil "+p+".w\n"+"sub "+n+", "+n+", "+r+"\n";if(this._mask)l+=i.getTex2DSampleCode(p,a,s.getFreeTextureReg(),this._mask,e.useSmoothTextures,e.repeatTextures,e.useMipmapping)+"mul "+n+", "+p+", "+n+"\n";l+="mul "+n+", "+n+", "+o+".x\n"+"add "+r+", "+r+", "+n+"\n";s.removeFragmentTempUsage(n);return l};return t}(a);t.exports=o},{"awayjs-methodmaterials/lib/methods/EffectMethodBase":505,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":627}],502:[function(e,t,r){t.exports=e(198)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/lib/methods/EffectFogMethod.js":198,"awayjs-methodmaterials/lib/methods/EffectMethodBase":505}],503:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-renderergl/lib/utils/ShaderCompilerHelper");var a=e("awayjs-methodmaterials/lib/methods/EffectMethodBase");var o=function(e){s(t,e);function t(t,r){if(r===void 0){r=1}e.call(this);this._fresnelPower=5;this._normalReflectance=0;this._cubeTexture=t;this._alpha=r}t.prototype.iInitVO=function(e,t){t.needsNormals=true;t.needsView=true;t.needsUV=this._mask!=null};t.prototype.iInitConstants=function(e,t){e.fragmentConstantData[t.fragmentConstantsIndex+3]=1};Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(e){if(Boolean(e)!=Boolean(this._mask)||e&&this._mask&&(e.hasMipmaps!=this._mask.hasMipmaps||e.format!=this._mask.format)){this.iInvalidateShaderProgram()}this._mask=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"fresnelPower",{get:function(){return this._fresnelPower},set:function(e){this._fresnelPower=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"envMap",{get:function(){return this._cubeTexture
},set:function(e){this._cubeTexture=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(e){this._alpha=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"normalReflectance",{get:function(){return this._normalReflectance},set:function(e){this._normalReflectance=e},enumerable:true,configurable:true});t.prototype.iActivate=function(e,t,r){var s=e.fragmentConstantData;var i=t.fragmentConstantsIndex;s[i]=this._alpha;s[i+1]=this._normalReflectance;s[i+2]=this._fresnelPower;r.activateCubeTexture(t.texturesIndex,this._cubeTexture);if(this._mask)r.activateTexture(t.texturesIndex+1,this._mask)};t.prototype.iGetFragmentCode=function(e,t,r,s,a){var o=s.getFreeFragmentConstant();var n=s.getFreeFragmentVectorTemp();var l="";var h=s.getFreeTextureReg();var p=a.viewDirFragment;var u=a.normalFragment;t.texturesIndex=h.index;t.fragmentConstantsIndex=o.index*4;s.addFragmentTempUsages(n,1);var c=s.getFreeFragmentVectorTemp();l+="dp3 "+n+".w, "+p+".xyz, "+u+".xyz\n"+"add "+n+".w, "+n+".w, "+n+".w\n"+"mul "+n+".xyz, "+u+".xyz, "+n+".w\n"+"sub "+n+".xyz, "+n+".xyz, "+p+".xyz\n"+i.getTexCubeSampleCode(n,h,this._cubeTexture,e.useSmoothTextures,e.useMipmapping,n)+"sub "+c+".w, "+n+".w, fc0.x\n"+"kil "+c+".w\n"+"sub "+n+", "+n+", "+r+"\n";l+="dp3 "+p+".w, "+p+".xyz, "+u+".xyz\n"+"sub "+p+".w, "+o+".w, "+p+".w\n"+"pow "+p+".w, "+p+".w, "+o+".z\n"+"sub "+u+".w, "+o+".w, "+p+".w\n"+"mul "+u+".w, "+o+".y, "+u+".w\n"+"add "+p+".w, "+p+".w, "+u+".w\n"+"mul "+p+".w, "+o+".x, "+p+".w\n";if(this._mask){var d=s.getFreeTextureReg();l+=i.getTex2DSampleCode(c,a,d,this._mask,e.useSmoothTextures,e.repeatTextures,e.useMipmapping)+"mul "+p+".w, "+c+".x, "+p+".w\n"}l+="mul "+n+", "+n+", "+p+".w\n"+"add "+r+", "+r+", "+n+"\n";s.removeFragmentTempUsage(n);return l};return t}(a);t.exports=o},{"awayjs-methodmaterials/lib/methods/EffectMethodBase":505,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":627}],504:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-renderergl/lib/utils/ShaderCompilerHelper");var a=e("awayjs-methodmaterials/lib/methods/EffectMethodBase");var o=function(e){s(t,e);function t(t,r,s){if(r===void 0){r="multiply"}if(s===void 0){s=false}e.call(this);this._useSecondaryUV=s;this._texture=t;this.blendMode=r}t.prototype.iInitVO=function(e,t){t.needsUV=!this._useSecondaryUV;t.needsSecondaryUV=this._useSecondaryUV};Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){if(e!=t.ADD&&e!=t.MULTIPLY)throw new Error("Unknown blendmode!");if(this._blendMode==e)return;this._blendMode=e;this.iInvalidateShaderProgram()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){if(e.hasMipmaps!=this._texture.hasMipmaps||e.format!=this._texture.format)this.iInvalidateShaderProgram();this._texture=e},enumerable:true,configurable:true});t.prototype.iActivate=function(t,r,s){s.activateTexture(r.texturesIndex,this._texture);e.prototype.iActivate.call(this,t,r,s)};t.prototype.iGetFragmentCode=function(e,r,s,a,o){var n;var l=a.getFreeTextureReg();var h=a.getFreeFragmentVectorTemp();r.texturesIndex=l.index;n=i.getTex2DSampleCode(h,o,l,this._texture,e.useSmoothTextures,e.repeatTextures,e.useMipmapping,this._useSecondaryUV?o.secondaryUVVarying:o.uvVarying);switch(this._blendMode){case t.MULTIPLY:n+="mul "+s+", "+s+", "+h+"\n";break;case t.ADD:n+="add "+s+", "+s+", "+h+"\n";break}return n};t.MULTIPLY="multiply";t.ADD="add";return t}(a);t.exports=o},{"awayjs-methodmaterials/lib/methods/EffectMethodBase":505,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":627}],505:[function(e,t,r){t.exports=e(199)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/lib/methods/EffectMethodBase.js":199,"awayjs-core/lib/errors/AbstractMethodError":527,"awayjs-core/lib/library/AssetType":538,"awayjs-methodmaterials/lib/methods/ShadingMethodBase":510}],506:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-methodmaterials/lib/methods/EffectMethodBase");var a=function(e){s(t,e);function t(t,r,s,i){if(t===void 0){t=16777215}if(r===void 0){r=.4}if(s===void 0){s=2}if(i===void 0){i="mix"}e.call(this);this._blendMode=i;this._strength=r;this._power=s;this.color=t}t.prototype.iInitConstants=function(e,t){e.fragmentConstantData[t.fragmentConstantsIndex+3]=1};t.prototype.iInitVO=function(e,t){t.needsNormals=true;t.needsView=true};Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){if(this._blendMode==e)return;this._blendMode=e;this.iInvalidateShaderProgram()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(e){this._color=e;this._colorR=(e>>16&255)/255;this._colorG=(e>>8&255)/255;this._colorB=(e&255)/255},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"strength",{get:function(){return this._strength},set:function(e){this._strength=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"power",{get:function(){return this._power},set:function(e){this._power=e},enumerable:true,configurable:true});t.prototype.iActivate=function(e,t,r){var s=t.fragmentConstantsIndex;var i=e.fragmentConstantData;i[s]=this._colorR;i[s+1]=this._colorG;i[s+2]=this._colorB;i[s+4]=this._strength;i[s+5]=this._power};t.prototype.iGetFragmentCode=function(e,r,s,i,a){var o=i.getFreeFragmentConstant();var n=i.getFreeFragmentConstant();var l=i.getFreeFragmentVectorTemp();var h="";r.fragmentConstantsIndex=o.index*4;h+="dp3 "+l+".x, "+a.viewDirFragment+".xyz, "+a.normalFragment+".xyz\n"+"sat "+l+".x, "+l+".x\n"+"sub "+l+".x, "+o+".w, "+l+".x\n"+"pow "+l+".x, "+l+".x, "+n+".y\n"+"mul "+l+".x, "+l+".x, "+n+".x\n"+"sub "+l+".x, "+o+".w, "+l+".x\n"+"mul "+s+".xyz, "+s+".xyz, "+l+".x\n"+"sub "+l+".w, "+o+".w, "+l+".x\n";if(this._blendMode==t.ADD){h+="mul "+l+".xyz, "+l+".w, "+o+".xyz\n"+"add "+s+".xyz, "+s+".xyz, "+l+".xyz\n"}else if(this._blendMode==t.MULTIPLY){h+="mul "+l+".xyz, "+l+".w, "+o+".xyz\n"+"mul "+s+".xyz, "+s+".xyz, "+l+".xyz\n"}else{h+="sub "+l+".xyz, "+o+".xyz, "+s+".xyz\n"+"mul "+l+".xyz, "+l+".xyz, "+l+".w\n"+"add "+s+".xyz, "+s+".xyz, "+l+".xyz\n"}return h};t.ADD="add";t.MULTIPLY="multiply";t.MIX="mix";return t}(i);t.exports=a},{"awayjs-methodmaterials/lib/methods/EffectMethodBase":505}],507:[function(e,t,r){t.exports=e(200)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/lib/methods/LightingMethodBase.js":200,"awayjs-methodmaterials/lib/methods/ShadingMethodBase":510}],508:[function(e,t,r){t.exports=e(201)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/lib/methods/NormalBasicMethod.js":201,"awayjs-methodmaterials/lib/methods/ShadingMethodBase":510,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":627,"awayjs-stagegl/lib/base/ContextGLMipFilter":663,"awayjs-stagegl/lib/base/ContextGLTextureFilter":664,"awayjs-stagegl/lib/base/ContextGLWrapMode":665}],509:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-renderergl/lib/utils/ShaderCompilerHelper");var a=e("awayjs-methodmaterials/lib/methods/NormalBasicMethod");var o=function(e){s(t,e);function t(t,r){e.call(this);this._useSecondNormalMap=false;this._water1OffsetX=0;this._water1OffsetY=0;this._water2OffsetX=0;this._water2OffsetY=0;this.normalMap=t;this.secondaryNormalMap=r}t.prototype.iInitConstants=function(e,t){var r=t.fragmentConstantsIndex;var s=e.fragmentConstantData;s[r]=.5;s[r+1]=0;s[r+2]=0;s[r+3]=1};t.prototype.iInitVO=function(t,r){e.prototype.iInitVO.call(this,t,r);this._useSecondNormalMap=this.normalMap!=this.secondaryNormalMap};Object.defineProperty(t.prototype,"water1OffsetX",{get:function(){return this._water1OffsetX},set:function(e){this._water1OffsetX=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"water1OffsetY",{get:function(){return this._water1OffsetY},set:function(e){this._water1OffsetY=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"water2OffsetX",{get:function(){return this._water2OffsetX},set:function(e){this._water2OffsetX=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"water2OffsetY",{get:function(){return this._water2OffsetY},set:function(e){this._water2OffsetY=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"secondaryNormalMap",{get:function(){return this._texture2},set:function(e){this._texture2=e},enumerable:true,configurable:true});t.prototype.iCleanCompilationData=function(){e.prototype.iCleanCompilationData.call(this);this._normalTextureRegister2=null};t.prototype.dispose=function(){e.prototype.dispose.call(this);this._texture2=null};t.prototype.iActivate=function(t,r,s){e.prototype.iActivate.call(this,t,r,s);var i=t.fragmentConstantData;var a=r.fragmentConstantsIndex;i[a+4]=this._water1OffsetX;i[a+5]=this._water1OffsetY;i[a+6]=this._water2OffsetX;i[a+7]=this._water2OffsetY;if(this._useSecondNormalMap)s.activateTexture(r.texturesIndex+1,this._texture2)};t.prototype.iGetFragmentCode=function(e,t,r,s,a){var o=s.getFreeFragmentVectorTemp();var n=s.getFreeFragmentConstant();var l=s.getFreeFragmentConstant();this._pNormalTextureRegister=s.getFreeTextureReg();this._normalTextureRegister2=this._useSecondNormalMap?s.getFreeTextureReg():this._pNormalTextureRegister;t.texturesIndex=this._pNormalTextureRegister.index;t.fragmentConstantsIndex=n.index*4;return"add "+o+", "+a.uvVarying+", "+l+".xyxy\n"+i.getTex2DSampleCode(r,a,this._pNormalTextureRegister,this.normalMap,e.useSmoothTextures,e.repeatTextures,e.useMipmapping,o)+"add "+o+", "+a.uvVarying+", "+l+".zwzw\n"+i.getTex2DSampleCode(o,a,this._normalTextureRegister2,this._texture2,e.useSmoothTextures,e.repeatTextures,e.useMipmapping,o)+"add "+r+", "+r+", "+o+"		\n"+"mul "+r+", "+r+", "+n+".x	\n"+"sub "+r+".xyz, "+r+".xyz, "+a.commons+".xxx	\n"+"nrm "+r+".xyz, "+r+".xyz							\n"};return t}(a);t.exports=o},{"awayjs-methodmaterials/lib/methods/NormalBasicMethod":508,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":627}],510:[function(e,t,r){t.exports=e(202)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/lib/methods/ShadingMethodBase.js":202,"awayjs-core/lib/library/NamedAssetBase":539,"awayjs-renderergl/lib/events/ShadingMethodEvent":622}],511:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/base/BitmapData");var a=e("awayjs-core/lib/textures/BitmapTexture");var o=e("awayjs-methodmaterials/lib/methods/ShadowMethodBase");var n=function(e){s(t,e);function t(r,s,i){if(s===void 0){s=4}if(i===void 0){i=1}e.call(this,r);this._depthMapSize=this._pCastingLight.shadowMapper.depthMapSize;this.numSamples=s;this.range=i;++t._grainUsages;if(!t._grainTexture)this.initGrainTexture()}Object.defineProperty(t.prototype,"numSamples",{get:function(){return this._numSamples},set:function(e){this._numSamples=e;if(this._numSamples<1)this._numSamples=1;else if(this._numSamples>24)this._numSamples=24;this.iInvalidateShaderProgram()},enumerable:true,configurable:true});t.prototype.iInitVO=function(t,r){e.prototype.iInitVO.call(this,t,r);r.needsProjection=true};t.prototype.iInitConstants=function(t,r){e.prototype.iInitConstants.call(this,t,r);var s=t.fragmentConstantData;var i=r.fragmentConstantsIndex;s[i+8]=1/this._numSamples};Object.defineProperty(t.prototype,"range",{get:function(){return this._range*2},set:function(e){this._range=e/2},enumerable:true,configurable:true});t.prototype.initGrainTexture=function(){t._grainBitmapData=new i(64,64,false);var e=new Array;var r=4096;var s=1/(this._depthMapSize*this._range);var o,n;for(var l=0;l<r;++l){o=2*(Math.random()-.5);n=2*(Math.random()-.5);if(o<0)o-=s;else o+=s;if(n<0)n-=s;else n+=s;if(o>1)o=1;else if(o<-1)o=-1;if(n>1)n=1;else if(n<-1)n=-1;e[l]=Math.floor((o*.5+.5)*255)<<16|Math.floor((n*.5+.5)*255)<<8}t._grainBitmapData.setVector(t._grainBitmapData.rect,e);t._grainTexture=new a(t._grainBitmapData)};t.prototype.dispose=function(){if(--t._grainUsages==0){t._grainTexture.dispose();t._grainBitmapData.dispose();t._grainTexture=null}};t.prototype.iActivate=function(r,s,i){e.prototype.iActivate.call(this,r,s,i);var a=r.fragmentConstantData;var o=s.fragmentConstantsIndex;a[o+9]=(i.width-1)/63;a[o+10]=(i.height-1)/63;a[o+11]=2*this._range/this._depthMapSize;i.activateTexture(s.texturesIndex+1,t._grainTexture)};t.prototype._pGetPlanarFragmentCode=function(e,t,r,s){var i=r.getFreeTextureReg();var a=r.getFreeFragmentConstant();var o=r.getFreeFragmentConstant();var n=r.getFreeFragmentConstant();e.fragmentConstantsIndex=a.index*4;e.texturesIndex=i.index;return this.getSampleCode(n,i,a,t,r,s)};t.prototype.getSampleCode=function(e,t,r,s,i,a){var o="";var n=i.getFreeTextureReg();var l=i.getFreeFragmentVectorTemp();var h=this._numSamples;i.addFragmentTempUsages(l,1);var p=i.getFreeFragmentVectorTemp();var u=a.projectionFragment;o+="div "+l+", "+u+", "+u+".w\n"+"mul "+l+".xy, "+l+".xy, "+e+".yz\n";while(h>0){if(h==this._numSamples)o+="tex "+l+", "+l+", "+n+" <2d,nearest,repeat,mipnone>\n";else o+="tex "+l+", "+l+".zwxy, "+n+" <2d,nearest,repeat,mipnone>\n";o+="sub "+l+".zw, "+l+".xy, fc0.xx\n"+"mul "+l+".zw, "+l+".zw, "+e+".w\n";if(h==this._numSamples){o+="add "+l+".xy, "+l+".zw, "+this._pDepthMapCoordReg+".xy\n"+"tex "+p+", "+l+", "+t+" <2d,nearest,clamp,mipnone>\n"+"dp4 "+p+".z, "+p+", "+r+"\n"+"slt "+s+".w, "+this._pDepthMapCoordReg+".z, "+p+".z\n"}else{o+=this.addSample(l,t,r,s,i)}if(h>4)o+="add "+l+".xy, "+l+".xy, "+l+".zw\n"+this.addSample(l,t,r,s,i);if(h>1)o+="sub "+l+".xy, "+this._pDepthMapCoordReg+".xy, "+l+".zw\n"+this.addSample(l,t,r,s,i);if(h>5)o+="sub "+l+".xy, "+l+".xy, "+l+".zw\n"+this.addSample(l,t,r,s,i);if(h>2){o+="neg "+l+".w, "+l+".w\n";o+="add "+l+".xy, "+l+".wz, "+this._pDepthMapCoordReg+".xy\n"+this.addSample(l,t,r,s,i)}if(h>6)o+="add "+l+".xy, "+l+".xy, "+l+".wz\n"+this.addSample(l,t,r,s,i);if(h>3)o+="sub "+l+".xy, "+this._pDepthMapCoordReg+".xy, "+l+".wz\n"+this.addSample(l,t,r,s,i);if(h>7)o+="sub "+l+".xy, "+l+".xy, "+l+".wz\n"+this.addSample(l,t,r,s,i);h-=8}i.removeFragmentTempUsage(l);o+="mul "+s+".w, "+s+".w, "+e+".x\n";return o};t.prototype.addSample=function(e,t,r,s,i){var a=i.getFreeFragmentVectorTemp();return"tex "+a+", "+e+", "+t+" <2d,nearest,clamp,mipnone>\n"+"dp4 "+a+".z, "+a+", "+r+"\n"+"slt "+a+".z, "+this._pDepthMapCoordReg+".z, "+a+".z\n"+"add "+s+".w, "+s+".w, "+a+".z\n"};t.prototype.iActivateForCascade=function(e,r,s){var i=e.fragmentConstantData;var a=r.secondaryFragmentConstantsIndex;i[a]=1/this._numSamples;i[a+1]=(s.width-1)/63;i[a+2]=(s.height-1)/63;i[a+3]=2*this._range/this._depthMapSize;s.activateTexture(r.texturesIndex+1,t._grainTexture)};t.prototype._iGetCascadeFragmentCode=function(e,t,r,s,i,a,o,n){this._pDepthMapCoordReg=i;var l=o.getFreeFragmentConstant();t.secondaryFragmentConstantsIndex=l.index*4;return this.getSampleCode(l,s,r,a,o,n)};return t}(o);t.exports=n},{"awayjs-core/lib/base/BitmapData":526,"awayjs-core/lib/textures/BitmapTexture":540,"awayjs-methodmaterials/lib/methods/ShadowMethodBase":515}],512:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-methodmaterials/lib/methods/ShadowMethodBase");var a=function(e){s(t,e);function t(t){e.call(this,t)}t.prototype.iInitConstants=function(t,r){e.prototype.iInitConstants.call(this,t,r);var s=t.fragmentConstantData;var i=r.fragmentConstantsIndex;s[i+8]=.5;var a=this.castingLight.shadowMapper.depthMapSize;s[i+9]=a;s[i+10]=1/a};t.prototype._pGetPlanarFragmentCode=function(e,t,r,s){var i=r.getFreeTextureReg();var a=r.getFreeFragmentConstant();var o=r.getFreeFragmentConstant();o=o;var n=r.getFreeFragmentConstant();var l=r.getFreeFragmentVectorTemp();var h;var p="";e.fragmentConstantsIndex=a.index*4;r.addFragmentTempUsages(l,1);h=r.getFreeFragmentVectorTemp();r.addFragmentTempUsages(h,1);p+="mov "+h+", "+this._pDepthMapCoordReg+"\n"+"tex "+l+", "+this._pDepthMapCoordReg+", "+i+" <2d, nearest, clamp>\n"+"dp4 "+l+".z, "+l+", "+a+"\n"+"slt "+h+".z, "+this._pDepthMapCoordReg+".z, "+l+".z\n"+"add "+h+".x, "+this._pDepthMapCoordReg+".x, "+n+".z\n"+"tex "+l+", "+h+", "+i+" <2d, nearest, clamp>\n"+"dp4 "+l+".z, "+l+", "+a+"\n"+"slt "+h+".w, "+this._pDepthMapCoordReg+".z, "+l+".z\n"+"mul "+l+".x, "+this._pDepthMapCoordReg+".x, "+n+".y\n"+"frc "+l+".x, "+l+".x\n"+"sub "+h+".w, "+h+".w, "+h+".z\n"+"mul "+h+".w, "+h+".w, "+l+".x\n"+"add "+t+".w, "+h+".z, "+h+".w\n"+"mov "+h+".x, "+this._pDepthMapCoordReg+".x\n"+"add "+h+".y, "+this._pDepthMapCoordReg+".y, "+n+".z\n"+"tex "+l+", "+h+", "+i+" <2d, nearest, clamp>\n"+"dp4 "+l+".z, "+l+", "+a+"\n"+"slt "+h+".z, "+this._pDepthMapCoordReg+".z, "+l+".z\n"+"add "+h+".x, "+this._pDepthMapCoordReg+".x, "+n+".z\n"+"tex "+l+", "+h+", "+i+" <2d, nearest, clamp>\n"+"dp4 "+l+".z, "+l+", "+a+"\n"+"slt "+h+".w, "+this._pDepthMapCoordReg+".z, "+l+".z\n"+"mul "+l+".x, "+this._pDepthMapCoordReg+".x, "+n+".y\n"+"frc "+l+".x, "+l+".x\n"+"sub "+h+".w, "+h+".w, "+h+".z\n"+"mul "+h+".w, "+h+".w, "+l+".x\n"+"add "+h+".w, "+h+".z, "+h+".w\n"+"mul "+l+".x, "+this._pDepthMapCoordReg+".y, "+n+".y\n"+"frc "+l+".x, "+l+".x\n"+"sub "+h+".w, "+h+".w, "+t+".w\n"+"mul "+h+".w, "+h+".w, "+l+".x\n"+"add "+t+".w, "+t+".w, "+h+".w\n";r.removeFragmentTempUsage(l);r.removeFragmentTempUsage(h);e.texturesIndex=i.index;return p};t.prototype.iActivateForCascade=function(e,t,r){var s=this.castingLight.shadowMapper.depthMapSize;var i=t.secondaryFragmentConstantsIndex;var a=e.fragmentConstantData;a[i]=s;a[i+1]=1/s};t.prototype._iGetCascadeFragmentCode=function(e,t,r,s,i,a,o,n){var l;var h=o.getFreeFragmentConstant();t.secondaryFragmentConstantsIndex=h.index*4;var p=o.getFreeFragmentVectorTemp();o.addFragmentTempUsages(p,1);var u=o.getFreeFragmentVectorTemp();o.addFragmentTempUsages(u,1);l="tex "+p+", "+i+", "+s+" <2d, nearest, clamp>\n"+"dp4 "+p+".z, "+p+", "+r+"\n"+"slt "+u+".x, "+i+".z, "+p+".z\n"+"add "+i+".x, "+i+".x, "+h+".y\n"+"tex "+p+", "+i+", "+s+" <2d, nearest, clamp>\n"+"dp4 "+p+".z, "+p+", "+r+"\n"+"slt "+u+".z, "+i+".z, "+p+".z\n"+"add "+i+".y, "+i+".y, "+h+".y\n"+"tex "+p+", "+i+", "+s+" <2d, nearest, clamp>\n"+"dp4 "+p+".z, "+p+", "+r+"\n"+"slt "+u+".w, "+i+".z, "+p+".z\n"+"sub "+i+".x, "+i+".x, "+h+".y\n"+"tex "+p+", "+i+", "+s+" <2d, nearest, clamp>\n"+"dp4 "+p+".z, "+p+", "+r+"\n"+"slt "+u+".y, "+i+".z, "+p+".z\n"+"mul "+p+".xy, "+i+".xy, "+h+".x\n"+"frc "+p+".xy, "+p+".xy\n"+"sub "+i+", "+u+".xyzw, "+u+".zwxy\n"+"mul "+i+", "+i+", "+p+".x\n"+"add "+u+".xy, "+u+".xy, "+i+".zw\n"+"sub "+u+".y, "+u+".y, "+u+".x\n"+"mul "+u+".y, "+u+".y, "+p+".y\n"+"add "+a+".w, "+u+".x, "+u+".y\n";o.removeFragmentTempUsage(p);o.removeFragmentTempUsage(u);return l};return t}(i);t.exports=a},{"awayjs-methodmaterials/lib/methods/ShadowMethodBase":515}],513:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-methodmaterials/lib/methods/ShadowMethodBase");var a=function(e){s(t,e);function t(t){e.call(this,t)}t.prototype._pGetPlanarFragmentCode=function(e,t,r,s){var i=r.getFreeTextureReg();var a=r.getFreeFragmentConstant();var o=r.getFreeFragmentConstant();var n=r.getFreeFragmentVectorTemp();var l="";e.fragmentConstantsIndex=a.index*4;e.texturesIndex=i.index;l+="tex "+n+", "+this._pDepthMapCoordReg+", "+i+" <2d, nearest, clamp>\n"+"dp4 "+n+".z, "+n+", "+a+"\n"+"slt "+t+".w, "+this._pDepthMapCoordReg+".z, "+n+".z\n";return l};t.prototype._pGetPointFragmentCode=function(e,t,r,s){var i=r.getFreeTextureReg();var a=r.getFreeFragmentConstant();var o=r.getFreeFragmentConstant();var n=r.getFreeFragmentConstant();var l=r.getFreeFragmentVectorTemp();r.addFragmentTempUsages(l,1);var h=r.getFreeFragmentVectorTemp();var p="";e.fragmentConstantsIndex=a.index*4;e.texturesIndex=i.index;p+="sub "+h+", "+s.globalPositionVarying+", "+n+"\n"+"dp3 "+h+".w, "+h+".xyz, "+h+".xyz\n"+"mul "+h+".w, "+h+".w, "+n+".w\n"+"nrm "+h+".xyz, "+h+".xyz\n"+"tex "+l+", "+h+", "+i+" <cube, nearest, clamp>\n"+"dp4 "+l+".z, "+l+", "+a+"\n"+"add "+t+".w, "+h+".w, "+o+".x\n"+"slt "+t+".w, "+t+".w, "+l+".z\n";r.removeFragmentTempUsage(l);return p};t.prototype._iGetCascadeFragmentCode=function(e,t,r,s,i,a,o,n){var l=o.getFreeFragmentVectorTemp();return"tex "+l+", "+i+", "+s+" <2d, nearest, clamp>\n"+"dp4 "+l+".z, "+l+", "+r+"\n"+"slt "+a+".w, "+i+".z, "+l+".z\n"};t.prototype.iActivateForCascade=function(e,t,r){};return t}(i);t.exports=a},{"awayjs-methodmaterials/lib/methods/ShadowMethodBase":515}],514:[function(e,t,r){t.exports=e(203)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/lib/methods/ShadowMapMethodBase.js":203,"awayjs-core/lib/library/AssetType":538,"awayjs-methodmaterials/lib/methods/ShadingMethodBase":510}],515:[function(e,t,r){t.exports=e(204)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/lib/methods/ShadowMethodBase.js":204,"awayjs-core/lib/errors/AbstractMethodError":527,"awayjs-display/lib/entities/PointLight":556,"awayjs-methodmaterials/lib/methods/ShadowMapMethodBase":514}],516:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-renderergl/lib/events/ShadingMethodEvent");var a=e("awayjs-methodmaterials/lib/methods/ShadowMethodBase");var o=function(e){s(t,e);function t(t,r){var s=this;if(r===void 0){r=.1}e.call(this,t.castingLight);this._onShaderInvalidatedDelegate=function(e){return s.onShaderInvalidated(e)};this._baseMethod=t;this._fadeRatio=r;this._nearShadowMapper=this._pCastingLight.shadowMapper;if(!this._nearShadowMapper)throw new Error("ShadowNearMethod requires a light that has a NearDirectionalShadowMapper instance assigned to shadowMapper.");this._baseMethod.addEventListener(i.SHADER_INVALIDATED,this._onShaderInvalidatedDelegate)}Object.defineProperty(t.prototype,"baseMethod",{get:function(){return this._baseMethod},set:function(e){if(this._baseMethod==e)return;this._baseMethod.removeEventListener(i.SHADER_INVALIDATED,this._onShaderInvalidatedDelegate);this._baseMethod=e;this._baseMethod.addEventListener(i.SHADER_INVALIDATED,this._onShaderInvalidatedDelegate);this.iInvalidateShaderProgram()},enumerable:true,configurable:true});t.prototype.iInitConstants=function(t,r){e.prototype.iInitConstants.call(this,t,r);this._baseMethod.iInitConstants(t,r);var s=t.fragmentConstantData;var i=r.secondaryFragmentConstantsIndex;s[i+2]=0;s[i+3]=1};t.prototype.iInitVO=function(e,t){this._baseMethod.iInitVO(e,t);t.needsProjection=true};t.prototype.dispose=function(){this._baseMethod.removeEventListener(i.SHADER_INVALIDATED,this._onShaderInvalidatedDelegate)};Object.defineProperty(t.prototype,"alpha",{get:function(){return this._baseMethod.alpha},set:function(e){this._baseMethod.alpha=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"epsilon",{get:function(){return this._baseMethod.epsilon},set:function(e){this._baseMethod.epsilon=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"fadeRatio",{get:function(){return this._fadeRatio},set:function(e){this._fadeRatio=e},enumerable:true,configurable:true});t.prototype.iGetFragmentCode=function(e,t,r,s,i){var a=this._baseMethod.iGetFragmentCode(e,t,r,s,i);var o=s.getFreeFragmentConstant();var n=s.getFreeFragmentSingleTemp();t.secondaryFragmentConstantsIndex=o.index*4;a+="abs "+n+", "+i.projectionFragment+".w\n"+"sub "+n+", "+n+", "+o+".x\n"+"mul "+n+", "+n+", "+o+".y\n"+"sat "+n+", "+n+"\n"+"sub "+n+", "+o+".w,"+n+"\n"+"sub "+r+".w, "+o+".w,"+r+".w\n"+"mul "+r+".w, "+r+".w, "+n+"\n"+"sub "+r+".w, "+o+".w,"+r+".w\n";return a};t.prototype.iActivate=function(e,t,r){this._baseMethod.iActivate(e,t,r)};t.prototype.iDeactivate=function(e,t,r){this._baseMethod.iDeactivate(e,t,r)};t.prototype.iSetRenderState=function(e,t,r,s,i){var a=i.projection.near;var o=i.projection.far-a;var n=this._nearShadowMapper.coverageRatio;var l=n*(1-this._fadeRatio);n=a+n*o;l=a+l*o;var h=e.fragmentConstantData;var p=t.secondaryFragmentConstantsIndex;h[p]=l;h[p+1]=1/(n-l);this._baseMethod.iSetRenderState(e,t,r,s,i)};t.prototype.iGetVertexCode=function(e,t,r,s){return this._baseMethod.iGetVertexCode(e,t,r,s)};t.prototype.iReset=function(){this._baseMethod.iReset()};t.prototype.iCleanCompilationData=function(){e.prototype.iCleanCompilationData.call(this);this._baseMethod.iCleanCompilationData()};t.prototype.onShaderInvalidated=function(e){this.iInvalidateShaderProgram()};return t}(a);t.exports=o},{"awayjs-methodmaterials/lib/methods/ShadowMethodBase":515,"awayjs-renderergl/lib/events/ShadingMethodEvent":622}],517:[function(e,t,r){t.exports=e(205)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/lib/methods/ShadowSoftMethod.js":205,"awayjs-core/lib/geom/PoissonLookup":536,"awayjs-methodmaterials/lib/methods/ShadowMethodBase":515}],518:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-methodmaterials/lib/methods/SpecularBasicMethod");var a=function(e){s(t,e);function t(){e.call(this)}t.prototype.iInitVO=function(e,t){t.needsTangents=true;t.needsView=true};t.prototype.iGetFragmentCodePerLight=function(e,t,r,s,i,a){var o="";var n;if(this._pIsFirstLight)n=this._pTotalLightColorReg;else{n=i.getFreeFragmentVectorTemp();i.addFragmentTempUsages(n,1)}o+="nrm "+n+".xyz, "+a.tangentVarying+".xyz\n"+"dp3 "+n+".w, "+n+".xyz, "+r+".xyz\n"+"dp3 "+n+".z, "+n+".xyz, "+a.viewDirFragment+".xyz\n";o+="sin "+n+".x, "+n+".w\n"+"sin "+n+".y, "+n+".z\n"+"mul "+n+".x, "+n+".x, "+n+".y\n"+"cos "+n+".z, "+n+".z\n"+"cos "+n+".w, "+n+".w\n"+"mul "+n+".w, "+n+".w, "+n+".z\n"+"sub "+n+".w, "+n+".x, "+n+".w\n";if(this._pUseTexture){o+="mul "+this._pSpecularTexData+".w, "+this._pSpecularTexData+".y, "+this._pSpecularDataRegister+".w\n"+"pow "+n+".w, "+n+".w, "+this._pSpecularTexData+".w\n"}else o+="pow "+n+".w, "+n+".w, "+this._pSpecularDataRegister+".w\n";o+="mul "+n+".w, "+n+".w, "+r+".w\n";if(this._iModulateMethod!=null)o+=this._iModulateMethod(e,t,n,i,a);o+="mul "+n+".xyz, "+s+".xyz, "+n+".w\n";if(!this._pIsFirstLight){o+="add "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+".xyz, "+n+".xyz\n";i.removeFragmentTempUsage(n)}this._pIsFirstLight=false;return o};return t}(i);t.exports=a},{"awayjs-methodmaterials/lib/methods/SpecularBasicMethod":519}],519:[function(e,t,r){t.exports=e(206)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/lib/methods/SpecularBasicMethod.js":206,"awayjs-methodmaterials/lib/methods/LightingMethodBase":507,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":627,"awayjs-stagegl/lib/base/ContextGLMipFilter":663,"awayjs-stagegl/lib/base/ContextGLTextureFilter":664,"awayjs-stagegl/lib/base/ContextGLWrapMode":665}],520:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-methodmaterials/lib/methods/SpecularCompositeMethod");var a=function(e){s(t,e);function t(t,r){var s=this;if(t===void 0){t=.5}if(r===void 0){r=null}e.call(this,null,r);this._smoothness=.1;this._specularCutOff=.1;this.baseMethod._iModulateMethod=function(e,t,r,i,a){return s.clampSpecular(e,t,r,i,a)};this._specularCutOff=t}Object.defineProperty(t.prototype,"smoothness",{get:function(){return this._smoothness},set:function(e){this._smoothness=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"specularCutOff",{get:function(){return this._specularCutOff},set:function(e){this._specularCutOff=e},enumerable:true,configurable:true});t.prototype.iActivate=function(t,r,s){e.prototype.iActivate.call(this,t,r,s);var i=r.secondaryFragmentConstantsIndex;var a=t.fragmentConstantData;a[i]=this._smoothness;a[i+1]=this._specularCutOff};t.prototype.iCleanCompilationData=function(){e.prototype.iCleanCompilationData.call(this);this._dataReg=null};t.prototype.clampSpecular=function(e,t,r,s,i){return"sub "+r+".y, "+r+".w, "+this._dataReg+".y\n"+"div "+r+".y, "+r+".y, "+this._dataReg+".x\n"+"sat "+r+".y, "+r+".y\n"+"sge "+r+".w, "+r+".w, "+this._dataReg+".y\n"+"mul "+r+".w, "+r+".w, "+r+".y\n"};t.prototype.iGetFragmentPreLightingCode=function(t,r,s,i){this._dataReg=s.getFreeFragmentConstant();r.secondaryFragmentConstantsIndex=this._dataReg.index*4;return e.prototype.iGetFragmentPreLightingCode.call(this,t,r,s,i)};return t}(i);t.exports=a},{"awayjs-methodmaterials/lib/methods/SpecularCompositeMethod":521}],521:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-renderergl/lib/events/ShadingMethodEvent");var a=e("awayjs-methodmaterials/lib/methods/SpecularBasicMethod");var o=function(e){s(t,e);function t(t,r){var s=this;if(r===void 0){r=null}e.call(this);this._onShaderInvalidatedDelegate=function(e){return s.onShaderInvalidated(e)};this._baseMethod=r||new a;this._baseMethod._iModulateMethod=t;this._baseMethod.addEventListener(i.SHADER_INVALIDATED,this._onShaderInvalidatedDelegate)}t.prototype.iInitVO=function(e,t){this._baseMethod.iInitVO(e,t)};t.prototype.iInitConstants=function(e,t){this._baseMethod.iInitConstants(e,t)};Object.defineProperty(t.prototype,"baseMethod",{get:function(){return this._baseMethod},set:function(e){if(this._baseMethod==e)return;this._baseMethod.removeEventListener(i.SHADER_INVALIDATED,this._onShaderInvalidatedDelegate);this._baseMethod=e;this._baseMethod.addEventListener(i.SHADER_INVALIDATED,this._onShaderInvalidatedDelegate);this.iInvalidateShaderProgram()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"gloss",{get:function(){return this._baseMethod.gloss},set:function(e){this._baseMethod.gloss=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"specular",{get:function(){return this._baseMethod.specular},set:function(e){this._baseMethod.specular=e},enumerable:true,configurable:true});t.prototype.dispose=function(){this._baseMethod.removeEventListener(i.SHADER_INVALIDATED,this._onShaderInvalidatedDelegate);this._baseMethod.dispose()};Object.defineProperty(t.prototype,"texture",{get:function(){return this._baseMethod.texture},set:function(e){this._baseMethod.texture=e},enumerable:true,configurable:true});t.prototype.iActivate=function(e,t,r){this._baseMethod.iActivate(e,t,r)};t.prototype.iSetRenderState=function(e,t,r,s,i){this._baseMethod.iSetRenderState(e,t,r,s,i)};t.prototype.iDeactivate=function(e,t,r){this._baseMethod.iDeactivate(e,t,r)};t.prototype.iGetVertexCode=function(e,t,r,s){return this._baseMethod.iGetVertexCode(e,t,r,s)};t.prototype.iGetFragmentPreLightingCode=function(e,t,r,s){return this._baseMethod.iGetFragmentPreLightingCode(e,t,r,s)};t.prototype.iGetFragmentCodePerLight=function(e,t,r,s,i,a){return this._baseMethod.iGetFragmentCodePerLight(e,t,r,s,i,a)};t.prototype.iGetFragmentCodePerProbe=function(e,t,r,s,i,a){return this._baseMethod.iGetFragmentCodePerProbe(e,t,r,s,i,a)};t.prototype.iGetFragmentPostLightingCode=function(e,t,r,s,i){return this._baseMethod.iGetFragmentPostLightingCode(e,t,r,s,i)
};t.prototype.iReset=function(){this._baseMethod.iReset()};t.prototype.iCleanCompilationData=function(){e.prototype.iCleanCompilationData.call(this);this._baseMethod.iCleanCompilationData()};t.prototype.onShaderInvalidated=function(e){this.iInvalidateShaderProgram()};return t}(a);t.exports=o},{"awayjs-methodmaterials/lib/methods/SpecularBasicMethod":519,"awayjs-renderergl/lib/events/ShadingMethodEvent":622}],522:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-methodmaterials/lib/methods/SpecularCompositeMethod");var a=function(e){s(t,e);function t(t,r){var s=this;if(t===void 0){t=true}if(r===void 0){r=null}e.call(this,null,r);this._fresnelPower=5;this._normalReflectance=.028;this.baseMethod._iModulateMethod=function(e,t,r,i,a){return s.modulateSpecular(e,t,r,i,a)};this._incidentLight=!t}t.prototype.iInitConstants=function(e,t){var r=t.secondaryFragmentConstantsIndex;e.fragmentConstantData[r+2]=1;e.fragmentConstantData[r+3]=0};Object.defineProperty(t.prototype,"basedOnSurface",{get:function(){return!this._incidentLight},set:function(e){if(this._incidentLight!=e)return;this._incidentLight=!e;this.iInvalidateShaderProgram()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"fresnelPower",{get:function(){return this._fresnelPower},set:function(e){this._fresnelPower=e},enumerable:true,configurable:true});t.prototype.iCleanCompilationData=function(){e.prototype.iCleanCompilationData.call(this);this._dataReg=null};Object.defineProperty(t.prototype,"normalReflectance",{get:function(){return this._normalReflectance},set:function(e){this._normalReflectance=e},enumerable:true,configurable:true});t.prototype.iActivate=function(t,r,s){e.prototype.iActivate.call(this,t,r,s);var i=t.fragmentConstantData;var a=r.secondaryFragmentConstantsIndex;i[a]=this._normalReflectance;i[a+1]=this._fresnelPower};t.prototype.iGetFragmentPreLightingCode=function(t,r,s,i){this._dataReg=s.getFreeFragmentConstant();console.log("SpecularFresnelMethod","iGetFragmentPreLightingCode",this._dataReg);r.secondaryFragmentConstantsIndex=this._dataReg.index*4;return e.prototype.iGetFragmentPreLightingCode.call(this,t,r,s,i)};t.prototype.modulateSpecular=function(e,t,r,s,i){var a;a="dp3 "+r+".y, "+i.viewDirFragment+".xyz, "+(this._incidentLight?r:i.normalFragment)+".xyz\n"+"sub "+r+".y, "+this._dataReg+".z, "+r+".y\n"+"pow "+r+".x, "+r+".y, "+this._dataReg+".y\n"+"sub "+r+".y, "+this._dataReg+".z, "+r+".y\n"+"mul "+r+".y, "+this._dataReg+".x, "+r+".y\n"+"add "+r+".y, "+r+".x, "+r+".y\n"+"mul "+r+".w, "+r+".w, "+r+".y\n";console.log("SpecularFresnelMethod","modulateSpecular",a);return a};return t}(i);t.exports=a},{"awayjs-methodmaterials/lib/methods/SpecularCompositeMethod":521}],523:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-methodmaterials/lib/methods/SpecularBasicMethod");var a=function(e){s(t,e);function t(){e.call(this)}t.prototype.iGetFragmentCodePerLight=function(e,t,r,s,i,a){var o="";var n;if(this._pIsFirstLight){n=this._pTotalLightColorReg}else{n=i.getFreeFragmentVectorTemp();i.addFragmentTempUsages(n,1)}var l=a.viewDirFragment;var h=a.normalFragment;o+="dp3 "+n+".w, "+r+", "+h+"\n"+"add "+n+".w, "+n+".w, "+n+".w\n"+"mul "+n+".xyz, "+h+", "+n+".w\n"+"sub "+n+".xyz, "+n+", "+r+"\n"+"add "+n+".w, "+n+".w, "+a.commons+".w\n"+"sat "+n+".w, "+n+".w\n"+"mul "+n+".xyz, "+n+", "+n+".w\n"+"dp3 "+n+".w, "+n+", "+l+"\n"+"sat "+n+".w, "+n+".w\n";if(this._pUseTexture){o+="mul "+this._pSpecularTexData+".w, "+this._pSpecularTexData+".y, "+this._pSpecularDataRegister+".w\n"+"pow "+n+".w, "+n+".w, "+this._pSpecularTexData+".w\n"}else o+="pow "+n+".w, "+n+".w, "+this._pSpecularDataRegister+".w\n";if(e.usesLightFallOff)o+="mul "+n+".w, "+n+".w, "+r+".w\n";if(this._iModulateMethod!=null)o+=this._iModulateMethod(e,t,n,i,a);o+="mul "+n+".xyz, "+s+".xyz, "+n+".w\n";if(!this._pIsFirstLight){o+="add "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+".xyz, "+n+".xyz\n";i.removeFragmentTempUsage(n)}this._pIsFirstLight=false;return o};return t}(i);t.exports=a},{"awayjs-methodmaterials/lib/methods/SpecularBasicMethod":519}],524:[function(e,t,r){t.exports=e(207)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/lib/passes/MaterialPassMode.js":207}],525:[function(e,t,r){t.exports=e(208)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/lib/passes/TriangleMethodPass.js":208,"awayjs-methodmaterials/lib/data/MethodVO":488,"awayjs-methodmaterials/lib/methods/EffectColorTransformMethod":500,"awayjs-methodmaterials/lib/passes/MaterialPassMode":524,"awayjs-renderergl/lib/compilation/ShaderLightingObject":617,"awayjs-renderergl/lib/compilation/ShaderObjectBase":618,"awayjs-renderergl/lib/events/ShadingMethodEvent":622,"awayjs-renderergl/lib/passes/LightingPassGLBase":625}],526:[function(e,t,r){t.exports=e(2)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/base/BitmapData.js":2,"awayjs-core/lib/geom/Rectangle":537,"awayjs-core/lib/utils/ColorUtils":544}],527:[function(e,t,r){t.exports=e(4)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/AbstractMethodError.js":4,"awayjs-core/lib/errors/Error":529}],528:[function(e,t,r){t.exports=e(5)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/ArgumentError.js":5,"awayjs-core/lib/errors/Error":529}],529:[function(e,t,r){t.exports=e(6)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/Error.js":6}],530:[function(e,t,r){t.exports=e(7)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/AssetEvent.js":7,"awayjs-core/lib/events/Event":531}],531:[function(e,t,r){t.exports=e(8)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/Event.js":8}],532:[function(e,t,r){t.exports=e(9)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/EventDispatcher.js":9}],533:[function(e,t,r){t.exports=e(216)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-core/lib/geom/ColorTransform.js":216,"awayjs-core/lib/utils/ColorUtils":544}],534:[function(e,t,r){t.exports=e(16)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Matrix.js":16,"awayjs-core/lib/errors/ArgumentError":528,"awayjs-core/lib/geom/Point":535}],535:[function(e,t,r){t.exports=e(17)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Point.js":17}],536:[function(e,t,r){t.exports=e(219)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-core/lib/geom/PoissonLookup.js":219}],537:[function(e,t,r){t.exports=e(18)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Rectangle.js":18,"awayjs-core/lib/geom/Point":535}],538:[function(e,t,r){t.exports=e(27)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/AssetType.js":27}],539:[function(e,t,r){t.exports=e(33)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/NamedAssetBase.js":33,"awayjs-core/lib/errors/AbstractMethodError":527,"awayjs-core/lib/events/AssetEvent":530,"awayjs-core/lib/events/EventDispatcher":532}],540:[function(e,t,r){t.exports=e(45)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/BitmapTexture.js":45,"awayjs-core/lib/errors/Error":529,"awayjs-core/lib/textures/Texture2DBase":542,"awayjs-core/lib/utils/TextureUtils":545}],541:[function(e,t,r){t.exports=e(49)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/MipmapGenerator.js":49,"awayjs-core/lib/base/BitmapData":526,"awayjs-core/lib/geom/Matrix":534,"awayjs-core/lib/geom/Rectangle":537}],542:[function(e,t,r){t.exports=e(51)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/Texture2DBase.js":51,"awayjs-core/lib/errors/AbstractMethodError":527,"awayjs-core/lib/textures/MipmapGenerator":541,"awayjs-core/lib/textures/TextureProxyBase":543}],543:[function(e,t,r){t.exports=e(52)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/TextureProxyBase.js":52,"awayjs-core/lib/library/AssetType":538,"awayjs-core/lib/library/NamedAssetBase":539}],544:[function(e,t,r){t.exports=e(56)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/ColorUtils.js":56}],545:[function(e,t,r){t.exports=e(58)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/TextureUtils.js":58}],546:[function(e,t,r){t.exports=e(61)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/AlignmentMode.js":61}],547:[function(e,t,r){t.exports=e(62)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/BlendMode.js":62}],548:[function(e,t,r){t.exports=e(63)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/DisplayObject.js":63,"awayjs-core/lib/bounds/AxisAlignedBoundingBox":578,"awayjs-core/lib/errors/AbstractMethodError":582,"awayjs-core/lib/geom/MathConsts":592,"awayjs-core/lib/geom/Matrix3D":594,"awayjs-core/lib/geom/Matrix3DUtils":595,"awayjs-core/lib/geom/Point":599,"awayjs-core/lib/geom/Vector3D":601,"awayjs-core/lib/library/NamedAssetBase":603,"awayjs-display/lib/base/AlignmentMode":546,"awayjs-display/lib/base/OrientationMode":550,"awayjs-display/lib/base/Transform":551,"awayjs-display/lib/events/DisplayObjectEvent":558,"awayjs-display/lib/events/SceneEvent":560,"awayjs-display/lib/pick/PickingCollisionVO":572}],549:[function(e,t,r){t.exports=e(65)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/LightBase.js":65,"awayjs-core/lib/errors/AbstractMethodError":582,"awayjs-core/lib/library/AssetType":602,"awayjs-display/lib/containers/DisplayObjectContainer":552,"awayjs-display/lib/events/LightEvent":559}],550:[function(e,t,r){t.exports=e(68)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/OrientationMode.js":68}],551:[function(e,t,r){t.exports=e(71)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/Transform.js":71,"awayjs-core/lib/geom/Matrix3D":594,"awayjs-core/lib/geom/Matrix3DUtils":595,"awayjs-core/lib/geom/Vector3D":601}],552:[function(e,t,r){t.exports=e(74)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/containers/DisplayObjectContainer.js":74,"awayjs-core/lib/errors/ArgumentError":583,"awayjs-core/lib/errors/Error":584,"awayjs-core/lib/errors/RangeError":586,"awayjs-core/lib/library/AssetType":602,"awayjs-display/lib/base/DisplayObject":548}],553:[function(e,t,r){t.exports=e(80)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/entities/Camera.js":80,"awayjs-core/lib/bounds/NullBounds":581,"awayjs-core/lib/events/ProjectionEvent":590,"awayjs-core/lib/geom/Matrix3D":594,"awayjs-core/lib/geom/Plane3D":597,"awayjs-core/lib/library/AssetType":602,"awayjs-core/lib/projections/PerspectiveProjection":606,"awayjs-display/lib/containers/DisplayObjectContainer":552,"awayjs-display/lib/events/CameraEvent":557,"awayjs-display/lib/partition/CameraNode":566}],554:[function(e,t,r){t.exports=e(81)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/entities/DirectionalLight.js":81,"awayjs-core/lib/bounds/NullBounds":581,"awayjs-core/lib/geom/Matrix3D":594,"awayjs-core/lib/geom/Vector3D":601,"awayjs-display/lib/base/LightBase":549,"awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper":564,"awayjs-display/lib/partition/DirectionalLightNode":567}],555:[function(e,t,r){t.exports=e(82)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/entities/LightProbe.js":82,"awayjs-core/lib/bounds/NullBounds":581,"awayjs-core/lib/errors/Error":584,"awayjs-display/lib/base/LightBase":549,"awayjs-display/lib/partition/LightProbeNode":569}],556:[function(e,t,r){t.exports=e(84)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/entities/PointLight.js":84,"awayjs-core/lib/bounds/BoundingSphere":579,"awayjs-core/lib/geom/Matrix3D":594,"awayjs-core/lib/geom/Vector3D":601,"awayjs-display/lib/base/LightBase":549,"awayjs-display/lib/materials/shadowmappers/CubeMapShadowMapper":563,"awayjs-display/lib/partition/PointLightNode":571}],557:[function(e,t,r){t.exports=e(87)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/CameraEvent.js":87,"awayjs-core/lib/events/Event":588}],558:[function(e,t,r){t.exports=e(88)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/DisplayObjectEvent.js":88,"awayjs-core/lib/events/Event":588}],559:[function(e,t,r){t.exports=e(90)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/LightEvent.js":90,"awayjs-core/lib/events/Event":588}],560:[function(e,t,r){t.exports=e(93)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/SceneEvent.js":93,"awayjs-core/lib/events/Event":588}],561:[function(e,t,r){t.exports=e(96)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/materials/lightpickers/LightPickerBase.js":96,"awayjs-core/lib/library/AssetType":602,"awayjs-core/lib/library/NamedAssetBase":603}],562:[function(e,t,r){t.exports=e(97)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/materials/lightpickers/StaticLightPicker.js":97,"awayjs-core/lib/events/Event":588,"awayjs-display/lib/entities/DirectionalLight":554,"awayjs-display/lib/entities/LightProbe":555,"awayjs-display/lib/entities/PointLight":556,"awayjs-display/lib/events/LightEvent":559,"awayjs-display/lib/materials/lightpickers/LightPickerBase":561}],563:[function(e,t,r){t.exports=e(98)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/materials/shadowmappers/CubeMapShadowMapper.js":98,"awayjs-core/lib/errors/PartialImplementationError":585,"awayjs-display/lib/entities/Camera":553,"awayjs-display/lib/materials/shadowmappers/ShadowMapperBase":565}],564:[function(e,t,r){t.exports=e(99)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper.js":99,"awayjs-core/lib/geom/Matrix3D":594,"awayjs-core/lib/projections/FreeMatrixProjection":605,"awayjs-display/lib/entities/Camera":553,"awayjs-display/lib/materials/shadowmappers/ShadowMapperBase":565}],565:[function(e,t,r){t.exports=e(100)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/materials/shadowmappers/ShadowMapperBase.js":100,"awayjs-core/lib/errors/AbstractMethodError":582,"awayjs-core/lib/textures/RenderTexture":609,"awayjs-display/lib/traverse/ShadowCasterCollector":576}],566:[function(e,t,r){t.exports=e(101)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/partition/CameraNode.js":101,"awayjs-display/lib/partition/EntityNode":568}],567:[function(e,t,r){t.exports=e(102)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/partition/DirectionalLightNode.js":102,"awayjs-display/lib/partition/EntityNode":568}],568:[function(e,t,r){t.exports=e(103)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/partition/EntityNode.js":103,"awayjs-core/lib/errors/PartialImplementationError":585,"awayjs-display/lib/partition/NodeBase":570}],569:[function(e,t,r){t.exports=e(104)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/partition/LightProbeNode.js":104,"awayjs-display/lib/partition/EntityNode":568}],570:[function(e,t,r){t.exports=e(105)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/partition/NodeBase.js":105}],571:[function(e,t,r){t.exports=e(108)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/partition/PointLightNode.js":108,"awayjs-display/lib/partition/EntityNode":568}],572:[function(e,t,r){t.exports=e(110)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/pick/PickingCollisionVO.js":110}],573:[function(e,t,r){t.exports=e(112)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/pool/EntityListItem.js":112}],574:[function(e,t,r){t.exports=e(113)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/pool/EntityListItemPool.js":113,"awayjs-display/lib/pool/EntityListItem":573}],575:[function(e,t,r){t.exports=e(117)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/traverse/CollectorBase.js":117,"awayjs-display/lib/pool/EntityListItemPool":574}],576:[function(e,t,r){t.exports=e(119)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/traverse/ShadowCasterCollector.js":119,"awayjs-display/lib/traverse/CollectorBase":575}],577:[function(e,t,r){t.exports=e(2)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/base/BitmapData.js":2,"awayjs-core/lib/geom/Rectangle":600,"awayjs-core/lib/utils/ColorUtils":612}],578:[function(e,t,r){t.exports=e(122)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/bounds/AxisAlignedBoundingBox.js":122,"awayjs-core/lib/bounds/BoundingVolumeBase":580,"awayjs-core/lib/geom/Matrix3DUtils":595,"awayjs-core/lib/geom/PlaneClassification":598,"awayjs-core/lib/geom/Vector3D":601}],579:[function(e,t,r){t.exports=e(123)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/bounds/BoundingSphere.js":123,"awayjs-core/lib/bounds/BoundingVolumeBase":580,"awayjs-core/lib/geom/PlaneClassification":598,"awayjs-core/lib/geom/Vector3D":601}],580:[function(e,t,r){t.exports=e(124)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/bounds/BoundingVolumeBase.js":124,"awayjs-core/lib/errors/AbstractMethodError":582,"awayjs-core/lib/geom/Box":591}],581:[function(e,t,r){t.exports=e(125)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/bounds/NullBounds.js":125,"awayjs-core/lib/bounds/BoundingVolumeBase":580,"awayjs-core/lib/geom/PlaneClassification":598}],582:[function(e,t,r){t.exports=e(4)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/AbstractMethodError.js":4,"awayjs-core/lib/errors/Error":584}],583:[function(e,t,r){t.exports=e(5)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/ArgumentError.js":5,"awayjs-core/lib/errors/Error":584}],584:[function(e,t,r){t.exports=e(6)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/Error.js":6}],585:[function(e,t,r){t.exports=e(129)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/errors/PartialImplementationError.js":129,"awayjs-core/lib/errors/Error":584}],586:[function(e,t,r){t.exports=e(130)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/errors/RangeError.js":130,"awayjs-core/lib/errors/Error":584}],587:[function(e,t,r){t.exports=e(7)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/AssetEvent.js":7,"awayjs-core/lib/events/Event":588}],588:[function(e,t,r){t.exports=e(8)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/Event.js":8}],589:[function(e,t,r){t.exports=e(9)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/EventDispatcher.js":9}],590:[function(e,t,r){t.exports=e(139)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/events/ProjectionEvent.js":139,"awayjs-core/lib/events/Event":588}],591:[function(e,t,r){t.exports=e(141)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Box.js":141,"awayjs-core/lib/geom/Vector3D":601}],592:[function(e,t,r){t.exports=e(142)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/MathConsts.js":142}],593:[function(e,t,r){t.exports=e(16)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Matrix.js":16,"awayjs-core/lib/errors/ArgumentError":583,"awayjs-core/lib/geom/Point":599}],594:[function(e,t,r){t.exports=e(144)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Matrix3D.js":144,"awayjs-core/lib/errors/ArgumentError":583,"awayjs-core/lib/geom/Orientation3D":596,"awayjs-core/lib/geom/Vector3D":601}],595:[function(e,t,r){t.exports=e(145)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Matrix3DUtils.js":145,"awayjs-core/lib/geom/Matrix3D":594,"awayjs-core/lib/geom/Vector3D":601}],596:[function(e,t,r){t.exports=e(146)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Orientation3D.js":146}],597:[function(e,t,r){t.exports=e(147)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Plane3D.js":147,"awayjs-core/lib/geom/PlaneClassification":598}],598:[function(e,t,r){t.exports=e(148)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/PlaneClassification.js":148}],599:[function(e,t,r){t.exports=e(17)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Point.js":17}],600:[function(e,t,r){t.exports=e(18)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Rectangle.js":18,"awayjs-core/lib/geom/Point":599}],601:[function(e,t,r){t.exports=e(20)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Vector3D.js":20}],602:[function(e,t,r){t.exports=e(27)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/AssetType.js":27}],603:[function(e,t,r){t.exports=e(33)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/NamedAssetBase.js":33,"awayjs-core/lib/errors/AbstractMethodError":582,"awayjs-core/lib/events/AssetEvent":587,"awayjs-core/lib/events/EventDispatcher":589}],604:[function(e,t,r){t.exports=e(174)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/projections/CoordinateSystem.js":174}],605:[function(e,t,r){t.exports=e(175)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/projections/FreeMatrixProjection.js":175,"awayjs-core/lib/projections/PerspectiveProjection":606,"awayjs-core/lib/projections/ProjectionBase":607}],606:[function(e,t,r){t.exports=e(176)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/projections/PerspectiveProjection.js":176,"awayjs-core/lib/geom/Vector3D":601,"awayjs-core/lib/projections/CoordinateSystem":604,"awayjs-core/lib/projections/ProjectionBase":607}],607:[function(e,t,r){t.exports=e(177)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/projections/ProjectionBase.js":177,"awayjs-core/lib/errors/AbstractMethodError":582,"awayjs-core/lib/events/EventDispatcher":589,"awayjs-core/lib/events/ProjectionEvent":590,"awayjs-core/lib/geom/Matrix3D":594,"awayjs-core/lib/geom/Rectangle":600}],608:[function(e,t,r){t.exports=e(49)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/MipmapGenerator.js":49,"awayjs-core/lib/base/BitmapData":577,"awayjs-core/lib/geom/Matrix":593,"awayjs-core/lib/geom/Rectangle":600}],609:[function(e,t,r){t.exports=e(183)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/textures/RenderTexture.js":183,"awayjs-core/lib/errors/Error":584,"awayjs-core/lib/textures/Texture2DBase":610,"awayjs-core/lib/utils/TextureUtils":613}],610:[function(e,t,r){t.exports=e(51)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/Texture2DBase.js":51,"awayjs-core/lib/errors/AbstractMethodError":582,"awayjs-core/lib/textures/MipmapGenerator":608,"awayjs-core/lib/textures/TextureProxyBase":611}],611:[function(e,t,r){t.exports=e(52)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/TextureProxyBase.js":52,"awayjs-core/lib/library/AssetType":602,"awayjs-core/lib/library/NamedAssetBase":603}],612:[function(e,t,r){t.exports=e(56)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/ColorUtils.js":56}],613:[function(e,t,r){t.exports=e(58)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/TextureUtils.js":58}],614:[function(e,t,r){t.exports=e(295)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/RegisterPool.js":295,"awayjs-renderergl/lib/compilation/ShaderRegisterElement":621}],615:[function(e,t,r){t.exports=e(296)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/ShaderCompilerBase.js":296,"awayjs-renderergl/lib/compilation/ShaderRegisterCache":619,"awayjs-renderergl/lib/compilation/ShaderRegisterData":620}],616:[function(e,t,r){t.exports=e(297)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/ShaderLightingCompiler.js":297,"awayjs-display/lib/materials/LightSources":646,"awayjs-renderergl/lib/compilation/ShaderCompilerBase":615,"awayjs-stagegl/lib/base/ContextGLProfile":658}],617:[function(e,t,r){t.exports=e(298)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/ShaderLightingObject.js":298,"awayjs-renderergl/lib/compilation/ShaderLightingCompiler":616,"awayjs-renderergl/lib/compilation/ShaderObjectBase":618}],618:[function(e,t,r){t.exports=e(299)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/ShaderObjectBase.js":299,"awayjs-display/lib/base/TriangleSubGeometry":642,"awayjs-renderergl/lib/compilation/ShaderCompilerBase":615,"awayjs-stagegl/lib/base/ContextGLTriangleFace":661}],619:[function(e,t,r){t.exports=e(300)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/ShaderRegisterCache.js":300,"awayjs-renderergl/lib/compilation/RegisterPool":614,"awayjs-renderergl/lib/compilation/ShaderRegisterElement":621}],620:[function(e,t,r){t.exports=e(301)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/ShaderRegisterData.js":301}],621:[function(e,t,r){t.exports=e(302)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/ShaderRegisterElement.js":302}],622:[function(e,t,r){t.exports=e(303)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/events/ShadingMethodEvent.js":303,"awayjs-core/lib/events/Event":632}],623:[function(e,t,r){t.exports=e(304)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/materials/MaterialGLBase.js":304,"awayjs-display/lib/materials/MaterialBase":647}],624:[function(e,t,r){t.exports=e(305)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/materials/TriangleMaterialBase.js":305,"awayjs-core/lib/geom/Matrix3DUtils":635,"awayjs-display/lib/base/TriangleSubGeometry":642,"awayjs-renderergl/lib/materials/MaterialGLBase":623,"awayjs-stagegl/lib/base/ContextGLProgramType":659}],625:[function(e,t,r){t.exports=e(306)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/passes/LightingPassGLBase.js":306,"awayjs-core/lib/errors/AbstractMethodError":628,"awayjs-renderergl/lib/passes/MaterialPassGLBase":626}],626:[function(e,t,r){t.exports=e(307)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/passes/MaterialPassGLBase.js":307,"awayjs-core/lib/errors/ArgumentError":629,"awayjs-core/lib/events/Event":632,"awayjs-core/lib/library/NamedAssetBase":638,"awayjs-display/lib/base/BlendMode":639,"awayjs-renderergl/lib/compilation/ShaderObjectBase":618,"awayjs-stagegl/lib/base/ContextGLBlendFactor":656,"awayjs-stagegl/lib/base/ContextGLCompareMode":657}],627:[function(e,t,r){t.exports=e(308)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/utils/ShaderCompilerHelper.js":308,"awayjs-stagegl/lib/base/ContextGLTextureFormat":660}],628:[function(e,t,r){t.exports=e(4)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/AbstractMethodError.js":4,"awayjs-core/lib/errors/Error":630}],629:[function(e,t,r){t.exports=e(5)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/ArgumentError.js":5,"awayjs-core/lib/errors/Error":630}],630:[function(e,t,r){t.exports=e(6)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/Error.js":6}],631:[function(e,t,r){t.exports=e(7)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/AssetEvent.js":7,"awayjs-core/lib/events/Event":632}],632:[function(e,t,r){t.exports=e(8)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/Event.js":8}],633:[function(e,t,r){t.exports=e(9)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/EventDispatcher.js":9}],634:[function(e,t,r){t.exports=e(144)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Matrix3D.js":144,"awayjs-core/lib/errors/ArgumentError":629,"awayjs-core/lib/geom/Orientation3D":636,"awayjs-core/lib/geom/Vector3D":637}],635:[function(e,t,r){t.exports=e(145)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Matrix3DUtils.js":145,"awayjs-core/lib/geom/Matrix3D":634,"awayjs-core/lib/geom/Vector3D":637}],636:[function(e,t,r){t.exports=e(146)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Orientation3D.js":146}],637:[function(e,t,r){t.exports=e(20)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Vector3D.js":20}],638:[function(e,t,r){t.exports=e(33)
},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/NamedAssetBase.js":33,"awayjs-core/lib/errors/AbstractMethodError":628,"awayjs-core/lib/events/AssetEvent":631,"awayjs-core/lib/events/EventDispatcher":633}],639:[function(e,t,r){t.exports=e(62)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/BlendMode.js":62}],640:[function(e,t,r){t.exports=e(69)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/SubGeometryBase.js":69,"awayjs-core/lib/errors/AbstractMethodError":648,"awayjs-core/lib/library/NamedAssetBase":655,"awayjs-display/lib/events/SubGeometryEvent":645}],641:[function(e,t,r){t.exports=e(70)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/SubMeshBase.js":70,"awayjs-core/lib/errors/AbstractMethodError":648,"awayjs-core/lib/library/NamedAssetBase":655}],642:[function(e,t,r){t.exports=e(72)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/TriangleSubGeometry.js":72,"awayjs-core/lib/geom/Vector3D":653,"awayjs-display/lib/base/SubGeometryBase":640,"awayjs-display/lib/base/TriangleSubMesh":643,"awayjs-display/lib/events/SubGeometryEvent":645}],643:[function(e,t,r){t.exports=e(73)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/TriangleSubMesh.js":73,"awayjs-core/lib/library/AssetType":654,"awayjs-display/lib/base/SubMeshBase":641}],644:[function(e,t,r){t.exports=e(325)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-display/lib/events/MaterialEvent.js":325,"awayjs-core/lib/events/Event":651}],645:[function(e,t,r){t.exports=e(94)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/SubGeometryEvent.js":94,"awayjs-core/lib/events/Event":651}],646:[function(e,t,r){t.exports=e(327)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-display/lib/materials/LightSources.js":327}],647:[function(e,t,r){t.exports=e(328)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-display/lib/materials/MaterialBase.js":328,"awayjs-core/lib/events/Event":651,"awayjs-core/lib/library/AssetType":654,"awayjs-core/lib/library/NamedAssetBase":655,"awayjs-display/lib/base/BlendMode":639,"awayjs-display/lib/events/MaterialEvent":644}],648:[function(e,t,r){t.exports=e(4)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/AbstractMethodError.js":4,"awayjs-core/lib/errors/Error":649}],649:[function(e,t,r){t.exports=e(6)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/Error.js":6}],650:[function(e,t,r){t.exports=e(7)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/AssetEvent.js":7,"awayjs-core/lib/events/Event":651}],651:[function(e,t,r){t.exports=e(8)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/Event.js":8}],652:[function(e,t,r){t.exports=e(9)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/EventDispatcher.js":9}],653:[function(e,t,r){t.exports=e(20)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Vector3D.js":20}],654:[function(e,t,r){t.exports=e(27)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/AssetType.js":27}],655:[function(e,t,r){t.exports=e(33)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/NamedAssetBase.js":33,"awayjs-core/lib/errors/AbstractMethodError":648,"awayjs-core/lib/events/AssetEvent":650,"awayjs-core/lib/events/EventDispatcher":652}],656:[function(e,t,r){t.exports=e(337)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-stagegl/lib/base/ContextGLBlendFactor.js":337}],657:[function(e,t,r){t.exports=e(338)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-stagegl/lib/base/ContextGLCompareMode.js":338}],658:[function(e,t,r){t.exports=e(339)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-stagegl/lib/base/ContextGLProfile.js":339}],659:[function(e,t,r){t.exports=e(340)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-stagegl/lib/base/ContextGLProgramType.js":340}],660:[function(e,t,r){t.exports=e(341)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-stagegl/lib/base/ContextGLTextureFormat.js":341}],661:[function(e,t,r){t.exports=e(342)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-stagegl/lib/base/ContextGLTriangleFace.js":342}],662:[function(e,t,r){t.exports=e(338)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-stagegl/lib/base/ContextGLCompareMode.js":338}],663:[function(e,t,r){t.exports=e(344)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-stagegl/lib/base/ContextGLMipFilter.js":344}],664:[function(e,t,r){t.exports=e(345)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-stagegl/lib/base/ContextGLTextureFilter.js":345}],665:[function(e,t,r){t.exports=e(346)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-stagegl/lib/base/ContextGLWrapMode.js":346}],666:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/library/AssetType");var a=e("awayjs-core/lib/library/NamedAssetBase");var o=e("awayjs-core/lib/errors/AbstractMethodError");var n=e("awayjs-renderergl/lib/errors/AnimationSetError");var l=function(e){s(t,e);function t(){e.call(this);this._animations=new Array;this._animationNames=new Array;this._animationDictionary=new Object}t.prototype._pFindTempReg=function(e,t){if(t===void 0){t=null}var r=0;var s;while(true){s="vt"+r;if(e.indexOf(s)==-1&&t!=s)return s;++r}return null};Object.defineProperty(t.prototype,"usesCPU",{get:function(){return this._usesCPU},enumerable:true,configurable:true});t.prototype.resetGPUCompatibility=function(){this._usesCPU=false};t.prototype.cancelGPUCompatibility=function(){this._usesCPU=true};t.prototype.getAGALVertexCode=function(e){throw new o};t.prototype.activate=function(e,t){throw new o};t.prototype.deactivate=function(e,t){throw new o};t.prototype.getAGALFragmentCode=function(e,t){throw new o};t.prototype.getAGALUVCode=function(e){throw new o};t.prototype.doneAGALCode=function(e){throw new o};Object.defineProperty(t.prototype,"assetType",{get:function(){return i.ANIMATION_SET},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"animations",{get:function(){return this._animations},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"animationNames",{get:function(){return this._animationNames},enumerable:true,configurable:true});t.prototype.hasAnimation=function(e){return this._animationDictionary[e]!=null};t.prototype.getAnimation=function(e){return this._animationDictionary[e]};t.prototype.addAnimation=function(e){if(this._animationDictionary[e.name])throw new n("root node name '"+e.name+"' already exists in the set");this._animationDictionary[e.name]=e;this._animations.push(e);this._animationNames.push(e.name)};t.prototype.dispose=function(){};return t}(a);t.exports=l},{"awayjs-core/lib/errors/AbstractMethodError":705,"awayjs-core/lib/library/AssetType":719,"awayjs-core/lib/library/NamedAssetBase":720,"awayjs-renderergl/lib/errors/AnimationSetError":690}],667:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/library/AssetType");var a=e("awayjs-core/lib/library/NamedAssetBase");var o=e("awayjs-core/lib/errors/AbstractMethodError");var n=e("awayjs-core/lib/utils/RequestAnimationFrame");var l=e("awayjs-core/lib/utils/getTimer");var h=e("awayjs-renderergl/lib/events/AnimatorEvent");var p=function(e){s(t,e);function t(t){e.call(this);this._autoUpdate=true;this._time=0;this._playbackSpeed=1;this._pOwners=new Array;this._pAbsoluteTime=0;this._animationStates=new Object;this.updatePosition=true;this._pAnimationSet=t;this._broadcaster=new n(this.onEnterFrame,this)}t.prototype.getAnimationState=function(e){var t=e.stateClass;var r=e.id;if(this._animationStates[r]==null)this._animationStates[r]=new t(this,e);return this._animationStates[r]};t.prototype.getAnimationStateByName=function(e){return this.getAnimationState(this._pAnimationSet.getAnimation(e))};Object.defineProperty(t.prototype,"absoluteTime",{get:function(){return this._pAbsoluteTime},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"animationSet",{get:function(){return this._pAnimationSet},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activeState",{get:function(){return this._pActiveState},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activeAnimation",{get:function(){return this._pAnimationSet.getAnimation(this._pActiveAnimationName)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activeAnimationName",{get:function(){return this._pActiveAnimationName},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){if(this._autoUpdate==e)return;this._autoUpdate=e;if(this._autoUpdate)this.start();else this.stop()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"time",{get:function(){return this._time},set:function(e){if(this._time==e)return;this.update(e)},enumerable:true,configurable:true});t.prototype.phase=function(e){this._pActiveState.phase(e)};Object.defineProperty(t.prototype,"playbackSpeed",{get:function(){return this._playbackSpeed},set:function(e){this._playbackSpeed=e},enumerable:true,configurable:true});t.prototype.setRenderState=function(e,t,r,s,i,a){throw new o};t.prototype.start=function(){if(this._isPlaying||!this._autoUpdate)return;this._time=this._pAbsoluteTime=l();this._isPlaying=true;this._broadcaster.start();if(!this.hasEventListener(h.START))return;if(this._startEvent==null)this._startEvent=new h(h.START,this);this.dispatchEvent(this._startEvent)};t.prototype.stop=function(){if(!this._isPlaying)return;this._isPlaying=false;this._broadcaster.stop();if(!this.hasEventListener(h.STOP))return;if(this._stopEvent==null)this._stopEvent=new h(h.STOP,this);this.dispatchEvent(this._stopEvent)};t.prototype.update=function(e){var t=(e-this._time)*this.playbackSpeed;this._pUpdateDeltaTime(t);this._time=e};t.prototype.reset=function(e,t){if(t===void 0){t=0}this.getAnimationState(this._pAnimationSet.getAnimation(e)).offset(t+this._pAbsoluteTime)};t.prototype.addOwner=function(e){this._pOwners.push(e)};t.prototype.removeOwner=function(e){this._pOwners.splice(this._pOwners.indexOf(e),1)};t.prototype._pUpdateDeltaTime=function(e){this._pAbsoluteTime+=e;this._pActiveState.update(this._pAbsoluteTime);if(this.updatePosition)this.applyPositionDelta()};t.prototype.onEnterFrame=function(e){if(e===void 0){e=null}this.update(l())};t.prototype.applyPositionDelta=function(){var e=this._pActiveState.positionDelta;var t=e.length;var r;if(t>0){r=this._pOwners.length;for(var s=0;s<r;++s)this._pOwners[s].translateLocal(e,t)}};t.prototype.dispatchCycleEvent=function(){if(this.hasEventListener(h.CYCLE_COMPLETE)){if(this._cycleEvent==null)this._cycleEvent=new h(h.CYCLE_COMPLETE,this);this.dispatchEvent(this._cycleEvent)}};t.prototype.clone=function(){throw new o};t.prototype.dispose=function(){};t.prototype.testGPUCompatibility=function(e){throw new o};Object.defineProperty(t.prototype,"assetType",{get:function(){return i.ANIMATOR},enumerable:true,configurable:true});t.prototype.getRenderableSubGeometry=function(e,t){return t};return t}(a);t.exports=p},{"awayjs-core/lib/errors/AbstractMethodError":705,"awayjs-core/lib/library/AssetType":719,"awayjs-core/lib/library/NamedAssetBase":720,"awayjs-core/lib/utils/RequestAnimationFrame":726,"awayjs-core/lib/utils/getTimer":728,"awayjs-renderergl/lib/events/AnimatorEvent":692}],668:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-renderergl/lib/animators/AnimationSetBase");var a=function(e){s(t,e);function t(t){if(t===void 0){t=4}e.call(this);this._jointsPerVertex=t}Object.defineProperty(t.prototype,"jointsPerVertex",{get:function(){return this._jointsPerVertex},enumerable:true,configurable:true});t.prototype.getAGALVertexCode=function(e){var t=e.animatableAttributes.length;var r=e.numUsedVertexConstants;var s=r+1;var i=r+2;var a="va"+e.numUsedStreams;var o="va"+(e.numUsedStreams+1);var n=[a+".x",a+".y",a+".z",a+".w"];var l=[o+".x",o+".y",o+".z",o+".w"];var h=this._pFindTempReg(e.animationTargetRegisters);var p=this._pFindTempReg(e.animationTargetRegisters,h);var u="dp4";var c="";for(var d=0;d<t;++d){var f=e.animatableAttributes[d];for(var y=0;y<this._jointsPerVertex;++y){c+=u+" "+h+".x, "+f+", vc["+n[y]+"+"+r+"]\n"+u+" "+h+".y, "+f+", vc["+n[y]+"+"+s+"]\n"+u+" "+h+".z, "+f+", vc["+n[y]+"+"+i+"]\n"+"mov "+h+".w, "+f+".w\n"+"mul "+h+", "+h+", "+l[y]+"\n";if(y==0)c+="mov "+p+", "+h+"\n";else c+="add "+p+", "+p+", "+h+"\n"}u="dp3";c+="mov "+e.animationTargetRegisters[d]+", "+p+"\n"}return c};t.prototype.activate=function(e,t){};t.prototype.deactivate=function(e,t){};t.prototype.getAGALFragmentCode=function(e,t){return""};t.prototype.getAGALUVCode=function(e){return"mov "+e.uvTarget+","+e.uvSource+"\n"};t.prototype.doneAGALCode=function(e){};return t}(i);t.exports=a},{"awayjs-renderergl/lib/animators/AnimationSetBase":666}],669:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-display/lib/base/TriangleSubGeometry");var a=e("awayjs-display/lib/events/SubGeometryEvent");var o=e("awayjs-stagegl/lib/base/ContextGLProgramType");var n=e("awayjs-renderergl/lib/animators/AnimatorBase");var l=e("awayjs-renderergl/lib/animators/data/JointPose");var h=e("awayjs-renderergl/lib/animators/data/SkeletonPose");var p=e("awayjs-renderergl/lib/events/AnimationStateEvent");var u=function(e){s(t,e);function t(t,r,s){var i=this;if(s===void 0){s=false}e.call(this,t);this._globalPose=new h;this._morphedSubGeometry=new Object;this._morphedSubGeometryDirty=new Object;this._skeleton=r;this._forceCPU=s;this._jointsPerVertex=t.jointsPerVertex;this._numJoints=this._skeleton.numJoints;this._globalMatrices=new Array(this._numJoints*12);var a=0;for(var o=0;o<this._numJoints;++o){this._globalMatrices[a++]=1;this._globalMatrices[a++]=0;this._globalMatrices[a++]=0;this._globalMatrices[a++]=0;this._globalMatrices[a++]=0;this._globalMatrices[a++]=1;this._globalMatrices[a++]=0;this._globalMatrices[a++]=0;this._globalMatrices[a++]=0;this._globalMatrices[a++]=0;this._globalMatrices[a++]=1;this._globalMatrices[a++]=0}this._onTransitionCompleteDelegate=function(e){return i.onTransitionComplete(e)};this._onIndicesUpdateDelegate=function(e){return i.onIndicesUpdate(e)};this._onVerticesUpdateDelegate=function(e){return i.onVerticesUpdate(e)}}Object.defineProperty(t.prototype,"globalMatrices",{get:function(){if(this._globalPropertiesDirty)this.updateGlobalProperties();return this._globalMatrices},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"globalPose",{get:function(){if(this._globalPropertiesDirty)this.updateGlobalProperties();return this._globalPose},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skeleton",{get:function(){return this._skeleton},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"forceCPU",{get:function(){return this._forceCPU},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"useCondensedIndices",{get:function(){return this._useCondensedIndices},set:function(e){this._useCondensedIndices=e},enumerable:true,configurable:true});t.prototype.clone=function(){return new t(this._pAnimationSet,this._skeleton,this._forceCPU)};t.prototype.play=function(e,t,r){if(t===void 0){t=null}if(r===void 0){r=NaN}if(this._pActiveAnimationName==e)return;this._pActiveAnimationName=e;if(!this._pAnimationSet.hasAnimation(e))throw new Error("Animation root node "+e+" not found!");if(t&&this._pActiveNode){this._pActiveNode=t.getAnimationNode(this,this._pActiveNode,this._pAnimationSet.getAnimation(e),this._pAbsoluteTime);this._pActiveNode.addEventListener(p.TRANSITION_COMPLETE,this._onTransitionCompleteDelegate)}else this._pActiveNode=this._pAnimationSet.getAnimation(e);this._pActiveState=this.getAnimationState(this._pActiveNode);if(this.updatePosition){this._pActiveState.update(this._pAbsoluteTime);this._pActiveState.positionDelta}this._activeSkeletonState=this._pActiveState;this.start();if(!isNaN(r))this.reset(e,r)};t.prototype.setRenderState=function(e,t,r,s,a,n){if(this._globalPropertiesDirty)this.updateGlobalProperties();var l=t.subMesh.subGeometry;l.useCondensedIndices=this._useCondensedIndices;if(this._useCondensedIndices){this.updateCondensedMatrices(l.condensedIndexLookUp,l.numCondensedJoints);r.context.setProgramConstantsFromArray(o.VERTEX,a,this._condensedMatrices,l.numCondensedJoints*3)}else{if(this._pAnimationSet.usesCPU){if(this._morphedSubGeometryDirty[l.id])this.morphSubGeometry(t,l);return}r.context.setProgramConstantsFromArray(o.VERTEX,a,this._globalMatrices,this._numJoints*3)}r.activateBuffer(n,t.getVertexData(i.JOINT_INDEX_DATA),t.getVertexOffset(i.JOINT_INDEX_DATA),t.JOINT_INDEX_FORMAT);r.activateBuffer(n+1,t.getVertexData(i.JOINT_WEIGHT_DATA),t.getVertexOffset(i.JOINT_WEIGHT_DATA),t.JOINT_WEIGHT_FORMAT)};t.prototype.testGPUCompatibility=function(e){if(!this._useCondensedIndices&&(this._forceCPU||this._jointsPerVertex>4||e.numUsedVertexConstants+this._numJoints*3>128))this._pAnimationSet.cancelGPUCompatibility()};t.prototype._pUpdateDeltaTime=function(t){e.prototype._pUpdateDeltaTime.call(this,t);this._globalPropertiesDirty=true;if(this._pAnimationSet.usesCPU)for(var r in this._morphedSubGeometryDirty)this._morphedSubGeometryDirty[r]=true};t.prototype.updateCondensedMatrices=function(e,t){var r=0,s=0;var i;var a;this._condensedMatrices=new Array;do{a=e[r]*4;i=a+12;while(a<i)this._condensedMatrices[s++]=this._globalMatrices[a++]}while(++r<t)};t.prototype.updateGlobalProperties=function(){this._globalPropertiesDirty=false;this.localToGlobalPose(this._activeSkeletonState.getSkeletonPose(this._skeleton),this._globalPose,this._skeleton);var e=0;var t=this._globalPose.jointPoses;var r;var s,i,a,o;var n,l,h;var p,u,c;var d,f,y;var m,_,b;var g,w,v;var j,x,P,D;var T,A,C,E;var S,M,O,R;var I=this._skeleton.joints;var U;var L;var B;var N;for(var F=0;F<this._numJoints;++F){U=t[F];L=U.orientation;B=U.translation;s=L.x;i=L.y;a=L.z;o=L.w;n=(N=2*s)*i;l=N*a;h=N*o;p=(N=2*i)*a;u=N*o;c=2*a*o;p=2*i*a;u=2*i*o;c=2*a*o;s*=s;i*=i;a*=a;o*=o;d=(N=s-i)-a+o;f=n-c;y=l+u;m=n+c;_=-N-a+o;b=p-h;g=l-u;w=p+h;v=-s-i+a+o;r=I[F].inverseBindPose;j=r[0];x=r[4];P=r[8];D=r[12];T=r[1];A=r[5];C=r[9];E=r[13];S=r[2];M=r[6];O=r[10];R=r[14];this._globalMatrices[e]=d*j+f*T+y*S;this._globalMatrices[e+1]=d*x+f*A+y*M;this._globalMatrices[e+2]=d*P+f*C+y*O;this._globalMatrices[e+3]=d*D+f*E+y*R+B.x;this._globalMatrices[e+4]=m*j+_*T+b*S;this._globalMatrices[e+5]=m*x+_*A+b*M;this._globalMatrices[e+6]=m*P+_*C+b*O;this._globalMatrices[e+7]=m*D+_*E+b*R+B.y;this._globalMatrices[e+8]=g*j+w*T+v*S;this._globalMatrices[e+9]=g*x+w*A+v*M;this._globalMatrices[e+10]=g*P+w*C+v*O;this._globalMatrices[e+11]=g*D+w*E+v*R+B.z;e=e+12}};t.prototype.getRenderableSubGeometry=function(e,t){this._morphedSubGeometryDirty[t.id]=true;if(!this._pAnimationSet.usesCPU)return t;var r;if(!(r=this._morphedSubGeometry[t.id])){r=this._morphedSubGeometry[t.id]=t.clone();r.autoDeriveNormals=false;r.autoDeriveTangents=false;r.autoDeriveUVs=false;t.addEventListener(a.INDICES_UPDATED,this._onIndicesUpdateDelegate);t.addEventListener(a.VERTICES_UPDATED,this._onVerticesUpdateDelegate)}return r};t.prototype.morphSubGeometry=function(e,t){this._morphedSubGeometryDirty[t.id]=false;var r=t.positions;var s=t.vertexNormals;var i=t.vertexTangents;var a=t.jointIndices;var o=t.jointWeights;var n=this._morphedSubGeometry[t.id];var l=n.positions;var h=n.vertexNormals;var p=n.vertexTangents;var u=0;var c=0;var d;var f,y,m;var _,b,g;var w,v,j;var x=r.length;var P;var D,T,A;var C,E,S;var M,O,R;var I,U,L,B;var N,F,V,k;var G,W,z,H;while(u<x){D=r[u];T=r[u+1];A=r[u+2];C=s[u];E=s[u+1];S=s[u+2];M=i[u];O=i[u+1];R=i[u+2];f=0;y=0;m=0;_=0;b=0;g=0;w=0;v=0;j=0;d=0;while(d<this._jointsPerVertex){P=o[c];if(P>0){var X=a[c++]<<2;I=this._globalMatrices[X];U=this._globalMatrices[X+1];L=this._globalMatrices[X+2];B=this._globalMatrices[X+3];N=this._globalMatrices[X+4];F=this._globalMatrices[X+5];V=this._globalMatrices[X+6];k=this._globalMatrices[X+7];G=this._globalMatrices[X+8];W=this._globalMatrices[X+9];z=this._globalMatrices[X+10];H=this._globalMatrices[X+11];f+=P*(I*D+U*T+L*A+B);y+=P*(N*D+F*T+V*A+k);m+=P*(G*D+W*T+z*A+H);_+=P*(I*C+U*E+L*S);b+=P*(N*C+F*E+V*S);g+=P*(G*C+W*E+z*S);w+=P*(I*M+U*O+L*R);v+=P*(N*M+F*O+V*R);j+=P*(G*M+W*O+z*R);++d}else{c+=this._jointsPerVertex-d;d=this._jointsPerVertex}}l[u]=f;l[u+1]=y;l[u+2]=m;h[u]=_;h[u+1]=b;h[u+2]=g;p[u]=w;p[u+1]=v;p[u+2]=j;u+=3}n.updatePositions(l);n.updateVertexNormals(h);n.updateVertexTangents(p)};t.prototype.localToGlobalPose=function(e,t,r){var s=t.jointPoses;var i;var a=r.joints;var o=e.numJointPoses;var n=e.jointPoses;var h;var p;var u;var c;var d;var f;var y;var m;var _,b,g,w;var v,j,x,P;var D,T,A;if(s.length!=o)s.length=o;for(var C=0;C<o;++C){i=s[C];if(i==null)i=s[C]=new l;p=a[C];h=p.parentIndex;c=n[C];m=i.orientation;y=i.translation;if(h<0){f=c.translation;d=c.orientation;m.x=d.x;m.y=d.y;m.z=d.z;m.w=d.w;y.x=f.x;y.y=f.y;y.z=f.z}else{u=s[h];d=u.orientation;f=c.translation;v=d.x;j=d.y;x=d.z;P=d.w;D=f.x;T=f.y;A=f.z;w=-v*D-j*T-x*A;_=P*D+j*A-x*T;b=P*T-v*A+x*D;g=P*A+v*T-j*D;f=u.translation;y.x=-w*v+_*P-b*x+g*j+f.x;y.y=-w*j+_*x+b*P-g*v+f.y;y.z=-w*x-_*j+b*v+g*P+f.z;_=d.x;b=d.y;g=d.z;w=d.w;d=c.orientation;v=d.x;j=d.y;x=d.z;P=d.w;m.w=w*P-_*v-b*j-g*x;m.x=w*v+_*P+b*x-g*j;m.y=w*j-_*x+b*P+g*v;m.z=w*x+_*j-b*v+g*P}}};t.prototype.onTransitionComplete=function(e){if(e.type==p.TRANSITION_COMPLETE){e.animationNode.removeEventListener(p.TRANSITION_COMPLETE,this._onTransitionCompleteDelegate);if(this._pActiveState==e.animationState){this._pActiveNode=this._pAnimationSet.getAnimation(this._pActiveAnimationName);this._pActiveState=this.getAnimationState(this._pActiveNode);this._activeSkeletonState=this._pActiveState}}};t.prototype.onIndicesUpdate=function(e){var t=e.target;this._morphedSubGeometry[t.id].updateIndices(t.indices)};t.prototype.onVerticesUpdate=function(e){var t=e.target;var r=this._morphedSubGeometry[t.id];switch(e.dataType){case i.UV_DATA:r.updateUVs(t.uvs);case i.SECONDARY_UV_DATA:r.updateUVs(t.secondaryUVs)}};return t}(n);t.exports=u},{"awayjs-display/lib/base/TriangleSubGeometry":735,"awayjs-display/lib/events/SubGeometryEvent":738,"awayjs-renderergl/lib/animators/AnimatorBase":667,"awayjs-renderergl/lib/animators/data/JointPose":672,"awayjs-renderergl/lib/animators/data/SkeletonPose":675,"awayjs-renderergl/lib/events/AnimationStateEvent":691,"awayjs-stagegl/lib/base/ContextGLProgramType":751}],670:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-renderergl/lib/animators/AnimationSetBase");var a=e("awayjs-renderergl/lib/animators/data/VertexAnimationMode");var o=function(e){s(t,e);function t(t,r){if(t===void 0){t=2}if(r===void 0){r="absolute"}e.call(this);this._numPoses=t;this._blendMode=r}Object.defineProperty(t.prototype,"numPoses",{get:function(){return this._numPoses},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},enumerable:true,configurable:true});t.prototype.getAGALVertexCode=function(e){if(this._blendMode==a.ABSOLUTE)return this.getAbsoluteAGALCode(e);else return this.getAdditiveAGALCode(e)};t.prototype.activate=function(e,t){};t.prototype.deactivate=function(e,t){};t.prototype.getAGALFragmentCode=function(e,t){return""};t.prototype.getAGALUVCode=function(e){return"mov "+e.uvTarget+","+e.uvSource+"\n"};t.prototype.doneAGALCode=function(e){};t.prototype.getAbsoluteAGALCode=function(e){var t="";var r=this._pFindTempReg(e.animationTargetRegisters);var s=this._pFindTempReg(e.animationTargetRegisters,r);var i=new Array("x","y","z","w");var a=e.animatableAttributes.length;var o="vc"+e.numUsedVertexConstants;if(a>2)a=2;var n=e.numUsedStreams;for(var l=0;l<a;++l){t+="mul "+r+", "+e.animatableAttributes[l]+", "+o+"."+i[0]+"\n";for(var h=1;h<this._numPoses;++h){t+="mul "+s+", va"+n+", "+o+"."+i[h]+"\n";if(h<this._numPoses-1)t+="add "+r+", "+r+", "+s+"\n";++n}t+="add "+e.animationTargetRegisters[l]+", "+r+", "+s+"\n"}if(e.tangentDependencies>0||e.outputsNormals){t+="dp3 "+r+".x, "+e.animatableAttributes[2]+", "+e.animationTargetRegisters[1]+"\n"+"mul "+r+", "+e.animationTargetRegisters[1]+", "+r+".x\n"+"sub "+e.animationTargetRegisters[2]+", "+e.animationTargetRegisters[2]+", "+r+"\n"}return t};t.prototype.getAdditiveAGALCode=function(e){var t="";var r=e.animatableAttributes.length;var s=["x","y","z","w"];var i=this._pFindTempReg(e.animationTargetRegisters);var a;var o=e.numUsedStreams;if(r>2)r=2;t+="mov  "+e.animationTargetRegisters[0]+", "+e.animatableAttributes[0]+"\n";if(e.normalDependencies>0)t+="mov "+e.animationTargetRegisters[1]+", "+e.animatableAttributes[1]+"\n";for(var n=0;n<r;++n){for(var l=0;l<this._numPoses;++l){t+="mul "+i+", va"+(o+a)+", vc"+e.numUsedVertexConstants+"."+s[l]+"\n"+"add "+e.animationTargetRegisters[n]+", "+e.animationTargetRegisters[n]+", "+i+"\n";a++}}if(e.tangentDependencies>0||e.outputsNormals){t+="dp3 "+i+".x, "+e.animatableAttributes[2]+", "+e.animationTargetRegisters[1]+"\n"+"mul "+i+", "+e.animationTargetRegisters[1]+", "+i+".x\n"+"sub "+e.animationTargetRegisters[2]+", "+e.animatableAttributes[2]+", "+i+"\n"}return t};return t}(i);t.exports=o},{"awayjs-renderergl/lib/animators/AnimationSetBase":666,"awayjs-renderergl/lib/animators/data/VertexAnimationMode":676}],671:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-display/lib/base/TriangleSubGeometry");var a=e("awayjs-stagegl/lib/base/ContextGLProgramType");var o=e("awayjs-stagegl/lib/pool/VertexDataPool");var n=e("awayjs-renderergl/lib/animators/AnimatorBase");var l=e("awayjs-renderergl/lib/animators/data/VertexAnimationMode");var h=function(e){s(t,e);function t(t){e.call(this,t);this._poses=new Array;this._weights=Array(1,0,0,0);this._vertexAnimationSet=t;this._numPoses=t.numPoses;this._blendMode=t.blendMode}t.prototype.clone=function(){return new t(this._vertexAnimationSet)};t.prototype.play=function(e,t,r){if(t===void 0){t=null}if(r===void 0){r=NaN}if(this._pActiveAnimationName==e)return;this._pActiveAnimationName=e;if(!this._pAnimationSet.hasAnimation(e))throw new Error("Animation root node "+e+" not found!");this._pActiveNode=this._pAnimationSet.getAnimation(e);this._pActiveState=this.getAnimationState(this._pActiveNode);if(this.updatePosition){this._pActiveState.update(this._pAbsoluteTime);this._pActiveState.positionDelta}this._activeVertexState=this._pActiveState;this.start();if(!isNaN(r))this.reset(e,r)};t.prototype._pUpdateDeltaTime=function(t){e.prototype._pUpdateDeltaTime.call(this,t);var r=false;if(this._poses[0]!=this._activeVertexState.currentGeometry){this._poses[0]=this._activeVertexState.currentGeometry;r=true}if(this._poses[1]!=this._activeVertexState.nextGeometry){this._poses[1]=this._activeVertexState.nextGeometry;r=true}this._weights[0]=1-(this._weights[1]=this._activeVertexState.blendWeight);if(r){var s;var i=this._pOwners.length;for(var a=0;a<i;a++){s=this._pOwners[a];s._iInvalidateRenderableGeometries()}}};t.prototype.setRenderState=function(e,t,r,s,n,h){if(!this._poses.length){this.setNullPose(e,t,r,n,h);return}var p=t.subMesh;var u;var c;var d=this._numPoses;r.context.setProgramConstantsFromArray(a.VERTEX,n,this._weights,1);if(this._blendMode==l.ABSOLUTE)c=1;else c=0;for(;c<d;++c){u=this._poses[c].subGeometries[p._iIndex]||p.subGeometry;r.activateBuffer(h++,o.getItem(u,t.getIndexData(),i.POSITION_DATA),u.getOffset(i.POSITION_DATA),i.POSITION_FORMAT);if(e.normalDependencies>0)r.activateBuffer(h++,o.getItem(u,t.getIndexData(),i.NORMAL_DATA),u.getOffset(i.NORMAL_DATA),i.NORMAL_FORMAT)}};t.prototype.setNullPose=function(e,t,r,s,o){r.context.setProgramConstantsFromArray(a.VERTEX,s,this._weights,1);if(this._blendMode==l.ABSOLUTE){var n=this._numPoses;for(var h=1;h<n;++h){r.activateBuffer(o++,t.getVertexData(i.POSITION_DATA),t.getVertexOffset(i.POSITION_DATA),i.POSITION_FORMAT);if(e.normalDependencies>0)r.activateBuffer(o++,t.getVertexData(i.NORMAL_DATA),t.getVertexOffset(i.NORMAL_DATA),i.NORMAL_FORMAT)}}};t.prototype.testGPUCompatibility=function(e){};t.prototype.getRenderableSubGeometry=function(e,t){if(this._blendMode==l.ABSOLUTE&&this._poses.length)return this._poses[0].subGeometries[e.subMesh._iIndex]||t;return t};return t}(n);t.exports=h},{"awayjs-display/lib/base/TriangleSubGeometry":735,"awayjs-renderergl/lib/animators/AnimatorBase":667,"awayjs-renderergl/lib/animators/data/VertexAnimationMode":676,"awayjs-stagegl/lib/base/ContextGLProgramType":751,"awayjs-stagegl/lib/pool/VertexDataPool":757}],672:[function(e,t,r){var s=e("awayjs-core/lib/geom/Matrix3D");var i=e("awayjs-core/lib/geom/Quaternion");var a=e("awayjs-core/lib/geom/Vector3D");var o=function(){function e(){this.orientation=new i;this.translation=new a}e.prototype.toMatrix3D=function(e){if(e===void 0){e=null}if(e==null)e=new s;this.orientation.toMatrix3D(e);e.appendTranslation(this.translation.x,this.translation.y,this.translation.z);return e};e.prototype.copyFrom=function(e){var t=e.orientation;var r=e.translation;this.orientation.x=t.x;this.orientation.y=t.y;this.orientation.z=t.z;this.orientation.w=t.w;this.translation.x=r.x;this.translation.y=r.y;this.translation.z=r.z};return e}();t.exports=o},{"awayjs-core/lib/geom/Matrix3D":712,"awayjs-core/lib/geom/Quaternion":716,"awayjs-core/lib/geom/Vector3D":718}],673:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/library/AssetType");var a=e("awayjs-core/lib/library/NamedAssetBase");var o=function(e){s(t,e);function t(){e.call(this);this.joints=new Array}Object.defineProperty(t.prototype,"numJoints",{get:function(){return this.joints.length},enumerable:true,configurable:true});t.prototype.jointFromName=function(e){var t=this.jointIndexFromName(e);if(t!=-1)return this.joints[t];else return null
};t.prototype.jointIndexFromName=function(e){var t;var r;for(var s;s<this.joints.length;s++){r=this.joints[s];if(r.name==e)return t;t++}return-1};t.prototype.dispose=function(){this.joints.length=0};Object.defineProperty(t.prototype,"assetType",{get:function(){return i.SKELETON},enumerable:true,configurable:true});return t}(a);t.exports=o},{"awayjs-core/lib/library/AssetType":719,"awayjs-core/lib/library/NamedAssetBase":720}],674:[function(e,t,r){var s=function(){function e(){this.parentIndex=-1}return e}();t.exports=s},{}],675:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/library/AssetType");var a=e("awayjs-core/lib/library/NamedAssetBase");var o=e("awayjs-renderergl/lib/animators/data/JointPose");var n=function(e){s(t,e);function t(){e.call(this);this.jointPoses=new Array}Object.defineProperty(t.prototype,"numJointPoses",{get:function(){return this.jointPoses.length},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"assetType",{get:function(){return i.SKELETON_POSE},enumerable:true,configurable:true});t.prototype.jointPoseFromName=function(e){var t=this.jointPoseIndexFromName(e);if(t!=-1)return this.jointPoses[t];else return null};t.prototype.jointPoseIndexFromName=function(e){var t;var r;for(var s;s<this.jointPoses.length;s++){r=this.jointPoses[s];if(r.name==e)return t;t++}return-1};t.prototype.clone=function(){var e=new t;var r=this.jointPoses.length;for(var s=0;s<r;s++){var i=new o;var a=this.jointPoses[s];i.name=a.name;i.copyFrom(a);e.jointPoses[s]=i}return e};t.prototype.dispose=function(){this.jointPoses.length=0};return t}(a);t.exports=n},{"awayjs-core/lib/library/AssetType":719,"awayjs-core/lib/library/NamedAssetBase":720,"awayjs-renderergl/lib/animators/data/JointPose":672}],676:[function(e,t,r){var s=function(){function e(){}e.ADDITIVE="additive";e.ABSOLUTE="absolute";return e}();t.exports=s},{}],677:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/geom/Vector3D");var a=e("awayjs-display/lib/animators/nodes/AnimationNodeBase");var o=function(e){s(t,e);function t(){e.call(this);this._pLooping=true;this._pTotalDuration=0;this._pStitchDirty=true;this._pStitchFinalFrame=false;this._pNumFrames=0;this._pDurations=new Array;this._pTotalDelta=new i;this.fixedFrameRate=true}Object.defineProperty(t.prototype,"looping",{get:function(){return this._pLooping},set:function(e){if(this._pLooping==e)return;this._pLooping=e;this._pStitchDirty=true},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"stitchFinalFrame",{get:function(){return this._pStitchFinalFrame},set:function(e){if(this._pStitchFinalFrame==e)return;this._pStitchFinalFrame=e;this._pStitchDirty=true},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"totalDuration",{get:function(){if(this._pStitchDirty)this._pUpdateStitch();return this._pTotalDuration},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"totalDelta",{get:function(){if(this._pStitchDirty)this._pUpdateStitch();return this._pTotalDelta},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lastFrame",{get:function(){if(this._pStitchDirty)this._pUpdateStitch();return this._pLastFrame},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"durations",{get:function(){return this._pDurations},enumerable:true,configurable:true});t.prototype._pUpdateStitch=function(){this._pStitchDirty=false;this._pLastFrame=this._pStitchFinalFrame?this._pNumFrames:this._pNumFrames-1;this._pTotalDuration=0;this._pTotalDelta.x=0;this._pTotalDelta.y=0;this._pTotalDelta.z=0};return t}(a);t.exports=o},{"awayjs-core/lib/geom/Vector3D":718,"awayjs-display/lib/animators/nodes/AnimationNodeBase":729}],678:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-renderergl/lib/animators/nodes/AnimationClipNodeBase");var a=e("awayjs-renderergl/lib/animators/states/SkeletonClipState");var o=function(e){s(t,e);function t(){e.call(this);this._frames=new Array;this.highQuality=false;this._pStateClass=a}Object.defineProperty(t.prototype,"frames",{get:function(){return this._frames},enumerable:true,configurable:true});t.prototype.addFrame=function(e,t){this._frames.push(e);this._pDurations.push(t);this._pNumFrames=this._pDurations.length;this._pStitchDirty=true};t.prototype.getAnimationState=function(e){return e.getAnimationState(this)};t.prototype._pUpdateStitch=function(){e.prototype._pUpdateStitch.call(this);var t=this._pNumFrames-1;var r,s,i;while(t--){this._pTotalDuration+=this._pDurations[t];r=this._frames[t].jointPoses[0].translation;s=this._frames[t+1].jointPoses[0].translation;i=s.subtract(r);this._pTotalDelta.x+=i.x;this._pTotalDelta.y+=i.y;this._pTotalDelta.z+=i.z}if(this._pStitchFinalFrame||!this._pLooping){this._pTotalDuration+=this._pDurations[this._pNumFrames-1];r=this._frames[0].jointPoses[0].translation;s=this._frames[1].jointPoses[0].translation;i=s.subtract(r);this._pTotalDelta.x+=i.x;this._pTotalDelta.y+=i.y;this._pTotalDelta.z+=i.z}};return t}(i);t.exports=o},{"awayjs-renderergl/lib/animators/nodes/AnimationClipNodeBase":677,"awayjs-renderergl/lib/animators/states/SkeletonClipState":682}],679:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/geom/Vector3D");var a=e("awayjs-renderergl/lib/animators/nodes/AnimationClipNodeBase");var o=e("awayjs-renderergl/lib/animators/states/VertexClipState");var n=function(e){s(t,e);function t(){e.call(this);this._frames=new Array;this._translations=new Array;this._pStateClass=o}Object.defineProperty(t.prototype,"frames",{get:function(){return this._frames},enumerable:true,configurable:true});t.prototype.addFrame=function(e,t,r){if(r===void 0){r=null}this._frames.push(e);this._pDurations.push(t);this._translations.push(r||new i);this._pNumFrames=this._pDurations.length;this._pStitchDirty=true};t.prototype._pUpdateStitch=function(){e.prototype._pUpdateStitch.call(this);var t=this._pNumFrames-1;var r,s,i;while(t--){this._pTotalDuration+=this._pDurations[t];r=this._translations[t];s=this._translations[t+1];i=s.subtract(r);this._pTotalDelta.x+=i.x;this._pTotalDelta.y+=i.y;this._pTotalDelta.z+=i.z}if(this._pNumFrames>1&&(this._pStitchFinalFrame||!this._pLooping)){this._pTotalDuration+=this._pDurations[this._pNumFrames-1];r=this._translations[0];s=this._translations[1];i=s.subtract(r);this._pTotalDelta.x+=i.x;this._pTotalDelta.y+=i.y;this._pTotalDelta.z+=i.z}};return t}(a);t.exports=n},{"awayjs-core/lib/geom/Vector3D":718,"awayjs-renderergl/lib/animators/nodes/AnimationClipNodeBase":677,"awayjs-renderergl/lib/animators/states/VertexClipState":683}],680:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-renderergl/lib/animators/states/AnimationStateBase");var a=e("awayjs-renderergl/lib/events/AnimationStateEvent");var o=function(e){s(t,e);function t(t,r){e.call(this,t,r);this._pFramesDirty=true;this._animationClipNode=r}Object.defineProperty(t.prototype,"blendWeight",{get:function(){if(this._pFramesDirty)this._pUpdateFrames();return this._pBlendWeight},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"currentFrame",{get:function(){if(this._pFramesDirty)this._pUpdateFrames();return this._pCurrentFrame},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"nextFrame",{get:function(){if(this._pFramesDirty)this._pUpdateFrames();return this._pNextFrame},enumerable:true,configurable:true});t.prototype.update=function(e){if(!this._animationClipNode.looping){if(e>this._pStartTime+this._animationClipNode.totalDuration)e=this._pStartTime+this._animationClipNode.totalDuration;else if(e<this._pStartTime)e=this._pStartTime}if(this._pTime==e-this._pStartTime)return;this._pUpdateTime(e)};t.prototype.phase=function(e){var t=e*this._animationClipNode.totalDuration+this._pStartTime;if(this._pTime==t-this._pStartTime)return;this._pUpdateTime(t)};t.prototype._pUpdateTime=function(t){this._pFramesDirty=true;this._pTimeDir=t-this._pStartTime>this._pTime?1:-1;e.prototype._pUpdateTime.call(this,t)};t.prototype._pUpdateFrames=function(){this._pFramesDirty=false;var e=this._animationClipNode.looping;var t=this._animationClipNode.totalDuration;var r=this._animationClipNode.lastFrame;var s=this._pTime;if(e&&(s>=t||s<0)){s%=t;if(s<0)s+=t}if(!e&&s>=t){this.notifyPlaybackComplete();this._pCurrentFrame=r;this._pNextFrame=r;this._pBlendWeight=0}else if(!e&&s<=0){this._pCurrentFrame=0;this._pNextFrame=0;this._pBlendWeight=0}else if(this._animationClipNode.fixedFrameRate){var i=s/t*r;this._pCurrentFrame=Math.floor(i);this._pBlendWeight=i-this._pCurrentFrame;this._pNextFrame=this._pCurrentFrame+1}else{this._pCurrentFrame=0;this._pNextFrame=0;var a=0,o;var n=this._animationClipNode.durations;do{o=a;a+=n[this._pNextFrame];this._pCurrentFrame=this._pNextFrame++}while(s>a);if(this._pCurrentFrame==r){this._pCurrentFrame=0;this._pNextFrame=1}this._pBlendWeight=(s-o)/n[this._pCurrentFrame]}};t.prototype.notifyPlaybackComplete=function(){if(this._animationStatePlaybackComplete==null)this._animationStatePlaybackComplete=new a(a.PLAYBACK_COMPLETE,this._pAnimator,this,this._animationClipNode);this._animationClipNode.dispatchEvent(this._animationStatePlaybackComplete)};return t}(i);t.exports=o},{"awayjs-renderergl/lib/animators/states/AnimationStateBase":681,"awayjs-renderergl/lib/events/AnimationStateEvent":691}],681:[function(e,t,r){var s=e("awayjs-core/lib/geom/Vector3D");var i=function(){function e(e,t){this._pRootDelta=new s;this._pPositionDeltaDirty=true;this._pStartTime=0;this._pAnimator=e;this._pAnimationNode=t}Object.defineProperty(e.prototype,"positionDelta",{get:function(){if(this._pPositionDeltaDirty){this._pUpdatePositionDelta()}return this._pRootDelta},enumerable:true,configurable:true});e.prototype.offset=function(e){this._pStartTime=e;this._pPositionDeltaDirty=true};e.prototype.update=function(e){if(this._pTime==e-this._pStartTime){return}this._pUpdateTime(e)};e.prototype.phase=function(e){};e.prototype._pUpdateTime=function(e){this._pTime=e-this._pStartTime;this._pPositionDeltaDirty=true};e.prototype._pUpdatePositionDelta=function(){};return e}();t.exports=i},{"awayjs-core/lib/geom/Vector3D":718}],682:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/geom/Vector3D");var a=e("awayjs-renderergl/lib/animators/data/JointPose");var o=e("awayjs-renderergl/lib/animators/data/SkeletonPose");var n=e("awayjs-renderergl/lib/animators/states/AnimationClipState");var l=function(e){s(t,e);function t(t,r){e.call(this,t,r);this._rootPos=new i;this._skeletonPose=new o;this._skeletonPoseDirty=true;this._skeletonClipNode=r;this._frames=this._skeletonClipNode.frames}Object.defineProperty(t.prototype,"currentPose",{get:function(){if(this._pFramesDirty)this._pUpdateFrames();return this._currentPose},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"nextPose",{get:function(){if(this._pFramesDirty)this._pUpdateFrames();return this._nextPose},enumerable:true,configurable:true});t.prototype.getSkeletonPose=function(e){if(this._skeletonPoseDirty)this.updateSkeletonPose(e);return this._skeletonPose};t.prototype._pUpdateTime=function(t){this._skeletonPoseDirty=true;e.prototype._pUpdateTime.call(this,t)};t.prototype._pUpdateFrames=function(){e.prototype._pUpdateFrames.call(this);this._currentPose=this._frames[this._pCurrentFrame];if(this._skeletonClipNode.looping&&this._pNextFrame>=this._skeletonClipNode.lastFrame){this._nextPose=this._frames[0];this._pAnimator.dispatchCycleEvent()}else this._nextPose=this._frames[this._pNextFrame]};t.prototype.updateSkeletonPose=function(e){this._skeletonPoseDirty=false;if(!this._skeletonClipNode.totalDuration)return;if(this._pFramesDirty)this._pUpdateFrames();var t=this._currentPose.jointPoses;var r=this._nextPose.jointPoses;var s=e.numJoints;var i,o;var n,l;var h=this._skeletonPose.jointPoses;var p;var u;if(h.length!=s)h.length=s;if(s!=t.length||s!=r.length)throw new Error("joint counts don't match!");for(var c=0;c<s;++c){p=h[c];if(p==null)p=h[c]=new a;n=t[c];l=r[c];i=n.translation;o=l.translation;if(this._skeletonClipNode.highQuality)p.orientation.slerp(n.orientation,l.orientation,this._pBlendWeight);else p.orientation.lerp(n.orientation,l.orientation,this._pBlendWeight);if(c>0){u=p.translation;u.x=i.x+this._pBlendWeight*(o.x-i.x);u.y=i.y+this._pBlendWeight*(o.y-i.y);u.z=i.z+this._pBlendWeight*(o.z-i.z)}}};t.prototype._pUpdatePositionDelta=function(){this._pPositionDeltaDirty=false;if(this._pFramesDirty)this._pUpdateFrames();var e,t,r;var s=this._skeletonClipNode.totalDelta;if(this._pTimeDir>0&&this._pNextFrame<this._pOldFrame||this._pTimeDir<0&&this._pNextFrame>this._pOldFrame){this._rootPos.x-=s.x*this._pTimeDir;this._rootPos.y-=s.y*this._pTimeDir;this._rootPos.z-=s.z*this._pTimeDir}var i=this._rootPos.x;var a=this._rootPos.y;var o=this._rootPos.z;if(this._skeletonClipNode.stitchFinalFrame&&this._pNextFrame==this._skeletonClipNode.lastFrame){e=this._frames[0].jointPoses[0].translation;t=this._frames[1].jointPoses[0].translation;r=this._currentPose.jointPoses[0].translation;this._rootPos.x=r.x+e.x+this._pBlendWeight*(t.x-e.x);this._rootPos.y=r.y+e.y+this._pBlendWeight*(t.y-e.y);this._rootPos.z=r.z+e.z+this._pBlendWeight*(t.z-e.z)}else{e=this._currentPose.jointPoses[0].translation;t=this._frames[this._pNextFrame].jointPoses[0].translation;this._rootPos.x=e.x+this._pBlendWeight*(t.x-e.x);this._rootPos.y=e.y+this._pBlendWeight*(t.y-e.y);this._rootPos.z=e.z+this._pBlendWeight*(t.z-e.z)}this._pRootDelta.x=this._rootPos.x-i;this._pRootDelta.y=this._rootPos.y-a;this._pRootDelta.z=this._rootPos.z-o;this._pOldFrame=this._pNextFrame};return t}(n);t.exports=l},{"awayjs-core/lib/geom/Vector3D":718,"awayjs-renderergl/lib/animators/data/JointPose":672,"awayjs-renderergl/lib/animators/data/SkeletonPose":675,"awayjs-renderergl/lib/animators/states/AnimationClipState":680}],683:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-renderergl/lib/animators/states/AnimationClipState");var a=function(e){s(t,e);function t(t,r){e.call(this,t,r);this._vertexClipNode=r;this._frames=this._vertexClipNode.frames}Object.defineProperty(t.prototype,"currentGeometry",{get:function(){if(this._pFramesDirty)this._pUpdateFrames();return this._currentGeometry},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"nextGeometry",{get:function(){if(this._pFramesDirty)this._pUpdateFrames();return this._nextGeometry},enumerable:true,configurable:true});t.prototype._pUpdateFrames=function(){e.prototype._pUpdateFrames.call(this);this._currentGeometry=this._frames[this._pCurrentFrame];if(this._vertexClipNode.looping&&this._pNextFrame>=this._vertexClipNode.lastFrame){this._nextGeometry=this._frames[0];this._pAnimator.dispatchCycleEvent()}else this._nextGeometry=this._frames[this._pNextFrame]};t.prototype._pUpdatePositionDelta=function(){};return t}(i);t.exports=a},{"awayjs-renderergl/lib/animators/states/AnimationClipState":680}],684:[function(e,t,r){t.exports=e(295)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/RegisterPool.js":295,"awayjs-renderergl/lib/compilation/ShaderRegisterElement":689}],685:[function(e,t,r){t.exports=e(296)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/ShaderCompilerBase.js":296,"awayjs-renderergl/lib/compilation/ShaderRegisterCache":687,"awayjs-renderergl/lib/compilation/ShaderRegisterData":688}],686:[function(e,t,r){t.exports=e(299)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/ShaderObjectBase.js":299,"awayjs-display/lib/base/TriangleSubGeometry":735,"awayjs-renderergl/lib/compilation/ShaderCompilerBase":685,"awayjs-stagegl/lib/base/ContextGLTriangleFace":754}],687:[function(e,t,r){t.exports=e(300)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/ShaderRegisterCache.js":300,"awayjs-renderergl/lib/compilation/RegisterPool":684,"awayjs-renderergl/lib/compilation/ShaderRegisterElement":689}],688:[function(e,t,r){t.exports=e(301)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/ShaderRegisterData.js":301}],689:[function(e,t,r){t.exports=e(302)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/ShaderRegisterElement.js":302}],690:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/errors/Error");var a=function(e){s(t,e);function t(t){e.call(this,t)}return t}(i);t.exports=a},{"awayjs-core/lib/errors/Error":707}],691:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/events/Event");var a=function(e){s(t,e);function t(t,r,s,i){e.call(this,t);this._animator=r;this._animationState=s;this._animationNode=i}Object.defineProperty(t.prototype,"animator",{get:function(){return this._animator},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"animationState",{get:function(){return this._animationState},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"animationNode",{get:function(){return this._animationNode},enumerable:true,configurable:true});t.prototype.clone=function(){return new t(this.type,this._animator,this._animationState,this._animationNode)};t.PLAYBACK_COMPLETE="playbackComplete";t.TRANSITION_COMPLETE="transitionComplete";return t}(i);t.exports=a},{"awayjs-core/lib/events/Event":709}],692:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/events/Event");var a=function(e){s(t,e);function t(t,r){e.call(this,t);this._animator=r}Object.defineProperty(t.prototype,"animator",{get:function(){return this._animator},enumerable:true,configurable:true});t.prototype.clone=function(){return new t(this.type,this._animator)};t.START="start";t.STOP="stop";t.CYCLE_COMPLETE="cycle_complete";return t}(i);t.exports=a},{"awayjs-core/lib/events/Event":709}],693:[function(e,t,r){var s=e("awayjs-core/lib/base/BitmapData");var i=e("awayjs-core/lib/library/AssetType");var a=e("awayjs-core/lib/textures/BitmapTexture");var o=e("awayjs-renderergl/lib/materials/LineBasicMaterial");var n=e("awayjs-renderergl/lib/materials/TriangleBasicMaterial");var l=function(){function e(){}e.getDefaultMaterial=function(t){if(t===void 0){t=null}if(t!=null&&t.assetType==i.LINE_SUB_MESH){if(!e._defaultLineMaterial)e.createDefaultLineMaterial();return e._defaultLineMaterial}else{if(!e._defaultTriangleMaterial)e.createDefaultTriangleMaterial();return e._defaultTriangleMaterial}};e.getDefaultTexture=function(t){if(t===void 0){t=null}if(!e._defaultTexture)e.createDefaultTexture();return e._defaultTexture};e.createDefaultTexture=function(){e._defaultBitmapData=e.createCheckeredBitmapData();e._defaultTexture=new a(e._defaultBitmapData,true);e._defaultTexture.name="defaultTexture"};e.createCheckeredBitmapData=function(){var e=new s(8,8,false,0);var t,r;for(t=0;t<8;t++){for(r=0;r<8;r++){if(r&1^t&1){e.setPixel(t,r,16777215)}}}return e};e.createDefaultTriangleMaterial=function(){if(!e._defaultTexture)e.createDefaultTexture();e._defaultTriangleMaterial=new n(e._defaultTexture);e._defaultTriangleMaterial.mipmap=false;e._defaultTriangleMaterial.smooth=false;e._defaultTriangleMaterial.name="defaultTriangleMaterial"};e.createDefaultLineMaterial=function(){e._defaultLineMaterial=new o;e._defaultLineMaterial.name="defaultSegmentMaterial"};return e}();t.exports=l},{"awayjs-core/lib/base/BitmapData":704,"awayjs-core/lib/library/AssetType":719,"awayjs-core/lib/textures/BitmapTexture":721,"awayjs-renderergl/lib/materials/LineBasicMaterial":694,"awayjs-renderergl/lib/materials/TriangleBasicMaterial":697}],694:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/geom/Matrix3D");var a=e("awayjs-display/lib/base/LineSubGeometry");var o=e("awayjs-stagegl/lib/base/ContextGLProgramType");var n=e("awayjs-renderergl/lib/materials/MaterialGLBase");var l=e("awayjs-renderergl/lib/passes/LineBasicPass");var h=function(e){s(t,e);function t(t){if(t===void 0){t=1.25}e.call(this);this._constants=new Array(0,0,0,0);this._thickness=t;this.bothSides=true;this._pAddScreenPass(this._screenPass=new l);this._calcMatrix=new i;this._constants[1]=1/255}t.prototype._iGetVertexCode=function(e,t,r){return"m44 vt0, va0, vc8			\n"+"m44 vt1, va1, vc8			\n"+"sub vt2, vt1, vt0 			\n"+"slt vt5.x, vt0.z, vc7.z			\n"+"sub vt5.y, vc5.x, vt5.x			\n"+"add vt4.x, vt0.z, vc7.z			\n"+"sub vt4.y, vt0.z, vt1.z			\n"+"seq vt4.z, vt4.y vc6.x			\n"+"add vt4.y, vt4.y, vt4.z			\n"+"div vt4.z, vt4.x, vt4.y			\n"+"mul vt4.xyz, vt4.zzz, vt2.xyz	\n"+"add vt3.xyz, vt0.xyz, vt4.xyz	\n"+"mov vt3.w, vc5.x			\n"+"mul vt0, vt0, vt5.yyyy			\n"+"mul vt3, vt3, vt5.xxxx			\n"+"add vt0, vt0, vt3				\n"+"sub vt2, vt1, vt0 			\n"+"nrm vt2.xyz, vt2.xyz			\n"+"nrm vt5.xyz, vt0.xyz			\n"+"mov vt5.w, vc5.x				\n"+"crs vt3.xyz, vt2, vt5			\n"+"nrm vt3.xyz, vt3.xyz			\n"+"mul vt3.xyz, vt3.xyz, va2.xxx	\n"+"mov vt3.w, vc5.x			\n"+"dp3 vt4.x, vt0, vc6			\n"+"mul vt4.x, vt4.x, vc7.x			\n"+"mul vt3.xyz, vt3.xyz, vt4.xxx	\n"+"add vt0.xyz, vt0.xyz, vt3.xyz	\n"+"m44 op, vt0, vc0			\n"+"mov v0, va3				\n"};t.prototype._iActivatePass=function(r,s,i){e.prototype._iActivatePass.call(this,r,s,i);var a=s.context;var n=s.stage;this._constants[0]=this._thickness/(n.scissorRect?Math.min(n.scissorRect.width,n.scissorRect.height):Math.min(n.width,n.height));this._constants[2]=i.projection.near;a.setProgramConstantsFromArray(o.VERTEX,5,t.pONE_VECTOR,1);a.setProgramConstantsFromArray(o.VERTEX,6,t.pFRONT_VECTOR,1);a.setProgramConstantsFromArray(o.VERTEX,7,this._constants,1);a.setProgramConstantsFromMatrix(o.VERTEX,0,i.projection.matrix,true)};t.prototype._iRenderPass=function(t,r,s,i,n){e.prototype._iRenderPass.call(this,t,r,s,i,n);var l=s.context;this._calcMatrix.copyFrom(r.sourceEntity.sceneTransform);this._calcMatrix.append(i.inverseSceneTransform);l.setProgramConstantsFromMatrix(o.VERTEX,8,this._calcMatrix,true);s.activateBuffer(0,r.getVertexData(a.START_POSITION_DATA),r.getVertexOffset(a.START_POSITION_DATA),a.POSITION_FORMAT);s.activateBuffer(1,r.getVertexData(a.END_POSITION_DATA),r.getVertexOffset(a.END_POSITION_DATA),a.POSITION_FORMAT);s.activateBuffer(2,r.getVertexData(a.THICKNESS_DATA),r.getVertexOffset(a.THICKNESS_DATA),a.THICKNESS_FORMAT);s.activateBuffer(3,r.getVertexData(a.COLOR_DATA),r.getVertexOffset(a.COLOR_DATA),a.COLOR_FORMAT);l.drawTriangles(s.getIndexBuffer(r.getIndexData()),0,r.numTriangles)};t.pONE_VECTOR=Array(1,1,1,1);t.pFRONT_VECTOR=Array(0,0,-1,0);return t}(n);t.exports=h},{"awayjs-core/lib/geom/Matrix3D":712,"awayjs-display/lib/base/LineSubGeometry":731,"awayjs-renderergl/lib/materials/MaterialGLBase":695,"awayjs-renderergl/lib/passes/LineBasicPass":699,"awayjs-stagegl/lib/base/ContextGLProgramType":751}],695:[function(e,t,r){t.exports=e(304)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/materials/MaterialGLBase.js":304,"awayjs-display/lib/materials/MaterialBase":739}],696:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-display/lib/base/TriangleSubGeometry");var a=e("awayjs-stagegl/lib/base/ContextGLCompareMode");var o=e("awayjs-stagegl/lib/base/ContextGLMipFilter");var n=e("awayjs-stagegl/lib/base/ContextGLProgramType");var l=e("awayjs-stagegl/lib/base/ContextGLTextureFilter");var h=e("awayjs-stagegl/lib/base/ContextGLWrapMode");var p=e("awayjs-renderergl/lib/materials/MaterialGLBase");var u=e("awayjs-renderergl/lib/passes/SkyboxPass");var c=e("awayjs-renderergl/lib/utils/ShaderCompilerHelper");var d=function(e){s(t,e);function t(t,r,s,i){if(r===void 0){r=true}if(s===void 0){s=false}if(i===void 0){i=false}e.call(this);this._cubeMap=t;this._pAddScreenPass(this._skyboxPass=new u);this._vertexData=new Array(0,0,0,0,1,1,1,1)}Object.defineProperty(t.prototype,"cubeMap",{get:function(){return this._cubeMap},set:function(e){if(e&&this._cubeMap&&(e.hasMipmaps!=this._cubeMap.hasMipmaps||e.format!=this._cubeMap.format))this._pInvalidatePasses();this._cubeMap=e},enumerable:true,configurable:true});t.prototype._iGetVertexCode=function(e,t,r){return"mul vt0, va0, vc5\n"+"add vt0, vt0, vc4\n"+"m44 op, vt0, vc0\n"+"mov v0, va0\n"};t.prototype._iGetFragmentCode=function(e,t,r){var s=",mipnone";if(this._cubeMap.hasMipmaps)s=",miplinear";return"tex ft0, v0, fs0 <cube,"+c.getFormatStringForTexture(this._cubeMap)+"linear,clamp"+s+">\n"};t.prototype._iActivatePass=function(t,r,s){e.prototype._iActivatePass.call(this,t,r,s);var i=r.context;i.setSamplerStateAt(0,h.CLAMP,l.LINEAR,this._cubeMap.hasMipmaps?o.MIPLINEAR:o.MIPNONE);i.setDepthTest(false,a.LESS);r.stage.activateCubeTexture(0,this._cubeMap)};t.prototype._iRenderPass=function(t,r,s,a,o){e.prototype._iRenderPass.call(this,t,r,s,a,o);var l=s.context;var h=a.scenePosition;this._vertexData[0]=h.x;this._vertexData[1]=h.y;this._vertexData[2]=h.z;this._vertexData[4]=this._vertexData[5]=this._vertexData[6]=a.projection.far/Math.sqrt(3);l.setProgramConstantsFromMatrix(n.VERTEX,0,o,true);l.setProgramConstantsFromArray(n.VERTEX,4,this._vertexData,2);s.activateBuffer(0,r.getVertexData(i.POSITION_DATA),r.getVertexOffset(i.POSITION_DATA),i.POSITION_FORMAT);l.drawTriangles(s.getIndexBuffer(r.getIndexData()),0,r.numTriangles)};return t}(p);t.exports=d},{"awayjs-display/lib/base/TriangleSubGeometry":735,"awayjs-renderergl/lib/materials/MaterialGLBase":695,"awayjs-renderergl/lib/passes/SkyboxPass":701,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":703,"awayjs-stagegl/lib/base/ContextGLCompareMode":749,"awayjs-stagegl/lib/base/ContextGLMipFilter":750,"awayjs-stagegl/lib/base/ContextGLProgramType":751,"awayjs-stagegl/lib/base/ContextGLTextureFilter":752,"awayjs-stagegl/lib/base/ContextGLWrapMode":755}],697:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/textures/Texture2DBase");var a=e("awayjs-display/lib/base/BlendMode");var o=e("awayjs-stagegl/lib/base/ContextGLCompareMode");var n=e("awayjs-renderergl/lib/materials/TriangleMaterialBase");var l=e("awayjs-renderergl/lib/passes/TriangleBasicPass");var h=function(e){s(t,e);function t(t,r,s,a){if(t===void 0){t=null}if(r===void 0){r=null}if(s===void 0){s=false}if(a===void 0){a=false}e.call(this);this._alphaBlending=false;this._alpha=1;this._depthCompareMode=o.LESS_EQUAL;this._screenPass=new l;if(t instanceof i){this.texture=t;this.smooth=r==null?true:false;this.repeat=s;this.mipmap=a}else{this.color=t?Number(t):13421772;this.alpha=r==null?1:Number(r)}}Object.defineProperty(t.prototype,"depthCompareMode",{get:function(){return this._depthCompareMode},set:function(e){if(this._depthCompareMode==e)return;this._depthCompareMode=e;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(e){if(e>1)e=1;else if(e<0)e=0;if(this._alpha==e)return;this._alpha=e;this._pInvalidatePasses()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"alphaBlending",{get:function(){return this._alphaBlending},set:function(e){if(this._alphaBlending==e)return;this._alphaBlending=e;this._pInvalidatePasses()},enumerable:true,configurable:true});t.prototype._iUpdateMaterial=function(){if(this._pScreenPassesInvalid){this._pScreenPassesInvalid=false;this.setBlendAndCompareModes();this._pClearScreenPasses();this._pAddScreenPass(this._screenPass)}};t.prototype.setBlendAndCompareModes=function(){this._pRequiresBlending=this._pBlendMode!=a.NORMAL||this._alphaBlending||this._alpha<1;this._screenPass.depthCompareMode=this._depthCompareMode;this._screenPass.preserveAlpha=this._pRequiresBlending;this._screenPass.setBlendMode(this._pBlendMode==a.NORMAL&&this._pRequiresBlending?a.LAYER:this._pBlendMode);this._screenPass.forceSeparateMVP=false};return t}(n);t.exports=h},{"awayjs-core/lib/textures/Texture2DBase":723,"awayjs-display/lib/base/BlendMode":730,"awayjs-renderergl/lib/materials/TriangleMaterialBase":698,"awayjs-renderergl/lib/passes/TriangleBasicPass":702,"awayjs-stagegl/lib/base/ContextGLCompareMode":749}],698:[function(e,t,r){t.exports=e(305)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/materials/TriangleMaterialBase.js":305,"awayjs-core/lib/geom/Matrix3DUtils":713,"awayjs-display/lib/base/TriangleSubGeometry":735,"awayjs-renderergl/lib/materials/MaterialGLBase":695,"awayjs-stagegl/lib/base/ContextGLProgramType":751}],699:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-renderergl/lib/passes/MaterialPassGLBase");var a=function(e){s(t,e);function t(){e.call(this)}t.prototype._iGetFragmentCode=function(e,t,r){var s=r.shadedTarget;return"mov "+s+", v0\n"};return t}(i);t.exports=a},{"awayjs-renderergl/lib/passes/MaterialPassGLBase":700}],700:[function(e,t,r){t.exports=e(307)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/passes/MaterialPassGLBase.js":307,"awayjs-core/lib/errors/ArgumentError":706,"awayjs-core/lib/events/Event":709,"awayjs-core/lib/library/NamedAssetBase":720,"awayjs-display/lib/base/BlendMode":730,"awayjs-renderergl/lib/compilation/ShaderObjectBase":686,"awayjs-stagegl/lib/base/ContextGLBlendFactor":748,"awayjs-stagegl/lib/base/ContextGLCompareMode":749}],701:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-renderergl/lib/passes/MaterialPassGLBase");var a=function(e){s(t,e);function t(){e.call(this)}t.prototype._iIncludeDependencies=function(e){e.useMipmapping=false};return t}(i);t.exports=a},{"awayjs-renderergl/lib/passes/MaterialPassGLBase":700}],702:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-stagegl/lib/base/ContextGLMipFilter");var a=e("awayjs-stagegl/lib/base/ContextGLTextureFilter");
var o=e("awayjs-stagegl/lib/base/ContextGLWrapMode");var n=e("awayjs-renderergl/lib/passes/MaterialPassGLBase");var l=e("awayjs-renderergl/lib/utils/ShaderCompilerHelper");var h=function(e){s(t,e);function t(){e.call(this);this._diffuseColor=16777215;this._diffuseR=1;this._diffuseG=1;this._diffuseB=1;this._diffuseA=1}Object.defineProperty(t.prototype,"diffuseAlpha",{get:function(){return this._diffuseA},set:function(e){this._diffuseA=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"diffuseColor",{get:function(){return this._diffuseColor},set:function(e){this._diffuseColor=e;this._diffuseR=(this._diffuseColor>>16&255)/255;this._diffuseG=(this._diffuseColor>>8&255)/255;this._diffuseB=(this._diffuseColor&255)/255},enumerable:true,configurable:true});t.prototype._iGetFragmentCode=function(e,t,r){var s="";var i=r.shadedTarget;var a;if(e.texture!=null){a=t.getFreeTextureReg();this._texturesIndex=a.index;s+=l.getTex2DSampleCode(i,r,a,e.texture,e.useSmoothTextures,e.repeatTextures,e.useMipmapping);if(e.alphaThreshold>0){var o=t.getFreeFragmentConstant();this._fragmentConstantsIndex=o.index*4;s+="sub "+i+".w, "+i+".w, "+o+".x\n"+"kil "+i+".w\n"+"add "+i+".w, "+i+".w, "+o+".x\n"}}else{a=t.getFreeFragmentConstant();this._fragmentConstantsIndex=a.index*4;s+="mov "+i+", "+a+"\n"}return s};t.prototype._iIncludeDependencies=function(e){if(e.texture!=null)e.uvDependencies++};t.prototype._iActivate=function(t,r,s){e.prototype._iActivate.call(this,t,r,s);var n=t.shaderObject;if(n.texture!=null){r.context.setSamplerStateAt(this._texturesIndex,n.repeatTextures?o.REPEAT:o.CLAMP,n.useSmoothTextures?a.LINEAR:a.NEAREST,n.useMipmapping?i.MIPLINEAR:i.MIPNONE);r.stage.activateTexture(this._texturesIndex,n.texture);if(n.alphaThreshold>0)n.fragmentConstantData[this._fragmentConstantsIndex]=n.alphaThreshold}else{var l=this._fragmentConstantsIndex;var h=n.fragmentConstantData;h[l]=this._diffuseR;h[l+1]=this._diffuseG;h[l+2]=this._diffuseB;h[l+3]=this._diffuseA}};return t}(n);t.exports=h},{"awayjs-renderergl/lib/passes/MaterialPassGLBase":700,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":703,"awayjs-stagegl/lib/base/ContextGLMipFilter":750,"awayjs-stagegl/lib/base/ContextGLTextureFilter":752,"awayjs-stagegl/lib/base/ContextGLWrapMode":755}],703:[function(e,t,r){t.exports=e(308)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/utils/ShaderCompilerHelper.js":308,"awayjs-stagegl/lib/base/ContextGLTextureFormat":753}],704:[function(e,t,r){t.exports=e(2)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/base/BitmapData.js":2,"awayjs-core/lib/geom/Rectangle":717,"awayjs-core/lib/utils/ColorUtils":725}],705:[function(e,t,r){t.exports=e(4)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/AbstractMethodError.js":4,"awayjs-core/lib/errors/Error":707}],706:[function(e,t,r){t.exports=e(5)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/ArgumentError.js":5,"awayjs-core/lib/errors/Error":707}],707:[function(e,t,r){t.exports=e(6)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/Error.js":6}],708:[function(e,t,r){t.exports=e(7)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/AssetEvent.js":7,"awayjs-core/lib/events/Event":709}],709:[function(e,t,r){t.exports=e(8)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/Event.js":8}],710:[function(e,t,r){t.exports=e(9)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/EventDispatcher.js":9}],711:[function(e,t,r){t.exports=e(16)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Matrix.js":16,"awayjs-core/lib/errors/ArgumentError":706,"awayjs-core/lib/geom/Point":715}],712:[function(e,t,r){t.exports=e(144)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Matrix3D.js":144,"awayjs-core/lib/errors/ArgumentError":706,"awayjs-core/lib/geom/Orientation3D":714,"awayjs-core/lib/geom/Vector3D":718}],713:[function(e,t,r){t.exports=e(145)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Matrix3DUtils.js":145,"awayjs-core/lib/geom/Matrix3D":712,"awayjs-core/lib/geom/Vector3D":718}],714:[function(e,t,r){t.exports=e(146)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Orientation3D.js":146}],715:[function(e,t,r){t.exports=e(17)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Point.js":17}],716:[function(e,t,r){var s=e("awayjs-core/lib/geom/Matrix3DUtils");var i=e("awayjs-core/lib/geom/Orientation3D");var a=e("awayjs-core/lib/geom/Matrix3D");var o=e("awayjs-core/lib/geom/Vector3D");var n=function(){function e(e,t,r,s){if(e===void 0){e=0}if(t===void 0){t=0}if(r===void 0){r=0}if(s===void 0){s=1}this.x=0;this.y=0;this.z=0;this.w=1;this.x=e;this.y=t;this.z=r;this.w=s}Object.defineProperty(e.prototype,"magnitude",{get:function(){return Math.sqrt(this.w*this.w+this.x*this.x+this.y*this.y+this.z*this.z)},enumerable:true,configurable:true});e.prototype.multiply=function(e,t){var r=e.w,s=e.x,i=e.y,a=e.z;var o=t.w,n=t.x,l=t.y,h=t.z;this.w=r*o-s*n-i*l-a*h;this.x=r*n+s*o+i*h-a*l;this.y=r*l-s*h+i*o+a*n;this.z=r*h+s*l-i*n+a*o};e.prototype.multiplyVector=function(t,r){if(r===void 0){r=null}if(r===null){r=new e}var s=t.x;var i=t.y;var a=t.z;r.w=-this.x*s-this.y*i-this.z*a;r.x=this.w*s+this.y*a-this.z*i;r.y=this.w*i-this.x*a+this.z*s;r.z=this.w*a+this.x*i-this.y*s;return r};e.prototype.fromAxisAngle=function(e,t){var r=Math.sin(t/2);var s=Math.cos(t/2);this.x=e.x*r;this.y=e.y*r;this.z=e.z*r;this.w=s;this.normalize()};e.prototype.slerp=function(e,t,r){var s=e.w,i=e.x,a=e.y,o=e.z;var n=t.w,l=t.x,h=t.y,p=t.z;var u=s*n+i*l+a*h+o*p;if(u<0){u=-u;n=-n;l=-l;h=-h;p=-p}if(u<.95){var c=Math.acos(u);var d=1/Math.sin(c);var f=Math.sin(c*(1-r))*d;var y=Math.sin(c*r)*d;this.w=s*f+n*y;this.x=i*f+l*y;this.y=a*f+h*y;this.z=o*f+p*y}else{this.w=s+r*(n-s);this.x=i+r*(l-i);this.y=a+r*(h-a);this.z=o+r*(p-o);var m=1/Math.sqrt(this.w*this.w+this.x*this.x+this.y*this.y+this.z*this.z);this.w*=m;this.x*=m;this.y*=m;this.z*=m}};e.prototype.lerp=function(e,t,r){var s=e.w,i=e.x,a=e.y,o=e.z;var n=t.w,l=t.x,h=t.y,p=t.z;var u;if(s*n+i*l+a*h+o*p<0){n=-n;l=-l;h=-h;p=-p}this.w=s+r*(n-s);this.x=i+r*(l-i);this.y=a+r*(h-a);this.z=o+r*(p-o);u=1/Math.sqrt(this.w*this.w+this.x*this.x+this.y*this.y+this.z*this.z);this.w*=u;this.x*=u;this.y*=u;this.z*=u};e.prototype.fromEulerAngles=function(e,t,r){var s=e*.5,i=t*.5,a=r*.5;var o=Math.cos(s),n=Math.sin(s);var l=Math.cos(i),h=Math.sin(i);var p=Math.cos(a),u=Math.sin(a);this.w=o*l*p+n*h*u;this.x=n*l*p-o*h*u;this.y=o*h*p+n*l*u;this.z=o*l*u-n*h*p};e.prototype.toEulerAngles=function(e){if(e===void 0){e=null}if(e===null){e=new o}e.x=Math.atan2(2*(this.w*this.x+this.y*this.z),1-2*(this.x*this.x+this.y*this.y));e.y=Math.asin(2*(this.w*this.y-this.z*this.x));e.z=Math.atan2(2*(this.w*this.z+this.x*this.y),1-2*(this.y*this.y+this.z*this.z));return e};e.prototype.normalize=function(e){if(e===void 0){e=1}var t=e/Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);this.x*=t;this.y*=t;this.z*=t;this.w*=t};e.prototype.toString=function(){return"{x:"+this.x+" y:"+this.y+" z:"+this.z+" w:"+this.w+"}"};e.prototype.toMatrix3D=function(e){if(e===void 0){e=null}var t=s.RAW_DATA_CONTAINER;var r=2*this.x*this.y,i=2*this.x*this.z,o=2*this.x*this.w;var n=2*this.y*this.z,l=2*this.y*this.w,h=2*this.z*this.w;var p=this.x*this.x,u=this.y*this.y,c=this.z*this.z,d=this.w*this.w;t[0]=p-u-c+d;t[4]=r-h;t[8]=i+l;t[12]=0;t[1]=r+h;t[5]=-p+u-c+d;t[9]=n-o;t[13]=0;t[2]=i-l;t[6]=n+o;t[10]=-p-u+c+d;t[14]=0;t[3]=0;t[7]=0;t[11]=0;t[15]=1;if(!e)return new a(t);e.copyRawDataFrom(t);return e};e.prototype.fromMatrix=function(e){var t=e.decompose(i.QUATERNION)[1];this.x=t.x;this.y=t.y;this.z=t.z;this.w=t.w};e.prototype.toRawData=function(e,t){if(t===void 0){t=false}var r=2*this.x*this.y,s=2*this.x*this.z,i=2*this.x*this.w;var a=2*this.y*this.z,o=2*this.y*this.w,n=2*this.z*this.w;var l=this.x*this.x,h=this.y*this.y,p=this.z*this.z,u=this.w*this.w;e[0]=l-h-p+u;e[1]=r-n;e[2]=s+o;e[4]=r+n;e[5]=-l+h-p+u;e[6]=a-i;e[8]=s-o;e[9]=a+i;e[10]=-l-h+p+u;e[3]=e[7]=e[11]=0;if(!t){e[12]=e[13]=e[14]=0;e[15]=1}};e.prototype.clone=function(){return new e(this.x,this.y,this.z,this.w)};e.prototype.rotatePoint=function(e,t){if(t===void 0){t=null}var r,s,i,a;var n=e.x,l=e.y,h=e.z;if(t===null){t=new o}a=-this.x*n-this.y*l-this.z*h;r=this.w*n+this.y*h-this.z*l;s=this.w*l-this.x*h+this.z*n;i=this.w*h+this.x*l-this.y*n;t.x=-a*this.x+r*this.w-s*this.z+i*this.y;t.y=-a*this.y+r*this.z+s*this.w-i*this.x;t.z=-a*this.z-r*this.y+s*this.x+i*this.w;return t};e.prototype.copyFrom=function(e){this.x=e.x;this.y=e.y;this.z=e.z;this.w=e.w};return e}();t.exports=n},{"awayjs-core/lib/geom/Matrix3D":712,"awayjs-core/lib/geom/Matrix3DUtils":713,"awayjs-core/lib/geom/Orientation3D":714,"awayjs-core/lib/geom/Vector3D":718}],717:[function(e,t,r){t.exports=e(18)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Rectangle.js":18,"awayjs-core/lib/geom/Point":715}],718:[function(e,t,r){t.exports=e(20)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Vector3D.js":20}],719:[function(e,t,r){t.exports=e(27)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/AssetType.js":27}],720:[function(e,t,r){t.exports=e(33)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/NamedAssetBase.js":33,"awayjs-core/lib/errors/AbstractMethodError":705,"awayjs-core/lib/events/AssetEvent":708,"awayjs-core/lib/events/EventDispatcher":710}],721:[function(e,t,r){t.exports=e(45)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/BitmapTexture.js":45,"awayjs-core/lib/errors/Error":707,"awayjs-core/lib/textures/Texture2DBase":723,"awayjs-core/lib/utils/TextureUtils":727}],722:[function(e,t,r){t.exports=e(49)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/MipmapGenerator.js":49,"awayjs-core/lib/base/BitmapData":704,"awayjs-core/lib/geom/Matrix":711,"awayjs-core/lib/geom/Rectangle":717}],723:[function(e,t,r){t.exports=e(51)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/Texture2DBase.js":51,"awayjs-core/lib/errors/AbstractMethodError":705,"awayjs-core/lib/textures/MipmapGenerator":722,"awayjs-core/lib/textures/TextureProxyBase":724}],724:[function(e,t,r){t.exports=e(52)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/TextureProxyBase.js":52,"awayjs-core/lib/library/AssetType":719,"awayjs-core/lib/library/NamedAssetBase":720}],725:[function(e,t,r){t.exports=e(56)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/ColorUtils.js":56}],726:[function(e,t,r){t.exports=e(57)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/RequestAnimationFrame.js":57,"awayjs-core/lib/utils/getTimer":728}],727:[function(e,t,r){t.exports=e(58)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/TextureUtils.js":58}],728:[function(e,t,r){t.exports=e(60)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/getTimer.js":60}],729:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/library/AssetType");var a=e("awayjs-core/lib/library/NamedAssetBase");var o=function(e){s(t,e);function t(){e.call(this)}Object.defineProperty(t.prototype,"stateClass",{get:function(){return this._pStateClass},enumerable:true,configurable:true});t.prototype.dispose=function(){};Object.defineProperty(t.prototype,"assetType",{get:function(){return i.ANIMATION_NODE},enumerable:true,configurable:true});return t}(a);t.exports=o},{"awayjs-core/lib/library/AssetType":746,"awayjs-core/lib/library/NamedAssetBase":747}],730:[function(e,t,r){t.exports=e(62)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/BlendMode.js":62}],731:[function(e,t,r){t.exports=e(66)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/LineSubGeometry.js":66,"awayjs-display/lib/base/LineSubMesh":732,"awayjs-display/lib/base/SubGeometryBase":733,"awayjs-display/lib/base/TriangleSubGeometry":735,"awayjs-display/lib/events/SubGeometryEvent":738}],732:[function(e,t,r){t.exports=e(67)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/LineSubMesh.js":67,"awayjs-core/lib/library/AssetType":746,"awayjs-display/lib/base/SubMeshBase":734}],733:[function(e,t,r){t.exports=e(69)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/SubGeometryBase.js":69,"awayjs-core/lib/errors/AbstractMethodError":740,"awayjs-core/lib/library/NamedAssetBase":747,"awayjs-display/lib/events/SubGeometryEvent":738}],734:[function(e,t,r){t.exports=e(70)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/SubMeshBase.js":70,"awayjs-core/lib/errors/AbstractMethodError":740,"awayjs-core/lib/library/NamedAssetBase":747}],735:[function(e,t,r){t.exports=e(72)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/TriangleSubGeometry.js":72,"awayjs-core/lib/geom/Vector3D":745,"awayjs-display/lib/base/SubGeometryBase":733,"awayjs-display/lib/base/TriangleSubMesh":736,"awayjs-display/lib/events/SubGeometryEvent":738}],736:[function(e,t,r){t.exports=e(73)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/TriangleSubMesh.js":73,"awayjs-core/lib/library/AssetType":746,"awayjs-display/lib/base/SubMeshBase":734}],737:[function(e,t,r){t.exports=e(325)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-display/lib/events/MaterialEvent.js":325,"awayjs-core/lib/events/Event":743}],738:[function(e,t,r){t.exports=e(94)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/SubGeometryEvent.js":94,"awayjs-core/lib/events/Event":743}],739:[function(e,t,r){t.exports=e(328)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-display/lib/materials/MaterialBase.js":328,"awayjs-core/lib/events/Event":743,"awayjs-core/lib/library/AssetType":746,"awayjs-core/lib/library/NamedAssetBase":747,"awayjs-display/lib/base/BlendMode":730,"awayjs-display/lib/events/MaterialEvent":737}],740:[function(e,t,r){t.exports=e(4)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/AbstractMethodError.js":4,"awayjs-core/lib/errors/Error":741}],741:[function(e,t,r){t.exports=e(6)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/Error.js":6}],742:[function(e,t,r){t.exports=e(7)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/AssetEvent.js":7,"awayjs-core/lib/events/Event":743}],743:[function(e,t,r){t.exports=e(8)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/Event.js":8}],744:[function(e,t,r){t.exports=e(9)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/EventDispatcher.js":9}],745:[function(e,t,r){t.exports=e(20)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Vector3D.js":20}],746:[function(e,t,r){t.exports=e(27)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/AssetType.js":27}],747:[function(e,t,r){t.exports=e(33)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/NamedAssetBase.js":33,"awayjs-core/lib/errors/AbstractMethodError":740,"awayjs-core/lib/events/AssetEvent":742,"awayjs-core/lib/events/EventDispatcher":744}],748:[function(e,t,r){t.exports=e(337)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-stagegl/lib/base/ContextGLBlendFactor.js":337}],749:[function(e,t,r){t.exports=e(338)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-stagegl/lib/base/ContextGLCompareMode.js":338}],750:[function(e,t,r){t.exports=e(344)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-stagegl/lib/base/ContextGLMipFilter.js":344}],751:[function(e,t,r){t.exports=e(340)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-stagegl/lib/base/ContextGLProgramType.js":340}],752:[function(e,t,r){t.exports=e(345)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-stagegl/lib/base/ContextGLTextureFilter.js":345}],753:[function(e,t,r){t.exports=e(341)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-stagegl/lib/base/ContextGLTextureFormat.js":341}],754:[function(e,t,r){t.exports=e(342)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-stagegl/lib/base/ContextGLTriangleFace.js":342}],755:[function(e,t,r){t.exports=e(346)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-stagegl/lib/base/ContextGLWrapMode.js":346}],756:[function(e,t,r){var s=e("awayjs-display/lib/base/SubGeometryBase");var i=e("awayjs-display/lib/events/SubGeometryEvent");var a=function(){function e(e,t){var r=this;this._dataDirty=true;this.invalid=new Array(8);this.buffers=new Array(8);this.contexts=new Array(8);this._subGeometry=e;this._dataType=t;this._onVerticesUpdatedDelegate=function(e){return r._onVerticesUpdated(e)};this._subGeometry.addEventListener(i.VERTICES_UPDATED,this._onVerticesUpdatedDelegate)}e.prototype.updateData=function(e,t){if(e===void 0){e=null}if(t===void 0){t=null}if(this._dataDirty){this._dataDirty=false;this.dataPerVertex=this._subGeometry.getStride(this._dataType);var r=this._subGeometry[this._dataType];if(t==null){this.setData(r)}else{var s=new Array(e.length*this.dataPerVertex);var i;var a;var o=0;var n=0;while(o<e.length){i=e[o];a=t[i]*this.dataPerVertex;i*=this.dataPerVertex;for(n=0;n<this.dataPerVertex;n++)s[a+n]=r[i+n];o++}this.setData(s)}}};e.prototype.dispose=function(){for(var e=0;e<8;++e){if(this.contexts[e]){this.buffers[e].dispose();this.buffers[e]=null;this.contexts[e]=null}}};e.prototype.disposeBuffers=function(){for(var e=0;e<8;++e){if(this.buffers[e]){this.buffers[e].dispose();this.buffers[e]=null}}};e.prototype.invalidateBuffers=function(){for(var e=0;e<8;++e)this.invalid[e]=true};e.prototype.setData=function(e){if(this.data&&this.data.length!=e.length)this.disposeBuffers();else this.invalidateBuffers();this.data=e};e.prototype._onVerticesUpdated=function(e){var t=this._subGeometry.concatenateArrays?s.VERTEX_DATA:e.dataType;if(t==this._dataType)this._dataDirty=true};return e}();t.exports=a},{"awayjs-display/lib/base/SubGeometryBase":758,"awayjs-display/lib/events/SubGeometryEvent":759}],757:[function(e,t,r){var s=e("awayjs-display/lib/base/SubGeometryBase");var i=e("awayjs-stagegl/lib/pool/VertexData");var a=function(){function e(){}e.getItem=function(t,r,a){if(t.concatenateArrays)a=s.VERTEX_DATA;var o=e._pool[t.id]||(e._pool[t.id]=new Object);var n=o[a]||(o[a]=new Array);var l=n[r.level]||(n[r.level]=new i(t,a));l.updateData(r.originalIndices,r.indexMappings);return l};e.disposeItem=function(t,r,s){var i=e._pool[t.id];var a=i[s];a[r].dispose();a[r]=null};e.prototype.disposeData=function(t){var r=e._pool[t.id];for(var s in r){var i=r[s];var a=i.length;for(var o=0;o<a;o++){i[o].dispose();i[o]=null}}e._pool[t.id]=null};e._pool=new Object;return e}();t.exports=a},{"awayjs-display/lib/base/SubGeometryBase":758,"awayjs-stagegl/lib/pool/VertexData":756}],758:[function(e,t,r){t.exports=e(69)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/SubGeometryBase.js":69,"awayjs-core/lib/errors/AbstractMethodError":760,"awayjs-core/lib/library/NamedAssetBase":765,"awayjs-display/lib/events/SubGeometryEvent":759}],759:[function(e,t,r){t.exports=e(94)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/SubGeometryEvent.js":94,"awayjs-core/lib/events/Event":763}],760:[function(e,t,r){t.exports=e(4)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/AbstractMethodError.js":4,"awayjs-core/lib/errors/Error":761}],761:[function(e,t,r){t.exports=e(6)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/Error.js":6}],762:[function(e,t,r){t.exports=e(7)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/AssetEvent.js":7,"awayjs-core/lib/events/Event":763}],763:[function(e,t,r){t.exports=e(8)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/Event.js":8}],764:[function(e,t,r){t.exports=e(9)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/EventDispatcher.js":9}],765:[function(e,t,r){t.exports=e(33)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/NamedAssetBase.js":33,"awayjs-core/lib/errors/AbstractMethodError":760,"awayjs-core/lib/events/AssetEvent":762,"awayjs-core/lib/events/EventDispatcher":764}],766:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/geom/Matrix3D");var a=e("awayjs-core/lib/geom/Vector3D");var o=e("awayjs-core/lib/textures/RenderTexture");var n=e("awayjs-display/lib/pool/RenderablePool");var l=e("awayjs-stagegl/lib/base/ContextGLBlendFactor");var h=e("awayjs-stagegl/lib/base/ContextGLCompareMode");var p=e("awayjs-stagegl/lib/base/ContextGLClearMask");var u=e("awayjs-stagegl/lib/managers/StageManager");var c=e("awayjs-renderergl/lib/DepthRenderer");var d=e("awayjs-renderergl/lib/Filter3DRenderer");var f=e("awayjs-renderergl/lib/base/RendererBase");var y=e("awayjs-renderergl/lib/pool/SkyboxRenderable");var m=e("awayjs-renderergl/lib/managers/RTTBufferManager");var _=e("awayjs-renderergl/lib/passes/DepthMapPass");var b=e("awayjs-renderergl/lib/passes/DistanceMapPass");var g=function(e){s(t,e);function t(t,r,s){if(t===void 0){t=false}if(r===void 0){r="baseline"}if(s===void 0){s="auto"}e.call(this);this._skyboxProjection=new i;this._skyboxRenderablePool=n.getPool(y);this._pDepthRenderer=new c(new _);this._pDistanceRenderer=new c(new b);if(this._pStage==null)this.stage=u.getInstance().getFreeStage(t,r,s);this._pRttBufferManager=m.getInstance(this._pStage);if(this._width==0)this.width=window.innerWidth;else this._pRttBufferManager.viewWidth=this._width;if(this._height==0)this.height=window.innerHeight;else this._pRttBufferManager.viewHeight=this._height}Object.defineProperty(t.prototype,"antiAlias",{get:function(){return this._antiAlias},set:function(e){if(this._antiAlias==e)return;this._antiAlias=e;this._pBackBufferInvalid=true},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"depthPrepass",{get:function(){return this._depthPrepass},set:function(e){this._depthPrepass=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"filters3d",{get:function(){return this._pFilter3DRenderer?this._pFilter3DRenderer.filters:null},set:function(e){if(e&&e.length==0)e=null;if(this._pFilter3DRenderer&&!e){this._pFilter3DRenderer.dispose();this._pFilter3DRenderer=null}else if(!this._pFilter3DRenderer&&e){this._pFilter3DRenderer=new d(this._pStage);this._pFilter3DRenderer.filters=e}if(this._pFilter3DRenderer){this._pFilter3DRenderer.filters=e;this._pRequireDepthRender=this._pFilter3DRenderer.requireDepthRender}else{this._pRequireDepthRender=false;if(this._pDepthRender){this._pDepthRender.dispose();this._pDepthRender=null}}},enumerable:true,configurable:true});t.prototype.render=function(t){e.prototype.render.call(this,t);if(!this._pStage.recoverFromDisposal()){this._pBackBufferInvalid=true;return}if(this._pBackBufferInvalid)this.pUpdateBackBuffer();if(this._shareContext&&this._pContext)this._pContext.clear(0,0,0,1,1,0,p.DEPTH);if(this._pFilter3DRenderer){this.textureRatioX=this._pRttBufferManager.textureRatioX;this.textureRatioY=this._pRttBufferManager.textureRatioY}else{this.textureRatioX=1;this.textureRatioY=1}if(this._pRequireDepthRender)this.pRenderSceneDepthToTexture(t);if(this._depthPrepass)this.pRenderDepthPrepass(t);if(this._pFilter3DRenderer&&this._pContext){}else{if(this._shareContext)this._iRender(t,null,this._pScissorRect);else this._iRender(t)}e.prototype.render.call(this,t);if(!this._shareContext&&this._pContext)this._pContext.present();this._pStage.bufferClear=false};t.prototype.pExecuteRender=function(t,r,s,i){if(r===void 0){r=null}if(s===void 0){s=null}if(i===void 0){i=0}this.updateLights(t);if(r){this.pCollectRenderables(t);this.drawRenderables(this._pOpaqueRenderableHead,t);this.drawRenderables(this._pBlendedRenderableHead,t)}e.prototype.pExecuteRender.call(this,t,r,s,i)};t.prototype.updateLights=function(e){var t=e.directionalLights;var r=e.pointLights;var s,i;var a;var o;s=t.length;for(i=0;i<s;++i){a=t[i];o=a.shadowMapper;if(a.castsShadows&&(o.autoUpdateShadows||o._iShadowsInvalid))o.iRenderDepthMap(e,this._pDepthRenderer)}s=r.length;for(i=0;i<s;++i){a=r[i];o=a.shadowMapper;if(a.castsShadows&&(o.autoUpdateShadows||o._iShadowsInvalid))o.iRenderDepthMap(e,this._pDistanceRenderer)}};t.prototype.pDraw=function(e,t){if(!t)this.pCollectRenderables(e);this._pContext.setBlendFactors(l.ONE,l.ZERO);if(e.skyBox){this._pContext.setDepthTest(false,h.ALWAYS);this.drawSkybox(e)}this._pContext.setDepthTest(true,h.LESS_EQUAL);this.drawRenderables(this._pOpaqueRenderableHead,e);this.drawRenderables(this._pBlendedRenderableHead,e)};t.prototype.drawSkybox=function(e){var t=this._skyboxRenderablePool.getItem(e.skyBox);var r=e.skyBox.material;var s=e.camera;this.updateSkyboxProjection(s);var i=this.getMaterial(r,this._pStage.profile).getMaterialPass(r._iScreenPasses[0],this._pStage.profile);r._iActivatePass(i,this,s);r._iRenderPass(i,t,this._pStage,s,this._skyboxProjection);r._iDeactivatePass(i,this)};t.prototype.updateSkyboxProjection=function(e){var t=new a;this._skyboxProjection.copyFrom(this._pRttViewProjectionMatrix);this._skyboxProjection.copyRowTo(2,t);var r=e.scenePosition;var s=t.x;var i=t.y;var o=t.z;var n=-(t.x*r.x+t.y*r.y+t.z*r.z+Math.sqrt(s*s+i*i+o*o));var l=s>=0?1:-1;var h=i>=0?1:-1;var p=new a(l,h,1,1);var u=this._skyboxProjection.clone();u.invert();var c=u.transformVector(p);this._skyboxProjection.copyRowTo(3,p);var d=(c.x*p.x+c.y*p.y+c.z*p.z+c.w*p.w)/(s*c.x+i*c.y+o*c.z+n*c.w);this._skyboxProjection.copyRowFrom(2,new a(s*d,i*d,o*d,n*d))};t.prototype.drawRenderables=function(e,t){var r;var s;var i;var a;var o;var n=this._pStage.context;var l=t.camera;var h;while(e){o=this.getMaterial(e.material,this._pStage.profile);i=e.material._iScreenPasses;s=e.material._iNumScreenPasses();for(r=0;r<s;r++){h=e;a=o.getMaterialPass(i[r],this._pStage.profile);e.material._iActivatePass(a,this,l);do{e.material._iRenderPass(a,h,this._pStage,l,this._pRttViewProjectionMatrix);h=h.next}while(h&&h.material==e.material);o.material._iDeactivatePass(a,this)}e=h}};t.prototype.dispose=function(){if(!this._shareContext)this._pStage.dispose();this._pDepthRenderer.dispose();this._pDistanceRenderer.dispose();this._pDepthRenderer=null;this._pDistanceRenderer=null;this._pDepthRender=null;e.prototype.dispose.call(this)};t.prototype.pRenderDepthPrepass=function(e){this._pDepthRenderer.disableColor=true;if(this._pFilter3DRenderer){}else{this._pDepthRenderer.textureRatioX=1;this._pDepthRenderer.textureRatioY=1;this._pDepthRenderer._iRender(e)}this._pDepthRenderer.disableColor=false};t.prototype.pRenderSceneDepthToTexture=function(e){if(this._pDepthTextureInvalid||!this._pDepthRender)this.initDepthTexture(this._pStage.context);this._pDepthRenderer.textureRatioX=this._pRttBufferManager.textureRatioX;this._pDepthRenderer.textureRatioY=this._pRttBufferManager.textureRatioY;this._pDepthRenderer._iRender(e,this._pDepthRender)};t.prototype.pUpdateBackBuffer=function(){if(this._pStage.context&&!this._shareContext){if(this._width&&this._height){this._pStage.configureBackBuffer(this._width,this._height,this._antiAlias,true);this._pBackBufferInvalid=false}}};t.prototype.iSetStage=function(t){e.prototype.iSetStage.call(this,t);this._pDistanceRenderer.iSetStage(t);this._pDepthRenderer.iSetStage(t)};t.prototype.initDepthTexture=function(e){this._pDepthTextureInvalid=false;if(this._pDepthRender)this._pDepthRender.dispose();this._pDepthRender=new o(this._pRttBufferManager.textureWidth,this._pRttBufferManager.textureHeight)};return t}(f);t.exports=g},{"awayjs-core/lib/geom/Matrix3D":808,"awayjs-core/lib/geom/Vector3D":813,"awayjs-core/lib/textures/RenderTexture":818,"awayjs-display/lib/pool/RenderablePool":850,"awayjs-renderergl/lib/DepthRenderer":767,"awayjs-renderergl/lib/Filter3DRenderer":768,"awayjs-renderergl/lib/base/RendererBase":769,"awayjs-renderergl/lib/managers/RTTBufferManager":777,"awayjs-renderergl/lib/passes/DepthMapPass":783,"awayjs-renderergl/lib/passes/DistanceMapPass":784,"awayjs-renderergl/lib/pool/SkyboxRenderable":796,"awayjs-stagegl/lib/base/ContextGLBlendFactor":892,"awayjs-stagegl/lib/base/ContextGLClearMask":893,"awayjs-stagegl/lib/base/ContextGLCompareMode":894,"awayjs-stagegl/lib/managers/StageManager":919}],767:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-stagegl/lib/base/ContextGLBlendFactor");var a=e("awayjs-stagegl/lib/base/ContextGLCompareMode");var o=e("awayjs-renderergl/lib/base/RendererBase");var n=function(e){s(t,e);function t(t,r){if(r===void 0){r=false}e.call(this);this._pass=t;this._renderBlended=r;this._iBackgroundR=1;this._iBackgroundG=1;this._iBackgroundB=1}Object.defineProperty(t.prototype,"disableColor",{get:function(){return this._disableColor},set:function(e){this._disableColor=e},enumerable:true,configurable:true});t.prototype._iRenderCascades=function(e,t,r,s,o){this.pCollectRenderables(e);this._pStage.setRenderTarget(t,true,0);this._pContext.clear(1,1,1,1,1,0);this._pContext.setBlendFactors(i.ONE,i.ZERO);this._pContext.setDepthTest(true,a.LESS);var n=this._pOpaqueRenderableHead;var l=true;for(var h=r-1;h>=0;--h){this._pStage.scissorRect=s[h];this.drawCascadeRenderables(n,o[h],l?null:o[h].frustumPlanes);l=false}this._pContext.setDepthTest(false,a.LESS_EQUAL);this._pStage.scissorRect=null};t.prototype.drawCascadeRenderables=function(e,t,r){var s;var i;var a=this._pStage.context;var o;while(e){i=this.getMaterial(e.material,this._pStage.profile);o=e;s=i.getMaterialPass(this._pass,this._pStage.profile);if(s.key=="")this.calcAnimationCode(e.material,s);e.material._iActivatePass(s,this,t);do{if(!r||o.sourceEntity.worldBounds.isInFrustum(r,4)){o.material._iRenderPass(s,o,this._pStage,t,this._pRttViewProjectionMatrix)
}else{o.cascaded=true}o=o.next}while(o&&o.material==e.material&&!o.cascaded);e.material._iDeactivatePass(s,this);e=o}};t.prototype.pDraw=function(e,t){this.pCollectRenderables(e);this._pContext.setBlendFactors(i.ONE,i.ZERO);this._pContext.setDepthTest(true,a.LESS);this.drawRenderables(this._pOpaqueRenderableHead,e);if(this._disableColor)this._pContext.setColorMask(false,false,false,false);if(this._renderBlended)this.drawRenderables(this._pBlendedRenderableHead,e);if(this._disableColor)this._pContext.setColorMask(true,true,true,true)};t.prototype.drawRenderables=function(e,t){var r;var s;var i=this._pStage.context;var a=t.camera;var o;while(e){s=this.getMaterial(e.material,this._pStage.profile);if(this._disableColor&&e.material.alphaThreshold!=0){o=e;do{o=o.next}while(o&&o.material==e.material)}else{o=e;r=s.getMaterialPass(this._pass,this._pStage.profile);if(r.key=="")this.calcAnimationCode(e.material,r);e.material._iActivatePass(r,this,a);do{o.material._iRenderPass(r,o,this._pStage,a,this._pRttViewProjectionMatrix);o=o.next}while(o&&o.material==e.material);e.material._iDeactivatePass(r,this)}e=o}};return t}(o);t.exports=n},{"awayjs-renderergl/lib/base/RendererBase":769,"awayjs-stagegl/lib/base/ContextGLBlendFactor":892,"awayjs-stagegl/lib/base/ContextGLCompareMode":894}],768:[function(e,t,r){var s=e("awayjs-core/lib/events/Event");var i=e("awayjs-stagegl/lib/base/ContextGLBlendFactor");var a=e("awayjs-stagegl/lib/base/ContextGLVertexBufferFormat");var o=e("awayjs-renderergl/lib/managers/RTTBufferManager");var n=function(){function e(e){var t=this;this._filterSizesInvalid=true;this._onRTTResizeDelegate=function(e){return t.onRTTResize(e)};this._stage=e;this._rttManager=o.getInstance(e);this._rttManager.addEventListener(s.RESIZE,this._onRTTResizeDelegate)}e.prototype.onRTTResize=function(e){this._filterSizesInvalid=true};Object.defineProperty(e.prototype,"requireDepthRender",{get:function(){return this._requireDepthRender},enumerable:true,configurable:true});e.prototype.getMainInputTexture=function(e){if(this._filterTasksInvalid){this.updateFilterTasks(e)}return this._mainInputTexture};Object.defineProperty(e.prototype,"filters",{get:function(){return this._filters},set:function(e){this._filters=e;this._filterTasksInvalid=true;this._requireDepthRender=false;if(!this._filters){return}for(var t=0;t<this._filters.length;++t){var r=this._filters[t];var s=r.requireDepthRender==null?false:r.requireDepthRender;this._requireDepthRender=this._requireDepthRender||s}this._filterSizesInvalid=true},enumerable:true,configurable:true});e.prototype.updateFilterTasks=function(e){var t;if(this._filterSizesInvalid){this.updateFilterSizes()}if(!this._filters){this._tasks=null;return}this._tasks=new Array;t=this._filters.length-1;var r;for(var s=0;s<=t;++s){r=this._filters[s];r.setRenderTargets(s==t?null:this._filters[s+1].getMainInputTexture(e),e);this._tasks=this._tasks.concat(r.tasks)}this._mainInputTexture=this._filters[0].getMainInputTexture(e)};e.prototype.render=function(e,t,r){var s;var o;var n;var l=e.context;var h=this._rttManager.indexBuffer;var p=this._rttManager.renderToTextureVertexBuffer;if(!this._filters){return}if(this._filterSizesInvalid){this.updateFilterSizes()}if(this._filterTasksInvalid){this.updateFilterTasks(e)}s=this._filters.length;for(o=0;o<s;++o){this._filters[o].update(e,t)}s=this._tasks.length;if(s>1){l.setVertexBufferAt(0,p,0,a.FLOAT_2);l.setVertexBufferAt(1,p,2,a.FLOAT_2)}for(o=0;o<s;++o){n=this._tasks[o];if(!n.target){e.scissorRect=null;p=this._rttManager.renderToScreenVertexBuffer;l.setVertexBufferAt(0,p,0,a.FLOAT_2);l.setVertexBufferAt(1,p,2,a.FLOAT_2)}l.setTextureAt(0,n.getMainInputTexture(e));l.setProgram(n.getProgram(e));l.clear(0,0,0,0);n.activate(e,t,r);l.setBlendFactors(i.ONE,i.ZERO);l.drawTriangles(h,0,2);n.deactivate(e)}l.setTextureAt(0,null);l.setVertexBufferAt(0,null);l.setVertexBufferAt(1,null)};e.prototype.updateFilterSizes=function(){for(var e=0;e<this._filters.length;++e){this._filters[e].textureWidth=this._rttManager.textureWidth;this._filters[e].textureHeight=this._rttManager.textureHeight}this._filterSizesInvalid=true};e.prototype.dispose=function(){this._rttManager.removeEventListener(s.RESIZE,this._onRTTResizeDelegate);this._rttManager=null;this._stage=null};return e}();t.exports=n},{"awayjs-core/lib/events/Event":805,"awayjs-renderergl/lib/managers/RTTBufferManager":777,"awayjs-stagegl/lib/base/ContextGLBlendFactor":892,"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat":900}],769:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/geom/Matrix3D");var a=e("awayjs-core/lib/geom/Point");var o=e("awayjs-core/lib/geom/Rectangle");var n=e("awayjs-core/lib/errors/AbstractMethodError");var l=e("awayjs-core/lib/events/EventDispatcher");var h=e("awayjs-display/lib/pool/RenderablePool");var p=e("awayjs-display/lib/sort/RenderableMergeSort");var u=e("awayjs-display/lib/events/RendererEvent");var c=e("awayjs-display/lib/events/StageEvent");var d=e("awayjs-display/lib/traverse/EntityCollector");var f=e("awayjs-stagegl/lib/aglsl/assembler/AGALMiniAssembler");var y=e("awayjs-stagegl/lib/base/ContextGLCompareMode");var m=e("awayjs-renderergl/lib/pool/BillboardRenderable");var _=e("awayjs-renderergl/lib/pool/LineSubMeshRenderable");var b=e("awayjs-renderergl/lib/pool/MaterialDataPool");var g=e("awayjs-renderergl/lib/pool/TriangleSubMeshRenderable");var w=e("awayjs-renderergl/lib/managers/DefaultMaterialManager");var v=function(e){s(t,e);function t(){var t=this;e.call(this);this._numUsedStreams=0;this._numUsedTextures=0;this._viewPort=new o;this._pBackBufferInvalid=true;this._pDepthTextureInvalid=true;this._depthPrepass=false;this._backgroundR=0;this._backgroundG=0;this._backgroundB=0;this._backgroundAlpha=1;this._shareContext=false;this.textureRatioX=1;this.textureRatioY=1;this._pRttViewProjectionMatrix=new i;this._localPos=new a;this._globalPos=new a;this._pScissorRect=new o;this._pNumTriangles=0;this._onViewportUpdatedDelegate=function(e){return t.onViewportUpdated(e)};this._materialDataPool=new b;this._billboardRenderablePool=h.getPool(m);this._triangleSubMeshRenderablePool=h.getPool(g);this._lineSubMeshRenderablePool=h.getPool(_);this._onContextUpdateDelegate=function(e){return t.onContextUpdate(e)};this.renderableSorter=new p}Object.defineProperty(t.prototype,"numTriangles",{get:function(){return this._pNumTriangles},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"viewPort",{get:function(){return this._viewPort},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"scissorRect",{get:function(){return this._pScissorRect},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"x",{get:function(){return this._localPos.x},set:function(e){if(this.x==e)return;this._globalPos.x=this._localPos.x=e;this.updateGlobalPos()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"y",{get:function(){return this._localPos.y},set:function(e){if(this.y==e)return;this._globalPos.y=this._localPos.y=e;this.updateGlobalPos()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){if(this._width==e)return;this._width=e;this._pScissorRect.width=e;if(this._pRttBufferManager)this._pRttBufferManager.viewWidth=e;this._pBackBufferInvalid=true;this._pDepthTextureInvalid=true;this.notifyScissorUpdate()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){if(this._height==e)return;this._height=e;this._pScissorRect.height=e;if(this._pRttBufferManager)this._pRttBufferManager.viewHeight=e;this._pBackBufferInvalid=true;this._pDepthTextureInvalid=true;this.notifyScissorUpdate()},enumerable:true,configurable:true});t.prototype.getProgram=function(e){if(!e.key.length){e.key=e.animationVertexCode+e.vertexCode+"---"+e.fragmentCode+e.animationFragmentCode+e.postAnimationFragmentCode}else{return e.programData}var t=this._pStage.getProgramData(e.key);if(e.programData!=t){if(e.programData)e.programData.dispose();e.programData=t;t.usages++}return t};t.prototype.getMaterial=function(e,t){var r=this._materialDataPool.getItem(e);if(r.invalidAnimation){r.invalidAnimation=false;var s=r.getMaterialPasses(t);var i=this.getEnabledGPUAnimation(e,s);var a=0;var o=1;var n;var l=s.length;for(var h=0;h<l;h++){n=s[h];if(n.usesAnimation!=i){n.usesAnimation=i;n.key==""}if(n.key=="")this.calcAnimationCode(e,n);a+=this.getProgram(n).id*o;o*=1e3}r.renderOrderId=a}return r};t.prototype.activateMaterialPass=function(e,t){var r=e.shaderObject;for(var s=r.numUsedStreams;s<this._numUsedStreams;s++)this._pContext.setVertexBufferAt(s,null);for(var s=r.numUsedTextures;s<this._numUsedTextures;s++)this._pContext.setTextureAt(s,null);if(e.usesAnimation)e.material.animationSet.activate(r,this._pStage);r.iActivate(this._pStage,t);var i=this.getProgram(e);if(!i.program){i.program=this._pContext.createProgram();var a=(new f).assemble("part vertex 1\n"+e.animationVertexCode+e.vertexCode+"endpart")["vertex"].data;var o=(new f).assemble("part fragment 1\n"+e.fragmentCode+e.animationFragmentCode+e.postAnimationFragmentCode+"endpart")["fragment"].data;i.program.upload(a,o)}this._pContext.setProgram(i.program)};t.prototype.deactivateMaterialPass=function(e){var t=e.shaderObject;if(e.usesAnimation)e.material.animationSet.deactivate(t,this._pStage);e.shaderObject.iDeactivate(this._pStage);this._numUsedStreams=t.numUsedStreams;this._numUsedTextures=t.numUsedTextures};t.prototype._iCreateEntityCollector=function(){return new d};Object.defineProperty(t.prototype,"_iBackgroundR",{get:function(){return this._backgroundR},set:function(e){if(this._backgroundR==e)return;this._backgroundR=e;this._pBackBufferInvalid=true},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"_iBackgroundG",{get:function(){return this._backgroundG},set:function(e){if(this._backgroundG==e)return;this._backgroundG=e;this._pBackBufferInvalid=true},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"_iBackgroundB",{get:function(){return this._backgroundB},set:function(e){if(this._backgroundB==e)return;this._backgroundB=e;this._pBackBufferInvalid=true},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"context",{get:function(){return this._pContext},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"stage",{get:function(){return this._pStage},set:function(e){if(e==this._pStage)return;this.iSetStage(e)},enumerable:true,configurable:true});t.prototype.iSetStage=function(e){if(this._pStage){this._pStage.removeEventListener(c.CONTEXT_CREATED,this._onContextUpdateDelegate);this._pStage.removeEventListener(c.CONTEXT_RECREATED,this._onContextUpdateDelegate);this._pStage.removeEventListener(c.VIEWPORT_UPDATED,this._onViewportUpdatedDelegate)}if(!e){this._pStage=null;this._pContext=null}else{this._pStage=e;this._pStage.addEventListener(c.CONTEXT_CREATED,this._onContextUpdateDelegate);this._pStage.addEventListener(c.CONTEXT_RECREATED,this._onContextUpdateDelegate);this._pStage.addEventListener(c.VIEWPORT_UPDATED,this._onViewportUpdatedDelegate);if(this._pStage.context)this._pContext=this._pStage.context}this._pBackBufferInvalid=true;this.updateGlobalPos()};Object.defineProperty(t.prototype,"shareContext",{get:function(){return this._shareContext},set:function(e){if(this._shareContext==e)return;this._shareContext=e;this.updateGlobalPos()},enumerable:true,configurable:true});t.prototype.dispose=function(){if(this._pRttBufferManager)this._pRttBufferManager.dispose();this._pRttBufferManager=null;this._pStage.removeEventListener(c.CONTEXT_CREATED,this._onContextUpdateDelegate);this._pStage.removeEventListener(c.CONTEXT_RECREATED,this._onContextUpdateDelegate);this._pStage.removeEventListener(c.VIEWPORT_UPDATED,this._onViewportUpdatedDelegate);this._pStage=null};t.prototype.render=function(e){this._viewportDirty=false;this._scissorDirty=false};t.prototype._iRender=function(e,t,r,s){if(t===void 0){t=null}if(r===void 0){r=null}if(s===void 0){s=0}if(!this._pStage||!this._pContext)return;this._pRttViewProjectionMatrix.copyFrom(e.camera.viewProjection);this._pRttViewProjectionMatrix.appendScale(this.textureRatioX,this.textureRatioY,1);this.pExecuteRender(e,t,r,s);for(var i=0;i<8;++i){this._pContext.setVertexBufferAt(i,null);this._pContext.setTextureAt(i,null)}};t.prototype._iRenderCascades=function(e,t,r,s,i){};t.prototype.pCollectRenderables=function(e){this._pBlendedRenderableHead=null;this._pOpaqueRenderableHead=null;this._pNumTriangles=0;var t=e.entityHead;this._pCamera=e.camera;this._iEntryPoint=this._pCamera.scenePosition;this._pCameraForward=this._pCamera.transform.forwardVector;while(t){t.entity._iCollectRenderables(this);t=t.next}this._pOpaqueRenderableHead=this.renderableSorter.sortOpaqueRenderables(this._pOpaqueRenderableHead);this._pBlendedRenderableHead=this.renderableSorter.sortBlendedRenderables(this._pBlendedRenderableHead)};t.prototype.pExecuteRender=function(e,t,r,s){if(t===void 0){t=null}if(r===void 0){r=null}if(s===void 0){s=0}this._pStage.setRenderTarget(t,true,s);if((t||!this._shareContext)&&!this._depthPrepass)this._pContext.clear(this._backgroundR,this._backgroundG,this._backgroundB,this._backgroundAlpha,1,0);this._pContext.setDepthTest(false,y.ALWAYS);this._pStage.scissorRect=r;this.pDraw(e,t);if(!this._shareContext){if(this._snapshotRequired&&this._snapshotBitmapData){this._pContext.drawToBitmapData(this._snapshotBitmapData);this._snapshotRequired=false}}this._pStage.scissorRect=null};t.prototype.queueSnapshot=function(e){this._snapshotRequired=true;this._snapshotBitmapData=e};t.prototype.pDraw=function(e,t){throw new n};t.prototype.onContextUpdate=function(e){this._pContext=this._pStage.context};Object.defineProperty(t.prototype,"_iBackgroundAlpha",{get:function(){return this._backgroundAlpha},set:function(e){if(this._backgroundAlpha==e)return;this._backgroundAlpha=e;this._pBackBufferInvalid=true},enumerable:true,configurable:true});t.prototype.notifyScissorUpdate=function(){if(this._scissorDirty)return;this._scissorDirty=true;if(!this._scissorUpdated)this._scissorUpdated=new u(u.SCISSOR_UPDATED);this.dispatchEvent(this._scissorUpdated)};t.prototype.notifyViewportUpdate=function(){if(this._viewportDirty)return;this._viewportDirty=true;if(!this._viewPortUpdated)this._viewPortUpdated=new u(u.VIEWPORT_UPDATED);this.dispatchEvent(this._viewPortUpdated)};t.prototype.onViewportUpdated=function(e){this._viewPort=this._pStage.viewPort;if(this._shareContext){this._pScissorRect.x=this._globalPos.x-this._pStage.x;this._pScissorRect.y=this._globalPos.y-this._pStage.y;this.notifyScissorUpdate()}this.notifyViewportUpdate()};t.prototype.updateGlobalPos=function(){if(this._shareContext){this._pScissorRect.x=this._globalPos.x-this._viewPort.x;this._pScissorRect.y=this._globalPos.y-this._viewPort.y}else{this._pScissorRect.x=0;this._pScissorRect.y=0;this._viewPort.x=this._globalPos.x;this._viewPort.y=this._globalPos.y}this.notifyScissorUpdate()};t.prototype.applyBillboard=function(e){this._applyRenderable(this._billboardRenderablePool.getItem(e))};t.prototype.applyTriangleSubMesh=function(e){this._applyRenderable(this._triangleSubMeshRenderablePool.getItem(e))};t.prototype.applyLineSubMesh=function(e){this._applyRenderable(this._lineSubMeshRenderablePool.getItem(e))};t.prototype._applyRenderable=function(e){var t=e.materialOwner.material;var r=e.sourceEntity;var s=r.scenePosition;if(!t)t=w.getDefaultMaterial(e.materialOwner);t._iUpdateMaterial();e.material=t;e.materialId=t._iMaterialId;e.renderOrderId=this.getMaterial(t,this._pStage.profile).renderOrderId;e.cascaded=false;s=this._iEntryPoint.subtract(s);e.zIndex=r.zOffset+s.dotProduct(this._pCameraForward);e.renderSceneTransform=e.sourceEntity.getRenderSceneTransform(this._pCamera);if(t.requiresBlending){e.next=this._pBlendedRenderableHead;this._pBlendedRenderableHead=e}else{e.next=this._pOpaqueRenderableHead;this._pOpaqueRenderableHead=e}this._pNumTriangles+=e.numTriangles;if(e.overflow)this._applyRenderable(e.overflow)};t.prototype.getEnabledGPUAnimation=function(e,t){if(e.animationSet){e.animationSet.resetGPUCompatibility();var r=e.iOwners;var s=r.length;var i=t.length;for(var a=0;a<i;a++)for(var o=0;o<s;o++)if(r[o].animator)r[o].animator.testGPUCompatibility(t[a].shaderObject);return!e.animationSet.usesCPU}return false};t.prototype.calcAnimationCode=function(e,t){t.key="";t.animationVertexCode="";t.animationFragmentCode="";var r=t.shaderObject;if(t.usesAnimation){var s=e.animationSet;t.animationVertexCode+=s.getAGALVertexCode(r);if(r.uvDependencies>0&&!r.usesUVTransform)t.animationVertexCode+=s.getAGALUVCode(r);if(r.usesFragmentAnimation)t.animationFragmentCode+=s.getAGALFragmentCode(r,t.shadedTarget);s.doneAGALCode(r)}else{var i=r.animatableAttributes.length;for(var a=0;a<i;++a)t.animationVertexCode+="mov "+r.animationTargetRegisters[a]+", "+r.animatableAttributes[a]+"\n";if(r.uvDependencies>0&&!r.usesUVTransform)t.animationVertexCode+="mov "+r.uvTarget+","+r.uvSource+"\n"}};return t}(l);t.exports=v},{"awayjs-core/lib/errors/AbstractMethodError":801,"awayjs-core/lib/events/EventDispatcher":806,"awayjs-core/lib/geom/Matrix3D":808,"awayjs-core/lib/geom/Point":811,"awayjs-core/lib/geom/Rectangle":812,"awayjs-display/lib/events/RendererEvent":840,"awayjs-display/lib/events/StageEvent":842,"awayjs-display/lib/pool/RenderablePool":850,"awayjs-display/lib/sort/RenderableMergeSort":851,"awayjs-display/lib/traverse/EntityCollector":853,"awayjs-renderergl/lib/managers/DefaultMaterialManager":776,"awayjs-renderergl/lib/pool/BillboardRenderable":789,"awayjs-renderergl/lib/pool/LineSubMeshRenderable":790,"awayjs-renderergl/lib/pool/MaterialDataPool":792,"awayjs-renderergl/lib/pool/TriangleSubMeshRenderable":797,"awayjs-stagegl/lib/aglsl/assembler/AGALMiniAssembler":883,"awayjs-stagegl/lib/base/ContextGLCompareMode":894}],770:[function(e,t,r){t.exports=e(295)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/RegisterPool.js":295,"awayjs-renderergl/lib/compilation/ShaderRegisterElement":775}],771:[function(e,t,r){t.exports=e(296)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/ShaderCompilerBase.js":296,"awayjs-renderergl/lib/compilation/ShaderRegisterCache":773,"awayjs-renderergl/lib/compilation/ShaderRegisterData":774}],772:[function(e,t,r){t.exports=e(299)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/ShaderObjectBase.js":299,"awayjs-display/lib/base/TriangleSubGeometry":833,"awayjs-renderergl/lib/compilation/ShaderCompilerBase":771,"awayjs-stagegl/lib/base/ContextGLTriangleFace":899}],773:[function(e,t,r){t.exports=e(300)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/ShaderRegisterCache.js":300,"awayjs-renderergl/lib/compilation/RegisterPool":770,"awayjs-renderergl/lib/compilation/ShaderRegisterElement":775}],774:[function(e,t,r){t.exports=e(301)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/ShaderRegisterData.js":301}],775:[function(e,t,r){t.exports=e(302)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/compilation/ShaderRegisterElement.js":302}],776:[function(e,t,r){t.exports=e(693)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-parsers/node_modules/awayjs-renderergl/lib/managers/DefaultMaterialManager.js":693,"awayjs-core/lib/base/BitmapData":800,"awayjs-core/lib/library/AssetType":814,"awayjs-core/lib/textures/BitmapTexture":816,"awayjs-renderergl/lib/materials/LineBasicMaterial":778,"awayjs-renderergl/lib/materials/TriangleBasicMaterial":781}],777:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/geom/Rectangle");var a=e("awayjs-core/lib/events/Event");var o=e("awayjs-core/lib/events/EventDispatcher");var n=e("awayjs-core/lib/utils/TextureUtils");var l=function(e){s(t,e);function t(t){e.call(this);this._viewWidth=-1;this._viewHeight=-1;this._textureWidth=-1;this._textureHeight=-1;this._buffersInvalid=true;this._renderToTextureRect=new i;this._stage=t}t.getInstance=function(e){if(!e)throw new Error("stage key cannot be null!");if(t._instances==null)t._instances=new Array;var r=t.getRTTBufferManagerFromStage(e);if(r==null){r=new t(e);var s=new h;s.stage3d=e;s.rttbfm=r;t._instances.push(s)}return r};t.getRTTBufferManagerFromStage=function(e){var r=t._instances.length;var s;for(var i=0;i<r;i++){s=t._instances[i];if(s.stage3d===e)return s.rttbfm}return null};t.deleteRTTBufferManager=function(e){var r=t._instances.length;var s;for(var i=0;i<r;i++){s=t._instances[i];if(s.stage3d===e){t._instances.splice(i,1);return}}};Object.defineProperty(t.prototype,"textureRatioX",{get:function(){if(this._buffersInvalid)this.updateRTTBuffers();return this._textureRatioX},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"textureRatioY",{get:function(){if(this._buffersInvalid)this.updateRTTBuffers();return this._textureRatioY},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"viewWidth",{get:function(){return this._viewWidth},set:function(e){if(e==this._viewWidth)return;this._viewWidth=e;this._buffersInvalid=true;this._textureWidth=n.getBestPowerOf2(this._viewWidth);if(this._textureWidth>this._viewWidth){this._renderToTextureRect.x=Math.floor((this._textureWidth-this._viewWidth)*.5);this._renderToTextureRect.width=this._viewWidth}else{this._renderToTextureRect.x=0;this._renderToTextureRect.width=this._textureWidth}this.dispatchEvent(new a(a.RESIZE))},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"viewHeight",{get:function(){return this._viewHeight},set:function(e){if(e==this._viewHeight)return;this._viewHeight=e;this._buffersInvalid=true;this._textureHeight=n.getBestPowerOf2(this._viewHeight);if(this._textureHeight>this._viewHeight){this._renderToTextureRect.y=Math.floor((this._textureHeight-this._viewHeight)*.5);this._renderToTextureRect.height=this._viewHeight}else{this._renderToTextureRect.y=0;this._renderToTextureRect.height=this._textureHeight}this.dispatchEvent(new a(a.RESIZE))},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"renderToTextureVertexBuffer",{get:function(){if(this._buffersInvalid)this.updateRTTBuffers();return this._renderToTextureVertexBuffer},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"renderToScreenVertexBuffer",{get:function(){if(this._buffersInvalid)this.updateRTTBuffers();return this._renderToScreenVertexBuffer},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"indexBuffer",{get:function(){return this._indexBuffer},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"renderToTextureRect",{get:function(){if(this._buffersInvalid)this.updateRTTBuffers();return this._renderToTextureRect},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"textureWidth",{get:function(){return this._textureWidth},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"textureHeight",{get:function(){return this._textureHeight},enumerable:true,configurable:true});t.prototype.dispose=function(){t.deleteRTTBufferManager(this._stage);if(this._indexBuffer){this._indexBuffer.dispose();this._renderToScreenVertexBuffer.dispose();this._renderToTextureVertexBuffer.dispose();this._renderToScreenVertexBuffer=null;this._renderToTextureVertexBuffer=null;this._indexBuffer=null}};t.prototype.updateRTTBuffers=function(){var e=this._stage.context;var t;var r;var s;var i;if(this._renderToTextureVertexBuffer==null)this._renderToTextureVertexBuffer=e.createVertexBuffer(4,5);if(this._renderToScreenVertexBuffer==null)this._renderToScreenVertexBuffer=e.createVertexBuffer(4,5);if(!this._indexBuffer){this._indexBuffer=e.createIndexBuffer(6);this._indexBuffer.uploadFromArray([2,1,0,3,2,0],0,6)}this._textureRatioX=s=Math.min(this._viewWidth/this._textureWidth,1);this._textureRatioY=i=Math.min(this._viewHeight/this._textureHeight,1);var a=(1-s)*.5;var o=(s+1)*.5;var n=(i+1)*.5;var l=(1-i)*.5;t=[-s,-i,a,n,0,s,-i,o,n,1,s,i,o,l,2,-s,i,a,l,3];r=[-1,-1,a,n,0,1,-1,o,n,1,1,1,o,l,2,-1,1,a,l,3];this._renderToTextureVertexBuffer.uploadFromArray(t,0,4);this._renderToScreenVertexBuffer.uploadFromArray(r,0,4);this._buffersInvalid=false};return t}(o);var h=function(){function e(){}return e}();t.exports=l},{"awayjs-core/lib/events/Event":805,"awayjs-core/lib/events/EventDispatcher":806,"awayjs-core/lib/geom/Rectangle":812,"awayjs-core/lib/utils/TextureUtils":822}],778:[function(e,t,r){t.exports=e(694)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-parsers/node_modules/awayjs-renderergl/lib/materials/LineBasicMaterial.js":694,"awayjs-core/lib/geom/Matrix3D":808,"awayjs-display/lib/base/LineSubGeometry":827,"awayjs-renderergl/lib/materials/MaterialGLBase":779,"awayjs-renderergl/lib/passes/LineBasicPass":785,"awayjs-stagegl/lib/base/ContextGLProgramType":896}],779:[function(e,t,r){t.exports=e(304)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/materials/MaterialGLBase.js":304,"awayjs-display/lib/materials/MaterialBase":844}],780:[function(e,t,r){t.exports=e(696)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-parsers/node_modules/awayjs-renderergl/lib/materials/SkyboxMaterial.js":696,"awayjs-display/lib/base/TriangleSubGeometry":833,"awayjs-renderergl/lib/materials/MaterialGLBase":779,"awayjs-renderergl/lib/passes/SkyboxPass":787,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":799,"awayjs-stagegl/lib/base/ContextGLCompareMode":894,"awayjs-stagegl/lib/base/ContextGLMipFilter":895,"awayjs-stagegl/lib/base/ContextGLProgramType":896,"awayjs-stagegl/lib/base/ContextGLTextureFilter":897,"awayjs-stagegl/lib/base/ContextGLWrapMode":901}],781:[function(e,t,r){t.exports=e(697)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-parsers/node_modules/awayjs-renderergl/lib/materials/TriangleBasicMaterial.js":697,"awayjs-core/lib/textures/Texture2DBase":819,"awayjs-display/lib/base/BlendMode":824,"awayjs-renderergl/lib/materials/TriangleMaterialBase":782,"awayjs-renderergl/lib/passes/TriangleBasicPass":788,"awayjs-stagegl/lib/base/ContextGLCompareMode":894}],782:[function(e,t,r){t.exports=e(305)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/materials/TriangleMaterialBase.js":305,"awayjs-core/lib/geom/Matrix3DUtils":809,"awayjs-display/lib/base/TriangleSubGeometry":833,"awayjs-renderergl/lib/materials/MaterialGLBase":779,"awayjs-stagegl/lib/base/ContextGLProgramType":896}],783:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-stagegl/lib/base/ContextGLMipFilter");var a=e("awayjs-stagegl/lib/base/ContextGLTextureFilter");var o=e("awayjs-stagegl/lib/base/ContextGLWrapMode");var n=e("awayjs-renderergl/lib/passes/MaterialPassGLBase");var l=e("awayjs-renderergl/lib/utils/ShaderCompilerHelper");var h=function(e){s(t,e);function t(){e.call(this)}t.prototype._iInitConstantData=function(t){e.prototype._iInitConstantData.call(this,t);var r=this._fragmentConstantsIndex;var s=t.fragmentConstantData;s[r]=1;s[r+1]=255;s[r+2]=65025;s[r+3]=16581375;s[r+4]=1/255;s[r+5]=1/255;s[r+6]=1/255;s[r+7]=0};t.prototype._iIncludeDependencies=function(e){e.projectionDependencies++;if(e.alphaThreshold>0)e.uvDependencies++};t.prototype._iGetFragmentCode=function(e,t,r){var s="";var i=r.shadedTarget;var a=t.getFreeTextureReg();var o=t.getFreeFragmentConstant();var n=t.getFreeFragmentConstant();this._fragmentConstantsIndex=o.index*4;var h=t.getFreeFragmentVectorTemp();t.addFragmentTempUsages(h,1);var p=t.getFreeFragmentVectorTemp();t.addFragmentTempUsages(p,1);s+="div "+h+", "+r.projectionFragment+", "+r.projectionFragment+".w\n"+"mul "+h+", "+o+", "+h+".z\n"+"frc "+h+", "+h+"\n"+"mul "+p+", "+h+".yzww, "+n+"\n";if(e.alphaThreshold>0){a=t.getFreeTextureReg();this._texturesIndex=a.index;var u=t.getFreeFragmentVectorTemp();s+=l.getTex2DSampleCode(u,r,a,e.texture,e.useSmoothTextures,e.repeatTextures,e.useMipmapping);var c=t.getFreeFragmentConstant();s+="sub "+u+".w, "+u+".w, "+c+".x\n"+"kil "+u+".w\n"}s+="sub "+i+", "+h+", "+p+"\n";t.removeFragmentTempUsage(h);t.removeFragmentTempUsage(p);return s};t.prototype._iRender=function(e,t,r,s,i){};t.prototype._iActivate=function(t,r,s){e.prototype._iActivate.call(this,t,r,s);var n=r.context;var l=t.shaderObject;if(l.alphaThreshold>0){n.setSamplerStateAt(this._texturesIndex,l.repeatTextures?o.REPEAT:o.CLAMP,l.useSmoothTextures?a.LINEAR:a.NEAREST,l.useMipmapping?i.MIPLINEAR:i.MIPNONE);r.stage.activateTexture(this._texturesIndex,l.texture);l.fragmentConstantData[this._fragmentConstantsIndex+8]=t.shaderObject.alphaThreshold}};return t}(n);t.exports=h},{"awayjs-renderergl/lib/passes/MaterialPassGLBase":786,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":799,"awayjs-stagegl/lib/base/ContextGLMipFilter":895,"awayjs-stagegl/lib/base/ContextGLTextureFilter":897,"awayjs-stagegl/lib/base/ContextGLWrapMode":901}],784:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-stagegl/lib/base/ContextGLMipFilter");var a=e("awayjs-stagegl/lib/base/ContextGLTextureFilter");var o=e("awayjs-stagegl/lib/base/ContextGLWrapMode");var n=e("awayjs-renderergl/lib/passes/MaterialPassGLBase");var l=e("awayjs-renderergl/lib/utils/ShaderCompilerHelper");var h=function(e){s(t,e);function t(){e.call(this)}t.prototype._iInitConstantData=function(t){e.prototype._iInitConstantData.call(this,t);var r=this._fragmentConstantsIndex;var s=t.fragmentConstantData;s[r+4]=1/255;s[r+5]=1/255;s[r+6]=1/255;s[r+7]=0};t.prototype._iIncludeDependencies=function(e){e.projectionDependencies++;e.viewDirDependencies++;if(e.alphaThreshold>0)e.uvDependencies++;if(e.viewDirDependencies>0)e.globalPosDependencies++};t.prototype._iGetFragmentCode=function(e,t,r){var s;var i=r.shadedTarget;var a=t.getFreeTextureReg();var o=t.getFreeFragmentConstant();var n=t.getFreeFragmentConstant();this._fragmentConstantsIndex=o.index*4;var h=t.getFreeFragmentVectorTemp();t.addFragmentTempUsages(h,1);var p=t.getFreeFragmentVectorTemp();t.addFragmentTempUsages(p,1);s="dp3 "+h+".z, "+r.viewDirVarying+".xyz, "+r.viewDirVarying+".xyz\n"+"mul "+h+", "+o+", "+h+".z\n"+"frc "+h+", "+h+"\n"+"mul "+p+", "+h+".yzww, "+n+"\n";if(e.alphaThreshold>0){a=t.getFreeTextureReg();this._texturesIndex=a.index;var u=t.getFreeFragmentVectorTemp();s+=l.getTex2DSampleCode(u,r,a,e.texture,e.useSmoothTextures,e.repeatTextures,e.useMipmapping);var c=t.getFreeFragmentConstant();s+="sub "+u+".w, "+u+".w, "+c+".x\n"+"kil "+u+".w\n"}s+="sub "+i+", "+h+", "+p+"\n";return s};t.prototype._iActivate=function(t,r,s){e.prototype._iActivate.call(this,t,r,s);var n=r.context;var l=t.shaderObject;var h=s.projection.far;h=1/(2*h*h);var p=this._fragmentConstantsIndex;var u=l.fragmentConstantData;u[p]=1*h;u[p+1]=255*h;u[p+2]=65025*h;u[p+3]=16581375*h;if(l.alphaThreshold>0){n.setSamplerStateAt(this._texturesIndex,l.repeatTextures?o.REPEAT:o.CLAMP,l.useSmoothTextures?a.LINEAR:a.NEAREST,l.useMipmapping?i.MIPLINEAR:i.MIPNONE);
r.stage.activateTexture(this._texturesIndex,l.texture);u[p+8]=t.shaderObject.alphaThreshold}};return t}(n);t.exports=h},{"awayjs-renderergl/lib/passes/MaterialPassGLBase":786,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":799,"awayjs-stagegl/lib/base/ContextGLMipFilter":895,"awayjs-stagegl/lib/base/ContextGLTextureFilter":897,"awayjs-stagegl/lib/base/ContextGLWrapMode":901}],785:[function(e,t,r){t.exports=e(699)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-parsers/node_modules/awayjs-renderergl/lib/passes/LineBasicPass.js":699,"awayjs-renderergl/lib/passes/MaterialPassGLBase":786}],786:[function(e,t,r){t.exports=e(307)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/passes/MaterialPassGLBase.js":307,"awayjs-core/lib/errors/ArgumentError":802,"awayjs-core/lib/events/Event":805,"awayjs-core/lib/library/NamedAssetBase":815,"awayjs-display/lib/base/BlendMode":824,"awayjs-renderergl/lib/compilation/ShaderObjectBase":772,"awayjs-stagegl/lib/base/ContextGLBlendFactor":892,"awayjs-stagegl/lib/base/ContextGLCompareMode":894}],787:[function(e,t,r){t.exports=e(701)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-parsers/node_modules/awayjs-renderergl/lib/passes/SkyboxPass.js":701,"awayjs-renderergl/lib/passes/MaterialPassGLBase":786}],788:[function(e,t,r){t.exports=e(702)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-parsers/node_modules/awayjs-renderergl/lib/passes/TriangleBasicPass.js":702,"awayjs-renderergl/lib/passes/MaterialPassGLBase":786,"awayjs-renderergl/lib/utils/ShaderCompilerHelper":799,"awayjs-stagegl/lib/base/ContextGLMipFilter":895,"awayjs-stagegl/lib/base/ContextGLTextureFilter":897,"awayjs-stagegl/lib/base/ContextGLWrapMode":901}],789:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-display/lib/base/TriangleSubGeometry");var a=e("awayjs-renderergl/lib/pool/RenderableBase");var o=function(e){s(t,e);function t(t,r){e.call(this,t,r,r);this._billboard=r}t.prototype._pGetSubGeometry=function(){var e=this._billboard.material;var r=t._materialGeometry[e.id];if(!r){r=t._materialGeometry[e.id]=new i(true);r.autoDeriveNormals=false;r.autoDeriveTangents=false;r.updateIndices(Array(0,1,2,0,2,3));r.updatePositions(Array(0,e.height,0,e.width,e.height,0,e.width,0,0,0,0,0));r.updateVertexNormals(Array(1,0,0,1,0,0,1,0,0,1,0,0));r.updateVertexTangents(Array(0,0,-1,0,0,-1,0,0,-1,0,0,-1));r.updateUVs(Array(0,0,1,0,1,1,0,1))}else{r.updatePositions(Array(0,e.height,0,e.width,e.height,0,e.width,0,0,0,0,0))}this._pVertexDataDirty[i.POSITION_DATA]=true;this._pVertexDataDirty[i.NORMAL_DATA]=true;this._pVertexDataDirty[i.TANGENT_DATA]=true;this._pVertexDataDirty[i.UV_DATA]=true;return r};t._materialGeometry=new Object;t.id="billboard";return t}(a);t.exports=o},{"awayjs-display/lib/base/TriangleSubGeometry":833,"awayjs-renderergl/lib/pool/RenderableBase":795}],790:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-display/lib/base/LineSubGeometry");var a=e("awayjs-renderergl/lib/pool/RenderableBase");var o=function(e){s(t,e);function t(t,r,s,i){if(s===void 0){s=0}if(i===void 0){i=0}e.call(this,t,r.parentMesh,r,s,i);this.subMesh=r}t.prototype._pGetSubGeometry=function(){var e=this.subMesh.subGeometry;this._pVertexDataDirty[i.START_POSITION_DATA]=true;this._pVertexDataDirty[i.END_POSITION_DATA]=true;if(e.thickness)this._pVertexDataDirty[i.THICKNESS_DATA]=true;if(e.startColors)this._pVertexDataDirty[i.COLOR_DATA]=true;return e};t.prototype._pGetOverflowRenderable=function(e,r,s,i){return new t(e,r,s,i)};t.id="linesubmesh";return t}(a);t.exports=o},{"awayjs-display/lib/base/LineSubGeometry":827,"awayjs-renderergl/lib/pool/RenderableBase":795}],791:[function(e,t,r){var s=e("awayjs-renderergl/lib/pool/MaterialPassDataPool");var i=function(){function e(e,t){this.invalidAnimation=true;this._pool=e;this.material=t;this._materialPassDataPool=new s(t)}e.prototype.getMaterialPass=function(e,t){var r=this._materialPassDataPool.getItem(e);if(!r.shaderObject){r.shaderObject=e.createShaderObject(t);r.invalid=true}if(r.invalid){r.invalid=false;var s=r.shaderObject.createCompiler(this.material,e);s.compile();r.shadedTarget=s.shadedTarget;r.vertexCode=s.vertexCode;r.fragmentCode=s.fragmentCode;r.postAnimationFragmentCode=s.postAnimationFragmentCode;r.key=""}return r};e.prototype.getMaterialPasses=function(e){if(this._passes==null){var t=this.material._iScreenPasses;var r=t.length;this._passes=new Array(r);for(var s=0;s<r;s++)this._passes[s]=this.getMaterialPass(t[s],e)}return this._passes};e.prototype.dispose=function(){this._materialPassDataPool.disposePool();this._materialPassDataPool=null;this._pool.disposeItem(this.material);this._passes=null};e.prototype.invalidateMaterial=function(){this._passes=null;this.invalidateAnimation()};e.prototype.invalidateAnimation=function(){this.invalidAnimation=true};return e}();t.exports=i},{"awayjs-renderergl/lib/pool/MaterialPassDataPool":794}],792:[function(e,t,r){var s=e("awayjs-renderergl/lib/pool/MaterialData");var i=function(){function e(){this._pool=new Object}e.prototype.getItem=function(e){return this._pool[e.id]||(this._pool[e.id]=e._iAddMaterialData(new s(this,e)))};e.prototype.disposeItem=function(e){e._iRemoveMaterialData(this._pool[e.id]);this._pool[e.id]=null};return e}();t.exports=i},{"awayjs-renderergl/lib/pool/MaterialData":791}],793:[function(e,t,r){var s=function(){function e(e,t,r){this.animationVertexCode="";this.animationFragmentCode="";this._pool=e;this.material=t;this.materialPass=r}e.prototype.dispose=function(){this._pool.disposeItem(this.materialPass);this.shaderObject.dispose();this.shaderObject=null;this.programData.dispose();this.programData=null};e.prototype.invalidate=function(){this.invalid=true};return e}();t.exports=s},{}],794:[function(e,t,r){var s=e("awayjs-renderergl/lib/pool/MaterialPassData");var i=function(){function e(e){this._pool=new Object;this._material=e}e.prototype.getItem=function(e){return this._pool[e.id]||(this._pool[e.id]=this._material._iAddMaterialPassData(e._iAddMaterialPassData(new s(this,this._material,e))))};e.prototype.disposeItem=function(e){e._iRemoveMaterialPassData(this._pool[e.id]);delete this._pool[e.id]};e.prototype.disposePool=function(){for(var e in this._pool)this._pool[e].materialPass._iRemoveMaterialPassData(this._pool[e]);delete this._pool};return e}();t.exports=i},{"awayjs-renderergl/lib/pool/MaterialPassData":793}],795:[function(e,t,r){var s=e("awayjs-core/lib/errors/AbstractMethodError");var i=e("awayjs-display/lib/base/SubGeometryBase");var a=e("awayjs-display/lib/base/TriangleSubGeometry");var o=e("awayjs-display/lib/events/SubGeometryEvent");var n=e("awayjs-stagegl/lib/pool/IndexDataPool");var l=e("awayjs-stagegl/lib/pool/VertexDataPool");var h=function(){function e(e,t,r,s,i){var a=this;if(s===void 0){s=0}if(i===void 0){i=0}this._geometryDirty=true;this._indexDataDirty=true;this._vertexData=new Object;this._pVertexDataDirty=new Object;this._vertexOffset=new Object;this._onIndicesUpdatedDelegate=function(e){return a._onIndicesUpdated(e)};this._onVerticesUpdatedDelegate=function(e){return a._onVerticesUpdated(e)};this._pool=e;this._level=s;this._indexOffset=i;this.sourceEntity=t;this.materialOwner=r}Object.defineProperty(e.prototype,"overflow",{get:function(){if(this._indexDataDirty)this._updateIndexData();return this._overflow},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"numTriangles",{get:function(){return this._numTriangles},enumerable:true,configurable:true});e.prototype.getIndexData=function(){if(this._indexDataDirty)this._updateIndexData();return this._indexData};e.prototype.getVertexData=function(e){if(this._indexDataDirty)this._updateIndexData();if(this._pVertexDataDirty[e])this._updateVertexData(e);return this._vertexData[this._concatenateArrays?a.VERTEX_DATA:e]};e.prototype.getVertexOffset=function(e){if(this._indexDataDirty)this._updateIndexData();if(this._pVertexDataDirty[e])this._updateVertexData(e);return this._vertexOffset[e]};e.prototype.dispose=function(){this._pool.disposeItem(this.materialOwner);this._indexData.dispose();this._indexData=null;for(var e in this._vertexData){this._vertexData[e].dispose();this._vertexData[e]=null}if(this._overflow){this._overflow.dispose();this._overflow=null}};e.prototype.invalidateGeometry=function(){this._geometryDirty=true;if(this._level==0)this._indexDataDirty=true;if(this._overflow)this._overflow.invalidateGeometry()};e.prototype.invalidateIndexData=function(){this._indexDataDirty=true};e.prototype.invalidateVertexData=function(e){this._pVertexDataDirty[e]=true};e.prototype._pGetSubGeometry=function(){throw new s};e.prototype._iFillIndexData=function(e){if(this._geometryDirty)this._updateGeometry();this._indexData=n.getItem(this._subGeometry,this._level,e);this._numTriangles=this._indexData.data.length/3;e=this._indexData.offset;if(e<this._subGeometry.indices.length){if(!this._overflow)this._overflow=this._pGetOverflowRenderable(this._pool,this.materialOwner,e,this._level+1);this._overflow._iFillIndexData(e)}else if(this._overflow){this._overflow.dispose();this._overflow=null}};e.prototype._pGetOverflowRenderable=function(e,t,r,i){throw new s};e.prototype._updateGeometry=function(){if(this._subGeometry){if(this._level==0)this._subGeometry.removeEventListener(o.INDICES_UPDATED,this._onIndicesUpdatedDelegate);this._subGeometry.removeEventListener(o.VERTICES_UPDATED,this._onVerticesUpdatedDelegate)}this._subGeometry=this._pGetSubGeometry();this._concatenateArrays=this._subGeometry.concatenateArrays;if(this._subGeometry){if(this._level==0)this._subGeometry.addEventListener(o.INDICES_UPDATED,this._onIndicesUpdatedDelegate);this._subGeometry.addEventListener(o.VERTICES_UPDATED,this._onVerticesUpdatedDelegate)}this._geometryDirty=false};e.prototype._updateIndexData=function(){this._iFillIndexData(this._indexOffset);this._indexDataDirty=false};e.prototype._updateVertexData=function(e){this._vertexOffset[e]=this._subGeometry.getOffset(e);if(this._subGeometry.concatenateArrays)e=i.VERTEX_DATA;this._vertexData[e]=l.getItem(this._subGeometry,this.getIndexData(),e);this._pVertexDataDirty[e]=false};e.prototype._onIndicesUpdated=function(e){this.invalidateIndexData()};e.prototype._onVerticesUpdated=function(e){this._concatenateArrays=e.target.concatenateArrays;this.invalidateVertexData(e.dataType)};return e}();t.exports=h},{"awayjs-core/lib/errors/AbstractMethodError":801,"awayjs-display/lib/base/SubGeometryBase":830,"awayjs-display/lib/base/TriangleSubGeometry":833,"awayjs-display/lib/events/SubGeometryEvent":843,"awayjs-stagegl/lib/pool/IndexDataPool":921,"awayjs-stagegl/lib/pool/VertexDataPool":927}],796:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-display/lib/base/TriangleSubGeometry");var a=e("awayjs-renderergl/lib/pool/RenderableBase");var o=function(e){s(t,e);function t(t,r){e.call(this,t,r,r)}t.prototype._pGetSubGeometry=function(){var e=t._geometry;if(!e){e=t._geometry=new i(true);e.autoDeriveNormals=false;e.autoDeriveTangents=false;e.updateIndices(Array(0,1,2,2,3,0,6,5,4,4,7,6,2,6,7,7,3,2,4,5,1,1,0,4,4,0,3,3,7,4,2,1,5,5,6,2));e.updatePositions(Array(-1,1,-1,1,1,-1,1,1,1,-1,1,1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1))}this._pVertexDataDirty[i.POSITION_DATA]=true;return e};t.id="skybox";return t}(a);t.exports=o},{"awayjs-display/lib/base/TriangleSubGeometry":833,"awayjs-renderergl/lib/pool/RenderableBase":795}],797:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-display/lib/base/TriangleSubGeometry");var a=e("awayjs-stagegl/lib/base/ContextGLVertexBufferFormat");var o=e("awayjs-renderergl/lib/pool/RenderableBase");var n=function(e){s(t,e);function t(t,r,s,i){if(s===void 0){s=0}if(i===void 0){i=0}e.call(this,t,r.parentMesh,r,s,i);this.subMesh=r}t.prototype._pGetSubGeometry=function(){var e;if(this.subMesh.animator)e=this.subMesh.animator.getRenderableSubGeometry(this,this.subMesh.subGeometry);else e=this.subMesh.subGeometry;this._pVertexDataDirty[i.POSITION_DATA]=true;if(e.vertexNormals)this._pVertexDataDirty[i.NORMAL_DATA]=true;if(e.vertexTangents)this._pVertexDataDirty[i.TANGENT_DATA]=true;if(e.uvs)this._pVertexDataDirty[i.UV_DATA]=true;if(e.secondaryUVs)this._pVertexDataDirty[i.SECONDARY_UV_DATA]=true;if(e.jointIndices)this._pVertexDataDirty[i.JOINT_INDEX_DATA]=true;if(e.jointWeights)this._pVertexDataDirty[i.JOINT_WEIGHT_DATA]=true;switch(e.jointsPerVertex){case 1:this.JOINT_INDEX_FORMAT=this.JOINT_WEIGHT_FORMAT=a.FLOAT_1;break;case 2:this.JOINT_INDEX_FORMAT=this.JOINT_WEIGHT_FORMAT=a.FLOAT_2;break;case 3:this.JOINT_INDEX_FORMAT=this.JOINT_WEIGHT_FORMAT=a.FLOAT_3;break;case 4:this.JOINT_INDEX_FORMAT=this.JOINT_WEIGHT_FORMAT=a.FLOAT_4;break;default:}return e};t.prototype._pGetOverflowRenderable=function(e,r,s,i){return new t(e,r,s,i)};t.id="trianglesubmesh";return t}(o);t.exports=n},{"awayjs-display/lib/base/TriangleSubGeometry":833,"awayjs-renderergl/lib/pool/RenderableBase":795,"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat":900}],798:[function(e,t,r){var s=e("awayjs-core/lib/geom/Matrix3DUtils");var i=e("awayjs-display/lib/base/Geometry");var a=e("awayjs-display/lib/base/TriangleSubGeometry");var o=e("awayjs-display/lib/entities/Mesh");var n=function(){function e(e,t,r){if(e===void 0){e=false}if(t===void 0){t=false}if(r===void 0){r=false}this._keepMaterial=e;this._disposeSources=t;this._objectSpace=r}Object.defineProperty(e.prototype,"disposeSources",{get:function(){return this._disposeSources},set:function(e){this._disposeSources=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"keepMaterial",{get:function(){return this._keepMaterial},set:function(e){this._keepMaterial=e},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"objectSpace",{get:function(){return this._objectSpace},set:function(e){this._objectSpace=e},enumerable:true,configurable:true});e.prototype.applyToContainer=function(e,t){this.reset();this.parseContainer(e,t);this.collect(e,false);this.merge(e,this._disposeSources)};e.prototype.applyToMeshes=function(e,t){this.reset();if(!t.length)return;for(var r=0;r<t.length;r++)if(t[r]!=e)this.collect(t[r],this._disposeSources);this.collect(e,false);this.merge(e,this._disposeSources)};e.prototype.apply=function(e,t){this.reset();this.collect(t,this._disposeSources);this.collect(e,false);this.merge(e,this._disposeSources)};e.prototype.reset=function(){this._toDispose=new Array;this._geomVOs=new Array};e.prototype.merge=function(e,t){var r;var s;var o;var n;var l;o=e.geometry;n=e.geometry=new i;s=e.subMeshes.length;l=this._geomVOs.length>1;for(r=0;r<this._geomVOs.length;r++){var h;var p;var u=new a(true);u.autoDeriveNormals=false;u.autoDeriveTangents=false;p=this._geomVOs[r];u.updateIndices(p.indices);u.updatePositions(p.vertices);u.updateVertexNormals(p.normals);u.updateVertexTangents(p.tangents);u.updateUVs(p.uvs);n.addSubGeometry(u);if(this._keepMaterial&&l)e.subMeshes[s].material=p.material}if(this._keepMaterial&&!l&&this._geomVOs.length)e.material=this._geomVOs[0].material;if(t){var c;var d=this._toDispose.length;for(var r;r<d;r++){c=this._toDispose[r];c.geometry.dispose();c.dispose()}o.dispose()}this._toDispose=null};e.prototype.collect=function(e,t){if(e.geometry){var r;var i=e.geometry.subGeometries;var a;for(r=0;r<i.length;r++){var o;var n;var l,h,p,u,c;var d;var f;var y;var m;var _;var b;var g,w,v,j;f=i[r];g=f.positions;w=f.vertexNormals;v=f.vertexTangents;j=f.uvs;y=this.getSubGeomData(e.subMeshes[r].material||e.material);m=this._objectSpace?y.vertices:new Array;_=this._objectSpace?y.normals:new Array;b=this._objectSpace?y.tangents:new Array;h=m.length;p=_.length;u=b.length;c=y.uvs.length;n=f.numVertices;for(o=0;o<n;o++){a=o*3;m[h++]=g[a];m[h++]=g[a+1];m[h++]=g[a+2];_[p++]=w[a];_[p++]=w[a+1];_[p++]=w[a+2];b[u++]=v[a];b[u++]=v[a+1];b[u++]=v[a+2];y.uvs[c++]=j[o*2];y.uvs[c++]=j[o*2+1]}d=!this._objectSpace?y.vertices.length/3:0;l=y.indices.length;n=f.numTriangles;for(o=0;o<n;o++){a=o*3;y.indices[l++]=f.indices[a]+d;y.indices[l++]=f.indices[a+1]+d;y.indices[l++]=f.indices[a+2]+d}if(!this._objectSpace){e.sceneTransform.transformVectors(m,m);s.deltaTransformVectors(e.sceneTransform,_,_);s.deltaTransformVectors(e.sceneTransform,b,b);h=y.vertices.length;p=y.normals.length;u=y.tangents.length;n=m.length;for(o=0;o<n;o++){y.vertices[h++]=m[o];y.normals[p++]=_[o];y.tangents[u++]=b[o]}}}if(t)this._toDispose.push(e)}};e.prototype.getSubGeomData=function(e){var t;if(this._keepMaterial){var r;var s;s=this._geomVOs.length;for(r=0;r<s;r++){if(this._geomVOs[r].material==e){t=this._geomVOs[r];break}}}else if(this._geomVOs.length){t=this._geomVOs[0]}if(!t){t=new l;t.vertices=new Array;t.normals=new Array;t.tangents=new Array;t.uvs=new Array;t.indices=new Array;t.material=e;this._geomVOs.push(t)}return t};e.prototype.parseContainer=function(e,t){var r;var s;if(t instanceof o&&t!=e)this.collect(t,this._disposeSources);for(s=0;s<t.numChildren;++s){r=t.getChildAt(s);this.parseContainer(e,r)}};return e}();var l=function(){function e(){}return e}();t.exports=n},{"awayjs-core/lib/geom/Matrix3DUtils":809,"awayjs-display/lib/base/Geometry":826,"awayjs-display/lib/base/TriangleSubGeometry":833,"awayjs-display/lib/entities/Mesh":836}],799:[function(e,t,r){t.exports=e(308)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/lib/utils/ShaderCompilerHelper.js":308,"awayjs-stagegl/lib/base/ContextGLTextureFormat":898}],800:[function(e,t,r){t.exports=e(2)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/base/BitmapData.js":2,"awayjs-core/lib/geom/Rectangle":812,"awayjs-core/lib/utils/ColorUtils":821}],801:[function(e,t,r){t.exports=e(4)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/AbstractMethodError.js":4,"awayjs-core/lib/errors/Error":803}],802:[function(e,t,r){t.exports=e(5)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/ArgumentError.js":5,"awayjs-core/lib/errors/Error":803}],803:[function(e,t,r){t.exports=e(6)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/Error.js":6}],804:[function(e,t,r){t.exports=e(7)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/AssetEvent.js":7,"awayjs-core/lib/events/Event":805}],805:[function(e,t,r){t.exports=e(8)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/Event.js":8}],806:[function(e,t,r){t.exports=e(9)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/EventDispatcher.js":9}],807:[function(e,t,r){t.exports=e(16)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Matrix.js":16,"awayjs-core/lib/errors/ArgumentError":802,"awayjs-core/lib/geom/Point":811}],808:[function(e,t,r){t.exports=e(144)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Matrix3D.js":144,"awayjs-core/lib/errors/ArgumentError":802,"awayjs-core/lib/geom/Orientation3D":810,"awayjs-core/lib/geom/Vector3D":813}],809:[function(e,t,r){t.exports=e(145)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Matrix3DUtils.js":145,"awayjs-core/lib/geom/Matrix3D":808,"awayjs-core/lib/geom/Vector3D":813}],810:[function(e,t,r){t.exports=e(146)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Orientation3D.js":146}],811:[function(e,t,r){t.exports=e(17)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Point.js":17}],812:[function(e,t,r){t.exports=e(18)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Rectangle.js":18,"awayjs-core/lib/geom/Point":811}],813:[function(e,t,r){t.exports=e(20)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Vector3D.js":20}],814:[function(e,t,r){t.exports=e(27)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/AssetType.js":27}],815:[function(e,t,r){t.exports=e(33)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/NamedAssetBase.js":33,"awayjs-core/lib/errors/AbstractMethodError":801,"awayjs-core/lib/events/AssetEvent":804,"awayjs-core/lib/events/EventDispatcher":806}],816:[function(e,t,r){t.exports=e(45)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/BitmapTexture.js":45,"awayjs-core/lib/errors/Error":803,"awayjs-core/lib/textures/Texture2DBase":819,"awayjs-core/lib/utils/TextureUtils":822}],817:[function(e,t,r){t.exports=e(49)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/MipmapGenerator.js":49,"awayjs-core/lib/base/BitmapData":800,"awayjs-core/lib/geom/Matrix":807,"awayjs-core/lib/geom/Rectangle":812}],818:[function(e,t,r){t.exports=e(183)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/textures/RenderTexture.js":183,"awayjs-core/lib/errors/Error":803,"awayjs-core/lib/textures/Texture2DBase":819,"awayjs-core/lib/utils/TextureUtils":822}],819:[function(e,t,r){t.exports=e(51)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/Texture2DBase.js":51,"awayjs-core/lib/errors/AbstractMethodError":801,"awayjs-core/lib/textures/MipmapGenerator":817,"awayjs-core/lib/textures/TextureProxyBase":820}],820:[function(e,t,r){t.exports=e(52)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/TextureProxyBase.js":52,"awayjs-core/lib/library/AssetType":814,"awayjs-core/lib/library/NamedAssetBase":815}],821:[function(e,t,r){t.exports=e(56)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/ColorUtils.js":56}],822:[function(e,t,r){t.exports=e(58)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/TextureUtils.js":58}],823:[function(e,t,r){t.exports=e(61)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/AlignmentMode.js":61}],824:[function(e,t,r){t.exports=e(62)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/BlendMode.js":62}],825:[function(e,t,r){t.exports=e(63)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/DisplayObject.js":63,"awayjs-core/lib/bounds/AxisAlignedBoundingBox":854,"awayjs-core/lib/errors/AbstractMethodError":856,"awayjs-core/lib/geom/MathConsts":865,"awayjs-core/lib/geom/Matrix3D":866,"awayjs-core/lib/geom/Matrix3DUtils":867,"awayjs-core/lib/geom/Point":870,"awayjs-core/lib/geom/Vector3D":871,"awayjs-core/lib/library/NamedAssetBase":873,"awayjs-display/lib/base/AlignmentMode":823,"awayjs-display/lib/base/OrientationMode":829,"awayjs-display/lib/base/Transform":832,"awayjs-display/lib/events/DisplayObjectEvent":837,"awayjs-display/lib/events/SceneEvent":841,"awayjs-display/lib/pick/PickingCollisionVO":847}],826:[function(e,t,r){t.exports=e(64)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/Geometry.js":64,"awayjs-core/lib/library/AssetType":872,"awayjs-core/lib/library/NamedAssetBase":873,"awayjs-display/lib/events/GeometryEvent":838}],827:[function(e,t,r){t.exports=e(66)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/LineSubGeometry.js":66,"awayjs-display/lib/base/LineSubMesh":828,"awayjs-display/lib/base/SubGeometryBase":830,"awayjs-display/lib/base/TriangleSubGeometry":833,"awayjs-display/lib/events/SubGeometryEvent":843}],828:[function(e,t,r){t.exports=e(67)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/LineSubMesh.js":67,"awayjs-core/lib/library/AssetType":872,"awayjs-display/lib/base/SubMeshBase":831}],829:[function(e,t,r){t.exports=e(68)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/OrientationMode.js":68}],830:[function(e,t,r){t.exports=e(69)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/SubGeometryBase.js":69,"awayjs-core/lib/errors/AbstractMethodError":856,"awayjs-core/lib/library/NamedAssetBase":873,"awayjs-display/lib/events/SubGeometryEvent":843}],831:[function(e,t,r){t.exports=e(70)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/SubMeshBase.js":70,"awayjs-core/lib/errors/AbstractMethodError":856,"awayjs-core/lib/library/NamedAssetBase":873}],832:[function(e,t,r){t.exports=e(71)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/Transform.js":71,"awayjs-core/lib/geom/Matrix3D":866,"awayjs-core/lib/geom/Matrix3DUtils":867,"awayjs-core/lib/geom/Vector3D":871}],833:[function(e,t,r){t.exports=e(72)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/TriangleSubGeometry.js":72,"awayjs-core/lib/geom/Vector3D":871,"awayjs-display/lib/base/SubGeometryBase":830,"awayjs-display/lib/base/TriangleSubMesh":834,"awayjs-display/lib/events/SubGeometryEvent":843}],834:[function(e,t,r){t.exports=e(73)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/TriangleSubMesh.js":73,"awayjs-core/lib/library/AssetType":872,"awayjs-display/lib/base/SubMeshBase":831}],835:[function(e,t,r){t.exports=e(74)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/containers/DisplayObjectContainer.js":74,"awayjs-core/lib/errors/ArgumentError":857,"awayjs-core/lib/errors/Error":858,"awayjs-core/lib/errors/RangeError":860,"awayjs-core/lib/library/AssetType":872,"awayjs-display/lib/base/DisplayObject":825}],836:[function(e,t,r){t.exports=e(83)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/entities/Mesh.js":83,"awayjs-core/lib/library/AssetType":872,"awayjs-display/lib/base/Geometry":826,"awayjs-display/lib/containers/DisplayObjectContainer":835,"awayjs-display/lib/events/GeometryEvent":838,"awayjs-display/lib/partition/EntityNode":845}],837:[function(e,t,r){t.exports=e(88)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/DisplayObjectEvent.js":88,"awayjs-core/lib/events/Event":862}],838:[function(e,t,r){t.exports=e(89)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/GeometryEvent.js":89,"awayjs-core/lib/events/Event":862}],839:[function(e,t,r){t.exports=e(325)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-display/lib/events/MaterialEvent.js":325,"awayjs-core/lib/events/Event":862}],840:[function(e,t,r){t.exports=e(92)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/RendererEvent.js":92,"awayjs-core/lib/events/Event":862}],841:[function(e,t,r){t.exports=e(93)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/SceneEvent.js":93,"awayjs-core/lib/events/Event":862}],842:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/events/Event");var a=function(e){s(t,e);function t(t){e.call(this,t)}t.CONTEXT_CREATED="contextCreated";t.CONTEXT_DISPOSED="contextDisposed";t.CONTEXT_RECREATED="contextRecreated";t.VIEWPORT_UPDATED="viewportUpdated";return t}(i);t.exports=a},{"awayjs-core/lib/events/Event":862}],843:[function(e,t,r){t.exports=e(94)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/SubGeometryEvent.js":94,"awayjs-core/lib/events/Event":862}],844:[function(e,t,r){t.exports=e(328)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-display/lib/materials/MaterialBase.js":328,"awayjs-core/lib/events/Event":862,"awayjs-core/lib/library/AssetType":872,"awayjs-core/lib/library/NamedAssetBase":873,"awayjs-display/lib/base/BlendMode":824,"awayjs-display/lib/events/MaterialEvent":839}],845:[function(e,t,r){t.exports=e(103)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/partition/EntityNode.js":103,"awayjs-core/lib/errors/PartialImplementationError":859,"awayjs-display/lib/partition/NodeBase":846}],846:[function(e,t,r){t.exports=e(105)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/partition/NodeBase.js":105}],847:[function(e,t,r){t.exports=e(110)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/pick/PickingCollisionVO.js":110}],848:[function(e,t,r){t.exports=e(112)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/pool/EntityListItem.js":112}],849:[function(e,t,r){t.exports=e(113)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/pool/EntityListItemPool.js":113,"awayjs-display/lib/pool/EntityListItem":848}],850:[function(e,t,r){var s=function(){function e(e){this._pool=new Object;this._renderableClass=e}e.prototype.getItem=function(e){return this._pool[e.id]||(this._pool[e.id]=e._iAddRenderable(new this._renderableClass(this,e)))};e.prototype.disposeItem=function(e){e._iRemoveRenderable(this._pool[e.id]);this._pool[e.id]=null};e.getPool=function(t){var r=e._pools[t.id];if(r!=undefined)return r;return e._pools[t.id]=new e(t)};e.disposePool=function(t){if(e._pools[t.id])e._pools[t.id]=undefined};e._pools=new Object;return e}();t.exports=s},{}],851:[function(e,t,r){var s=function(){function e(){}e.prototype.sortBlendedRenderables=function(e){var t;var r;var s;if(!e||!e.next){return e}s=e;r=e.next;while(r){r=r.next;if(r){s=s.next;r=r.next}}t=s.next;s.next=null;e=this.sortBlendedRenderables(e);t=this.sortBlendedRenderables(t);var i;var a;var o;if(!e)return t;if(!t)return e;while(e&&t){if(e.zIndex<t.zIndex){o=e;e=e.next}else{o=t;t=t.next}if(!i)i=o;else a.next=o;a=o}if(e)a.next=e;else if(t)a.next=t;return i};e.prototype.sortOpaqueRenderables=function(e){var t;var r,s;if(!e||!e.next){return e}s=e;r=e.next;while(r){r=r.next;if(r){s=s.next;r=r.next}}t=s.next;s.next=null;e=this.sortOpaqueRenderables(e);t=this.sortOpaqueRenderables(t);var i;var a;var o;var n=0;if(!e)return t;if(!t)return e;while(e&&t&&e!=null&&t!=null){var l=e.renderOrderId;var h=t.renderOrderId;if(l==h){var p=e.materialId;var u=t.materialId;if(p==u){if(e.zIndex<t.zIndex)n=1;else n=-1}else if(p>u){n=1}else{n=-1}}else if(l>h){n=1}else{n=-1}if(n<0){o=e;e=e.next}else{o=t;t=t.next}if(!i){i=o;a=o}else{a.next=o;a=o}}if(e)a.next=e;else if(t)a.next=t;return i};return e}();t.exports=s},{}],852:[function(e,t,r){t.exports=e(117)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/traverse/CollectorBase.js":117,"awayjs-display/lib/pool/EntityListItemPool":849}],853:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-display/lib/traverse/CollectorBase");
var a=function(e){s(t,e);function t(){e.call(this);this._pNumLights=0;this._numDirectionalLights=0;this._numPointLights=0;this._numLightProbes=0;this._pLights=new Array;this._directionalLights=new Array;this._pointLights=new Array;this._lightProbes=new Array}Object.defineProperty(t.prototype,"directionalLights",{get:function(){return this._directionalLights},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lightProbes",{get:function(){return this._lightProbes},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lights",{get:function(){return this._pLights},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"pointLights",{get:function(){return this._pointLights},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skyBox",{get:function(){return this._pSkybox},enumerable:true,configurable:true});t.prototype.applyDirectionalLight=function(e){this._directionalLights[this._numDirectionalLights++]=e};t.prototype.applyLightProbe=function(e){this._lightProbes[this._numLightProbes++]=e};t.prototype.applyPointLight=function(e){this._pointLights[this._numPointLights++]=e};t.prototype.applySkybox=function(e){this._pSkybox=e};t.prototype.clear=function(){e.prototype.clear.call(this);this._pSkybox=null;if(this._pNumLights>0)this._pLights.length=this._pNumLights=0;if(this._numDirectionalLights>0)this._directionalLights.length=this._numDirectionalLights=0;if(this._numPointLights>0)this._pointLights.length=this._numPointLights=0;if(this._numLightProbes>0)this._lightProbes.length=this._numLightProbes=0};return t}(i);t.exports=a},{"awayjs-display/lib/traverse/CollectorBase":852}],854:[function(e,t,r){t.exports=e(122)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/bounds/AxisAlignedBoundingBox.js":122,"awayjs-core/lib/bounds/BoundingVolumeBase":855,"awayjs-core/lib/geom/Matrix3DUtils":867,"awayjs-core/lib/geom/PlaneClassification":869,"awayjs-core/lib/geom/Vector3D":871}],855:[function(e,t,r){t.exports=e(124)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/bounds/BoundingVolumeBase.js":124,"awayjs-core/lib/errors/AbstractMethodError":856,"awayjs-core/lib/geom/Box":864}],856:[function(e,t,r){t.exports=e(4)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/AbstractMethodError.js":4,"awayjs-core/lib/errors/Error":858}],857:[function(e,t,r){t.exports=e(5)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/ArgumentError.js":5,"awayjs-core/lib/errors/Error":858}],858:[function(e,t,r){t.exports=e(6)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/Error.js":6}],859:[function(e,t,r){t.exports=e(129)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/errors/PartialImplementationError.js":129,"awayjs-core/lib/errors/Error":858}],860:[function(e,t,r){t.exports=e(130)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/errors/RangeError.js":130,"awayjs-core/lib/errors/Error":858}],861:[function(e,t,r){t.exports=e(7)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/AssetEvent.js":7,"awayjs-core/lib/events/Event":862}],862:[function(e,t,r){t.exports=e(8)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/Event.js":8}],863:[function(e,t,r){t.exports=e(9)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/EventDispatcher.js":9}],864:[function(e,t,r){t.exports=e(141)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Box.js":141,"awayjs-core/lib/geom/Vector3D":871}],865:[function(e,t,r){t.exports=e(142)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/MathConsts.js":142}],866:[function(e,t,r){t.exports=e(144)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Matrix3D.js":144,"awayjs-core/lib/errors/ArgumentError":857,"awayjs-core/lib/geom/Orientation3D":868,"awayjs-core/lib/geom/Vector3D":871}],867:[function(e,t,r){t.exports=e(145)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Matrix3DUtils.js":145,"awayjs-core/lib/geom/Matrix3D":866,"awayjs-core/lib/geom/Vector3D":871}],868:[function(e,t,r){t.exports=e(146)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/Orientation3D.js":146}],869:[function(e,t,r){t.exports=e(148)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/geom/PlaneClassification.js":148}],870:[function(e,t,r){t.exports=e(17)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Point.js":17}],871:[function(e,t,r){t.exports=e(20)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Vector3D.js":20}],872:[function(e,t,r){t.exports=e(27)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/AssetType.js":27}],873:[function(e,t,r){t.exports=e(33)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/NamedAssetBase.js":33,"awayjs-core/lib/errors/AbstractMethodError":856,"awayjs-core/lib/events/AssetEvent":861,"awayjs-core/lib/events/EventDispatcher":863}],874:[function(e,t,r){var s=e("awayjs-stagegl/lib/aglsl/Description");var i=e("awayjs-stagegl/lib/aglsl/Header");var a=e("awayjs-stagegl/lib/aglsl/Mapping");var o=e("awayjs-stagegl/lib/aglsl/Token");var n=function(){function e(){}e.prototype.decribeAGALByteArray=function(e){var t=new i;if(e.readUnsignedByte()!=160){throw"Bad AGAL: Missing 0xa0 magic byte."}t.version=e.readUnsignedInt();if(t.version>=16){e.readUnsignedByte();t.version>>=1}if(e.readUnsignedByte()!=161){throw"Bad AGAL: Missing 0xa1 magic byte."}t.progid=e.readUnsignedByte();switch(t.progid){case 1:t.type="fragment";break;case 0:t.type="vertex";break;case 2:t.type="cpu";break;default:t.type="";break}var r=new s;var n=[];while(e.position<e.length){var l=new o;l.opcode=e.readUnsignedInt();var h=a.agal2glsllut[l.opcode];if(!h){throw"Opcode not valid or not implemented yet: "+l.opcode}if(h.matrixheight){r.hasmatrix=true}if(h.dest){l.dest.regnum=e.readUnsignedShort();l.dest.mask=e.readUnsignedByte();l.dest.regtype=e.readUnsignedByte();r.regwrite[l.dest.regtype][l.dest.regnum]|=l.dest.mask}else{l.dest=null;e.readUnsignedInt()}if(h.a){this.readReg(l.a,1,r,e)}else{l.a=null;e.readUnsignedInt();e.readUnsignedInt()}if(h.b){this.readReg(l.b,h.matrixheight|0,r,e)}else{l.b=null;e.readUnsignedInt();e.readUnsignedInt()}n.push(l)}r.header=t;r.tokens=n;return r};e.prototype.readReg=function(e,t,r,s){e.regnum=s.readUnsignedShort();e.indexoffset=s.readByte();e.swizzle=s.readUnsignedByte();e.regtype=s.readUnsignedByte();r.regread[e.regtype][e.regnum]=15;if(e.regtype==5){e.lodbiad=e.indexoffset;e.indexoffset=undefined;e.swizzle=undefined;e.readmode=s.readUnsignedByte();e.dim=e.readmode>>4;e.readmode&=15;e.special=s.readUnsignedByte();e.wrap=e.special>>4;e.special&=15;e.mipmap=s.readUnsignedByte();e.filter=e.mipmap>>4;e.mipmap&=15;r.samplers[e.regnum]=e}else{e.indexregtype=s.readUnsignedByte();e.indexselect=s.readUnsignedByte();e.indirectflag=s.readUnsignedByte()}if(e.indirectflag){r.hasindirect=true}if(!e.indirectflag&&t){for(var i=0;i<t;i++){r.regread[e.regtype][e.regnum+i]=r.regread[e.regtype][e.regnum]}}};return e}();t.exports=n},{"awayjs-stagegl/lib/aglsl/Description":876,"awayjs-stagegl/lib/aglsl/Header":878,"awayjs-stagegl/lib/aglsl/Mapping":879,"awayjs-stagegl/lib/aglsl/Token":882}],875:[function(e,t,r){var s=e("awayjs-stagegl/lib/aglsl/Mapping");var i=e("awayjs-stagegl/lib/base/ContextStage3D");var a=function(){function e(){}e.prototype.parse=function(e){var t="";var r="";t+="precision highp float;\n";var a=e.header.type[0];if(e.header.type=="vertex"){t+="uniform float yflip;\n"}if(!e.hasindirect){for(var o=0;o<e.regread[1].length;o++){if(e.regread[1][o]){t+="uniform vec4 "+a+"c"+o+";\n"}}}else{t+="uniform vec4 "+a+"carrr["+i.maxvertexconstants+"];\n"}for(var o=0;o<e.regread[2].length||o<e.regwrite[2].length;o++){if(e.regread[2][o]||e.regwrite[2][o]){t+="vec4 "+a+"t"+o+";\n"}}for(var o=0;o<e.regread[0].length;o++){if(e.regread[0][o]){t+="attribute vec4 va"+o+";\n"}}for(var o=0;o<e.regread[4].length||o<e.regwrite[4].length;o++){if(e.regread[4][o]||e.regwrite[4][o]){t+="varying vec4 vi"+o+";\n"}}var n=["2D","Cube","3D",""];for(var o=0;o<e.samplers.length;o++){if(e.samplers[o]){t+="uniform sampler"+n[e.samplers[o].dim&3]+" fs"+o+";\n"}}if(e.header.type=="vertex"){t+="vec4 outpos;\n"}if(e.writedepth){t+="vec4 tmp_FragDepth;\n"}r+="void main() {\n";for(var o=0;o<e.tokens.length;o++){var l=s.agal2glsllut[e.tokens[o].opcode];if(!l){throw"Opcode not valid or not implemented yet: "}var h=l.matrixheight||1;for(var p=0;p<h;p++){var u="  "+l.s;if(e.tokens[o].dest){if(l.matrixheight){if((e.tokens[o].dest.mask>>p&1)!=1){continue}var c=this.regtostring(e.tokens[o].dest.regtype,e.tokens[o].dest.regnum,e,a);var d="float";var f=["x","y","z","w"][p];c+="."+f}else{var c=this.regtostring(e.tokens[o].dest.regtype,e.tokens[o].dest.regnum,e,a);var d;var f;if(e.tokens[o].dest.mask!=15){var y=0;f="";if(e.tokens[o].dest.mask&1){y++;f+="x"}if(e.tokens[o].dest.mask&2){y++;f+="y"}if(e.tokens[o].dest.mask&4){y++;f+="z"}if(e.tokens[o].dest.mask&8){y++;f+="w"}c+="."+f;switch(y){case 1:d="float";break;case 2:d="vec2";break;case 3:d="vec3";break;default:throw"Unexpected destination mask"}}else{d="vec4";f="xyzw"}}u=u.replace("%dest",c);u=u.replace("%cast",d);u=u.replace("%dm",f)}var m=15;if(!l.ndwm&&l.dest&&e.tokens[o].dest){m=e.tokens[o].dest.mask}if(e.tokens[o].a){u=u.replace("%a",this.sourcetostring(e.tokens[o].a,0,m,l.scalar,e,a))}if(e.tokens[o].b){u=u.replace("%b",this.sourcetostring(e.tokens[o].b,p,m,l.scalar,e,a));if(e.tokens[o].b.regtype==5){var _=["2D","Cube","3D"][e.tokens[o].b.dim];var b=["vec2","vec3","vec3"][e.tokens[o].b.dim];u=u.replace("%texdim",_);u=u.replace("%texsize",b);var g="";u=u.replace("%lod",g)}}r+=u}}if(e.header.type=="vertex"){r+="  gl_Position = vec4(outpos.x, outpos.y, outpos.z*2.0 - outpos.w, outpos.w);\n"}if(e.writedepth){r+="  gl_FragDepth = clamp(tmp_FragDepth,0.0,1.0);\n"}r+="}\n";return t+r};e.prototype.regtostring=function(e,t,r,s){switch(e){case 0:return"va"+t;case 1:if(r.hasindirect&&r.header.type=="vertex"){return"vcarrr["+t+"]"}else{return s+"c"+t}case 2:return s+"t"+t;case 3:return r.header.type=="vertex"?"outpos":"gl_FragColor";case 4:return"vi"+t;case 5:return"fs"+t;case 6:return"tmp_FragDepth";default:throw"Unknown register type"}};e.prototype.sourcetostring=function(e,t,r,s,i,a){var o=["x","y","z","w"];var n;if(e.indirectflag){n="vcarrr[int("+this.regtostring(e.indexregtype,e.regnum,i,a)+"."+o[e.indexselect]+")";var l=t+e.indexoffset;if(l<0)n+=l.toString();if(l>0)n+="+"+l.toString();n+="]"}else{n=this.regtostring(e.regtype,e.regnum+t,i,a)}if(e.regtype==5){return n}if(s){return n+"."+o[e.swizzle>>0&3]}if(e.swizzle==228&&r==15){return n}n+=".";if(r&1)n+=o[e.swizzle>>0&3];if(r&2)n+=o[e.swizzle>>2&3];if(r&4)n+=o[e.swizzle>>4&3];if(r&8)n+=o[e.swizzle>>6&3];return n};return e}();t.exports=a},{"awayjs-stagegl/lib/aglsl/Mapping":879,"awayjs-stagegl/lib/base/ContextStage3D":902}],876:[function(e,t,r){var s=e("awayjs-stagegl/lib/aglsl/Header");var i=function(){function e(){this.regread=[[],[],[],[],[],[],[]];this.regwrite=[[],[],[],[],[],[],[]];this.hasindirect=false;this.writedepth=false;this.hasmatrix=false;this.samplers=[];this.tokens=[];this.header=new s}return e}();t.exports=i},{"awayjs-stagegl/lib/aglsl/Header":878}],877:[function(e,t,r){var s=function(){function e(){this.mask=0;this.regnum=0;this.regtype=0;this.dim=0}return e}();t.exports=s},{}],878:[function(e,t,r){var s=function(){function e(){this.progid=0;this.version=0;this.type=""}return e}();t.exports=s},{}],879:[function(e,t,r){var s=e("awayjs-stagegl/lib/aglsl/OpLUT");var i=function(){function e(e){}e.agal2glsllut=[new s("%dest = %cast(%a);\n",0,true,true,false,null,null,null,null,null,null),new s("%dest = %cast(%a + %b);\n",0,true,true,true,null,null,null,null,null,null),new s("%dest = %cast(%a - %b);\n",0,true,true,true,null,null,null,null,null,null),new s("%dest = %cast(%a * %b);\n",0,true,true,true,null,null,null,null,null,null),new s("%dest = %cast(%a / %b);\n",0,true,true,true,null,null,null,null,null,null),new s("%dest = %cast(1.0) / %a;\n",0,true,true,false,null,null,null,null,null,null),new s("%dest = %cast(min(%a,%b));\n",0,true,true,true,null,null,null,null,null,null),new s("%dest = %cast(max(%a,%b));\n",0,true,true,true,null,null,null,null,null,null),new s("%dest = %cast(fract(%a));\n",0,true,true,false,null,null,null,null,null,null),new s("%dest = %cast(sqrt(abs(%a)));\n",0,true,true,false,null,null,null,null,null,null),new s("%dest = %cast(inversesqrt(abs(%a)));\n",0,true,true,false,null,null,null,null,null,null),new s("%dest = %cast(pow(abs(%a),%b));\n",0,true,true,true,null,null,null,null,null,null),new s("%dest = %cast(log2(abs(%a)));\n",0,true,true,false,null,null,null,null,null,null),new s("%dest = %cast(exp2(%a));\n",0,true,true,false,null,null,null,null,null,null),new s("%dest = %cast(normalize(vec3( %a ) ));\n",0,true,true,false,null,null,true,null,null,null),new s("%dest = %cast(sin(%a));\n",0,true,true,false,null,null,null,null,null,null),new s("%dest = %cast(cos(%a));\n",0,true,true,false,null,null,null,null,null,null),new s("%dest = %cast(cross(vec3(%a),vec3(%b)));\n",0,true,true,true,null,null,true,null,null,null),new s("%dest = %cast(dot(vec3(%a),vec3(%b)));\n",0,true,true,true,null,null,true,null,null,null),new s("%dest = %cast(dot(vec4(%a),vec4(%b)));\n",0,true,true,true,null,null,true,null,null,null),new s("%dest = %cast(abs(%a));\n",0,true,true,false,null,null,null,null,null,null),new s("%dest = %cast(%a * -1.0);\n",0,true,true,false,null,null,null,null,null,null),new s("%dest = %cast(clamp(%a,0.0,1.0));\n",0,true,true,false,null,null,null,null,null,null),new s("%dest = %cast(dot(vec3(%a),vec3(%b)));\n",null,true,true,true,3,3,true,null,null,null),new s("%dest = %cast(dot(vec4(%a),vec4(%b)));\n",null,true,true,true,4,4,true,null,null,null),new s("%dest = %cast(dot(vec4(%a),vec4(%b)));\n",null,true,true,true,4,3,true,null,null,null),new s("%dest = %cast(dFdx(%a));\n",0,true,true,false,null,null,null,null,null,null),new s("%dest = %cast(dFdx(%a));\n",0,true,true,false,null,null,null,null,null,null),new s("if (float(%a)==float(%b)) {;\n",0,false,true,true,null,null,null,true,null,null),new s("if (float(%a)!=float(%b)) {;\n",0,false,true,true,null,null,null,true,null,null),new s("if (float(%a)>=float(%b)) {;\n",0,false,true,true,null,null,null,true,null,null),new s("if (float(%a)<float(%b)) {;\n",0,false,true,true,null,null,null,true,null,null),new s("} else {;\n",0,false,false,false,null,null,null,null,null,null),new s("};\n",0,false,false,false,null,null,null,null,null,null),new s(null,null,null,null,false,null,null,null,null,null,null),new s(null,null,null,null,false,null,null,null,null,null,null),new s(null,null,null,null,false,null,null,null,null,null,null),new s(null,null,null,null,false,null,null,null,null,null,null),new s("%dest = %cast(texture%texdimLod(%b,%texsize(%a)).%dm);\n",null,true,true,true,null,null,null,null,true,null),new s("if ( float(%a)<0.0 ) discard;\n",null,false,true,false,null,null,null,true,null,null),new s("%dest = %cast(texture%texdim(%b,%texsize(%a)%lod).%dm);\n",null,true,true,true,null,null,true,null,true,true),new s("%dest = %cast(greaterThanEqual(%a,%b).%dm);\n",0,true,true,true,null,null,true,null,true,null),new s("%dest = %cast(lessThan(%a,%b).%dm);\n",0,true,true,true,null,null,true,null,true,null),new s("%dest = %cast(sign(%a));\n",0,true,true,false,null,null,null,null,null,null),new s("%dest = %cast(equal(%a,%b).%dm);\n",0,true,true,true,null,null,true,null,true,null),new s("%dest = %cast(notEqual(%a,%b).%dm);\n",0,true,true,true,null,null,true,null,true,null)];return e}();t.exports=i},{"awayjs-stagegl/lib/aglsl/OpLUT":880}],880:[function(e,t,r){var s=function(){function e(e,t,r,s,i,a,o,n,l,h,p){this.s=e;this.flags=t;this.dest=r;this.a=s;this.b=i;this.matrixwidth=a;this.matrixheight=o;this.ndwm=n;this.scalar=l;this.dm=h;this.lod=p}return e}();t.exports=s},{}],881:[function(e,t,r){var s=function(){function e(){this.lodbias=0;this.dim=0;this.readmode=0;this.special=0;this.wrap=0;this.mipmap=0;this.filter=0}return e}();t.exports=s},{}],882:[function(e,t,r){var s=e("awayjs-stagegl/lib/aglsl/Destination");var i=function(){function e(){this.dest=new s;this.opcode=0;this.a=new s;this.b=new s}return e}();t.exports=i},{"awayjs-stagegl/lib/aglsl/Destination":877}],883:[function(e,t,r){var s=e("awayjs-stagegl/lib/aglsl/assembler/OpcodeMap");var i=e("awayjs-stagegl/lib/aglsl/assembler/Part");var a=e("awayjs-stagegl/lib/aglsl/assembler/RegMap");var o=e("awayjs-stagegl/lib/aglsl/assembler/SamplerMap");var n=function(){function e(){this.r={};this.cur=new i}e.prototype.assemble=function(e,t,r){if(t===void 0){t=null}if(r===void 0){r=null}if(!r){r=1}if(t){this.addHeader(t,r)}var s=e.replace(/[\f\n\r\v]+/g,"\n").split("\n");for(var i in s){this.processLine(s[i],i)}return this.r};e.prototype.processLine=function(e,t){var r=e.search("//");if(r!=-1){e=e.slice(0,r)}e=e.replace(/^\s+|\s+$/g,"");if(!(e.length>0)){return}var i=e.search(/<.*>/g);var a=null;if(i!=-1){a=e.slice(i).match(/([\w\.\-\+]+)/gi);e=e.slice(0,i)}var o=e.match(/([\w\.\+\[\]]+)/gi);if(!o||o.length<1){if(e.length>=3){console.log("Warning: bad line "+t+": "+e)}return}switch(o[0]){case"part":this.addHeader(o[1],Number(o[2]));break;case"endpart":if(!this.cur){throw"Unexpected endpart"}this.cur.data.position=0;this.cur=null;return;default:if(!this.cur){console.log("Warning: bad line "+t+": "+e+" (Outside of any part definition)");return}if(this.cur.name=="comment"){return}var n=s.map[o[0]];if(!n){throw"Bad opcode "+o[0]+" "+t+": "+e}this.emitOpcode(this.cur,n.opcode);var l=1;if(n.dest&&n.dest!="none"){if(!this.emitDest(this.cur,o[l++],n.dest)){throw"Bad destination register "+o[l-1]+" "+t+": "+e}}else{this.emitZeroDword(this.cur)}if(n.a&&n.a.format!="none"){if(!this.emitSource(this.cur,o[l++],n.a))throw"Bad source register "+o[l-1]+" "+t+": "+e}else{this.emitZeroQword(this.cur)}if(n.b&&n.b.format!="none"){if(n.b.format=="sampler"){if(!this.emitSampler(this.cur,o[l++],n.b,a)){throw"Bad sampler register "+o[l-1]+" "+t+": "+e}}else{if(!this.emitSource(this.cur,o[l++],n.b)){throw"Bad source register "+o[l-1]+" "+t+": "+e}}}else{this.emitZeroQword(this.cur)}break}};e.prototype.emitHeader=function(e){e.data.writeUnsignedByte(160);e.data.writeUnsignedInt(e.version);if(e.version>=16){e.data.writeUnsignedByte(0)}e.data.writeUnsignedByte(161);switch(e.name){case"fragment":e.data.writeUnsignedByte(1);break;case"vertex":e.data.writeUnsignedByte(0);break;case"cpu":e.data.writeUnsignedByte(2);break;default:e.data.writeUnsignedByte(255);break}};e.prototype.emitOpcode=function(e,t){e.data.writeUnsignedInt(t)};e.prototype.emitZeroDword=function(e){e.data.writeUnsignedInt(0)};e.prototype.emitZeroQword=function(e){e.data.writeUnsignedInt(0);e.data.writeUnsignedInt(0)};e.prototype.emitDest=function(e,t,r){var s=t.match(/([fov]?[tpocidavs])(\d*)(\.[xyzw]{1,4})?/i);if(!a.map[s[1]])return false;var i={num:s[2]?s[2]:0,code:a.map[s[1]].code,mask:this.stringToMask(s[3])};e.data.writeUnsignedShort(i.num);e.data.writeUnsignedByte(i.mask);e.data.writeUnsignedByte(i.code);return true};e.prototype.stringToMask=function(e){if(!e)return 15;var t=0;if(e.indexOf("x")!=-1)t|=1;if(e.indexOf("y")!=-1)t|=2;if(e.indexOf("z")!=-1)t|=4;if(e.indexOf("w")!=-1)t|=8;return t};e.prototype.stringToSwizzle=function(e){if(!e){return 228}var t={x:0,y:1,z:2,w:3};var r=0;if(e.charAt(0)!="."){throw"Missing . for swizzle"}if(e.length>1){r|=t[e.charAt(1)]}if(e.length>2){r|=t[e.charAt(2)]<<2}else{r|=(r&3)<<2}if(e.length>3){r|=t[e.charAt(3)]<<4}else{r|=(r&3<<2)<<2}if(e.length>4){r|=t[e.charAt(4)]<<6}else{r|=(r&3<<4)<<2}return r};e.prototype.emitSampler=function(e,t,r,s){var i=t.match(/fs(\d*)/i);if(!i||!i[1]){return false}e.data.writeUnsignedShort(parseInt(i[1]));e.data.writeUnsignedByte(0);e.data.writeUnsignedByte(0);var a=5;var n=0;for(var l=0;l<s.length;l++){var h=o.map[s[l].toLowerCase()];if(h){if((n>>h.shift&h.mask)!=0){console.log("Warning, duplicate sampler option")}n|=h.mask<<h.shift;a&=~(h.mask<<h.shift);a|=h.value<<h.shift}else{console.log("Warning, unknown sampler option: ",s[l])}}e.data.writeUnsignedInt(a);return true};e.prototype.emitSource=function(e,t,r){var s=t.match(/vc\[(v[tcai])(\d+)\.([xyzw])([\+\-]\d+)?\](\.[xyzw]{1,4})?/i);var i;if(s){if(!a.map[s[1]]){return false}var o={x:0,y:1,z:2,w:3};var n={num:s[2]|0,code:a.map[s[1]].code,swizzle:this.stringToSwizzle(s[5]),select:o[s[3]],offset:s[4]|0};e.data.writeUnsignedShort(n.num);e.data.writeByte(n.offset);e.data.writeUnsignedByte(n.swizzle);e.data.writeUnsignedByte(1);e.data.writeUnsignedByte(n.code);e.data.writeUnsignedByte(n.select);e.data.writeUnsignedByte(1<<7)}else{i=t.match(/([fov]?[tpocidavs])(\d*)(\.[xyzw]{1,4})?/i);if(!a.map[i[1]]){return false}var n={num:i[2]|0,code:a.map[i[1]].code,swizzle:this.stringToSwizzle(i[3])};e.data.writeUnsignedShort(n.num);e.data.writeUnsignedByte(0);e.data.writeUnsignedByte(n.swizzle);e.data.writeUnsignedByte(n.code);e.data.writeUnsignedByte(0);e.data.writeUnsignedByte(0);e.data.writeUnsignedByte(0)}return true};e.prototype.addHeader=function(e,t){if(!t){t=1}if(this.r[e]==undefined){this.r[e]=new i(e,t);this.emitHeader(this.r[e])}else if(this.r[e].version!=t){throw"Multiple versions for part "+e}this.cur=this.r[e]};return e}();t.exports=n},{"awayjs-stagegl/lib/aglsl/assembler/OpcodeMap":887,"awayjs-stagegl/lib/aglsl/assembler/Part":888,"awayjs-stagegl/lib/aglsl/assembler/RegMap":889,"awayjs-stagegl/lib/aglsl/assembler/SamplerMap":891}],884:[function(e,t,r){var s=function(){function e(){}return e}();t.exports=s},{}],885:[function(e,t,r){var s=function(){function e(){}return e}();t.exports=s},{}],886:[function(e,t,r){var s=e("awayjs-stagegl/lib/aglsl/assembler/Flags");var i=e("awayjs-stagegl/lib/aglsl/assembler/FS");var a=function(){function e(e,t,r,a,o,n,l,h,p,u){this.a=new i;this.b=new i;this.flags=new s;this.dest=e;this.a.format=t;this.a.size=r;this.b.format=a;this.b.size=o;this.opcode=n;this.flags.simple=l;this.flags.horizontal=h;this.flags.fragonly=p;this.flags.matrix=u}return e}();t.exports=a},{"awayjs-stagegl/lib/aglsl/assembler/FS":884,"awayjs-stagegl/lib/aglsl/assembler/Flags":885}],887:[function(e,t,r){var s=e("awayjs-stagegl/lib/aglsl/assembler/Opcode");var i=function(){function e(){}Object.defineProperty(e,"map",{get:function(){if(!e._map){e._map=new Array;e._map["mov"]=new s("vector","vector",4,"none",0,0,true,null,null,null);e._map["add"]=new s("vector","vector",4,"vector",4,1,true,null,null,null);e._map["sub"]=new s("vector","vector",4,"vector",4,2,true,null,null,null);e._map["mul"]=new s("vector","vector",4,"vector",4,3,true,null,null,null);e._map["div"]=new s("vector","vector",4,"vector",4,4,true,null,null,null);e._map["rcp"]=new s("vector","vector",4,"none",0,5,true,null,null,null);e._map["min"]=new s("vector","vector",4,"vector",4,6,true,null,null,null);e._map["max"]=new s("vector","vector",4,"vector",4,7,true,null,null,null);e._map["frc"]=new s("vector","vector",4,"none",0,8,true,null,null,null);e._map["sqt"]=new s("vector","vector",4,"none",0,9,true,null,null,null);e._map["rsq"]=new s("vector","vector",4,"none",0,10,true,null,null,null);e._map["pow"]=new s("vector","vector",4,"vector",4,11,true,null,null,null);e._map["log"]=new s("vector","vector",4,"none",0,12,true,null,null,null);e._map["exp"]=new s("vector","vector",4,"none",0,13,true,null,null,null);e._map["nrm"]=new s("vector","vector",4,"none",0,14,true,null,null,null);e._map["sin"]=new s("vector","vector",4,"none",0,15,true,null,null,null);e._map["cos"]=new s("vector","vector",4,"none",0,16,true,null,null,null);e._map["crs"]=new s("vector","vector",4,"vector",4,17,true,true,null,null);e._map["dp3"]=new s("vector","vector",4,"vector",4,18,true,true,null,null);e._map["dp4"]=new s("vector","vector",4,"vector",4,19,true,true,null,null);e._map["abs"]=new s("vector","vector",4,"none",0,20,true,null,null,null);e._map["neg"]=new s("vector","vector",4,"none",0,21,true,null,null,null);e._map["sat"]=new s("vector","vector",4,"none",0,22,true,null,null,null);e._map["ted"]=new s("vector","vector",4,"sampler",1,38,true,null,true,null);e._map["kil"]=new s("none","scalar",1,"none",0,39,true,null,true,null);e._map["tex"]=new s("vector","vector",4,"sampler",1,40,true,null,true,null);e._map["m33"]=new s("vector","matrix",3,"vector",3,23,true,null,null,true);e._map["m44"]=new s("vector","matrix",4,"vector",4,24,true,null,null,true);e._map["m43"]=new s("vector","matrix",3,"vector",4,25,true,null,null,true);e._map["sge"]=new s("vector","vector",4,"vector",4,41,true,null,null,null);e._map["slt"]=new s("vector","vector",4,"vector",4,42,true,null,null,null);e._map["sgn"]=new s("vector","vector",4,"vector",4,43,true,null,null,null);e._map["seq"]=new s("vector","vector",4,"vector",4,44,true,null,null,null);e._map["sne"]=new s("vector","vector",4,"vector",4,45,true,null,null,null)}return e._map},enumerable:true,configurable:true});return e}();t.exports=i},{"awayjs-stagegl/lib/aglsl/assembler/Opcode":886}],888:[function(e,t,r){var s=e("awayjs-core/lib/utils/ByteArray");var i=function(){function e(e,t){if(e===void 0){e=null}if(t===void 0){t=null}this.name="";this.version=0;this.name=e;this.version=t;this.data=new s}return e}();t.exports=i},{"awayjs-core/lib/utils/ByteArray":945}],889:[function(e,t,r){var s=function(){function e(e,t){this.code=e;this.desc=t}return e}();var i=function(){function e(){}Object.defineProperty(e,"map",{get:function(){if(!e._map){e._map=new Array;e._map["va"]=new s(0,"vertex attribute");e._map["fc"]=new s(1,"fragment constant");e._map["vc"]=new s(1,"vertex constant");e._map["ft"]=new s(2,"fragment temporary");e._map["vt"]=new s(2,"vertex temporary");e._map["vo"]=new s(3,"vertex output");e._map["op"]=new s(3,"vertex output");e._map["fd"]=new s(3,"fragment depth output");e._map["fo"]=new s(3,"fragment output");e._map["oc"]=new s(3,"fragment output");e._map["v"]=new s(4,"varying");e._map["vi"]=new s(4,"varying output");e._map["fi"]=new s(4,"varying input");e._map["fs"]=new s(5,"sampler")}return e._map},enumerable:true,configurable:true});return e}();t.exports=i},{}],890:[function(e,t,r){var s=function(){function e(e,t,r){this.shift=e;this.mask=t;this.value=r}return e}();t.exports=s},{}],891:[function(e,t,r){var s=e("awayjs-stagegl/lib/aglsl/assembler/Sampler");var i=function(){function e(){}Object.defineProperty(e,"map",{get:function(){if(!e._map){e._map=new Array;e._map["rgba"]=new s(8,15,0);e._map["rg"]=new s(8,15,5);e._map["r"]=new s(8,15,4);e._map["compressed"]=new s(8,15,1);e._map["compressed_alpha"]=new s(8,15,2);e._map["dxt1"]=new s(8,15,1);e._map["dxt5"]=new s(8,15,2);e._map["2d"]=new s(12,15,0);e._map["cube"]=new s(12,15,1);e._map["3d"]=new s(12,15,2);e._map["centroid"]=new s(16,1,1);e._map["ignoresampler"]=new s(16,4,4);e._map["clamp"]=new s(20,15,0);e._map["repeat"]=new s(20,15,1);e._map["wrap"]=new s(20,15,1);e._map["nomip"]=new s(24,15,0);e._map["mipnone"]=new s(24,15,0);e._map["mipnearest"]=new s(24,15,1);e._map["miplinear"]=new s(24,15,2);e._map["nearest"]=new s(28,15,0);e._map["linear"]=new s(28,15,1)}return e._map},enumerable:true,configurable:true});return e}();t.exports=i},{"awayjs-stagegl/lib/aglsl/assembler/Sampler":890}],892:[function(e,t,r){t.exports=e(337)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-stagegl/lib/base/ContextGLBlendFactor.js":337}],893:[function(e,t,r){var s=function(){function e(){}e.COLOR=1;e.DEPTH=2;e.STENCIL=4;e.ALL=e.COLOR|e.DEPTH|e.STENCIL;return e}();t.exports=s},{}],894:[function(e,t,r){t.exports=e(338)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-stagegl/lib/base/ContextGLCompareMode.js":338}],895:[function(e,t,r){t.exports=e(344)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-stagegl/lib/base/ContextGLMipFilter.js":344}],896:[function(e,t,r){t.exports=e(340)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-stagegl/lib/base/ContextGLProgramType.js":340}],897:[function(e,t,r){t.exports=e(345)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-stagegl/lib/base/ContextGLTextureFilter.js":345}],898:[function(e,t,r){t.exports=e(341)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-stagegl/lib/base/ContextGLTextureFormat.js":341}],899:[function(e,t,r){t.exports=e(342)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-renderergl/node_modules/awayjs-stagegl/lib/base/ContextGLTriangleFace.js":342}],900:[function(e,t,r){var s=function(){function e(){}e.BYTES_4="bytes4";e.FLOAT_1="float1";e.FLOAT_2="float2";e.FLOAT_3="float3";e.FLOAT_4="float4";return e}();t.exports=s},{}],901:[function(e,t,r){t.exports=e(346)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-methodmaterials/node_modules/awayjs-stagegl/lib/base/ContextGLWrapMode.js":346}],902:[function(e,t,r){var s=e("awayjs-stagegl/lib/swfobject");var i=e("awayjs-stagegl/lib/aglsl/Sampler");var a=e("awayjs-stagegl/lib/base/ContextGLClearMask");var o=e("awayjs-stagegl/lib/base/ContextGLProgramType");var n=e("awayjs-stagegl/lib/base/CubeTextureFlash");var l=e("awayjs-stagegl/lib/base/IndexBufferFlash");var h=e("awayjs-stagegl/lib/base/OpCodes");var p=e("awayjs-stagegl/lib/base/ProgramFlash");var u=e("awayjs-stagegl/lib/base/TextureFlash");var c=e("awayjs-stagegl/lib/base/VertexBufferFlash");var d=function(){function e(t,r,i){this._cmdStream="";this._resources=new Array;var a="11.0.0";var o={id:t.id};var n={quality:"high",bgcolor:"#ffffff",allowscriptaccess:"sameDomain",allowfullscreen:"true",wmode:"direct"};this._errorCheckingEnabled=false;this._iDriverInfo="Unknown";var l={salign:"tl",id:t.id,name:t["name"]};this._oldCanvas=t.cloneNode();this._oldParent=t.parentNode;var h=this;e.contexts[t.id]=this;function p(e){if(!e.success)return;h._container=e.ref;h._iCallback=r}s.embedSWF("libs/molehill_js_flashbridge.swf",t.id,String(t.width),String(t.height),a,"",o,n,l,p)}Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"driverInfo",{get:function(){return this._iDriverInfo},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"errorCheckingEnabled",{get:function(){return this._errorCheckingEnabled},set:function(e){if(this._errorCheckingEnabled==e)return;this._errorCheckingEnabled=e;this.addStream(String.fromCharCode(h.enableErrorChecking,e?h.trueValue:h.falseValue));this.execute()},enumerable:true,configurable:true});e.prototype._iAddResource=function(e){this._resources.push(e)};e.prototype._iRemoveResource=function(e){this._resources.splice(this._resources.indexOf(e))};e.prototype.createTexture=function(e,t,r,s,i){if(i===void 0){i=0}return new u(this,e,t,r,s)};e.prototype.createCubeTexture=function(e,t,r,s){if(s===void 0){s=0}return new n(this,e,t,r)};e.prototype.setTextureAt=function(t,r){if(r){this.addStream(String.fromCharCode(h.setTextureAt)+t+","+r.id+",")
}else{this.addStream(String.fromCharCode(h.clearTextureAt)+t.toString()+",")}if(e.debug)this.execute()};e.prototype.setSamplerStateAt=function(e,t,r,s){};e.prototype.setStencilActions=function(t,r,s,i,a){if(t===void 0){t="frontAndBack"}if(r===void 0){r="always"}if(s===void 0){s="keep"}if(i===void 0){i="keep"}if(a===void 0){a="keep"}this.addStream(String.fromCharCode(h.setStencilActions)+t+"$"+r+"$"+s+"$"+i+"$"+a+"$");if(e.debug)this.execute()};e.prototype.setStencilReferenceValue=function(t,r,s){if(r===void 0){r=255}if(s===void 0){s=255}this.addStream(String.fromCharCode(h.setStencilReferenceValue,t+h.intMask,r+h.intMask,s+h.intMask));if(e.debug)this.execute()};e.prototype.setCulling=function(t,r){if(r===void 0){r="leftHanded"}this.addStream(String.fromCharCode(h.setCulling)+t+"$");if(e.debug)this.execute()};e.prototype.drawTriangles=function(t,r,s){if(r===void 0){r=0}if(s===void 0){s=-1}r=r||0;if(!s||s<0)s=t.numIndices/3;this.addStream(String.fromCharCode(h.drawTriangles,t.id+h.intMask)+r+","+s+",");if(e.debug)this.execute()};e.prototype.setProgramConstantsFromMatrix=function(e,t,r,s){if(s===void 0){s=false}var i=r.rawData;if(s){this.setProgramConstantsFromArray(e,t,[i[0],i[4],i[8],i[12]],1);this.setProgramConstantsFromArray(e,t+1,[i[1],i[5],i[9],i[13]],1);this.setProgramConstantsFromArray(e,t+2,[i[2],i[6],i[10],i[14]],1);this.setProgramConstantsFromArray(e,t+3,[i[3],i[7],i[11],i[15]],1)}else{this.setProgramConstantsFromArray(e,t,[i[0],i[1],i[2],i[3]],1);this.setProgramConstantsFromArray(e,t+1,[i[4],i[5],i[6],i[7]],1);this.setProgramConstantsFromArray(e,t+2,[i[8],i[9],i[10],i[11]],1);this.setProgramConstantsFromArray(e,t+3,[i[12],i[13],i[14],i[15]],1)}};e.prototype.setProgramConstantsFromArray=function(t,r,s,i){if(i===void 0){i=-1}var a;var n=t==o.VERTEX?h.trueValue:h.falseValue;for(var l=0;l<i;l++){a=l*4;this.addStream(String.fromCharCode(h.setProgramConstant,n,r+l+h.intMask)+s[a]+","+s[a+1]+","+s[a+2]+","+s[a+3]+",");if(e.debug)this.execute()}};e.prototype.setProgram=function(t){this.addStream(String.fromCharCode(h.setProgram,t.id+h.intMask));if(e.debug)this.execute()};e.prototype.present=function(){this.addStream(String.fromCharCode(h.present));this.execute()};e.prototype.clear=function(t,r,s,i,o,n,l){if(t===void 0){t=0}if(r===void 0){r=0}if(s===void 0){s=0}if(i===void 0){i=1}if(o===void 0){o=1}if(n===void 0){n=0}if(l===void 0){l=a.ALL}this.addStream(String.fromCharCode(h.clear)+t+","+r+","+s+","+i+","+o+","+n+","+l+",");if(e.debug)this.execute()};e.prototype.createProgram=function(){return new p(this)};e.prototype.createVertexBuffer=function(e,t){return new c(this,e,t)};e.prototype.createIndexBuffer=function(e){return new l(this,e)};e.prototype.configureBackBuffer=function(e,t,r,s){if(s===void 0){s=true}this._width=e;this._height=t;this.addStream(String.fromCharCode(h.configureBackBuffer)+e+","+t+",")};e.prototype.drawToBitmapData=function(e){};e.prototype.setVertexBufferAt=function(t,r,s,i){if(s===void 0){s=0}if(i===void 0){i=null}if(r){this.addStream(String.fromCharCode(h.setVertexBufferAt,t+h.intMask)+r.id+","+s+","+i+"$")}else{this.addStream(String.fromCharCode(h.clearVertexBufferAt,t+h.intMask))}if(e.debug)this.execute()};e.prototype.setColorMask=function(t,r,s,i){this.addStream(String.fromCharCode(h.setColorMask,t?h.trueValue:h.falseValue,r?h.trueValue:h.falseValue,s?h.trueValue:h.falseValue,i?h.trueValue:h.falseValue));if(e.debug)this.execute()};e.prototype.setBlendFactors=function(t,r){this.addStream(String.fromCharCode(h.setBlendFactors)+t+"$"+r+"$");if(e.debug)this.execute()};e.prototype.setRenderToTexture=function(t,r,s,i){if(r===void 0){r=false}if(s===void 0){s=0}if(i===void 0){i=0}if(t===null||t===undefined){this.addStream(String.fromCharCode(h.clearRenderToTexture))}else{this.addStream(String.fromCharCode(h.setRenderToTexture,r?h.trueValue:h.falseValue)+t.id+","+(s||0)+",")}if(e.debug)this.execute()};e.prototype.setRenderToBackBuffer=function(){this.addStream(String.fromCharCode(h.clearRenderToTexture));if(e.debug)this.execute()};e.prototype.setScissorRectangle=function(t){if(t){this.addStream(String.fromCharCode(h.setScissorRect)+t.x+","+t.y+","+t.width+","+t.height+",")}else{this.addStream(String.fromCharCode(h.clearScissorRect))}if(e.debug)this.execute()};e.prototype.setDepthTest=function(t,r){this.addStream(String.fromCharCode(h.setDepthTest,t?h.trueValue:h.falseValue)+r+"$");if(e.debug)this.execute()};e.prototype.dispose=function(){if(this._container==null)return;console.log("Context3D dispose, releasing "+this._resources.length+" resources.");while(this._resources.length)this._resources[0].dispose();if(this._container){this.addStream(String.fromCharCode(h.disposeContext));this.execute();s.removeSWF(this._oldCanvas.id);if(this._oldCanvas&&this._oldParent){this._oldParent.appendChild(this._oldCanvas);this._oldParent=null}this._container=null}this._oldCanvas=null};e.prototype.addStream=function(e){this._cmdStream+=e};e.prototype.execute=function(){if(e.logStream)console.log(this._cmdStream);var t=this._container["CallFunction"]('<invoke name="execStage3dOpStream" returntype="javascript"><arguments><string>'+this._cmdStream+"</string></arguments></invoke>");if(Number(t)<=-3)throw"Exec stream failed";this._cmdStream="";return Number(t)};e.contexts=new Object;e.maxvertexconstants=128;e.maxfragconstants=28;e.maxtemp=8;e.maxstreams=8;e.maxtextures=8;e.defaultsampler=new i;e.debug=false;e.logStream=false;return e}();function f(e,t){var r=d.contexts[e];if(r._iCallback){r._iDriverInfo=t;var s=window.setTimeout(function(){window.clearTimeout(s);try{r._iCallback(r)}catch(e){console.log("Callback failed during flash initialization with '"+e.toString()+"'")}},1)}}t.exports=d},{"awayjs-stagegl/lib/aglsl/Sampler":881,"awayjs-stagegl/lib/base/ContextGLClearMask":893,"awayjs-stagegl/lib/base/ContextGLProgramType":896,"awayjs-stagegl/lib/base/CubeTextureFlash":904,"awayjs-stagegl/lib/base/IndexBufferFlash":906,"awayjs-stagegl/lib/base/OpCodes":908,"awayjs-stagegl/lib/base/ProgramFlash":909,"awayjs-stagegl/lib/base/TextureFlash":915,"awayjs-stagegl/lib/base/VertexBufferFlash":917,"awayjs-stagegl/lib/swfobject":928}],903:[function(e,t,r){var s=e("awayjs-core/lib/geom/Rectangle");var i=e("awayjs-core/lib/utils/ByteArray");var a=e("awayjs-stagegl/lib/base/ContextGLBlendFactor");var o=e("awayjs-stagegl/lib/base/ContextGLClearMask");var n=e("awayjs-stagegl/lib/base/ContextGLCompareMode");var l=e("awayjs-stagegl/lib/base/ContextGLMipFilter");var h=e("awayjs-stagegl/lib/base/ContextGLProgramType");var p=e("awayjs-stagegl/lib/base/ContextGLTextureFilter");var u=e("awayjs-stagegl/lib/base/ContextGLTriangleFace");var c=e("awayjs-stagegl/lib/base/ContextGLVertexBufferFormat");var d=e("awayjs-stagegl/lib/base/ContextGLWrapMode");var f=e("awayjs-stagegl/lib/base/CubeTextureWebGL");var y=e("awayjs-stagegl/lib/base/IndexBufferWebGL");var m=e("awayjs-stagegl/lib/base/ProgramWebGL");var _=e("awayjs-stagegl/lib/base/TextureWebGL");var b=e("awayjs-stagegl/lib/base/SamplerState");var g=e("awayjs-stagegl/lib/base/VertexBufferWebGL");var w=function(){function e(t){this._blendFactorDictionary=new Object;this._depthTestDictionary=new Object;this._textureIndexDictionary=new Array(8);this._textureTypeDictionary=new Object;this._wrapDictionary=new Object;this._filterDictionary=new Object;this._mipmapFilterDictionary=new Object;this._uniformLocationNameDictionary=new Object;this._vertexBufferDimensionDictionary=new Object;this._indexBufferList=new Array;this._vertexBufferList=new Array;this._textureList=new Array;this._programList=new Array;this._samplerStates=new Array(8);this._container=t;try{this._gl=t.getContext("experimental-webgl",{premultipliedAlpha:false,alpha:false});if(!this._gl)this._gl=t.getContext("webgl",{premultipliedAlpha:false,alpha:false})}catch(r){}if(this._gl){this._blendFactorDictionary[a.ONE]=this._gl.ONE;this._blendFactorDictionary[a.DESTINATION_ALPHA]=this._gl.DST_ALPHA;this._blendFactorDictionary[a.DESTINATION_COLOR]=this._gl.DST_COLOR;this._blendFactorDictionary[a.ONE]=this._gl.ONE;this._blendFactorDictionary[a.ONE_MINUS_DESTINATION_ALPHA]=this._gl.ONE_MINUS_DST_ALPHA;this._blendFactorDictionary[a.ONE_MINUS_DESTINATION_COLOR]=this._gl.ONE_MINUS_DST_COLOR;this._blendFactorDictionary[a.ONE_MINUS_SOURCE_ALPHA]=this._gl.ONE_MINUS_SRC_ALPHA;this._blendFactorDictionary[a.ONE_MINUS_SOURCE_COLOR]=this._gl.ONE_MINUS_SRC_COLOR;this._blendFactorDictionary[a.SOURCE_ALPHA]=this._gl.SRC_ALPHA;this._blendFactorDictionary[a.SOURCE_COLOR]=this._gl.SRC_COLOR;this._blendFactorDictionary[a.ZERO]=this._gl.ZERO;this._depthTestDictionary[n.ALWAYS]=this._gl.ALWAYS;this._depthTestDictionary[n.EQUAL]=this._gl.EQUAL;this._depthTestDictionary[n.GREATER]=this._gl.GREATER;this._depthTestDictionary[n.GREATER_EQUAL]=this._gl.GEQUAL;this._depthTestDictionary[n.LESS]=this._gl.LESS;this._depthTestDictionary[n.LESS_EQUAL]=this._gl.LEQUAL;this._depthTestDictionary[n.NEVER]=this._gl.NEVER;this._depthTestDictionary[n.NOT_EQUAL]=this._gl.NOTEQUAL;this._textureIndexDictionary[0]=this._gl.TEXTURE0;this._textureIndexDictionary[1]=this._gl.TEXTURE1;this._textureIndexDictionary[2]=this._gl.TEXTURE2;this._textureIndexDictionary[3]=this._gl.TEXTURE3;this._textureIndexDictionary[4]=this._gl.TEXTURE4;this._textureIndexDictionary[5]=this._gl.TEXTURE5;this._textureIndexDictionary[6]=this._gl.TEXTURE6;this._textureIndexDictionary[7]=this._gl.TEXTURE7;this._textureTypeDictionary["texture2d"]=this._gl.TEXTURE_2D;this._textureTypeDictionary["textureCube"]=this._gl.TEXTURE_CUBE_MAP;this._wrapDictionary[d.REPEAT]=this._gl.REPEAT;this._wrapDictionary[d.CLAMP]=this._gl.CLAMP_TO_EDGE;this._filterDictionary[p.LINEAR]=this._gl.LINEAR;this._filterDictionary[p.NEAREST]=this._gl.NEAREST;this._mipmapFilterDictionary[p.LINEAR]=new Object;this._mipmapFilterDictionary[p.LINEAR][l.MIPNEAREST]=this._gl.LINEAR_MIPMAP_NEAREST;this._mipmapFilterDictionary[p.LINEAR][l.MIPLINEAR]=this._gl.LINEAR_MIPMAP_LINEAR;this._mipmapFilterDictionary[p.LINEAR][l.MIPNONE]=this._gl.LINEAR;this._mipmapFilterDictionary[p.NEAREST]=new Object;this._mipmapFilterDictionary[p.NEAREST][l.MIPNEAREST]=this._gl.NEAREST_MIPMAP_NEAREST;this._mipmapFilterDictionary[p.NEAREST][l.MIPLINEAR]=this._gl.NEAREST_MIPMAP_LINEAR;this._mipmapFilterDictionary[p.NEAREST][l.MIPNONE]=this._gl.NEAREST;this._uniformLocationNameDictionary[h.VERTEX]="vc";this._uniformLocationNameDictionary[h.FRAGMENT]="fc";this._vertexBufferDimensionDictionary[c.FLOAT_1]=1;this._vertexBufferDimensionDictionary[c.FLOAT_2]=2;this._vertexBufferDimensionDictionary[c.FLOAT_3]=3;this._vertexBufferDimensionDictionary[c.FLOAT_4]=4;this._vertexBufferDimensionDictionary[c.BYTES_4]=4}else{alert("WebGL is not available.")}for(var s=0;s<e.MAX_SAMPLERS;++s){this._samplerStates[s]=new b;this._samplerStates[s].wrap=this._gl.REPEAT;this._samplerStates[s].filter=this._gl.LINEAR;this._samplerStates[s].mipfilter=this._gl.LINEAR}}Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:true,configurable:true});e.prototype.gl=function(){return this._gl};e.prototype.clear=function(e,t,r,s,i,a,n){if(e===void 0){e=0}if(t===void 0){t=0}if(r===void 0){r=0}if(s===void 0){s=1}if(i===void 0){i=1}if(a===void 0){a=0}if(n===void 0){n=o.ALL}if(!this._drawing){this.updateBlendStatus();this._drawing=true}var l=0;if(n&o.COLOR)l|=this._gl.COLOR_BUFFER_BIT;if(n&o.STENCIL)l|=this._gl.STENCIL_BUFFER_BIT;if(n&o.DEPTH)l|=this._gl.DEPTH_BUFFER_BIT;this._gl.clearColor(e,t,r,s);this._gl.clearDepth(i);this._gl.clearStencil(a);this._gl.clear(l)};e.prototype.configureBackBuffer=function(e,t,r,s){if(s===void 0){s=true}this._width=e;this._height=t;if(s){this._gl.enable(this._gl.STENCIL_TEST);this._gl.enable(this._gl.DEPTH_TEST)}this._gl.viewport["width"]=e;this._gl.viewport["height"]=t;this._gl.viewport(0,0,e,t)};e.prototype.createCubeTexture=function(e,t,r,s){if(s===void 0){s=0}var i=new f(this._gl,e);this._textureList.push(i);return i};e.prototype.createIndexBuffer=function(e){var t=new y(this._gl,e);this._indexBufferList.push(t);return t};e.prototype.createProgram=function(){var e=new m(this._gl);this._programList.push(e);return e};e.prototype.createTexture=function(e,t,r,s,i){if(i===void 0){i=0}var a=new _(this._gl,e,t);this._textureList.push(a);return a};e.prototype.createVertexBuffer=function(e,t){var r=new g(this._gl,e,t);this._vertexBufferList.push(r);return r};e.prototype.dispose=function(){var e;for(e=0;e<this._indexBufferList.length;++e)this._indexBufferList[e].dispose();this._indexBufferList=null;for(e=0;e<this._vertexBufferList.length;++e)this._vertexBufferList[e].dispose();this._vertexBufferList=null;for(e=0;e<this._textureList.length;++e)this._textureList[e].dispose();this._textureList=null;for(e=0;e<this._programList.length;++e)this._programList[e].dispose();for(e=0;e<this._samplerStates.length;++e)this._samplerStates[e]=null;this._programList=null};e.prototype.drawToBitmapData=function(e){var t=new ArrayBuffer(e.width*e.height*4);this._gl.readPixels(0,0,e.width,e.height,this._gl.RGBA,this._gl.UNSIGNED_BYTE,new Uint8Array(t));var r=new i;r.setArrayBuffer(t);e.setPixels(new s(0,0,e.width,e.height),r)};e.prototype.drawTriangles=function(e,t,r){if(t===void 0){t=0}if(r===void 0){r=-1}if(!this._drawing)throw"Need to clear before drawing if the buffer has not been cleared since the last present() call.";this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,e.glBuffer);this._gl.drawElements(this._gl.TRIANGLES,r==-1?e.numIndices:r*3,this._gl.UNSIGNED_SHORT,t)};e.prototype.present=function(){this._drawing=false};e.prototype.setBlendFactors=function(e,t){this._blendEnabled=true;this._blendSourceFactor=this._blendFactorDictionary[e];this._blendDestinationFactor=this._blendFactorDictionary[t];this.updateBlendStatus()};e.prototype.setColorMask=function(e,t,r,s){this._gl.colorMask(e,t,r,s)};e.prototype.setCulling=function(e,t){if(t===void 0){t="leftHanded"}if(e==u.NONE){this._gl.disable(this._gl.CULL_FACE)}else{this._gl.enable(this._gl.CULL_FACE);switch(e){case u.BACK:this._gl.cullFace(t=="leftHanded"?this._gl.FRONT:this._gl.BACK);break;case u.FRONT:this._gl.cullFace(t=="leftHanded"?this._gl.BACK:this._gl.FRONT);break;case u.FRONT_AND_BACK:this._gl.cullFace(this._gl.FRONT_AND_BACK);break;default:throw"Unknown ContextGLTriangleFace type."}}};e.prototype.setDepthTest=function(e,t){this._gl.depthFunc(this._depthTestDictionary[t]);this._gl.depthMask(e)};e.prototype.setProgram=function(e){this._currentProgram=e;e.focusProgram()};e.prototype.setProgramConstantsFromMatrix=function(e,t,r,s){if(s===void 0){s=false}var i=r.rawData;if(s){this.setProgramConstantsFromArray(e,t,[i[0],i[4],i[8],i[12]],1);this.setProgramConstantsFromArray(e,t+1,[i[1],i[5],i[9],i[13]],1);this.setProgramConstantsFromArray(e,t+2,[i[2],i[6],i[10],i[14]],1);this.setProgramConstantsFromArray(e,t+3,[i[3],i[7],i[11],i[15]],1)}else{this.setProgramConstantsFromArray(e,t,[i[0],i[1],i[2],i[3]],1);this.setProgramConstantsFromArray(e,t+1,[i[4],i[5],i[6],i[7]],1);this.setProgramConstantsFromArray(e,t+2,[i[8],i[9],i[10],i[11]],1);this.setProgramConstantsFromArray(e,t+3,[i[12],i[13],i[14],i[15]],1)}};e.prototype.setProgramConstantsFromArray=function(e,t,r,s){if(s===void 0){s=-1}var i=this._uniformLocationNameDictionary[e];var a;for(var o=0;o<s;o++){a=o*4;this._gl.uniform4f(this._gl.getUniformLocation(this._currentProgram.glProgram,i+(t+o)),r[a],r[a+1],r[a+2],r[a+3])}};e.prototype.setScissorRectangle=function(e){if(!e){this._gl.disable(this._gl.SCISSOR_TEST);return}this._gl.enable(this._gl.SCISSOR_TEST);this._gl.scissor(e.x,e.y,e.width,e.height)};e.prototype.setTextureAt=function(e,t){var r=this._samplerStates[e];if(this._activeTexture!=e&&(t||r.type)){this._activeTexture=e;this._gl.activeTexture(this._textureIndexDictionary[e])}if(!t){if(r.type){this._gl.bindTexture(r.type,null);r.type=null}return}var s=this._textureTypeDictionary[t.textureType];r.type=s;this._gl.bindTexture(s,t.glTexture);this._gl.uniform1i(this._gl.getUniformLocation(this._currentProgram.glProgram,"fs"+e),e);this._gl.texParameteri(s,this._gl.TEXTURE_WRAP_S,r.wrap);this._gl.texParameteri(s,this._gl.TEXTURE_WRAP_T,r.wrap);this._gl.texParameteri(s,this._gl.TEXTURE_MAG_FILTER,r.filter);this._gl.texParameteri(s,this._gl.TEXTURE_MIN_FILTER,r.mipfilter)};e.prototype.setSamplerStateAt=function(t,r,s,i){if(0<=t&&t<e.MAX_SAMPLERS){this._samplerStates[t].wrap=this._wrapDictionary[r];this._samplerStates[t].filter=this._filterDictionary[s];this._samplerStates[t].mipfilter=this._mipmapFilterDictionary[s][i]}else{throw"Sampler is out of bounds."}};e.prototype.setVertexBufferAt=function(e,t,r,s){if(r===void 0){r=0}if(s===void 0){s=null}var i=this._currentProgram?this._gl.getAttribLocation(this._currentProgram.glProgram,"va"+e):-1;if(!t){if(i>-1)this._gl.disableVertexAttribArray(i);return}this._gl.bindBuffer(this._gl.ARRAY_BUFFER,t.glBuffer);this._gl.enableVertexAttribArray(i);this._gl.vertexAttribPointer(i,this._vertexBufferDimensionDictionary[s],this._gl.FLOAT,false,t.data32PerVertex*4,r*4)};e.prototype.setRenderToTexture=function(e,t,r,s){if(t===void 0){t=false}if(r===void 0){r=0}if(s===void 0){s=0}var i=e;var a=i.frameBuffer;this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,a);if(t){this._gl.enable(this._gl.STENCIL_TEST);this._gl.enable(this._gl.DEPTH_TEST)}this._gl.viewport(0,0,i.width,i.height)};e.prototype.setRenderToBackBuffer=function(){this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null)};e.prototype.updateBlendStatus=function(){if(this._blendEnabled){this._gl.enable(this._gl.BLEND);this._gl.blendEquation(this._gl.FUNC_ADD);this._gl.blendFunc(this._blendSourceFactor,this._blendDestinationFactor)}else{this._gl.disable(this._gl.BLEND)}};e.MAX_SAMPLERS=8;e.modulo=0;return e}();t.exports=w},{"awayjs-core/lib/geom/Rectangle":938,"awayjs-core/lib/utils/ByteArray":945,"awayjs-stagegl/lib/base/ContextGLBlendFactor":892,"awayjs-stagegl/lib/base/ContextGLClearMask":893,"awayjs-stagegl/lib/base/ContextGLCompareMode":894,"awayjs-stagegl/lib/base/ContextGLMipFilter":895,"awayjs-stagegl/lib/base/ContextGLProgramType":896,"awayjs-stagegl/lib/base/ContextGLTextureFilter":897,"awayjs-stagegl/lib/base/ContextGLTriangleFace":899,"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat":900,"awayjs-stagegl/lib/base/ContextGLWrapMode":901,"awayjs-stagegl/lib/base/CubeTextureWebGL":905,"awayjs-stagegl/lib/base/IndexBufferWebGL":907,"awayjs-stagegl/lib/base/ProgramWebGL":910,"awayjs-stagegl/lib/base/SamplerState":912,"awayjs-stagegl/lib/base/TextureWebGL":916,"awayjs-stagegl/lib/base/VertexBufferWebGL":918}],904:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/base/BitmapData");var a=e("awayjs-core/lib/utils/ByteArrayBase");var o=e("awayjs-stagegl/lib/base/OpCodes");var n=e("awayjs-stagegl/lib/base/ResourceBaseFlash");var l=function(e){s(t,e);function t(t,r,s,i,a){if(a===void 0){a=false}e.call(this);this._context=t;this._size=r;this._context.addStream(String.fromCharCode(o.initCubeTexture,i?o.trueValue:o.falseValue)+r+","+a+","+s+"$");this._pId=this._context.execute();this._context._iAddResource(this)}Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:true,configurable:true});t.prototype.dispose=function(){this._context.addStream(String.fromCharCode(o.disposeCubeTexture)+this._pId.toString()+",");this._context.execute();this._context._iRemoveResource(this);this._context=null};t.prototype.uploadFromData=function(e,t,r){if(r===void 0){r=0}if(e instanceof i){e=e.imageData.data}else if(e instanceof HTMLImageElement){var s=document.createElement("canvas");var n=e.width;var l=e.height;s.width=n;s.height=l;var h=s.getContext("2d");h.drawImage(e,0,0);e=h.getImageData(0,0,n,l).data}var p=0;var u=a.internalGetBase64String(e.length,function(){return e[p++]},null);this._context.addStream(String.fromCharCode(o.uploadBytesCubeTexture)+this._pId+","+r+","+t+","+(this.size>>r)+","+u+"%");this._context.execute()};t.prototype.uploadCompressedTextureFromByteArray=function(e,t,r){if(r===void 0){r=false}};return t}(n);t.exports=l},{"awayjs-core/lib/base/BitmapData":929,"awayjs-core/lib/utils/ByteArrayBase":946,"awayjs-stagegl/lib/base/OpCodes":908,"awayjs-stagegl/lib/base/ResourceBaseFlash":911}],905:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/base/BitmapData");var a=e("awayjs-stagegl/lib/base/TextureBaseWebGL");var o=function(e){s(t,e);function t(t,r){e.call(this,t);this._textureSelectorDictionary=new Array(6);this.textureType="textureCube";this._size=r;this._texture=this._gl.createTexture();this._textureSelectorDictionary[0]=t.TEXTURE_CUBE_MAP_POSITIVE_X;this._textureSelectorDictionary[1]=t.TEXTURE_CUBE_MAP_NEGATIVE_X;this._textureSelectorDictionary[2]=t.TEXTURE_CUBE_MAP_POSITIVE_Y;this._textureSelectorDictionary[3]=t.TEXTURE_CUBE_MAP_NEGATIVE_Y;this._textureSelectorDictionary[4]=t.TEXTURE_CUBE_MAP_POSITIVE_Z;this._textureSelectorDictionary[5]=t.TEXTURE_CUBE_MAP_NEGATIVE_Z}t.prototype.dispose=function(){this._gl.deleteTexture(this._texture)};t.prototype.uploadFromData=function(e,t,r){if(r===void 0){r=0}if(e instanceof i)e=e.imageData;this._gl.bindTexture(this._gl.TEXTURE_CUBE_MAP,this._texture);this._gl.texImage2D(this._textureSelectorDictionary[t],r,this._gl.RGBA,this._gl.RGBA,this._gl.UNSIGNED_BYTE,e);this._gl.bindTexture(this._gl.TEXTURE_CUBE_MAP,null)};t.prototype.uploadCompressedTextureFromByteArray=function(e,t,r){if(r===void 0){r=false}};Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"glTexture",{get:function(){return this._texture},enumerable:true,configurable:true});return t}(a);t.exports=o},{"awayjs-core/lib/base/BitmapData":929,"awayjs-stagegl/lib/base/TextureBaseWebGL":914}],906:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-stagegl/lib/base/OpCodes");var a=e("awayjs-stagegl/lib/base/ResourceBaseFlash");var o=function(e){s(t,e);function t(t,r){e.call(this);this._context=t;this._numIndices=r;this._context.addStream(String.fromCharCode(i.initIndexBuffer,r+i.intMask));this._pId=this._context.execute();this._context._iAddResource(this)}t.prototype.uploadFromArray=function(e,t,r){this._context.addStream(String.fromCharCode(i.uploadArrayIndexBuffer,this._pId+i.intMask)+e.join()+"#"+t+","+r+",");this._context.execute()};t.prototype.dispose=function(){this._context.addStream(String.fromCharCode(i.disposeIndexBuffer,this._pId+i.intMask));this._context.execute();this._context._iRemoveResource(this);this._context=null};Object.defineProperty(t.prototype,"numIndices",{get:function(){return this._numIndices},enumerable:true,configurable:true});return t}(a);t.exports=o},{"awayjs-stagegl/lib/base/OpCodes":908,"awayjs-stagegl/lib/base/ResourceBaseFlash":911}],907:[function(e,t,r){var s=function(){function e(e,t){this._gl=e;this._buffer=this._gl.createBuffer();this._numIndices=t}e.prototype.uploadFromArray=function(e,t,r){this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,this._buffer);this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(e),this._gl.STATIC_DRAW)};e.prototype.dispose=function(){this._gl.deleteBuffer(this._buffer)};Object.defineProperty(e.prototype,"numIndices",{get:function(){return this._numIndices},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"glBuffer",{get:function(){return this._buffer},enumerable:true,configurable:true});return e}();t.exports=s},{}],908:[function(e,t,r){var s=function(){function e(){}e.trueValue=32;e.falseValue=33;e.intMask=63;e.drawTriangles=41;e.setProgramConstant=42;e.setProgram=43;e.present=44;e.clear=45;e.initProgram=46;e.initVertexBuffer=47;e.initIndexBuffer=48;e.configureBackBuffer=49;e.uploadArrayIndexBuffer=50;e.uploadArrayVertexBuffer=51;e.uploadAGALBytesProgram=52;e.setVertexBufferAt=53;e.uploadBytesIndexBuffer=54;e.uploadBytesVertexBuffer=55;e.setColorMask=56;e.setDepthTest=57;e.disposeProgram=58;e.disposeContext=59;e.disposeVertexBuffer=61;e.disposeIndexBuffer=63;e.initTexture=64;e.setTextureAt=65;e.uploadBytesTexture=66;e.disposeTexture=67;e.setCulling=68;e.setScissorRect=69;e.clearScissorRect=70;e.setBlendFactors=71;e.setRenderToTexture=72;e.clearTextureAt=73;e.clearVertexBufferAt=74;e.setStencilActions=75;e.setStencilReferenceValue=76;e.initCubeTexture=77;e.disposeCubeTexture=78;e.uploadBytesCubeTexture=79;e.clearRenderToTexture=80;e.enableErrorChecking=81;return e}();t.exports=s},{}],909:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-stagegl/lib/base/ContextStage3D");var a=e("awayjs-stagegl/lib/base/OpCodes");var o=e("awayjs-stagegl/lib/base/ResourceBaseFlash");var n=function(e){s(t,e);function t(t){e.call(this);this._context=t;this._context.addStream(String.fromCharCode(a.initProgram));this._pId=this._context.execute();this._context._iAddResource(this)}t.prototype.upload=function(e,t){this._context.addStream(String.fromCharCode(a.uploadAGALBytesProgram,this._pId+a.intMask)+e.readBase64String(e.length)+"%"+t.readBase64String(t.length)+"%");if(i.debug)this._context.execute()};t.prototype.dispose=function(){this._context.addStream(String.fromCharCode(a.disposeProgram,this._pId+a.intMask));this._context.execute();this._context._iRemoveResource(this);this._context=null};return t}(o);t.exports=n},{"awayjs-stagegl/lib/base/ContextStage3D":902,"awayjs-stagegl/lib/base/OpCodes":908,"awayjs-stagegl/lib/base/ResourceBaseFlash":911}],910:[function(e,t,r){var s=e("awayjs-stagegl/lib/aglsl/AGALTokenizer");var i=e("awayjs-stagegl/lib/aglsl/AGLSLParser");var a=function(){function e(e){this._gl=e;this._program=this._gl.createProgram()}e.prototype.upload=function(t,r){var s=e._aglslParser.parse(e._tokenizer.decribeAGALByteArray(t));var i=e._aglslParser.parse(e._tokenizer.decribeAGALByteArray(r));this._vertexShader=this._gl.createShader(this._gl.VERTEX_SHADER);this._fragmentShader=this._gl.createShader(this._gl.FRAGMENT_SHADER);this._gl.shaderSource(this._vertexShader,s);this._gl.compileShader(this._vertexShader);if(!this._gl.getShaderParameter(this._vertexShader,this._gl.COMPILE_STATUS)){throw new Error(this._gl.getShaderInfoLog(this._vertexShader));return}this._gl.shaderSource(this._fragmentShader,i);this._gl.compileShader(this._fragmentShader);if(!this._gl.getShaderParameter(this._fragmentShader,this._gl.COMPILE_STATUS)){throw new Error(this._gl.getShaderInfoLog(this._fragmentShader));return}this._gl.attachShader(this._program,this._vertexShader);this._gl.attachShader(this._program,this._fragmentShader);this._gl.linkProgram(this._program);if(!this._gl.getProgramParameter(this._program,this._gl.LINK_STATUS)){throw new Error(this._gl.getProgramInfoLog(this._program))}};e.prototype.dispose=function(){this._gl.deleteProgram(this._program)};e.prototype.focusProgram=function(){this._gl.useProgram(this._program)};Object.defineProperty(e.prototype,"glProgram",{get:function(){return this._program},enumerable:true,configurable:true});e._tokenizer=new s;e._aglslParser=new i;return e}();t.exports=a},{"awayjs-stagegl/lib/aglsl/AGALTokenizer":874,"awayjs-stagegl/lib/aglsl/AGLSLParser":875}],911:[function(e,t,r){var s=function(){function e(){}Object.defineProperty(e.prototype,"id",{get:function(){return this._pId},enumerable:true,configurable:true});e.prototype.dispose=function(){};return e}();t.exports=s},{}],912:[function(e,t,r){var s=function(){function e(){}return e}();t.exports=s},{}],913:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/geom/Rectangle");var a=e("awayjs-core/lib/events/Event");var o=e("awayjs-core/lib/events/EventDispatcher");var n=e("awayjs-core/lib/textures/RenderTexture");var l=e("awayjs-core/lib/utils/CSS");var h=e("awayjs-display/lib/display/ContextMode");var p=e("awayjs-display/lib/events/StageEvent");var u=e("awayjs-stagegl/lib/base/ContextGLTextureFormat");var c=e("awayjs-stagegl/lib/base/ContextStage3D");var d=e("awayjs-stagegl/lib/base/ContextWebGL");var f=e("awayjs-stagegl/lib/pool/TextureDataPool");var y=e("awayjs-stagegl/lib/pool/ProgramDataPool");var m=function(e){s(t,e);function t(t,r,s,a,o){if(a===void 0){a=false}if(o===void 0){o="baseline"}e.call(this);this._programData=new Array;this._x=0;this._y=0;this._stageIndex=-1;this._antiAlias=0;this._renderTarget=null;this._renderSurfaceSelector=0;this._initialised=false;this._texturePool=new f;this._programDataPool=new y(this);this._container=t;this._stageIndex=r;this._stageManager=s;this._viewPort=new i;this._enableDepthAndStencil=true;l.setElementX(this._container,0);l.setElementY(this._container,0);this.visible=true}t.prototype.getProgramData=function(e){return this._programDataPool.getItem(e)};t.prototype.setRenderTarget=function(e,t,r){if(t===void 0){t=false}if(r===void 0){r=0}if(this._renderTarget===e&&r==this._renderSurfaceSelector&&this._enableDepthAndStencil==t)return;this._renderTarget=e;this._renderSurfaceSelector=r;this._enableDepthAndStencil=t;if(e instanceof n){this._context.setRenderToTexture(this.getRenderTexture(e),t,this._antiAlias,r)}else{this._context.setRenderToBackBuffer();this.configureBackBuffer(this._width,this._height,this._antiAlias,this._enableDepthAndStencil)}};t.prototype.getRenderTexture=function(e){var t=this._texturePool.getItem(e);if(!t.texture)t.texture=this._context.createTexture(e.width,e.height,u.BGRA,true);return t.texture};t.prototype.activateBuffer=function(e,t,r,s){if(!t.contexts[this._stageIndex])t.contexts[this._stageIndex]=this._context;if(!t.buffers[this._stageIndex]){t.buffers[this._stageIndex]=this._context.createVertexBuffer(t.data.length/t.dataPerVertex,t.dataPerVertex);t.invalid[this._stageIndex]=true}if(t.invalid[this._stageIndex]){t.buffers[this._stageIndex].uploadFromArray(t.data,0,t.data.length/t.dataPerVertex);t.invalid[this._stageIndex]=false}this._context.setVertexBufferAt(e,t.buffers[this._stageIndex],r,s)};t.prototype.disposeVertexData=function(e){e.buffers[this._stageIndex].dispose();e.buffers[this._stageIndex]=null};t.prototype.activateRenderTexture=function(e,t){this._context.setTextureAt(e,this.getRenderTexture(t))};t.prototype.activateTexture=function(e,t){var r=this._texturePool.getItem(t);if(!r.texture){r.texture=this._context.createTexture(t.width,t.height,u.BGRA,true);r.invalid=true}if(r.invalid){r.invalid=false;if(t.generateMipmaps){var s=t._iGetMipmapData();var i=s.length;for(var a=0;a<i;a++)r.texture.uploadFromData(s[a],a)}else{r.texture.uploadFromData(t._iGetTextureData(),0)}}this._context.setTextureAt(e,r.texture)};t.prototype.activateCubeTexture=function(e,t){var r=this._texturePool.getItem(t);if(!r.texture){r.texture=this._context.createCubeTexture(t.size,u.BGRA,false);r.invalid=true}if(r.invalid){r.invalid=false;for(var s=0;s<6;++s){if(t.generateMipmaps){var i=t._iGetMipmapData(s);var a=i.length;for(var o=0;o<a;o++)r.texture.uploadFromData(i[o],s,o)}else{r.texture.uploadFromData(t._iGetTextureData(s),s,0)}}}this._context.setTextureAt(e,r.texture)};t.prototype.getIndexBuffer=function(e){if(!e.contexts[this._stageIndex])e.contexts[this._stageIndex]=this._context;if(!e.buffers[this._stageIndex]){e.buffers[this._stageIndex]=this._context.createIndexBuffer(e.data.length);e.invalid[this._stageIndex]=true}if(e.invalid[this._stageIndex]){e.buffers[this._stageIndex].uploadFromArray(e.data,0,e.data.length);e.invalid[this._stageIndex]=false}return e.buffers[this._stageIndex]};t.prototype.disposeIndexData=function(e){e.buffers[this._stageIndex].dispose();e.buffers[this._stageIndex]=null};t.prototype.requestContext=function(e,t,r){var s=this;
if(e===void 0){e=false}if(t===void 0){t="baseline"}if(r===void 0){r="auto"}if(this._usesSoftwareRendering!=null)this._usesSoftwareRendering=e;this._profile=t;try{if(r==h.FLASH)new c(this._container,function(e){return s._callback(e)});else this._context=new d(this._container)}catch(i){try{if(r==h.AUTO)new c(this._container,function(e){return s._callback(e)});else this.dispatchEvent(new a(a.ERROR))}catch(i){this.dispatchEvent(new a(a.ERROR))}}if(this._context)this._callback(this._context)};Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){if(this._width==e)return;l.setElementWidth(this._container,e);this._width=this._viewPort.width=e;this._backBufferDirty=true;this.notifyViewportUpdated()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){if(this._height==e)return;l.setElementHeight(this._container,e);this._height=this._viewPort.height=e;this._backBufferDirty=true;this.notifyViewportUpdated()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){if(this._x==e)return;l.setElementX(this._container,e);this._x=this._viewPort.x=e;this.notifyViewportUpdated()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){if(this._y==e)return;l.setElementY(this._container,e);this._y=this._viewPort.y=e;this.notifyViewportUpdated()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"visible",{get:function(){return l.getElementVisibility(this._container)},set:function(e){l.setElementVisibility(this._container,e)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"container",{get:function(){return this._container},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"context",{get:function(){return this._context},enumerable:true,configurable:true});t.prototype.notifyViewportUpdated=function(){if(this._viewportDirty)return;this._viewportDirty=true;this._viewportUpdated=new p(p.VIEWPORT_UPDATED);this.dispatchEvent(this._viewportUpdated)};t.prototype.notifyEnterFrame=function(){if(!this._enterFrame)this._enterFrame=new a(a.ENTER_FRAME);this.dispatchEvent(this._enterFrame)};t.prototype.notifyExitFrame=function(){if(!this._exitFrame)this._exitFrame=new a(a.EXIT_FRAME);this.dispatchEvent(this._exitFrame)};Object.defineProperty(t.prototype,"profile",{get:function(){return this._profile},enumerable:true,configurable:true});t.prototype.dispose=function(){this._stageManager.iRemoveStage(this);this.freeContext();this._stageManager=null;this._stageIndex=-1};t.prototype.configureBackBuffer=function(e,t,r,s){this.width=e;this.height=t;this._antiAlias=r;this._enableDepthAndStencil=s;if(this._context)this._context.configureBackBuffer(e,t,r,s)};Object.defineProperty(t.prototype,"enableDepthAndStencil",{get:function(){return this._enableDepthAndStencil},set:function(e){this._enableDepthAndStencil=e;this._backBufferDirty=true},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"renderTarget",{get:function(){return this._renderTarget},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"renderSurfaceSelector",{get:function(){return this._renderSurfaceSelector},enumerable:true,configurable:true});t.prototype.clear=function(){if(!this._context)return;if(this._backBufferDirty){this.configureBackBuffer(this._width,this._height,this._antiAlias,this._enableDepthAndStencil);this._backBufferDirty=false}this._context.clear((this._color&4278190080)>>>24,(this._color&16711680)>>>16,(this._color&65280)>>>8,this._color&255);this._bufferClear=true};t.prototype.addEventListener=function(t,r){e.prototype.addEventListener.call(this,t,r)};t.prototype.removeEventListener=function(t,r){e.prototype.removeEventListener.call(this,t,r)};Object.defineProperty(t.prototype,"scissorRect",{get:function(){return this._scissorRect},set:function(e){this._scissorRect=e;this._context.setScissorRectangle(this._scissorRect)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"stageIndex",{get:function(){return this._stageIndex},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"usesSoftwareRendering",{get:function(){return this._usesSoftwareRendering},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"antiAlias",{get:function(){return this._antiAlias},set:function(e){this._antiAlias=e;this._backBufferDirty=true},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"viewPort",{get:function(){this._viewportDirty=false;return this._viewPort},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(e){this._color=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bufferClear",{get:function(){return this._bufferClear},set:function(e){this._bufferClear=e},enumerable:true,configurable:true});t.prototype.registerProgram=function(e){var t=0;while(this._programData[t]!=null)t++;this._programData[t]=e;e.id=t};t.prototype.unRegisterProgram=function(e){this._programData[e.id]=null;e.id=-1};t.prototype.freeContext=function(){if(this._context){this._context.dispose();this.dispatchEvent(new p(p.CONTEXT_DISPOSED))}this._context=null;this._initialised=false};t.prototype.onEnterFrame=function(e){if(!this._context)return;this.clear();this.notifyEnterFrame();if(!this._context)this._context.present();this.notifyExitFrame()};t.prototype.recoverFromDisposal=function(){if(!this._context)return false;return true};t.prototype._callback=function(e){this._context=e;this._container=this._context.container;if(this._width&&this._height)this._context.configureBackBuffer(this._width,this._height,this._antiAlias,this._enableDepthAndStencil);this.dispatchEvent(new p(this._initialised?p.CONTEXT_RECREATED:p.CONTEXT_CREATED));this._initialised=true};return t}(o);t.exports=m},{"awayjs-core/lib/events/Event":934,"awayjs-core/lib/events/EventDispatcher":935,"awayjs-core/lib/geom/Rectangle":938,"awayjs-core/lib/textures/RenderTexture":942,"awayjs-core/lib/utils/CSS":947,"awayjs-display/lib/display/ContextMode":951,"awayjs-display/lib/events/StageEvent":952,"awayjs-stagegl/lib/base/ContextGLTextureFormat":898,"awayjs-stagegl/lib/base/ContextStage3D":902,"awayjs-stagegl/lib/base/ContextWebGL":903,"awayjs-stagegl/lib/pool/ProgramDataPool":923,"awayjs-stagegl/lib/pool/TextureDataPool":925}],914:[function(e,t,r){var s=e("awayjs-core/lib/errors/AbstractMethodError");var i=function(){function e(e){this.textureType="";this._gl=e}e.prototype.dispose=function(){throw"Abstract method must be overridden."};Object.defineProperty(e.prototype,"glTexture",{get:function(){throw new s},enumerable:true,configurable:true});return e}();t.exports=i},{"awayjs-core/lib/errors/AbstractMethodError":930}],915:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/base/BitmapData");var a=e("awayjs-core/lib/utils/ByteArrayBase");var o=e("awayjs-stagegl/lib/base/OpCodes");var n=e("awayjs-stagegl/lib/base/ResourceBaseFlash");var l=function(e){s(t,e);function t(t,r,s,i,a,n){if(n===void 0){n=false}e.call(this);this._context=t;this._width=r;this._height=s;this._context.addStream(String.fromCharCode(o.initTexture,a?o.trueValue:o.falseValue)+r+","+s+","+n+","+i+"$");this._pId=this._context.execute();this._context._iAddResource(this)}Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:true,configurable:true});t.prototype.dispose=function(){this._context.addStream(String.fromCharCode(o.disposeTexture)+this._pId.toString()+",");this._context.execute();this._context._iRemoveResource(this);this._context=null};t.prototype.uploadFromData=function(e,t){if(t===void 0){t=0}if(e instanceof i){e=e.imageData.data}else if(e instanceof HTMLImageElement){var r=document.createElement("canvas");var s=e.width;var n=e.height;r.width=s;r.height=n;var l=r.getContext("2d");l.drawImage(e,0,0);e=l.getImageData(0,0,s,n).data}var h=0;var p=a.internalGetBase64String(e.length,function(){return e[h++]},null);this._context.addStream(String.fromCharCode(o.uploadBytesTexture)+this._pId+","+t+","+(this._width>>t)+","+(this._height>>t)+","+p+"%");this._context.execute()};return t}(n);t.exports=l},{"awayjs-core/lib/base/BitmapData":929,"awayjs-core/lib/utils/ByteArrayBase":946,"awayjs-stagegl/lib/base/OpCodes":908,"awayjs-stagegl/lib/base/ResourceBaseFlash":911}],916:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/base/BitmapData");var a=e("awayjs-stagegl/lib/base/TextureBaseWebGL");var o=function(e){s(t,e);function t(t,r,s){e.call(this,t);this.textureType="texture2d";this._width=r;this._height=s;this._glTexture=this._gl.createTexture()}t.prototype.dispose=function(){this._gl.deleteTexture(this._glTexture)};Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"frameBuffer",{get:function(){if(!this._frameBuffer){this._frameBuffer=this._gl.createFramebuffer();this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._frameBuffer);this._gl.bindTexture(this._gl.TEXTURE_2D,this._glTexture);this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,this._width,this._height,0,this._gl.RGBA,this._gl.UNSIGNED_BYTE,null);var e=this._gl.createRenderbuffer();this._gl.bindRenderbuffer(this._gl.RENDERBUFFER,e);this._gl.renderbufferStorage(this._gl.RENDERBUFFER,this._gl.DEPTH_COMPONENT16,this._width,this._height);this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._glTexture,0);this._gl.framebufferRenderbuffer(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.RENDERBUFFER,e);this._gl.bindTexture(this._gl.TEXTURE_2D,null);this._gl.bindRenderbuffer(this._gl.RENDERBUFFER,null);this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null)}return this._frameBuffer},enumerable:true,configurable:true});t.prototype.uploadFromData=function(e,t){if(t===void 0){t=0}if(e instanceof i)e=e.imageData;this._gl.bindTexture(this._gl.TEXTURE_2D,this._glTexture);this._gl.texImage2D(this._gl.TEXTURE_2D,t,this._gl.RGBA,this._gl.RGBA,this._gl.UNSIGNED_BYTE,e);this._gl.bindTexture(this._gl.TEXTURE_2D,null)};t.prototype.uploadCompressedTextureFromByteArray=function(e,t,r){if(r===void 0){r=false}var s=this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc")};Object.defineProperty(t.prototype,"glTexture",{get:function(){return this._glTexture},enumerable:true,configurable:true});t.prototype.generateMipmaps=function(){};return t}(a);t.exports=o},{"awayjs-core/lib/base/BitmapData":929,"awayjs-stagegl/lib/base/TextureBaseWebGL":914}],917:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-stagegl/lib/base/OpCodes");var a=e("awayjs-stagegl/lib/base/ResourceBaseFlash");var o=function(e){s(t,e);function t(t,r,s){e.call(this);this._context=t;this._numVertices=r;this._data32PerVertex=s;this._context.addStream(String.fromCharCode(i.initVertexBuffer,s+i.intMask)+r.toString()+",");this._pId=this._context.execute();this._context._iAddResource(this)}t.prototype.uploadFromArray=function(e,t,r){this._context.addStream(String.fromCharCode(i.uploadArrayVertexBuffer,this._pId+i.intMask)+e.join()+"#"+[t,r].join()+",");this._context.execute()};Object.defineProperty(t.prototype,"numVertices",{get:function(){return this._numVertices},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"data32PerVertex",{get:function(){return this._data32PerVertex},enumerable:true,configurable:true});t.prototype.dispose=function(){this._context.addStream(String.fromCharCode(i.disposeVertexBuffer,this._pId+i.intMask));this._context.execute();this._context._iRemoveResource(this);this._context=null};return t}(a);t.exports=o},{"awayjs-stagegl/lib/base/OpCodes":908,"awayjs-stagegl/lib/base/ResourceBaseFlash":911}],918:[function(e,t,r){var s=function(){function e(e,t,r){this._gl=e;this._buffer=this._gl.createBuffer();this._numVertices=t;this._data32PerVertex=r}e.prototype.uploadFromArray=function(e,t,r){this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._buffer);this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array(e),this._gl.STATIC_DRAW)};Object.defineProperty(e.prototype,"numVertices",{get:function(){return this._numVertices},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"data32PerVertex",{get:function(){return this._data32PerVertex},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"glBuffer",{get:function(){return this._buffer},enumerable:true,configurable:true});e.prototype.dispose=function(){this._gl.deleteBuffer(this._buffer)};return e}();t.exports=s},{}],919:[function(e,t,r){var s=this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function s(){this.constructor=e}s.prototype=t.prototype;e.prototype=new s};var i=e("awayjs-core/lib/events/EventDispatcher");var a=e("awayjs-core/lib/errors/ArgumentError");var o=e("awayjs-display/lib/events/StageEvent");var n=e("awayjs-stagegl/lib/base/Stage");var l=function(e){s(t,e);function t(){var r=this;e.call(this);this._stages=new Array(t.STAGE_MAX_QUANTITY);this._onContextCreatedDelegate=function(e){return r.onContextCreated(e)}}t.getInstance=function(){if(this._instance==null)this._instance=new t;return this._instance};t.prototype.getStageAt=function(e,r,s,i){if(r===void 0){r=false}if(s===void 0){s="baseline"}if(i===void 0){i="auto"}if(e<0||e>=t.STAGE_MAX_QUANTITY)throw new a("Index is out of bounds [0.."+t.STAGE_MAX_QUANTITY+"]");if(!this._stages[e]){t._numStages++;var l=document.createElement("canvas");l.id="stage"+e;document.body.appendChild(l);var h=this._stages[e]=new n(l,e,this,r,s);h.addEventListener(o.CONTEXT_CREATED,this._onContextCreatedDelegate);h.requestContext(r,s,i)}return h};t.prototype.iRemoveStage=function(e){t._numStages--;e.removeEventListener(o.CONTEXT_CREATED,this._onContextCreatedDelegate);this._stages[e.stageIndex]=null};t.prototype.getFreeStage=function(e,t,r){if(e===void 0){e=false}if(t===void 0){t="baseline"}if(r===void 0){r="auto"}var s=0;var i=this._stages.length;while(s<i){if(!this._stages[s])return this.getStageAt(s,e,t,r);++s}return null};Object.defineProperty(t.prototype,"hasFreeStage",{get:function(){return t._numStages<t.STAGE_MAX_QUANTITY?true:false},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numSlotsFree",{get:function(){return t.STAGE_MAX_QUANTITY-t._numStages},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numSlotsUsed",{get:function(){return t._numStages},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numSlotsTotal",{get:function(){return this._stages.length},enumerable:true,configurable:true});t.prototype.onContextCreated=function(e){};t.STAGE_MAX_QUANTITY=8;t._numStages=0;return t}(i);t.exports=l},{"awayjs-core/lib/errors/ArgumentError":931,"awayjs-core/lib/events/EventDispatcher":935,"awayjs-display/lib/events/StageEvent":952,"awayjs-stagegl/lib/base/Stage":913}],920:[function(e,t,r){var s=function(){function e(e){this._dataDirty=true;this.invalid=new Array(8);this.contexts=new Array(8);this.buffers=new Array(8);this.level=e}e.prototype.updateData=function(t,r,s){if(this._dataDirty){this._dataDirty=false;if(r.length<e.LIMIT_INDICES&&s<e.LIMIT_VERTS){this.indexMappings=null;this.originalIndices=null;this.setData(r);this.offset=r.length}else{var i;var a;var o;var n;var l;var h=new Array;this.indexMappings=new Array(r.length);this.originalIndices=new Array;i=this.indexMappings.length;while(i--)this.indexMappings[i]=-1;var p;var u;o=0;a=r.length;i=t;l=0;while(i<a&&o+3<e.LIMIT_INDICES&&l+3<e.LIMIT_VERTS){for(n=0;n<3;n++){p=r[i+n];if(this.indexMappings[p]>=0){u=this.indexMappings[p]}else{u=l++;this.indexMappings[p]=u;this.originalIndices.push(p)}h[o+n]=u}o+=3;i+=3}this.setData(h);this.offset=i}}};e.prototype.invalidateData=function(){this._dataDirty=true};e.prototype.dispose=function(){for(var e=0;e<8;++e){if(this.contexts[e]){this.buffers[e].dispose();this.buffers[e]=null;this.contexts[e]=null}}};e.prototype.disposeBuffers=function(){for(var e=0;e<8;++e){if(this.buffers[e]){this.buffers[e].dispose();this.buffers[e]=null}}};e.prototype.invalidateBuffers=function(){for(var e=0;e<8;++e)this.invalid[e]=true};e.prototype.setData=function(e){if(this.data&&this.data.length!=e.length)this.disposeBuffers();else this.invalidateBuffers();this.data=e};e.LIMIT_VERTS=65535;e.LIMIT_INDICES=16777215;return e}();t.exports=s},{}],921:[function(e,t,r){var s=e("awayjs-stagegl/lib/pool/IndexData");var i=function(){function e(){}e.getItem=function(t,r,i){var a=e._pool[t.id]||(e._pool[t.id]=new Array);var o=a[r]||(a[r]=new s(r));o.updateData(i,t.indices,t.numVertices);return o};e.disposeItem=function(e,t){var r=this._pool[e];r[t].dispose();r[t]=null};e.prototype.disposeData=function(t){var r=e._pool[t];var s=r.length;for(var i=0;i<s;i++){r[i].dispose();r[i]=null}e._pool[t]=null};e._pool=new Object;return e}();t.exports=i},{"awayjs-stagegl/lib/pool/IndexData":920}],922:[function(e,t,r){var s=function(){function e(e,t,r){this.usages=0;this._pool=e;this.stage=t;this._key=r;this.stage.registerProgram(this)}e.prototype.dispose=function(){this.usages--;if(!this.usages){this._pool.disposeItem(this._key);this.stage.unRegisterProgram(this);if(this.program)this.program.dispose()}this.program=null};e.PROGRAMDATA_ID_COUNT=0;return e}();t.exports=s},{}],923:[function(e,t,r){var s=e("awayjs-stagegl/lib/pool/ProgramData");var i=function(){function e(e){this._pool=new Object;this._stage=e}e.prototype.getItem=function(e){return this._pool[e]||(this._pool[e]=new s(this,this._stage,e))};e.prototype.disposeItem=function(e){this._pool[e]=null};return e}();t.exports=i},{"awayjs-stagegl/lib/pool/ProgramData":922}],924:[function(e,t,r){var s=function(){function e(e,t){this._pool=e;this.textureProxy=t}e.prototype.dispose=function(){this._pool.disposeItem(this.textureProxy);this.texture.dispose();this.texture=null};e.prototype.invalidate=function(){this.invalid=true};return e}();t.exports=s},{}],925:[function(e,t,r){var s=e("awayjs-stagegl/lib/pool/TextureData");var i=function(){function e(){this._pool=new Object}e.prototype.getItem=function(e){return this._pool[e.id]||(this._pool[e.id]=e._iAddTextureData(new s(this,e)))};e.prototype.disposeItem=function(e){e._iRemoveTextureData(this._pool[e.id]);this._pool[e.id]=null};return e}();t.exports=i},{"awayjs-stagegl/lib/pool/TextureData":924}],926:[function(e,t,r){t.exports=e(756)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-parsers/node_modules/awayjs-renderergl/node_modules/awayjs-stagegl/lib/pool/VertexData.js":756,"awayjs-display/lib/base/SubGeometryBase":950,"awayjs-display/lib/events/SubGeometryEvent":953}],927:[function(e,t,r){t.exports=e(757)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-parsers/node_modules/awayjs-renderergl/node_modules/awayjs-stagegl/lib/pool/VertexDataPool.js":757,"awayjs-display/lib/base/SubGeometryBase":950,"awayjs-stagegl/lib/pool/VertexData":926}],928:[function(e,t,r){var s=function(){var e="undefined",t="object",r="Shockwave Flash",i="ShockwaveFlash.ShockwaveFlash",a="application/x-shockwave-flash",o="SWFObjectExprInst",n="onreadystatechange",l=window,h=document,p=navigator,u=false,c=[S],d=[],f=[],y=[],m,_,b,g,w=false,v=false,j,x,P=true,D=function(){var s=typeof h.getElementById!=e&&typeof h.getElementsByTagName!=e&&typeof h.createElement!=e,o=p.userAgent.toLowerCase(),n=p.platform.toLowerCase(),c=n?/win/.test(n):/win/.test(o),d=n?/mac/.test(n):/mac/.test(o),f=/webkit/.test(o)?parseFloat(o.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,y=!+"1",m=[0,0,0],_=null;if(typeof p.plugins!=e&&typeof p.plugins[r]==t){_=p.plugins[r].description;if(_&&!(typeof p.mimeTypes!=e&&p.mimeTypes[a]&&!p.mimeTypes[a].enabledPlugin)){u=true;y=false;_=_.replace(/^.*\s+(\S+\s+\S+$)/,"$1");m[0]=parseInt(_.replace(/^(.*)\..*$/,"$1"),10);m[1]=parseInt(_.replace(/^.*\.(.*)\s.*$/,"$1"),10);m[2]=/[a-zA-Z]/.test(_)?parseInt(_.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else if(typeof l.ActiveXObject!=e){try{var b=new ActiveXObject(i);if(b){_=b.GetVariable("$version");if(_){y=true;_=_.split(" ")[1].split(",");m=[parseInt(_[0],10),parseInt(_[1],10),parseInt(_[2],10)]}}}catch(g){}}return{w3:s,pv:m,wk:f,ie:y,win:c,mac:d}}(),T=function(){if(!D.w3){return}if(typeof h.readyState!=e&&h.readyState=="complete"||typeof h.readyState==e&&(h.getElementsByTagName("body")[0]||h.body)){A()}if(!w){if(typeof h.addEventListener!=e){h.addEventListener("DOMContentLoaded",A,false)}if(D.ie&&D.win){h.attachEvent(n,function(){if(h.readyState=="complete"){h.detachEvent(n,arguments.callee);A()}});if(l==top){(function(){if(w){return}try{h.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}A()})()}}if(D.wk){(function(){if(w){return}if(!/loaded|complete/.test(h.readyState)){setTimeout(arguments.callee,0);return}A()})()}E(A)}}();function A(){if(w){return}try{var e=h.getElementsByTagName("body")[0].appendChild(W("span"));e.parentNode.removeChild(e)}catch(t){return}w=true;var r=c.length;for(var s=0;s<r;s++){c[s]()}}function C(e){if(w){e()}else{c[c.length]=e}}function E(t){if(typeof l.addEventListener!=e){l.addEventListener("load",t,false)}else if(typeof h.addEventListener!=e){h.addEventListener("load",t,false)}else if(typeof l.attachEvent!=e){z(l,"onload",t)}else if(typeof l.onload=="function"){var r=l.onload;l.onload=function(){r();t()}}else{l.onload=t}}function S(){if(u){M()}else{O()}}function M(){var r=h.getElementsByTagName("body")[0];var s=W(t);s.setAttribute("type",a);var i=r.appendChild(s);if(i){var o=0;(function(){if(typeof i.GetVariable!=e){var t=i.GetVariable("$version");if(t){t=t.split(" ")[1].split(",");D.pv=[parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10)]}}else if(o<10){o++;setTimeout(arguments.callee,10);return}r.removeChild(s);i=null;O()})()}else{O()}}function O(){var t=d.length;if(t>0){for(var r=0;r<t;r++){var s=d[r].id;var i=d[r].callbackFn;var a={success:false,id:s};if(D.pv[0]>0){var o=G(s);if(o){if(H(d[r].swfVersion)&&!(D.wk&&D.wk<312)){Y(s,true);if(i){a.success=true;a.ref=R(s);i(a)}}else if(d[r].expressInstall&&I()){var n={};n.data=d[r].expressInstall;n.width=o.getAttribute("width")||"0";n.height=o.getAttribute("height")||"0";if(o.getAttribute("class")){n.styleclass=o.getAttribute("class")}if(o.getAttribute("align")){n.align=o.getAttribute("align")}var l={};var h=o.getElementsByTagName("param");var p=h.length;for(var u=0;u<p;u++){if(h[u].getAttribute("name").toLowerCase()!="movie"){l[h[u].getAttribute("name")]=h[u].getAttribute("value")}}U(n,l,s,i)}else{L(o);if(i){i(a)}}}}else{Y(s,true);if(i){var c=R(s);if(c&&typeof c.SetVariable!=e){a.success=true;a.ref=c}i(a)}}}}}function R(r){var s=null;var i=G(r);if(i&&i.nodeName=="OBJECT"){if(typeof i.SetVariable!=e){s=i}else{var a=i.getElementsByTagName(t)[0];if(a){s=a}}}return s}function I(){return!v&&H("6.0.65")&&(D.win||D.mac)&&!(D.wk&&D.wk<312)}function U(t,r,s,i){v=true;b=i||null;g={success:false,id:s};var a=G(s);if(a){if(a.nodeName=="OBJECT"){m=B(a);_=null}else{m=a;_=s}t.id=o;if(typeof t.width==e||!/%$/.test(t.width)&&parseInt(t.width,10)<310){t.width="310"}if(typeof t.height==e||!/%$/.test(t.height)&&parseInt(t.height,10)<137){t.height="137"}h.title=h.title.slice(0,47)+" - Flash Player Installation";var n=D.ie&&D.win?"ActiveX":"PlugIn",l="MMredirectURL="+encodeURI(window.location).toString().replace(/&/g,"%26")+"&MMplayerType="+n+"&MMdoctitle="+h.title;if(typeof r.flashvars!=e){r.flashvars+="&"+l}else{r.flashvars=l}if(D.ie&&D.win&&a.readyState!=4){var p=W("div");s+="SWFObjectNew";p.setAttribute("id",s);a.parentNode.insertBefore(p,a);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}N(t,r,s)}}function L(e){if(D.ie&&D.win&&e.readyState!=4){var t=W("div");e.parentNode.insertBefore(t,e);t.parentNode.replaceChild(B(e),t);e.style.display="none";(function(){if(e.readyState==4){e.parentNode.removeChild(e)}else{setTimeout(arguments.callee,10)}})()}else{e.parentNode.replaceChild(B(e),e)}}function B(e){var r=W("div");if(D.win&&D.ie){r.innerHTML=e.innerHTML}else{var s=e.getElementsByTagName(t)[0];if(s){var i=s.childNodes;if(i){var a=i.length;for(var o=0;o<a;o++){if(!(i[o].nodeType==1&&i[o].nodeName=="PARAM")&&!(i[o].nodeType==8)){r.appendChild(i[o].cloneNode(true))}}}}}return r}function N(r,s,i){var o,n=G(i);if(D.wk&&D.wk<312){return o}if(n){if(typeof r.id==e){r.id=i}if(D.ie&&D.win){var l="";for(var h in r){if(r[h]!=Object.prototype[h]){if(h.toLowerCase()=="data"){s.movie=r[h]}else if(h.toLowerCase()=="styleclass"){l+=' class="'+r[h]+'"'}else if(h.toLowerCase()!="classid"){l+=" "+h+'="'+r[h]+'"'}}}var p="";for(var u in s){if(s[u]!=Object.prototype[u]){p+='<param name="'+u+'" value="'+s[u]+'" />'}}n.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+l+">"+p+"</object>";f[f.length]=r.id;o=G(r.id)}else{var c=W(t);c.setAttribute("type",a);for(var d in r){if(r[d]!=Object.prototype[d]){if(d.toLowerCase()=="styleclass"){c.setAttribute("class",r[d])}else if(d.toLowerCase()!="classid"){c.setAttribute(d,r[d])}}}for(var y in s){if(s[y]!=Object.prototype[y]&&y.toLowerCase()!="movie"){F(c,y,s[y])}}n.parentNode.replaceChild(c,n);o=c}}return o}function F(e,t,r){var s=W("param");s.setAttribute("name",t);s.setAttribute("value",r);e.appendChild(s)}function V(e){var t=G(e);if(t&&t.nodeName=="OBJECT"){if(D.ie&&D.win){t.style.display="none";(function(){if(t.readyState==4){k(e)}else{setTimeout(arguments.callee,10)}})()}else{t.parentNode.removeChild(t)}}}function k(e){var t=G(e);if(t){for(var r in t){if(typeof t[r]=="function"){t[r]=null}}t.parentNode.removeChild(t)}}function G(e){var t=null;try{t=h.getElementById(e)}catch(r){}return t}function W(e){return h.createElement(e)}function z(e,t,r){e.attachEvent(t,r);y[y.length]=[e,t,r]}function H(e){var t=D.pv,r=e.split(".");r[0]=parseInt(r[0],10);r[1]=parseInt(r[1],10)||0;r[2]=parseInt(r[2],10)||0;return t[0]>r[0]||t[0]==r[0]&&t[1]>r[1]||t[0]==r[0]&&t[1]==r[1]&&t[2]>=r[2]?true:false}function X(r,s,i,a){if(D.ie&&D.mac){return}var o=h.getElementsByTagName("head")[0];if(!o){return}var n=i&&typeof i=="string"?i:"screen";if(a){j=null;x=null}if(!j||x!=n){var l=W("style");l.setAttribute("type","text/css");l.setAttribute("media",n);j=o.appendChild(l);if(D.ie&&D.win&&typeof h.styleSheets!=e&&h.styleSheets.length>0){j=h.styleSheets[h.styleSheets.length-1]}x=n}if(D.ie&&D.win){if(j&&typeof j.addRule==t){j.addRule(r,s)}}else{if(j&&typeof h.createTextNode!=e){j.appendChild(h.createTextNode(r+" {"+s+"}"))}}}function Y(e,t){if(!P){return}var r=t?"visible":"hidden";if(w&&G(e)){G(e).style.visibility=r}else{X("#"+e,"visibility:"+r)}}function q(t){var r=/[\\\"<>\.;]/;var s=r.exec(t)!=null;return s&&typeof encodeURIComponent!=e?encodeURIComponent(t):t}var Z=function(){if(D.ie&&D.win){window.attachEvent("onunload",function(){var e=y.length;for(var t=0;t<e;t++){y[t][0].detachEvent(y[t][1],y[t][2])}var r=f.length;for(var i=0;i<r;i++){V(f[i])}for(var a in D){D[a]=null}D=null;for(var o in s){s[o]=null}s=null})}}();return{registerObject:function(e,t,r,s){if(D.w3&&e&&t){var i={};i.id=e;i.swfVersion=t;i.expressInstall=r;i.callbackFn=s;d[d.length]=i;Y(e,false)}else if(s){s({success:false,id:e})}},getObjectById:function(e){if(D.w3){return R(e)}},embedSWF:function(r,s,i,a,o,n,l,h,p,u){var c={success:false,id:s};if(D.w3&&!(D.wk&&D.wk<312)&&r&&s&&i&&a&&o){Y(s,false);C(function(){i+="";a+="";var d={};if(p&&typeof p===t){for(var f in p){d[f]=p[f]}}d.data=r;d.width=i;d.height=a;var y={};if(h&&typeof h===t){for(var m in h){y[m]=h[m]}}if(l&&typeof l===t){for(var _ in l){if(typeof y.flashvars!=e){y.flashvars+="&"+_+"="+l[_]}else{y.flashvars=_+"="+l[_]}}}if(H(o)){var b=N(d,y,s);if(d.id==s){Y(s,true)}c.success=true;c.ref=b}else if(n&&I()){d.data=n;U(d,y,s,u);return}else{Y(s,true)}if(u){u(c)}})}else if(u){u(c)}},switchOffAutoHideShow:function(){P=false},ua:D,getFlashPlayerVersion:function(){return{major:D.pv[0],minor:D.pv[1],release:D.pv[2]}},hasFlashPlayerVersion:H,createSWF:function(e,t,r){if(D.w3){return N(e,t,r)}else{return undefined}},showExpressInstall:function(e,t,r,s){if(D.w3&&I()){U(e,t,r,s)}},removeSWF:function(e){if(D.w3){V(e)}},createCSS:function(e,t,r,s){if(D.w3){X(e,t,r,s)}},addDomLoadEvent:C,addLoadEvent:E,getQueryParamValue:function(e){var t=h.location.search||h.location.hash;if(t){if(/\?/.test(t)){t=t.split("?")[1]}if(e==null){return q(t)}var r=t.split("&");for(var s=0;s<r.length;s++){if(r[s].substring(0,r[s].indexOf("="))==e){return q(r[s].substring(r[s].indexOf("=")+1))}}}return""},expressInstallCallback:function(){if(v){var e=G(o);if(e&&m){e.parentNode.replaceChild(m,e);if(_){Y(_,true);if(D.ie&&D.win){m.style.display="block"}}if(b){b(g)}}v=false}}}}();t.exports=s},{}],929:[function(e,t,r){t.exports=e(2)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/base/BitmapData.js":2,"awayjs-core/lib/geom/Rectangle":938,"awayjs-core/lib/utils/ColorUtils":948}],930:[function(e,t,r){t.exports=e(4)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/AbstractMethodError.js":4,"awayjs-core/lib/errors/Error":932}],931:[function(e,t,r){t.exports=e(5)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/ArgumentError.js":5,"awayjs-core/lib/errors/Error":932}],932:[function(e,t,r){t.exports=e(6)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/Error.js":6}],933:[function(e,t,r){t.exports=e(7)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/AssetEvent.js":7,"awayjs-core/lib/events/Event":934}],934:[function(e,t,r){t.exports=e(8)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/Event.js":8}],935:[function(e,t,r){t.exports=e(9)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/EventDispatcher.js":9}],936:[function(e,t,r){t.exports=e(16)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Matrix.js":16,"awayjs-core/lib/errors/ArgumentError":931,"awayjs-core/lib/geom/Point":937}],937:[function(e,t,r){t.exports=e(17)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Point.js":17}],938:[function(e,t,r){t.exports=e(18)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/geom/Rectangle.js":18,"awayjs-core/lib/geom/Point":937}],939:[function(e,t,r){t.exports=e(27)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/AssetType.js":27}],940:[function(e,t,r){t.exports=e(33)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/NamedAssetBase.js":33,"awayjs-core/lib/errors/AbstractMethodError":930,"awayjs-core/lib/events/AssetEvent":933,"awayjs-core/lib/events/EventDispatcher":935}],941:[function(e,t,r){t.exports=e(49)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/MipmapGenerator.js":49,"awayjs-core/lib/base/BitmapData":929,"awayjs-core/lib/geom/Matrix":936,"awayjs-core/lib/geom/Rectangle":938}],942:[function(e,t,r){t.exports=e(183)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/node_modules/awayjs-core/lib/textures/RenderTexture.js":183,"awayjs-core/lib/errors/Error":932,"awayjs-core/lib/textures/Texture2DBase":943,"awayjs-core/lib/utils/TextureUtils":949}],943:[function(e,t,r){t.exports=e(51)
},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/Texture2DBase.js":51,"awayjs-core/lib/errors/AbstractMethodError":930,"awayjs-core/lib/textures/MipmapGenerator":941,"awayjs-core/lib/textures/TextureProxyBase":944}],944:[function(e,t,r){t.exports=e(52)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/textures/TextureProxyBase.js":52,"awayjs-core/lib/library/AssetType":939,"awayjs-core/lib/library/NamedAssetBase":940}],945:[function(e,t,r){t.exports=e(54)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/ByteArray.js":54,"awayjs-core/lib/utils/ByteArrayBase":946}],946:[function(e,t,r){t.exports=e(55)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/ByteArrayBase.js":55,"awayjs-core/lib/errors/AbstractMethodError":930}],947:[function(e,t,r){var s=function(){function e(){}e.setElementSize=function(e,t,r){e.style.width=t+"px";e.style.height=r+"px";e["width"]=t;e["height"]=r};e.setElementWidth=function(e,t){e.style.width=t+"px";e["width"]=t};e.setElementHeight=function(e,t){e.style.height=t+"px";e["height"]=t};e.setElementX=function(e,t){e.style.position="absolute";e.style.left=t+"px"};e.setElementY=function(e,t){e.style.position="absolute";e.style.top=t+"px"};e.getElementVisibility=function(e){return e.style.visibility=="visible"};e.setElementVisibility=function(e,t){if(t){e.style.visibility="visible"}else{e.style.visibility="hidden"}};e.setElementAlpha=function(e,t){if(e instanceof HTMLCanvasElement){var r=e.getContext("2d");r.globalAlpha=t}};e.setElementPosition=function(e,t,r,s){if(s===void 0){s=false}if(s){e.style.position="absolute"}else{e.style.position="relative"}e.style.left=t+"px";e.style.top=r+"px"};return e}();t.exports=s},{}],948:[function(e,t,r){t.exports=e(56)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/ColorUtils.js":56}],949:[function(e,t,r){t.exports=e(58)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/utils/TextureUtils.js":58}],950:[function(e,t,r){t.exports=e(69)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/base/SubGeometryBase.js":69,"awayjs-core/lib/errors/AbstractMethodError":954,"awayjs-core/lib/library/NamedAssetBase":959,"awayjs-display/lib/events/SubGeometryEvent":953}],951:[function(e,t,r){var s=function(){function e(){}e.AUTO="auto";e.WEBGL="webgl";e.FLASH="flash";e.NATIVE="native";return e}();t.exports=s},{}],952:[function(e,t,r){t.exports=e(842)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-renderergl/node_modules/awayjs-display/lib/events/StageEvent.js":842,"awayjs-core/lib/events/Event":957}],953:[function(e,t,r){t.exports=e(94)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-display/lib/events/SubGeometryEvent.js":94,"awayjs-core/lib/events/Event":957}],954:[function(e,t,r){t.exports=e(4)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/AbstractMethodError.js":4,"awayjs-core/lib/errors/Error":955}],955:[function(e,t,r){t.exports=e(6)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/errors/Error.js":6}],956:[function(e,t,r){t.exports=e(7)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/AssetEvent.js":7,"awayjs-core/lib/events/Event":957}],957:[function(e,t,r){t.exports=e(8)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/Event.js":8}],958:[function(e,t,r){t.exports=e(9)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/events/EventDispatcher.js":9}],959:[function(e,t,r){t.exports=e(33)},{"/Users/robbateman/WebstormProjects/awayjs-examples/node_modules/awayjs-core/lib/library/NamedAssetBase.js":33,"awayjs-core/lib/errors/AbstractMethodError":954,"awayjs-core/lib/events/AssetEvent":956,"awayjs-core/lib/events/EventDispatcher":958}]},{},[1]);

//# sourceMappingURL=Advanced_MultiPassSponzaDemo.js.map